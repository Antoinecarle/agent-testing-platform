function lb(t,i){for(var s=0;s<i.length;s++){const o=i[s];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const S=Object.getOwnPropertyDescriptor(o,u);S&&Object.defineProperty(t,u,S.get?S:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const S of u)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(u){const S={};return u.integrity&&(S.integrity=u.integrity),u.referrerPolicy&&(S.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?S.credentials="include":u.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function o(u){if(u.ep)return;u.ep=!0;const S=s(u);fetch(u.href,S)}})();function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Id={exports:{}},So={},Md={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function cb(){if(Tg)return ht;Tg=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),b=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),d=Symbol.iterator;function y(M){return M===null||typeof M!="object"?null:(M=d&&M[d]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function h(M,W,pe){this.props=M,this.context=W,this.refs=C,this.updater=pe||_}h.prototype.isReactComponent={},h.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},h.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function p(){}p.prototype=h.prototype;function f(M,W,pe){this.props=M,this.context=W,this.refs=C,this.updater=pe||_}var g=f.prototype=new p;g.constructor=f,j(g,h.prototype),g.isPureReactComponent=!0;var w=Array.isArray,R=Object.prototype.hasOwnProperty,A={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function E(M,W,pe){var me,we={},Re=null,X=null;if(W!=null)for(me in W.ref!==void 0&&(X=W.ref),W.key!==void 0&&(Re=""+W.key),W)R.call(W,me)&&!z.hasOwnProperty(me)&&(we[me]=W[me]);var F=arguments.length-2;if(F===1)we.children=pe;else if(1<F){for(var be=Array(F),oe=0;oe<F;oe++)be[oe]=arguments[oe+2];we.children=be}if(M&&M.defaultProps)for(me in F=M.defaultProps,F)we[me]===void 0&&(we[me]=F[me]);return{$$typeof:t,type:M,key:Re,ref:X,props:we,_owner:A.current}}function P(M,W){return{$$typeof:t,type:M.type,key:W,ref:M.ref,props:M.props,_owner:M._owner}}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function H(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(pe){return W[pe]})}var K=/\/+/g;function U(M,W){return typeof M=="object"&&M!==null&&M.key!=null?H(""+M.key):W.toString(36)}function te(M,W,pe,me,we){var Re=typeof M;(Re==="undefined"||Re==="boolean")&&(M=null);var X=!1;if(M===null)X=!0;else switch(Re){case"string":case"number":X=!0;break;case"object":switch(M.$$typeof){case t:case i:X=!0}}if(X)return X=M,we=we(X),M=me===""?"."+U(X,0):me,w(we)?(pe="",M!=null&&(pe=M.replace(K,"$&/")+"/"),te(we,W,pe,"",function(oe){return oe})):we!=null&&(O(we)&&(we=P(we,pe+(!we.key||X&&X.key===we.key?"":(""+we.key).replace(K,"$&/")+"/")+M)),W.push(we)),1;if(X=0,me=me===""?".":me+":",w(M))for(var F=0;F<M.length;F++){Re=M[F];var be=me+U(Re,F);X+=te(Re,W,pe,be,we)}else if(be=y(M),typeof be=="function")for(M=be.call(M),F=0;!(Re=M.next()).done;)Re=Re.value,be=me+U(Re,F++),X+=te(Re,W,pe,be,we);else if(Re==="object")throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return X}function V(M,W,pe){if(M==null)return M;var me=[],we=0;return te(M,me,"","",function(Re){return W.call(pe,Re,we++)}),me}function de(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(pe){(M._status===0||M._status===-1)&&(M._status=1,M._result=pe)},function(pe){(M._status===0||M._status===-1)&&(M._status=2,M._result=pe)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Q={current:null},Y={transition:null},B={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:Y,ReactCurrentOwner:A};function D(){throw Error("act(...) is not supported in production builds of React.")}return ht.Children={map:V,forEach:function(M,W,pe){V(M,function(){W.apply(this,arguments)},pe)},count:function(M){var W=0;return V(M,function(){W++}),W},toArray:function(M){return V(M,function(W){return W})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ht.Component=h,ht.Fragment=s,ht.Profiler=u,ht.PureComponent=f,ht.StrictMode=o,ht.Suspense=c,ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,ht.act=D,ht.cloneElement=function(M,W,pe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var me=j({},M.props),we=M.key,Re=M.ref,X=M._owner;if(W!=null){if(W.ref!==void 0&&(Re=W.ref,X=A.current),W.key!==void 0&&(we=""+W.key),M.type&&M.type.defaultProps)var F=M.type.defaultProps;for(be in W)R.call(W,be)&&!z.hasOwnProperty(be)&&(me[be]=W[be]===void 0&&F!==void 0?F[be]:W[be])}var be=arguments.length-2;if(be===1)me.children=pe;else if(1<be){F=Array(be);for(var oe=0;oe<be;oe++)F[oe]=arguments[oe+2];me.children=F}return{$$typeof:t,type:M.type,key:we,ref:Re,props:me,_owner:X}},ht.createContext=function(M){return M={$$typeof:b,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:S,_context:M},M.Consumer=M},ht.createElement=E,ht.createFactory=function(M){var W=E.bind(null,M);return W.type=M,W},ht.createRef=function(){return{current:null}},ht.forwardRef=function(M){return{$$typeof:l,render:M}},ht.isValidElement=O,ht.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:de}},ht.memo=function(M,W){return{$$typeof:x,type:M,compare:W===void 0?null:W}},ht.startTransition=function(M){var W=Y.transition;Y.transition={};try{M()}finally{Y.transition=W}},ht.unstable_act=D,ht.useCallback=function(M,W){return Q.current.useCallback(M,W)},ht.useContext=function(M){return Q.current.useContext(M)},ht.useDebugValue=function(){},ht.useDeferredValue=function(M){return Q.current.useDeferredValue(M)},ht.useEffect=function(M,W){return Q.current.useEffect(M,W)},ht.useId=function(){return Q.current.useId()},ht.useImperativeHandle=function(M,W,pe){return Q.current.useImperativeHandle(M,W,pe)},ht.useInsertionEffect=function(M,W){return Q.current.useInsertionEffect(M,W)},ht.useLayoutEffect=function(M,W){return Q.current.useLayoutEffect(M,W)},ht.useMemo=function(M,W){return Q.current.useMemo(M,W)},ht.useReducer=function(M,W,pe){return Q.current.useReducer(M,W,pe)},ht.useRef=function(M){return Q.current.useRef(M)},ht.useState=function(M){return Q.current.useState(M)},ht.useSyncExternalStore=function(M,W,pe){return Q.current.useSyncExternalStore(M,W,pe)},ht.useTransition=function(){return Q.current.useTransition()},ht.version="18.3.1",ht}var Ag;function oh(){return Ag||(Ag=1,Md.exports=cb()),Md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function db(){if(Lg)return So;Lg=1;var t=oh(),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function b(l,c,x){var v,d={},y=null,_=null;x!==void 0&&(y=""+x),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(_=c.ref);for(v in c)o.call(c,v)&&!S.hasOwnProperty(v)&&(d[v]=c[v]);if(l&&l.defaultProps)for(v in c=l.defaultProps,c)d[v]===void 0&&(d[v]=c[v]);return{$$typeof:i,type:l,key:y,ref:_,props:d,_owner:u.current}}return So.Fragment=s,So.jsx=b,So.jsxs=b,So}var zg;function ub(){return zg||(zg=1,Id.exports=db()),Id.exports}var e=ub(),L=oh();const Vo=Um(L),hb=lb({__proto__:null,default:Vo},[L]);var ol={},Bd={exports:{}},zr={},Pd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function pb(){return Dg||(Dg=1,(function(t){function i(Y,B){var D=Y.length;Y.push(B);e:for(;0<D;){var M=D-1>>>1,W=Y[M];if(0<u(W,B))Y[M]=B,Y[D]=W,D=M;else break e}}function s(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var B=Y[0],D=Y.pop();if(D!==B){Y[0]=D;e:for(var M=0,W=Y.length,pe=W>>>1;M<pe;){var me=2*(M+1)-1,we=Y[me],Re=me+1,X=Y[Re];if(0>u(we,D))Re<W&&0>u(X,we)?(Y[M]=X,Y[Re]=D,M=Re):(Y[M]=we,Y[me]=D,M=me);else if(Re<W&&0>u(X,D))Y[M]=X,Y[Re]=D,M=Re;else break e}}return B}function u(Y,B){var D=Y.sortIndex-B.sortIndex;return D!==0?D:Y.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;t.unstable_now=function(){return S.now()}}else{var b=Date,l=b.now();t.unstable_now=function(){return b.now()-l}}var c=[],x=[],v=1,d=null,y=3,_=!1,j=!1,C=!1,h=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(Y){for(var B=s(x);B!==null;){if(B.callback===null)o(x);else if(B.startTime<=Y)o(x),B.sortIndex=B.expirationTime,i(c,B);else break;B=s(x)}}function w(Y){if(C=!1,g(Y),!j)if(s(c)!==null)j=!0,de(R);else{var B=s(x);B!==null&&Q(w,B.startTime-Y)}}function R(Y,B){j=!1,C&&(C=!1,p(E),E=-1),_=!0;var D=y;try{for(g(B),d=s(c);d!==null&&(!(d.expirationTime>B)||Y&&!H());){var M=d.callback;if(typeof M=="function"){d.callback=null,y=d.priorityLevel;var W=M(d.expirationTime<=B);B=t.unstable_now(),typeof W=="function"?d.callback=W:d===s(c)&&o(c),g(B)}else o(c);d=s(c)}if(d!==null)var pe=!0;else{var me=s(x);me!==null&&Q(w,me.startTime-B),pe=!1}return pe}finally{d=null,y=D,_=!1}}var A=!1,z=null,E=-1,P=5,O=-1;function H(){return!(t.unstable_now()-O<P)}function K(){if(z!==null){var Y=t.unstable_now();O=Y;var B=!0;try{B=z(!0,Y)}finally{B?U():(A=!1,z=null)}}else A=!1}var U;if(typeof f=="function")U=function(){f(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,V=te.port2;te.port1.onmessage=K,U=function(){V.postMessage(null)}}else U=function(){h(K,0)};function de(Y){z=Y,A||(A=!0,U())}function Q(Y,B){E=h(function(){Y(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){j||_||(j=!0,de(R))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var D=y;y=B;try{return Y()}finally{y=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,B){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var D=y;y=Y;try{return B()}finally{y=D}},t.unstable_scheduleCallback=function(Y,B,D){var M=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?M+D:M):D=M,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,Y={id:v++,callback:B,priorityLevel:Y,startTime:D,expirationTime:W,sortIndex:-1},D>M?(Y.sortIndex=D,i(x,Y),s(c)===null&&Y===s(x)&&(C?(p(E),E=-1):C=!0,Q(w,D-M))):(Y.sortIndex=W,i(c,Y),j||_||(j=!0,de(R))),Y},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(Y){var B=y;return function(){var D=y;y=B;try{return Y.apply(this,arguments)}finally{y=D}}}})(Od)),Od}var Ig;function fb(){return Ig||(Ig=1,Pd.exports=pb()),Pd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function gb(){if(Mg)return zr;Mg=1;var t=oh(),i=fb();function s(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function S(r,n){b(r,n),b(r+"Capture",n)}function b(r,n){for(u[r]=n,r=0;r<n.length;r++)o.add(n[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},d={};function y(r){return c.call(d,r)?!0:c.call(v,r)?!1:x.test(r)?d[r]=!0:(v[r]=!0,!1)}function _(r,n,a,m){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return m?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,n,a,m){if(n===null||typeof n>"u"||_(r,n,a,m))return!0;if(m)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function C(r,n,a,m,k,T,$){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=m,this.attributeNamespace=k,this.mustUseProperty=a,this.propertyName=r,this.type=n,this.sanitizeURL=T,this.removeEmptyString=$}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){h[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];h[n]=new C(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){h[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){h[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){h[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){h[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){h[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){h[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){h[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function f(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){h[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),h.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){h[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function g(r,n,a,m){var k=h.hasOwnProperty(n)?h[n]:null;(k!==null?k.type!==0:m||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,a,k,m)&&(a=null),m||k===null?y(n)&&(a===null?r.removeAttribute(n):r.setAttribute(n,""+a)):k.mustUseProperty?r[k.propertyName]=a===null?k.type===3?!1:"":a:(n=k.attributeName,m=k.attributeNamespace,a===null?r.removeAttribute(n):(k=k.type,a=k===3||k===4&&a===!0?"":""+a,m?r.setAttributeNS(m,n,a):r.setAttribute(n,a))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),A=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),H=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),Y=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var D=Object.assign,M;function W(r){if(M===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);M=n&&n[1]||""}return`
`+M+r}var pe=!1;function me(r,n){if(!r||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Se){var m=Se}Reflect.construct(r,[],n)}else{try{n.call()}catch(Se){m=Se}r.call(n.prototype)}else{try{throw Error()}catch(Se){m=Se}r()}}catch(Se){if(Se&&m&&typeof Se.stack=="string"){for(var k=Se.stack.split(`
`),T=m.stack.split(`
`),$=k.length-1,q=T.length-1;1<=$&&0<=q&&k[$]!==T[q];)q--;for(;1<=$&&0<=q;$--,q--)if(k[$]!==T[q]){if($!==1||q!==1)do if($--,q--,0>q||k[$]!==T[q]){var re=`
`+k[$].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=$&&0<=q);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?W(r):""}function we(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=me(r.type,!1),r;case 11:return r=me(r.type.render,!1),r;case 1:return r=me(r.type,!0),r;default:return""}}function Re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case A:return"Portal";case P:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case te:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case H:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case K:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return n=r.displayName||null,n!==null?n:Re(r.type)||"Memo";case de:n=r._payload,r=r._init;try{return Re(r(n))}catch{}}return null}function X(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function F(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function be(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oe(r){var n=be(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),m=""+r[n];if(!r.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var k=a.get,T=a.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return k.call(this)},set:function($){m=""+$,T.call(this,$)}}),Object.defineProperty(r,n,{enumerable:a.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function De(r){r._valueTracker||(r._valueTracker=oe(r))}function ee(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var a=n.getValue(),m="";return r&&(m=be(r)?r.checked?"true":"false":r.value),r=m,r!==a?(n.setValue(r),!0):!1}function ke(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function he(r,n){var a=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ie(r,n){var a=n.defaultValue==null?"":n.defaultValue,m=n.checked!=null?n.checked:n.defaultChecked;a=F(n.value!=null?n.value:a),r._wrapperState={initialChecked:m,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Oe(r,n){n=n.checked,n!=null&&g(r,"checked",n,!1)}function Pe(r,n){Oe(r,n);var a=F(n.value),m=n.type;if(a!=null)m==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?We(r,n.type,a):n.hasOwnProperty("defaultValue")&&We(r,n.type,F(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function Ee(r,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var m=n.type;if(!(m!=="submit"&&m!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,a||n===r.value||(r.value=n),r.defaultValue=n}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function We(r,n,a){(n!=="number"||ke(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Z=Array.isArray;function le(r,n,a,m){if(r=r.options,n){n={};for(var k=0;k<a.length;k++)n["$"+a[k]]=!0;for(a=0;a<r.length;a++)k=n.hasOwnProperty("$"+r[a].value),r[a].selected!==k&&(r[a].selected=k),k&&m&&(r[a].defaultSelected=!0)}else{for(a=""+F(a),n=null,k=0;k<r.length;k++){if(r[k].value===a){r[k].selected=!0,m&&(r[k].defaultSelected=!0);return}n!==null||r[k].disabled||(n=r[k])}n!==null&&(n.selected=!0)}}function Fe(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ze(r,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(s(92));if(Z(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),a=n}r._wrapperState={initialValue:F(a)}}function et(r,n){var a=F(n.value),m=F(n.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),n.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),m!=null&&(r.defaultValue=""+m)}function dt(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function Vt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?Vt(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wt,Tt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,m,k){MSApp.execUnsafeLocalFunction(function(){return r(n,a,m,k)})}:r})(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=wt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function mt(r,n){if(n){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=n;return}}r.textContent=n}var Lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(Lt).forEach(function(r){ut.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),Lt[n]=Lt[r]})});function Mr(r,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||Lt.hasOwnProperty(r)&&Lt[r]?(""+n).trim():n+"px"}function rr(r,n){r=r.style;for(var a in n)if(n.hasOwnProperty(a)){var m=a.indexOf("--")===0,k=Mr(a,n[a],m);a==="float"&&(a="cssFloat"),m?r.setProperty(a,k):r[a]=k}}var Ei=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(r,n){if(n){if(Ei[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function pr(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function ne(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ne=null,Ge=null,ct=null;function yt(r){if(r=oo(r)){if(typeof Ne!="function")throw Error(s(280));var n=r.stateNode;n&&(n=_a(n),Ne(r.stateNode,r.type,n))}}function Kt(r){Ge?ct?ct.push(r):ct=[r]:Ge=r}function ft(){if(Ge){var r=Ge,n=ct;if(ct=Ge=null,yt(r),n)for(r=0;r<n.length;r++)yt(n[r])}}function qt(r,n){return r(n)}function Br(){}var Hr=!1;function Zr(r,n,a){if(Hr)return r(n,a);Hr=!0;try{return qt(r,n,a)}finally{Hr=!1,(Ge!==null||ct!==null)&&(Br(),ft())}}function kr(r,n){var a=r.stateNode;if(a===null)return null;var m=_a(a);if(m===null)return null;a=m[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Pr=!1;if(l)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{Pr=!1}function fi(r,n,a,m,k,T,$,q,re){var Se=Array.prototype.slice.call(arguments,3);try{n.apply(a,Se)}catch(ze){this.onError(ze)}}var jr=!1,lr=null,ti=!1,I=null,G={onError:function(r){jr=!0,lr=r}};function _e(r,n,a,m,k,T,$,q,re){jr=!1,lr=null,fi.apply(G,arguments)}function je(r,n,a,m,k,T,$,q,re){if(_e.apply(this,arguments),jr){if(jr){var Se=lr;jr=!1,lr=null}else throw Error(s(198));ti||(ti=!0,I=Se)}}function ye(r){var n=r,a=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,(n.flags&4098)!==0&&(a=n.return),r=n.return;while(r)}return n.tag===3?a:null}function Ke(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function He(r){if(ye(r)!==r)throw Error(s(188))}function vt(r){var n=r.alternate;if(!n){if(n=ye(r),n===null)throw Error(s(188));return n!==r?null:r}for(var a=r,m=n;;){var k=a.return;if(k===null)break;var T=k.alternate;if(T===null){if(m=k.return,m!==null){a=m;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===a)return He(k),r;if(T===m)return He(k),n;T=T.sibling}throw Error(s(188))}if(a.return!==m.return)a=k,m=T;else{for(var $=!1,q=k.child;q;){if(q===a){$=!0,a=k,m=T;break}if(q===m){$=!0,m=k,a=T;break}q=q.sibling}if(!$){for(q=T.child;q;){if(q===a){$=!0,a=T,m=k;break}if(q===m){$=!0,m=T,a=k;break}q=q.sibling}if(!$)throw Error(s(189))}}if(a.alternate!==m)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:n}function Hi(r){return r=vt(r),r!==null?Yn(r):null}function Yn(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=Yn(r);if(n!==null)return n;r=r.sibling}return null}var Ri=i.unstable_scheduleCallback,Xn=i.unstable_cancelCallback,v1=i.unstable_shouldYield,b1=i.unstable_requestPaint,Nt=i.unstable_now,_1=i.unstable_getCurrentPriorityLevel,ec=i.unstable_ImmediatePriority,ip=i.unstable_UserBlockingPriority,ta=i.unstable_NormalPriority,S1=i.unstable_LowPriority,np=i.unstable_IdlePriority,ra=null,gi=null;function w1(r){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(ra,r,void 0,(r.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:j1,C1=Math.log,k1=Math.LN2;function j1(r){return r>>>=0,r===0?32:31-(C1(r)/k1|0)|0}var ia=64,na=4194304;function Ns(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function sa(r,n){var a=r.pendingLanes;if(a===0)return 0;var m=0,k=r.suspendedLanes,T=r.pingedLanes,$=a&268435455;if($!==0){var q=$&~k;q!==0?m=Ns(q):(T&=$,T!==0&&(m=Ns(T)))}else $=a&~k,$!==0?m=Ns($):T!==0&&(m=Ns(T));if(m===0)return 0;if(n!==0&&n!==m&&(n&k)===0&&(k=m&-m,T=n&-n,k>=T||k===16&&(T&4194240)!==0))return n;if((m&4)!==0&&(m|=a&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=m;0<n;)a=31-ri(n),k=1<<a,m|=r[a],n&=~k;return m}function E1(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R1(r,n){for(var a=r.suspendedLanes,m=r.pingedLanes,k=r.expirationTimes,T=r.pendingLanes;0<T;){var $=31-ri(T),q=1<<$,re=k[$];re===-1?((q&a)===0||(q&m)!==0)&&(k[$]=E1(q,n)):re<=n&&(r.expiredLanes|=q),T&=~q}}function tc(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function sp(){var r=ia;return ia<<=1,(ia&4194240)===0&&(ia=64),r}function rc(r){for(var n=[],a=0;31>a;a++)n.push(r);return n}function Hs(r,n,a){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-ri(n),r[n]=a}function T1(r,n){var a=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<a;){var k=31-ri(a),T=1<<k;n[k]=0,m[k]=-1,r[k]=-1,a&=~T}}function ic(r,n){var a=r.entangledLanes|=n;for(r=r.entanglements;a;){var m=31-ri(a),k=1<<m;k&n|r[m]&n&&(r[m]|=n),a&=~k}}var _t=0;function op(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ap,nc,lp,cp,dp,sc=!1,oa=[],Ui=null,Vi=null,Ki=null,Us=new Map,Vs=new Map,qi=[],A1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function up(r,n){switch(r){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Us.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(n.pointerId)}}function Ks(r,n,a,m,k,T){return r===null||r.nativeEvent!==T?(r={blockedOn:n,domEventName:a,eventSystemFlags:m,nativeEvent:T,targetContainers:[k]},n!==null&&(n=oo(n),n!==null&&nc(n)),r):(r.eventSystemFlags|=m,n=r.targetContainers,k!==null&&n.indexOf(k)===-1&&n.push(k),r)}function L1(r,n,a,m,k){switch(n){case"focusin":return Ui=Ks(Ui,r,n,a,m,k),!0;case"dragenter":return Vi=Ks(Vi,r,n,a,m,k),!0;case"mouseover":return Ki=Ks(Ki,r,n,a,m,k),!0;case"pointerover":var T=k.pointerId;return Us.set(T,Ks(Us.get(T)||null,r,n,a,m,k)),!0;case"gotpointercapture":return T=k.pointerId,Vs.set(T,Ks(Vs.get(T)||null,r,n,a,m,k)),!0}return!1}function hp(r){var n=jn(r.target);if(n!==null){var a=ye(n);if(a!==null){if(n=a.tag,n===13){if(n=Ke(a),n!==null){r.blockedOn=n,dp(r.priority,function(){lp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function aa(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var a=ac(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var m=new a.constructor(a.type,a);Cr=m,a.target.dispatchEvent(m),Cr=null}else return n=oo(a),n!==null&&nc(n),r.blockedOn=a,!1;n.shift()}return!0}function pp(r,n,a){aa(r)&&a.delete(n)}function z1(){sc=!1,Ui!==null&&aa(Ui)&&(Ui=null),Vi!==null&&aa(Vi)&&(Vi=null),Ki!==null&&aa(Ki)&&(Ki=null),Us.forEach(pp),Vs.forEach(pp)}function qs(r,n){r.blockedOn===n&&(r.blockedOn=null,sc||(sc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,z1)))}function Gs(r){function n(k){return qs(k,r)}if(0<oa.length){qs(oa[0],r);for(var a=1;a<oa.length;a++){var m=oa[a];m.blockedOn===r&&(m.blockedOn=null)}}for(Ui!==null&&qs(Ui,r),Vi!==null&&qs(Vi,r),Ki!==null&&qs(Ki,r),Us.forEach(n),Vs.forEach(n),a=0;a<qi.length;a++)m=qi[a],m.blockedOn===r&&(m.blockedOn=null);for(;0<qi.length&&(a=qi[0],a.blockedOn===null);)hp(a),a.blockedOn===null&&qi.shift()}var Jn=w.ReactCurrentBatchConfig,la=!0;function D1(r,n,a,m){var k=_t,T=Jn.transition;Jn.transition=null;try{_t=1,oc(r,n,a,m)}finally{_t=k,Jn.transition=T}}function I1(r,n,a,m){var k=_t,T=Jn.transition;Jn.transition=null;try{_t=4,oc(r,n,a,m)}finally{_t=k,Jn.transition=T}}function oc(r,n,a,m){if(la){var k=ac(r,n,a,m);if(k===null)Cc(r,n,m,ca,a),up(r,m);else if(L1(k,r,n,a,m))m.stopPropagation();else if(up(r,m),n&4&&-1<A1.indexOf(r)){for(;k!==null;){var T=oo(k);if(T!==null&&ap(T),T=ac(r,n,a,m),T===null&&Cc(r,n,m,ca,a),T===k)break;k=T}k!==null&&m.stopPropagation()}else Cc(r,n,m,null,a)}}var ca=null;function ac(r,n,a,m){if(ca=null,r=ne(m),r=jn(r),r!==null)if(n=ye(r),n===null)r=null;else if(a=n.tag,a===13){if(r=Ke(n),r!==null)return r;r=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return ca=r,null}function fp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_1()){case ec:return 1;case ip:return 4;case ta:case S1:return 16;case np:return 536870912;default:return 16}default:return 16}}var Gi=null,lc=null,da=null;function gp(){if(da)return da;var r,n=lc,a=n.length,m,k="value"in Gi?Gi.value:Gi.textContent,T=k.length;for(r=0;r<a&&n[r]===k[r];r++);var $=a-r;for(m=1;m<=$&&n[a-m]===k[T-m];m++);return da=k.slice(r,1<m?1-m:void 0)}function ua(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function ha(){return!0}function xp(){return!1}function Or(r){function n(a,m,k,T,$){this._reactName=a,this._targetInst=k,this.type=m,this.nativeEvent=T,this.target=$,this.currentTarget=null;for(var q in r)r.hasOwnProperty(q)&&(a=r[q],this[q]=a?a(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ha:xp,this.isPropagationStopped=xp,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),n}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=Or(Qn),Ys=D({},Qn,{view:0,detail:0}),M1=Or(Ys),dc,uc,Xs,pa=D({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xs&&(Xs&&r.type==="mousemove"?(dc=r.screenX-Xs.screenX,uc=r.screenY-Xs.screenY):uc=dc=0,Xs=r),dc)},movementY:function(r){return"movementY"in r?r.movementY:uc}}),mp=Or(pa),B1=D({},pa,{dataTransfer:0}),P1=Or(B1),O1=D({},Ys,{relatedTarget:0}),hc=Or(O1),$1=D({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),F1=Or($1),W1=D({},Qn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),N1=Or(W1),H1=D({},Qn,{data:0}),yp=Or(H1),U1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=K1[r])?!!n[r]:!1}function pc(){return q1}var G1=D({},Ys,{key:function(r){if(r.key){var n=U1[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=ua(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?V1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(r){return r.type==="keypress"?ua(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ua(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Y1=Or(G1),X1=D({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vp=Or(X1),J1=D({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),Q1=Or(J1),Z1=D({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=Or(Z1),tv=D({},pa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),rv=Or(tv),iv=[9,13,27,32],fc=l&&"CompositionEvent"in window,Js=null;l&&"documentMode"in document&&(Js=document.documentMode);var nv=l&&"TextEvent"in window&&!Js,bp=l&&(!fc||Js&&8<Js&&11>=Js),_p=" ",Sp=!1;function wp(r,n){switch(r){case"keyup":return iv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zn=!1;function sv(r,n){switch(r){case"compositionend":return Cp(n);case"keypress":return n.which!==32?null:(Sp=!0,_p);case"textInput":return r=n.data,r===_p&&Sp?null:r;default:return null}}function ov(r,n){if(Zn)return r==="compositionend"||!fc&&wp(r,n)?(r=gp(),da=lc=Gi=null,Zn=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bp&&n.locale!=="ko"?null:n.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kp(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!av[r.type]:n==="textarea"}function jp(r,n,a,m){Kt(m),n=ya(n,"onChange"),0<n.length&&(a=new cc("onChange","change",null,a,m),r.push({event:a,listeners:n}))}var Qs=null,Zs=null;function lv(r){Up(r,0)}function fa(r){var n=ns(r);if(ee(n))return r}function cv(r,n){if(r==="change")return n}var Ep=!1;if(l){var gc;if(l){var xc="oninput"in document;if(!xc){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),xc=typeof Rp.oninput=="function"}gc=xc}else gc=!1;Ep=gc&&(!document.documentMode||9<document.documentMode)}function Tp(){Qs&&(Qs.detachEvent("onpropertychange",Ap),Zs=Qs=null)}function Ap(r){if(r.propertyName==="value"&&fa(Zs)){var n=[];jp(n,Zs,r,ne(r)),Zr(lv,n)}}function dv(r,n,a){r==="focusin"?(Tp(),Qs=n,Zs=a,Qs.attachEvent("onpropertychange",Ap)):r==="focusout"&&Tp()}function uv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fa(Zs)}function hv(r,n){if(r==="click")return fa(n)}function pv(r,n){if(r==="input"||r==="change")return fa(n)}function fv(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var ii=typeof Object.is=="function"?Object.is:fv;function eo(r,n){if(ii(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var a=Object.keys(r),m=Object.keys(n);if(a.length!==m.length)return!1;for(m=0;m<a.length;m++){var k=a[m];if(!c.call(n,k)||!ii(r[k],n[k]))return!1}return!0}function Lp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zp(r,n){var a=Lp(r);r=0;for(var m;a;){if(a.nodeType===3){if(m=r+a.textContent.length,r<=n&&m>=n)return{node:a,offset:n-r};r=m}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lp(a)}}function Dp(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Dp(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function Ip(){for(var r=window,n=ke();n instanceof r.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)r=n.contentWindow;else break;n=ke(r.document)}return n}function mc(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function gv(r){var n=Ip(),a=r.focusedElem,m=r.selectionRange;if(n!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(m!==null&&mc(a)){if(n=m.start,r=m.end,r===void 0&&(r=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(r,a.value.length);else if(r=(n=a.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var k=a.textContent.length,T=Math.min(m.start,k);m=m.end===void 0?T:Math.min(m.end,k),!r.extend&&T>m&&(k=m,m=T,T=k),k=zp(a,T);var $=zp(a,m);k&&$&&(r.rangeCount!==1||r.anchorNode!==k.node||r.anchorOffset!==k.offset||r.focusNode!==$.node||r.focusOffset!==$.offset)&&(n=n.createRange(),n.setStart(k.node,k.offset),r.removeAllRanges(),T>m?(r.addRange(n),r.extend($.node,$.offset)):(n.setEnd($.node,$.offset),r.addRange(n)))}}for(n=[],r=a;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)r=n[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var xv=l&&"documentMode"in document&&11>=document.documentMode,es=null,yc=null,to=null,vc=!1;function Mp(r,n,a){var m=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vc||es==null||es!==ke(m)||(m=es,"selectionStart"in m&&mc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),to&&eo(to,m)||(to=m,m=ya(yc,"onSelect"),0<m.length&&(n=new cc("onSelect","select",null,n,a),r.push({event:n,listeners:m}),n.target=es)))}function ga(r,n){var a={};return a[r.toLowerCase()]=n.toLowerCase(),a["Webkit"+r]="webkit"+n,a["Moz"+r]="moz"+n,a}var ts={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},bc={},Bp={};l&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function xa(r){if(bc[r])return bc[r];if(!ts[r])return r;var n=ts[r],a;for(a in n)if(n.hasOwnProperty(a)&&a in Bp)return bc[r]=n[a];return r}var Pp=xa("animationend"),Op=xa("animationiteration"),$p=xa("animationstart"),Fp=xa("transitionend"),Wp=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(r,n){Wp.set(r,n),S(n,[r])}for(var _c=0;_c<Np.length;_c++){var Sc=Np[_c],mv=Sc.toLowerCase(),yv=Sc[0].toUpperCase()+Sc.slice(1);Yi(mv,"on"+yv)}Yi(Pp,"onAnimationEnd"),Yi(Op,"onAnimationIteration"),Yi($p,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(Fp,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function Hp(r,n,a){var m=r.type||"unknown-event";r.currentTarget=a,je(m,n,void 0,r),r.currentTarget=null}function Up(r,n){n=(n&4)!==0;for(var a=0;a<r.length;a++){var m=r[a],k=m.event;m=m.listeners;e:{var T=void 0;if(n)for(var $=m.length-1;0<=$;$--){var q=m[$],re=q.instance,Se=q.currentTarget;if(q=q.listener,re!==T&&k.isPropagationStopped())break e;Hp(k,q,Se),T=re}else for($=0;$<m.length;$++){if(q=m[$],re=q.instance,Se=q.currentTarget,q=q.listener,re!==T&&k.isPropagationStopped())break e;Hp(k,q,Se),T=re}}}if(ti)throw r=I,ti=!1,I=null,r}function Et(r,n){var a=n[Ac];a===void 0&&(a=n[Ac]=new Set);var m=r+"__bubble";a.has(m)||(Vp(n,r,2,!1),a.add(m))}function wc(r,n,a){var m=0;n&&(m|=4),Vp(a,r,m,n)}var ma="_reactListening"+Math.random().toString(36).slice(2);function io(r){if(!r[ma]){r[ma]=!0,o.forEach(function(a){a!=="selectionchange"&&(vv.has(a)||wc(a,!1,r),wc(a,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[ma]||(n[ma]=!0,wc("selectionchange",!1,n))}}function Vp(r,n,a,m){switch(fp(n)){case 1:var k=D1;break;case 4:k=I1;break;default:k=oc}a=k.bind(null,n,a,r),k=void 0,!Pr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(k=!0),m?k!==void 0?r.addEventListener(n,a,{capture:!0,passive:k}):r.addEventListener(n,a,!0):k!==void 0?r.addEventListener(n,a,{passive:k}):r.addEventListener(n,a,!1)}function Cc(r,n,a,m,k){var T=m;if((n&1)===0&&(n&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var q=m.stateNode.containerInfo;if(q===k||q.nodeType===8&&q.parentNode===k)break;if($===4)for($=m.return;$!==null;){var re=$.tag;if((re===3||re===4)&&(re=$.stateNode.containerInfo,re===k||re.nodeType===8&&re.parentNode===k))return;$=$.return}for(;q!==null;){if($=jn(q),$===null)return;if(re=$.tag,re===5||re===6){m=T=$;continue e}q=q.parentNode}}m=m.return}Zr(function(){var Se=T,ze=ne(a),Be=[];e:{var Te=Wp.get(r);if(Te!==void 0){var qe=cc,Je=r;switch(r){case"keypress":if(ua(a)===0)break e;case"keydown":case"keyup":qe=Y1;break;case"focusin":Je="focus",qe=hc;break;case"focusout":Je="blur",qe=hc;break;case"beforeblur":case"afterblur":qe=hc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Q1;break;case Pp:case Op:case $p:qe=F1;break;case Fp:qe=ev;break;case"scroll":qe=M1;break;case"wheel":qe=rv;break;case"copy":case"cut":case"paste":qe=N1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=vp}var tt=(n&4)!==0,Ht=!tt&&r==="scroll",ue=tt?Te!==null?Te+"Capture":null:Te;tt=[];for(var ie=Se,fe;ie!==null;){fe=ie;var $e=fe.stateNode;if(fe.tag===5&&$e!==null&&(fe=$e,ue!==null&&($e=kr(ie,ue),$e!=null&&tt.push(no(ie,$e,fe)))),Ht)break;ie=ie.return}0<tt.length&&(Te=new qe(Te,Je,null,a,ze),Be.push({event:Te,listeners:tt}))}}if((n&7)===0){e:{if(Te=r==="mouseover"||r==="pointerover",qe=r==="mouseout"||r==="pointerout",Te&&a!==Cr&&(Je=a.relatedTarget||a.fromElement)&&(jn(Je)||Je[Ti]))break e;if((qe||Te)&&(Te=ze.window===ze?ze:(Te=ze.ownerDocument)?Te.defaultView||Te.parentWindow:window,qe?(Je=a.relatedTarget||a.toElement,qe=Se,Je=Je?jn(Je):null,Je!==null&&(Ht=ye(Je),Je!==Ht||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(qe=null,Je=Se),qe!==Je)){if(tt=mp,$e="onMouseLeave",ue="onMouseEnter",ie="mouse",(r==="pointerout"||r==="pointerover")&&(tt=vp,$e="onPointerLeave",ue="onPointerEnter",ie="pointer"),Ht=qe==null?Te:ns(qe),fe=Je==null?Te:ns(Je),Te=new tt($e,ie+"leave",qe,a,ze),Te.target=Ht,Te.relatedTarget=fe,$e=null,jn(ze)===Se&&(tt=new tt(ue,ie+"enter",Je,a,ze),tt.target=fe,tt.relatedTarget=Ht,$e=tt),Ht=$e,qe&&Je)t:{for(tt=qe,ue=Je,ie=0,fe=tt;fe;fe=rs(fe))ie++;for(fe=0,$e=ue;$e;$e=rs($e))fe++;for(;0<ie-fe;)tt=rs(tt),ie--;for(;0<fe-ie;)ue=rs(ue),fe--;for(;ie--;){if(tt===ue||ue!==null&&tt===ue.alternate)break t;tt=rs(tt),ue=rs(ue)}tt=null}else tt=null;qe!==null&&Kp(Be,Te,qe,tt,!1),Je!==null&&Ht!==null&&Kp(Be,Ht,Je,tt,!0)}}e:{if(Te=Se?ns(Se):window,qe=Te.nodeName&&Te.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Te.type==="file")var rt=cv;else if(kp(Te))if(Ep)rt=pv;else{rt=uv;var st=dv}else(qe=Te.nodeName)&&qe.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(rt=hv);if(rt&&(rt=rt(r,Se))){jp(Be,rt,a,ze);break e}st&&st(r,Te,Se),r==="focusout"&&(st=Te._wrapperState)&&st.controlled&&Te.type==="number"&&We(Te,"number",Te.value)}switch(st=Se?ns(Se):window,r){case"focusin":(kp(st)||st.contentEditable==="true")&&(es=st,yc=Se,to=null);break;case"focusout":to=yc=es=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Mp(Be,a,ze);break;case"selectionchange":if(xv)break;case"keydown":case"keyup":Mp(Be,a,ze)}var ot;if(fc)e:{switch(r){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Zn?wp(r,a)&&(lt="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(lt="onCompositionStart");lt&&(bp&&a.locale!=="ko"&&(Zn||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Zn&&(ot=gp()):(Gi=ze,lc="value"in Gi?Gi.value:Gi.textContent,Zn=!0)),st=ya(Se,lt),0<st.length&&(lt=new yp(lt,r,null,a,ze),Be.push({event:lt,listeners:st}),ot?lt.data=ot:(ot=Cp(a),ot!==null&&(lt.data=ot)))),(ot=nv?sv(r,a):ov(r,a))&&(Se=ya(Se,"onBeforeInput"),0<Se.length&&(ze=new yp("onBeforeInput","beforeinput",null,a,ze),Be.push({event:ze,listeners:Se}),ze.data=ot))}Up(Be,n)})}function no(r,n,a){return{instance:r,listener:n,currentTarget:a}}function ya(r,n){for(var a=n+"Capture",m=[];r!==null;){var k=r,T=k.stateNode;k.tag===5&&T!==null&&(k=T,T=kr(r,a),T!=null&&m.unshift(no(r,T,k)),T=kr(r,n),T!=null&&m.push(no(r,T,k))),r=r.return}return m}function rs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Kp(r,n,a,m,k){for(var T=n._reactName,$=[];a!==null&&a!==m;){var q=a,re=q.alternate,Se=q.stateNode;if(re!==null&&re===m)break;q.tag===5&&Se!==null&&(q=Se,k?(re=kr(a,T),re!=null&&$.unshift(no(a,re,q))):k||(re=kr(a,T),re!=null&&$.push(no(a,re,q)))),a=a.return}$.length!==0&&r.push({event:n,listeners:$})}var bv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function qp(r){return(typeof r=="string"?r:""+r).replace(bv,`
`).replace(_v,"")}function va(r,n,a){if(n=qp(n),qp(r)!==n&&a)throw Error(s(425))}function ba(){}var kc=null,jc=null;function Ec(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(r){return Gp.resolve(null).then(r).catch(Cv)}:Rc;function Cv(r){setTimeout(function(){throw r})}function Tc(r,n){var a=n,m=0;do{var k=a.nextSibling;if(r.removeChild(a),k&&k.nodeType===8)if(a=k.data,a==="/$"){if(m===0){r.removeChild(k),Gs(n);return}m--}else a!=="$"&&a!=="$?"&&a!=="$!"||m++;a=k}while(a);Gs(n)}function Xi(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Yp(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return r;n--}else a==="/$"&&n++}r=r.previousSibling}return null}var is=Math.random().toString(36).slice(2),xi="__reactFiber$"+is,so="__reactProps$"+is,Ti="__reactContainer$"+is,Ac="__reactEvents$"+is,kv="__reactListeners$"+is,jv="__reactHandles$"+is;function jn(r){var n=r[xi];if(n)return n;for(var a=r.parentNode;a;){if(n=a[Ti]||a[xi]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(r=Yp(r);r!==null;){if(a=r[xi])return a;r=Yp(r)}return n}r=a,a=r.parentNode}return null}function oo(r){return r=r[xi]||r[Ti],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ns(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function _a(r){return r[so]||null}var Lc=[],ss=-1;function Ji(r){return{current:r}}function Rt(r){0>ss||(r.current=Lc[ss],Lc[ss]=null,ss--)}function kt(r,n){ss++,Lc[ss]=r.current,r.current=n}var Qi={},fr=Ji(Qi),Er=Ji(!1),En=Qi;function os(r,n){var a=r.type.contextTypes;if(!a)return Qi;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===n)return m.__reactInternalMemoizedMaskedChildContext;var k={},T;for(T in a)k[T]=n[T];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=k),k}function Rr(r){return r=r.childContextTypes,r!=null}function Sa(){Rt(Er),Rt(fr)}function Xp(r,n,a){if(fr.current!==Qi)throw Error(s(168));kt(fr,n),kt(Er,a)}function Jp(r,n,a){var m=r.stateNode;if(n=n.childContextTypes,typeof m.getChildContext!="function")return a;m=m.getChildContext();for(var k in m)if(!(k in n))throw Error(s(108,X(r)||"Unknown",k));return D({},a,m)}function wa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Qi,En=fr.current,kt(fr,r),kt(Er,Er.current),!0}function Qp(r,n,a){var m=r.stateNode;if(!m)throw Error(s(169));a?(r=Jp(r,n,En),m.__reactInternalMemoizedMergedChildContext=r,Rt(Er),Rt(fr),kt(fr,r)):Rt(Er),kt(Er,a)}var Ai=null,Ca=!1,zc=!1;function Zp(r){Ai===null?Ai=[r]:Ai.push(r)}function Ev(r){Ca=!0,Zp(r)}function Zi(){if(!zc&&Ai!==null){zc=!0;var r=0,n=_t;try{var a=Ai;for(_t=1;r<a.length;r++){var m=a[r];do m=m(!0);while(m!==null)}Ai=null,Ca=!1}catch(k){throw Ai!==null&&(Ai=Ai.slice(r+1)),Ri(ec,Zi),k}finally{_t=n,zc=!1}}return null}var as=[],ls=0,ka=null,ja=0,Ur=[],Vr=0,Rn=null,Li=1,zi="";function Tn(r,n){as[ls++]=ja,as[ls++]=ka,ka=r,ja=n}function ef(r,n,a){Ur[Vr++]=Li,Ur[Vr++]=zi,Ur[Vr++]=Rn,Rn=r;var m=Li;r=zi;var k=32-ri(m)-1;m&=~(1<<k),a+=1;var T=32-ri(n)+k;if(30<T){var $=k-k%5;T=(m&(1<<$)-1).toString(32),m>>=$,k-=$,Li=1<<32-ri(n)+k|a<<k|m,zi=T+r}else Li=1<<T|a<<k|m,zi=r}function Dc(r){r.return!==null&&(Tn(r,1),ef(r,1,0))}function Ic(r){for(;r===ka;)ka=as[--ls],as[ls]=null,ja=as[--ls],as[ls]=null;for(;r===Rn;)Rn=Ur[--Vr],Ur[Vr]=null,zi=Ur[--Vr],Ur[Vr]=null,Li=Ur[--Vr],Ur[Vr]=null}var $r=null,Fr=null,At=!1,ni=null;function tf(r,n){var a=Yr(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=r,n=r.deletions,n===null?(r.deletions=[a],r.flags|=16):n.push(a)}function rf(r,n){switch(r.tag){case 5:var a=r.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,$r=r,Fr=Xi(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,$r=r,Fr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=Rn!==null?{id:Li,overflow:zi}:null,r.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=Yr(18,null,null,0),a.stateNode=n,a.return=r,r.child=a,$r=r,Fr=null,!0):!1;default:return!1}}function Mc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Bc(r){if(At){var n=Fr;if(n){var a=n;if(!rf(r,n)){if(Mc(r))throw Error(s(418));n=Xi(a.nextSibling);var m=$r;n&&rf(r,n)?tf(m,a):(r.flags=r.flags&-4097|2,At=!1,$r=r)}}else{if(Mc(r))throw Error(s(418));r.flags=r.flags&-4097|2,At=!1,$r=r}}}function nf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;$r=r}function Ea(r){if(r!==$r)return!1;if(!At)return nf(r),At=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!Ec(r.type,r.memoizedProps)),n&&(n=Fr)){if(Mc(r))throw sf(),Error(s(418));for(;n;)tf(r,n),n=Xi(n.nextSibling)}if(nf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(n===0){Fr=Xi(r.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}r=r.nextSibling}Fr=null}}else Fr=$r?Xi(r.stateNode.nextSibling):null;return!0}function sf(){for(var r=Fr;r;)r=Xi(r.nextSibling)}function cs(){Fr=$r=null,At=!1}function Pc(r){ni===null?ni=[r]:ni.push(r)}var Rv=w.ReactCurrentBatchConfig;function ao(r,n,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var m=a.stateNode}if(!m)throw Error(s(147,r));var k=m,T=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===T?n.ref:(n=function($){var q=k.refs;$===null?delete q[T]:q[T]=$},n._stringRef=T,n)}if(typeof r!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,r))}return r}function Ra(r,n){throw r=Object.prototype.toString.call(n),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function of(r){var n=r._init;return n(r._payload)}function af(r){function n(ue,ie){if(r){var fe=ue.deletions;fe===null?(ue.deletions=[ie],ue.flags|=16):fe.push(ie)}}function a(ue,ie){if(!r)return null;for(;ie!==null;)n(ue,ie),ie=ie.sibling;return null}function m(ue,ie){for(ue=new Map;ie!==null;)ie.key!==null?ue.set(ie.key,ie):ue.set(ie.index,ie),ie=ie.sibling;return ue}function k(ue,ie){return ue=ln(ue,ie),ue.index=0,ue.sibling=null,ue}function T(ue,ie,fe){return ue.index=fe,r?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<ie?(ue.flags|=2,ie):fe):(ue.flags|=2,ie)):(ue.flags|=1048576,ie)}function $(ue){return r&&ue.alternate===null&&(ue.flags|=2),ue}function q(ue,ie,fe,$e){return ie===null||ie.tag!==6?(ie=Rd(fe,ue.mode,$e),ie.return=ue,ie):(ie=k(ie,fe),ie.return=ue,ie)}function re(ue,ie,fe,$e){var rt=fe.type;return rt===z?ze(ue,ie,fe.props.children,$e,fe.key):ie!==null&&(ie.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===de&&of(rt)===ie.type)?($e=k(ie,fe.props),$e.ref=ao(ue,ie,fe),$e.return=ue,$e):($e=Qa(fe.type,fe.key,fe.props,null,ue.mode,$e),$e.ref=ao(ue,ie,fe),$e.return=ue,$e)}function Se(ue,ie,fe,$e){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=Td(fe,ue.mode,$e),ie.return=ue,ie):(ie=k(ie,fe.children||[]),ie.return=ue,ie)}function ze(ue,ie,fe,$e,rt){return ie===null||ie.tag!==7?(ie=Pn(fe,ue.mode,$e,rt),ie.return=ue,ie):(ie=k(ie,fe),ie.return=ue,ie)}function Be(ue,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Rd(""+ie,ue.mode,fe),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case R:return fe=Qa(ie.type,ie.key,ie.props,null,ue.mode,fe),fe.ref=ao(ue,null,ie),fe.return=ue,fe;case A:return ie=Td(ie,ue.mode,fe),ie.return=ue,ie;case de:var $e=ie._init;return Be(ue,$e(ie._payload),fe)}if(Z(ie)||B(ie))return ie=Pn(ie,ue.mode,fe,null),ie.return=ue,ie;Ra(ue,ie)}return null}function Te(ue,ie,fe,$e){var rt=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return rt!==null?null:q(ue,ie,""+fe,$e);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:return fe.key===rt?re(ue,ie,fe,$e):null;case A:return fe.key===rt?Se(ue,ie,fe,$e):null;case de:return rt=fe._init,Te(ue,ie,rt(fe._payload),$e)}if(Z(fe)||B(fe))return rt!==null?null:ze(ue,ie,fe,$e,null);Ra(ue,fe)}return null}function qe(ue,ie,fe,$e,rt){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ue=ue.get(fe)||null,q(ie,ue,""+$e,rt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case R:return ue=ue.get($e.key===null?fe:$e.key)||null,re(ie,ue,$e,rt);case A:return ue=ue.get($e.key===null?fe:$e.key)||null,Se(ie,ue,$e,rt);case de:var st=$e._init;return qe(ue,ie,fe,st($e._payload),rt)}if(Z($e)||B($e))return ue=ue.get(fe)||null,ze(ie,ue,$e,rt,null);Ra(ie,$e)}return null}function Je(ue,ie,fe,$e){for(var rt=null,st=null,ot=ie,lt=ie=0,sr=null;ot!==null&&lt<fe.length;lt++){ot.index>lt?(sr=ot,ot=null):sr=ot.sibling;var xt=Te(ue,ot,fe[lt],$e);if(xt===null){ot===null&&(ot=sr);break}r&&ot&&xt.alternate===null&&n(ue,ot),ie=T(xt,ie,lt),st===null?rt=xt:st.sibling=xt,st=xt,ot=sr}if(lt===fe.length)return a(ue,ot),At&&Tn(ue,lt),rt;if(ot===null){for(;lt<fe.length;lt++)ot=Be(ue,fe[lt],$e),ot!==null&&(ie=T(ot,ie,lt),st===null?rt=ot:st.sibling=ot,st=ot);return At&&Tn(ue,lt),rt}for(ot=m(ue,ot);lt<fe.length;lt++)sr=qe(ot,ue,lt,fe[lt],$e),sr!==null&&(r&&sr.alternate!==null&&ot.delete(sr.key===null?lt:sr.key),ie=T(sr,ie,lt),st===null?rt=sr:st.sibling=sr,st=sr);return r&&ot.forEach(function(cn){return n(ue,cn)}),At&&Tn(ue,lt),rt}function tt(ue,ie,fe,$e){var rt=B(fe);if(typeof rt!="function")throw Error(s(150));if(fe=rt.call(fe),fe==null)throw Error(s(151));for(var st=rt=null,ot=ie,lt=ie=0,sr=null,xt=fe.next();ot!==null&&!xt.done;lt++,xt=fe.next()){ot.index>lt?(sr=ot,ot=null):sr=ot.sibling;var cn=Te(ue,ot,xt.value,$e);if(cn===null){ot===null&&(ot=sr);break}r&&ot&&cn.alternate===null&&n(ue,ot),ie=T(cn,ie,lt),st===null?rt=cn:st.sibling=cn,st=cn,ot=sr}if(xt.done)return a(ue,ot),At&&Tn(ue,lt),rt;if(ot===null){for(;!xt.done;lt++,xt=fe.next())xt=Be(ue,xt.value,$e),xt!==null&&(ie=T(xt,ie,lt),st===null?rt=xt:st.sibling=xt,st=xt);return At&&Tn(ue,lt),rt}for(ot=m(ue,ot);!xt.done;lt++,xt=fe.next())xt=qe(ot,ue,lt,xt.value,$e),xt!==null&&(r&&xt.alternate!==null&&ot.delete(xt.key===null?lt:xt.key),ie=T(xt,ie,lt),st===null?rt=xt:st.sibling=xt,st=xt);return r&&ot.forEach(function(ab){return n(ue,ab)}),At&&Tn(ue,lt),rt}function Ht(ue,ie,fe,$e){if(typeof fe=="object"&&fe!==null&&fe.type===z&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:e:{for(var rt=fe.key,st=ie;st!==null;){if(st.key===rt){if(rt=fe.type,rt===z){if(st.tag===7){a(ue,st.sibling),ie=k(st,fe.props.children),ie.return=ue,ue=ie;break e}}else if(st.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===de&&of(rt)===st.type){a(ue,st.sibling),ie=k(st,fe.props),ie.ref=ao(ue,st,fe),ie.return=ue,ue=ie;break e}a(ue,st);break}else n(ue,st);st=st.sibling}fe.type===z?(ie=Pn(fe.props.children,ue.mode,$e,fe.key),ie.return=ue,ue=ie):($e=Qa(fe.type,fe.key,fe.props,null,ue.mode,$e),$e.ref=ao(ue,ie,fe),$e.return=ue,ue=$e)}return $(ue);case A:e:{for(st=fe.key;ie!==null;){if(ie.key===st)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){a(ue,ie.sibling),ie=k(ie,fe.children||[]),ie.return=ue,ue=ie;break e}else{a(ue,ie);break}else n(ue,ie);ie=ie.sibling}ie=Td(fe,ue.mode,$e),ie.return=ue,ue=ie}return $(ue);case de:return st=fe._init,Ht(ue,ie,st(fe._payload),$e)}if(Z(fe))return Je(ue,ie,fe,$e);if(B(fe))return tt(ue,ie,fe,$e);Ra(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ie!==null&&ie.tag===6?(a(ue,ie.sibling),ie=k(ie,fe),ie.return=ue,ue=ie):(a(ue,ie),ie=Rd(fe,ue.mode,$e),ie.return=ue,ue=ie),$(ue)):a(ue,ie)}return Ht}var ds=af(!0),lf=af(!1),Ta=Ji(null),Aa=null,us=null,Oc=null;function $c(){Oc=us=Aa=null}function Fc(r){var n=Ta.current;Rt(Ta),r._currentValue=n}function Wc(r,n,a){for(;r!==null;){var m=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,m!==null&&(m.childLanes|=n)):m!==null&&(m.childLanes&n)!==n&&(m.childLanes|=n),r===a)break;r=r.return}}function hs(r,n){Aa=r,Oc=us=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&n)!==0&&(Tr=!0),r.firstContext=null)}function Kr(r){var n=r._currentValue;if(Oc!==r)if(r={context:r,memoizedValue:n,next:null},us===null){if(Aa===null)throw Error(s(308));us=r,Aa.dependencies={lanes:0,firstContext:r}}else us=us.next=r;return n}var An=null;function Nc(r){An===null?An=[r]:An.push(r)}function cf(r,n,a,m){var k=n.interleaved;return k===null?(a.next=a,Nc(n)):(a.next=k.next,k.next=a),n.interleaved=a,Di(r,m)}function Di(r,n){r.lanes|=n;var a=r.alternate;for(a!==null&&(a.lanes|=n),a=r,r=r.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),a=r,r=r.return;return a.tag===3?a.stateNode:null}var en=!1;function Hc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function df(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ii(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function tn(r,n,a){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(gt&2)!==0){var k=m.pending;return k===null?n.next=n:(n.next=k.next,k.next=n),m.pending=n,Di(r,a)}return k=m.interleaved,k===null?(n.next=n,Nc(m)):(n.next=k.next,k.next=n),m.interleaved=n,Di(r,a)}function La(r,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var m=n.lanes;m&=r.pendingLanes,a|=m,n.lanes=a,ic(r,a)}}function uf(r,n){var a=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,a===m)){var k=null,T=null;if(a=a.firstBaseUpdate,a!==null){do{var $={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};T===null?k=T=$:T=T.next=$,a=a.next}while(a!==null);T===null?k=T=n:T=T.next=n}else k=T=n;a={baseState:m.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:m.shared,effects:m.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=n:r.next=n,a.lastBaseUpdate=n}function za(r,n,a,m){var k=r.updateQueue;en=!1;var T=k.firstBaseUpdate,$=k.lastBaseUpdate,q=k.shared.pending;if(q!==null){k.shared.pending=null;var re=q,Se=re.next;re.next=null,$===null?T=Se:$.next=Se,$=re;var ze=r.alternate;ze!==null&&(ze=ze.updateQueue,q=ze.lastBaseUpdate,q!==$&&(q===null?ze.firstBaseUpdate=Se:q.next=Se,ze.lastBaseUpdate=re))}if(T!==null){var Be=k.baseState;$=0,ze=Se=re=null,q=T;do{var Te=q.lane,qe=q.eventTime;if((m&Te)===Te){ze!==null&&(ze=ze.next={eventTime:qe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Je=r,tt=q;switch(Te=n,qe=a,tt.tag){case 1:if(Je=tt.payload,typeof Je=="function"){Be=Je.call(qe,Be,Te);break e}Be=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=tt.payload,Te=typeof Je=="function"?Je.call(qe,Be,Te):Je,Te==null)break e;Be=D({},Be,Te);break e;case 2:en=!0}}q.callback!==null&&q.lane!==0&&(r.flags|=64,Te=k.effects,Te===null?k.effects=[q]:Te.push(q))}else qe={eventTime:qe,lane:Te,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ze===null?(Se=ze=qe,re=Be):ze=ze.next=qe,$|=Te;if(q=q.next,q===null){if(q=k.shared.pending,q===null)break;Te=q,q=Te.next,Te.next=null,k.lastBaseUpdate=Te,k.shared.pending=null}}while(!0);if(ze===null&&(re=Be),k.baseState=re,k.firstBaseUpdate=Se,k.lastBaseUpdate=ze,n=k.shared.interleaved,n!==null){k=n;do $|=k.lane,k=k.next;while(k!==n)}else T===null&&(k.shared.lanes=0);Dn|=$,r.lanes=$,r.memoizedState=Be}}function hf(r,n,a){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var m=r[n],k=m.callback;if(k!==null){if(m.callback=null,m=a,typeof k!="function")throw Error(s(191,k));k.call(m)}}}var lo={},mi=Ji(lo),co=Ji(lo),uo=Ji(lo);function Ln(r){if(r===lo)throw Error(s(174));return r}function Uc(r,n){switch(kt(uo,n),kt(co,r),kt(mi,lo),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:St(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=St(n,r)}Rt(mi),kt(mi,n)}function ps(){Rt(mi),Rt(co),Rt(uo)}function pf(r){Ln(uo.current);var n=Ln(mi.current),a=St(n,r.type);n!==a&&(kt(co,r),kt(mi,a))}function Vc(r){co.current===r&&(Rt(mi),Rt(co))}var zt=Ji(0);function Da(r){for(var n=r;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Kc=[];function qc(){for(var r=0;r<Kc.length;r++)Kc[r]._workInProgressVersionPrimary=null;Kc.length=0}var Ia=w.ReactCurrentDispatcher,Gc=w.ReactCurrentBatchConfig,zn=0,Dt=null,Qt=null,ir=null,Ma=!1,ho=!1,po=0,Tv=0;function gr(){throw Error(s(321))}function Yc(r,n){if(n===null)return!1;for(var a=0;a<n.length&&a<r.length;a++)if(!ii(r[a],n[a]))return!1;return!0}function Xc(r,n,a,m,k,T){if(zn=T,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ia.current=r===null||r.memoizedState===null?Dv:Iv,r=a(m,k),ho){T=0;do{if(ho=!1,po=0,25<=T)throw Error(s(301));T+=1,ir=Qt=null,n.updateQueue=null,Ia.current=Mv,r=a(m,k)}while(ho)}if(Ia.current=Oa,n=Qt!==null&&Qt.next!==null,zn=0,ir=Qt=Dt=null,Ma=!1,n)throw Error(s(300));return r}function Jc(){var r=po!==0;return po=0,r}function yi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?Dt.memoizedState=ir=r:ir=ir.next=r,ir}function qr(){if(Qt===null){var r=Dt.alternate;r=r!==null?r.memoizedState:null}else r=Qt.next;var n=ir===null?Dt.memoizedState:ir.next;if(n!==null)ir=n,Qt=r;else{if(r===null)throw Error(s(310));Qt=r,r={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},ir===null?Dt.memoizedState=ir=r:ir=ir.next=r}return ir}function fo(r,n){return typeof n=="function"?n(r):n}function Qc(r){var n=qr(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var m=Qt,k=m.baseQueue,T=a.pending;if(T!==null){if(k!==null){var $=k.next;k.next=T.next,T.next=$}m.baseQueue=k=T,a.pending=null}if(k!==null){T=k.next,m=m.baseState;var q=$=null,re=null,Se=T;do{var ze=Se.lane;if((zn&ze)===ze)re!==null&&(re=re.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),m=Se.hasEagerState?Se.eagerState:r(m,Se.action);else{var Be={lane:ze,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};re===null?(q=re=Be,$=m):re=re.next=Be,Dt.lanes|=ze,Dn|=ze}Se=Se.next}while(Se!==null&&Se!==T);re===null?$=m:re.next=q,ii(m,n.memoizedState)||(Tr=!0),n.memoizedState=m,n.baseState=$,n.baseQueue=re,a.lastRenderedState=m}if(r=a.interleaved,r!==null){k=r;do T=k.lane,Dt.lanes|=T,Dn|=T,k=k.next;while(k!==r)}else k===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function Zc(r){var n=qr(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var m=a.dispatch,k=a.pending,T=n.memoizedState;if(k!==null){a.pending=null;var $=k=k.next;do T=r(T,$.action),$=$.next;while($!==k);ii(T,n.memoizedState)||(Tr=!0),n.memoizedState=T,n.baseQueue===null&&(n.baseState=T),a.lastRenderedState=T}return[T,m]}function ff(){}function gf(r,n){var a=Dt,m=qr(),k=n(),T=!ii(m.memoizedState,k);if(T&&(m.memoizedState=k,Tr=!0),m=m.queue,ed(yf.bind(null,a,m,r),[r]),m.getSnapshot!==n||T||ir!==null&&ir.memoizedState.tag&1){if(a.flags|=2048,go(9,mf.bind(null,a,m,k,n),void 0,null),nr===null)throw Error(s(349));(zn&30)!==0||xf(a,n,k)}return k}function xf(r,n,a){r.flags|=16384,r={getSnapshot:n,value:a},n=Dt.updateQueue,n===null?(n={lastEffect:null,stores:null},Dt.updateQueue=n,n.stores=[r]):(a=n.stores,a===null?n.stores=[r]:a.push(r))}function mf(r,n,a,m){n.value=a,n.getSnapshot=m,vf(n)&&bf(r)}function yf(r,n,a){return a(function(){vf(n)&&bf(r)})}function vf(r){var n=r.getSnapshot;r=r.value;try{var a=n();return!ii(r,a)}catch{return!0}}function bf(r){var n=Di(r,1);n!==null&&li(n,r,1,-1)}function _f(r){var n=yi();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:r},n.queue=r,r=r.dispatch=zv.bind(null,Dt,r),[n.memoizedState,r]}function go(r,n,a,m){return r={tag:r,create:n,destroy:a,deps:m,next:null},n=Dt.updateQueue,n===null?(n={lastEffect:null,stores:null},Dt.updateQueue=n,n.lastEffect=r.next=r):(a=n.lastEffect,a===null?n.lastEffect=r.next=r:(m=a.next,a.next=r,r.next=m,n.lastEffect=r)),r}function Sf(){return qr().memoizedState}function Ba(r,n,a,m){var k=yi();Dt.flags|=r,k.memoizedState=go(1|n,a,void 0,m===void 0?null:m)}function Pa(r,n,a,m){var k=qr();m=m===void 0?null:m;var T=void 0;if(Qt!==null){var $=Qt.memoizedState;if(T=$.destroy,m!==null&&Yc(m,$.deps)){k.memoizedState=go(n,a,T,m);return}}Dt.flags|=r,k.memoizedState=go(1|n,a,T,m)}function wf(r,n){return Ba(8390656,8,r,n)}function ed(r,n){return Pa(2048,8,r,n)}function Cf(r,n){return Pa(4,2,r,n)}function kf(r,n){return Pa(4,4,r,n)}function jf(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function Ef(r,n,a){return a=a!=null?a.concat([r]):null,Pa(4,4,jf.bind(null,n,r),a)}function td(){}function Rf(r,n){var a=qr();n=n===void 0?null:n;var m=a.memoizedState;return m!==null&&n!==null&&Yc(n,m[1])?m[0]:(a.memoizedState=[r,n],r)}function Tf(r,n){var a=qr();n=n===void 0?null:n;var m=a.memoizedState;return m!==null&&n!==null&&Yc(n,m[1])?m[0]:(r=r(),a.memoizedState=[r,n],r)}function Af(r,n,a){return(zn&21)===0?(r.baseState&&(r.baseState=!1,Tr=!0),r.memoizedState=a):(ii(a,n)||(a=sp(),Dt.lanes|=a,Dn|=a,r.baseState=!0),n)}function Av(r,n){var a=_t;_t=a!==0&&4>a?a:4,r(!0);var m=Gc.transition;Gc.transition={};try{r(!1),n()}finally{_t=a,Gc.transition=m}}function Lf(){return qr().memoizedState}function Lv(r,n,a){var m=on(r);if(a={lane:m,action:a,hasEagerState:!1,eagerState:null,next:null},zf(r))Df(n,a);else if(a=cf(r,n,a,m),a!==null){var k=br();li(a,r,m,k),If(a,n,m)}}function zv(r,n,a){var m=on(r),k={lane:m,action:a,hasEagerState:!1,eagerState:null,next:null};if(zf(r))Df(n,k);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=n.lastRenderedReducer,T!==null))try{var $=n.lastRenderedState,q=T($,a);if(k.hasEagerState=!0,k.eagerState=q,ii(q,$)){var re=n.interleaved;re===null?(k.next=k,Nc(n)):(k.next=re.next,re.next=k),n.interleaved=k;return}}catch{}finally{}a=cf(r,n,k,m),a!==null&&(k=br(),li(a,r,m,k),If(a,n,m))}}function zf(r){var n=r.alternate;return r===Dt||n!==null&&n===Dt}function Df(r,n){ho=Ma=!0;var a=r.pending;a===null?n.next=n:(n.next=a.next,a.next=n),r.pending=n}function If(r,n,a){if((a&4194240)!==0){var m=n.lanes;m&=r.pendingLanes,a|=m,n.lanes=a,ic(r,a)}}var Oa={readContext:Kr,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},Dv={readContext:Kr,useCallback:function(r,n){return yi().memoizedState=[r,n===void 0?null:n],r},useContext:Kr,useEffect:wf,useImperativeHandle:function(r,n,a){return a=a!=null?a.concat([r]):null,Ba(4194308,4,jf.bind(null,n,r),a)},useLayoutEffect:function(r,n){return Ba(4194308,4,r,n)},useInsertionEffect:function(r,n){return Ba(4,2,r,n)},useMemo:function(r,n){var a=yi();return n=n===void 0?null:n,r=r(),a.memoizedState=[r,n],r},useReducer:function(r,n,a){var m=yi();return n=a!==void 0?a(n):n,m.memoizedState=m.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},m.queue=r,r=r.dispatch=Lv.bind(null,Dt,r),[m.memoizedState,r]},useRef:function(r){var n=yi();return r={current:r},n.memoizedState=r},useState:_f,useDebugValue:td,useDeferredValue:function(r){return yi().memoizedState=r},useTransition:function(){var r=_f(!1),n=r[0];return r=Av.bind(null,r[1]),yi().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,a){var m=Dt,k=yi();if(At){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),nr===null)throw Error(s(349));(zn&30)!==0||xf(m,n,a)}k.memoizedState=a;var T={value:a,getSnapshot:n};return k.queue=T,wf(yf.bind(null,m,T,r),[r]),m.flags|=2048,go(9,mf.bind(null,m,T,a,n),void 0,null),a},useId:function(){var r=yi(),n=nr.identifierPrefix;if(At){var a=zi,m=Li;a=(m&~(1<<32-ri(m)-1)).toString(32)+a,n=":"+n+"R"+a,a=po++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=Tv++,n=":"+n+"r"+a.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},Iv={readContext:Kr,useCallback:Rf,useContext:Kr,useEffect:ed,useImperativeHandle:Ef,useInsertionEffect:Cf,useLayoutEffect:kf,useMemo:Tf,useReducer:Qc,useRef:Sf,useState:function(){return Qc(fo)},useDebugValue:td,useDeferredValue:function(r){var n=qr();return Af(n,Qt.memoizedState,r)},useTransition:function(){var r=Qc(fo)[0],n=qr().memoizedState;return[r,n]},useMutableSource:ff,useSyncExternalStore:gf,useId:Lf,unstable_isNewReconciler:!1},Mv={readContext:Kr,useCallback:Rf,useContext:Kr,useEffect:ed,useImperativeHandle:Ef,useInsertionEffect:Cf,useLayoutEffect:kf,useMemo:Tf,useReducer:Zc,useRef:Sf,useState:function(){return Zc(fo)},useDebugValue:td,useDeferredValue:function(r){var n=qr();return Qt===null?n.memoizedState=r:Af(n,Qt.memoizedState,r)},useTransition:function(){var r=Zc(fo)[0],n=qr().memoizedState;return[r,n]},useMutableSource:ff,useSyncExternalStore:gf,useId:Lf,unstable_isNewReconciler:!1};function si(r,n){if(r&&r.defaultProps){n=D({},n),r=r.defaultProps;for(var a in r)n[a]===void 0&&(n[a]=r[a]);return n}return n}function rd(r,n,a,m){n=r.memoizedState,a=a(m,n),a=a==null?n:D({},n,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var $a={isMounted:function(r){return(r=r._reactInternals)?ye(r)===r:!1},enqueueSetState:function(r,n,a){r=r._reactInternals;var m=br(),k=on(r),T=Ii(m,k);T.payload=n,a!=null&&(T.callback=a),n=tn(r,T,k),n!==null&&(li(n,r,k,m),La(n,r,k))},enqueueReplaceState:function(r,n,a){r=r._reactInternals;var m=br(),k=on(r),T=Ii(m,k);T.tag=1,T.payload=n,a!=null&&(T.callback=a),n=tn(r,T,k),n!==null&&(li(n,r,k,m),La(n,r,k))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var a=br(),m=on(r),k=Ii(a,m);k.tag=2,n!=null&&(k.callback=n),n=tn(r,k,m),n!==null&&(li(n,r,m,a),La(n,r,m))}};function Mf(r,n,a,m,k,T,$){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,T,$):n.prototype&&n.prototype.isPureReactComponent?!eo(a,m)||!eo(k,T):!0}function Bf(r,n,a){var m=!1,k=Qi,T=n.contextType;return typeof T=="object"&&T!==null?T=Kr(T):(k=Rr(n)?En:fr.current,m=n.contextTypes,T=(m=m!=null)?os(r,k):Qi),n=new n(a,T),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$a,r.stateNode=n,n._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=k,r.__reactInternalMemoizedMaskedChildContext=T),n}function Pf(r,n,a,m){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,m),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,m),n.state!==r&&$a.enqueueReplaceState(n,n.state,null)}function id(r,n,a,m){var k=r.stateNode;k.props=a,k.state=r.memoizedState,k.refs={},Hc(r);var T=n.contextType;typeof T=="object"&&T!==null?k.context=Kr(T):(T=Rr(n)?En:fr.current,k.context=os(r,T)),k.state=r.memoizedState,T=n.getDerivedStateFromProps,typeof T=="function"&&(rd(r,n,T,a),k.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(n=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),n!==k.state&&$a.enqueueReplaceState(k,k.state,null),za(r,a,k,m),k.state=r.memoizedState),typeof k.componentDidMount=="function"&&(r.flags|=4194308)}function fs(r,n){try{var a="",m=n;do a+=we(m),m=m.return;while(m);var k=a}catch(T){k=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:n,stack:k,digest:null}}function nd(r,n,a){return{value:r,source:null,stack:a??null,digest:n??null}}function sd(r,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var Bv=typeof WeakMap=="function"?WeakMap:Map;function Of(r,n,a){a=Ii(-1,a),a.tag=3,a.payload={element:null};var m=n.value;return a.callback=function(){Ka||(Ka=!0,bd=m),sd(r,n)},a}function $f(r,n,a){a=Ii(-1,a),a.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var k=n.value;a.payload=function(){return m(k)},a.callback=function(){sd(r,n)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){sd(r,n),typeof m!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var $=n.stack;this.componentDidCatch(n.value,{componentStack:$!==null?$:""})}),a}function Ff(r,n,a){var m=r.pingCache;if(m===null){m=r.pingCache=new Bv;var k=new Set;m.set(n,k)}else k=m.get(n),k===void 0&&(k=new Set,m.set(n,k));k.has(a)||(k.add(a),r=Xv.bind(null,r,n,a),n.then(r,r))}function Wf(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function Nf(r,n,a,m,k){return(r.mode&1)===0?(r===n?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=Ii(-1,1),n.tag=2,tn(a,n,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=k,r)}var Pv=w.ReactCurrentOwner,Tr=!1;function vr(r,n,a,m){n.child=r===null?lf(n,null,a,m):ds(n,r.child,a,m)}function Hf(r,n,a,m,k){a=a.render;var T=n.ref;return hs(n,k),m=Xc(r,n,a,m,T,k),a=Jc(),r!==null&&!Tr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Mi(r,n,k)):(At&&a&&Dc(n),n.flags|=1,vr(r,n,m,k),n.child)}function Uf(r,n,a,m,k){if(r===null){var T=a.type;return typeof T=="function"&&!Ed(T)&&T.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=T,Vf(r,n,T,m,k)):(r=Qa(a.type,null,m,n,n.mode,k),r.ref=n.ref,r.return=n,n.child=r)}if(T=r.child,(r.lanes&k)===0){var $=T.memoizedProps;if(a=a.compare,a=a!==null?a:eo,a($,m)&&r.ref===n.ref)return Mi(r,n,k)}return n.flags|=1,r=ln(T,m),r.ref=n.ref,r.return=n,n.child=r}function Vf(r,n,a,m,k){if(r!==null){var T=r.memoizedProps;if(eo(T,m)&&r.ref===n.ref)if(Tr=!1,n.pendingProps=m=T,(r.lanes&k)!==0)(r.flags&131072)!==0&&(Tr=!0);else return n.lanes=r.lanes,Mi(r,n,k)}return od(r,n,a,m,k)}function Kf(r,n,a){var m=n.pendingProps,k=m.children,T=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(xs,Wr),Wr|=a;else{if((a&1073741824)===0)return r=T!==null?T.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,kt(xs,Wr),Wr|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:a,kt(xs,Wr),Wr|=m}else T!==null?(m=T.baseLanes|a,n.memoizedState=null):m=a,kt(xs,Wr),Wr|=m;return vr(r,n,k,a),n.child}function qf(r,n){var a=n.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function od(r,n,a,m,k){var T=Rr(a)?En:fr.current;return T=os(n,T),hs(n,k),a=Xc(r,n,a,m,T,k),m=Jc(),r!==null&&!Tr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Mi(r,n,k)):(At&&m&&Dc(n),n.flags|=1,vr(r,n,a,k),n.child)}function Gf(r,n,a,m,k){if(Rr(a)){var T=!0;wa(n)}else T=!1;if(hs(n,k),n.stateNode===null)Wa(r,n),Bf(n,a,m),id(n,a,m,k),m=!0;else if(r===null){var $=n.stateNode,q=n.memoizedProps;$.props=q;var re=$.context,Se=a.contextType;typeof Se=="object"&&Se!==null?Se=Kr(Se):(Se=Rr(a)?En:fr.current,Se=os(n,Se));var ze=a.getDerivedStateFromProps,Be=typeof ze=="function"||typeof $.getSnapshotBeforeUpdate=="function";Be||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(q!==m||re!==Se)&&Pf(n,$,m,Se),en=!1;var Te=n.memoizedState;$.state=Te,za(n,m,$,k),re=n.memoizedState,q!==m||Te!==re||Er.current||en?(typeof ze=="function"&&(rd(n,a,ze,m),re=n.memoizedState),(q=en||Mf(n,a,q,m,Te,re,Se))?(Be||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(n.flags|=4194308)):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=m,n.memoizedState=re),$.props=m,$.state=re,$.context=Se,m=q):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),m=!1)}else{$=n.stateNode,df(r,n),q=n.memoizedProps,Se=n.type===n.elementType?q:si(n.type,q),$.props=Se,Be=n.pendingProps,Te=$.context,re=a.contextType,typeof re=="object"&&re!==null?re=Kr(re):(re=Rr(a)?En:fr.current,re=os(n,re));var qe=a.getDerivedStateFromProps;(ze=typeof qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(q!==Be||Te!==re)&&Pf(n,$,m,re),en=!1,Te=n.memoizedState,$.state=Te,za(n,m,$,k);var Je=n.memoizedState;q!==Be||Te!==Je||Er.current||en?(typeof qe=="function"&&(rd(n,a,qe,m),Je=n.memoizedState),(Se=en||Mf(n,a,Se,m,Te,Je,re)||!1)?(ze||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(m,Je,re),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(m,Je,re)),typeof $.componentDidUpdate=="function"&&(n.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof $.componentDidUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),n.memoizedProps=m,n.memoizedState=Je),$.props=m,$.state=Je,$.context=re,m=Se):(typeof $.componentDidUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),m=!1)}return ad(r,n,a,m,T,k)}function ad(r,n,a,m,k,T){qf(r,n);var $=(n.flags&128)!==0;if(!m&&!$)return k&&Qp(n,a,!1),Mi(r,n,T);m=n.stateNode,Pv.current=n;var q=$&&typeof a.getDerivedStateFromError!="function"?null:m.render();return n.flags|=1,r!==null&&$?(n.child=ds(n,r.child,null,T),n.child=ds(n,null,q,T)):vr(r,n,q,T),n.memoizedState=m.state,k&&Qp(n,a,!0),n.child}function Yf(r){var n=r.stateNode;n.pendingContext?Xp(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Xp(r,n.context,!1),Uc(r,n.containerInfo)}function Xf(r,n,a,m,k){return cs(),Pc(k),n.flags|=256,vr(r,n,a,m),n.child}var ld={dehydrated:null,treeContext:null,retryLane:0};function cd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Jf(r,n,a){var m=n.pendingProps,k=zt.current,T=!1,$=(n.flags&128)!==0,q;if((q=$)||(q=r!==null&&r.memoizedState===null?!1:(k&2)!==0),q?(T=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(k|=1),kt(zt,k&1),r===null)return Bc(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((n.mode&1)===0?n.lanes=1:r.data==="$!"?n.lanes=8:n.lanes=1073741824,null):($=m.children,r=m.fallback,T?(m=n.mode,T=n.child,$={mode:"hidden",children:$},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=$):T=Za($,m,0,null),r=Pn(r,m,a,null),T.return=n,r.return=n,T.sibling=r,n.child=T,n.child.memoizedState=cd(a),n.memoizedState=ld,r):dd(n,$));if(k=r.memoizedState,k!==null&&(q=k.dehydrated,q!==null))return Ov(r,n,$,m,q,k,a);if(T){T=m.fallback,$=n.mode,k=r.child,q=k.sibling;var re={mode:"hidden",children:m.children};return($&1)===0&&n.child!==k?(m=n.child,m.childLanes=0,m.pendingProps=re,n.deletions=null):(m=ln(k,re),m.subtreeFlags=k.subtreeFlags&14680064),q!==null?T=ln(q,T):(T=Pn(T,$,a,null),T.flags|=2),T.return=n,m.return=n,m.sibling=T,n.child=m,m=T,T=n.child,$=r.child.memoizedState,$=$===null?cd(a):{baseLanes:$.baseLanes|a,cachePool:null,transitions:$.transitions},T.memoizedState=$,T.childLanes=r.childLanes&~a,n.memoizedState=ld,m}return T=r.child,r=T.sibling,m=ln(T,{mode:"visible",children:m.children}),(n.mode&1)===0&&(m.lanes=a),m.return=n,m.sibling=null,r!==null&&(a=n.deletions,a===null?(n.deletions=[r],n.flags|=16):a.push(r)),n.child=m,n.memoizedState=null,m}function dd(r,n){return n=Za({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Fa(r,n,a,m){return m!==null&&Pc(m),ds(n,r.child,null,a),r=dd(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function Ov(r,n,a,m,k,T,$){if(a)return n.flags&256?(n.flags&=-257,m=nd(Error(s(422))),Fa(r,n,$,m)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(T=m.fallback,k=n.mode,m=Za({mode:"visible",children:m.children},k,0,null),T=Pn(T,k,$,null),T.flags|=2,m.return=n,T.return=n,m.sibling=T,n.child=m,(n.mode&1)!==0&&ds(n,r.child,null,$),n.child.memoizedState=cd($),n.memoizedState=ld,T);if((n.mode&1)===0)return Fa(r,n,$,null);if(k.data==="$!"){if(m=k.nextSibling&&k.nextSibling.dataset,m)var q=m.dgst;return m=q,T=Error(s(419)),m=nd(T,m,void 0),Fa(r,n,$,m)}if(q=($&r.childLanes)!==0,Tr||q){if(m=nr,m!==null){switch($&-$){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(m.suspendedLanes|$))!==0?0:k,k!==0&&k!==T.retryLane&&(T.retryLane=k,Di(r,k),li(m,r,k,-1))}return jd(),m=nd(Error(s(421))),Fa(r,n,$,m)}return k.data==="$?"?(n.flags|=128,n.child=r.child,n=Jv.bind(null,r),k._reactRetry=n,null):(r=T.treeContext,Fr=Xi(k.nextSibling),$r=n,At=!0,ni=null,r!==null&&(Ur[Vr++]=Li,Ur[Vr++]=zi,Ur[Vr++]=Rn,Li=r.id,zi=r.overflow,Rn=n),n=dd(n,m.children),n.flags|=4096,n)}function Qf(r,n,a){r.lanes|=n;var m=r.alternate;m!==null&&(m.lanes|=n),Wc(r.return,n,a)}function ud(r,n,a,m,k){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:m,tail:a,tailMode:k}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=a,T.tailMode=k)}function Zf(r,n,a){var m=n.pendingProps,k=m.revealOrder,T=m.tail;if(vr(r,n,m.children,a),m=zt.current,(m&2)!==0)m=m&1|2,n.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qf(r,a,n);else if(r.tag===19)Qf(r,a,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(kt(zt,m),(n.mode&1)===0)n.memoizedState=null;else switch(k){case"forwards":for(a=n.child,k=null;a!==null;)r=a.alternate,r!==null&&Da(r)===null&&(k=a),a=a.sibling;a=k,a===null?(k=n.child,n.child=null):(k=a.sibling,a.sibling=null),ud(n,!1,k,a,T);break;case"backwards":for(a=null,k=n.child,n.child=null;k!==null;){if(r=k.alternate,r!==null&&Da(r)===null){n.child=k;break}r=k.sibling,k.sibling=a,a=k,k=r}ud(n,!0,a,null,T);break;case"together":ud(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wa(r,n){(n.mode&1)===0&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Mi(r,n,a){if(r!==null&&(n.dependencies=r.dependencies),Dn|=n.lanes,(a&n.childLanes)===0)return null;if(r!==null&&n.child!==r.child)throw Error(s(153));if(n.child!==null){for(r=n.child,a=ln(r,r.pendingProps),n.child=a,a.return=n;r.sibling!==null;)r=r.sibling,a=a.sibling=ln(r,r.pendingProps),a.return=n;a.sibling=null}return n.child}function $v(r,n,a){switch(n.tag){case 3:Yf(n),cs();break;case 5:pf(n);break;case 1:Rr(n.type)&&wa(n);break;case 4:Uc(n,n.stateNode.containerInfo);break;case 10:var m=n.type._context,k=n.memoizedProps.value;kt(Ta,m._currentValue),m._currentValue=k;break;case 13:if(m=n.memoizedState,m!==null)return m.dehydrated!==null?(kt(zt,zt.current&1),n.flags|=128,null):(a&n.child.childLanes)!==0?Jf(r,n,a):(kt(zt,zt.current&1),r=Mi(r,n,a),r!==null?r.sibling:null);kt(zt,zt.current&1);break;case 19:if(m=(a&n.childLanes)!==0,(r.flags&128)!==0){if(m)return Zf(r,n,a);n.flags|=128}if(k=n.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),kt(zt,zt.current),m)break;return null;case 22:case 23:return n.lanes=0,Kf(r,n,a)}return Mi(r,n,a)}var eg,hd,tg,rg;eg=function(r,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hd=function(){},tg=function(r,n,a,m){var k=r.memoizedProps;if(k!==m){r=n.stateNode,Ln(mi.current);var T=null;switch(a){case"input":k=he(r,k),m=he(r,m),T=[];break;case"select":k=D({},k,{value:void 0}),m=D({},m,{value:void 0}),T=[];break;case"textarea":k=Fe(r,k),m=Fe(r,m),T=[];break;default:typeof k.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=ba)}hr(a,m);var $;a=null;for(Se in k)if(!m.hasOwnProperty(Se)&&k.hasOwnProperty(Se)&&k[Se]!=null)if(Se==="style"){var q=k[Se];for($ in q)q.hasOwnProperty($)&&(a||(a={}),a[$]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(u.hasOwnProperty(Se)?T||(T=[]):(T=T||[]).push(Se,null));for(Se in m){var re=m[Se];if(q=k!=null?k[Se]:void 0,m.hasOwnProperty(Se)&&re!==q&&(re!=null||q!=null))if(Se==="style")if(q){for($ in q)!q.hasOwnProperty($)||re&&re.hasOwnProperty($)||(a||(a={}),a[$]="");for($ in re)re.hasOwnProperty($)&&q[$]!==re[$]&&(a||(a={}),a[$]=re[$])}else a||(T||(T=[]),T.push(Se,a)),a=re;else Se==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,q=q?q.__html:void 0,re!=null&&q!==re&&(T=T||[]).push(Se,re)):Se==="children"?typeof re!="string"&&typeof re!="number"||(T=T||[]).push(Se,""+re):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(u.hasOwnProperty(Se)?(re!=null&&Se==="onScroll"&&Et("scroll",r),T||q===re||(T=[])):(T=T||[]).push(Se,re))}a&&(T=T||[]).push("style",a);var Se=T;(n.updateQueue=Se)&&(n.flags|=4)}},rg=function(r,n,a,m){a!==m&&(n.flags|=4)};function xo(r,n){if(!At)switch(r.tailMode){case"hidden":n=r.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var m=null;a!==null;)a.alternate!==null&&(m=a),a=a.sibling;m===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function xr(r){var n=r.alternate!==null&&r.alternate.child===r.child,a=0,m=0;if(n)for(var k=r.child;k!==null;)a|=k.lanes|k.childLanes,m|=k.subtreeFlags&14680064,m|=k.flags&14680064,k.return=r,k=k.sibling;else for(k=r.child;k!==null;)a|=k.lanes|k.childLanes,m|=k.subtreeFlags,m|=k.flags,k.return=r,k=k.sibling;return r.subtreeFlags|=m,r.childLanes=a,n}function Fv(r,n,a){var m=n.pendingProps;switch(Ic(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(n),null;case 1:return Rr(n.type)&&Sa(),xr(n),null;case 3:return m=n.stateNode,ps(),Rt(Er),Rt(fr),qc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Ea(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ni!==null&&(wd(ni),ni=null))),hd(r,n),xr(n),null;case 5:Vc(n);var k=Ln(uo.current);if(a=n.type,r!==null&&n.stateNode!=null)tg(r,n,a,m,k),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!m){if(n.stateNode===null)throw Error(s(166));return xr(n),null}if(r=Ln(mi.current),Ea(n)){m=n.stateNode,a=n.type;var T=n.memoizedProps;switch(m[xi]=n,m[so]=T,r=(n.mode&1)!==0,a){case"dialog":Et("cancel",m),Et("close",m);break;case"iframe":case"object":case"embed":Et("load",m);break;case"video":case"audio":for(k=0;k<ro.length;k++)Et(ro[k],m);break;case"source":Et("error",m);break;case"img":case"image":case"link":Et("error",m),Et("load",m);break;case"details":Et("toggle",m);break;case"input":Ie(m,T),Et("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},Et("invalid",m);break;case"textarea":Ze(m,T),Et("invalid",m)}hr(a,T),k=null;for(var $ in T)if(T.hasOwnProperty($)){var q=T[$];$==="children"?typeof q=="string"?m.textContent!==q&&(T.suppressHydrationWarning!==!0&&va(m.textContent,q,r),k=["children",q]):typeof q=="number"&&m.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&va(m.textContent,q,r),k=["children",""+q]):u.hasOwnProperty($)&&q!=null&&$==="onScroll"&&Et("scroll",m)}switch(a){case"input":De(m),Ee(m,T,!0);break;case"textarea":De(m),dt(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=ba)}m=k,n.updateQueue=m,m!==null&&(n.flags|=4)}else{$=k.nodeType===9?k:k.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Vt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=$.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=$.createElement(a,{is:m.is}):(r=$.createElement(a),a==="select"&&($=r,m.multiple?$.multiple=!0:m.size&&($.size=m.size))):r=$.createElementNS(r,a),r[xi]=n,r[so]=m,eg(r,n,!1,!1),n.stateNode=r;e:{switch($=pr(a,m),a){case"dialog":Et("cancel",r),Et("close",r),k=m;break;case"iframe":case"object":case"embed":Et("load",r),k=m;break;case"video":case"audio":for(k=0;k<ro.length;k++)Et(ro[k],r);k=m;break;case"source":Et("error",r),k=m;break;case"img":case"image":case"link":Et("error",r),Et("load",r),k=m;break;case"details":Et("toggle",r),k=m;break;case"input":Ie(r,m),k=he(r,m),Et("invalid",r);break;case"option":k=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},k=D({},m,{value:void 0}),Et("invalid",r);break;case"textarea":Ze(r,m),k=Fe(r,m),Et("invalid",r);break;default:k=m}hr(a,k),q=k;for(T in q)if(q.hasOwnProperty(T)){var re=q[T];T==="style"?rr(r,re):T==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&Tt(r,re)):T==="children"?typeof re=="string"?(a!=="textarea"||re!=="")&&mt(r,re):typeof re=="number"&&mt(r,""+re):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?re!=null&&T==="onScroll"&&Et("scroll",r):re!=null&&g(r,T,re,$))}switch(a){case"input":De(r),Ee(r,m,!1);break;case"textarea":De(r),dt(r);break;case"option":m.value!=null&&r.setAttribute("value",""+F(m.value));break;case"select":r.multiple=!!m.multiple,T=m.value,T!=null?le(r,!!m.multiple,T,!1):m.defaultValue!=null&&le(r,!!m.multiple,m.defaultValue,!0);break;default:typeof k.onClick=="function"&&(r.onclick=ba)}switch(a){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return xr(n),null;case 6:if(r&&n.stateNode!=null)rg(r,n,r.memoizedProps,m);else{if(typeof m!="string"&&n.stateNode===null)throw Error(s(166));if(a=Ln(uo.current),Ln(mi.current),Ea(n)){if(m=n.stateNode,a=n.memoizedProps,m[xi]=n,(T=m.nodeValue!==a)&&(r=$r,r!==null))switch(r.tag){case 3:va(m.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&va(m.nodeValue,a,(r.mode&1)!==0)}T&&(n.flags|=4)}else m=(a.nodeType===9?a:a.ownerDocument).createTextNode(m),m[xi]=n,n.stateNode=m}return xr(n),null;case 13:if(Rt(zt),m=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(At&&Fr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)sf(),cs(),n.flags|=98560,T=!1;else if(T=Ea(n),m!==null&&m.dehydrated!==null){if(r===null){if(!T)throw Error(s(318));if(T=n.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(s(317));T[xi]=n}else cs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xr(n),T=!1}else ni!==null&&(wd(ni),ni=null),T=!0;if(!T)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=a,n):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(n.child.flags|=8192,(n.mode&1)!==0&&(r===null||(zt.current&1)!==0?Zt===0&&(Zt=3):jd())),n.updateQueue!==null&&(n.flags|=4),xr(n),null);case 4:return ps(),hd(r,n),r===null&&io(n.stateNode.containerInfo),xr(n),null;case 10:return Fc(n.type._context),xr(n),null;case 17:return Rr(n.type)&&Sa(),xr(n),null;case 19:if(Rt(zt),T=n.memoizedState,T===null)return xr(n),null;if(m=(n.flags&128)!==0,$=T.rendering,$===null)if(m)xo(T,!1);else{if(Zt!==0||r!==null&&(r.flags&128)!==0)for(r=n.child;r!==null;){if($=Da(r),$!==null){for(n.flags|=128,xo(T,!1),m=$.updateQueue,m!==null&&(n.updateQueue=m,n.flags|=4),n.subtreeFlags=0,m=a,a=n.child;a!==null;)T=a,r=m,T.flags&=14680066,$=T.alternate,$===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=$.childLanes,T.lanes=$.lanes,T.child=$.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=$.memoizedProps,T.memoizedState=$.memoizedState,T.updateQueue=$.updateQueue,T.type=$.type,r=$.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return kt(zt,zt.current&1|2),n.child}r=r.sibling}T.tail!==null&&Nt()>ms&&(n.flags|=128,m=!0,xo(T,!1),n.lanes=4194304)}else{if(!m)if(r=Da($),r!==null){if(n.flags|=128,m=!0,a=r.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),xo(T,!0),T.tail===null&&T.tailMode==="hidden"&&!$.alternate&&!At)return xr(n),null}else 2*Nt()-T.renderingStartTime>ms&&a!==1073741824&&(n.flags|=128,m=!0,xo(T,!1),n.lanes=4194304);T.isBackwards?($.sibling=n.child,n.child=$):(a=T.last,a!==null?a.sibling=$:n.child=$,T.last=$)}return T.tail!==null?(n=T.tail,T.rendering=n,T.tail=n.sibling,T.renderingStartTime=Nt(),n.sibling=null,a=zt.current,kt(zt,m?a&1|2:a&1),n):(xr(n),null);case 22:case 23:return kd(),m=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(n.flags|=8192),m&&(n.mode&1)!==0?(Wr&1073741824)!==0&&(xr(n),n.subtreeFlags&6&&(n.flags|=8192)):xr(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Wv(r,n){switch(Ic(n),n.tag){case 1:return Rr(n.type)&&Sa(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return ps(),Rt(Er),Rt(fr),qc(),r=n.flags,(r&65536)!==0&&(r&128)===0?(n.flags=r&-65537|128,n):null;case 5:return Vc(n),null;case 13:if(Rt(zt),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(s(340));cs()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Rt(zt),null;case 4:return ps(),null;case 10:return Fc(n.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Na=!1,mr=!1,Nv=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function gs(r,n){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(m){Bt(r,n,m)}else a.current=null}function pd(r,n,a){try{a()}catch(m){Bt(r,n,m)}}var ig=!1;function Hv(r,n){if(kc=la,r=Ip(),mc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var m=a.getSelection&&a.getSelection();if(m&&m.rangeCount!==0){a=m.anchorNode;var k=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{a.nodeType,T.nodeType}catch{a=null;break e}var $=0,q=-1,re=-1,Se=0,ze=0,Be=r,Te=null;t:for(;;){for(var qe;Be!==a||k!==0&&Be.nodeType!==3||(q=$+k),Be!==T||m!==0&&Be.nodeType!==3||(re=$+m),Be.nodeType===3&&($+=Be.nodeValue.length),(qe=Be.firstChild)!==null;)Te=Be,Be=qe;for(;;){if(Be===r)break t;if(Te===a&&++Se===k&&(q=$),Te===T&&++ze===m&&(re=$),(qe=Be.nextSibling)!==null)break;Be=Te,Te=Be.parentNode}Be=qe}a=q===-1||re===-1?null:{start:q,end:re}}else a=null}a=a||{start:0,end:0}}else a=null;for(jc={focusedElem:r,selectionRange:a},la=!1,Ye=n;Ye!==null;)if(n=Ye,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,Ye=r;else for(;Ye!==null;){n=Ye;try{var Je=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var tt=Je.memoizedProps,Ht=Je.memoizedState,ue=n.stateNode,ie=ue.getSnapshotBeforeUpdate(n.elementType===n.type?tt:si(n.type,tt),Ht);ue.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var fe=n.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch($e){Bt(n,n.return,$e)}if(r=n.sibling,r!==null){r.return=n.return,Ye=r;break}Ye=n.return}return Je=ig,ig=!1,Je}function mo(r,n,a){var m=n.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var k=m=m.next;do{if((k.tag&r)===r){var T=k.destroy;k.destroy=void 0,T!==void 0&&pd(n,a,T)}k=k.next}while(k!==m)}}function Ha(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&r)===r){var m=a.create;a.destroy=m()}a=a.next}while(a!==n)}}function fd(r){var n=r.ref;if(n!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof n=="function"?n(r):n.current=r}}function ng(r){var n=r.alternate;n!==null&&(r.alternate=null,ng(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[xi],delete n[so],delete n[Ac],delete n[kv],delete n[jv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function sg(r){return r.tag===5||r.tag===3||r.tag===4}function og(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gd(r,n,a){var m=r.tag;if(m===5||m===6)r=r.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(r,n):a.insertBefore(r,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(r,a)):(n=a,n.appendChild(r)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ba));else if(m!==4&&(r=r.child,r!==null))for(gd(r,n,a),r=r.sibling;r!==null;)gd(r,n,a),r=r.sibling}function xd(r,n,a){var m=r.tag;if(m===5||m===6)r=r.stateNode,n?a.insertBefore(r,n):a.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(xd(r,n,a),r=r.sibling;r!==null;)xd(r,n,a),r=r.sibling}var cr=null,oi=!1;function rn(r,n,a){for(a=a.child;a!==null;)ag(r,n,a),a=a.sibling}function ag(r,n,a){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(ra,a)}catch{}switch(a.tag){case 5:mr||gs(a,n);case 6:var m=cr,k=oi;cr=null,rn(r,n,a),cr=m,oi=k,cr!==null&&(oi?(r=cr,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):cr.removeChild(a.stateNode));break;case 18:cr!==null&&(oi?(r=cr,a=a.stateNode,r.nodeType===8?Tc(r.parentNode,a):r.nodeType===1&&Tc(r,a),Gs(r)):Tc(cr,a.stateNode));break;case 4:m=cr,k=oi,cr=a.stateNode.containerInfo,oi=!0,rn(r,n,a),cr=m,oi=k;break;case 0:case 11:case 14:case 15:if(!mr&&(m=a.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){k=m=m.next;do{var T=k,$=T.destroy;T=T.tag,$!==void 0&&((T&2)!==0||(T&4)!==0)&&pd(a,n,$),k=k.next}while(k!==m)}rn(r,n,a);break;case 1:if(!mr&&(gs(a,n),m=a.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=a.memoizedProps,m.state=a.memoizedState,m.componentWillUnmount()}catch(q){Bt(a,n,q)}rn(r,n,a);break;case 21:rn(r,n,a);break;case 22:a.mode&1?(mr=(m=mr)||a.memoizedState!==null,rn(r,n,a),mr=m):rn(r,n,a);break;default:rn(r,n,a)}}function lg(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Nv),n.forEach(function(m){var k=Qv.bind(null,r,m);a.has(m)||(a.add(m),m.then(k,k))})}}function ai(r,n){var a=n.deletions;if(a!==null)for(var m=0;m<a.length;m++){var k=a[m];try{var T=r,$=n,q=$;e:for(;q!==null;){switch(q.tag){case 5:cr=q.stateNode,oi=!1;break e;case 3:cr=q.stateNode.containerInfo,oi=!0;break e;case 4:cr=q.stateNode.containerInfo,oi=!0;break e}q=q.return}if(cr===null)throw Error(s(160));ag(T,$,k),cr=null,oi=!1;var re=k.alternate;re!==null&&(re.return=null),k.return=null}catch(Se){Bt(k,n,Se)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)cg(n,r),n=n.sibling}function cg(r,n){var a=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ai(n,r),vi(r),m&4){try{mo(3,r,r.return),Ha(3,r)}catch(tt){Bt(r,r.return,tt)}try{mo(5,r,r.return)}catch(tt){Bt(r,r.return,tt)}}break;case 1:ai(n,r),vi(r),m&512&&a!==null&&gs(a,a.return);break;case 5:if(ai(n,r),vi(r),m&512&&a!==null&&gs(a,a.return),r.flags&32){var k=r.stateNode;try{mt(k,"")}catch(tt){Bt(r,r.return,tt)}}if(m&4&&(k=r.stateNode,k!=null)){var T=r.memoizedProps,$=a!==null?a.memoizedProps:T,q=r.type,re=r.updateQueue;if(r.updateQueue=null,re!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&Oe(k,T),pr(q,$);var Se=pr(q,T);for($=0;$<re.length;$+=2){var ze=re[$],Be=re[$+1];ze==="style"?rr(k,Be):ze==="dangerouslySetInnerHTML"?Tt(k,Be):ze==="children"?mt(k,Be):g(k,ze,Be,Se)}switch(q){case"input":Pe(k,T);break;case"textarea":et(k,T);break;case"select":var Te=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!T.multiple;var qe=T.value;qe!=null?le(k,!!T.multiple,qe,!1):Te!==!!T.multiple&&(T.defaultValue!=null?le(k,!!T.multiple,T.defaultValue,!0):le(k,!!T.multiple,T.multiple?[]:"",!1))}k[so]=T}catch(tt){Bt(r,r.return,tt)}}break;case 6:if(ai(n,r),vi(r),m&4){if(r.stateNode===null)throw Error(s(162));k=r.stateNode,T=r.memoizedProps;try{k.nodeValue=T}catch(tt){Bt(r,r.return,tt)}}break;case 3:if(ai(n,r),vi(r),m&4&&a!==null&&a.memoizedState.isDehydrated)try{Gs(n.containerInfo)}catch(tt){Bt(r,r.return,tt)}break;case 4:ai(n,r),vi(r);break;case 13:ai(n,r),vi(r),k=r.child,k.flags&8192&&(T=k.memoizedState!==null,k.stateNode.isHidden=T,!T||k.alternate!==null&&k.alternate.memoizedState!==null||(vd=Nt())),m&4&&lg(r);break;case 22:if(ze=a!==null&&a.memoizedState!==null,r.mode&1?(mr=(Se=mr)||ze,ai(n,r),mr=Se):ai(n,r),vi(r),m&8192){if(Se=r.memoizedState!==null,(r.stateNode.isHidden=Se)&&!ze&&(r.mode&1)!==0)for(Ye=r,ze=r.child;ze!==null;){for(Be=Ye=ze;Ye!==null;){switch(Te=Ye,qe=Te.child,Te.tag){case 0:case 11:case 14:case 15:mo(4,Te,Te.return);break;case 1:gs(Te,Te.return);var Je=Te.stateNode;if(typeof Je.componentWillUnmount=="function"){m=Te,a=Te.return;try{n=m,Je.props=n.memoizedProps,Je.state=n.memoizedState,Je.componentWillUnmount()}catch(tt){Bt(m,a,tt)}}break;case 5:gs(Te,Te.return);break;case 22:if(Te.memoizedState!==null){hg(Be);continue}}qe!==null?(qe.return=Te,Ye=qe):hg(Be)}ze=ze.sibling}e:for(ze=null,Be=r;;){if(Be.tag===5){if(ze===null){ze=Be;try{k=Be.stateNode,Se?(T=k.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=Be.stateNode,re=Be.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null,q.style.display=Mr("display",$))}catch(tt){Bt(r,r.return,tt)}}}else if(Be.tag===6){if(ze===null)try{Be.stateNode.nodeValue=Se?"":Be.memoizedProps}catch(tt){Bt(r,r.return,tt)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===r)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===r)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===r)break e;ze===Be&&(ze=null),Be=Be.return}ze===Be&&(ze=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:ai(n,r),vi(r),m&4&&lg(r);break;case 21:break;default:ai(n,r),vi(r)}}function vi(r){var n=r.flags;if(n&2){try{e:{for(var a=r.return;a!==null;){if(sg(a)){var m=a;break e}a=a.return}throw Error(s(160))}switch(m.tag){case 5:var k=m.stateNode;m.flags&32&&(mt(k,""),m.flags&=-33);var T=og(r);xd(r,T,k);break;case 3:case 4:var $=m.stateNode.containerInfo,q=og(r);gd(r,q,$);break;default:throw Error(s(161))}}catch(re){Bt(r,r.return,re)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function Uv(r,n,a){Ye=r,dg(r)}function dg(r,n,a){for(var m=(r.mode&1)!==0;Ye!==null;){var k=Ye,T=k.child;if(k.tag===22&&m){var $=k.memoizedState!==null||Na;if(!$){var q=k.alternate,re=q!==null&&q.memoizedState!==null||mr;q=Na;var Se=mr;if(Na=$,(mr=re)&&!Se)for(Ye=k;Ye!==null;)$=Ye,re=$.child,$.tag===22&&$.memoizedState!==null?pg(k):re!==null?(re.return=$,Ye=re):pg(k);for(;T!==null;)Ye=T,dg(T),T=T.sibling;Ye=k,Na=q,mr=Se}ug(r)}else(k.subtreeFlags&8772)!==0&&T!==null?(T.return=k,Ye=T):ug(r)}}function ug(r){for(;Ye!==null;){var n=Ye;if((n.flags&8772)!==0){var a=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:mr||Ha(5,n);break;case 1:var m=n.stateNode;if(n.flags&4&&!mr)if(a===null)m.componentDidMount();else{var k=n.elementType===n.type?a.memoizedProps:si(n.type,a.memoizedProps);m.componentDidUpdate(k,a.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=n.updateQueue;T!==null&&hf(n,T,m);break;case 3:var $=n.updateQueue;if($!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}hf(n,$,a)}break;case 5:var q=n.stateNode;if(a===null&&n.flags&4){a=q;var re=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&a.focus();break;case"img":re.src&&(a.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Se=n.alternate;if(Se!==null){var ze=Se.memoizedState;if(ze!==null){var Be=ze.dehydrated;Be!==null&&Gs(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}mr||n.flags&512&&fd(n)}catch(Te){Bt(n,n.return,Te)}}if(n===r){Ye=null;break}if(a=n.sibling,a!==null){a.return=n.return,Ye=a;break}Ye=n.return}}function hg(r){for(;Ye!==null;){var n=Ye;if(n===r){Ye=null;break}var a=n.sibling;if(a!==null){a.return=n.return,Ye=a;break}Ye=n.return}}function pg(r){for(;Ye!==null;){var n=Ye;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{Ha(4,n)}catch(re){Bt(n,a,re)}break;case 1:var m=n.stateNode;if(typeof m.componentDidMount=="function"){var k=n.return;try{m.componentDidMount()}catch(re){Bt(n,k,re)}}var T=n.return;try{fd(n)}catch(re){Bt(n,T,re)}break;case 5:var $=n.return;try{fd(n)}catch(re){Bt(n,$,re)}}}catch(re){Bt(n,n.return,re)}if(n===r){Ye=null;break}var q=n.sibling;if(q!==null){q.return=n.return,Ye=q;break}Ye=n.return}}var Vv=Math.ceil,Ua=w.ReactCurrentDispatcher,md=w.ReactCurrentOwner,Gr=w.ReactCurrentBatchConfig,gt=0,nr=null,Gt=null,dr=0,Wr=0,xs=Ji(0),Zt=0,yo=null,Dn=0,Va=0,yd=0,vo=null,Ar=null,vd=0,ms=1/0,Bi=null,Ka=!1,bd=null,nn=null,qa=!1,sn=null,Ga=0,bo=0,_d=null,Ya=-1,Xa=0;function br(){return(gt&6)!==0?Nt():Ya!==-1?Ya:Ya=Nt()}function on(r){return(r.mode&1)===0?1:(gt&2)!==0&&dr!==0?dr&-dr:Rv.transition!==null?(Xa===0&&(Xa=sp()),Xa):(r=_t,r!==0||(r=window.event,r=r===void 0?16:fp(r.type)),r)}function li(r,n,a,m){if(50<bo)throw bo=0,_d=null,Error(s(185));Hs(r,a,m),((gt&2)===0||r!==nr)&&(r===nr&&((gt&2)===0&&(Va|=a),Zt===4&&an(r,dr)),Lr(r,m),a===1&&gt===0&&(n.mode&1)===0&&(ms=Nt()+500,Ca&&Zi()))}function Lr(r,n){var a=r.callbackNode;R1(r,n);var m=sa(r,r===nr?dr:0);if(m===0)a!==null&&Xn(a),r.callbackNode=null,r.callbackPriority=0;else if(n=m&-m,r.callbackPriority!==n){if(a!=null&&Xn(a),n===1)r.tag===0?Ev(gg.bind(null,r)):Zp(gg.bind(null,r)),wv(function(){(gt&6)===0&&Zi()}),a=null;else{switch(op(m)){case 1:a=ec;break;case 4:a=ip;break;case 16:a=ta;break;case 536870912:a=np;break;default:a=ta}a=wg(a,fg.bind(null,r))}r.callbackPriority=n,r.callbackNode=a}}function fg(r,n){if(Ya=-1,Xa=0,(gt&6)!==0)throw Error(s(327));var a=r.callbackNode;if(ys()&&r.callbackNode!==a)return null;var m=sa(r,r===nr?dr:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||n)n=Ja(r,m);else{n=m;var k=gt;gt|=2;var T=mg();(nr!==r||dr!==n)&&(Bi=null,ms=Nt()+500,Mn(r,n));do try{Gv();break}catch(q){xg(r,q)}while(!0);$c(),Ua.current=T,gt=k,Gt!==null?n=0:(nr=null,dr=0,n=Zt)}if(n!==0){if(n===2&&(k=tc(r),k!==0&&(m=k,n=Sd(r,k))),n===1)throw a=yo,Mn(r,0),an(r,m),Lr(r,Nt()),a;if(n===6)an(r,m);else{if(k=r.current.alternate,(m&30)===0&&!Kv(k)&&(n=Ja(r,m),n===2&&(T=tc(r),T!==0&&(m=T,n=Sd(r,T))),n===1))throw a=yo,Mn(r,0),an(r,m),Lr(r,Nt()),a;switch(r.finishedWork=k,r.finishedLanes=m,n){case 0:case 1:throw Error(s(345));case 2:Bn(r,Ar,Bi);break;case 3:if(an(r,m),(m&130023424)===m&&(n=vd+500-Nt(),10<n)){if(sa(r,0)!==0)break;if(k=r.suspendedLanes,(k&m)!==m){br(),r.pingedLanes|=r.suspendedLanes&k;break}r.timeoutHandle=Rc(Bn.bind(null,r,Ar,Bi),n);break}Bn(r,Ar,Bi);break;case 4:if(an(r,m),(m&4194240)===m)break;for(n=r.eventTimes,k=-1;0<m;){var $=31-ri(m);T=1<<$,$=n[$],$>k&&(k=$),m&=~T}if(m=k,m=Nt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Vv(m/1960))-m,10<m){r.timeoutHandle=Rc(Bn.bind(null,r,Ar,Bi),m);break}Bn(r,Ar,Bi);break;case 5:Bn(r,Ar,Bi);break;default:throw Error(s(329))}}}return Lr(r,Nt()),r.callbackNode===a?fg.bind(null,r):null}function Sd(r,n){var a=vo;return r.current.memoizedState.isDehydrated&&(Mn(r,n).flags|=256),r=Ja(r,n),r!==2&&(n=Ar,Ar=a,n!==null&&wd(n)),r}function wd(r){Ar===null?Ar=r:Ar.push.apply(Ar,r)}function Kv(r){for(var n=r;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var m=0;m<a.length;m++){var k=a[m],T=k.getSnapshot;k=k.value;try{if(!ii(T(),k))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function an(r,n){for(n&=~yd,n&=~Va,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var a=31-ri(n),m=1<<a;r[a]=-1,n&=~m}}function gg(r){if((gt&6)!==0)throw Error(s(327));ys();var n=sa(r,0);if((n&1)===0)return Lr(r,Nt()),null;var a=Ja(r,n);if(r.tag!==0&&a===2){var m=tc(r);m!==0&&(n=m,a=Sd(r,m))}if(a===1)throw a=yo,Mn(r,0),an(r,n),Lr(r,Nt()),a;if(a===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,Bn(r,Ar,Bi),Lr(r,Nt()),null}function Cd(r,n){var a=gt;gt|=1;try{return r(n)}finally{gt=a,gt===0&&(ms=Nt()+500,Ca&&Zi())}}function In(r){sn!==null&&sn.tag===0&&(gt&6)===0&&ys();var n=gt;gt|=1;var a=Gr.transition,m=_t;try{if(Gr.transition=null,_t=1,r)return r()}finally{_t=m,Gr.transition=a,gt=n,(gt&6)===0&&Zi()}}function kd(){Wr=xs.current,Rt(xs)}function Mn(r,n){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Sv(a)),Gt!==null)for(a=Gt.return;a!==null;){var m=a;switch(Ic(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Sa();break;case 3:ps(),Rt(Er),Rt(fr),qc();break;case 5:Vc(m);break;case 4:ps();break;case 13:Rt(zt);break;case 19:Rt(zt);break;case 10:Fc(m.type._context);break;case 22:case 23:kd()}a=a.return}if(nr=r,Gt=r=ln(r.current,null),dr=Wr=n,Zt=0,yo=null,yd=Va=Dn=0,Ar=vo=null,An!==null){for(n=0;n<An.length;n++)if(a=An[n],m=a.interleaved,m!==null){a.interleaved=null;var k=m.next,T=a.pending;if(T!==null){var $=T.next;T.next=k,m.next=$}a.pending=m}An=null}return r}function xg(r,n){do{var a=Gt;try{if($c(),Ia.current=Oa,Ma){for(var m=Dt.memoizedState;m!==null;){var k=m.queue;k!==null&&(k.pending=null),m=m.next}Ma=!1}if(zn=0,ir=Qt=Dt=null,ho=!1,po=0,md.current=null,a===null||a.return===null){Zt=1,yo=n,Gt=null;break}e:{var T=r,$=a.return,q=a,re=n;if(n=dr,q.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var Se=re,ze=q,Be=ze.tag;if((ze.mode&1)===0&&(Be===0||Be===11||Be===15)){var Te=ze.alternate;Te?(ze.updateQueue=Te.updateQueue,ze.memoizedState=Te.memoizedState,ze.lanes=Te.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var qe=Wf($);if(qe!==null){qe.flags&=-257,Nf(qe,$,q,T,n),qe.mode&1&&Ff(T,Se,n),n=qe,re=Se;var Je=n.updateQueue;if(Je===null){var tt=new Set;tt.add(re),n.updateQueue=tt}else Je.add(re);break e}else{if((n&1)===0){Ff(T,Se,n),jd();break e}re=Error(s(426))}}else if(At&&q.mode&1){var Ht=Wf($);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),Nf(Ht,$,q,T,n),Pc(fs(re,q));break e}}T=re=fs(re,q),Zt!==4&&(Zt=2),vo===null?vo=[T]:vo.push(T),T=$;do{switch(T.tag){case 3:T.flags|=65536,n&=-n,T.lanes|=n;var ue=Of(T,re,n);uf(T,ue);break e;case 1:q=re;var ie=T.type,fe=T.stateNode;if((T.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(nn===null||!nn.has(fe)))){T.flags|=65536,n&=-n,T.lanes|=n;var $e=$f(T,q,n);uf(T,$e);break e}}T=T.return}while(T!==null)}vg(a)}catch(rt){n=rt,Gt===a&&a!==null&&(Gt=a=a.return);continue}break}while(!0)}function mg(){var r=Ua.current;return Ua.current=Oa,r===null?Oa:r}function jd(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),nr===null||(Dn&268435455)===0&&(Va&268435455)===0||an(nr,dr)}function Ja(r,n){var a=gt;gt|=2;var m=mg();(nr!==r||dr!==n)&&(Bi=null,Mn(r,n));do try{qv();break}catch(k){xg(r,k)}while(!0);if($c(),gt=a,Ua.current=m,Gt!==null)throw Error(s(261));return nr=null,dr=0,Zt}function qv(){for(;Gt!==null;)yg(Gt)}function Gv(){for(;Gt!==null&&!v1();)yg(Gt)}function yg(r){var n=Sg(r.alternate,r,Wr);r.memoizedProps=r.pendingProps,n===null?vg(r):Gt=n,md.current=null}function vg(r){var n=r;do{var a=n.alternate;if(r=n.return,(n.flags&32768)===0){if(a=Fv(a,n,Wr),a!==null){Gt=a;return}}else{if(a=Wv(a,n),a!==null){a.flags&=32767,Gt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Zt=6,Gt=null;return}}if(n=n.sibling,n!==null){Gt=n;return}Gt=n=r}while(n!==null);Zt===0&&(Zt=5)}function Bn(r,n,a){var m=_t,k=Gr.transition;try{Gr.transition=null,_t=1,Yv(r,n,a,m)}finally{Gr.transition=k,_t=m}return null}function Yv(r,n,a,m){do ys();while(sn!==null);if((gt&6)!==0)throw Error(s(327));a=r.finishedWork;var k=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var T=a.lanes|a.childLanes;if(T1(r,T),r===nr&&(Gt=nr=null,dr=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||qa||(qa=!0,wg(ta,function(){return ys(),null})),T=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||T){T=Gr.transition,Gr.transition=null;var $=_t;_t=1;var q=gt;gt|=4,md.current=null,Hv(r,a),cg(a,r),gv(jc),la=!!kc,jc=kc=null,r.current=a,Uv(a),b1(),gt=q,_t=$,Gr.transition=T}else r.current=a;if(qa&&(qa=!1,sn=r,Ga=k),T=r.pendingLanes,T===0&&(nn=null),w1(a.stateNode),Lr(r,Nt()),n!==null)for(m=r.onRecoverableError,a=0;a<n.length;a++)k=n[a],m(k.value,{componentStack:k.stack,digest:k.digest});if(Ka)throw Ka=!1,r=bd,bd=null,r;return(Ga&1)!==0&&r.tag!==0&&ys(),T=r.pendingLanes,(T&1)!==0?r===_d?bo++:(bo=0,_d=r):bo=0,Zi(),null}function ys(){if(sn!==null){var r=op(Ga),n=Gr.transition,a=_t;try{if(Gr.transition=null,_t=16>r?16:r,sn===null)var m=!1;else{if(r=sn,sn=null,Ga=0,(gt&6)!==0)throw Error(s(331));var k=gt;for(gt|=4,Ye=r.current;Ye!==null;){var T=Ye,$=T.child;if((Ye.flags&16)!==0){var q=T.deletions;if(q!==null){for(var re=0;re<q.length;re++){var Se=q[re];for(Ye=Se;Ye!==null;){var ze=Ye;switch(ze.tag){case 0:case 11:case 15:mo(8,ze,T)}var Be=ze.child;if(Be!==null)Be.return=ze,Ye=Be;else for(;Ye!==null;){ze=Ye;var Te=ze.sibling,qe=ze.return;if(ng(ze),ze===Se){Ye=null;break}if(Te!==null){Te.return=qe,Ye=Te;break}Ye=qe}}}var Je=T.alternate;if(Je!==null){var tt=Je.child;if(tt!==null){Je.child=null;do{var Ht=tt.sibling;tt.sibling=null,tt=Ht}while(tt!==null)}}Ye=T}}if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,Ye=$;else e:for(;Ye!==null;){if(T=Ye,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:mo(9,T,T.return)}var ue=T.sibling;if(ue!==null){ue.return=T.return,Ye=ue;break e}Ye=T.return}}var ie=r.current;for(Ye=ie;Ye!==null;){$=Ye;var fe=$.child;if(($.subtreeFlags&2064)!==0&&fe!==null)fe.return=$,Ye=fe;else e:for($=ie;Ye!==null;){if(q=Ye,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Ha(9,q)}}catch(rt){Bt(q,q.return,rt)}if(q===$){Ye=null;break e}var $e=q.sibling;if($e!==null){$e.return=q.return,Ye=$e;break e}Ye=q.return}}if(gt=k,Zi(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(ra,r)}catch{}m=!0}return m}finally{_t=a,Gr.transition=n}}return!1}function bg(r,n,a){n=fs(a,n),n=Of(r,n,1),r=tn(r,n,1),n=br(),r!==null&&(Hs(r,1,n),Lr(r,n))}function Bt(r,n,a){if(r.tag===3)bg(r,r,a);else for(;n!==null;){if(n.tag===3){bg(n,r,a);break}else if(n.tag===1){var m=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(nn===null||!nn.has(m))){r=fs(a,r),r=$f(n,r,1),n=tn(n,r,1),r=br(),n!==null&&(Hs(n,1,r),Lr(n,r));break}}n=n.return}}function Xv(r,n,a){var m=r.pingCache;m!==null&&m.delete(n),n=br(),r.pingedLanes|=r.suspendedLanes&a,nr===r&&(dr&a)===a&&(Zt===4||Zt===3&&(dr&130023424)===dr&&500>Nt()-vd?Mn(r,0):yd|=a),Lr(r,n)}function _g(r,n){n===0&&((r.mode&1)===0?n=1:(n=na,na<<=1,(na&130023424)===0&&(na=4194304)));var a=br();r=Di(r,n),r!==null&&(Hs(r,n,a),Lr(r,a))}function Jv(r){var n=r.memoizedState,a=0;n!==null&&(a=n.retryLane),_g(r,a)}function Qv(r,n){var a=0;switch(r.tag){case 13:var m=r.stateNode,k=r.memoizedState;k!==null&&(a=k.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(n),_g(r,a)}var Sg;Sg=function(r,n,a){if(r!==null)if(r.memoizedProps!==n.pendingProps||Er.current)Tr=!0;else{if((r.lanes&a)===0&&(n.flags&128)===0)return Tr=!1,$v(r,n,a);Tr=(r.flags&131072)!==0}else Tr=!1,At&&(n.flags&1048576)!==0&&ef(n,ja,n.index);switch(n.lanes=0,n.tag){case 2:var m=n.type;Wa(r,n),r=n.pendingProps;var k=os(n,fr.current);hs(n,a),k=Xc(null,n,m,r,k,a);var T=Jc();return n.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Rr(m)?(T=!0,wa(n)):T=!1,n.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Hc(n),k.updater=$a,n.stateNode=k,k._reactInternals=n,id(n,m,r,a),n=ad(null,n,m,!0,T,a)):(n.tag=0,At&&T&&Dc(n),vr(null,n,k,a),n=n.child),n;case 16:m=n.elementType;e:{switch(Wa(r,n),r=n.pendingProps,k=m._init,m=k(m._payload),n.type=m,k=n.tag=eb(m),r=si(m,r),k){case 0:n=od(null,n,m,r,a);break e;case 1:n=Gf(null,n,m,r,a);break e;case 11:n=Hf(null,n,m,r,a);break e;case 14:n=Uf(null,n,m,si(m.type,r),a);break e}throw Error(s(306,m,""))}return n;case 0:return m=n.type,k=n.pendingProps,k=n.elementType===m?k:si(m,k),od(r,n,m,k,a);case 1:return m=n.type,k=n.pendingProps,k=n.elementType===m?k:si(m,k),Gf(r,n,m,k,a);case 3:e:{if(Yf(n),r===null)throw Error(s(387));m=n.pendingProps,T=n.memoizedState,k=T.element,df(r,n),za(n,m,null,a);var $=n.memoizedState;if(m=$.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},n.updateQueue.baseState=T,n.memoizedState=T,n.flags&256){k=fs(Error(s(423)),n),n=Xf(r,n,m,a,k);break e}else if(m!==k){k=fs(Error(s(424)),n),n=Xf(r,n,m,a,k);break e}else for(Fr=Xi(n.stateNode.containerInfo.firstChild),$r=n,At=!0,ni=null,a=lf(n,null,m,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(cs(),m===k){n=Mi(r,n,a);break e}vr(r,n,m,a)}n=n.child}return n;case 5:return pf(n),r===null&&Bc(n),m=n.type,k=n.pendingProps,T=r!==null?r.memoizedProps:null,$=k.children,Ec(m,k)?$=null:T!==null&&Ec(m,T)&&(n.flags|=32),qf(r,n),vr(r,n,$,a),n.child;case 6:return r===null&&Bc(n),null;case 13:return Jf(r,n,a);case 4:return Uc(n,n.stateNode.containerInfo),m=n.pendingProps,r===null?n.child=ds(n,null,m,a):vr(r,n,m,a),n.child;case 11:return m=n.type,k=n.pendingProps,k=n.elementType===m?k:si(m,k),Hf(r,n,m,k,a);case 7:return vr(r,n,n.pendingProps,a),n.child;case 8:return vr(r,n,n.pendingProps.children,a),n.child;case 12:return vr(r,n,n.pendingProps.children,a),n.child;case 10:e:{if(m=n.type._context,k=n.pendingProps,T=n.memoizedProps,$=k.value,kt(Ta,m._currentValue),m._currentValue=$,T!==null)if(ii(T.value,$)){if(T.children===k.children&&!Er.current){n=Mi(r,n,a);break e}}else for(T=n.child,T!==null&&(T.return=n);T!==null;){var q=T.dependencies;if(q!==null){$=T.child;for(var re=q.firstContext;re!==null;){if(re.context===m){if(T.tag===1){re=Ii(-1,a&-a),re.tag=2;var Se=T.updateQueue;if(Se!==null){Se=Se.shared;var ze=Se.pending;ze===null?re.next=re:(re.next=ze.next,ze.next=re),Se.pending=re}}T.lanes|=a,re=T.alternate,re!==null&&(re.lanes|=a),Wc(T.return,a,n),q.lanes|=a;break}re=re.next}}else if(T.tag===10)$=T.type===n.type?null:T.child;else if(T.tag===18){if($=T.return,$===null)throw Error(s(341));$.lanes|=a,q=$.alternate,q!==null&&(q.lanes|=a),Wc($,a,n),$=T.sibling}else $=T.child;if($!==null)$.return=T;else for($=T;$!==null;){if($===n){$=null;break}if(T=$.sibling,T!==null){T.return=$.return,$=T;break}$=$.return}T=$}vr(r,n,k.children,a),n=n.child}return n;case 9:return k=n.type,m=n.pendingProps.children,hs(n,a),k=Kr(k),m=m(k),n.flags|=1,vr(r,n,m,a),n.child;case 14:return m=n.type,k=si(m,n.pendingProps),k=si(m.type,k),Uf(r,n,m,k,a);case 15:return Vf(r,n,n.type,n.pendingProps,a);case 17:return m=n.type,k=n.pendingProps,k=n.elementType===m?k:si(m,k),Wa(r,n),n.tag=1,Rr(m)?(r=!0,wa(n)):r=!1,hs(n,a),Bf(n,m,k),id(n,m,k,a),ad(null,n,m,!0,r,a);case 19:return Zf(r,n,a);case 22:return Kf(r,n,a)}throw Error(s(156,n.tag))};function wg(r,n){return Ri(r,n)}function Zv(r,n,a,m){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(r,n,a,m){return new Zv(r,n,a,m)}function Ed(r){return r=r.prototype,!(!r||!r.isReactComponent)}function eb(r){if(typeof r=="function")return Ed(r)?1:0;if(r!=null){if(r=r.$$typeof,r===K)return 11;if(r===V)return 14}return 2}function ln(r,n){var a=r.alternate;return a===null?(a=Yr(r.tag,n,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=n,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,n=r.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Qa(r,n,a,m,k,T){var $=2;if(m=r,typeof r=="function")Ed(r)&&($=1);else if(typeof r=="string")$=5;else e:switch(r){case z:return Pn(a.children,k,T,n);case E:$=8,k|=8;break;case P:return r=Yr(12,a,n,k|2),r.elementType=P,r.lanes=T,r;case U:return r=Yr(13,a,n,k),r.elementType=U,r.lanes=T,r;case te:return r=Yr(19,a,n,k),r.elementType=te,r.lanes=T,r;case Q:return Za(a,k,T,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:$=10;break e;case H:$=9;break e;case K:$=11;break e;case V:$=14;break e;case de:$=16,m=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return n=Yr($,a,n,k),n.elementType=r,n.type=m,n.lanes=T,n}function Pn(r,n,a,m){return r=Yr(7,r,m,n),r.lanes=a,r}function Za(r,n,a,m){return r=Yr(22,r,m,n),r.elementType=Q,r.lanes=a,r.stateNode={isHidden:!1},r}function Rd(r,n,a){return r=Yr(6,r,null,n),r.lanes=a,r}function Td(r,n,a){return n=Yr(4,r.children!==null?r.children:[],r.key,n),n.lanes=a,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function tb(r,n,a,m,k){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=m,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Ad(r,n,a,m,k,T,$,q,re){return r=new tb(r,n,a,q,re),n===1?(n=1,T===!0&&(n|=8)):n=0,T=Yr(3,null,null,n),r.current=T,T.stateNode=r,T.memoizedState={element:m,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(T),r}function rb(r,n,a){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:m==null?null:""+m,children:r,containerInfo:n,implementation:a}}function Cg(r){if(!r)return Qi;r=r._reactInternals;e:{if(ye(r)!==r||r.tag!==1)throw Error(s(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Rr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(r.tag===1){var a=r.type;if(Rr(a))return Jp(r,a,n)}return n}function kg(r,n,a,m,k,T,$,q,re){return r=Ad(a,m,!0,r,k,T,$,q,re),r.context=Cg(null),a=r.current,m=br(),k=on(a),T=Ii(m,k),T.callback=n??null,tn(a,T,k),r.current.lanes=k,Hs(r,k,m),Lr(r,m),r}function el(r,n,a,m){var k=n.current,T=br(),$=on(k);return a=Cg(a),n.context===null?n.context=a:n.pendingContext=a,n=Ii(T,$),n.payload={element:r},m=m===void 0?null:m,m!==null&&(n.callback=m),r=tn(k,n,$),r!==null&&(li(r,k,$,T),La(r,k,$)),$}function tl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function jg(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<n?a:n}}function Ld(r,n){jg(r,n),(r=r.alternate)&&jg(r,n)}function ib(){return null}var Eg=typeof reportError=="function"?reportError:function(r){console.error(r)};function zd(r){this._internalRoot=r}rl.prototype.render=zd.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(s(409));el(r,n,null,null)},rl.prototype.unmount=zd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;In(function(){el(null,r,null,null)}),n[Ti]=null}};function rl(r){this._internalRoot=r}rl.prototype.unstable_scheduleHydration=function(r){if(r){var n=cp();r={blockedOn:null,target:r,priority:n};for(var a=0;a<qi.length&&n!==0&&n<qi[a].priority;a++);qi.splice(a,0,r),a===0&&hp(r)}};function Dd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function il(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Rg(){}function nb(r,n,a,m,k){if(k){if(typeof m=="function"){var T=m;m=function(){var Se=tl($);T.call(Se)}}var $=kg(n,m,r,0,null,!1,!1,"",Rg);return r._reactRootContainer=$,r[Ti]=$.current,io(r.nodeType===8?r.parentNode:r),In(),$}for(;k=r.lastChild;)r.removeChild(k);if(typeof m=="function"){var q=m;m=function(){var Se=tl(re);q.call(Se)}}var re=Ad(r,0,!1,null,null,!1,!1,"",Rg);return r._reactRootContainer=re,r[Ti]=re.current,io(r.nodeType===8?r.parentNode:r),In(function(){el(n,re,a,m)}),re}function nl(r,n,a,m,k){var T=a._reactRootContainer;if(T){var $=T;if(typeof k=="function"){var q=k;k=function(){var re=tl($);q.call(re)}}el(n,$,r,k)}else $=nb(a,n,r,k,m);return tl($)}ap=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var a=Ns(n.pendingLanes);a!==0&&(ic(n,a|1),Lr(n,Nt()),(gt&6)===0&&(ms=Nt()+500,Zi()))}break;case 13:In(function(){var m=Di(r,1);if(m!==null){var k=br();li(m,r,1,k)}}),Ld(r,1)}},nc=function(r){if(r.tag===13){var n=Di(r,134217728);if(n!==null){var a=br();li(n,r,134217728,a)}Ld(r,134217728)}},lp=function(r){if(r.tag===13){var n=on(r),a=Di(r,n);if(a!==null){var m=br();li(a,r,n,m)}Ld(r,n)}},cp=function(){return _t},dp=function(r,n){var a=_t;try{return _t=r,n()}finally{_t=a}},Ne=function(r,n,a){switch(n){case"input":if(Pe(r,a),n=a.name,a.type==="radio"&&n!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var m=a[n];if(m!==r&&m.form===r.form){var k=_a(m);if(!k)throw Error(s(90));ee(m),Pe(m,k)}}}break;case"textarea":et(r,a);break;case"select":n=a.value,n!=null&&le(r,!!a.multiple,n,!1)}},qt=Cd,Br=In;var sb={usingClientEntryPoint:!1,Events:[oo,ns,_a,Kt,ft,Cd]},_o={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ob={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hi(r),r===null?null:r.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||ib,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{ra=sl.inject(ob),gi=sl}catch{}}return zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb,zr.createPortal=function(r,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dd(n))throw Error(s(200));return rb(r,n,null,a)},zr.createRoot=function(r,n){if(!Dd(r))throw Error(s(299));var a=!1,m="",k=Eg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(m=n.identifierPrefix),n.onRecoverableError!==void 0&&(k=n.onRecoverableError)),n=Ad(r,1,!1,null,null,a,!1,m,k),r[Ti]=n.current,io(r.nodeType===8?r.parentNode:r),new zd(n)},zr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=Hi(n),r=r===null?null:r.stateNode,r},zr.flushSync=function(r){return In(r)},zr.hydrate=function(r,n,a){if(!il(n))throw Error(s(200));return nl(null,r,n,!0,a)},zr.hydrateRoot=function(r,n,a){if(!Dd(r))throw Error(s(405));var m=a!=null&&a.hydratedSources||null,k=!1,T="",$=Eg;if(a!=null&&(a.unstable_strictMode===!0&&(k=!0),a.identifierPrefix!==void 0&&(T=a.identifierPrefix),a.onRecoverableError!==void 0&&($=a.onRecoverableError)),n=kg(n,null,r,1,a??null,k,!1,T,$),r[Ti]=n.current,io(r),m)for(r=0;r<m.length;r++)a=m[r],k=a._getVersion,k=k(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,k]:n.mutableSourceEagerHydrationData.push(a,k);return new rl(n)},zr.render=function(r,n,a){if(!il(n))throw Error(s(200));return nl(null,r,n,!1,a)},zr.unmountComponentAtNode=function(r){if(!il(r))throw Error(s(40));return r._reactRootContainer?(In(function(){nl(null,null,r,!1,function(){r._reactRootContainer=null,r[Ti]=null})}),!0):!1},zr.unstable_batchedUpdates=Cd,zr.unstable_renderSubtreeIntoContainer=function(r,n,a,m){if(!il(a))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return nl(r,n,a,!1,m)},zr.version="18.3.1-next-f1338f8080-20240426",zr}var Bg;function Vm(){if(Bg)return Bd.exports;Bg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),Bd.exports=gb(),Bd.exports}var Pg;function xb(){if(Pg)return ol;Pg=1;var t=Vm();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var mb=xb();const yb=Um(mb);Vm();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},Oo.apply(this,arguments)}var pn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pn||(pn={}));const Og="popstate";function vb(t){t===void 0&&(t={});function i(o,u){let{pathname:S,search:b,hash:l}=o.location;return vu("",{pathname:S,search:b,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(o,u){return typeof u=="string"?u:Ll(u)}return _b(i,s,null,t)}function Mt(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function ah(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function bb(){return Math.random().toString(36).substr(2,8)}function $g(t,i){return{usr:t.state,key:t.key,idx:i}}function vu(t,i,s,o){return s===void 0&&(s=null),Oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?Ms(i):i,{state:s,key:i&&i.key||o||bb()})}function Ll(t){let{pathname:i="/",search:s="",hash:o=""}=t;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function Ms(t){let i={};if(t){let s=t.indexOf("#");s>=0&&(i.hash=t.substr(s),t=t.substr(0,s));let o=t.indexOf("?");o>=0&&(i.search=t.substr(o),t=t.substr(0,o)),t&&(i.pathname=t)}return i}function _b(t,i,s,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:S=!1}=o,b=u.history,l=pn.Pop,c=null,x=v();x==null&&(x=0,b.replaceState(Oo({},b.state,{idx:x}),""));function v(){return(b.state||{idx:null}).idx}function d(){l=pn.Pop;let h=v(),p=h==null?null:h-x;x=h,c&&c({action:l,location:C.location,delta:p})}function y(h,p){l=pn.Push;let f=vu(C.location,h,p);x=v()+1;let g=$g(f,x),w=C.createHref(f);try{b.pushState(g,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(w)}S&&c&&c({action:l,location:C.location,delta:1})}function _(h,p){l=pn.Replace;let f=vu(C.location,h,p);x=v();let g=$g(f,x),w=C.createHref(f);b.replaceState(g,"",w),S&&c&&c({action:l,location:C.location,delta:0})}function j(h){let p=u.location.origin!=="null"?u.location.origin:u.location.href,f=typeof h=="string"?h:Ll(h);return f=f.replace(/ $/,"%20"),Mt(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let C={get action(){return l},get location(){return t(u,b)},listen(h){if(c)throw new Error("A history only accepts one active listener");return u.addEventListener(Og,d),c=h,()=>{u.removeEventListener(Og,d),c=null}},createHref(h){return i(u,h)},createURL:j,encodeLocation(h){let p=j(h);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:y,replace:_,go(h){return b.go(h)}};return C}var Fg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fg||(Fg={}));function Sb(t,i,s){return s===void 0&&(s="/"),wb(t,i,s)}function wb(t,i,s,o){let u=typeof i=="string"?Ms(i):i,S=As(u.pathname||"/",s);if(S==null)return null;let b=Km(t);Cb(b);let l=null;for(let c=0;l==null&&c<b.length;++c){let x=Mb(S);l=Db(b[c],x)}return l}function Km(t,i,s,o){i===void 0&&(i=[]),s===void 0&&(s=[]),o===void 0&&(o="");let u=(S,b,l)=>{let c={relativePath:l===void 0?S.path||"":l,caseSensitive:S.caseSensitive===!0,childrenIndex:b,route:S};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(o),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(o.length));let x=xn([o,c.relativePath]),v=s.concat(c);S.children&&S.children.length>0&&(Mt(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Km(S.children,i,v,x)),!(S.path==null&&!S.index)&&i.push({path:x,score:Lb(x,S.index),routesMeta:v})};return t.forEach((S,b)=>{var l;if(S.path===""||!((l=S.path)!=null&&l.includes("?")))u(S,b);else for(let c of qm(S.path))u(S,b,c)}),i}function qm(t){let i=t.split("/");if(i.length===0)return[];let[s,...o]=i,u=s.endsWith("?"),S=s.replace(/\?$/,"");if(o.length===0)return u?[S,""]:[S];let b=qm(o.join("/")),l=[];return l.push(...b.map(c=>c===""?S:[S,c].join("/"))),u&&l.push(...b),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Cb(t){t.sort((i,s)=>i.score!==s.score?s.score-i.score:zb(i.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const kb=/^:[\w-]+$/,jb=3,Eb=2,Rb=1,Tb=10,Ab=-2,Wg=t=>t==="*";function Lb(t,i){let s=t.split("/"),o=s.length;return s.some(Wg)&&(o+=Ab),i&&(o+=Eb),s.filter(u=>!Wg(u)).reduce((u,S)=>u+(kb.test(S)?jb:S===""?Rb:Tb),o)}function zb(t,i){return t.length===i.length&&t.slice(0,-1).every((o,u)=>o===i[u])?t[t.length-1]-i[i.length-1]:0}function Db(t,i,s){let{routesMeta:o}=t,u={},S="/",b=[];for(let l=0;l<o.length;++l){let c=o[l],x=l===o.length-1,v=S==="/"?i:i.slice(S.length)||"/",d=bu({path:c.relativePath,caseSensitive:c.caseSensitive,end:x},v),y=c.route;if(!d)return null;Object.assign(u,d.params),b.push({params:u,pathname:xn([S,d.pathname]),pathnameBase:Fb(xn([S,d.pathnameBase])),route:y}),d.pathnameBase!=="/"&&(S=xn([S,d.pathnameBase]))}return b}function bu(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,o]=Ib(t.path,t.caseSensitive,t.end),u=i.match(s);if(!u)return null;let S=u[0],b=S.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((x,v,d)=>{let{paramName:y,isOptional:_}=v;if(y==="*"){let C=l[d]||"";b=S.slice(0,S.length-C.length).replace(/(.)\/+$/,"$1")}const j=l[d];return _&&!j?x[y]=void 0:x[y]=(j||"").replace(/%2F/g,"/"),x},{}),pathname:S,pathnameBase:b,pattern:t}}function Ib(t,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),ah(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],u="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,l,c)=>(o.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),u+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":t!==""&&t!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function Mb(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return ah(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function As(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,o=t.charAt(s);return o&&o!=="/"?null:t.slice(s)||"/"}const Bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pb=t=>Bb.test(t);function Ob(t,i){i===void 0&&(i="/");let{pathname:s,search:o="",hash:u=""}=typeof t=="string"?Ms(t):t,S;if(s)if(Pb(s))S=s;else{if(s.includes("//")){let b=s;s=s.replace(/\/\/+/g,"/"),ah(!1,"Pathnames cannot have embedded double slashes - normalizing "+(b+" -> "+s))}s.startsWith("/")?S=Ng(s.substring(1),"/"):S=Ng(s,i)}else S=i;return{pathname:S,search:Wb(o),hash:Nb(u)}}function Ng(t,i){let s=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function $d(t,i,s,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $b(t){return t.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function lh(t,i){let s=$b(t);return i?s.map((o,u)=>u===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function ch(t,i,s,o){o===void 0&&(o=!1);let u;typeof t=="string"?u=Ms(t):(u=Oo({},t),Mt(!u.pathname||!u.pathname.includes("?"),$d("?","pathname","search",u)),Mt(!u.pathname||!u.pathname.includes("#"),$d("#","pathname","hash",u)),Mt(!u.search||!u.search.includes("#"),$d("#","search","hash",u)));let S=t===""||u.pathname==="",b=S?"/":u.pathname,l;if(b==null)l=s;else{let d=i.length-1;if(!o&&b.startsWith("..")){let y=b.split("/");for(;y[0]==="..";)y.shift(),d-=1;u.pathname=y.join("/")}l=d>=0?i[d]:"/"}let c=Ob(u,l),x=b&&b!=="/"&&b.endsWith("/"),v=(S||b===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(x||v)&&(c.pathname+="/"),c}const xn=t=>t.join("/").replace(/\/\/+/g,"/"),Fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gm=["post","put","patch","delete"];new Set(Gm);const Ub=["get",...Gm];new Set(Ub);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},$o.apply(this,arguments)}const Nl=L.createContext(null),Ym=L.createContext(null),Ni=L.createContext(null),Hl=L.createContext(null),ji=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Xm=L.createContext(null);function Vb(t,i){let{relative:s}=i===void 0?{}:i;Bs()||Mt(!1);let{basename:o,navigator:u}=L.useContext(Ni),{hash:S,pathname:b,search:l}=Ul(t,{relative:s}),c=b;return o!=="/"&&(c=b==="/"?o:xn([o,b])),u.createHref({pathname:c,search:l,hash:S})}function Bs(){return L.useContext(Hl)!=null}function wn(){return Bs()||Mt(!1),L.useContext(Hl).location}function Jm(t){L.useContext(Ni).static||L.useLayoutEffect(t)}function Wt(){let{isDataRoute:t}=L.useContext(ji);return t?o_():Kb()}function Kb(){Bs()||Mt(!1);let t=L.useContext(Nl),{basename:i,future:s,navigator:o}=L.useContext(Ni),{matches:u}=L.useContext(ji),{pathname:S}=wn(),b=JSON.stringify(lh(u,s.v7_relativeSplatPath)),l=L.useRef(!1);return Jm(()=>{l.current=!0}),L.useCallback(function(x,v){if(v===void 0&&(v={}),!l.current)return;if(typeof x=="number"){o.go(x);return}let d=ch(x,JSON.parse(b),S,v.relative==="path");t==null&&i!=="/"&&(d.pathname=d.pathname==="/"?i:xn([i,d.pathname])),(v.replace?o.replace:o.push)(d,v.state,v)},[i,o,b,S,t])}const qb=L.createContext(null);function Gb(t){let i=L.useContext(ji).outlet;return i&&L.createElement(qb.Provider,{value:t},i)}function Gn(){let{matches:t}=L.useContext(ji),i=t[t.length-1];return i?i.params:{}}function Ul(t,i){let{relative:s}=i===void 0?{}:i,{future:o}=L.useContext(Ni),{matches:u}=L.useContext(ji),{pathname:S}=wn(),b=JSON.stringify(lh(u,o.v7_relativeSplatPath));return L.useMemo(()=>ch(t,JSON.parse(b),S,s==="path"),[t,b,S,s])}function Yb(t,i){return Xb(t,i)}function Xb(t,i,s,o){Bs()||Mt(!1);let{navigator:u}=L.useContext(Ni),{matches:S}=L.useContext(ji),b=S[S.length-1],l=b?b.params:{};b&&b.pathname;let c=b?b.pathnameBase:"/";b&&b.route;let x=wn(),v;if(i){var d;let h=typeof i=="string"?Ms(i):i;c==="/"||(d=h.pathname)!=null&&d.startsWith(c)||Mt(!1),v=h}else v=x;let y=v.pathname||"/",_=y;if(c!=="/"){let h=c.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(h.length).join("/")}let j=Sb(t,{pathname:_}),C=t_(j&&j.map(h=>Object.assign({},h,{params:Object.assign({},l,h.params),pathname:xn([c,u.encodeLocation?u.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?c:xn([c,u.encodeLocation?u.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),S,s,o);return i&&C?L.createElement(Hl.Provider,{value:{location:$o({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:pn.Pop}},C):C}function Jb(){let t=s_(),i=Hb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},i),s?L.createElement("pre",{style:u},s):null,null)}const Qb=L.createElement(Jb,null);class Zb extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?L.createElement(ji.Provider,{value:this.props.routeContext},L.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e_(t){let{routeContext:i,match:s,children:o}=t,u=L.useContext(Nl);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement(ji.Provider,{value:i},o)}function t_(t,i,s,o){var u;if(i===void 0&&(i=[]),s===void 0&&(s=null),o===void 0&&(o=null),t==null){var S;if(!s)return null;if(s.errors)t=s.matches;else if((S=o)!=null&&S.v7_partialHydration&&i.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let b=t,l=(u=s)==null?void 0:u.errors;if(l!=null){let v=b.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);v>=0||Mt(!1),b=b.slice(0,Math.min(b.length,v+1))}let c=!1,x=-1;if(s&&o&&o.v7_partialHydration)for(let v=0;v<b.length;v++){let d=b[v];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(x=v),d.route.id){let{loaderData:y,errors:_}=s,j=d.route.loader&&y[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||j){c=!0,x>=0?b=b.slice(0,x+1):b=[b[0]];break}}}return b.reduceRight((v,d,y)=>{let _,j=!1,C=null,h=null;s&&(_=l&&d.route.id?l[d.route.id]:void 0,C=d.route.errorElement||Qb,c&&(x<0&&y===0?(a_("route-fallback"),j=!0,h=null):x===y&&(j=!0,h=d.route.hydrateFallbackElement||null)));let p=i.concat(b.slice(0,y+1)),f=()=>{let g;return _?g=C:j?g=h:d.route.Component?g=L.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=v,L.createElement(e_,{match:d,routeContext:{outlet:v,matches:p,isDataRoute:s!=null},children:g})};return s&&(d.route.ErrorBoundary||d.route.errorElement||y===0)?L.createElement(Zb,{location:s.location,revalidation:s.revalidation,component:C,error:_,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var Qm=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Qm||{}),Zm=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Zm||{});function r_(t){let i=L.useContext(Nl);return i||Mt(!1),i}function i_(t){let i=L.useContext(Ym);return i||Mt(!1),i}function n_(t){let i=L.useContext(ji);return i||Mt(!1),i}function e0(t){let i=n_(),s=i.matches[i.matches.length-1];return s.route.id||Mt(!1),s.route.id}function s_(){var t;let i=L.useContext(Xm),s=i_(),o=e0();return i!==void 0?i:(t=s.errors)==null?void 0:t[o]}function o_(){let{router:t}=r_(Qm.UseNavigateStable),i=e0(Zm.UseNavigateStable),s=L.useRef(!1);return Jm(()=>{s.current=!0}),L.useCallback(function(u,S){S===void 0&&(S={}),s.current&&(typeof u=="number"?t.navigate(u):t.navigate(u,$o({fromRouteId:i},S)))},[t,i])}const Hg={};function a_(t,i,s){Hg[t]||(Hg[t]=!0)}function l_(t,i){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function c_(t){let{to:i,replace:s,state:o,relative:u}=t;Bs()||Mt(!1);let{future:S,static:b}=L.useContext(Ni),{matches:l}=L.useContext(ji),{pathname:c}=wn(),x=Wt(),v=ch(i,lh(l,S.v7_relativeSplatPath),c,u==="path"),d=JSON.stringify(v);return L.useEffect(()=>x(JSON.parse(d),{replace:s,state:o,relative:u}),[x,d,u,s,o]),null}function d_(t){return Gb(t.context)}function Ot(t){Mt(!1)}function u_(t){let{basename:i="/",children:s=null,location:o,navigationType:u=pn.Pop,navigator:S,static:b=!1,future:l}=t;Bs()&&Mt(!1);let c=i.replace(/^\/*/,"/"),x=L.useMemo(()=>({basename:c,navigator:S,static:b,future:$o({v7_relativeSplatPath:!1},l)}),[c,l,S,b]);typeof o=="string"&&(o=Ms(o));let{pathname:v="/",search:d="",hash:y="",state:_=null,key:j="default"}=o,C=L.useMemo(()=>{let h=As(v,c);return h==null?null:{location:{pathname:h,search:d,hash:y,state:_,key:j},navigationType:u}},[c,v,d,y,_,j,u]);return C==null?null:L.createElement(Ni.Provider,{value:x},L.createElement(Hl.Provider,{children:s,value:C}))}function h_(t){let{children:i,location:s}=t;return Yb(_u(i),s)}new Promise(()=>{});function _u(t,i){i===void 0&&(i=[]);let s=[];return L.Children.forEach(t,(o,u)=>{if(!L.isValidElement(o))return;let S=[...i,u];if(o.type===L.Fragment){s.push.apply(s,_u(o.props.children,S));return}o.type!==Ot&&Mt(!1),!o.props.index||!o.props.children||Mt(!1);let b={id:o.props.id||S.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(b.children=_u(o.props.children,S)),s.push(b)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},zl.apply(this,arguments)}function t0(t,i){if(t==null)return{};var s={},o=Object.keys(t),u,S;for(S=0;S<o.length;S++)u=o[S],!(i.indexOf(u)>=0)&&(s[u]=t[u]);return s}function p_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function f_(t,i){return t.button===0&&(!i||i==="_self")&&!p_(t)}function Su(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,s)=>{let o=t[s];return i.concat(Array.isArray(o)?o.map(u=>[s,u]):[[s,o]])},[]))}function g_(t,i){let s=Su(t);return i&&i.forEach((o,u)=>{s.has(u)||i.getAll(u).forEach(S=>{s.append(u,S)})}),s}const x_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y_="6";try{window.__reactRouterVersion=y_}catch{}const v_=L.createContext({isTransitioning:!1}),b_="startTransition",Ug=hb[b_];function __(t){let{basename:i,children:s,future:o,window:u}=t,S=L.useRef();S.current==null&&(S.current=vb({window:u,v5Compat:!0}));let b=S.current,[l,c]=L.useState({action:b.action,location:b.location}),{v7_startTransition:x}=o||{},v=L.useCallback(d=>{x&&Ug?Ug(()=>c(d)):c(d)},[c,x]);return L.useLayoutEffect(()=>b.listen(v),[b,v]),L.useEffect(()=>l_(o),[o]),L.createElement(u_,{basename:i,children:s,location:l.location,navigationType:l.action,navigator:b,future:o})}const S_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pi=L.forwardRef(function(i,s){let{onClick:o,relative:u,reloadDocument:S,replace:b,state:l,target:c,to:x,preventScrollReset:v,viewTransition:d}=i,y=t0(i,x_),{basename:_}=L.useContext(Ni),j,C=!1;if(typeof x=="string"&&w_.test(x)&&(j=x,S_))try{let g=new URL(window.location.href),w=x.startsWith("//")?new URL(g.protocol+x):new URL(x),R=As(w.pathname,_);w.origin===g.origin&&R!=null?x=R+w.search+w.hash:C=!0}catch{}let h=Vb(x,{relative:u}),p=k_(x,{replace:b,state:l,target:c,preventScrollReset:v,relative:u,viewTransition:d});function f(g){o&&o(g),g.defaultPrevented||p(g)}return L.createElement("a",zl({},y,{href:j||h,onClick:C||S?o:f,ref:s,target:c}))}),Dr=L.forwardRef(function(i,s){let{"aria-current":o="page",caseSensitive:u=!1,className:S="",end:b=!1,style:l,to:c,viewTransition:x,children:v}=i,d=t0(i,m_),y=Ul(c,{relative:d.relative}),_=wn(),j=L.useContext(Ym),{navigator:C,basename:h}=L.useContext(Ni),p=j!=null&&E_(y)&&x===!0,f=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,g=_.pathname,w=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;u||(g=g.toLowerCase(),w=w?w.toLowerCase():null,f=f.toLowerCase()),w&&h&&(w=As(w,h)||w);const R=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let A=g===f||!b&&g.startsWith(f)&&g.charAt(R)==="/",z=w!=null&&(w===f||!b&&w.startsWith(f)&&w.charAt(f.length)==="/"),E={isActive:A,isPending:z,isTransitioning:p},P=A?o:void 0,O;typeof S=="function"?O=S(E):O=[S,A?"active":null,z?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let H=typeof l=="function"?l(E):l;return L.createElement(pi,zl({},d,{"aria-current":P,className:O,ref:s,style:H,to:c,viewTransition:x}),typeof v=="function"?v(E):v)});var wu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wu||(wu={}));var Vg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vg||(Vg={}));function C_(t){let i=L.useContext(Nl);return i||Mt(!1),i}function k_(t,i){let{target:s,replace:o,state:u,preventScrollReset:S,relative:b,viewTransition:l}=i===void 0?{}:i,c=Wt(),x=wn(),v=Ul(t,{relative:b});return L.useCallback(d=>{if(f_(d,s)){d.preventDefault();let y=o!==void 0?o:Ll(x)===Ll(v);c(t,{replace:y,state:u,preventScrollReset:S,relative:b,viewTransition:l})}},[x,c,v,o,u,s,t,S,b,l])}function j_(t){let i=L.useRef(Su(t)),s=L.useRef(!1),o=wn(),u=L.useMemo(()=>g_(o.search,s.current?null:i.current),[o.search]),S=Wt(),b=L.useCallback((l,c)=>{const x=Su(typeof l=="function"?l(u):l);s.current=!0,S("?"+x,c)},[S,u]);return[u,b]}function E_(t,i){i===void 0&&(i={});let s=L.useContext(v_);s==null&&Mt(!1);let{basename:o}=C_(wu.useViewTransitionState),u=Ul(t,{relative:i.relative});if(!s.isTransitioning)return!1;let S=As(s.currentLocation.pathname,o)||s.currentLocation.pathname,b=As(s.nextLocation.pathname,o)||s.nextLocation.pathname;return bu(u.pathname,b)!=null||bu(u.pathname,S)!=null}const dh="atp-token",uh="atp-user";function Ko(){return localStorage.getItem(dh)}function r0(t){localStorage.setItem(dh,t)}function i0(){localStorage.removeItem(dh),localStorage.removeItem(uh)}function qo(){try{const t=localStorage.getItem(uh);return t?JSON.parse(t):null}catch{return null}}function hh(t){localStorage.setItem(uh,JSON.stringify(t))}async function ae(t,i={}){const s=Ko(),o={"Content-Type":"application/json",...i.headers||{}};s&&(o.Authorization=`Bearer ${s}`);const u=await fetch(t,{...i,headers:o});if(u.status===401)throw i0(),window.location.href="/login",new Error("Unauthorized");if(!u.ok){const S=await u.json().catch(()=>({error:u.statusText}));throw new Error(S.error||"Request failed")}return u.json()}function R_({size:t=32,withText:i=!1,glowing:s=!1}){const o=s?{filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6)) drop-shadow(0 0 4px rgba(139, 92, 246, 0.4))"}:{};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",style:{imageRendering:"pixelated",...o},children:[e.jsx("rect",{x:"5",y:"3",width:"6",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"4",width:"8",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"5",width:"8",height:"5",fill:"#8B5CF6"}),e.jsx("rect",{x:"6",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"9",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"6",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"7",y:"9",width:"2",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"9",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"6",y:"2",width:"4",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"7",y:"1",width:"2",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"5",y:"10",width:"6",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"6",y:"11",width:"4",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"5",y:"6",width:"1",height:"1",fill:"#c4b5fd",opacity:"0.6"})]}),i&&e.jsxs("div",{style:{fontFamily:'"Press Start 2P", "JetBrains Mono", monospace',fontSize:t*.4,fontWeight:"400",letterSpacing:"0.05em",color:"#F4F4F5",lineHeight:1,textShadow:s?"0 0 10px rgba(139, 92, 246, 0.5)":"none"},children:["guru",e.jsx("span",{style:{color:"#8B5CF6"},children:".ai"})]})]})}function T_(){const t=Wt(),i=wn(),[s,o]=L.useState(null),[u,S]=L.useState(!1);L.useEffect(()=>{ae("/api/user/me").then(o).catch(()=>{const d=qo();d&&o(d)})},[]),L.useEffect(()=>{S(!1)},[i.pathname]);const b=()=>{i0(),t("/login")},l=d=>({color:d?"#F4F4F5":"#52525B",fontSize:"13px",fontWeight:"500",textDecoration:"none",transition:"color 0.2s",padding:"6px 12px",borderRadius:"4px",background:d?"rgba(139,92,246,0.1)":"transparent"}),c=i.pathname.startsWith("/project/")&&i.pathname!=="/project/new",x=i.pathname.startsWith("/compare/"),v=c||x;return e.jsxs("div",{style:{minHeight:"100vh",background:"#0f0f0f"},children:[e.jsxs("nav",{className:"guru-nav",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:50,background:"rgba(15,15,15,0.95)",backdropFilter:"blur(12px)"},children:[e.jsx("div",{style:{cursor:"pointer"},onClick:()=>t("/"),children:e.jsx(R_,{size:28,withText:!0})}),e.jsxs("div",{className:"guru-nav-links",style:{display:"flex",gap:"4px"},children:[e.jsx(Dr,{to:"/",end:!0,style:({isActive:d})=>l(d),children:"Dashboard"}),e.jsx(Dr,{to:"/marketplace",style:({isActive:d})=>l(d||i.pathname.startsWith("/marketplace")),children:"Marketplace"}),e.jsx(Dr,{to:"/agents",style:({isActive:d})=>l(d||i.pathname.startsWith("/agents")),children:"Agents"}),e.jsx(Dr,{to:"/agents/teams",style:({isActive:d})=>l(d),children:"Teams"}),e.jsx(Dr,{to:"/skills",style:({isActive:d})=>l(d),children:"Skills"}),e.jsx(Dr,{to:"/agents/stats",style:({isActive:d})=>l(d),children:"Stats"}),e.jsx(Dr,{to:"/sessions",style:({isActive:d})=>l(d),children:"Sessions"})]}),e.jsxs("div",{className:"guru-nav-right",style:{display:"flex",alignItems:"center",gap:"12px"},children:[s&&e.jsxs("div",{className:"guru-user-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA"},children:s.displayName||s.email}),e.jsx("div",{title:s.claudeConnected?"Claude connected":"Claude not connected",onClick:()=>!s.claudeConnected&&t("/setup-claude"),style:{width:"8px",height:"8px",borderRadius:"50%",background:s.claudeConnected?"#22c55e":"#ef4444",cursor:s.claudeConnected?"default":"pointer",boxShadow:s.claudeConnected?"0 0 6px rgba(34,197,94,0.4)":"0 0 6px rgba(239,68,68,0.4)"}})]}),e.jsx("button",{onClick:b,className:"guru-logout-btn",style:{background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:d=>{d.target.style.borderColor="#8B5CF6",d.target.style.color="#F4F4F5"},onMouseLeave:d=>{d.target.style.borderColor="rgba(255,255,255,0.15)",d.target.style.color="#A1A1AA"},children:"Logout"}),e.jsxs("button",{className:"guru-hamburger",onClick:()=>S(!u),style:{display:"none",background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",flexDirection:"column",gap:"3px",alignItems:"center"},children:[e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(45deg) translateY(5px)":"none"}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",opacity:u?0:1}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(-45deg) translateY(-5px)":"none"}})]})]})]}),u&&e.jsxs("div",{className:"guru-mobile-menu",style:{position:"fixed",top:"53px",left:0,right:0,bottom:0,background:"rgba(15,15,15,0.98)",zIndex:49,display:"flex",flexDirection:"column",padding:"16px 24px",gap:"4px",backdropFilter:"blur(12px)"},children:[e.jsx(Dr,{to:"/",end:!0,style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Dashboard"}),e.jsx(Dr,{to:"/marketplace",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/marketplace")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Marketplace"}),e.jsx(Dr,{to:"/agents",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/agents")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Agents"}),e.jsx(Dr,{to:"/agents/teams",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Teams"}),e.jsx(Dr,{to:"/skills",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Skills"}),e.jsx(Dr,{to:"/agents/stats",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Stats"}),e.jsx(Dr,{to:"/sessions",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Sessions"})]}),e.jsx("main",{className:"guru-main",style:{padding:v?0:"24px",maxWidth:v?"none":"1400px",margin:"0 auto"},children:e.jsx(d_,{})}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .guru-nav { padding: 10px 16px !important; }
          .guru-nav-links { display: none !important; }
          .guru-hamburger { display: flex !important; }
          .guru-user-info { display: none !important; }
          .guru-logout-btn { display: none !important; }
          .guru-main { padding: 16px !important; }
        }
        @media (min-width: 769px) {
          .guru-mobile-menu { display: none !important; }
        }
      `})]})}function A_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(!1),c=Wt(),x=async v=>{v.preventDefault(),S(""),l(!0);try{const d=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}),y=await d.json();if(!d.ok)throw new Error(y.error);r0(y.token),hh({userId:y.userId,email:y.email,displayName:y.displayName,role:y.role,claudeConnected:y.claudeConnected}),c("/")}catch(d){S(d.message)}finally{l(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:x,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m4.93 4.93 4.24 4.24"}),e.jsx("path",{d:"m14.83 9.17 4.24-4.24"}),e.jsx("path",{d:"m14.83 14.83 4.24 4.24"}),e.jsx("path",{d:"m9.17 14.83-4.24 4.24"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px"},children:"Agent Testing Platform"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Sign in to continue"})]}),u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:u}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:v=>i(v.target.value),required:!0,style:{width:"100%"},placeholder:"admin@vps.local"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:v=>o(v.target.value),required:!0,style:{width:"100%"}})]}),e.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:b?.7:1},children:b?"Signing in...":"Sign In"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Don't have an account?"," ",e.jsx(pi,{to:"/register",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Create one"})]})]})]})}function L_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(""),[c,x]=L.useState(!1),v=Wt(),d=async y=>{y.preventDefault(),l(""),x(!0);try{const _=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s,displayName:u})}),j=await _.json();if(!_.ok)throw new Error(j.error);r0(j.token),hh({userId:j.userId,email:j.email,displayName:j.displayName,role:j.role,claudeConnected:j.claudeConnected}),v("/setup-claude")}catch(_){l(_.message)}finally{x(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:d,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),e.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px",color:"#F4F4F5"},children:"Create Account"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Join the Agent Testing Platform"})]}),b&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:b}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Display Name"}),e.jsx("input",{type:"text",value:u,onChange:y=>S(y.target.value),style:{width:"100%"},placeholder:"Your name"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:y=>i(y.target.value),required:!0,style:{width:"100%"},placeholder:"you@example.com"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:y=>o(y.target.value),required:!0,style:{width:"100%"},placeholder:"Min. 6 characters"})]}),e.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:c?.7:1,cursor:c?"default":"pointer"},children:c?"Creating account...":"Create Account"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Already have an account?"," ",e.jsx(pi,{to:"/login",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Sign in"})]})]})]})}const wi=Object.create(null);wi.open="0";wi.close="1";wi.ping="2";wi.pong="3";wi.message="4";wi.upgrade="5";wi.noop="6";const bl=Object.create(null);Object.keys(wi).forEach(t=>{bl[wi[t]]=t});const Cu={type:"error",data:"parser error"},n0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",s0=typeof ArrayBuffer=="function",o0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ph=({type:t,data:i},s,o)=>n0&&i instanceof Blob?s?o(i):Kg(i,o):s0&&(i instanceof ArrayBuffer||o0(i))?s?o(i):Kg(new Blob([i]),o):o(wi[t]+(i||"")),Kg=(t,i)=>{const s=new FileReader;return s.onload=function(){const o=s.result.split(",")[1];i("b"+(o||""))},s.readAsDataURL(t)};function qg(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Fd;function z_(t,i){if(n0&&t.data instanceof Blob)return t.data.arrayBuffer().then(qg).then(i);if(s0&&(t.data instanceof ArrayBuffer||o0(t.data)))return i(qg(t.data));ph(t,!1,s=>{Fd||(Fd=new TextEncoder),i(Fd.encode(s))})}const Gg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",To=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Gg.length;t++)To[Gg.charCodeAt(t)]=t;const D_=t=>{let i=t.length*.75,s=t.length,o,u=0,S,b,l,c;t[t.length-1]==="="&&(i--,t[t.length-2]==="="&&i--);const x=new ArrayBuffer(i),v=new Uint8Array(x);for(o=0;o<s;o+=4)S=To[t.charCodeAt(o)],b=To[t.charCodeAt(o+1)],l=To[t.charCodeAt(o+2)],c=To[t.charCodeAt(o+3)],v[u++]=S<<2|b>>4,v[u++]=(b&15)<<4|l>>2,v[u++]=(l&3)<<6|c&63;return x},I_=typeof ArrayBuffer=="function",fh=(t,i)=>{if(typeof t!="string")return{type:"message",data:a0(t,i)};const s=t.charAt(0);return s==="b"?{type:"message",data:M_(t.substring(1),i)}:bl[s]?t.length>1?{type:bl[s],data:t.substring(1)}:{type:bl[s]}:Cu},M_=(t,i)=>{if(I_){const s=D_(t);return a0(s,i)}else return{base64:!0,data:t}},a0=(t,i)=>{switch(i){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},l0="",B_=(t,i)=>{const s=t.length,o=new Array(s);let u=0;t.forEach((S,b)=>{ph(S,!1,l=>{o[b]=l,++u===s&&i(o.join(l0))})})},P_=(t,i)=>{const s=t.split(l0),o=[];for(let u=0;u<s.length;u++){const S=fh(s[u],i);if(o.push(S),S.type==="error")break}return o};function O_(){return new TransformStream({transform(t,i){z_(t,s=>{const o=s.length;let u;if(o<126)u=new Uint8Array(1),new DataView(u.buffer).setUint8(0,o);else if(o<65536){u=new Uint8Array(3);const S=new DataView(u.buffer);S.setUint8(0,126),S.setUint16(1,o)}else{u=new Uint8Array(9);const S=new DataView(u.buffer);S.setUint8(0,127),S.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(u[0]|=128),i.enqueue(u),i.enqueue(s)})}})}let Wd;function al(t){return t.reduce((i,s)=>i+s.length,0)}function ll(t,i){if(t[0].length===i)return t.shift();const s=new Uint8Array(i);let o=0;for(let u=0;u<i;u++)s[u]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),s}function $_(t,i){Wd||(Wd=new TextDecoder);const s=[];let o=0,u=-1,S=!1;return new TransformStream({transform(b,l){for(s.push(b);;){if(o===0){if(al(s)<1)break;const c=ll(s,1);S=(c[0]&128)===128,u=c[0]&127,u<126?o=3:u===126?o=1:o=2}else if(o===1){if(al(s)<2)break;const c=ll(s,2);u=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),o=3}else if(o===2){if(al(s)<8)break;const c=ll(s,8),x=new DataView(c.buffer,c.byteOffset,c.length),v=x.getUint32(0);if(v>Math.pow(2,21)-1){l.enqueue(Cu);break}u=v*Math.pow(2,32)+x.getUint32(4),o=3}else{if(al(s)<u)break;const c=ll(s,u);l.enqueue(fh(S?c:Wd.decode(c),i)),o=0}if(u===0||u>t){l.enqueue(Cu);break}}}})}const c0=4;function Xt(t){if(t)return F_(t)}function F_(t){for(var i in Xt.prototype)t[i]=Xt.prototype[i];return t}Xt.prototype.on=Xt.prototype.addEventListener=function(t,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(i),this};Xt.prototype.once=function(t,i){function s(){this.off(t,s),i.apply(this,arguments)}return s.fn=i,this.on(t,s),this};Xt.prototype.off=Xt.prototype.removeListener=Xt.prototype.removeAllListeners=Xt.prototype.removeEventListener=function(t,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,u=0;u<s.length;u++)if(o=s[u],o===i||o.fn===i){s.splice(u,1);break}return s.length===0&&delete this._callbacks["$"+t],this};Xt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+t],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,u=s.length;o<u;++o)s[o].apply(this,i)}return this};Xt.prototype.emitReserved=Xt.prototype.emit;Xt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Xt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Vl=typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,s)=>s(i,0),Xr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),W_="arraybuffer";function d0(t,...i){return i.reduce((s,o)=>(t.hasOwnProperty(o)&&(s[o]=t[o]),s),{})}const N_=Xr.setTimeout,H_=Xr.clearTimeout;function Kl(t,i){i.useNativeTimers?(t.setTimeoutFn=N_.bind(Xr),t.clearTimeoutFn=H_.bind(Xr)):(t.setTimeoutFn=Xr.setTimeout.bind(Xr),t.clearTimeoutFn=Xr.clearTimeout.bind(Xr))}const U_=1.33;function V_(t){return typeof t=="string"?K_(t):Math.ceil((t.byteLength||t.size)*U_)}function K_(t){let i=0,s=0;for(let o=0,u=t.length;o<u;o++)i=t.charCodeAt(o),i<128?s+=1:i<2048?s+=2:i<55296||i>=57344?s+=3:(o++,s+=4);return s}function u0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function q_(t){let i="";for(let s in t)t.hasOwnProperty(s)&&(i.length&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return i}function G_(t){let i={},s=t.split("&");for(let o=0,u=s.length;o<u;o++){let S=s[o].split("=");i[decodeURIComponent(S[0])]=decodeURIComponent(S[1])}return i}class Y_ extends Error{constructor(i,s,o){super(i),this.description=s,this.context=o,this.type="TransportError"}}class gh extends Xt{constructor(i){super(),this.writable=!1,Kl(this,i),this.opts=i,this.query=i.query,this.socket=i.socket,this.supportsBinary=!i.forceBase64}onError(i,s,o){return super.emitReserved("error",new Y_(i,s,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const s=fh(i,this.socket.binaryType);this.onPacket(s)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}pause(i){}createUri(i,s={}){return i+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const i=this.opts.hostname;return i.indexOf(":")===-1?i:"["+i+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(i){const s=q_(i);return s.length?"?"+s:""}}class X_ extends gh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(i){this.readyState="pausing";const s=()=>{this.readyState="paused",i()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||s()})),this.writable||(o++,this.once("drain",function(){--o||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const s=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};P_(i,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,B_(i,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const i=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=u0()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(i,s)}}let h0=!1;try{h0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const J_=h0;function Q_(){}class Z_ extends X_{constructor(i){if(super(i),typeof location<"u"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location<"u"&&i.hostname!==location.hostname||o!==i.port}}doWrite(i,s){const o=this.request({method:"POST",data:i});o.on("success",s),o.on("error",(u,S)=>{this.onError("xhr post error",u,S)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(s,o)=>{this.onError("xhr poll error",s,o)}),this.pollXhr=i}}class _i extends Xt{constructor(i,s,o){super(),this.createRequest=i,Kl(this,o),this._opts=o,this._method=o.method||"GET",this._uri=s,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var i;const s=d0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(s);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let u in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(u)&&o.setRequestHeader(u,this._opts.extraHeaders[u])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(i=this._opts.cookieJar)===null||i===void 0||i.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var u;o.readyState===3&&((u=this._opts.cookieJar)===null||u===void 0||u.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(u){this.setTimeoutFn(()=>{this._onError(u)},0);return}typeof document<"u"&&(this._index=_i.requestsCount++,_i.requests[this._index]=this)}_onError(i){this.emitReserved("error",i,this._xhr),this._cleanup(!0)}_cleanup(i){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Q_,i)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _i.requests[this._index],this._xhr=null}}_onLoad(){const i=this._xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}_i.requestsCount=0;_i.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Yg);else if(typeof addEventListener=="function"){const t="onpagehide"in Xr?"pagehide":"unload";addEventListener(t,Yg,!1)}}function Yg(){for(let t in _i.requests)_i.requests.hasOwnProperty(t)&&_i.requests[t].abort()}const e2=(function(){const t=p0({xdomain:!1});return t&&t.responseType!==null})();class t2 extends Z_{constructor(i){super(i);const s=i&&i.forceBase64;this.supportsBinary=e2&&!s}request(i={}){return Object.assign(i,{xd:this.xd},this.opts),new _i(p0,this.uri(),i)}}function p0(t){const i=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!i||J_))return new XMLHttpRequest}catch{}if(!i)try{return new Xr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const f0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class r2 extends gh{get name(){return"websocket"}doOpen(){const i=this.uri(),s=this.opts.protocols,o=f0?{}:d0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(i,s,o)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;ph(o,this.supportsBinary,S=>{try{this.doWrite(o,S)}catch{}u&&Vl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const i=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=u0()),this.supportsBinary||(s.b64=1),this.createUri(i,s)}}const Nd=Xr.WebSocket||Xr.MozWebSocket;class i2 extends r2{createSocket(i,s,o){return f0?new Nd(i,s,o):s?new Nd(i,s):new Nd(i)}doWrite(i,s){this.ws.send(s)}}class n2 extends gh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(i){return this.emitReserved("error",i)}this._transport.closed.then(()=>{this.onClose()}).catch(i=>{this.onError("webtransport error",i)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(i=>{const s=$_(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=i.readable.pipeThrough(s).getReader(),u=O_();u.readable.pipeTo(i.writable),this._writer=u.writable.getWriter();const S=()=>{o.read().then(({done:l,value:c})=>{l||(this.onPacket(c),S())}).catch(l=>{})};S();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;this._writer.write(o).then(()=>{u&&Vl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var i;(i=this._transport)===null||i===void 0||i.close()}}const s2={websocket:i2,webtransport:n2,polling:t2},o2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ku(t){if(t.length>8e3)throw"URI too long";const i=t,s=t.indexOf("["),o=t.indexOf("]");s!=-1&&o!=-1&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));let u=o2.exec(t||""),S={},b=14;for(;b--;)S[a2[b]]=u[b]||"";return s!=-1&&o!=-1&&(S.source=i,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S.pathNames=l2(S,S.path),S.queryKey=c2(S,S.query),S}function l2(t,i){const s=/\/{2,9}/g,o=i.replace(s,"/").split("/");return(i.slice(0,1)=="/"||i.length===0)&&o.splice(0,1),i.slice(-1)=="/"&&o.splice(o.length-1,1),o}function c2(t,i){const s={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,u,S){u&&(s[u]=S)}),s}const ju=typeof addEventListener=="function"&&typeof removeEventListener=="function",_l=[];ju&&addEventListener("offline",()=>{_l.forEach(t=>t())},!1);class mn extends Xt{constructor(i,s){if(super(),this.binaryType=W_,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,i&&typeof i=="object"&&(s=i,i=null),i){const o=ku(i);s.hostname=o.host,s.secure=o.protocol==="https"||o.protocol==="wss",s.port=o.port,o.query&&(s.query=o.query)}else s.host&&(s.hostname=ku(s.host).host);Kl(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(o=>{const u=o.prototype.name;this.transports.push(u),this._transportsByName[u]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=G_(this.opts.query)),ju&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_l.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(i){const s=Object.assign({},this.opts.query);s.EIO=c0,s.transport=i,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new this._transportsByName[i](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const i=this.opts.rememberUpgrade&&mn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(i);s.open(),this.setTransport(s)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",mn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=i.data,this._onError(s);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this._pingInterval=i.pingInterval,this._pingTimeout=i.pingTimeout,this._maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const i=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+i,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},i),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this._getWritablePackets();this.transport.send(i),this._prevBufferLen=i.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const u=this.writeBuffer[o].data;if(u&&(s+=V_(u)),o>0&&s>this._maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const i=Date.now()>this._pingTimeoutTime;return i&&(this._pingTimeoutTime=0,Vl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),i}write(i,s,o){return this._sendPacket("message",i,s,o),this}send(i,s,o){return this._sendPacket("message",i,s,o),this}_sendPacket(i,s,o,u){if(typeof s=="function"&&(u=s,s=void 0),typeof o=="function"&&(u=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const S={type:i,data:s,options:o};this.emitReserved("packetCreate",S),this.writeBuffer.push(S),u&&this.once("flush",u),this.flush()}close(){const i=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),i()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():i()}):this.upgrading?o():i()),this}_onError(i){if(mn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",i),this._onClose("transport error",i)}_onClose(i,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ju&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=_l.indexOf(this._offlineEventListener);o!==-1&&_l.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",i,s),this.writeBuffer=[],this._prevBufferLen=0}}}mn.protocol=c0;class d2 extends mn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let i=0;i<this._upgrades.length;i++)this._probe(this._upgrades[i])}_probe(i){let s=this.createTransport(i),o=!1;mn.priorWebsocketSuccess=!1;const u=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",d=>{if(!o)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;mn.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(v(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=s.name,this.emitReserved("upgradeError",y)}}))};function S(){o||(o=!0,v(),s.close(),s=null)}const b=d=>{const y=new Error("probe error: "+d);y.transport=s.name,S(),this.emitReserved("upgradeError",y)};function l(){b("transport closed")}function c(){b("socket closed")}function x(d){s&&d.name!==s.name&&S()}const v=()=>{s.removeListener("open",u),s.removeListener("error",b),s.removeListener("close",l),this.off("close",c),this.off("upgrading",x)};s.once("open",u),s.once("error",b),s.once("close",l),this.once("close",c),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{o||s.open()},200):s.open()}onHandshake(i){this._upgrades=this._filterUpgrades(i.upgrades),super.onHandshake(i)}_filterUpgrades(i){const s=[];for(let o=0;o<i.length;o++)~this.transports.indexOf(i[o])&&s.push(i[o]);return s}}let u2=class extends d2{constructor(i,s={}){const o=typeof i=="object"?i:s;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(u=>s2[u]).filter(u=>!!u)),super(i,o)}};function h2(t,i="",s){let o=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),o=ku(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const S=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+S+":"+o.port+i,o.href=o.protocol+"://"+S+(s&&s.port===o.port?"":":"+o.port),o}const p2=typeof ArrayBuffer=="function",f2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,g0=Object.prototype.toString,g2=typeof Blob=="function"||typeof Blob<"u"&&g0.call(Blob)==="[object BlobConstructor]",x2=typeof File=="function"||typeof File<"u"&&g0.call(File)==="[object FileConstructor]";function xh(t){return p2&&(t instanceof ArrayBuffer||f2(t))||g2&&t instanceof Blob||x2&&t instanceof File}function Sl(t,i){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(Sl(t[s]))return!0;return!1}if(xh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sl(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Sl(t[s]))return!0;return!1}function m2(t){const i=[],s=t.data,o=t;return o.data=Eu(s,i),o.attachments=i.length,{packet:o,buffers:i}}function Eu(t,i){if(!t)return t;if(xh(t)){const s={_placeholder:!0,num:i.length};return i.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=Eu(t[o],i);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=Eu(t[o],i));return s}return t}function y2(t,i){return t.data=Ru(t.data,i),delete t.attachments,t}function Ru(t,i){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<i.length)return i[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Ru(t[s],i);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Ru(t[s],i));return t}const v2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var pt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pt||(pt={}));class b2{constructor(i){this.replacer=i}encode(i){return(i.type===pt.EVENT||i.type===pt.ACK)&&Sl(i)?this.encodeAsBinary({type:i.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:i.nsp,data:i.data,id:i.id}):[this.encodeAsString(i)]}encodeAsString(i){let s=""+i.type;return(i.type===pt.BINARY_EVENT||i.type===pt.BINARY_ACK)&&(s+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(s+=i.nsp+","),i.id!=null&&(s+=i.id),i.data!=null&&(s+=JSON.stringify(i.data,this.replacer)),s}encodeAsBinary(i){const s=m2(i),o=this.encodeAsString(s.packet),u=s.buffers;return u.unshift(o),u}}class mh extends Xt{constructor(i){super(),this.reviver=i}add(i){let s;if(typeof i=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(i);const o=s.type===pt.BINARY_EVENT;o||s.type===pt.BINARY_ACK?(s.type=o?pt.EVENT:pt.ACK,this.reconstructor=new _2(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(xh(i)||i.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(i),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let s=0;const o={type:Number(i.charAt(0))};if(pt[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===pt.BINARY_EVENT||o.type===pt.BINARY_ACK){const S=s+1;for(;i.charAt(++s)!=="-"&&s!=i.length;);const b=i.substring(S,s);if(b!=Number(b)||i.charAt(s)!=="-")throw new Error("Illegal attachments");o.attachments=Number(b)}if(i.charAt(s+1)==="/"){const S=s+1;for(;++s&&!(i.charAt(s)===","||s===i.length););o.nsp=i.substring(S,s)}else o.nsp="/";const u=i.charAt(s+1);if(u!==""&&Number(u)==u){const S=s+1;for(;++s;){const b=i.charAt(s);if(b==null||Number(b)!=b){--s;break}if(s===i.length)break}o.id=Number(i.substring(S,s+1))}if(i.charAt(++s)){const S=this.tryParse(i.substr(s));if(mh.isPayloadValid(o.type,S))o.data=S;else throw new Error("invalid payload")}return o}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,s){switch(i){case pt.CONNECT:return Xg(s);case pt.DISCONNECT:return s===void 0;case pt.CONNECT_ERROR:return typeof s=="string"||Xg(s);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&v2.indexOf(s[0])===-1);case pt.ACK:case pt.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _2{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const s=y2(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Xg(t){return Object.prototype.toString.call(t)==="[object Object]"}const S2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:mh,Encoder:b2,get PacketType(){return pt}},Symbol.toStringTag,{value:"Module"}));function ui(t,i,s){return t.on(i,s),function(){t.off(i,s)}}const w2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x0 extends Xt{constructor(i,s,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=s,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[ui(i,"open",this.onopen.bind(this)),ui(i,"packet",this.onpacket.bind(this)),ui(i,"error",this.onerror.bind(this)),ui(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...s){var o,u,S;if(w2.hasOwnProperty(i))throw new Error('"'+i.toString()+'" is a reserved event name');if(s.unshift(i),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const b={type:pt.EVENT,data:s};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const v=this.ids++,d=s.pop();this._registerAckCallback(v,d),b.id=v}const l=(u=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||u===void 0?void 0:u.writable,c=this.connected&&!(!((S=this.io.engine)===null||S===void 0)&&S._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(i,s){var o;const u=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(u===void 0){this.acks[i]=s;return}const S=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===i&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},u),b=(...l)=>{this.io.clearTimeoutFn(S),s.apply(this,l)};b.withError=!0,this.acks[i]=b}emitWithAck(i,...s){return new Promise((o,u)=>{const S=(b,l)=>b?u(b):o(l);S.withError=!0,s.push(S),this.emit(i,...s)})}_addToQueue(i){let s;typeof i[i.length-1]=="function"&&(s=i.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:i,flags:Object.assign({fromQueue:!0},this.flags)};i.push((u,...S)=>(this._queue[0],u!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(u)):(this._queue.shift(),s&&s(null,...S)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(i=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!i||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this._sendConnectPacket(i)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(i){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},i):i})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(i=>{if(!this.sendBuffer.some(o=>String(o.id)===i)){const o=this.acks[i];delete this.acks[i],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case pt.CONNECT:i.data&&i.data.sid?this.onconnect(i.data.sid,i.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(i);break;case pt.ACK:case pt.BINARY_ACK:this.onack(i);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const o=new Error(i.data.message);o.data=i.data.data,this.emitReserved("connect_error",o);break}}onevent(i){const s=i.data||[];i.id!=null&&s.push(this.ack(i.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const o of s)o.apply(this,i)}super.emit.apply(this,i),this._pid&&i.length&&typeof i[i.length-1]=="string"&&(this._lastOffset=i[i.length-1])}ack(i){const s=this;let o=!1;return function(...u){o||(o=!0,s.packet({type:pt.ACK,id:i,data:u}))}}onack(i){const s=this.acks[i.id];typeof s=="function"&&(delete this.acks[i.id],s.withError&&i.data.unshift(null),s.apply(this,i.data))}onconnect(i,s){this.id=i,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const s=this._anyListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const s=this._anyOutgoingListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const o of s)o.apply(this,i.data)}}}function Ps(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ps.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),s=Math.floor(i*this.jitter*t);t=(Math.floor(i*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Ps.prototype.reset=function(){this.attempts=0};Ps.prototype.setMin=function(t){this.ms=t};Ps.prototype.setMax=function(t){this.max=t};Ps.prototype.setJitter=function(t){this.jitter=t};class Tu extends Xt{constructor(i,s){var o;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(s=i,i=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Kl(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((o=s.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Ps({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=i;const u=s.parser||S2;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,i||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var s;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(s=this.backoff)===null||s===void 0||s.setMin(i),this)}randomizationFactor(i){var s;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(s=this.backoff)===null||s===void 0||s.setJitter(i),this)}reconnectionDelayMax(i){var s;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(s=this.backoff)===null||s===void 0||s.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new u2(this.uri,this.opts);const s=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const u=ui(s,"open",function(){o.onopen(),i&&i()}),S=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),i?i(l):this.maybeReconnectOnOpen()},b=ui(s,"error",S);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{u(),S(new Error("timeout")),s.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(u),this.subs.push(b),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(ui(i,"ping",this.onping.bind(this)),ui(i,"data",this.ondata.bind(this)),ui(i,"error",this.onerror.bind(this)),ui(i,"close",this.onclose.bind(this)),ui(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){try{this.decoder.add(i)}catch(s){this.onclose("parse error",s)}}ondecoded(i){Vl(()=>{this.emitReserved("packet",i)},this.setTimeoutFn)}onerror(i){this.emitReserved("error",i)}socket(i,s){let o=this.nsps[i];return o?this._autoConnect&&!o.active&&o.connect():(o=new x0(this,i,s),this.nsps[i]=o),o}_destroy(i){const s=Object.keys(this.nsps);for(const o of s)if(this.nsps[o].active)return;this._close()}_packet(i){const s=this.encoder.encode(i);for(let o=0;o<s.length;o++)this.engine.write(s[o],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(i,s){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(u=>{u?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",u)):i.onreconnect()}))},s);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const wo={};function zo(t,i){typeof t=="object"&&(i=t,t=void 0),i=i||{};const s=h2(t,i.path||"/socket.io"),o=s.source,u=s.id,S=s.path,b=wo[u]&&S in wo[u].nsps,l=i.forceNew||i["force new connection"]||i.multiplex===!1||b;let c;return l?c=new Tu(o,i):(wo[u]||(wo[u]=new Tu(o,i)),c=wo[u]),s.query&&!i.query&&(i.query=s.queryKey),c.socket(s.path,i)}Object.assign(zo,{Manager:Tu,Socket:x0,io:zo,connect:zo});var Hd={exports:{}},Jg;function C2(){return Jg||(Jg=1,(function(t,i){(function(s,o){t.exports=o()})(globalThis,(()=>(()=>{var s={4567:function(b,l,c){var x=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var P=f.length-1;P>=0;P--)(A=f[P])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const d=c(9042),y=c(9924),_=c(844),j=c(4725),C=c(2585),h=c(3656);let p=l.AccessibilityManager=class extends _.Disposable{constructor(f,g,w,R){super(),this._terminal=f,this._coreBrowserService=w,this._renderService=R,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let A=0;A<this._terminal.rows;A++)this._rowElements[A]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[A]);if(this._topBoundaryFocusListener=A=>this._handleBoundaryFocus(A,0),this._bottomBoundaryFocusListener=A=>this._handleBoundaryFocus(A,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((A=>this._handleResize(A.rows)))),this.register(this._terminal.onRender((A=>this._refreshRows(A.start,A.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((A=>this._handleChar(A)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((A=>this._handleTab(A)))),this.register(this._terminal.onKey((A=>this._handleKey(A.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,h.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,_.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(f){for(let g=0;g<f;g++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,g){this._liveRegionDebouncer.refresh(f,g,this._terminal.rows)}_renderRows(f,g){const w=this._terminal.buffer,R=w.lines.length.toString();for(let A=f;A<=g;A++){const z=w.lines.get(w.ydisp+A),E=[],P=(z==null?void 0:z.translateToString(!0,void 0,void 0,E))||"",O=(w.ydisp+A+1).toString(),H=this._rowElements[A];H&&(P.length===0?(H.innerText="",this._rowColumns.set(H,[0,1])):(H.textContent=P,this._rowColumns.set(H,E)),H.setAttribute("aria-posinset",O),H.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,g){const w=f.target,R=this._rowElements[g===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==R)return;let A,z;if(g===0?(A=w,z=this._rowElements.pop(),this._rowContainer.removeChild(z)):(A=this._rowElements.shift(),z=w,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),z.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleSelectionChange(){var P;if(this._rowElements.length===0)return;const f=document.getSelection();if(!f)return;if(f.isCollapsed)return void(this._rowContainer.contains(f.anchorNode)&&this._terminal.clearSelection());if(!f.anchorNode||!f.focusNode)return void console.error("anchorNode and/or focusNode are null");let g={node:f.anchorNode,offset:f.anchorOffset},w={node:f.focusNode,offset:f.focusOffset};if((g.node.compareDocumentPosition(w.node)&Node.DOCUMENT_POSITION_PRECEDING||g.node===w.node&&g.offset>w.offset)&&([g,w]=[w,g]),g.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(g={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(g.node))return;const R=this._rowElements.slice(-1)[0];if(w.node.compareDocumentPosition(R)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(w={node:R,offset:((P=R.textContent)==null?void 0:P.length)??0}),!this._rowContainer.contains(w.node))return;const A=({node:O,offset:H})=>{const K=O instanceof Text?O.parentNode:O;let U=parseInt(K==null?void 0:K.getAttribute("aria-posinset"),10)-1;if(isNaN(U))return console.warn("row is invalid. Race condition?"),null;const te=this._rowColumns.get(K);if(!te)return console.warn("columns is null. Race condition?"),null;let V=H<te.length?te[H]:te.slice(-1)[0]+1;return V>=this._terminal.cols&&(++U,V=0),{row:U,column:V}},z=A(g),E=A(w);if(z&&E){if(z.row>E.row||z.row===E.row&&z.column>=E.column)throw new Error("invalid range");this._terminal.select(z.column,z.row,(E.row-z.row)*this._terminal.cols-z.column+E.column)}}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const f=this._coreBrowserService.mainDocument.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=p=x([v(1,C.IInstantiationService),v(2,j.ICoreBrowserService),v(3,j.IRenderService)],p)},3614:(b,l)=>{function c(y){return y.replace(/\r?\n/g,"\r")}function x(y,_){return _?"\x1B[200~"+y+"\x1B[201~":y}function v(y,_,j,C){y=x(y=c(y),j.decPrivateModes.bracketedPasteMode&&C.rawOptions.ignoreBracketedPasteMode!==!0),j.triggerDataEvent(y,!0),_.value=""}function d(y,_,j){const C=j.getBoundingClientRect(),h=y.clientX-C.left-10,p=y.clientY-C.top-10;_.style.width="20px",_.style.height="20px",_.style.left=`${h}px`,_.style.top=`${p}px`,_.style.zIndex="1000",_.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=c,l.bracketTextForPaste=x,l.copyHandler=function(y,_){y.clipboardData&&y.clipboardData.setData("text/plain",_.selectionText),y.preventDefault()},l.handlePasteEvent=function(y,_,j,C){y.stopPropagation(),y.clipboardData&&v(y.clipboardData.getData("text/plain"),_,j,C)},l.paste=v,l.moveTextAreaUnderMouseCursor=d,l.rightClickHandler=function(y,_,j,C,h){d(y,_,j),h&&C.rightClickSelect(y),_.value=C.selectionText,_.select()}},7239:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const x=c(1505);l.ColorContrastCache=class{constructor(){this._color=new x.TwoKeyMap,this._css=new x.TwoKeyMap}setCss(v,d,y){this._css.set(v,d,y)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,y){this._color.set(v,d,y)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(c,x,v,d){c.addEventListener(x,v,d);let y=!1;return{dispose:()=>{y||(y=!0,c.removeEventListener(x,v,d))}}}},3551:function(b,l,c){var x=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const d=c(3656),y=c(8460),_=c(844),j=c(2585),C=c(4725);let h=l.Linkifier=class extends _.Disposable{get currentLink(){return this._currentLink}constructor(p,f,g,w,R){super(),this._element=p,this._mouseService=f,this._renderService=g,this._bufferService=w,this._linkProviderService=R,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,_.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,_.toDisposable)((()=>{var A;this._lastMouseEvent=void 0,(A=this._activeProviderReplies)==null||A.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const g=p.composedPath();for(let w=0;w<g.length;w++){const R=g[w];if(R.classList.contains("xterm"))break;if(R.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,f){var w,R;this._activeProviderReplies&&f||((w=this._activeProviderReplies)==null||w.forEach((A=>{A==null||A.forEach((z=>{z.link.dispose&&z.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=p.y);let g=!1;for(const[A,z]of this._linkProviderService.linkProviders.entries())f?(R=this._activeProviderReplies)!=null&&R.get(A)&&(g=this._checkLinkProviderResult(A,p,g)):z.provideLinks(p.y,(E=>{var O,H;if(this._isMouseOut)return;const P=E==null?void 0:E.map((K=>({link:K})));(O=this._activeProviderReplies)==null||O.set(A,P),g=this._checkLinkProviderResult(A,p,g),((H=this._activeProviderReplies)==null?void 0:H.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)}))}_removeIntersectingLinks(p,f){const g=new Set;for(let w=0;w<f.size;w++){const R=f.get(w);if(R)for(let A=0;A<R.length;A++){const z=R[A],E=z.link.range.start.y<p?0:z.link.range.start.x,P=z.link.range.end.y>p?this._bufferService.cols:z.link.range.end.x;for(let O=E;O<=P;O++){if(g.has(O)){R.splice(A--,1);break}g.add(O)}}}}_checkLinkProviderResult(p,f,g){var A;if(!this._activeProviderReplies)return g;const w=this._activeProviderReplies.get(p);let R=!1;for(let z=0;z<p;z++)this._activeProviderReplies.has(z)&&!this._activeProviderReplies.get(z)||(R=!0);if(!R&&w){const z=w.find((E=>this._linkAtPosition(E.link,f)));z&&(g=!0,this._handleNewLink(z))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!g)for(let z=0;z<this._activeProviderReplies.size;z++){const E=(A=this._activeProviderReplies.get(z))==null?void 0:A.find((P=>this._linkAtPosition(P.link,f)));if(E){g=!0,this._handleNewLink(E);break}}return g}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,f){this._currentLink&&this._lastMouseEvent&&(!p||!f||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(p.link,f)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var g,w;return(w=(g=this._currentLink)==null?void 0:g.state)==null?void 0:w.decorations.pointerCursor},set:g=>{var w;(w=this._currentLink)!=null&&w.state&&this._currentLink.state.decorations.pointerCursor!==g&&(this._currentLink.state.decorations.pointerCursor=g,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",g))}},underline:{get:()=>{var g,w;return(w=(g=this._currentLink)==null?void 0:g.state)==null?void 0:w.decorations.underline},set:g=>{var w,R,A;(w=this._currentLink)!=null&&w.state&&((A=(R=this._currentLink)==null?void 0:R.state)==null?void 0:A.decorations.underline)!==g&&(this._currentLink.state.decorations.underline=g,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,g))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((g=>{if(!this._currentLink)return;const w=g.start===0?0:g.start+1+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.ydisp+1+g.end;if(this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=R&&(this._clearCurrentLink(w,R),this._lastMouseEvent)){const A=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);A&&this._askForLink(A,!1)}}))))}_linkHover(p,f,g){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(g,f.text)}_fireUnderlineEvent(p,f){const g=p.range,w=this._bufferService.buffer.ydisp,R=this._createLinkUnderlineEvent(g.start.x-1,g.start.y-w-1,g.end.x,g.end.y-w-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(R)}_linkLeave(p,f,g){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(g,f.text)}_linkAtPosition(p,f){const g=p.range.start.y*this._bufferService.cols+p.range.start.x,w=p.range.end.y*this._bufferService.cols+p.range.end.x,R=f.y*this._bufferService.cols+f.x;return g<=R&&R<=w}_positionFromMouseEvent(p,f,g){const w=g.getCoords(p,f,this._bufferService.cols,this._bufferService.rows);if(w)return{x:w[0],y:w[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,f,g,w,R){return{x1:p,y1:f,x2:g,y2:w,cols:this._bufferService.cols,fg:R}}};l.Linkifier=h=x([v(1,C.IMouseService),v(2,C.IRenderService),v(3,j.IBufferService),v(4,C.ILinkProviderService)],h)},9042:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,l,c){var x=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const d=c(511),y=c(2585);let _=l.OscLinkProvider=class{constructor(C,h,p){this._bufferService=C,this._optionsService=h,this._oscLinkService=p}provideLinks(C,h){var P;const p=this._bufferService.buffer.lines.get(C-1);if(!p)return void h(void 0);const f=[],g=this._optionsService.rawOptions.linkHandler,w=new d.CellData,R=p.getTrimmedLength();let A=-1,z=-1,E=!1;for(let O=0;O<R;O++)if(z!==-1||p.hasContent(O)){if(p.loadCell(O,w),w.hasExtendedAttrs()&&w.extended.urlId){if(z===-1){z=O,A=w.extended.urlId;continue}E=w.extended.urlId!==A}else z!==-1&&(E=!0);if(E||z!==-1&&O===R-1){const H=(P=this._oscLinkService.getLinkData(A))==null?void 0:P.uri;if(H){const K={start:{x:z+1,y:C},end:{x:O+(E||O!==R-1?0:1),y:C}};let U=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const te=new URL(H);["http:","https:"].includes(te.protocol)||(U=!0)}catch{U=!0}U||f.push({text:H,range:K,activate:(te,V)=>g?g.activate(te,V,K):j(0,V),hover:(te,V)=>{var de;return(de=g==null?void 0:g.hover)==null?void 0:de.call(g,te,V,K)},leave:(te,V)=>{var de;return(de=g==null?void 0:g.leave)==null?void 0:de.call(g,te,V,K)}})}E=!1,w.hasExtendedAttrs()&&w.extended.urlId?(z=O,A=w.extended.urlId):(z=-1,A=-1)}}h(f)}};function j(C,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=_=x([v(0,y.IBufferService),v(1,y.IOptionsService),v(2,y.IOscLinkService)],_)},6193:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(c,x){this._renderCallback=c,this._coreBrowserService=x,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(c,x,v){this._rowCount=v,c=c!==void 0?c:0,x=x!==void 0?x:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,x):x,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),x=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,x),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const x=c(3614),v=c(3656),d=c(3551),y=c(9042),_=c(3730),j=c(1680),C=c(3107),h=c(5744),p=c(2950),f=c(1296),g=c(428),w=c(4269),R=c(5114),A=c(8934),z=c(3230),E=c(9312),P=c(4725),O=c(6731),H=c(8055),K=c(8969),U=c(8460),te=c(844),V=c(6114),de=c(8437),Q=c(2584),Y=c(7399),B=c(5941),D=c(9074),M=c(2585),W=c(5435),pe=c(4567),me=c(779);class we extends K.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(X={}){super(X),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new te.MutableDisposable),this._onCursorMove=this.register(new U.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new U.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new U.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new U.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new U.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new U.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new U.EventEmitter),this._onBlur=this.register(new U.EventEmitter),this._onA11yCharEmitter=this.register(new U.EventEmitter),this._onA11yTabEmitter=this.register(new U.EventEmitter),this._onWillOpen=this.register(new U.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(D.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(me.LinkProviderService),this._instantiationService.setService(P.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(_.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((F,be)=>this.refresh(F,be)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((F=>this._reportWindowsOptions(F)))),this.register(this._inputHandler.onColor((F=>this._handleColorEvent(F)))),this.register((0,U.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,U.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((F=>this._afterResize(F.cols,F.rows)))),this.register((0,te.toDisposable)((()=>{var F,be;this._customKeyEventHandler=void 0,(be=(F=this.element)==null?void 0:F.parentNode)==null||be.removeChild(this.element)})))}_handleColorEvent(X){if(this._themeService)for(const F of X){let be,oe="";switch(F.index){case 256:be="foreground",oe="10";break;case 257:be="background",oe="11";break;case 258:be="cursor",oe="12";break;default:be="ansi",oe="4;"+F.index}switch(F.type){case 0:const De=H.color.toColorRGB(be==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[be]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${oe};${(0,B.toRgbString)(De)}${Q.C1_ESCAPED.ST}`);break;case 1:if(be==="ansi")this._themeService.modifyColors((ee=>ee.ansi[F.index]=H.channels.toColor(...F.color)));else{const ee=be;this._themeService.modifyColors((ke=>ke[ee]=H.channels.toColor(...F.color)))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(X){X?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(pe.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(X){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var X;return(X=this.textarea)==null?void 0:X.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const X=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(X);if(!F)return;const be=Math.min(this.buffer.x,this.cols-1),oe=this._renderService.dimensions.css.cell.height,De=F.getWidth(be),ee=this._renderService.dimensions.css.cell.width*De,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,he=be*this._renderService.dimensions.css.cell.width;this.textarea.style.left=he+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=ee+"px",this.textarea.style.height=oe+"px",this.textarea.style.lineHeight=oe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(F=>{this.hasSelection()&&(0,x.copyHandler)(F,this._selectionService)})));const X=F=>(0,x.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",X)),this.register((0,v.addDisposableDomListener)(this.element,"paste",X)),V.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(F=>{F.button===2&&(0,x.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(F=>{(0,x.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),V.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(F=>{F.button===1&&(0,x.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(X=>this._keyUp(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(X=>this._keyDown(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(X=>this._keyPress(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(X=>this._compositionHelper.compositionupdate(X)))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(X=>this._inputEvent(X)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(X){var be;if(!X)throw new Error("Terminal requires a parent element.");if(X.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((be=this.element)==null?void 0:be.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=X.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),X.appendChild(this.element);const F=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",(oe=>this.updateCursorStyle(oe)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,X.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(P.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(oe=>this._handleTextAreaFocus(oe)))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(g.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(P.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(O.ThemeService),this._instantiationService.setService(P.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(w.CharacterJoinerService),this._instantiationService.setService(P.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(z.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(P.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((oe=>this._onRender.fire(oe)))),this.onResize((oe=>this._renderService.resize(oe.cols,oe.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(P.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(j.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(E.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(P.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((oe=>this._renderService.handleSelectionChanged(oe.start,oe.end,oe.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((oe=>{this.textarea.value=oe,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((oe=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(C.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(oe=>this._selectionService.handleMouseDown(oe)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(pe.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(oe=>this._handleScreenReaderModeOptionChange(oe)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(oe=>{!this._overviewRulerRenderer&&oe&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const X=this,F=this.element;function be(ee){const ke=X._mouseService.getMouseReportCoords(ee,X.screenElement);if(!ke)return!1;let he,Ie;switch(ee.overrideType||ee.type){case"mousemove":Ie=32,ee.buttons===void 0?(he=3,ee.button!==void 0&&(he=ee.button<3?ee.button:3)):he=1&ee.buttons?0:4&ee.buttons?1:2&ee.buttons?2:3;break;case"mouseup":Ie=0,he=ee.button<3?ee.button:3;break;case"mousedown":Ie=1,he=ee.button<3?ee.button:3;break;case"wheel":if(X._customWheelEventHandler&&X._customWheelEventHandler(ee)===!1||X.viewport.getLinesScrolled(ee)===0)return!1;Ie=ee.deltaY<0?0:1,he=4;break;default:return!1}return!(Ie===void 0||he===void 0||he>4)&&X.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:he,action:Ie,ctrl:ee.ctrlKey,alt:ee.altKey,shift:ee.shiftKey})}const oe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},De={mouseup:ee=>(be(ee),ee.buttons||(this._document.removeEventListener("mouseup",oe.mouseup),oe.mousedrag&&this._document.removeEventListener("mousemove",oe.mousedrag)),this.cancel(ee)),wheel:ee=>(be(ee),this.cancel(ee,!0)),mousedrag:ee=>{ee.buttons&&be(ee)},mousemove:ee=>{ee.buttons||be(ee)}};this.register(this.coreMouseService.onProtocolChange((ee=>{ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ee?oe.mousemove||(F.addEventListener("mousemove",De.mousemove),oe.mousemove=De.mousemove):(F.removeEventListener("mousemove",oe.mousemove),oe.mousemove=null),16&ee?oe.wheel||(F.addEventListener("wheel",De.wheel,{passive:!1}),oe.wheel=De.wheel):(F.removeEventListener("wheel",oe.wheel),oe.wheel=null),2&ee?oe.mouseup||(oe.mouseup=De.mouseup):(this._document.removeEventListener("mouseup",oe.mouseup),oe.mouseup=null),4&ee?oe.mousedrag||(oe.mousedrag=De.mousedrag):(this._document.removeEventListener("mousemove",oe.mousedrag),oe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(F,"mousedown",(ee=>{if(ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ee))return be(ee),oe.mouseup&&this._document.addEventListener("mouseup",oe.mouseup),oe.mousedrag&&this._document.addEventListener("mousemove",oe.mousedrag),this.cancel(ee)}))),this.register((0,v.addDisposableDomListener)(F,"wheel",(ee=>{if(!oe.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ee)===!1)return!1;if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(ee);if(ke===0)return;const he=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ee.deltaY<0?"A":"B");let Ie="";for(let Oe=0;Oe<Math.abs(ke);Oe++)Ie+=he;return this.coreService.triggerDataEvent(Ie,!0),this.cancel(ee,!0)}return this.viewport.handleWheel(ee)?this.cancel(ee):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(F,"touchstart",(ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ee),this.cancel(ee)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(F,"touchmove",(ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ee)?void 0:this.cancel(ee)}),{passive:!1}))}refresh(X,F){var be;(be=this._renderService)==null||be.refreshRows(X,F)}updateCursorStyle(X){var F;(F=this._selectionService)!=null&&F.shouldColumnSelect(X)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(X,F,be=0){var oe;be===1?(super.scrollLines(X,F,be),this.refresh(0,this.rows-1)):(oe=this.viewport)==null||oe.scrollLines(X)}paste(X){(0,x.paste)(X,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(X){this._customKeyEventHandler=X}attachCustomWheelEventHandler(X){this._customWheelEventHandler=X}registerLinkProvider(X){return this._linkProviderService.registerLinkProvider(X)}registerCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(X);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(X)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(X){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+X)}registerDecoration(X){return this._decorationService.registerDecoration(X)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(X,F,be){this._selectionService.setSelection(X,F,be)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var X;(X=this._selectionService)==null||X.clearSelection()}selectAll(){var X;(X=this._selectionService)==null||X.selectAll()}selectLines(X,F){var be;(be=this._selectionService)==null||be.selectLines(X,F)}_keyDown(X){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&X.altKey;if(!F&&!this._compositionHelper.keydown(X))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||X.key!=="Dead"&&X.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const be=(0,Y.evaluateKeyboardEvent)(X,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(X),be.type===3||be.type===2){const oe=this.rows-1;return this.scrollLines(be.type===2?-oe:oe),this.cancel(X,!0)}return be.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,X)||(be.cancel&&this.cancel(X,!0),!be.key||!!(X.key&&!X.ctrlKey&&!X.altKey&&!X.metaKey&&X.key.length===1&&X.key.charCodeAt(0)>=65&&X.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(be.key!==Q.C0.ETX&&be.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:be.key,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(be.key,!0),!this.optionsService.rawOptions.screenReaderMode||X.altKey||X.ctrlKey?this.cancel(X,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(X,F){const be=X.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||X.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||X.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?be:be&&(!F.keyCode||F.keyCode>47)}_keyUp(X){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1||((function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18})(X)||this.focus(),this.updateCursorStyle(X),this._keyPressHandled=!1)}_keyPress(X){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;if(this.cancel(X),X.charCode)F=X.charCode;else if(X.which===null||X.which===void 0)F=X.keyCode;else{if(X.which===0||X.charCode===0)return!1;F=X.which}return!(!F||(X.altKey||X.ctrlKey||X.metaKey)&&!this._isThirdLevelShift(this.browser,X)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(X){if(X.data&&X.inputType==="insertText"&&(!X.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=X.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(X),!0}return!1}resize(X,F){X!==this.cols||F!==this.rows?super.resize(X,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(X,F){var be,oe;(be=this._charSizeService)==null||be.measure(),(oe=this.viewport)==null||oe.syncScrollArea(!0)}clear(){var X;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine(de.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(X=this.viewport)==null||X.reset(),this.refresh(0,this.rows-1)}}reset(){var F,be;this.options.rows=this.rows,this.options.cols=this.cols;const X=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)==null||F.reset(),this._decorationService.reset(),(be=this.viewport)==null||be.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1)}clearTextureAtlas(){var X;(X=this._renderService)==null||X.clearTextureAtlas()}_reportFocus(){var X;(X=this.element)!=null&&X.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(X){if(this._renderService)switch(X){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),be=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${be};${F}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const oe=this._renderService.dimensions.css.cell.width.toFixed(0),De=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${De};${oe}t`)}}cancel(X,F){if(this.options.cancelEvents||F)return X.preventDefault(),X.stopPropagation(),!1}}l.Terminal=we},9924:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(c,x=1e3){this._renderCallback=c,this._debounceThresholdMS=x,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,x,v){this._rowCount=v,c=c!==void 0?c:0,x=x!==void 0?x:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,x):x;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=d-this._lastRefreshMs,_=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),_)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),x=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,x)}}},1680:function(b,l,c){var x=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const d=c(3656),y=c(4725),_=c(8460),j=c(844),C=c(2585);let h=l.Viewport=class extends j.Disposable{constructor(p,f,g,w,R,A,z,E){super(),this._viewportElement=p,this._scrollArea=f,this._bufferService=g,this._optionsService=w,this._charSizeService=R,this._renderService=A,this._coreBrowserService=z,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((P=>this._activeBuffer=P.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((P=>this._renderDimensions=P))),this._handleThemeChange(E.colors),this.register(E.onChangeColors((P=>this._handleThemeChange(P)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,f){const g=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&g<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const f=this._getPixelsScrolled(p);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const f=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(p,f){var E;let g,w="";const R=[],A=f??this._bufferService.buffer.lines.length,z=this._bufferService.buffer.lines;for(let P=p;P<A;P++){const O=z.get(P);if(!O)continue;const H=(E=z.get(P+1))==null?void 0:E.isWrapped;if(w+=O.translateToString(!H),!H||P===z.length-1){const K=document.createElement("div");K.textContent=w,R.push(K),w.length>0&&(g=K),w=""}}return{bufferElements:R,cursorElement:g}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(p,f){const g=this._optionsService.rawOptions.fastScrollModifier;return g==="alt"&&f.altKey||g==="ctrl"&&f.ctrlKey||g==="shift"&&f.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const f=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}};l.Viewport=h=x([v(2,C.IBufferService),v(3,C.IOptionsService),v(4,y.ICharSizeService),v(5,y.IRenderService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],h)},3107:function(b,l,c){var x=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const d=c(4725),y=c(844),_=c(2585);let j=l.BufferDecorationRenderer=class extends y.Disposable{constructor(C,h,p,f,g){super(),this._screenElement=C,this._bufferService=h,this._coreBrowserService=p,this._decorationService=f,this._renderService=g,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((w=>this._removeDecoration(w)))),this.register((0,y.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const C of this._decorationService.decorations)this._renderDecoration(C);this._dimensionsChanged=!1}_renderDecoration(C){this._refreshStyle(C),this._dimensionsChanged&&this._refreshXPosition(C)}_createElement(C){var f;const h=this._coreBrowserService.mainDocument.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((f=C==null?void 0:C.options)==null?void 0:f.layer)==="top"),h.style.width=`${Math.round((C.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(C.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(C.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=C.options.x??0;return p&&p>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(C,h),h}_refreshStyle(C){const h=C.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)C.element&&(C.element.style.display="none",C.onRenderEmitter.fire(C.element));else{let p=this._decorationElements.get(C);p||(p=this._createElement(C),C.element=p,this._decorationElements.set(C,p),this._container.appendChild(p),C.onDispose((()=>{this._decorationElements.delete(C),p.remove()}))),p.style.top=h*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",C.onRenderEmitter.fire(p)}}_refreshXPosition(C,h=C.element){if(!h)return;const p=C.options.x??0;(C.options.anchor||"left")==="right"?h.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(C){var h;(h=this._decorationElements.get(C))==null||h.remove(),this._decorationElements.delete(C),C.dispose()}};l.BufferDecorationRenderer=j=x([v(1,_.IBufferService),v(2,d.ICoreBrowserService),v(3,_.IDecorationService),v(4,d.IRenderService)],j)},5871:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const x of this._zones)if(x.color===c.options.overviewRulerOptions.color&&x.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(x,c.marker.line))return;if(this._lineAdjacentToZone(x,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(x,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,x){return x>=c.startBufferLine&&x<=c.endBufferLine}_lineAdjacentToZone(c,x,v){return x>=c.startBufferLine-this._linePadding[v||"full"]&&x<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,x){c.startBufferLine=Math.min(c.startBufferLine,x),c.endBufferLine=Math.max(c.endBufferLine,x)}}},5744:function(b,l,c){var x=this&&this.__decorate||function(g,w,R,A){var z,E=arguments.length,P=E<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,R):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(g,w,R,A);else for(var O=g.length-1;O>=0;O--)(z=g[O])&&(P=(E<3?z(P):E>3?z(w,R,P):z(w,R))||P);return E>3&&P&&Object.defineProperty(w,R,P),P},v=this&&this.__param||function(g,w){return function(R,A){w(R,A,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const d=c(5871),y=c(4725),_=c(844),j=c(2585),C={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let f=l.OverviewRulerRenderer=class extends _.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,w,R,A,z,E,P){var H;super(),this._viewportElement=g,this._screenElement=w,this._bufferService=R,this._decorationService=A,this._renderService=z,this._optionsService=E,this._coreBrowserService=P,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(H=this._viewportElement.parentElement)==null||H.insertBefore(this._canvas,this._viewportElement);const O=this._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");this._ctx=O,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,_.toDisposable)((()=>{var K;(K=this._canvas)==null||K.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=w,h.right=g,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=h.left,p.right=h.left+h.center}_refreshDrawHeightConstants(){C.full=Math.round(2*this._coreBrowserService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowserService.dpr);C.left=w,C.center=w,C.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const w of g)w.position!=="full"&&this._renderColorZone(w);for(const w of g)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(p[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-C[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+C[g.position||"full"]))}_queueRefresh(g,w){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=f=x([v(2,j.IBufferService),v(3,j.IDecorationService),v(4,y.IRenderService),v(5,j.IOptionsService),v(6,y.ICoreBrowserService)],f)},2950:function(b,l,c){var x=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const d=c(4725),y=c(2585),_=c(2584);let j=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(C,h,p,f,g,w){this._textarea=C,this._compositionView=h,this._bufferService=p,this._optionsService=f,this._coreService=g,this._renderService=w,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(C){this._compositionView.textContent=C.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(C){if(this._isComposing||this._isSendingComposition){if(C.keyCode===229||C.keyCode===16||C.keyCode===17||C.keyCode===18)return!1;this._finalizeComposition(!1)}return C.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(C){if(this._compositionView.classList.remove("active"),this._isComposing=!1,C){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}}),0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const C=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const h=this._textarea.value,p=h.replace(C,"");this._dataAlreadySent=p,h.length>C.length?this._coreService.triggerDataEvent(p,!0):h.length<C.length?this._coreService.triggerDataEvent(`${_.C0.DEL}`,!0):h.length===C.length&&h!==C&&this._coreService.triggerDataEvent(h,!0)}}),0)}updateCompositionElements(C){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,g=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=g+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const w=this._compositionView.getBoundingClientRect();this._textarea.style.left=g+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(w.width,1)+"px",this._textarea.style.height=Math.max(w.height,1)+"px",this._textarea.style.lineHeight=w.height+"px"}C||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=j=x([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,y.ICoreService),v(5,d.IRenderService)],j)},9806:(b,l)=>{function c(x,v,d){const y=d.getBoundingClientRect(),_=x.getComputedStyle(d),j=parseInt(_.getPropertyValue("padding-left")),C=parseInt(_.getPropertyValue("padding-top"));return[v.clientX-y.left-j,v.clientY-y.top-C]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=c,l.getCoords=function(x,v,d,y,_,j,C,h,p){if(!j)return;const f=c(x,v,d);return f?(f[0]=Math.ceil((f[0]+(p?C/2:0))/C),f[1]=Math.ceil(f[1]/h),f[0]=Math.min(Math.max(f[0],1),y+(p?1:0)),f[1]=Math.min(Math.max(f[1],1),_),f):void 0}},9504:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const x=c(2584);function v(h,p,f,g){const w=h-d(h,f),R=p-d(p,f),A=Math.abs(w-R)-(function(z,E,P){let O=0;const H=z-d(z,P),K=E-d(E,P);for(let U=0;U<Math.abs(H-K);U++){const te=y(z,E)==="A"?-1:1,V=P.buffer.lines.get(H+te*U);V!=null&&V.isWrapped&&O++}return O})(h,p,f);return C(A,j(y(h,p),g))}function d(h,p){let f=0,g=p.buffer.lines.get(h),w=g==null?void 0:g.isWrapped;for(;w&&h>=0&&h<p.rows;)f++,g=p.buffer.lines.get(--h),w=g==null?void 0:g.isWrapped;return f}function y(h,p){return h>p?"A":"B"}function _(h,p,f,g,w,R){let A=h,z=p,E="";for(;A!==f||z!==g;)A+=w?1:-1,w&&A>R.cols-1?(E+=R.buffer.translateBufferLineToString(z,!1,h,A),A=0,h=0,z++):!w&&A<0&&(E+=R.buffer.translateBufferLineToString(z,!1,0,h+1),A=R.cols-1,h=A,z--);return E+R.buffer.translateBufferLineToString(z,!1,h,A)}function j(h,p){const f=p?"O":"[";return x.C0.ESC+f+h}function C(h,p){h=Math.floor(h);let f="";for(let g=0;g<h;g++)f+=p;return f}l.moveToCellSequence=function(h,p,f,g){const w=f.buffer.x,R=f.buffer.y;if(!f.buffer.hasScrollback)return(function(E,P,O,H,K,U){return v(P,H,K,U).length===0?"":C(_(E,P,E,P-d(P,K),!1,K).length,j("D",U))})(w,R,0,p,f,g)+v(R,p,f,g)+(function(E,P,O,H,K,U){let te;te=v(P,H,K,U).length>0?H-d(H,K):P;const V=H,de=(function(Q,Y,B,D,M,W){let pe;return pe=v(B,D,M,W).length>0?D-d(D,M):Y,Q<B&&pe<=D||Q>=B&&pe<D?"C":"D"})(E,P,O,H,K,U);return C(_(E,te,O,V,de==="C",K).length,j(de,U))})(w,R,h,p,f,g);let A;if(R===p)return A=w>h?"D":"C",C(Math.abs(w-h),j(A,g));A=R>p?"D":"C";const z=Math.abs(R-p);return C((function(E,P){return P.cols-E})(R>p?h:w,f)+(z-1)*f.cols+1+((R>p?w:h)-1),j(A,g))}},1296:function(b,l,c){var x=this&&this.__decorate||function(U,te,V,de){var Q,Y=arguments.length,B=Y<3?te:de===null?de=Object.getOwnPropertyDescriptor(te,V):de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(U,te,V,de);else for(var D=U.length-1;D>=0;D--)(Q=U[D])&&(B=(Y<3?Q(B):Y>3?Q(te,V,B):Q(te,V))||B);return Y>3&&B&&Object.defineProperty(te,V,B),B},v=this&&this.__param||function(U,te){return function(V,de){te(V,de,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const d=c(3787),y=c(2550),_=c(2223),j=c(6171),C=c(6052),h=c(4725),p=c(8055),f=c(8460),g=c(844),w=c(2585),R="xterm-dom-renderer-owner-",A="xterm-rows",z="xterm-fg-",E="xterm-bg-",P="xterm-focus",O="xterm-selection";let H=1,K=l.DomRenderer=class extends g.Disposable{constructor(U,te,V,de,Q,Y,B,D,M,W,pe,me,we){super(),this._terminal=U,this._document=te,this._element=V,this._screenElement=de,this._viewportElement=Q,this._helperContainer=Y,this._linkifier2=B,this._charSizeService=M,this._optionsService=W,this._bufferService=pe,this._coreBrowserService=me,this._themeService=we,this._terminalClass=H++,this._rowElements=[],this._selectionRenderModel=(0,C.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(A),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(O),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,j.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Re=>this._injectCss(Re)))),this._injectCss(this._themeService.colors),this._rowFactory=D.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(R+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Re=>this._handleLinkHover(Re)))),this.register(this._linkifier2.onHideLinkUnderline((Re=>this._handleLinkLeave(Re)))),this.register((0,g.toDisposable)((()=>{this._element.classList.remove(R+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new y.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const te=`${this._terminalSelector} .${A} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=te,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let te=`${this._terminalSelector} .${A} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;te+=`${this._terminalSelector} .${A} .xterm-dim { color: ${p.color.multiplyOpacity(U.foreground,.5).css};}`,te+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const V=`blink_underline_${this._terminalClass}`,de=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;te+=`@keyframes ${V} { 50% {  border-bottom-style: hidden; }}`,te+=`@keyframes ${de} { 50% {  box-shadow: none; }}`,te+=`@keyframes ${Q} { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,te+=`${this._terminalSelector} .${A}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${A}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${de} 1s step-end infinite;}${this._terminalSelector} .${A}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${U.cursor.css} !important; color: ${U.cursorAccent.css} !important;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,te+=`${this._terminalSelector} .${O} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${O} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${O} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,B]of U.ansi.entries())te+=`${this._terminalSelector} .${z}${Y} { color: ${B.css}; }${this._terminalSelector} .${z}${Y}.xterm-dim { color: ${p.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${E}${Y} { background-color: ${B.css}; }`;te+=`${this._terminalSelector} .${z}${_.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(U.background).css}; }${this._terminalSelector} .${z}${_.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${E}${_.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=te}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,te){for(let V=this._rowElements.length;V<=te;V++){const de=this._document.createElement("div");this._rowContainer.appendChild(de),this._rowElements.push(de)}for(;this._rowElements.length>te;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,te){this._refreshRowElements(U,te),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(P),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(P),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,te,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,te,V),this.renderRows(0,this._bufferService.rows-1),!U||!te)return;this._selectionRenderModel.update(this._terminal,U,te,V);const de=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,B=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||B<0)return;const D=this._document.createDocumentFragment();if(V){const M=U[0]>te[0];D.appendChild(this._createSelectionElement(Y,M?te[0]:U[0],M?U[0]:te[0],B-Y+1))}else{const M=de===Y?U[0]:0,W=Y===Q?te[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(Y,M,W));const pe=B-Y-1;if(D.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,pe)),Y!==B){const me=Q===B?te[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(B,0,me))}}this._selectionContainer.appendChild(D)}_createSelectionElement(U,te,V,de=1){const Q=this._document.createElement("div"),Y=te*this.dimensions.css.cell.width;let B=this.dimensions.css.cell.width*(V-te);return Y+B>this.dimensions.css.canvas.width&&(B=this.dimensions.css.canvas.width-Y),Q.style.height=de*this.dimensions.css.cell.height+"px",Q.style.top=U*this.dimensions.css.cell.height+"px",Q.style.left=`${Y}px`,Q.style.width=`${B}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,te){const V=this._bufferService.buffer,de=V.ybase+V.y,Q=Math.min(V.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,B=this._optionsService.rawOptions.cursorStyle,D=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=U;M<=te;M++){const W=M+V.ydisp,pe=this._rowElements[M],me=V.lines.get(W);if(!pe||!me)break;pe.replaceChildren(...this._rowFactory.createRow(me,W,W===de,B,D,Q,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${R}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,te,V,de,Q,Y){V<0&&(U=0),de<0&&(te=0);const B=this._bufferService.rows-1;V=Math.max(Math.min(V,B),0),de=Math.max(Math.min(de,B),0),Q=Math.min(Q,this._bufferService.cols);const D=this._bufferService.buffer,M=D.ybase+D.y,W=Math.min(D.x,Q-1),pe=this._optionsService.rawOptions.cursorBlink,me=this._optionsService.rawOptions.cursorStyle,we=this._optionsService.rawOptions.cursorInactiveStyle;for(let Re=V;Re<=de;++Re){const X=Re+D.ydisp,F=this._rowElements[Re],be=D.lines.get(X);if(!F||!be)break;F.replaceChildren(...this._rowFactory.createRow(be,X,X===M,me,we,W,pe,this.dimensions.css.cell.width,this._widthCache,Y?Re===V?U:0:-1,Y?(Re===de?te:Q)-1:-1))}}};l.DomRenderer=K=x([v(7,w.IInstantiationService),v(8,h.ICharSizeService),v(9,w.IOptionsService),v(10,w.IBufferService),v(11,h.ICoreBrowserService),v(12,h.IThemeService)],K)},3787:function(b,l,c){var x=this&&this.__decorate||function(A,z,E,P){var O,H=arguments.length,K=H<3?z:P===null?P=Object.getOwnPropertyDescriptor(z,E):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(A,z,E,P);else for(var U=A.length-1;U>=0;U--)(O=A[U])&&(K=(H<3?O(K):H>3?O(z,E,K):O(z,E))||K);return H>3&&K&&Object.defineProperty(z,E,K),K},v=this&&this.__param||function(A,z){return function(E,P){z(E,P,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const d=c(2223),y=c(643),_=c(511),j=c(2585),C=c(8055),h=c(4725),p=c(4269),f=c(6171),g=c(3734);let w=l.DomRendererRowFactory=class{constructor(A,z,E,P,O,H,K){this._document=A,this._characterJoinerService=z,this._optionsService=E,this._coreBrowserService=P,this._coreService=O,this._decorationService=H,this._themeService=K,this._workCell=new _.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(A,z,E){this._selectionStart=A,this._selectionEnd=z,this._columnSelectMode=E}createRow(A,z,E,P,O,H,K,U,te,V,de){const Q=[],Y=this._characterJoinerService.getJoinedCharacters(z),B=this._themeService.colors;let D,M=A.getNoBgTrimmedLength();E&&M<H+1&&(M=H+1);let W=0,pe="",me=0,we=0,Re=0,X=!1,F=0,be=!1,oe=0;const De=[],ee=V!==-1&&de!==-1;for(let ke=0;ke<M;ke++){A.loadCell(ke,this._workCell);let he=this._workCell.getWidth();if(he===0)continue;let Ie=!1,Oe=ke,Pe=this._workCell;if(Y.length>0&&ke===Y[0][0]){Ie=!0;const ut=Y.shift();Pe=new p.JoinedCellData(this._workCell,A.translateToString(!0,ut[0],ut[1]),ut[1]-ut[0]),Oe=ut[1]-1,he=Pe.getWidth()}const Ee=this._isCellInSelection(ke,z),We=E&&ke===H,Z=ee&&ke>=V&&ke<=de;let le=!1;this._decorationService.forEachDecorationAtCell(ke,z,void 0,(ut=>{le=!0}));let Fe=Pe.getChars()||y.WHITESPACE_CELL_CHAR;if(Fe===" "&&(Pe.isUnderline()||Pe.isOverline())&&(Fe=""),oe=he*U-te.get(Fe,Pe.isBold(),Pe.isItalic()),D){if(W&&(Ee&&be||!Ee&&!be&&Pe.bg===me)&&(Ee&&be&&B.selectionForeground||Pe.fg===we)&&Pe.extended.ext===Re&&Z===X&&oe===F&&!We&&!Ie&&!le){Pe.isInvisible()?pe+=y.WHITESPACE_CELL_CHAR:pe+=Fe,W++;continue}W&&(D.textContent=pe),D=this._document.createElement("span"),W=0,pe=""}else D=this._document.createElement("span");if(me=Pe.bg,we=Pe.fg,Re=Pe.extended.ext,X=Z,F=oe,be=Ee,Ie&&H>=ke&&H<=Oe&&(H=ke),!this._coreService.isCursorHidden&&We&&this._coreService.isCursorInitialized){if(De.push("xterm-cursor"),this._coreBrowserService.isFocused)K&&De.push("xterm-cursor-blink"),De.push(P==="bar"?"xterm-cursor-bar":P==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(O)switch(O){case"outline":De.push("xterm-cursor-outline");break;case"block":De.push("xterm-cursor-block");break;case"bar":De.push("xterm-cursor-bar");break;case"underline":De.push("xterm-cursor-underline")}}if(Pe.isBold()&&De.push("xterm-bold"),Pe.isItalic()&&De.push("xterm-italic"),Pe.isDim()&&De.push("xterm-dim"),pe=Pe.isInvisible()?y.WHITESPACE_CELL_CHAR:Pe.getChars()||y.WHITESPACE_CELL_CHAR,Pe.isUnderline()&&(De.push(`xterm-underline-${Pe.extended.underlineStyle}`),pe===" "&&(pe=""),!Pe.isUnderlineColorDefault()))if(Pe.isUnderlineColorRGB())D.style.textDecorationColor=`rgb(${g.AttributeData.toColorRGB(Pe.getUnderlineColor()).join(",")})`;else{let ut=Pe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Pe.isBold()&&ut<8&&(ut+=8),D.style.textDecorationColor=B.ansi[ut].css}Pe.isOverline()&&(De.push("xterm-overline"),pe===" "&&(pe="")),Pe.isStrikethrough()&&De.push("xterm-strikethrough"),Z&&(D.style.textDecoration="underline");let Ze=Pe.getFgColor(),et=Pe.getFgColorMode(),dt=Pe.getBgColor(),Vt=Pe.getBgColorMode();const St=!!Pe.isInverse();if(St){const ut=Ze;Ze=dt,dt=ut;const Mr=et;et=Vt,Vt=Mr}let wt,Tt,mt,Lt=!1;switch(this._decorationService.forEachDecorationAtCell(ke,z,void 0,(ut=>{ut.options.layer!=="top"&&Lt||(ut.backgroundColorRGB&&(Vt=50331648,dt=ut.backgroundColorRGB.rgba>>8&16777215,wt=ut.backgroundColorRGB),ut.foregroundColorRGB&&(et=50331648,Ze=ut.foregroundColorRGB.rgba>>8&16777215,Tt=ut.foregroundColorRGB),Lt=ut.options.layer==="top")})),!Lt&&Ee&&(wt=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,dt=wt.rgba>>8&16777215,Vt=50331648,Lt=!0,B.selectionForeground&&(et=50331648,Ze=B.selectionForeground.rgba>>8&16777215,Tt=B.selectionForeground)),Lt&&De.push("xterm-decoration-top"),Vt){case 16777216:case 33554432:mt=B.ansi[dt],De.push(`xterm-bg-${dt}`);break;case 50331648:mt=C.channels.toColor(dt>>16,dt>>8&255,255&dt),this._addStyle(D,`background-color:#${R((dt>>>0).toString(16),"0",6)}`);break;default:St?(mt=B.foreground,De.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):mt=B.background}switch(wt||Pe.isDim()&&(wt=C.color.multiplyOpacity(mt,.5)),et){case 16777216:case 33554432:Pe.isBold()&&Ze<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ze+=8),this._applyMinimumContrast(D,mt,B.ansi[Ze],Pe,wt,void 0)||De.push(`xterm-fg-${Ze}`);break;case 50331648:const ut=C.channels.toColor(Ze>>16&255,Ze>>8&255,255&Ze);this._applyMinimumContrast(D,mt,ut,Pe,wt,Tt)||this._addStyle(D,`color:#${R(Ze.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(D,mt,B.foreground,Pe,wt,Tt)||St&&De.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}De.length&&(D.className=De.join(" "),De.length=0),We||Ie||le?D.textContent=pe:W++,oe!==this.defaultSpacing&&(D.style.letterSpacing=`${oe}px`),Q.push(D),ke=Oe}return D&&W&&(D.textContent=pe),Q}_applyMinimumContrast(A,z,E,P,O,H){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.treatGlyphAsBackgroundColor)(P.getCode()))return!1;const K=this._getContrastCache(P);let U;if(O||H||(U=K.getColor(z.rgba,E.rgba)),U===void 0){const te=this._optionsService.rawOptions.minimumContrastRatio/(P.isDim()?2:1);U=C.color.ensureContrastRatio(O||z,H||E,te),K.setColor((O||z).rgba,(H||E).rgba,U??null)}return!!U&&(this._addStyle(A,`color:${U.css}`),!0)}_getContrastCache(A){return A.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(A,z){A.setAttribute("style",`${A.getAttribute("style")||""}${z};`)}_isCellInSelection(A,z){const E=this._selectionStart,P=this._selectionEnd;return!(!E||!P)&&(this._columnSelectMode?E[0]<=P[0]?A>=E[0]&&z>=E[1]&&A<P[0]&&z<=P[1]:A<E[0]&&z>=E[1]&&A>=P[0]&&z<=P[1]:z>E[1]&&z<P[1]||E[1]===P[1]&&z===E[1]&&A>=E[0]&&A<P[0]||E[1]<P[1]&&z===P[1]&&A<P[0]||E[1]<P[1]&&z===E[1]&&A>=E[0])}};function R(A,z,E){for(;A.length<E;)A=z+A;return A}l.DomRendererRowFactory=w=x([v(1,h.ICharacterJoinerService),v(2,j.IOptionsService),v(3,h.ICoreBrowserService),v(4,j.ICoreService),v(5,j.IDecorationService),v(6,h.IThemeService)],w)},2550:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(c,x){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const y=c.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontStyle="italic";const _=c.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[v,d,y,_],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(y),this._container.appendChild(_),x.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,x,v,d){c===this._font&&x===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=x,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,x,v){let d=0;if(!x&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const j=this._measure(c,0);return j>0&&(this._flat[d]=j),j}let y=c;x&&(y+="B"),v&&(y+="I");let _=this._holey.get(y);if(_===void 0){let j=0;x&&(j|=1),v&&(j|=2),_=this._measure(c,j),_>0&&this._holey.set(y,_)}return _}_measure(c,x){const v=this._measureElements[x];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const x=c(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=x.isFirefox||x.isLegacyEdge?"bottom":"ideographic"},6171:(b,l)=>{function c(v){return 57508<=v&&v<=57558}function x(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},l.isPowerlineGlyph=c,l.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},l.isEmoji=x,l.allowRescaling=function(v,d,y,_){return d===1&&y>Math.ceil(1.5*_)&&v!==void 0&&v>255&&!x(v)&&!c(v)&&!(function(j){return 57344<=j&&j<=63743})(v)},l.treatGlyphAsBackgroundColor=function(v){return c(v)||(function(d){return 9472<=d&&d<=9631})(v)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(v,d,y=0){return(v-(2*Math.round(d)-y))%(2*Math.round(d))}},6052:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,y,_=!1){if(this.selectionStart=d,this.selectionEnd=y,!d||!y||d[0]===y[0]&&d[1]===y[1])return void this.clear();const j=v.buffers.active.ydisp,C=d[1]-j,h=y[1]-j,p=Math.max(C,0),f=Math.min(h,v.rows-1);p>=v.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=C,this.viewportEndRow=h,this.viewportCappedStartRow=p,this.viewportCappedEndRow=f,this.startCol=d[0],this.endCol=y[0])}isCellSelected(v,d,y){return!!this.hasSelection&&(y-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&y>=this.viewportCappedStartRow&&d<this.endCol&&y<=this.viewportCappedEndRow:d<this.startCol&&y>=this.viewportCappedStartRow&&d>=this.endCol&&y<=this.viewportCappedEndRow:y>this.viewportStartRow&&y<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol)}}l.createSelectionRenderModel=function(){return new c}},456:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,x=this.selectionEnd;return!(!c||!x)&&(c[1]>x[1]||c[1]===x[1]&&c[0]>x[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,l,c){var x=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var P=f.length-1;P>=0;P--)(A=f[P])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const d=c(2585),y=c(8460),_=c(844);let j=l.CharSizeService=class extends _.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,g,w){super(),this._optionsService=w,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new h(f,g,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};l.CharSizeService=j=x([v(2,d.IOptionsService)],j);class C extends _.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(g,w){g!==void 0&&g>0&&w!==void 0&&w>0&&(this._result.width=g,this._result.height=w)}}class h extends C{constructor(g,w,R){super(),this._document=g,this._parentElement=w,this._optionsService=R,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends C{constructor(g){super(),this._optionsService=g,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const w=this._ctx.measureText("W");if(!("width"in w&&"fontBoundingBoxAscent"in w&&"fontBoundingBoxDescent"in w))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const g=this._ctx.measureText("W");return this._validateAndSet(g.width,g.fontBoundingBoxAscent+g.fontBoundingBoxDescent),this._result}}},4269:function(b,l,c){var x=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const d=c(3734),y=c(643),_=c(511),j=c(2585);class C extends d.AttributeData{constructor(f,g,w){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=g,this._width=w}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=C;let h=l.CharacterJoinerService=class m0{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _.CellData}register(f){const g={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(g),g.id}deregister(f){for(let g=0;g<this._characterJoiners.length;g++)if(this._characterJoiners[g].id===f)return this._characterJoiners.splice(g,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];const g=this._bufferService.buffer.lines.get(f);if(!g||g.length===0)return[];const w=[],R=g.translateToString(!0);let A=0,z=0,E=0,P=g.getFg(0),O=g.getBg(0);for(let H=0;H<g.getTrimmedLength();H++)if(g.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==P||this._workCell.bg!==O){if(H-A>1){const K=this._getJoinedRanges(R,E,z,g,A);for(let U=0;U<K.length;U++)w.push(K[U])}A=H,E=z,P=this._workCell.fg,O=this._workCell.bg}z+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-A>1){const H=this._getJoinedRanges(R,E,z,g,A);for(let K=0;K<H.length;K++)w.push(H[K])}return w}_getJoinedRanges(f,g,w,R,A){const z=f.substring(g,w);let E=[];try{E=this._characterJoiners[0].handler(z)}catch(P){console.error(P)}for(let P=1;P<this._characterJoiners.length;P++)try{const O=this._characterJoiners[P].handler(z);for(let H=0;H<O.length;H++)m0._mergeRanges(E,O[H])}catch(O){console.error(O)}return this._stringRangesToCellRanges(E,R,A),E}_stringRangesToCellRanges(f,g,w){let R=0,A=!1,z=0,E=f[R];if(E){for(let P=w;P<this._bufferService.cols;P++){const O=g.getWidth(P),H=g.getString(P).length||y.WHITESPACE_CELL_CHAR.length;if(O!==0){if(!A&&E[0]<=z&&(E[0]=P,A=!0),E[1]<=z){if(E[1]=P,E=f[++R],!E)break;E[0]<=z?(E[0]=P,A=!0):A=!1}z+=H}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(f,g){let w=!1;for(let R=0;R<f.length;R++){const A=f[R];if(w){if(g[1]<=A[0])return f[R-1][1]=g[1],f;if(g[1]<=A[1])return f[R-1][1]=Math.max(g[1],A[1]),f.splice(R,1),f;f.splice(R,1),R--}else{if(g[1]<=A[0])return f.splice(R,0,g),f;if(g[1]<=A[1])return A[0]=Math.min(g[0],A[0]),f;g[0]<A[1]&&(A[0]=Math.min(g[0],A[0]),w=!0)}}return w?f[f.length-1][1]=g[1]:f.push(g),f}};l.CharacterJoinerService=h=x([v(0,j.IBufferService)],h)},5114:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const x=c(844),v=c(8460),d=c(3656);class y extends x.Disposable{constructor(C,h,p){super(),this._textarea=C,this._window=h,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new _(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((f=>this._screenDprMonitor.setWindow(f)))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(C){this._window!==C&&(this._window=C,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}l.CoreBrowserService=y;class _ extends x.Disposable{constructor(C){super(),this._parentWindow=C,this._windowResizeListener=this.register(new x.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,x.toDisposable)((()=>this.clearListener())))}setWindow(C){this._parentWindow=C,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var C;this._outerListener&&((C=this._resolutionMediaMatchList)==null||C.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const x=c(844);class v extends x.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,x.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(y){return this.linkProviders.push(y),{dispose:()=>{const _=this.linkProviders.indexOf(y);_!==-1&&this.linkProviders.splice(_,1)}}}}l.LinkProviderService=v},8934:function(b,l,c){var x=this&&this.__decorate||function(j,C,h,p){var f,g=arguments.length,w=g<3?C:p===null?p=Object.getOwnPropertyDescriptor(C,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(j,C,h,p);else for(var R=j.length-1;R>=0;R--)(f=j[R])&&(w=(g<3?f(w):g>3?f(C,h,w):f(C,h))||w);return g>3&&w&&Object.defineProperty(C,h,w),w},v=this&&this.__param||function(j,C){return function(h,p){C(h,p,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const d=c(4725),y=c(9806);let _=l.MouseService=class{constructor(j,C){this._renderService=j,this._charSizeService=C}getCoords(j,C,h,p,f){return(0,y.getCoords)(window,j,C,h,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(j,C){const h=(0,y.getCoordsRelativeToElement)(window,j,C);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};l.MouseService=_=x([v(0,d.IRenderService),v(1,d.ICharSizeService)],_)},3230:function(b,l,c){var x=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var P=f.length-1;P>=0;P--)(A=f[P])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const d=c(6193),y=c(4725),_=c(8460),j=c(844),C=c(7226),h=c(2585);let p=l.RenderService=class extends j.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,g,w,R,A,z,E,P){super(),this._rowCount=f,this._charSizeService=R,this._renderer=this.register(new j.MutableDisposable),this._pausedResizeTask=new C.DebouncedIdleTask,this._observerDisposable=this.register(new j.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer(((O,H)=>this._renderRows(O,H)),E),this.register(this._renderDebouncer),this.register(E.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(z.onResize((()=>this._fullRefresh()))),this.register(z.buffers.onBufferActivate((()=>{var O;return(O=this._renderer.value)==null?void 0:O.clear()}))),this.register(w.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(A.onDecorationRegistered((()=>this._fullRefresh()))),this.register(A.onDecorationRemoved((()=>this._fullRefresh()))),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(z.cols,z.rows),this._fullRefresh()}))),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(z.buffer.y,z.buffer.y,!0)))),this.register(P.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(E.window,g),this.register(E.onWindowChange((O=>this._registerIntersectionObserver(O,g))))}_registerIntersectionObserver(f,g){if("IntersectionObserver"in f){const w=new f.IntersectionObserver((R=>this._handleIntersectionChange(R[R.length-1])),{threshold:0});w.observe(g),this._observerDisposable.value=(0,j.toDisposable)((()=>w.disconnect()))}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,g,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,g,this._rowCount))}_renderRows(f,g){this._renderer.value&&(f=Math.min(f,this._rowCount-1),g=Math.min(g,this._rowCount-1),this._renderer.value.renderRows(f,g),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:g}),this._onRender.fire({start:f,end:g}),this._isNextRenderRedrawOnly=!0)}resize(f,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value&&(this._renderer.value.onRequestRedraw((g=>this.refreshRows(g.start,g.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,g;this._renderer.value&&((g=(f=this._renderer.value).clearTextureAtlas)==null||g.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,g){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var w;return(w=this._renderer.value)==null?void 0:w.handleResize(f,g)})):this._renderer.value.handleResize(f,g),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)==null||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)==null||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)==null||f.handleFocus()}handleSelectionChanged(f,g,w){var R;this._selectionState.start=f,this._selectionState.end=g,this._selectionState.columnSelectMode=w,(R=this._renderer.value)==null||R.handleSelectionChanged(f,g,w)}handleCursorMove(){var f;(f=this._renderer.value)==null||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)==null||f.clear()}};l.RenderService=p=x([v(2,h.IOptionsService),v(3,y.ICharSizeService),v(4,h.IDecorationService),v(5,h.IBufferService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],p)},9312:function(b,l,c){var x=this&&this.__decorate||function(E,P,O,H){var K,U=arguments.length,te=U<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,O):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(E,P,O,H);else for(var V=E.length-1;V>=0;V--)(K=E[V])&&(te=(U<3?K(te):U>3?K(P,O,te):K(P,O))||te);return U>3&&te&&Object.defineProperty(P,O,te),te},v=this&&this.__param||function(E,P){return function(O,H){P(O,H,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const d=c(9806),y=c(9504),_=c(456),j=c(4725),C=c(8460),h=c(844),p=c(6114),f=c(4841),g=c(511),w=c(2585),R="",A=new RegExp(R,"g");let z=l.SelectionService=class extends h.Disposable{constructor(E,P,O,H,K,U,te,V,de){super(),this._element=E,this._screenElement=P,this._linkifier=O,this._bufferService=H,this._coreService=K,this._mouseService=U,this._optionsService=te,this._renderService=V,this._coreBrowserService=de,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new g.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new C.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new C.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new C.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((Q=>this._handleTrim(Q))),this.register(this._bufferService.buffers.onBufferActivate((Q=>this._handleBufferActivate(Q)))),this.enable(),this._model=new _.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const E=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!E||!P||E[0]===P[0]&&E[1]===P[1])}get selectionText(){const E=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;if(!E||!P)return"";const O=this._bufferService.buffer,H=[];if(this._activeSelectionMode===3){if(E[0]===P[0])return"";const K=E[0]<P[0]?E[0]:P[0],U=E[0]<P[0]?P[0]:E[0];for(let te=E[1];te<=P[1];te++){const V=O.translateBufferLineToString(te,!0,K,U);H.push(V)}}else{const K=E[1]===P[1]?P[0]:void 0;H.push(O.translateBufferLineToString(E[1],!0,E[0],K));for(let U=E[1]+1;U<=P[1]-1;U++){const te=O.lines.get(U),V=O.translateBufferLineToString(U,!0);te!=null&&te.isWrapped?H[H.length-1]+=V:H.push(V)}if(E[1]!==P[1]){const U=O.lines.get(P[1]),te=O.translateBufferLineToString(P[1],!0,0,P[0]);U&&U.isWrapped?H[H.length-1]+=te:H.push(te)}}return H.map((K=>K.replace(A," "))).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),p.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){const P=this._getMouseBufferCoords(E),O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!!(O&&H&&P)&&this._areCoordsInSelection(P,O,H)}isCellInSelection(E,P){const O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!(!O||!H)&&this._areCoordsInSelection([E,P],O,H)}_areCoordsInSelection(E,P,O){return E[1]>P[1]&&E[1]<O[1]||P[1]===O[1]&&E[1]===P[1]&&E[0]>=P[0]&&E[0]<O[0]||P[1]<O[1]&&E[1]===O[1]&&E[0]<O[0]||P[1]<O[1]&&E[1]===P[1]&&E[0]>=P[0]}_selectWordAtCursor(E,P){var K,U;const O=(U=(K=this._linkifier.currentLink)==null?void 0:K.link)==null?void 0:U.range;if(O)return this._model.selectionStart=[O.start.x-1,O.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(O,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const H=this._getMouseBufferCoords(E);return!!H&&(this._selectWordAt(H,P),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,P){this._model.clearSelection(),E=Math.max(E,0),P=Math.min(P,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,P],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){const P=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(P)return P[0]--,P[1]--,P[1]+=this._bufferService.buffer.ydisp,P}_getMouseEventScrollAmount(E){let P=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1];const O=this._renderService.dimensions.css.canvas.height;return P>=0&&P<=O?0:(P>O&&(P-=O),P=Math.min(Math.max(P,-50),50),P/=50,P/Math.abs(P)+Math.round(14*P))}shouldForceSelection(E){return p.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const P=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);P&&P.length!==this._model.selectionStart[0]&&P.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){const P=this._getMouseBufferCoords(E);P&&(this._activeSelectionMode=2,this._selectLineAt(P[1]))}shouldColumnSelect(E){return E.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;const P=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){const H=O.lines.get(this._model.selectionEnd[1]);H&&H.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}P&&P[0]===this._model.selectionEnd[0]&&P[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){const P=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&P<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const O=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){const H=(0,y.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(H,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const E=this._model.finalSelectionStart,P=this._model.finalSelectionEnd,O=!(!E||!P||E[0]===P[0]&&E[1]===P[1]);O?E&&P&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&P[0]===this._oldSelectionEnd[0]&&P[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,P,O)):this._oldHasSelection&&this._fireOnSelectionChange(E,P,O)}_fireOnSelectionChange(E,P,O){this._oldSelectionStart=E,this._oldSelectionEnd=P,this._oldHasSelection=O,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim((P=>this._handleTrim(P)))}_convertViewportColToCharacterIndex(E,P){let O=P;for(let H=0;P>=H;H++){const K=E.loadCell(H,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:K>1&&P!==H&&(O+=K-1)}return O}setSelection(E,P,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,P],this._model.selectionStartLength=O,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,P,O=!0,H=!0){if(E[0]>=this._bufferService.cols)return;const K=this._bufferService.buffer,U=K.lines.get(E[1]);if(!U)return;const te=K.translateBufferLineToString(E[1],!1);let V=this._convertViewportColToCharacterIndex(U,E[0]),de=V;const Q=E[0]-V;let Y=0,B=0,D=0,M=0;if(te.charAt(V)===" "){for(;V>0&&te.charAt(V-1)===" ";)V--;for(;de<te.length&&te.charAt(de+1)===" ";)de++}else{let me=E[0],we=E[0];U.getWidth(me)===0&&(Y++,me--),U.getWidth(we)===2&&(B++,we++);const Re=U.getString(we).length;for(Re>1&&(M+=Re-1,de+=Re-1);me>0&&V>0&&!this._isCharWordSeparator(U.loadCell(me-1,this._workCell));){U.loadCell(me-1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,me--):X>1&&(D+=X-1,V-=X-1),V--,me--}for(;we<U.length&&de+1<te.length&&!this._isCharWordSeparator(U.loadCell(we+1,this._workCell));){U.loadCell(we+1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,we++):X>1&&(M+=X-1,de+=X-1),de++,we++}}de++;let W=V+Q-Y+D,pe=Math.min(this._bufferService.cols,de-V+Y+B-D-M);if(P||te.slice(V,de).trim()!==""){if(O&&W===0&&U.getCodePoint(0)!==32){const me=K.lines.get(E[1]-1);if(me&&U.isWrapped&&me.getCodePoint(this._bufferService.cols-1)!==32){const we=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(we){const Re=this._bufferService.cols-we.start;W-=Re,pe+=Re}}}if(H&&W+pe===this._bufferService.cols&&U.getCodePoint(this._bufferService.cols-1)!==32){const me=K.lines.get(E[1]+1);if(me!=null&&me.isWrapped&&me.getCodePoint(0)!==32){const we=this._getWordAt([0,E[1]+1],!1,!1,!0);we&&(pe+=we.length)}}return{start:W,length:pe}}}_selectWordAt(E,P){const O=this._getWordAt(E,P);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[O.start,E[1]],this._model.selectionStartLength=O.length}}_selectToWordAt(E){const P=this._getWordAt(E,!0);if(P){let O=E[1];for(;P.start<0;)P.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;P.start+P.length>this._bufferService.cols;)P.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?P.start:P.start+P.length,O]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){const P=this._bufferService.buffer.getWrappedRangeForLine(E),O={start:{x:0,y:P.first},end:{x:this._bufferService.cols-1,y:P.last}};this._model.selectionStart=[0,P.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(O,this._bufferService.cols)}};l.SelectionService=z=x([v(3,w.IBufferService),v(4,w.ICoreService),v(5,j.IMouseService),v(6,w.IOptionsService),v(7,j.IRenderService),v(8,j.ICoreBrowserService)],z)},4725:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const x=c(8343);l.ICharSizeService=(0,x.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,x.createDecorator)("CoreBrowserService"),l.IMouseService=(0,x.createDecorator)("MouseService"),l.IRenderService=(0,x.createDecorator)("RenderService"),l.ISelectionService=(0,x.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,x.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,x.createDecorator)("ThemeService"),l.ILinkProviderService=(0,x.createDecorator)("LinkProviderService")},6731:function(b,l,c){var x=this&&this.__decorate||function(z,E,P,O){var H,K=arguments.length,U=K<3?E:O===null?O=Object.getOwnPropertyDescriptor(E,P):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(z,E,P,O);else for(var te=z.length-1;te>=0;te--)(H=z[te])&&(U=(K<3?H(U):K>3?H(E,P,U):H(E,P))||U);return K>3&&U&&Object.defineProperty(E,P,U),U},v=this&&this.__param||function(z,E){return function(P,O){E(P,O,z)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),y=c(8055),_=c(8460),j=c(844),C=c(2585),h=y.css.toColor("#ffffff"),p=y.css.toColor("#000000"),f=y.css.toColor("#ffffff"),g=y.css.toColor("#000000"),w={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const z=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let P=0;P<216;P++){const O=E[P/36%6|0],H=E[P/6%6|0],K=E[P%6];z.push({css:y.channels.toCss(O,H,K),rgba:y.channels.toRgba(O,H,K)})}for(let P=0;P<24;P++){const O=8+10*P;z.push({css:y.channels.toCss(O,O,O),rgba:y.channels.toRgba(O,O,O)})}return z})());let R=l.ThemeService=class extends j.Disposable{get colors(){return this._colors}constructor(z){super(),this._optionsService=z,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new _.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:p,cursor:f,cursorAccent:g,selectionForeground:void 0,selectionBackgroundTransparent:w,selectionBackgroundOpaque:y.color.blend(p,w),selectionInactiveBackgroundTransparent:w,selectionInactiveBackgroundOpaque:y.color.blend(p,w),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(z={}){const E=this._colors;if(E.foreground=A(z.foreground,h),E.background=A(z.background,p),E.cursor=A(z.cursor,f),E.cursorAccent=A(z.cursorAccent,g),E.selectionBackgroundTransparent=A(z.selectionBackground,w),E.selectionBackgroundOpaque=y.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=A(z.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=y.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=z.selectionForeground?A(z.selectionForeground,y.NULL_COLOR):void 0,E.selectionForeground===y.NULL_COLOR&&(E.selectionForeground=void 0),y.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=y.color.opacity(E.selectionBackgroundTransparent,.3)),y.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=y.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=l.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=A(z.black,l.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=A(z.red,l.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=A(z.green,l.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=A(z.yellow,l.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=A(z.blue,l.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=A(z.magenta,l.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=A(z.cyan,l.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=A(z.white,l.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=A(z.brightBlack,l.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=A(z.brightRed,l.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=A(z.brightGreen,l.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=A(z.brightYellow,l.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=A(z.brightBlue,l.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=A(z.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=A(z.brightCyan,l.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=A(z.brightWhite,l.DEFAULT_ANSI_COLORS[15]),z.extendedAnsi){const P=Math.min(E.ansi.length-16,z.extendedAnsi.length);for(let O=0;O<P;O++)E.ansi[O+16]=A(z.extendedAnsi[O],l.DEFAULT_ANSI_COLORS[O+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(z){this._restoreColor(z),this._onChangeColors.fire(this.colors)}_restoreColor(z){if(z!==void 0)switch(z){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[z]=this._restoreColors.ansi[z]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(z){z(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function A(z,E){if(z!==void 0)try{return y.css.toColor(z)}catch{}return E}l.ThemeService=R=x([v(0,C.IOptionsService)],R)},6349:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const x=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._maxLength=_,this.onDeleteEmitter=this.register(new x.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new x.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new x.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(_){if(this._maxLength===_)return;const j=new Array(_);for(let C=0;C<Math.min(_,this.length);C++)j[C]=this._array[this._getCyclicIndex(C)];this._array=j,this._maxLength=_,this._startIndex=0}get length(){return this._length}set length(_){if(_>this._length)for(let j=this._length;j<_;j++)this._array[j]=void 0;this._length=_}get(_){return this._array[this._getCyclicIndex(_)]}set(_,j){this._array[this._getCyclicIndex(_)]=j}push(_){this._array[this._getCyclicIndex(this._length)]=_,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(_,j,...C){if(j){for(let h=_;h<this._length-j;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+j)];this._length-=j,this.onDeleteEmitter.fire({index:_,amount:j})}for(let h=this._length-1;h>=_;h--)this._array[this._getCyclicIndex(h+C.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<C.length;h++)this._array[this._getCyclicIndex(_+h)]=C[h];if(C.length&&this.onInsertEmitter.fire({index:_,amount:C.length}),this._length+C.length>this._maxLength){const h=this._length+C.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=C.length}trimStart(_){_>this._length&&(_=this._length),this._startIndex+=_,this._length-=_,this.onTrimEmitter.fire(_)}shiftElements(_,j,C){if(!(j<=0)){if(_<0||_>=this._length)throw new Error("start argument out of range");if(_+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(let p=j-1;p>=0;p--)this.set(_+p+C,this.get(_+p));const h=_+j+C-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<j;h++)this.set(_+h+C,this.get(_+h))}}_getCyclicIndex(_){return(this._startIndex+_)%this._maxLength}}l.CircularList=d},1439:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function c(x,v=5){if(typeof x!="object")return x;const d=Array.isArray(x)?[]:{};for(const y in x)d[y]=v<=1?x[y]:x[y]&&c(x[y],v-1);return d}},8055:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let c=0,x=0,v=0,d=0;var y,_,j,C,h;function p(g){const w=g.toString(16);return w.length<2?"0"+w:w}function f(g,w){return g<w?(w+.05)/(g+.05):(g+.05)/(w+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(g){g.toCss=function(w,R,A,z){return z!==void 0?`#${p(w)}${p(R)}${p(A)}${p(z)}`:`#${p(w)}${p(R)}${p(A)}`},g.toRgba=function(w,R,A,z=255){return(w<<24|R<<16|A<<8|z)>>>0},g.toColor=function(w,R,A,z){return{css:g.toCss(w,R,A,z),rgba:g.toRgba(w,R,A,z)}}})(y||(l.channels=y={})),(function(g){function w(R,A){return d=Math.round(255*A),[c,x,v]=h.toChannels(R.rgba),{css:y.toCss(c,x,v,d),rgba:y.toRgba(c,x,v,d)}}g.blend=function(R,A){if(d=(255&A.rgba)/255,d===1)return{css:A.css,rgba:A.rgba};const z=A.rgba>>24&255,E=A.rgba>>16&255,P=A.rgba>>8&255,O=R.rgba>>24&255,H=R.rgba>>16&255,K=R.rgba>>8&255;return c=O+Math.round((z-O)*d),x=H+Math.round((E-H)*d),v=K+Math.round((P-K)*d),{css:y.toCss(c,x,v),rgba:y.toRgba(c,x,v)}},g.isOpaque=function(R){return(255&R.rgba)==255},g.ensureContrastRatio=function(R,A,z){const E=h.ensureContrastRatio(R.rgba,A.rgba,z);if(E)return y.toColor(E>>24&255,E>>16&255,E>>8&255)},g.opaque=function(R){const A=(255|R.rgba)>>>0;return[c,x,v]=h.toChannels(A),{css:y.toCss(c,x,v),rgba:A}},g.opacity=w,g.multiplyOpacity=function(R,A){return d=255&R.rgba,w(R,d*A/255)},g.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}})(_||(l.color=_={})),(function(g){let w,R;try{const A=document.createElement("canvas");A.width=1,A.height=1;const z=A.getContext("2d",{willReadFrequently:!0});z&&(w=z,w.globalCompositeOperation="copy",R=w.createLinearGradient(0,0,1,1))}catch{}g.toColor=function(A){if(A.match(/#[\da-f]{3,8}/i))switch(A.length){case 4:return c=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),y.toColor(c,x,v);case 5:return c=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),d=parseInt(A.slice(4,5).repeat(2),16),y.toColor(c,x,v,d);case 7:return{css:A,rgba:(parseInt(A.slice(1),16)<<8|255)>>>0};case 9:return{css:A,rgba:parseInt(A.slice(1),16)>>>0}}const z=A.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(z)return c=parseInt(z[1]),x=parseInt(z[2]),v=parseInt(z[3]),d=Math.round(255*(z[5]===void 0?1:parseFloat(z[5]))),y.toColor(c,x,v,d);if(!w||!R)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=R,w.fillStyle=A,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[c,x,v,d]=w.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(c,x,v,d),css:A}}})(j||(l.css=j={})),(function(g){function w(R,A,z){const E=R/255,P=A/255,O=z/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}g.relativeLuminance=function(R){return w(R>>16&255,R>>8&255,255&R)},g.relativeLuminance2=w})(C||(l.rgb=C={})),(function(g){function w(A,z,E){const P=A>>24&255,O=A>>16&255,H=A>>8&255;let K=z>>24&255,U=z>>16&255,te=z>>8&255,V=f(C.relativeLuminance2(K,U,te),C.relativeLuminance2(P,O,H));for(;V<E&&(K>0||U>0||te>0);)K-=Math.max(0,Math.ceil(.1*K)),U-=Math.max(0,Math.ceil(.1*U)),te-=Math.max(0,Math.ceil(.1*te)),V=f(C.relativeLuminance2(K,U,te),C.relativeLuminance2(P,O,H));return(K<<24|U<<16|te<<8|255)>>>0}function R(A,z,E){const P=A>>24&255,O=A>>16&255,H=A>>8&255;let K=z>>24&255,U=z>>16&255,te=z>>8&255,V=f(C.relativeLuminance2(K,U,te),C.relativeLuminance2(P,O,H));for(;V<E&&(K<255||U<255||te<255);)K=Math.min(255,K+Math.ceil(.1*(255-K))),U=Math.min(255,U+Math.ceil(.1*(255-U))),te=Math.min(255,te+Math.ceil(.1*(255-te))),V=f(C.relativeLuminance2(K,U,te),C.relativeLuminance2(P,O,H));return(K<<24|U<<16|te<<8|255)>>>0}g.blend=function(A,z){if(d=(255&z)/255,d===1)return z;const E=z>>24&255,P=z>>16&255,O=z>>8&255,H=A>>24&255,K=A>>16&255,U=A>>8&255;return c=H+Math.round((E-H)*d),x=K+Math.round((P-K)*d),v=U+Math.round((O-U)*d),y.toRgba(c,x,v)},g.ensureContrastRatio=function(A,z,E){const P=C.relativeLuminance(A>>8),O=C.relativeLuminance(z>>8);if(f(P,O)<E){if(O<P){const U=w(A,z,E),te=f(P,C.relativeLuminance(U>>8));if(te<E){const V=R(A,z,E);return te>f(P,C.relativeLuminance(V>>8))?U:V}return U}const H=R(A,z,E),K=f(P,C.relativeLuminance(H>>8));if(K<E){const U=w(A,z,E);return K>f(P,C.relativeLuminance(U>>8))?H:U}return H}},g.reduceLuminance=w,g.increaseLuminance=R,g.toChannels=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]}})(h||(l.rgba=h={})),l.toPaddedHex=p,l.contrastRatio=f},8969:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const x=c(844),v=c(2585),d=c(4348),y=c(7866),_=c(744),j=c(7302),C=c(6975),h=c(8460),p=c(1753),f=c(1480),g=c(7994),w=c(9282),R=c(5435),A=c(5981),z=c(2660);let E=!1;class P extends x.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event((H=>{var K;(K=this._onScrollApi)==null||K.fire(H.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(H){for(const K in H)this.optionsService.options[K]=H[K]}constructor(H){super(),this._windowsWrappingHeuristics=this.register(new x.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new j.OptionsService(H)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(_.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(C.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(g.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(z.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new R.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new A.WriteBuffer(((K,U)=>this._inputHandler.parse(K,U)))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(H,K){this._writeBuffer.write(H,K)}writeSync(H,K){this._logService.logLevel<=v.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(H,K)}input(H,K=!0){this.coreService.triggerDataEvent(H,K)}resize(H,K){isNaN(H)||isNaN(K)||(H=Math.max(H,_.MINIMUM_COLS),K=Math.max(K,_.MINIMUM_ROWS),this._bufferService.resize(H,K))}scroll(H,K=!1){this._bufferService.scroll(H,K)}scrollLines(H,K,U){this._bufferService.scrollLines(H,K,U)}scrollPages(H){this.scrollLines(H*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(H){const K=H-this._bufferService.buffer.ydisp;K!==0&&this.scrollLines(K)}registerEscHandler(H,K){return this._inputHandler.registerEscHandler(H,K)}registerDcsHandler(H,K){return this._inputHandler.registerDcsHandler(H,K)}registerCsiHandler(H,K){return this._inputHandler.registerCsiHandler(H,K)}registerOscHandler(H,K){return this._inputHandler.registerOscHandler(H,K)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let H=!1;const K=this.optionsService.rawOptions.windowsPty;K&&K.buildNumber!==void 0&&K.buildNumber!==void 0?H=K.backend==="conpty"&&K.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(H=!0),H?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const H=[];H.push(this.onLineFeed(w.updateWindowsModeWrappedState.bind(null,this._bufferService))),H.push(this.registerCsiHandler({final:"H"},(()=>((0,w.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,x.toDisposable)((()=>{for(const K of H)K.dispose()}))}}}l.CoreTerminal=P},8460:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let x=0;x<this._listeners.length;x++)if(this._listeners[x]===c)return void this._listeners.splice(x,1)}}})),this._event}fire(c,x){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,x)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(c,x){return c((v=>x.fire(v)))},l.runAndSubscribe=function(c,x){return x(void 0),c((v=>x(v)))}},5435:function(b,l,c){var x=this&&this.__decorate||function(Y,B,D,M){var W,pe=arguments.length,me=pe<3?B:M===null?M=Object.getOwnPropertyDescriptor(B,D):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(Y,B,D,M);else for(var we=Y.length-1;we>=0;we--)(W=Y[we])&&(me=(pe<3?W(me):pe>3?W(B,D,me):W(B,D))||me);return pe>3&&me&&Object.defineProperty(B,D,me),me},v=this&&this.__param||function(Y,B){return function(D,M){B(D,M,Y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const d=c(2584),y=c(7116),_=c(2015),j=c(844),C=c(482),h=c(8437),p=c(8460),f=c(643),g=c(511),w=c(3734),R=c(2585),A=c(1480),z=c(6242),E=c(6351),P=c(5941),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},H=131072;function K(Y,B){if(Y>24)return B.setWinLines||!1;switch(Y){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}var U;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let te=0;class V extends j.Disposable{getAttrData(){return this._curAttrData}constructor(B,D,M,W,pe,me,we,Re,X=new _.EscapeSequenceParser){super(),this._bufferService=B,this._charsetService=D,this._coreService=M,this._logService=W,this._optionsService=pe,this._oscLinkService=me,this._coreMouseService=we,this._unicodeService=Re,this._parser=X,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new C.StringToUtf32,this._utf8Decoder=new C.Utf8ToUtf32,this._workCell=new g.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new de(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((F=>this._activeBuffer=F.activeBuffer))),this._parser.setCsiHandlerFallback(((F,be)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:be.toArray()})})),this._parser.setEscHandlerFallback((F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})})),this._parser.setExecuteHandlerFallback((F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})})),this._parser.setOscHandlerFallback(((F,be,oe)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:be,data:oe})})),this._parser.setDcsHandlerFallback(((F,be,oe)=>{be==="HOOK"&&(oe=oe.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:be,payload:oe})})),this._parser.setPrintHandler(((F,be,oe)=>this.print(F,be,oe))),this._parser.registerCsiHandler({final:"@"},(F=>this.insertChars(F))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(F=>this.scrollLeft(F))),this._parser.registerCsiHandler({final:"A"},(F=>this.cursorUp(F))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(F=>this.scrollRight(F))),this._parser.registerCsiHandler({final:"B"},(F=>this.cursorDown(F))),this._parser.registerCsiHandler({final:"C"},(F=>this.cursorForward(F))),this._parser.registerCsiHandler({final:"D"},(F=>this.cursorBackward(F))),this._parser.registerCsiHandler({final:"E"},(F=>this.cursorNextLine(F))),this._parser.registerCsiHandler({final:"F"},(F=>this.cursorPrecedingLine(F))),this._parser.registerCsiHandler({final:"G"},(F=>this.cursorCharAbsolute(F))),this._parser.registerCsiHandler({final:"H"},(F=>this.cursorPosition(F))),this._parser.registerCsiHandler({final:"I"},(F=>this.cursorForwardTab(F))),this._parser.registerCsiHandler({final:"J"},(F=>this.eraseInDisplay(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(F=>this.eraseInDisplay(F,!0))),this._parser.registerCsiHandler({final:"K"},(F=>this.eraseInLine(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(F=>this.eraseInLine(F,!0))),this._parser.registerCsiHandler({final:"L"},(F=>this.insertLines(F))),this._parser.registerCsiHandler({final:"M"},(F=>this.deleteLines(F))),this._parser.registerCsiHandler({final:"P"},(F=>this.deleteChars(F))),this._parser.registerCsiHandler({final:"S"},(F=>this.scrollUp(F))),this._parser.registerCsiHandler({final:"T"},(F=>this.scrollDown(F))),this._parser.registerCsiHandler({final:"X"},(F=>this.eraseChars(F))),this._parser.registerCsiHandler({final:"Z"},(F=>this.cursorBackwardTab(F))),this._parser.registerCsiHandler({final:"`"},(F=>this.charPosAbsolute(F))),this._parser.registerCsiHandler({final:"a"},(F=>this.hPositionRelative(F))),this._parser.registerCsiHandler({final:"b"},(F=>this.repeatPrecedingCharacter(F))),this._parser.registerCsiHandler({final:"c"},(F=>this.sendDeviceAttributesPrimary(F))),this._parser.registerCsiHandler({prefix:">",final:"c"},(F=>this.sendDeviceAttributesSecondary(F))),this._parser.registerCsiHandler({final:"d"},(F=>this.linePosAbsolute(F))),this._parser.registerCsiHandler({final:"e"},(F=>this.vPositionRelative(F))),this._parser.registerCsiHandler({final:"f"},(F=>this.hVPosition(F))),this._parser.registerCsiHandler({final:"g"},(F=>this.tabClear(F))),this._parser.registerCsiHandler({final:"h"},(F=>this.setMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(F=>this.setModePrivate(F))),this._parser.registerCsiHandler({final:"l"},(F=>this.resetMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(F=>this.resetModePrivate(F))),this._parser.registerCsiHandler({final:"m"},(F=>this.charAttributes(F))),this._parser.registerCsiHandler({final:"n"},(F=>this.deviceStatus(F))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(F=>this.deviceStatusPrivate(F))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(F=>this.softReset(F))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(F=>this.setCursorStyle(F))),this._parser.registerCsiHandler({final:"r"},(F=>this.setScrollRegion(F))),this._parser.registerCsiHandler({final:"s"},(F=>this.saveCursor(F))),this._parser.registerCsiHandler({final:"t"},(F=>this.windowOptions(F))),this._parser.registerCsiHandler({final:"u"},(F=>this.restoreCursor(F))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(F=>this.insertColumns(F))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(F=>this.deleteColumns(F))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(F=>this.selectProtected(F))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(F=>this.requestMode(F,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(F=>this.requestMode(F,!1))),this._parser.setExecuteHandler(d.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(d.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(d.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(d.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(d.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(d.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(d.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(d.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(d.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new z.OscHandler((F=>(this.setTitle(F),this.setIconName(F),!0)))),this._parser.registerOscHandler(1,new z.OscHandler((F=>this.setIconName(F)))),this._parser.registerOscHandler(2,new z.OscHandler((F=>this.setTitle(F)))),this._parser.registerOscHandler(4,new z.OscHandler((F=>this.setOrReportIndexedColor(F)))),this._parser.registerOscHandler(8,new z.OscHandler((F=>this.setHyperlink(F)))),this._parser.registerOscHandler(10,new z.OscHandler((F=>this.setOrReportFgColor(F)))),this._parser.registerOscHandler(11,new z.OscHandler((F=>this.setOrReportBgColor(F)))),this._parser.registerOscHandler(12,new z.OscHandler((F=>this.setOrReportCursorColor(F)))),this._parser.registerOscHandler(104,new z.OscHandler((F=>this.restoreIndexedColor(F)))),this._parser.registerOscHandler(110,new z.OscHandler((F=>this.restoreFgColor(F)))),this._parser.registerOscHandler(111,new z.OscHandler((F=>this.restoreBgColor(F)))),this._parser.registerOscHandler(112,new z.OscHandler((F=>this.restoreCursorColor(F)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const F in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},(()=>this.selectCharset("("+F))),this._parser.registerEscHandler({intermediates:")",final:F},(()=>this.selectCharset(")"+F))),this._parser.registerEscHandler({intermediates:"*",final:F},(()=>this.selectCharset("*"+F))),this._parser.registerEscHandler({intermediates:"+",final:F},(()=>this.selectCharset("+"+F))),this._parser.registerEscHandler({intermediates:"-",final:F},(()=>this.selectCharset("-"+F))),this._parser.registerEscHandler({intermediates:".",final:F},(()=>this.selectCharset("."+F))),this._parser.registerEscHandler({intermediates:"/",final:F},(()=>this.selectCharset("/"+F)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((F=>(this._logService.error("Parsing error: ",F),F))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler(((F,be)=>this.requestStatusString(F,be))))}_preserveStack(B,D,M,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=M,this._parseStack.position=W}_logSlowResolvingAsync(B){this._logService.logLevel<=R.LogLevelEnum.WARN&&Promise.race([B,new Promise(((D,M)=>setTimeout((()=>M("#SLOW_TIMEOUT")),5e3)))]).catch((D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(B,D){let M,W=this._activeBuffer.x,pe=this._activeBuffer.y,me=0;const we=this._parseStack.paused;if(we){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(M),M;W=this._parseStack.cursorStartX,pe=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>H&&(me=this._parseStack.position+H)}if(this._logService.logLevel<=R.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?` "${B}"`:` "${Array.prototype.map.call(B,(F=>String.fromCharCode(F))).join("")}"`),typeof B=="string"?B.split("").map((F=>F.charCodeAt(0))):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<H&&(this._parseBuffer=new Uint32Array(Math.min(B.length,H))),we||this._dirtyRowTracker.clearRange(),B.length>H)for(let F=me;F<B.length;F+=H){const be=F+H<B.length?F+H:B.length,oe=typeof B=="string"?this._stringDecoder.decode(B.substring(F,be),this._parseBuffer):this._utf8Decoder.decode(B.subarray(F,be),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,oe))return this._preserveStack(W,pe,oe,F),this._logSlowResolvingAsync(M),M}else if(!we){const F=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,F))return this._preserveStack(W,pe,F,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===W&&this._activeBuffer.y===pe||this._onCursorMove.fire();const Re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),X=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);X<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(X,this._bufferService.rows-1),Math.min(Re,this._bufferService.rows-1))}print(B,D,M){let W,pe;const me=this._charsetService.charset,we=this._optionsService.rawOptions.screenReaderMode,Re=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,be=this._curAttrData;let oe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-D>0&&oe.getWidth(this._activeBuffer.x-1)===2&&oe.setCellFromCodepoint(this._activeBuffer.x-1,0,1,be);let De=this._parser.precedingJoinState;for(let ee=D;ee<M;++ee){if(W=B[ee],W<127&&me){const Oe=me[String.fromCharCode(W)];Oe&&(W=Oe.charCodeAt(0))}const ke=this._unicodeService.charProperties(W,De);pe=A.UnicodeService.extractWidth(ke);const he=A.UnicodeService.extractShouldJoin(ke),Ie=he?A.UnicodeService.extractWidth(De):0;if(De=ke,we&&this._onA11yChar.fire((0,C.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+pe-Ie>Re){if(X){const Oe=oe;let Pe=this._activeBuffer.x-Ie;for(this._activeBuffer.x=Ie,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),oe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ie>0&&oe instanceof h.BufferLine&&oe.copyCellsFrom(Oe,Pe,0,Ie,!1);Pe<Re;)Oe.setCellFromCodepoint(Pe++,0,1,be)}else if(this._activeBuffer.x=Re-1,pe===2)continue}if(he&&this._activeBuffer.x){const Oe=oe.getWidth(this._activeBuffer.x-1)?1:2;oe.addCodepointToCell(this._activeBuffer.x-Oe,W,pe);for(let Pe=pe-Ie;--Pe>=0;)oe.setCellFromCodepoint(this._activeBuffer.x++,0,0,be)}else if(F&&(oe.insertCells(this._activeBuffer.x,pe-Ie,this._activeBuffer.getNullCell(be)),oe.getWidth(Re-1)===2&&oe.setCellFromCodepoint(Re-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,be)),oe.setCellFromCodepoint(this._activeBuffer.x++,W,pe,be),pe>0)for(;--pe;)oe.setCellFromCodepoint(this._activeBuffer.x++,0,0,be)}this._parser.precedingJoinState=De,this._activeBuffer.x<Re&&M-D>0&&oe.getWidth(this._activeBuffer.x)===0&&!oe.hasContent(this._activeBuffer.x)&&oe.setCellFromCodepoint(this._activeBuffer.x,0,1,be),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(B,D){return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,D):this._parser.registerCsiHandler(B,(M=>!K(M.params[0],this._optionsService.rawOptions.windowOptions)||D(M)))}registerDcsHandler(B,D){return this._parser.registerDcsHandler(B,new E.DcsHandler(D))}registerEscHandler(B,D){return this._parser.registerEscHandler(B,D)}registerOscHandler(B,D){return this._parser.registerOscHandler(B,new z.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var B;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&B.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(B=this._bufferService.cols-1){this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(B,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=B,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(B,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+D)}cursorUp(B){const D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0}cursorDown(B){const D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0}cursorForward(B){return this._moveCursor(B.params[0]||1,0),!0}cursorBackward(B){return this._moveCursor(-(B.params[0]||1),0),!0}cursorNextLine(B){return this.cursorDown(B),this._activeBuffer.x=0,!0}cursorPrecedingLine(B){return this.cursorUp(B),this._activeBuffer.x=0,!0}cursorCharAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0}charPosAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(B){return this._moveCursor(B.params[0]||1,0),!0}linePosAbsolute(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0}vPositionRelative(B){return this._moveCursor(0,B.params[0]||1),!0}hVPosition(B){return this.cursorPosition(B),!0}tabClear(B){const D=B.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=B.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=B.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(B){const D=B.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(B,D,M,W=!1,pe=!1){const me=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);me.replaceCells(D,M,this._activeBuffer.getNullCell(this._eraseAttrData()),pe),W&&(me.isWrapped=!1)}_resetBufferLine(B,D=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+B),M.isWrapped=!1)}eraseInDisplay(B,D=!1){let M;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);M<this._bufferService.rows;M++)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(B,D=!1){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(B){this._restrictCursor();let D=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,pe=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;D--;)this._activeBuffer.lines.splice(pe-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(B){this._restrictCursor();let D=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;D--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(B){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(B){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(B){let D=B.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(B){let D=B.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=B.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);W.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=B.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);W.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=B.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);W.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=B.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);W.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(B){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(B){const D=this._parser.precedingJoinState;if(!D)return!0;const M=B.params[0]||1,W=A.UnicodeService.extractWidth(D),pe=this._activeBuffer.x-W,me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(pe),we=new Uint32Array(me.length*M);let Re=0;for(let F=0;F<me.length;){const be=me.codePointAt(F)||0;we[Re++]=be,F+=be>65535?2:1}let X=Re;for(let F=1;F<M;++F)we.copyWithin(X,0,Re),X+=Re;return this.print(we,0,X),!0}sendDeviceAttributesPrimary(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(B){return(this._optionsService.rawOptions.termName+"").indexOf(B)===0}setMode(B){for(let D=0;D<B.length;D++)switch(B.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(B){for(let D=0;D<B.length;D++)switch(B.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(B){for(let D=0;D<B.length;D++)switch(B.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(B){for(let D=0;D<B.length;D++)switch(B.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(B,D){const M=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:pe}=this._coreMouseService,me=this._coreService,{buffers:we,cols:Re}=this._bufferService,{active:X,alt:F}=we,be=this._optionsService.rawOptions,oe=he=>he?1:2,De=B.params[0];return ee=De,ke=D?De===2?4:De===4?oe(me.modes.insertMode):De===12?3:De===20?oe(be.convertEol):0:De===1?oe(M.applicationCursorKeys):De===3?be.windowOptions.setWinLines?Re===80?2:Re===132?1:0:0:De===6?oe(M.origin):De===7?oe(M.wraparound):De===8?3:De===9?oe(W==="X10"):De===12?oe(be.cursorBlink):De===25?oe(!me.isCursorHidden):De===45?oe(M.reverseWraparound):De===66?oe(M.applicationKeypad):De===67?4:De===1e3?oe(W==="VT200"):De===1002?oe(W==="DRAG"):De===1003?oe(W==="ANY"):De===1004?oe(M.sendFocus):De===1005?4:De===1006?oe(pe==="SGR"):De===1015?4:De===1016?oe(pe==="SGR_PIXELS"):De===1048?1:De===47||De===1047||De===1049?oe(X===F):De===2004?oe(M.bracketedPasteMode):0,me.triggerDataEvent(`${d.C0.ESC}[${D?"":"?"}${ee};${ke}$y`),!0;var ee,ke}_updateAttrColor(B,D,M,W,pe){return D===2?(B|=50331648,B&=-16777216,B|=w.AttributeData.fromColorRGB([M,W,pe])):D===5&&(B&=-50331904,B|=33554432|255&M),B}_extractColor(B,D,M){const W=[0,0,-1,0,0,0];let pe=0,me=0;do{if(W[me+pe]=B.params[D+me],B.hasSubParams(D+me)){const we=B.getSubParams(D+me);let Re=0;do W[1]===5&&(pe=1),W[me+Re+1+pe]=we[Re];while(++Re<we.length&&Re+me+1+pe<W.length);break}if(W[1]===5&&me+pe>=2||W[1]===2&&me+pe>=5)break;W[1]&&(pe=1)}while(++me+D<B.length&&me+pe<W.length);for(let we=2;we<W.length;++we)W[we]===-1&&(W[we]=0);switch(W[0]){case 38:M.fg=this._updateAttrColor(M.fg,W[1],W[3],W[4],W[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,W[1],W[3],W[4],W[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,W[1],W[3],W[4],W[5])}return me}_processUnderline(B,D){D.extended=D.extended.clone(),(!~B||B>5)&&(B=1),D.extended.underlineStyle=B,D.fg|=268435456,B===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(B){B.fg=h.DEFAULT_ATTR_DATA.fg,B.bg=h.DEFAULT_ATTR_DATA.bg,B.extended=B.extended.clone(),B.extended.underlineStyle=0,B.extended.underlineColor&=-67108864,B.updateExtended()}charAttributes(B){if(B.length===1&&B.params[0]===0)return this._processSGR0(this._curAttrData),!0;const D=B.length;let M;const W=this._curAttrData;for(let pe=0;pe<D;pe++)M=B.params[pe],M>=30&&M<=37?(W.fg&=-50331904,W.fg|=16777216|M-30):M>=40&&M<=47?(W.bg&=-50331904,W.bg|=16777216|M-40):M>=90&&M<=97?(W.fg&=-50331904,W.fg|=16777224|M-90):M>=100&&M<=107?(W.bg&=-50331904,W.bg|=16777224|M-100):M===0?this._processSGR0(W):M===1?W.fg|=134217728:M===3?W.bg|=67108864:M===4?(W.fg|=268435456,this._processUnderline(B.hasSubParams(pe)?B.getSubParams(pe)[0]:1,W)):M===5?W.fg|=536870912:M===7?W.fg|=67108864:M===8?W.fg|=1073741824:M===9?W.fg|=2147483648:M===2?W.bg|=134217728:M===21?this._processUnderline(2,W):M===22?(W.fg&=-134217729,W.bg&=-134217729):M===23?W.bg&=-67108865:M===24?(W.fg&=-268435457,this._processUnderline(0,W)):M===25?W.fg&=-536870913:M===27?W.fg&=-67108865:M===28?W.fg&=-1073741825:M===29?W.fg&=2147483647:M===39?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):M===49?(W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?pe+=this._extractColor(B,pe,W):M===53?W.bg|=1073741824:M===55?W.bg&=-1073741825:M===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):M===100?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const D=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${D};${M}R`)}return!0}deviceStatusPrivate(B){if(B.params[0]===6){const D=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${D};${M}R`)}return!0}softReset(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(B){const D=B.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=D%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(B){const D=B.params[0]||1;let M;return(B.length<2||(M=B.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(B){if(!K(B.params[0],this._optionsService.rawOptions.windowOptions))return!0;const D=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0}setIconName(B){return this._iconName=B,!0}setOrReportIndexedColor(B){const D=[],M=B.split(";");for(;M.length>1;){const W=M.shift(),pe=M.shift();if(/^\d+$/.exec(W)){const me=parseInt(W);if(Q(me))if(pe==="?")D.push({type:0,index:me});else{const we=(0,P.parseColor)(pe);we&&D.push({type:1,index:me,color:we})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(B){const D=B.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(B,D){this._getCurrentLinkId()&&this._finishHyperlink();const M=B.split(":");let W;const pe=M.findIndex((me=>me.startsWith("id=")));return pe!==-1&&(W=M[pe].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(B,D){const M=B.split(";");for(let W=0;W<M.length&&!(D>=this._specialColors.length);++W,++D)if(M[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{const pe=(0,P.parseColor)(M[W]);pe&&this._onColor.fire([{type:1,index:this._specialColors[D],color:pe}])}return!0}setOrReportFgColor(B){return this._setOrReportSpecialColor(B,0)}setOrReportBgColor(B){return this._setOrReportSpecialColor(B,1)}setOrReportCursorColor(B){return this._setOrReportSpecialColor(B,2)}restoreIndexedColor(B){if(!B)return this._onColor.fire([{type:2}]),!0;const D=[],M=B.split(";");for(let W=0;W<M.length;++W)if(/^\d+$/.exec(M[W])){const pe=parseInt(M[W]);Q(pe)&&D.push({type:2,index:pe})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(B){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(B){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(B){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(O[B[0]],y.CHARSETS[B[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(B){return this._charsetService.setgLevel(B),!0}screenAlignmentPattern(){const B=new g.CellData;B.content=4194373,B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){const M=this._activeBuffer.ybase+this._activeBuffer.y+D,W=this._activeBuffer.lines.get(M);W&&(W.fill(B),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(B,D){const M=this._bufferService.buffer,W=this._optionsService.rawOptions;return(pe=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${pe}${d.C0.ESC}\\`),!0))(B==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:B==='"p'?'P1$r61;1"p':B==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:B==="m"?"P1$r0m":B===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(B,D){this._dirtyRowTracker.markRangeDirty(B,D)}}l.InputHandler=V;let de=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,B){Y>B&&(te=Y,Y=B,B=te),Y<this.start&&(this.start=Y),B>this.end&&(this.end=B)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(Y){return 0<=Y&&Y<256}de=x([v(0,R.IBufferService)],de)},844:(b,l)=>{function c(x){for(const v of x)v.dispose();x.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const x of this._disposables)x.dispose();this._disposables.length=0}register(x){return this._disposables.push(x),x}unregister(x){const v=this._disposables.indexOf(x);v!==-1&&this._disposables.splice(v,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(x){var v;this._isDisposed||x===this._value||((v=this._value)==null||v.dispose(),this._value=x)}clear(){this.value=void 0}dispose(){var x;this._isDisposed=!0,(x=this._value)==null||x.dispose(),this._value=void 0}},l.toDisposable=function(x){return{dispose:x}},l.disposeArray=c,l.getDisposeArrayDisposable=function(x){return{dispose:()=>c(x)}}},1505:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,y){this._data[v]||(this._data[v]={}),this._data[v][d]=y}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}l.TwoKeyMap=c,l.FourKeyMap=class{constructor(){this._data=new c}set(x,v,d,y,_){this._data.get(x,v)||this._data.set(x,v,new c),this._data.get(x,v).set(d,y,_)}get(x,v,d,y){var _;return(_=this._data.get(x,v))==null?void 0:_.get(d,y)}clear(){this._data.clear()}}},6114:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const c=l.isNode?"node":navigator.userAgent,x=l.isNode?"node":navigator.platform;l.isFirefox=c.includes("Firefox"),l.isLegacyEdge=c.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(c),l.getSafariVersion=function(){if(!l.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(x),l.isIpad=x==="iPad",l.isIphone=x==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(x),l.isLinux=x.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(c)},6106:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let c=0;l.SortedList=class{constructor(x){this._getKey=x,this._array=[]}clear(){this._array.length=0}insert(x){this._array.length!==0?(c=this._search(this._getKey(x)),this._array.splice(c,0,x)):this._array.push(x)}delete(x){if(this._array.length===0)return!1;const v=this._getKey(x);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===x)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(x){if(this._array.length!==0&&(c=this._search(x),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===x))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===x)}forEachByKey(x,v){if(this._array.length!==0&&(c=this._search(x),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===x))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===x)}values(){return[...this._array].values()}_search(x){let v=0,d=this._array.length-1;for(;d>=v;){let y=v+d>>1;const _=this._getKey(this._array[y]);if(_>x)d=y-1;else{if(!(_<x)){for(;y>0&&this._getKey(this._array[y-1])===x;)y--;return y}v=y+1}}return v}}},7226:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const x=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let j=0,C=0,h=_.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(j=Date.now(),this._tasks[this._i]()||this._i++,j=Math.max(1,Date.now()-j),C=Math.max(j,C),p=_.timeRemaining(),1.5*C>p)return h-j<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-j))}ms`),void this._start();h=p}this.clear()}}class d extends v{_requestCallback(_){return setTimeout((()=>_(this._createDeadline(16))))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const j=Date.now()+_;return{timeRemaining:()=>Math.max(0,j-Date.now())}}}l.PriorityTaskQueue=d,l.IdleTaskQueue=!x.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:d,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const x=c(643);l.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),y=d==null?void 0:d.get(v.cols-1),_=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);_&&y&&(_.isWrapped=y[x.CHAR_DATA_CODE_INDEX]!==x.NULL_CELL_CODE&&y[x.CHAR_DATA_CODE_INDEX]!==x.WHITESPACE_CELL_CODE)}},3734:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new x}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=c;class x{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,y=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=y}clone(){return new x(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=x},9092:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const x=c(6349),v=c(7226),d=c(3734),y=c(8437),_=c(4634),j=c(511),C=c(643),h=c(4863),p=c(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(f,g,w){this._hasScrollback=f,this._optionsService=g,this._bufferService=w,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=j.CellData.fromCharData([0,C.NULL_CELL_CHAR,C.NULL_CELL_WIDTH,C.NULL_CELL_CODE]),this._whitespaceCell=j.CellData.fromCharData([0,C.WHITESPACE_CELL_CHAR,C.WHITESPACE_CELL_WIDTH,C.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new x.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,g){return new y.BufferLine(this._bufferService.cols,this.getNullCell(f),g)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;const g=f+this._optionsService.rawOptions.scrollback;return g>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:g}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=y.DEFAULT_ATTR_DATA);let g=this._rows;for(;g--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new x.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,g){const w=this.getNullCell(y.DEFAULT_ATTR_DATA);let R=0;const A=this._getCorrectBufferLength(g);if(A>this.lines.maxLength&&(this.lines.maxLength=A),this.lines.length>0){if(this._cols<f)for(let E=0;E<this.lines.length;E++)R+=+this.lines.get(E).resize(f,w);let z=0;if(this._rows<g)for(let E=this._rows;E<g;E++)this.lines.length<g+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(f,w)):this.ybase>0&&this.lines.length<=this.ybase+this.y+z+1?(this.ybase--,z++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(f,w)));else for(let E=this._rows;E>g;E--)this.lines.length>g+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(A<this.lines.maxLength){const E=this.lines.length-A;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=A}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,g-1),z&&(this.y+=z),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=g-1,this._isReflowEnabled&&(this._reflow(f,g),this._cols>f))for(let z=0;z<this.lines.length;z++)R+=+this.lines.get(z).resize(f,w);this._cols=f,this._rows=g,this._memoryCleanupQueue.clear(),R>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let g=0;for(;this._memoryCleanupPosition<this.lines.length;)if(g+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),g>100)return!0;return f}get _isReflowEnabled(){const f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,g){this._cols!==f&&(f>this._cols?this._reflowLarger(f,g):this._reflowSmaller(f,g))}_reflowLarger(f,g){const w=(0,_.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(w.length>0){const R=(0,_.reflowLargerCreateNewLayout)(this.lines,w);(0,_.reflowLargerApplyNewLayout)(this.lines,R.layout),this._reflowLargerAdjustViewport(f,g,R.countRemoved)}}_reflowLargerAdjustViewport(f,g,w){const R=this.getNullCell(y.DEFAULT_ATTR_DATA);let A=w;for(;A-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<g&&this.lines.push(new y.BufferLine(f,R))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-w,0)}_reflowSmaller(f,g){const w=this.getNullCell(y.DEFAULT_ATTR_DATA),R=[];let A=0;for(let z=this.lines.length-1;z>=0;z--){let E=this.lines.get(z);if(!E||!E.isWrapped&&E.getTrimmedLength()<=f)continue;const P=[E];for(;E.isWrapped&&z>0;)E=this.lines.get(--z),P.unshift(E);const O=this.ybase+this.y;if(O>=z&&O<z+P.length)continue;const H=P[P.length-1].getTrimmedLength(),K=(0,_.reflowSmallerGetNewLineLengths)(P,this._cols,f),U=K.length-P.length;let te;te=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);const V=[];for(let M=0;M<U;M++){const W=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);V.push(W)}V.length>0&&(R.push({start:z+P.length+A,newLines:V}),A+=V.length),P.push(...V);let de=K.length-1,Q=K[de];Q===0&&(de--,Q=K[de]);let Y=P.length-U-1,B=H;for(;Y>=0;){const M=Math.min(B,Q);if(P[de]===void 0)break;if(P[de].copyCellsFrom(P[Y],B-M,Q-M,M,!0),Q-=M,Q===0&&(de--,Q=K[de]),B-=M,B===0){Y--;const W=Math.max(Y,0);B=(0,_.getWrappedLineTrimmedLength)(P,W,this._cols)}}for(let M=0;M<P.length;M++)K[M]<f&&P[M].setCell(K[M],w);let D=U-te;for(;D-- >0;)this.ybase===0?this.y<g-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+A)-g&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+g-1)}if(R.length>0){const z=[],E=[];for(let de=0;de<this.lines.length;de++)E.push(this.lines.get(de));const P=this.lines.length;let O=P-1,H=0,K=R[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+A);let U=0;for(let de=Math.min(this.lines.maxLength-1,P+A-1);de>=0;de--)if(K&&K.start>O+U){for(let Q=K.newLines.length-1;Q>=0;Q--)this.lines.set(de--,K.newLines[Q]);de++,z.push({index:O+1,amount:K.newLines.length}),U+=K.newLines.length,K=R[++H]}else this.lines.set(de,E[O--]);let te=0;for(let de=z.length-1;de>=0;de--)z[de].index+=te,this.lines.onInsertEmitter.fire(z[de]),te+=z[de].amount;const V=Math.max(0,P+A-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(f,g,w=0,R){const A=this.lines.get(f);return A?A.translateToString(g,w,R):""}getWrappedRangeForLine(f){let g=f,w=f;for(;g>0&&this.lines.get(g).isWrapped;)g--;for(;w+1<this.lines.length&&this.lines.get(w+1).isWrapped;)w++;return{first:g,last:w}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].line===f&&(this.markers[g].dispose(),this.markers.splice(g--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){const g=new h.Marker(f);return this.markers.push(g),g.register(this.lines.onTrim((w=>{g.line-=w,g.line<0&&g.dispose()}))),g.register(this.lines.onInsert((w=>{g.line>=w.index&&(g.line+=w.amount)}))),g.register(this.lines.onDelete((w=>{g.line>=w.index&&g.line<w.index+w.amount&&g.dispose(),g.line>w.index&&(g.line-=w.amount)}))),g.register(g.onDispose((()=>this._removeMarker(g)))),g}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const x=c(3734),v=c(511),d=c(643),y=c(482);l.DEFAULT_ATTR_DATA=Object.freeze(new x.AttributeData);let _=0;class j{constructor(h,p,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const g=p||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let w=0;w<h;++w)this.setCell(w,g);this.length=h}get(h){const p=this._data[3*h+0],f=2097151&p;return[this._data[3*h+1],2097152&p?this._combined[h]:f?(0,y.stringFromCodePoint)(f):"",p>>22,2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):f]}set(h,p){this._data[3*h+1]=p[d.CHAR_DATA_ATTR_INDEX],p[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=p[1],this._data[3*h+0]=2097152|h|p[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&p}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h]:2097151&p?(0,y.stringFromCodePoint)(2097151&p):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,p){return _=3*h,p.content=this._data[_+0],p.fg=this._data[_+1],p.bg=this._data[_+2],2097152&p.content&&(p.combinedData=this._combined[h]),268435456&p.bg&&(p.extended=this._extendedAttrs[h]),p}setCell(h,p){2097152&p.content&&(this._combined[h]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[h]=p.extended),this._data[3*h+0]=p.content,this._data[3*h+1]=p.fg,this._data[3*h+2]=p.bg}setCellFromCodepoint(h,p,f,g){268435456&g.bg&&(this._extendedAttrs[h]=g.extended),this._data[3*h+0]=p|f<<22,this._data[3*h+1]=g.fg,this._data[3*h+2]=g.bg}addCodepointToCell(h,p,f){let g=this._data[3*h+0];2097152&g?this._combined[h]+=(0,y.stringFromCodePoint)(p):2097151&g?(this._combined[h]=(0,y.stringFromCodePoint)(2097151&g)+(0,y.stringFromCodePoint)(p),g&=-2097152,g|=2097152):g=p|4194304,f&&(g&=-12582913,g|=f<<22),this._data[3*h+0]=g}insertCells(h,p,f){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length-h){const g=new v.CellData;for(let w=this.length-h-p-1;w>=0;--w)this.setCell(h+p+w,this.loadCell(h+w,g));for(let w=0;w<p;++w)this.setCell(h+w,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,f)}deleteCells(h,p,f){if(h%=this.length,p<this.length-h){const g=new v.CellData;for(let w=0;w<this.length-h-p;++w)this.setCell(h+w,this.loadCell(h+p+w,g));for(let w=this.length-p;w<this.length;++w)this.setCell(w,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodepoint(h,0,1,f)}replaceCells(h,p,f,g=!1){if(g)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.isProtected(h)||this.setCell(h,f),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.setCell(h++,f)}resize(h,p){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const f=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{const g=new Uint32Array(f);g.set(this._data),this._data=g}for(let g=this.length;g<h;++g)this.setCell(g,p)}else{this._data=this._data.subarray(0,f);const g=Object.keys(this._combined);for(let R=0;R<g.length;R++){const A=parseInt(g[R],10);A>=h&&delete this._combined[A]}const w=Object.keys(this._extendedAttrs);for(let R=0;R<w.length;R++){const A=parseInt(w[R],10);A>=h&&delete this._extendedAttrs[A]}}return this.length=h,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,p=!1){if(p)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,h);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const p in h._combined)this._combined[p]=h._combined[p];this._extendedAttrs={};for(const p in h._extendedAttrs)this._extendedAttrs[p]=h._extendedAttrs[p];this.isWrapped=h.isWrapped}clone(){const h=new j(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const p in this._combined)h._combined[p]=this._combined[p];for(const p in this._extendedAttrs)h._extendedAttrs[p]=this._extendedAttrs[p];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,p,f,g,w){const R=h._data;if(w)for(let z=g-1;z>=0;z--){for(let E=0;E<3;E++)this._data[3*(f+z)+E]=R[3*(p+z)+E];268435456&R[3*(p+z)+2]&&(this._extendedAttrs[f+z]=h._extendedAttrs[p+z])}else for(let z=0;z<g;z++){for(let E=0;E<3;E++)this._data[3*(f+z)+E]=R[3*(p+z)+E];268435456&R[3*(p+z)+2]&&(this._extendedAttrs[f+z]=h._extendedAttrs[p+z])}const A=Object.keys(h._combined);for(let z=0;z<A.length;z++){const E=parseInt(A[z],10);E>=p&&(this._combined[E-p+f]=h._combined[E])}}translateToString(h,p,f,g){p=p??0,f=f??this.length,h&&(f=Math.min(f,this.getTrimmedLength())),g&&(g.length=0);let w="";for(;p<f;){const R=this._data[3*p+0],A=2097151&R,z=2097152&R?this._combined[p]:A?(0,y.stringFromCodePoint)(A):d.WHITESPACE_CELL_CHAR;if(w+=z,g)for(let E=0;E<z.length;++E)g.push(p);p+=R>>22||1}return g&&g.push(p),w}}l.BufferLine=j},4841:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(c,x){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return x*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(b,l)=>{function c(x,v,d){if(v===x.length-1)return x[v].getTrimmedLength();const y=!x[v].hasContent(d-1)&&x[v].getWidth(d-1)===1,_=x[v+1].getWidth(0)===2;return y&&_?d-1:d}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(x,v,d,y,_){const j=[];for(let C=0;C<x.length-1;C++){let h=C,p=x.get(++h);if(!p.isWrapped)continue;const f=[x.get(C)];for(;h<x.length&&p.isWrapped;)f.push(p),p=x.get(++h);if(y>=C&&y<h){C+=f.length-1;continue}let g=0,w=c(f,g,v),R=1,A=0;for(;R<f.length;){const E=c(f,R,v),P=E-A,O=d-w,H=Math.min(P,O);f[g].copyCellsFrom(f[R],A,w,H,!1),w+=H,w===d&&(g++,w=0),A+=H,A===E&&(R++,A=0),w===0&&g!==0&&f[g-1].getWidth(d-1)===2&&(f[g].copyCellsFrom(f[g-1],d-1,w++,1,!1),f[g-1].setCell(d-1,_))}f[g].replaceCells(w,d,_);let z=0;for(let E=f.length-1;E>0&&(E>g||f[E].getTrimmedLength()===0);E--)z++;z>0&&(j.push(C+f.length-z),j.push(z)),C+=f.length-1}return j},l.reflowLargerCreateNewLayout=function(x,v){const d=[];let y=0,_=v[y],j=0;for(let C=0;C<x.length;C++)if(_===C){const h=v[++y];x.onDeleteEmitter.fire({index:C-j,amount:h}),C+=h-1,j+=h,_=v[++y]}else d.push(C);return{layout:d,countRemoved:j}},l.reflowLargerApplyNewLayout=function(x,v){const d=[];for(let y=0;y<v.length;y++)d.push(x.get(v[y]));for(let y=0;y<d.length;y++)x.set(y,d[y]);x.length=v.length},l.reflowSmallerGetNewLineLengths=function(x,v,d){const y=[],_=x.map(((p,f)=>c(x,f,v))).reduce(((p,f)=>p+f));let j=0,C=0,h=0;for(;h<_;){if(_-h<d){y.push(_-h);break}j+=d;const p=c(x,C,v);j>p&&(j-=p,C++);const f=x[C].getWidth(j-1)===2;f&&j--;const g=f?d-1:d;y.push(g),h+=g}return y},l.getWrappedLineTrimmedLength=c},5295:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const x=c(8460),v=c(844),d=c(9092);class y extends v.Disposable{constructor(j,C){super(),this._optionsService=j,this._bufferService=C,this._onBufferActivate=this.register(new x.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(j){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(j),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(j,C){this._normal.resize(j,C),this._alt.resize(j,C),this.setupTabStops(j)}setupTabStops(j){this._normal.setupTabStops(j),this._alt.setupTabStops(j)}}l.BufferSet=y},511:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const x=c(482),v=c(643),d=c(3734);class y extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(j){const C=new y;return C.setFromCharData(j),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,x.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(j){this.fg=j[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(j[v.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(j[v.CHAR_DATA_CHAR_INDEX].length===2){const h=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const p=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(h-55296)+p-56320+65536|j[v.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|j[v.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=j[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|j[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=y},643:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const x=c(8460),v=c(844);class d{get id(){return this._id}constructor(_){this.line=_,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new x.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(_){return this._disposables.push(_),_}}l.Marker=d,d._nextId=1},7116:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(b,l)=>{var c,x,v;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""})(c||(l.C0=c={})),(function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""})(x||(l.C1=x={})),(function(d){d.ST=`${c.ESC}\\`})(v||(l.C1_ESCAPED=v={}))},7399:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const x=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(d,y,_,j){const C={type:0,cancel:!1,key:void 0},h=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?C.key=y?x.C0.ESC+"OA":x.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?C.key=y?x.C0.ESC+"OD":x.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?C.key=y?x.C0.ESC+"OC":x.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(C.key=y?x.C0.ESC+"OB":x.C0.ESC+"[B");break;case 8:C.key=d.ctrlKey?"\b":x.C0.DEL,d.altKey&&(C.key=x.C0.ESC+C.key);break;case 9:if(d.shiftKey){C.key=x.C0.ESC+"[Z";break}C.key=x.C0.HT,C.cancel=!0;break;case 13:C.key=d.altKey?x.C0.ESC+x.C0.CR:x.C0.CR,C.cancel=!0;break;case 27:C.key=x.C0.ESC,d.altKey&&(C.key=x.C0.ESC+x.C0.ESC),C.cancel=!0;break;case 37:if(d.metaKey)break;h?(C.key=x.C0.ESC+"[1;"+(h+1)+"D",C.key===x.C0.ESC+"[1;3D"&&(C.key=x.C0.ESC+(_?"b":"[1;5D"))):C.key=y?x.C0.ESC+"OD":x.C0.ESC+"[D";break;case 39:if(d.metaKey)break;h?(C.key=x.C0.ESC+"[1;"+(h+1)+"C",C.key===x.C0.ESC+"[1;3C"&&(C.key=x.C0.ESC+(_?"f":"[1;5C"))):C.key=y?x.C0.ESC+"OC":x.C0.ESC+"[C";break;case 38:if(d.metaKey)break;h?(C.key=x.C0.ESC+"[1;"+(h+1)+"A",_||C.key!==x.C0.ESC+"[1;3A"||(C.key=x.C0.ESC+"[1;5A")):C.key=y?x.C0.ESC+"OA":x.C0.ESC+"[A";break;case 40:if(d.metaKey)break;h?(C.key=x.C0.ESC+"[1;"+(h+1)+"B",_||C.key!==x.C0.ESC+"[1;3B"||(C.key=x.C0.ESC+"[1;5B")):C.key=y?x.C0.ESC+"OB":x.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(C.key=x.C0.ESC+"[2~");break;case 46:C.key=h?x.C0.ESC+"[3;"+(h+1)+"~":x.C0.ESC+"[3~";break;case 36:C.key=h?x.C0.ESC+"[1;"+(h+1)+"H":y?x.C0.ESC+"OH":x.C0.ESC+"[H";break;case 35:C.key=h?x.C0.ESC+"[1;"+(h+1)+"F":y?x.C0.ESC+"OF":x.C0.ESC+"[F";break;case 33:d.shiftKey?C.type=2:d.ctrlKey?C.key=x.C0.ESC+"[5;"+(h+1)+"~":C.key=x.C0.ESC+"[5~";break;case 34:d.shiftKey?C.type=3:d.ctrlKey?C.key=x.C0.ESC+"[6;"+(h+1)+"~":C.key=x.C0.ESC+"[6~";break;case 112:C.key=h?x.C0.ESC+"[1;"+(h+1)+"P":x.C0.ESC+"OP";break;case 113:C.key=h?x.C0.ESC+"[1;"+(h+1)+"Q":x.C0.ESC+"OQ";break;case 114:C.key=h?x.C0.ESC+"[1;"+(h+1)+"R":x.C0.ESC+"OR";break;case 115:C.key=h?x.C0.ESC+"[1;"+(h+1)+"S":x.C0.ESC+"OS";break;case 116:C.key=h?x.C0.ESC+"[15;"+(h+1)+"~":x.C0.ESC+"[15~";break;case 117:C.key=h?x.C0.ESC+"[17;"+(h+1)+"~":x.C0.ESC+"[17~";break;case 118:C.key=h?x.C0.ESC+"[18;"+(h+1)+"~":x.C0.ESC+"[18~";break;case 119:C.key=h?x.C0.ESC+"[19;"+(h+1)+"~":x.C0.ESC+"[19~";break;case 120:C.key=h?x.C0.ESC+"[20;"+(h+1)+"~":x.C0.ESC+"[20~";break;case 121:C.key=h?x.C0.ESC+"[21;"+(h+1)+"~":x.C0.ESC+"[21~";break;case 122:C.key=h?x.C0.ESC+"[23;"+(h+1)+"~":x.C0.ESC+"[23~";break;case 123:C.key=h?x.C0.ESC+"[24;"+(h+1)+"~":x.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(_&&!j||!d.altKey||d.metaKey)!_||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?C.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(C.key=x.C0.US),d.key==="@"&&(C.key=x.C0.NUL)):d.keyCode===65&&(C.type=1);else{const p=v[d.keyCode],f=p==null?void 0:p[d.shiftKey?1:0];if(f)C.key=x.C0.ESC+f;else if(d.keyCode>=65&&d.keyCode<=90){const g=d.ctrlKey?d.keyCode-64:d.keyCode+32;let w=String.fromCharCode(g);d.shiftKey&&(w=w.toUpperCase()),C.key=x.C0.ESC+w}else if(d.keyCode===32)C.key=x.C0.ESC+(d.ctrlKey?x.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let g=d.code.slice(3,4);d.shiftKey||(g=g.toLowerCase()),C.key=x.C0.ESC+g,C.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?C.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?C.key=x.C0.NUL:d.keyCode>=51&&d.keyCode<=55?C.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?C.key=x.C0.DEL:d.keyCode===219?C.key=x.C0.ESC:d.keyCode===220?C.key=x.C0.FS:d.keyCode===221&&(C.key=x.C0.GS)}return C}},482:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},l.utf32ToString=function(c,x=0,v=c.length){let d="";for(let y=x;y<v;++y){let _=c[y];_>65535?(_-=65536,d+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):d+=String.fromCharCode(_)}return d},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,x){const v=c.length;if(!v)return 0;let d=0,y=0;if(this._interim){const _=c.charCodeAt(y++);56320<=_&&_<=57343?x[d++]=1024*(this._interim-55296)+_-56320+65536:(x[d++]=this._interim,x[d++]=_),this._interim=0}for(let _=y;_<v;++_){const j=c.charCodeAt(_);if(55296<=j&&j<=56319){if(++_>=v)return this._interim=j,d;const C=c.charCodeAt(_);56320<=C&&C<=57343?x[d++]=1024*(j-55296)+C-56320+65536:(x[d++]=j,x[d++]=C)}else j!==65279&&(x[d++]=j)}return d}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,x){const v=c.length;if(!v)return 0;let d,y,_,j,C=0,h=0,p=0;if(this.interim[0]){let w=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let A,z=0;for(;(A=63&this.interim[++z])&&z<4;)R<<=6,R|=A;const E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,P=E-z;for(;p<P;){if(p>=v)return 0;if(A=c[p++],(192&A)!=128){p--,w=!0;break}this.interim[z++]=A,R<<=6,R|=63&A}w||(E===2?R<128?p--:x[C++]=R:E===3?R<2048||R>=55296&&R<=57343||R===65279||(x[C++]=R):R<65536||R>1114111||(x[C++]=R)),this.interim.fill(0)}const f=v-4;let g=p;for(;g<v;){for(;!(!(g<f)||128&(d=c[g])||128&(y=c[g+1])||128&(_=c[g+2])||128&(j=c[g+3]));)x[C++]=d,x[C++]=y,x[C++]=_,x[C++]=j,g+=4;if(d=c[g++],d<128)x[C++]=d;else if((224&d)==192){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(h=(31&d)<<6|63&y,h<128){g--;continue}x[C++]=h}else if((240&d)==224){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,C;if(_=c[g++],(192&_)!=128){g--;continue}if(h=(15&d)<<12|(63&y)<<6|63&_,h<2048||h>=55296&&h<=57343||h===65279)continue;x[C++]=h}else if((248&d)==240){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,C;if(_=c[g++],(192&_)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,this.interim[2]=_,C;if(j=c[g++],(192&j)!=128){g--;continue}if(h=(7&d)<<18|(63&y)<<12|(63&_)<<6|63&j,h<65536||h>1114111)continue;x[C++]=h}}return C}}},225:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const x=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let y;l.UnicodeV6=class{constructor(){if(this.version="6",!y){y=new Uint8Array(65536),y.fill(1),y[0]=0,y.fill(0,1,32),y.fill(0,127,160),y.fill(2,4352,4448),y[9001]=2,y[9002]=2,y.fill(2,11904,42192),y[12351]=1,y.fill(2,44032,55204),y.fill(2,63744,64256),y.fill(2,65040,65050),y.fill(2,65072,65136),y.fill(2,65280,65377),y.fill(2,65504,65511);for(let _=0;_<v.length;++_)y.fill(0,v[_][0],v[_][1]+1)}}wcwidth(_){return _<32?0:_<127?1:_<65536?y[_]:(function(j,C){let h,p=0,f=C.length-1;if(j<C[0][0]||j>C[f][1])return!1;for(;f>=p;)if(h=p+f>>1,j>C[h][1])p=h+1;else{if(!(j<C[h][0]))return!0;f=h-1}return!1})(_,d)?0:_>=131072&&_<=196605||_>=196608&&_<=262141?2:1}charProperties(_,j){let C=this.wcwidth(_),h=C===0&&j!==0;if(h){const p=x.UnicodeService.extractWidth(j);p===0?h=!1:p>C&&(C=p)}return x.UnicodeService.createPropertyValue(0,C,h)}}},5981:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const x=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new x.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(_,j){if(j!==void 0&&this._syncCalls>j)return void(this._syncCalls=0);if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let C;for(this._isSyncWriting=!0;C=this._writeBuffer.shift();){this._action(C);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(_,j){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j)}_innerWrite(_=0,j=!0){const C=_||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],p=this._action(h,j);if(p){const g=w=>Date.now()-C>=12?setTimeout((()=>this._innerWrite(0,w))):this._innerWrite(C,w);return void p.catch((w=>(queueMicrotask((()=>{throw w})),Promise.resolve(!1)))).then(g)}const f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=d},5941:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,x=/^[\da-f]+$/;function v(d,y){const _=d.toString(16),j=_.length<2?"0"+_:_;switch(y){case 4:return _[0];case 8:return j;case 12:return(j+j).slice(0,3);default:return j+j}}l.parseColor=function(d){if(!d)return;let y=d.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const _=c.exec(y);if(_){const j=_[1]?15:_[4]?255:_[7]?4095:65535;return[Math.round(parseInt(_[1]||_[4]||_[7]||_[10],16)/j*255),Math.round(parseInt(_[2]||_[5]||_[8]||_[11],16)/j*255),Math.round(parseInt(_[3]||_[6]||_[9]||_[12],16)/j*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),x.exec(y)&&[3,6,9,12].includes(y.length))){const _=y.length/3,j=[0,0,0];for(let C=0;C<3;++C){const h=parseInt(y.slice(_*C,_*C+_),16);j[C]=_===1?h<<4:_===2?h:_===3?h>>4:h>>8}return j}},l.toRgbString=function(d,y=16){const[_,j,C]=d;return`rgb:${v(_,y)}/${v(j,y)}/${v(C,y)}`}},5770:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const x=c(482),v=c(8742),d=c(5770),y=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(j,C){this._handlers[j]===void 0&&(this._handlers[j]=[]);const h=this._handlers[j];return h.push(C),{dispose:()=>{const p=h.indexOf(C);p!==-1&&h.splice(p,1)}}}clearHandler(j){this._handlers[j]&&delete this._handlers[j]}setHandlerFallback(j){this._handlerFb=j}reset(){if(this._active.length)for(let j=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;j>=0;--j)this._active[j].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(j,C){if(this.reset(),this._ident=j,this._active=this._handlers[j]||y,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(C);else this._handlerFb(this._ident,"HOOK",C)}put(j,C,h){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(j,C,h);else this._handlerFb(this._ident,"PUT",(0,x.utf32ToString)(j,C,h))}unhook(j,C=!0){if(this._active.length){let h=!1,p=this._active.length-1,f=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,h=C,f=this._stack.fallThrough,this._stack.paused=!1),!f&&h===!1){for(;p>=0&&(h=this._active[p].unhook(j),h!==!0);p--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,h;p--}for(;p>=0;p--)if(h=this._active[p].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",j);this._active=y,this._ident=0}};const _=new v.Params;_.addParam(0),l.DcsHandler=class{constructor(j){this._handler=j,this._data="",this._params=_,this._hitLimit=!1}hook(j){this._params=j.length>1||j.params[0]?j.clone():_,this._data="",this._hitLimit=!1}put(j,C,h){this._hitLimit||(this._data+=(0,x.utf32ToString)(j,C,h),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(j){let C=!1;if(this._hitLimit)C=!1;else if(j&&(C=this._handler(this._data,this._params),C instanceof Promise))return C.then((h=>(this._params=_,this._data="",this._hitLimit=!1,h)));return this._params=_,this._data="",this._hitLimit=!1,C}}},2015:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const x=c(844),v=c(8742),d=c(6242),y=c(6351);class _{constructor(p){this.table=new Uint8Array(p)}setDefault(p,f){this.table.fill(p<<4|f)}add(p,f,g,w){this.table[f<<8|p]=g<<4|w}addMany(p,f,g,w){for(let R=0;R<p.length;R++)this.table[f<<8|p[R]]=g<<4|w}}l.TransitionTable=_;const j=160;l.VT500_TRANSITION_TABLE=(function(){const h=new _(4095),p=Array.apply(null,Array(256)).map(((z,E)=>E)),f=(z,E)=>p.slice(z,E),g=f(32,127),w=f(0,24);w.push(25),w.push.apply(w,f(28,32));const R=f(0,14);let A;for(A in h.setDefault(1,0),h.addMany(g,0,2,0),R)h.addMany([24,26,153,154],A,3,0),h.addMany(f(128,144),A,3,0),h.addMany(f(144,152),A,3,0),h.add(156,A,0,0),h.add(27,A,11,1),h.add(157,A,4,8),h.addMany([152,158,159],A,0,7),h.add(155,A,11,3),h.add(144,A,11,9);return h.addMany(w,0,3,0),h.addMany(w,1,3,1),h.add(127,1,0,1),h.addMany(w,8,0,8),h.addMany(w,3,3,3),h.add(127,3,0,3),h.addMany(w,4,3,4),h.add(127,4,0,4),h.addMany(w,6,3,6),h.addMany(w,5,3,5),h.add(127,5,0,5),h.addMany(w,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(g,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(f(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(g,7,0,7),h.addMany(w,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(f(64,127),3,7,0),h.addMany(f(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(f(48,60),4,8,4),h.addMany(f(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(f(32,64),6,0,6),h.add(127,6,0,6),h.addMany(f(64,127),6,0,0),h.addMany(f(32,48),3,9,5),h.addMany(f(32,48),5,9,5),h.addMany(f(48,64),5,0,6),h.addMany(f(64,127),5,7,0),h.addMany(f(32,48),4,9,5),h.addMany(f(32,48),1,9,2),h.addMany(f(32,48),2,9,2),h.addMany(f(48,127),2,10,0),h.addMany(f(48,80),1,10,0),h.addMany(f(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(f(96,127),1,10,0),h.add(80,1,11,9),h.addMany(w,9,0,9),h.add(127,9,0,9),h.addMany(f(28,32),9,0,9),h.addMany(f(32,48),9,9,12),h.addMany(f(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(w,11,0,11),h.addMany(f(32,128),11,0,11),h.addMany(f(28,32),11,0,11),h.addMany(w,10,0,10),h.add(127,10,0,10),h.addMany(f(28,32),10,0,10),h.addMany(f(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(f(32,48),10,9,12),h.addMany(w,12,0,12),h.add(127,12,0,12),h.addMany(f(28,32),12,0,12),h.addMany(f(32,48),12,9,12),h.addMany(f(48,64),12,0,11),h.addMany(f(64,127),12,12,13),h.addMany(f(64,127),10,12,13),h.addMany(f(64,127),9,12,13),h.addMany(w,13,13,13),h.addMany(g,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(j,0,2,0),h.add(j,8,5,8),h.add(j,6,0,6),h.add(j,11,0,11),h.add(j,13,13,13),h})();class C extends x.Disposable{constructor(p=l.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(f,g,w)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,g)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,x.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(p,f=[64,126]){let g=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(g=p.prefix.charCodeAt(0),g&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let R=0;R<p.intermediates.length;++R){const A=p.intermediates.charCodeAt(R);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=A}}if(p.final.length!==1)throw new Error("final must be a single byte");const w=p.final.charCodeAt(0);if(f[0]>w||w>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return g<<=8,g|=w,g}identToString(p){const f=[];for(;p;)f.push(String.fromCharCode(255&p)),p>>=8;return f.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,f){const g=this._identifier(p,[48,126]);this._escHandlers[g]===void 0&&(this._escHandlers[g]=[]);const w=this._escHandlers[g];return w.push(f),{dispose:()=>{const R=w.indexOf(f);R!==-1&&w.splice(R,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,f){this._executeHandlers[p.charCodeAt(0)]=f}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,f){const g=this._identifier(p);this._csiHandlers[g]===void 0&&(this._csiHandlers[g]=[]);const w=this._csiHandlers[g];return w.push(f),{dispose:()=>{const R=w.indexOf(f);R!==-1&&w.splice(R,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,f){return this._dcsParser.registerHandler(this._identifier(p),f)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,f){return this._oscParser.registerHandler(p,f)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,f,g,w,R){this._parseStack.state=p,this._parseStack.handlers=f,this._parseStack.handlerPos=g,this._parseStack.transition=w,this._parseStack.chunkPos=R}parse(p,f,g){let w,R=0,A=0,z=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,z=this._parseStack.chunkPos+1;else{if(g===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const E=this._parseStack.handlers;let P=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(g===!1&&P>-1){for(;P>=0&&(w=E[P](this._params),w!==!0);P--)if(w instanceof Promise)return this._parseStack.handlerPos=P,w}this._parseStack.handlers=[];break;case 4:if(g===!1&&P>-1){for(;P>=0&&(w=E[P](),w!==!0);P--)if(w instanceof Promise)return this._parseStack.handlerPos=P,w}this._parseStack.handlers=[];break;case 6:if(R=p[this._parseStack.chunkPos],w=this._dcsParser.unhook(R!==24&&R!==26,g),w)return w;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(R=p[this._parseStack.chunkPos],w=this._oscParser.end(R!==24&&R!==26,g),w)return w;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,z=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let E=z;E<f;++E){switch(R=p[E],A=this._transitions.table[this.currentState<<8|(R<160?R:j)],A>>4){case 2:for(let U=E+1;;++U){if(U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}}break;case 3:this._executeHandlers[R]?this._executeHandlers[R]():this._executeHandlerFb(R),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:R,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const P=this._csiHandlers[this._collect<<8|R];let O=P?P.length-1:-1;for(;O>=0&&(w=P[O](this._params),w!==!0);O--)if(w instanceof Promise)return this._preserveStack(3,P,O,A,E),w;O<0&&this._csiHandlerFb(this._collect<<8|R,this._params),this.precedingJoinState=0;break;case 8:do switch(R){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(R-48)}while(++E<f&&(R=p[E])>47&&R<60);E--;break;case 9:this._collect<<=8,this._collect|=R;break;case 10:const H=this._escHandlers[this._collect<<8|R];let K=H?H.length-1:-1;for(;K>=0&&(w=H[K](),w!==!0);K--)if(w instanceof Promise)return this._preserveStack(4,H,K,A,E),w;K<0&&this._escHandlerFb(this._collect<<8|R),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|R,this._params);break;case 13:for(let U=E+1;;++U)if(U>=f||(R=p[U])===24||R===26||R===27||R>127&&R<j){this._dcsParser.put(p,E,U),E=U-1;break}break;case 14:if(w=this._dcsParser.unhook(R!==24&&R!==26),w)return this._preserveStack(6,[],0,A,E),w;R===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let U=E+1;;U++)if(U>=f||(R=p[U])<32||R>127&&R<j){this._oscParser.put(p,E,U),E=U-1;break}break;case 6:if(w=this._oscParser.end(R!==24&&R!==26),w)return this._preserveStack(5,[],0,A,E),w;R===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&A}}}l.EscapeSequenceParser=C},6242:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const x=c(5770),v=c(482),d=[];l.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,_){this._handlers[y]===void 0&&(this._handlers[y]=[]);const j=this._handlers[y];return j.push(_),{dispose:()=>{const C=j.indexOf(_);C!==-1&&j.splice(C,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,_,j){if(this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].put(y,_,j);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(y,_,j))}start(){this.reset(),this._state=1}put(y,_,j){if(this._state!==3){if(this._state===1)for(;_<j;){const C=y[_++];if(C===59){this._state=2,this._start();break}if(C<48||57<C)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+C-48}this._state===2&&j-_>0&&this._put(y,_,j)}}end(y,_=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let j=!1,C=this._active.length-1,h=!1;if(this._stack.paused&&(C=this._stack.loopPosition-1,j=_,h=this._stack.fallThrough,this._stack.paused=!1),!h&&j===!1){for(;C>=0&&(j=this._active[C].end(y),j!==!0);C--)if(j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!1,j;C--}for(;C>=0;C--)if(j=this._active[C].end(!1),j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!0,j}else this._handlerFb(this._id,"END",y);this._active=d,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,_,j){this._hitLimit||(this._data+=(0,v.utf32ToString)(y,_,j),this._data.length>x.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let _=!1;if(this._hitLimit)_=!1;else if(y&&(_=this._handler(this._data),_ instanceof Promise))return _.then((j=>(this._data="",this._hitLimit=!1,j)));return this._data="",this._hitLimit=!1,_}}},8742:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const c=2147483647;class x{static fromArray(d){const y=new x;if(!d.length)return y;for(let _=Array.isArray(d[0])?1:0;_<d.length;++_){const j=d[_];if(Array.isArray(j))for(let C=0;C<j.length;++C)y.addSubParam(j[C]);else y.addParam(j)}return y}constructor(d=32,y=32){if(this.maxLength=d,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new x(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let y=0;y<this.length;++y){d.push(this.params[y]);const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&d.push(Array.prototype.slice.call(this._subParams,_,j))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const y=this._subParamsIdx[d]>>8,_=255&this._subParamsIdx[d];return _-y>0?this._subParams.subarray(y,_):null}getSubParamsAll(){const d={};for(let y=0;y<this.length;++y){const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&(d[y]=this._subParams.slice(_,j))}return d}addDigit(d){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const _=this._digitIsSub?this._subParams:this.params,j=_[y-1];_[y-1]=~j?Math.min(10*j+d,c):d}}l.Params=x},5741:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,x){const v={instance:x,dispose:x.dispose,isDisposed:!1};this._addons.push(v),x.dispose=()=>this._wrappedAddonDispose(v),x.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let x=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){x=v;break}if(x===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(x,1)}}},8771:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const x=c(3785),v=c(511);l.BufferApiView=class{constructor(d,y){this._buffer=d,this.type=y}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const y=this._buffer.lines.get(d);if(y)return new x.BufferLineApiView(y)}getNullCell(){return new v.CellData}}},3785:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const x=c(511);l.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new x.CellData)}translateToString(v,d,y){return this._line.translateToString(v,d,y)}}},8285:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const x=c(8771),v=c(8460),d=c(844);class y extends d.Disposable{constructor(j){super(),this._core=j,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new x.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new x.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=y},7975:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,x){return this._core.registerCsiHandler(c,(v=>x(v.toArray())))}addCsiHandler(c,x){return this.registerCsiHandler(c,x)}registerDcsHandler(c,x){return this._core.registerDcsHandler(c,((v,d)=>x(v,d.toArray())))}addDcsHandler(c,x){return this.registerDcsHandler(c,x)}registerEscHandler(c,x){return this._core.registerEscHandler(c,x)}addEscHandler(c,x){return this.registerEscHandler(c,x)}registerOscHandler(c,x){return this._core.registerOscHandler(c,x)}addOscHandler(c,x){return this.registerOscHandler(c,x)}}},7090:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(b,l,c){var x=this&&this.__decorate||function(h,p,f,g){var w,R=arguments.length,A=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(h,p,f,g);else for(var z=h.length-1;z>=0;z--)(w=h[z])&&(A=(R<3?w(A):R>3?w(p,f,A):w(p,f))||A);return R>3&&A&&Object.defineProperty(p,f,A),A},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const d=c(8460),y=c(844),_=c(5295),j=c(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let C=l.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new _.BufferSet(h,this))}resize(h,p){this.cols=h,this.rows=p,this.buffers.resize(h,p),this._onResize.fire({cols:h,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,p=!1){const f=this.buffer;let g;g=this._cachedBlankLine,g&&g.length===this.cols&&g.getFg(0)===h.fg&&g.getBg(0)===h.bg||(g=f.getBlankLine(h,p),this._cachedBlankLine=g),g.isWrapped=p;const w=f.ybase+f.scrollTop,R=f.ybase+f.scrollBottom;if(f.scrollTop===0){const A=f.lines.isFull;R===f.lines.length-1?A?f.lines.recycle().copyFrom(g):f.lines.push(g.clone()):f.lines.splice(R+1,0,g.clone()),A?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{const A=R-w+1;f.lines.shiftElements(w+1,A-1,-1),f.lines.set(R,g.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(h,p,f){const g=this.buffer;if(h<0){if(g.ydisp===0)return;this.isUserScrolling=!0}else h+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);const w=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+h,g.ybase),0),w!==g.ydisp&&(p||this._onScroll.fire(g.ydisp))}};l.BufferService=C=x([v(0,j.IOptionsService)],C)},7994:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,x){this._charsets[c]=x,this.glevel===c&&(this.charset=x)}}},1753:function(b,l,c){var x=this&&this.__decorate||function(g,w,R,A){var z,E=arguments.length,P=E<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,R):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(g,w,R,A);else for(var O=g.length-1;O>=0;O--)(z=g[O])&&(P=(E<3?z(P):E>3?z(w,R,P):z(w,R))||P);return E>3&&P&&Object.defineProperty(w,R,P),P},v=this&&this.__param||function(g,w){return function(R,A){w(R,A,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const d=c(2585),y=c(8460),_=c(844),j={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:g=>g.button!==4&&g.action===1&&(g.ctrl=!1,g.alt=!1,g.shift=!1,!0)},VT200:{events:19,restrict:g=>g.action!==32},DRAG:{events:23,restrict:g=>g.action!==32||g.button!==3},ANY:{events:31,restrict:g=>!0}};function C(g,w){let R=(g.ctrl?16:0)|(g.shift?4:0)|(g.alt?8:0);return g.button===4?(R|=64,R|=g.action):(R|=3&g.button,4&g.button&&(R|=64),8&g.button&&(R|=128),g.action===32?R|=32:g.action!==0||w||(R|=3)),R}const h=String.fromCharCode,p={DEFAULT:g=>{const w=[C(g,!1)+32,g.col+32,g.row+32];return w[0]>255||w[1]>255||w[2]>255?"":`\x1B[M${h(w[0])}${h(w[1])}${h(w[2])}`},SGR:g=>{const w=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${C(g,!0)};${g.col};${g.row}${w}`},SGR_PIXELS:g=>{const w=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${C(g,!0)};${g.x};${g.y}${w}`}};let f=l.CoreMouseService=class extends _.Disposable{constructor(g,w){super(),this._bufferService=g,this._coreService=w,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const R of Object.keys(j))this.addProtocol(R,j[R]);for(const R of Object.keys(p))this.addEncoding(R,p[R]);this.reset()}addProtocol(g,w){this._protocols[g]=w}addEncoding(g,w){this._encodings[g]=w}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(g){if(!this._protocols[g])throw new Error(`unknown protocol "${g}"`);this._activeProtocol=g,this._onProtocolChange.fire(this._protocols[g].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(g){if(!this._encodings[g])throw new Error(`unknown encoding "${g}"`);this._activeEncoding=g}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(g){if(g.col<0||g.col>=this._bufferService.cols||g.row<0||g.row>=this._bufferService.rows||g.button===4&&g.action===32||g.button===3&&g.action!==32||g.button!==4&&(g.action===2||g.action===3)||(g.col++,g.row++,g.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,g,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(g))return!1;const w=this._encodings[this._activeEncoding](g);return w&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(w):this._coreService.triggerDataEvent(w,!0)),this._lastEvent=g,!0}explainEvents(g){return{down:!!(1&g),up:!!(2&g),drag:!!(4&g),move:!!(8&g),wheel:!!(16&g)}}_equalEvents(g,w,R){if(R){if(g.x!==w.x||g.y!==w.y)return!1}else if(g.col!==w.col||g.row!==w.row)return!1;return g.button===w.button&&g.action===w.action&&g.ctrl===w.ctrl&&g.alt===w.alt&&g.shift===w.shift}};l.CoreMouseService=f=x([v(0,d.IBufferService),v(1,d.ICoreService)],f)},6975:function(b,l,c){var x=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var P=f.length-1;P>=0;P--)(A=f[P])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const d=c(1439),y=c(8460),_=c(844),j=c(2585),C=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=l.CoreService=class extends _.Disposable{constructor(f,g,w){super(),this._bufferService=f,this._logService=g,this._optionsService=w,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(C),this.decPrivateModes=(0,d.clone)(h)}reset(){this.modes=(0,d.clone)(C),this.decPrivateModes=(0,d.clone)(h)}triggerDataEvent(f,g=!1){if(this._optionsService.rawOptions.disableStdin)return;const w=this._bufferService.buffer;g&&this._optionsService.rawOptions.scrollOnUserInput&&w.ybase!==w.ydisp&&this._onRequestScrollToBottom.fire(),g&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,(()=>f.split("").map((R=>R.charCodeAt(0))))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,(()=>f.split("").map((g=>g.charCodeAt(0))))),this._onBinary.fire(f))}};l.CoreService=p=x([v(0,j.IBufferService),v(1,j.ILogService),v(2,j.IOptionsService)],p)},9074:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const x=c(8055),v=c(8460),d=c(844),y=c(6106);let _=0,j=0;class C extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList((f=>f==null?void 0:f.marker.line)),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)((()=>this.reset())))}registerDecoration(f){if(f.marker.isDisposed)return;const g=new h(f);if(g){const w=g.marker.onDispose((()=>g.dispose()));g.onDispose((()=>{g&&(this._decorations.delete(g)&&this._onDecorationRemoved.fire(g),w.dispose())})),this._decorations.insert(g),this._onDecorationRegistered.fire(g)}return g}reset(){for(const f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,g,w){let R=0,A=0;for(const z of this._decorations.getKeyIterator(g))R=z.options.x??0,A=R+(z.options.width??1),f>=R&&f<A&&(!w||(z.options.layer??"bottom")===w)&&(yield z)}forEachDecorationAtCell(f,g,w,R){this._decorations.forEachByKey(g,(A=>{_=A.options.x??0,j=_+(A.options.width??1),f>=_&&f<j&&(!w||(A.options.layer??"bottom")===w)&&R(A)}))}}l.DecorationService=C;class h extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=x.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=x.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const x=c(2585),v=c(8343);class d{constructor(..._){this._entries=new Map;for(const[j,C]of _)this.set(j,C)}set(_,j){const C=this._entries.get(_);return this._entries.set(_,j),C}forEach(_){for(const[j,C]of this._entries.entries())_(j,C)}has(_){return this._entries.has(_)}get(_){return this._entries.get(_)}}l.ServiceCollection=d,l.InstantiationService=class{constructor(){this._services=new d,this._services.set(x.IInstantiationService,this)}setService(y,_){this._services.set(y,_)}getService(y){return this._services.get(y)}createInstance(y,..._){const j=(0,v.getServiceDependencies)(y).sort(((p,f)=>p.index-f.index)),C=[];for(const p of j){const f=this._services.get(p.id);if(!f)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${p.id}.`);C.push(f)}const h=j.length>0?j[0].index:_.length;if(_.length!==h)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${h+1} conflicts with ${_.length} static arguments`);return new y(..._,...C)}}},7866:function(b,l,c){var x=this&&this.__decorate||function(h,p,f,g){var w,R=arguments.length,A=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(h,p,f,g);else for(var z=h.length-1;z>=0;z--)(w=h[z])&&(A=(R<3?w(A):R>3?w(p,f,A):w(p,f))||A);return R>3&&A&&Object.defineProperty(p,f,A),A},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const d=c(844),y=c(2585),_={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let j,C=l.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),j=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let p=0;p<h.length;p++)typeof h[p]=="function"&&(h[p]=h[p]())}_log(h,p,f){this._evalLazyOptionalParams(f),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...f)}trace(h,...p){var f;this._logLevel<=y.LogLevelEnum.TRACE&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.trace.bind(this._optionsService.options.logger))??console.log,h,p)}debug(h,...p){var f;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.debug.bind(this._optionsService.options.logger))??console.log,h,p)}info(h,...p){var f;this._logLevel<=y.LogLevelEnum.INFO&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.info.bind(this._optionsService.options.logger))??console.info,h,p)}warn(h,...p){var f;this._logLevel<=y.LogLevelEnum.WARN&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.warn.bind(this._optionsService.options.logger))??console.warn,h,p)}error(h,...p){var f;this._logLevel<=y.LogLevelEnum.ERROR&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.error.bind(this._optionsService.options.logger))??console.error,h,p)}};l.LogService=C=x([v(0,y.IOptionsService)],C),l.setTraceLogger=function(h){j=h},l.traceCall=function(h,p,f){if(typeof f.value!="function")throw new Error("not supported");const g=f.value;f.value=function(...w){if(j.logLevel!==y.LogLevelEnum.TRACE)return g.apply(this,w);j.trace(`GlyphRenderer#${g.name}(${w.map((A=>JSON.stringify(A))).join(", ")})`);const R=g.apply(this,w);return j.trace(`GlyphRenderer#${g.name} return`,R),R}}},7302:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const x=c(8460),v=c(844),d=c(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class _ extends v.Disposable{constructor(C){super(),this._onOptionChange=this.register(new x.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h={...l.DEFAULT_OPTIONS};for(const p in C)if(p in h)try{const f=C[p];h[p]=this._sanitizeAndValidateOption(p,f)}catch(f){console.error(f)}this.rawOptions=h,this.options={...h},this._setupOptions(),this.register((0,v.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(C,h){return this.onOptionChange((p=>{p===C&&h(this.rawOptions[C])}))}onMultipleOptionChange(C,h){return this.onOptionChange((p=>{C.indexOf(p)!==-1&&h()}))}_setupOptions(){const C=p=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},h=(p,f)=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);f=this._sanitizeAndValidateOption(p,f),this.rawOptions[p]!==f&&(this.rawOptions[p]=f,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const f={get:C.bind(this,p),set:h.bind(this,p)};Object.defineProperty(this.options,p,f)}}_sanitizeAndValidateOption(C,h){switch(C){case"cursorStyle":if(h||(h=l.DEFAULT_OPTIONS[C]),!(function(p){return p==="block"||p==="underline"||p==="bar"})(h))throw new Error(`"${h}" is not a valid value for ${C}`);break;case"wordSeparator":h||(h=l.DEFAULT_OPTIONS[C]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=y.includes(h)?h:l.DEFAULT_OPTIONS[C];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${C} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${C} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${C} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${C} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}l.OptionsService=_},2660:function(b,l,c){var x=this&&this.__decorate||function(_,j,C,h){var p,f=arguments.length,g=f<3?j:h===null?h=Object.getOwnPropertyDescriptor(j,C):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,j,C,h);else for(var w=_.length-1;w>=0;w--)(p=_[w])&&(g=(f<3?p(g):f>3?p(j,C,g):p(j,C))||g);return f>3&&g&&Object.defineProperty(j,C,g),g},v=this&&this.__param||function(_,j){return function(C,h){j(C,h,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const d=c(2585);let y=l.OscLinkService=class{constructor(_){this._bufferService=_,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(_){const j=this._bufferService.buffer;if(_.id===void 0){const w=j.addMarker(j.ybase+j.y),R={data:_,id:this._nextId++,lines:[w]};return w.onDispose((()=>this._removeMarkerFromLink(R,w))),this._dataByLinkId.set(R.id,R),R.id}const C=_,h=this._getEntryIdKey(C),p=this._entriesWithId.get(h);if(p)return this.addLineToLink(p.id,j.ybase+j.y),p.id;const f=j.addMarker(j.ybase+j.y),g={id:this._nextId++,key:this._getEntryIdKey(C),data:C,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(g,f))),this._entriesWithId.set(g.key,g),this._dataByLinkId.set(g.id,g),g.id}addLineToLink(_,j){const C=this._dataByLinkId.get(_);if(C&&C.lines.every((h=>h.line!==j))){const h=this._bufferService.buffer.addMarker(j);C.lines.push(h),h.onDispose((()=>this._removeMarkerFromLink(C,h)))}}getLinkData(_){var j;return(j=this._dataByLinkId.get(_))==null?void 0:j.data}_getEntryIdKey(_){return`${_.id};;${_.uri}`}_removeMarkerFromLink(_,j){const C=_.lines.indexOf(j);C!==-1&&(_.lines.splice(C,1),_.lines.length===0&&(_.data.id!==void 0&&this._entriesWithId.delete(_.key),this._dataByLinkId.delete(_.id)))}};l.OscLinkService=y=x([v(0,d.IBufferService)],y)},8343:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const c="di$target",x="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(v){return v[x]||[]},l.createDecorator=function(v){if(l.serviceRegistry.has(v))return l.serviceRegistry.get(v);const d=function(y,_,j){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,h,p){h[c]===h?h[x].push({id:C,index:p}):(h[x]=[{id:C,index:p}],h[c]=h)})(d,y,j)};return d.toString=()=>v,l.serviceRegistry.set(v,d),d}},2585:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const x=c(8343);var v;l.IBufferService=(0,x.createDecorator)("BufferService"),l.ICoreMouseService=(0,x.createDecorator)("CoreMouseService"),l.ICoreService=(0,x.createDecorator)("CoreService"),l.ICharsetService=(0,x.createDecorator)("CharsetService"),l.IInstantiationService=(0,x.createDecorator)("InstantiationService"),(function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"})(v||(l.LogLevelEnum=v={})),l.ILogService=(0,x.createDecorator)("LogService"),l.IOptionsService=(0,x.createDecorator)("OptionsService"),l.IOscLinkService=(0,x.createDecorator)("OscLinkService"),l.IUnicodeService=(0,x.createDecorator)("UnicodeService"),l.IDecorationService=(0,x.createDecorator)("DecorationService")},1480:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const x=c(8460),v=c(225);class d{static extractShouldJoin(_){return(1&_)!=0}static extractWidth(_){return _>>1&3}static extractCharKind(_){return _>>3}static createPropertyValue(_,j,C=!1){return(16777215&_)<<3|(3&j)<<1|(C?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new x.EventEmitter,this.onChange=this._onChange.event;const _=new v.UnicodeV6;this.register(_),this._active=_.version,this._activeProvider=_}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(_){if(!this._providers[_])throw new Error(`unknown Unicode version "${_}"`);this._active=_,this._activeProvider=this._providers[_],this._onChange.fire(_)}register(_){this._providers[_.version]=_}wcwidth(_){return this._activeProvider.wcwidth(_)}getStringCellWidth(_){let j=0,C=0;const h=_.length;for(let p=0;p<h;++p){let f=_.charCodeAt(p);if(55296<=f&&f<=56319){if(++p>=h)return j+this.wcwidth(f);const R=_.charCodeAt(p);56320<=R&&R<=57343?f=1024*(f-55296)+R-56320+65536:j+=this.wcwidth(R)}const g=this.charProperties(f,C);let w=d.extractWidth(g);d.extractShouldJoin(g)&&(w-=d.extractWidth(C)),j+=w,C=g}return j}charProperties(_,j){return this._activeProvider.charProperties(_,j)}}l.UnicodeService=d}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b].call(c.exports,c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const l=u(9042),c=u(3236),x=u(844),v=u(5741),d=u(8285),y=u(7975),_=u(7090),j=["cols","rows"];class C extends x.Disposable{constructor(p){super(),this._core=this.register(new c.Terminal(p)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const f=w=>this._core.options[w],g=(w,R)=>{this._checkReadonlyOptions(w),this._core.options[w]=R};for(const w in this._core.options){const R={get:f.bind(this,w),set:g.bind(this,w)};Object.defineProperty(this._publicOptions,w,R)}}_checkReadonlyOptions(p){if(j.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const f in p)this._publicOptions[f]=p[f]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,f=!0){this._core.input(p,f)}resize(p,f){this._verifyIntegers(p,f),this._core.resize(p,f)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,f,g){this._verifyIntegers(p,f,g),this._core.select(p,f,g)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,f){this._verifyIntegers(p,f),this._core.selectLines(p,f)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,f){this._core.write(p,f)}writeln(p,f){this._core.write(p),this._core.write(`\r
`,f)}paste(p){this._core.paste(p)}refresh(p,f){this._verifyIntegers(p,f),this._core.refresh(p,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return l}_verifyIntegers(...p){for(const f of p)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const f of p)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}b.Terminal=C})(),S})()))})(Hd)),Hd.exports}var k2=C2(),Ud={exports:{}},Qg;function j2(){return Qg||(Qg=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.FitAddon=void 0,o.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const S=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(S._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,S=u._renderService.dimensions;if(S.css.cell.width===0||S.css.cell.height===0)return;const b=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(l.getPropertyValue("height")),x=Math.max(0,parseInt(l.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),y=x-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(y/S.css.cell.width)),rows:Math.max(1,Math.floor(d/S.css.cell.height))}}}})(),s})()))})(Ud)),Ud.exports}var E2=j2(),Vd={exports:{}},Zg;function R2(){return Zg||(Zg=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={6:(b,l)=>{function c(v){try{const d=new URL(v),y=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(y.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(v,d,y,_={}){this._terminal=v,this._regex=d,this._handler=y,this._options=_}provideLinks(v,d){const y=x.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(y))}_addCallbacks(v){return v.map((d=>(d.leave=this._options.leave,d.hover=(y,_)=>{if(this._options.hover){const{range:j}=d;this._options.hover(y,_,j)}},d)))}};class x{static computeLink(d,y,_,j){const C=new RegExp(y.source,(y.flags||"")+"g"),[h,p]=x._getWindowedLineStrings(d-1,_),f=h.join("");let g;const w=[];for(;g=C.exec(f);){const R=g[0];if(!c(R))continue;const[A,z]=x._mapStrIdx(_,p,0,g.index),[E,P]=x._mapStrIdx(_,A,z,R.length);if(A===-1||z===-1||E===-1||P===-1)continue;const O={start:{x:z+1,y:A+1},end:{x:P,y:E+1}};w.push({range:O,text:R,activate:j})}return w}static _getWindowedLineStrings(d,y){let _,j=d,C=d,h=0,p="";const f=[];if(_=y.buffer.active.getLine(d)){const g=_.translateToString(!0);if(_.isWrapped&&g[0]!==" "){for(h=0;(_=y.buffer.active.getLine(--j))&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),_.isWrapped&&p.indexOf(" ")===-1););f.reverse()}for(f.push(g),h=0;(_=y.buffer.active.getLine(++C))&&_.isWrapped&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),p.indexOf(" ")===-1););}return[f,j]}static _mapStrIdx(d,y,_,j){const C=d.buffer.active,h=C.getNullCell();let p=_;for(;j;){const f=C.getLine(y);if(!f)return[-1,-1];for(let g=p;g<f.length;++g){f.getCell(g,h);const w=h.getChars();if(h.getWidth()&&(j-=w.length||1,g===f.length-1&&w==="")){const R=C.getLine(y+1);R&&R.isWrapped&&(R.getCell(0,h),h.getWidth()===2&&(j+=1))}if(j<0)return[y,g]}y++,p=0}return[y,p]}}l.LinkComputer=x}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b](c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.WebLinksAddon=void 0;const l=u(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function x(v,d){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}b.WebLinksAddon=class{constructor(v=x,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,y=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,y,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),S})()))})(Vd)),Vd.exports}var T2=R2();const A2={background:"#0f0f0f",foreground:"#e4e4e7",cursor:"#8B5CF6",cursorAccent:"#0f0f0f",selectionBackground:"#3b3d5e80",black:"#1a1b2e",red:"#f87171",green:"#4ade80",yellow:"#facc15",blue:"#60a5fa",magenta:"#c084fc",cyan:"#22d3ee",white:"#e4e4e7",brightBlack:"#4b5563",brightRed:"#fca5a5",brightGreen:"#86efac",brightYellow:"#fde68a",brightBlue:"#93c5fd",brightMagenta:"#d8b4fe",brightCyan:"#67e8f9",brightWhite:"#f9fafb"};function L2(t,{sessionId:i,projectId:s,onSessionCreated:o}){const u=L.useRef(null),S=L.useRef(null),b=L.useRef(null),l=L.useRef(null),[c,x]=L.useState(!1);L.useEffect(()=>{if(!t.current)return;const d=new k2.Terminal({theme:A2,fontFamily:'"JetBrains Mono", "Fira Code", "Cascadia Code", monospace',fontSize:15,lineHeight:1.3,cursorBlink:!0,cursorStyle:"bar",allowProposedApi:!0}),y=new E2.FitAddon;d.loadAddon(y),d.loadAddon(new T2.WebLinksAddon),d.open(t.current),y.fit(),u.current=d,S.current=y;const _=Ko();if(!_)return;const j=zo("/terminal",{auth:{token:_},transports:["websocket"]});b.current=j,j.on("connect",()=>{x(!0),i?j.emit("attach-session",{id:i,cols:d.cols||120,rows:d.rows||30,replay:!0},p=>{p&&p.error?C():l.current=i}):C()});function C(){j.emit("create-session",{cols:d.cols||120,rows:d.rows||30,projectId:s||""},p=>{if(p.error){console.error(p.error),u.current&&(u.current.write(`\r
\x1B[31m  `+p.error+`\x1B[0m\r
`),u.current.write(`\x1B[90m  Terminal features require a local environment with node-pty.\x1B[0m\r
`));return}l.current=p.id,j.emit("attach-session",{id:p.id,cols:d.cols||120,rows:d.rows||30}),o&&o(p.id)})}j.on("output",p=>{u.current&&u.current.write(p)}),j.on("session-exited",()=>{u.current&&u.current.write(`\r
\x1B[33m[Session ended. Close this tab or create a new one.]\x1B[0m\r
`)}),j.on("disconnect",()=>x(!1)),d.onData(p=>{b.current&&l.current&&b.current.emit("input",p)}),d.onResize(({cols:p,rows:f})=>{b.current&&b.current.emit("resize",{cols:p,rows:f})});const h=new ResizeObserver(()=>{try{y.fit()}catch{}});return h.observe(t.current),()=>{h.disconnect(),b.current&&(b.current.emit("detach-session"),b.current.disconnect(),b.current=null),l.current=null,d.dispose(),u.current=null,S.current=null}},[t,i,s]);const v=L.useCallback(d=>{b.current&&l.current&&b.current.emit("input",d)},[]);return{connected:c,sendInput:v}}const Au=L.forwardRef(function({sessionId:i,projectId:s,onSessionCreated:o},u){const S=L.useRef(null),{connected:b,sendInput:l}=L2(S,{sessionId:i,projectId:s,onSessionCreated:o});return L.useImperativeHandle(u,()=>({sendInput:l}),[l]),e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",background:"#050505"},children:[e.jsx("div",{ref:S,style:{width:"100%",height:"100%"}}),!b&&e.jsx("div",{style:{position:"absolute",bottom:"8px",right:"8px",fontSize:"10px",color:"#52525B",fontFamily:"monospace"},children:"Connecting..."})]})}),_r={bg:"#0f0f0f",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e"};function z2(){const[t,i]=L.useState(!1),[s,o]=L.useState(!1),[u,S]=L.useState(""),b=L.useRef(null),l=Wt(),c=async()=>{i(!0),S("");try{const x=await ae("/api/claude-auth/verify",{method:"POST"});if(o(x.connected),x.connected){const v=qo();v&&hh({...v,claudeConnected:!0})}else S("Claude is not connected yet. Complete the OAuth flow in the terminal first.")}catch(x){S(x.message)}finally{i(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#050505",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("div",{style:{width:"680px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"32px 32px 0",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:s?_r.success:_r.violet},children:s?e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsx("h1",{style:{fontSize:"22px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"6px",color:_r.tp},children:s?"Claude Connected!":"Connect Claude"}),e.jsx("p",{style:{fontSize:"13px",color:_r.ts,lineHeight:1.5,maxWidth:"480px",margin:"0 auto"},children:s?"Your Claude account is connected and ready to use. You can now create projects and generate iterations.":"Authenticate with Claude to enable AI-powered agent testing. Follow the steps below."})]}),s?e.jsxs("div",{style:{padding:"24px 32px 32px"},children:[e.jsx("div",{style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"8px",padding:"16px",marginBottom:"20px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"13px",color:_r.success,fontWeight:"500"},children:"Claude OAuth authentication successful"})}),e.jsx("button",{onClick:()=>l("/"),style:{width:"100%",padding:"12px",background:_r.violet,color:"#fff",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Continue to Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"20px 32px"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{num:"1",text:"Type 'claude' in the terminal below and press Enter"},{num:"2",text:"A URL will appear  open it in your browser"},{num:"3",text:"Sign in and authorize the connection"},{num:"4",text:"Come back here and click 'Check Connection'"}].map(x=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",background:_r.violetM,color:_r.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"700",flexShrink:0},children:x.num}),e.jsx("span",{style:{fontSize:"12px",color:_r.ts},children:x.text})]},x.num))})}),e.jsx("div",{style:{margin:"0 16px",height:"280px",borderRadius:"8px",overflow:"hidden",border:`1px solid ${_r.borderS}`,background:_r.bg},children:e.jsx(Au,{ref:b,projectId:"",onSessionCreated:()=>{}})}),e.jsxs("div",{style:{padding:"20px 32px 28px"},children:[u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"12px",borderRadius:"4px",background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.25)",color:"#f59e0b",fontSize:"12px"},children:u}),e.jsx("button",{onClick:c,disabled:t,style:{width:"100%",padding:"10px",background:_r.tp,color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:t?"default":"pointer",opacity:t?.7:1,marginBottom:"12px"},children:t?"Checking...":"Check Connection"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("span",{onClick:()=>l("/"),style:{fontSize:"12px",color:_r.tm,cursor:"pointer",textDecoration:"none"},onMouseEnter:x=>x.target.style.color=_r.ts,onMouseLeave:x=>x.target.style.color=_r.tm,children:"Skip for now"})})]})]})]})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=(...t)=>t.filter((i,s,o)=>!!i&&i.trim()!==""&&o.indexOf(i)===s).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,s,o)=>o?o.toUpperCase():s.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=t=>{const i=I2(t);return i.charAt(0).toUpperCase()+i.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=t=>{for(const i in t)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=L.forwardRef(({color:t="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:S,iconNode:b,...l},c)=>L.createElement("svg",{ref:c,...M2,width:i,height:i,stroke:t,strokeWidth:o?Number(s)*24/Number(i):s,className:y0("lucide",u),...!S&&!B2(l)&&{"aria-hidden":"true"},...l},[...b.map(([x,v])=>L.createElement(x,v)),...Array.isArray(S)?S:[S]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,i)=>{const s=L.forwardRef(({className:o,...u},S)=>L.createElement(P2,{ref:S,iconNode:i,className:y0(`lucide-${D2(ex(t))}`,`lucide-${t}`,o),...u}));return s.displayName=ex(t),s};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],v0=Le("activity",O2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],b0=Le("arrow-down",$2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yh=Le("arrow-left",F2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_s=Le("arrow-right",W2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],H2=Le("arrow-up-down",N2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],V2=Le("arrow-up-right",U2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],_0=Le("arrow-up",K2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],fn=Le("bot",q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],tx=Le("calendar",G2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],X2=Le("camera",Y2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vh=Le("chart-column",J2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Z2=Le("chart-pie",Q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],or=Le("check",eS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bn=Le("chevron-down",tS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Go=Le("chevron-left",rS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ar=Le("chevron-right",iS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bh=Le("chevron-up",nS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ci=Le("circle-alert",sS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cl=Le("circle-check-big",oS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lS=Le("circle-check",aS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dS=Le("circle-x",cS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yo=Le("clock",uS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],rx=Le("cloud-upload",hS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],_h=Le("code",pS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wl=Le("copy",fS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],qn=Le("cpu",gS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mS=Le("database",xS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yn=Le("download",yS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Do=Le("external-link",vS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Os=Le("eye",bS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],Lu=Le("file-code",_S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],wS=Le("file-plus",SS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],kS=Le("file-search",CS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ls=Le("file-text",jS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],RS=Le("file",ES);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],AS=Le("folder-plus",TS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],ix=Le("folder-tree",LS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],DS=Le("folder",zS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],MS=Le("funnel",IS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Sh=Le("git-branch",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Es=Le("globe",PS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$S=Le("grip-vertical",OS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],WS=Le("hash",FS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],nx=Le("history",NS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],US=Le("image",HS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],KS=Le("info",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],sx=Le("key",qS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zs=Le("layers",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],S0=Le("layout-grid",YS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Kd=Le("lightbulb",XS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ox=Le("link",JS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Co=Le("linkedin",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],zu=Le("list",ZS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hn=Le("loader-circle",ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],rw=Le("maximize-2",tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ax=Le("message-circle",iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],w0=Le("message-square",nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M5 12h14",key:"1ays0h"}]],ow=Le("minus",sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],C0=Le("monitor",aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Fi=Le("package",lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dw=Le("palette",cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],hw=Le("panel-right",uw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Dl=Le("panels-top-left",pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],gw=Le("pause",fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xo=Le("pen-line",xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],qd=Le("pen-tool",mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Du=Le("pen",yw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Gd=Le("pencil",vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ql=Le("play",bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jt=Le("plus",_w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],k0=Le("refresh-ccw",Sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$i=Le("refresh-cw",ww);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],kw=Le("repeat",Cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Yd=Le("rocket",jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Rw=Le("rotate-ccw",Ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gl=Le("save",Tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ds=Le("search",Aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wh=Le("send",Lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j0=Le("settings",zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],E0=Le("share-2",Dw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Yl=Le("shield",Iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],R0=Le("smartphone",Mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ft=Le("sparkles",Bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ow=Le("square-check-big",Pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vn=Le("star",$w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ww=Le("table",Fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],T0=Le("tablet",Nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Uw=Le("tag",Hw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],A0=Le("terminal",Vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ir=Le("trash-2",Kw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lx=Le("trash",qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Yw=Le("trending-up",Gw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cx=Le("triangle-alert",Xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ao=Le("type",Jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],L0=Le("upload",Qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],dx=Le("user-plus",Zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cn=Le("user",eC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rs=Le("users",tC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Cl=Le("wand-sparkles",rC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],z0=Le("wrench",iC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bt=Le("x",nC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nr=Le("zap",sC),Ch=L.createContext({});function kh(t){const i=L.useRef(null);return i.current===null&&(i.current=t()),i.current}const D0=typeof window<"u",I0=D0?L.useLayoutEffect:L.useEffect,Xl=L.createContext(null);function jh(t,i){t.indexOf(i)===-1&&t.push(i)}function Il(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}const ki=(t,i,s)=>s>i?i:s<t?t:s;let Eh=()=>{};const Wi={},M0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function B0(t){return typeof t=="object"&&t!==null}const P0=t=>/^0[^.\s]+$/u.test(t);function Rh(t){let i;return()=>(i===void 0&&(i=t()),i)}const Qr=t=>t,oC=(t,i)=>s=>i(t(s)),Jo=(...t)=>t.reduce(oC),Fo=(t,i,s)=>{const o=i-t;return o===0?1:(s-t)/o};class Th{constructor(){this.subscriptions=[]}add(i){return jh(this.subscriptions,i),()=>Il(this.subscriptions,i)}notify(i,s,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](i,s,o);else for(let S=0;S<u;S++){const b=this.subscriptions[S];b&&b(i,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hi=t=>t*1e3,Jr=t=>t/1e3;function O0(t,i){return i?t*(1e3/i):0}const $0=(t,i,s)=>(((1-3*s+3*i)*t+(3*s-6*i))*t+3*i)*t,aC=1e-7,lC=12;function cC(t,i,s,o,u){let S,b,l=0;do b=i+(s-i)/2,S=$0(b,o,u)-t,S>0?s=b:i=b;while(Math.abs(S)>aC&&++l<lC);return b}function Qo(t,i,s,o){if(t===i&&s===o)return Qr;const u=S=>cC(S,0,1,t,s);return S=>S===0||S===1?S:$0(u(S),i,o)}const F0=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,W0=t=>i=>1-t(1-i),N0=Qo(.33,1.53,.69,.99),Ah=W0(N0),H0=F0(Ah),U0=t=>(t*=2)<1?.5*Ah(t):.5*(2-Math.pow(2,-10*(t-1))),Lh=t=>1-Math.sin(Math.acos(t)),V0=W0(Lh),K0=F0(Lh),dC=Qo(.42,0,1,1),uC=Qo(0,0,.58,1),q0=Qo(.42,0,.58,1),hC=t=>Array.isArray(t)&&typeof t[0]!="number",G0=t=>Array.isArray(t)&&typeof t[0]=="number",pC={linear:Qr,easeIn:dC,easeInOut:q0,easeOut:uC,circIn:Lh,circInOut:K0,circOut:V0,backIn:Ah,backInOut:H0,backOut:N0,anticipate:U0},fC=t=>typeof t=="string",ux=t=>{if(G0(t)){Eh(t.length===4);const[i,s,o,u]=t;return Qo(i,s,o,u)}else if(fC(t))return pC[t];return t},dl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gC(t,i){let s=new Set,o=new Set,u=!1,S=!1;const b=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(v){b.has(v)&&(x.schedule(v),t()),v(l)}const x={schedule:(v,d=!1,y=!1)=>{const j=y&&u?s:o;return d&&b.add(v),j.has(v)||j.add(v),v},cancel:v=>{o.delete(v),b.delete(v)},process:v=>{if(l=v,u){S=!0;return}u=!0,[s,o]=[o,s],s.forEach(c),s.clear(),u=!1,S&&(S=!1,x.process(v))}};return x}const xC=40;function Y0(t,i){let s=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},S=()=>s=!0,b=dl.reduce((g,w)=>(g[w]=gC(S),g),{}),{setup:l,read:c,resolveKeyframes:x,preUpdate:v,update:d,preRender:y,render:_,postRender:j}=b,C=()=>{const g=Wi.useManualTiming?u.timestamp:performance.now();s=!1,Wi.useManualTiming||(u.delta=o?1e3/60:Math.max(Math.min(g-u.timestamp,xC),1)),u.timestamp=g,u.isProcessing=!0,l.process(u),c.process(u),x.process(u),v.process(u),d.process(u),y.process(u),_.process(u),j.process(u),u.isProcessing=!1,s&&i&&(o=!1,t(C))},h=()=>{s=!0,o=!0,u.isProcessing||t(C)};return{schedule:dl.reduce((g,w)=>{const R=b[w];return g[w]=(A,z=!1,E=!1)=>(s||h(),R.schedule(A,z,E)),g},{}),cancel:g=>{for(let w=0;w<dl.length;w++)b[dl[w]].cancel(g)},state:u,steps:b}}const{schedule:jt,cancel:_n,state:ur,steps:Xd}=Y0(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qr,!0);let kl;function mC(){kl=void 0}const Sr={now:()=>(kl===void 0&&Sr.set(ur.isProcessing||Wi.useManualTiming?ur.timestamp:performance.now()),kl),set:t=>{kl=t,queueMicrotask(mC)}},X0=t=>i=>typeof i=="string"&&i.startsWith(t),J0=X0("--"),yC=X0("var(--"),zh=t=>yC(t)?vC.test(t.split("/*")[0].trim()):!1,vC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function hx(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const $s={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wo={...$s,transform:t=>ki(0,1,t)},ul={...$s,default:1},Io=t=>Math.round(t*1e5)/1e5,Dh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bC(t){return t==null}const _C=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ih=(t,i)=>s=>!!(typeof s=="string"&&_C.test(s)&&s.startsWith(t)||i&&!bC(s)&&Object.prototype.hasOwnProperty.call(s,i)),Q0=(t,i,s)=>o=>{if(typeof o!="string")return o;const[u,S,b,l]=o.match(Dh);return{[t]:parseFloat(u),[i]:parseFloat(S),[s]:parseFloat(b),alpha:l!==void 0?parseFloat(l):1}},SC=t=>ki(0,255,t),Jd={...$s,transform:t=>Math.round(SC(t))},Un={test:Ih("rgb","red"),parse:Q0("red","green","blue"),transform:({red:t,green:i,blue:s,alpha:o=1})=>"rgba("+Jd.transform(t)+", "+Jd.transform(i)+", "+Jd.transform(s)+", "+Io(Wo.transform(o))+")"};function wC(t){let i="",s="",o="",u="";return t.length>5?(i=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),u=t.substring(7,9)):(i=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),u=t.substring(4,5),i+=i,s+=s,o+=o,u+=u),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const Iu={test:Ih("#"),parse:wC,transform:Un.transform},Zo=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),un=Zo("deg"),Si=Zo("%"),Qe=Zo("px"),CC=Zo("vh"),kC=Zo("vw"),px={...Si,parse:t=>Si.parse(t)/100,transform:t=>Si.transform(t*100)},Ss={test:Ih("hsl","hue"),parse:Q0("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+Si.transform(Io(i))+", "+Si.transform(Io(s))+", "+Io(Wo.transform(o))+")"},Yt={test:t=>Un.test(t)||Iu.test(t)||Ss.test(t),parse:t=>Un.test(t)?Un.parse(t):Ss.test(t)?Ss.parse(t):Iu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Un.transform(t):Ss.transform(t),getAnimatableNone:t=>{const i=Yt.parse(t);return i.alpha=0,Yt.transform(i)}},jC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EC(t){var i,s;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Dh))==null?void 0:i.length)||0)+(((s=t.match(jC))==null?void 0:s.length)||0)>0}const Z0="number",ey="color",RC="var",TC="var(",fx="${}",AC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function No(t){const i=t.toString(),s=[],o={color:[],number:[],var:[]},u=[];let S=0;const l=i.replace(AC,c=>(Yt.test(c)?(o.color.push(S),u.push(ey),s.push(Yt.parse(c))):c.startsWith(TC)?(o.var.push(S),u.push(RC),s.push(c)):(o.number.push(S),u.push(Z0),s.push(parseFloat(c))),++S,fx)).split(fx);return{values:s,split:l,indexes:o,types:u}}function ty(t){return No(t).values}function ry(t){const{split:i,types:s}=No(t),o=i.length;return u=>{let S="";for(let b=0;b<o;b++)if(S+=i[b],u[b]!==void 0){const l=s[b];l===Z0?S+=Io(u[b]):l===ey?S+=Yt.transform(u[b]):S+=u[b]}return S}}const LC=t=>typeof t=="number"?0:Yt.test(t)?Yt.getAnimatableNone(t):t;function zC(t){const i=ty(t);return ry(t)(i.map(LC))}const Sn={test:EC,parse:ty,createTransformer:ry,getAnimatableNone:zC};function Qd(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(i-t)*6*s:s<1/2?i:s<2/3?t+(i-t)*(2/3-s)*6:t}function DC({hue:t,saturation:i,lightness:s,alpha:o}){t/=360,i/=100,s/=100;let u=0,S=0,b=0;if(!i)u=S=b=s;else{const l=s<.5?s*(1+i):s+i-s*i,c=2*s-l;u=Qd(c,l,t+1/3),S=Qd(c,l,t),b=Qd(c,l,t-1/3)}return{red:Math.round(u*255),green:Math.round(S*255),blue:Math.round(b*255),alpha:o}}function Ml(t,i){return s=>s>0?i:t}const It=(t,i,s)=>t+(i-t)*s,Zd=(t,i,s)=>{const o=t*t,u=s*(i*i-o)+o;return u<0?0:Math.sqrt(u)},IC=[Iu,Un,Ss],MC=t=>IC.find(i=>i.test(t));function gx(t){const i=MC(t);if(!i)return!1;let s=i.parse(t);return i===Ss&&(s=DC(s)),s}const xx=(t,i)=>{const s=gx(t),o=gx(i);if(!s||!o)return Ml(t,i);const u={...s};return S=>(u.red=Zd(s.red,o.red,S),u.green=Zd(s.green,o.green,S),u.blue=Zd(s.blue,o.blue,S),u.alpha=It(s.alpha,o.alpha,S),Un.transform(u))},Mu=new Set(["none","hidden"]);function BC(t,i){return Mu.has(t)?s=>s<=0?t:i:s=>s>=1?i:t}function PC(t,i){return s=>It(t,i,s)}function Mh(t){return typeof t=="number"?PC:typeof t=="string"?zh(t)?Ml:Yt.test(t)?xx:FC:Array.isArray(t)?iy:typeof t=="object"?Yt.test(t)?xx:OC:Ml}function iy(t,i){const s=[...t],o=s.length,u=t.map((S,b)=>Mh(S)(S,i[b]));return S=>{for(let b=0;b<o;b++)s[b]=u[b](S);return s}}function OC(t,i){const s={...t,...i},o={};for(const u in s)t[u]!==void 0&&i[u]!==void 0&&(o[u]=Mh(t[u])(t[u],i[u]));return u=>{for(const S in o)s[S]=o[S](u);return s}}function $C(t,i){const s=[],o={color:0,var:0,number:0};for(let u=0;u<i.values.length;u++){const S=i.types[u],b=t.indexes[S][o[S]],l=t.values[b]??0;s[u]=l,o[S]++}return s}const FC=(t,i)=>{const s=Sn.createTransformer(i),o=No(t),u=No(i);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?Mu.has(t)&&!u.values.length||Mu.has(i)&&!o.values.length?BC(t,i):Jo(iy($C(o,u),u.values),s):Ml(t,i)};function ny(t,i,s){return typeof t=="number"&&typeof i=="number"&&typeof s=="number"?It(t,i,s):Mh(t)(t,i)}const WC=t=>{const i=({timestamp:s})=>t(s);return{start:(s=!0)=>jt.update(i,s),stop:()=>_n(i),now:()=>ur.isProcessing?ur.timestamp:Sr.now()}},sy=(t,i,s=10)=>{let o="";const u=Math.max(Math.round(i/s),2);for(let S=0;S<u;S++)o+=Math.round(t(S/(u-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Bl=2e4;function Bh(t){let i=0;const s=50;let o=t.next(i);for(;!o.done&&i<Bl;)i+=s,o=t.next(i);return i>=Bl?1/0:i}function NC(t,i=100,s){const o=s({...t,keyframes:[0,i]}),u=Math.min(Bh(o),Bl);return{type:"keyframes",ease:S=>o.next(u*S).value/i,duration:Jr(u)}}const HC=5;function oy(t,i,s){const o=Math.max(i-HC,0);return O0(s-t(o),i-o)}const $t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},eu=.001;function UC({duration:t=$t.duration,bounce:i=$t.bounce,velocity:s=$t.velocity,mass:o=$t.mass}){let u,S,b=1-i;b=ki($t.minDamping,$t.maxDamping,b),t=ki($t.minDuration,$t.maxDuration,Jr(t)),b<1?(u=x=>{const v=x*b,d=v*t,y=v-s,_=Bu(x,b),j=Math.exp(-d);return eu-y/_*j},S=x=>{const d=x*b*t,y=d*s+s,_=Math.pow(b,2)*Math.pow(x,2)*t,j=Math.exp(-d),C=Bu(Math.pow(x,2),b);return(-u(x)+eu>0?-1:1)*((y-_)*j)/C}):(u=x=>{const v=Math.exp(-x*t),d=(x-s)*t+1;return-eu+v*d},S=x=>{const v=Math.exp(-x*t),d=(s-x)*(t*t);return v*d});const l=5/t,c=KC(u,S,l);if(t=hi(t),isNaN(c))return{stiffness:$t.stiffness,damping:$t.damping,duration:t};{const x=Math.pow(c,2)*o;return{stiffness:x,damping:b*2*Math.sqrt(o*x),duration:t}}}const VC=12;function KC(t,i,s){let o=s;for(let u=1;u<VC;u++)o=o-t(o)/i(o);return o}function Bu(t,i){return t*Math.sqrt(1-i*i)}const qC=["duration","bounce"],GC=["stiffness","damping","mass"];function mx(t,i){return i.some(s=>t[s]!==void 0)}function YC(t){let i={velocity:$t.velocity,stiffness:$t.stiffness,damping:$t.damping,mass:$t.mass,isResolvedFromDuration:!1,...t};if(!mx(t,GC)&&mx(t,qC))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),u=o*o,S=2*ki(.05,1,1-(t.bounce||0))*Math.sqrt(u);i={...i,mass:$t.mass,stiffness:u,damping:S}}else{const s=UC(t);i={...i,...s,mass:$t.mass},i.isResolvedFromDuration=!0}return i}function Pl(t=$t.visualDuration,i=$t.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:o,restDelta:u}=s;const S=s.keyframes[0],b=s.keyframes[s.keyframes.length-1],l={done:!1,value:S},{stiffness:c,damping:x,mass:v,duration:d,velocity:y,isResolvedFromDuration:_}=YC({...s,velocity:-Jr(s.velocity||0)}),j=y||0,C=x/(2*Math.sqrt(c*v)),h=b-S,p=Jr(Math.sqrt(c/v)),f=Math.abs(h)<5;o||(o=f?$t.restSpeed.granular:$t.restSpeed.default),u||(u=f?$t.restDelta.granular:$t.restDelta.default);let g;if(C<1){const R=Bu(p,C);g=A=>{const z=Math.exp(-C*p*A);return b-z*((j+C*p*h)/R*Math.sin(R*A)+h*Math.cos(R*A))}}else if(C===1)g=R=>b-Math.exp(-p*R)*(h+(j+p*h)*R);else{const R=p*Math.sqrt(C*C-1);g=A=>{const z=Math.exp(-C*p*A),E=Math.min(R*A,300);return b-z*((j+C*p*h)*Math.sinh(E)+R*h*Math.cosh(E))/R}}const w={calculatedDuration:_&&d||null,next:R=>{const A=g(R);if(_)l.done=R>=d;else{let z=R===0?j:0;C<1&&(z=R===0?hi(j):oy(g,R,A));const E=Math.abs(z)<=o,P=Math.abs(b-A)<=u;l.done=E&&P}return l.value=l.done?b:A,l},toString:()=>{const R=Math.min(Bh(w),Bl),A=sy(z=>w.next(R*z).value,R,30);return R+"ms "+A},toTransition:()=>{}};return w}Pl.applyToOptions=t=>{const i=NC(t,100,Pl);return t.ease=i.ease,t.duration=hi(i.duration),t.type="keyframes",t};function Pu({keyframes:t,velocity:i=0,power:s=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:S=500,modifyTarget:b,min:l,max:c,restDelta:x=.5,restSpeed:v}){const d=t[0],y={done:!1,value:d},_=E=>l!==void 0&&E<l||c!==void 0&&E>c,j=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let C=s*i;const h=d+C,p=b===void 0?h:b(h);p!==h&&(C=p-d);const f=E=>-C*Math.exp(-E/o),g=E=>p+f(E),w=E=>{const P=f(E),O=g(E);y.done=Math.abs(P)<=x,y.value=y.done?p:O};let R,A;const z=E=>{_(y.value)&&(R=E,A=Pl({keyframes:[y.value,j(y.value)],velocity:oy(g,E,y.value),damping:u,stiffness:S,restDelta:x,restSpeed:v}))};return z(0),{calculatedDuration:null,next:E=>{let P=!1;return!A&&R===void 0&&(P=!0,w(E),z(E)),R!==void 0&&E>=R?A.next(E-R):(!P&&w(E),y)}}}function XC(t,i,s){const o=[],u=s||Wi.mix||ny,S=t.length-1;for(let b=0;b<S;b++){let l=u(t[b],t[b+1]);if(i){const c=Array.isArray(i)?i[b]||Qr:i;l=Jo(c,l)}o.push(l)}return o}function JC(t,i,{clamp:s=!0,ease:o,mixer:u}={}){const S=t.length;if(Eh(S===i.length),S===1)return()=>i[0];if(S===2&&i[0]===i[1])return()=>i[1];const b=t[0]===t[1];t[0]>t[S-1]&&(t=[...t].reverse(),i=[...i].reverse());const l=XC(i,o,u),c=l.length,x=v=>{if(b&&v<t[0])return i[0];let d=0;if(c>1)for(;d<t.length-2&&!(v<t[d+1]);d++);const y=Fo(t[d],t[d+1],v);return l[d](y)};return s?v=>x(ki(t[0],t[S-1],v)):x}function QC(t,i){const s=t[t.length-1];for(let o=1;o<=i;o++){const u=Fo(0,i,o);t.push(It(s,1,u))}}function ZC(t){const i=[0];return QC(i,t.length-1),i}function ek(t,i){return t.map(s=>s*i)}function tk(t,i){return t.map(()=>i||q0).splice(0,t.length-1)}function Mo({duration:t=300,keyframes:i,times:s,ease:o="easeInOut"}){const u=hC(o)?o.map(ux):ux(o),S={done:!1,value:i[0]},b=ek(s&&s.length===i.length?s:ZC(i),t),l=JC(b,i,{ease:Array.isArray(u)?u:tk(i,u)});return{calculatedDuration:t,next:c=>(S.value=l(c),S.done=c>=t,S)}}const rk=t=>t!==null;function Ph(t,{repeat:i,repeatType:s="loop"},o,u=1){const S=t.filter(rk),l=u<0||i&&s!=="loop"&&i%2===1?0:S.length-1;return!l||o===void 0?S[l]:o}const ik={decay:Pu,inertia:Pu,tween:Mo,keyframes:Mo,spring:Pl};function ay(t){typeof t.type=="string"&&(t.type=ik[t.type])}class Oh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,s){return this.finished.then(i,s)}}const nk=t=>t/100;class $h extends Oh{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,u;const{motionValue:s}=this.options;s&&s.updatedAt!==Sr.now()&&this.tick(Sr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(o=this.options).onStop)==null||u.call(o))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;ay(i);const{type:s=Mo,repeat:o=0,repeatDelay:u=0,repeatType:S,velocity:b=0}=i;let{keyframes:l}=i;const c=s||Mo;c!==Mo&&typeof l[0]!="number"&&(this.mixKeyframes=Jo(nk,ny(l[0],l[1])),l=[0,100]);const x=c({...i,keyframes:l});S==="mirror"&&(this.mirroredGenerator=c({...i,keyframes:[...l].reverse(),velocity:-b})),x.calculatedDuration===null&&(x.calculatedDuration=Bh(x));const{calculatedDuration:v}=x;this.calculatedDuration=v,this.resolvedDuration=v+u,this.totalDuration=this.resolvedDuration*(o+1)-u,this.generator=x}updateTime(i){const s=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(i,s=!1){const{generator:o,totalDuration:u,mixKeyframes:S,mirroredGenerator:b,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return o.next(0);const{delay:x=0,keyframes:v,repeat:d,repeatType:y,repeatDelay:_,type:j,onUpdate:C,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-u/this.speed,this.startTime)),s?this.currentTime=i:this.updateTime(i);const p=this.currentTime-x*(this.playbackSpeed>=0?1:-1),f=this.playbackSpeed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let g=this.currentTime,w=o;if(d){const E=Math.min(this.currentTime,u)/l;let P=Math.floor(E),O=E%1;!O&&E>=1&&(O=1),O===1&&P--,P=Math.min(P,d+1),!!(P%2)&&(y==="reverse"?(O=1-O,_&&(O-=_/l)):y==="mirror"&&(w=b)),g=ki(0,1,O)*l}const R=f?{done:!1,value:v[0]}:w.next(g);S&&(R.value=S(R.value));let{done:A}=R;!f&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return z&&j!==Pu&&(R.value=Ph(v,this.options,h,this.speed)),C&&C(R.value),z&&this.finish(),R}then(i,s){return this.finished.then(i,s)}get duration(){return Jr(this.calculatedDuration)}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+Jr(i)}get time(){return Jr(this.currentTime)}set time(i){var s;i=hi(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Sr.now());const s=this.playbackSpeed!==i;this.playbackSpeed=i,s&&(this.time=Jr(this.currentTime))}play(){var u,S;if(this.isStopped)return;const{driver:i=WC,startTime:s}=this.options;this.driver||(this.driver=i(b=>this.tick(b))),(S=(u=this.options).onPlay)==null||S.call(u);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(i=this.options).onComplete)==null||s.call(i)}cancel(){var i,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(i=this.options).onCancel)==null||s.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),i.observe(this)}}function sk(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const Vn=t=>t*180/Math.PI,Ou=t=>{const i=Vn(Math.atan2(t[1],t[0]));return $u(i)},ok={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ou,rotateZ:Ou,skewX:t=>Vn(Math.atan(t[1])),skewY:t=>Vn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$u=t=>(t=t%360,t<0&&(t+=360),t),yx=Ou,vx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),bx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ak={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vx,scaleY:bx,scale:t=>(vx(t)+bx(t))/2,rotateX:t=>$u(Vn(Math.atan2(t[6],t[5]))),rotateY:t=>$u(Vn(Math.atan2(-t[2],t[0]))),rotateZ:yx,rotate:yx,skewX:t=>Vn(Math.atan(t[4])),skewY:t=>Vn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Fu(t){return t.includes("scale")?1:0}function Wu(t,i){if(!t||t==="none")return Fu(i);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,u;if(s)o=ak,u=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=ok,u=l}if(!u)return Fu(i);const S=o[i],b=u[1].split(",").map(ck);return typeof S=="function"?S(b):b[S]}const lk=(t,i)=>{const{transform:s="none"}=getComputedStyle(t);return Wu(s,i)};function ck(t){return parseFloat(t.trim())}const Fs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ws=new Set(Fs),_x=t=>t===$s||t===Qe,dk=new Set(["x","y","z"]),uk=Fs.filter(t=>!dk.has(t));function hk(t){const i=[];return uk.forEach(s=>{const o=t.getValue(s);o!==void 0&&(i.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),i}const gn={width:({x:t},{paddingLeft:i="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),height:({y:t},{paddingTop:i="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>Wu(i,"x"),y:(t,{transform:i})=>Wu(i,"y")};gn.translateX=gn.x;gn.translateY=gn.y;const Kn=new Set;let Nu=!1,Hu=!1,Uu=!1;function ly(){if(Hu){const t=Array.from(Kn).filter(o=>o.needsMeasurement),i=new Set(t.map(o=>o.element)),s=new Map;i.forEach(o=>{const u=hk(o);u.length&&(s.set(o,u),o.render())}),t.forEach(o=>o.measureInitialState()),i.forEach(o=>{o.render();const u=s.get(o);u&&u.forEach(([S,b])=>{var l;(l=o.getValue(S))==null||l.set(b)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}Hu=!1,Nu=!1,Kn.forEach(t=>t.complete(Uu)),Kn.clear()}function cy(){Kn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hu=!0)})}function pk(){Uu=!0,cy(),ly(),Uu=!1}class Fh{constructor(i,s,o,u,S,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=s,this.name=o,this.motionValue=u,this.element=S,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(Kn.add(this),Nu||(Nu=!0,jt.read(cy),jt.resolveKeyframes(ly))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:s,element:o,motionValue:u}=this;if(i[0]===null){const S=u==null?void 0:u.get(),b=i[i.length-1];if(S!==void 0)i[0]=S;else if(o&&s){const l=o.readValue(s,b);l!=null&&(i[0]=l)}i[0]===void 0&&(i[0]=b),u&&S===void 0&&u.set(i[0])}sk(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),Kn.delete(this)}cancel(){this.state==="scheduled"&&(Kn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fk=t=>t.startsWith("--");function gk(t,i,s){fk(i)?t.style.setProperty(i,s):t.style[i]=s}const xk=Rh(()=>window.ScrollTimeline!==void 0),mk={};function yk(t,i){const s=Rh(t);return()=>mk[i]??s()}const dy=yk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lo=([t,i,s,o])=>`cubic-bezier(${t}, ${i}, ${s}, ${o})`,Sx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lo([0,.65,.55,1]),circOut:Lo([.55,0,1,.45]),backIn:Lo([.31,.01,.66,-.59]),backOut:Lo([.33,1.53,.69,.99])};function uy(t,i){if(t)return typeof t=="function"?dy()?sy(t,i):"ease-out":G0(t)?Lo(t):Array.isArray(t)?t.map(s=>uy(s,i)||Sx.easeOut):Sx[t]}function vk(t,i,s,{delay:o=0,duration:u=300,repeat:S=0,repeatType:b="loop",ease:l="easeOut",times:c}={},x=void 0){const v={[i]:s};c&&(v.offset=c);const d=uy(l,u);Array.isArray(d)&&(v.easing=d);const y={delay:o,duration:u,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:S+1,direction:b==="reverse"?"alternate":"normal"};return x&&(y.pseudoElement=x),t.animate(v,y)}function hy(t){return typeof t=="function"&&"applyToOptions"in t}function bk({type:t,...i}){return hy(t)&&dy()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class py extends Oh{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!i)return;const{element:s,name:o,keyframes:u,pseudoElement:S,allowFlatten:b=!1,finalKeyframe:l,onComplete:c}=i;this.isPseudoElement=!!S,this.allowFlatten=b,this.options=i,Eh(typeof i.type!="string");const x=bk(i);this.animation=vk(s,o,u,x,S),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const v=Ph(u,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(v):gk(s,o,v),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,s;(s=(i=this.animation).finish)==null||s.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,o,u;const i=(s=this.options)==null?void 0:s.element;!this.isPseudoElement&&(i!=null&&i.isConnected)&&((u=(o=this.animation).commitStyles)==null||u.call(o))}get duration(){var s,o;const i=((o=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:o.call(s).duration)||0;return Jr(Number(i))}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+Jr(i)}get time(){return Jr(Number(this.animation.currentTime)||0)}set time(i){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=hi(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(i){this.manualStartTime=this.animation.startTime=i}attachTimeline({timeline:i,observe:s}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&xk()?(this.animation.timeline=i,Qr):s(this)}}const fy={anticipate:U0,backInOut:H0,circInOut:K0};function _k(t){return t in fy}function Sk(t){typeof t.ease=="string"&&_k(t.ease)&&(t.ease=fy[t.ease])}const tu=10;class wk extends py{constructor(i){Sk(i),ay(i),super(i),i.startTime!==void 0&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:s,onUpdate:o,onComplete:u,element:S,...b}=this.options;if(!s)return;if(i!==void 0){s.set(i);return}const l=new $h({...b,autoplay:!1}),c=Math.max(tu,Sr.now()-this.startTime),x=ki(0,tu,c-tu);s.setWithVelocity(l.sample(Math.max(0,c-x)).value,l.sample(c).value,x),l.stop()}}const wx=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sn.test(t)||t==="0")&&!t.startsWith("url("));function Ck(t){const i=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==i)return!0}function kk(t,i,s,o){const u=t[0];if(u===null)return!1;if(i==="display"||i==="visibility")return!0;const S=t[t.length-1],b=wx(u,i),l=wx(S,i);return!b||!l?!1:Ck(t)||(s==="spring"||hy(s))&&o}function Vu(t){t.duration=0,t.type="keyframes"}const jk=new Set(["opacity","clipPath","filter","transform"]),Ek=Rh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rk(t){var v;const{motionValue:i,name:s,repeatDelay:o,repeatType:u,damping:S,type:b}=t;if(!(((v=i==null?void 0:i.owner)==null?void 0:v.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:x}=i.owner.getProps();return Ek()&&s&&jk.has(s)&&(s!=="transform"||!x)&&!c&&!o&&u!=="mirror"&&S!==0&&b!=="inertia"}const Tk=40;class Ak extends Oh{constructor({autoplay:i=!0,delay:s=0,type:o="keyframes",repeat:u=0,repeatDelay:S=0,repeatType:b="loop",keyframes:l,name:c,motionValue:x,element:v,...d}){var j;super(),this.stop=()=>{var C,h;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(h=this.keyframeResolver)==null||h.cancel()},this.createdAt=Sr.now();const y={autoplay:i,delay:s,type:o,repeat:u,repeatDelay:S,repeatType:b,name:c,motionValue:x,element:v,...d},_=(v==null?void 0:v.KeyframeResolver)||Fh;this.keyframeResolver=new _(l,(C,h,p)=>this.onKeyframesResolved(C,h,y,!p),c,x,v),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(i,s,o,u){var h,p;this.keyframeResolver=void 0;const{name:S,type:b,velocity:l,delay:c,isHandoff:x,onUpdate:v}=o;this.resolvedAt=Sr.now(),kk(i,S,b,l)||((Wi.instantAnimations||!c)&&(v==null||v(Ph(i,o,s))),i[0]=i[i.length-1],Vu(o),o.repeat=0);const y={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>Tk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:i},_=!x&&Rk(y),j=(p=(h=y.motionValue)==null?void 0:h.owner)==null?void 0:p.current,C=_?new wk({...y,element:j}):new $h(y);C.finished.then(()=>{this.notifyFinished()}).catch(Qr),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(i,s){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),pk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}function gy(t,i,s,o=0,u=1){const S=Array.from(t).sort((x,v)=>x.sortNodePosition(v)).indexOf(i),b=t.size,l=(b-1)*o;return typeof s=="function"?s(S,b):u===1?S*o:l-S*o}const Lk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zk(t){const i=Lk.exec(t);if(!i)return[,];const[,s,o,u]=i;return[`--${s??o}`,u]}function xy(t,i,s=1){const[o,u]=zk(t);if(!o)return;const S=window.getComputedStyle(i).getPropertyValue(o);if(S){const b=S.trim();return M0(b)?parseFloat(b):b}return zh(u)?xy(u,i,s+1):u}const Dk={type:"spring",stiffness:500,damping:25,restSpeed:10},Ik=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Mk={type:"keyframes",duration:.8},Bk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pk=(t,{keyframes:i})=>i.length>2?Mk:Ws.has(t)?t.startsWith("scale")?Ik(i[1]):Dk:Bk,Ok=t=>t!==null;function $k(t,{repeat:i,repeatType:s="loop"},o){const u=t.filter(Ok),S=i&&s!=="loop"&&i%2===1?0:u.length-1;return u[S]}function my(t,i){if(t!=null&&t.inherit&&i){const{inherit:s,...o}=t;return{...i,...o}}return t}function Wh(t,i){const s=(t==null?void 0:t[i])??(t==null?void 0:t.default)??t;return s!==t?my(s,t):s}function Fk({when:t,delay:i,delayChildren:s,staggerChildren:o,staggerDirection:u,repeat:S,repeatType:b,repeatDelay:l,from:c,elapsed:x,...v}){return!!Object.keys(v).length}const Nh=(t,i,s,o={},u,S)=>b=>{const l=Wh(o,t)||{},c=l.delay||o.delay||0;let{elapsed:x=0}=o;x=x-hi(c);const v={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:i.getVelocity(),...l,delay:-x,onUpdate:y=>{i.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{b(),l.onComplete&&l.onComplete()},name:t,motionValue:i,element:S?void 0:u};Fk(l)||Object.assign(v,Pk(t,v)),v.duration&&(v.duration=hi(v.duration)),v.repeatDelay&&(v.repeatDelay=hi(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let d=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(Vu(v),v.delay===0&&(d=!0)),(Wi.instantAnimations||Wi.skipAnimations||u!=null&&u.shouldSkipAnimations)&&(d=!0,Vu(v),v.delay=0),v.allowFlatten=!l.type&&!l.ease,d&&!S&&i.get()!==void 0){const y=$k(v.keyframes,l);if(y!==void 0){jt.update(()=>{v.onUpdate(y),v.onComplete()});return}}return l.isSync?new $h(v):new Ak(v)};function Cx(t){const i=[{},{}];return t==null||t.values.forEach((s,o)=>{i[0][o]=s.get(),i[1][o]=s.getVelocity()}),i}function Hh(t,i,s,o){if(typeof i=="function"){const[u,S]=Cx(o);i=i(s!==void 0?s:t.custom,u,S)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[u,S]=Cx(o);i=i(s!==void 0?s:t.custom,u,S)}return i}function Ts(t,i,s){const o=t.getProps();return Hh(o,i,s!==void 0?s:o.custom,t)}const yy=new Set(["width","height","top","left","right","bottom",...Fs]),kx=30,Wk=t=>!isNaN(parseFloat(t));class Nk{constructor(i,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var S;const u=Sr.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((S=this.events.change)==null||S.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=s.owner}setCurrent(i){this.current=i,this.updatedAt=Sr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=Wk(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new Th);const o=this.events[i].add(s);return i==="change"?()=>{o(),jt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-o}jump(i,s=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=Sr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>kx)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,kx);return O0(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,s;(i=this.dependents)==null||i.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Is(t,i){return new Nk(t,i)}const Ku=t=>Array.isArray(t);function Hk(t,i,s){t.hasValue(i)?t.getValue(i).set(s):t.addValue(i,Is(s))}function Uk(t){return Ku(t)?t[t.length-1]||0:t}function Vk(t,i){const s=Ts(t,i);let{transitionEnd:o={},transition:u={},...S}=s||{};S={...S,...o};for(const b in S){const l=Uk(S[b]);Hk(t,b,l)}}const yr=t=>!!(t&&t.getVelocity);function Kk(t){return!!(yr(t)&&t.add)}function qu(t,i){const s=t.getValue("willChange");if(Kk(s))return s.add(i);if(!s&&Wi.WillChange){const o=new Wi.WillChange("auto");t.addValue("willChange",o),o.add(i)}}function Uh(t){return t.replace(/([A-Z])/g,i=>`-${i.toLowerCase()}`)}const qk="framerAppearId",vy="data-"+Uh(qk);function by(t){return t.props[vy]}function Gk({protectedKeys:t,needsAnimating:i},s){const o=t.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,o}function _y(t,i,{delay:s=0,transitionOverride:o,type:u}={}){let{transition:S,transitionEnd:b,...l}=i;const c=t.getDefaultTransition();S=S?my(S,c):c;const x=S==null?void 0:S.reduceMotion;o&&(S=o);const v=[],d=u&&t.animationState&&t.animationState.getState()[u];for(const y in l){const _=t.getValue(y,t.latestValues[y]??null),j=l[y];if(j===void 0||d&&Gk(d,y))continue;const C={delay:s,...Wh(S||{},y)},h=_.get();if(h!==void 0&&!_.isAnimating&&!Array.isArray(j)&&j===h&&!C.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const w=by(t);if(w){const R=window.MotionHandoffAnimation(w,y,jt);R!==null&&(C.startTime=R,p=!0)}}qu(t,y);const f=x??t.shouldReduceMotion;_.start(Nh(y,_,j,f&&yy.has(y)?{type:!1}:C,t,p));const g=_.animation;g&&v.push(g)}if(b){const y=()=>jt.update(()=>{b&&Vk(t,b)});v.length?Promise.all(v).then(y):y()}return v}function Gu(t,i,s={}){var c;const o=Ts(t,i,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(u=s.transitionOverride);const S=o?()=>Promise.all(_y(t,o,s)):()=>Promise.resolve(),b=t.variantChildren&&t.variantChildren.size?(x=0)=>{const{delayChildren:v=0,staggerChildren:d,staggerDirection:y}=u;return Yk(t,i,x,v,d,y,s)}:()=>Promise.resolve(),{when:l}=u;if(l){const[x,v]=l==="beforeChildren"?[S,b]:[b,S];return x().then(()=>v())}else return Promise.all([S(),b(s.delay)])}function Yk(t,i,s=0,o=0,u=0,S=1,b){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",i),l.push(Gu(c,i,{...b,delay:s+(typeof o=="function"?0:o)+gy(t.variantChildren,c,o,u,S)}).then(()=>c.notify("AnimationComplete",i)));return Promise.all(l)}function Xk(t,i,s={}){t.notify("AnimationStart",i);let o;if(Array.isArray(i)){const u=i.map(S=>Gu(t,S,s));o=Promise.all(u)}else if(typeof i=="string")o=Gu(t,i,s);else{const u=typeof i=="function"?Ts(t,i,s.custom):i;o=Promise.all(_y(t,u,s))}return o.then(()=>{t.notify("AnimationComplete",i)})}const Jk={test:t=>t==="auto",parse:t=>t},Sy=t=>i=>i.test(t),wy=[$s,Qe,Si,un,kC,CC,Jk],jx=t=>wy.find(Sy(t));function Qk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||P0(t):!0}const Zk=new Set(["brightness","contrast","saturate","opacity"]);function ej(t){const[i,s]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[o]=s.match(Dh)||[];if(!o)return t;const u=s.replace(o,"");let S=Zk.has(i)?1:0;return o!==s&&(S*=100),i+"("+S+u+")"}const tj=/\b([a-z-]*)\(.*?\)/gu,Yu={...Sn,getAnimatableNone:t=>{const i=t.match(tj);return i?i.map(ej).join(" "):t}},Ex={...$s,transform:Math.round},rj={rotate:un,rotateX:un,rotateY:un,rotateZ:un,scale:ul,scaleX:ul,scaleY:ul,scaleZ:ul,skew:un,skewX:un,skewY:un,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Wo,originX:px,originY:px,originZ:Qe},Vh={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,inset:Qe,insetBlock:Qe,insetBlockStart:Qe,insetBlockEnd:Qe,insetInline:Qe,insetInlineStart:Qe,insetInlineEnd:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,paddingBlock:Qe,paddingBlockStart:Qe,paddingBlockEnd:Qe,paddingInline:Qe,paddingInlineStart:Qe,paddingInlineEnd:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,marginBlock:Qe,marginBlockStart:Qe,marginBlockEnd:Qe,marginInline:Qe,marginInlineStart:Qe,marginInlineEnd:Qe,fontSize:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe,...rj,zIndex:Ex,fillOpacity:Wo,strokeOpacity:Wo,numOctaves:Ex},ij={...Vh,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:Yu,WebkitFilter:Yu},Cy=t=>ij[t];function ky(t,i){let s=Cy(t);return s!==Yu&&(s=Sn),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const nj=new Set(["auto","none","0"]);function sj(t,i,s){let o=0,u;for(;o<t.length&&!u;){const S=t[o];typeof S=="string"&&!nj.has(S)&&No(S).values.length&&(u=t[o]),o++}if(u&&s)for(const S of i)t[S]=ky(s,u)}class oj extends Fh{constructor(i,s,o,u,S){super(i,s,o,u,S,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let d=i[v];if(typeof d=="string"&&(d=d.trim(),zh(d))){const y=xy(d,s.current);y!==void 0&&(i[v]=y),v===i.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!yy.has(o)||i.length!==2)return;const[u,S]=i,b=jx(u),l=jx(S),c=hx(u),x=hx(S);if(c!==x&&gn[o]){this.needsMeasurement=!0;return}if(b!==l)if(_x(b)&&_x(l))for(let v=0;v<i.length;v++){const d=i[v];typeof d=="string"&&(i[v]=parseFloat(d))}else gn[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:s}=this,o=[];for(let u=0;u<i.length;u++)(i[u]===null||Qk(i[u]))&&o.push(u);o.length&&sj(i,o,s)}measureInitialState(){const{element:i,unresolvedKeyframes:s,name:o}=this;if(!i||!i.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gn[o](i.measureViewportBox(),window.getComputedStyle(i.current)),s[0]=this.measuredOrigin;const u=s[s.length-1];u!==void 0&&i.getValue(o,u).jump(u,!1)}measureEndState(){var l;const{element:i,name:s,unresolvedKeyframes:o}=this;if(!i||!i.current)return;const u=i.getValue(s);u&&u.jump(this.measuredOrigin,!1);const S=o.length-1,b=o[S];o[S]=gn[s](i.measureViewportBox(),window.getComputedStyle(i.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,x])=>{i.getValue(c).set(x)}),this.resolveNoneKeyframes()}}const aj=new Set(["opacity","clipPath","filter","transform"]);function jy(t,i,s){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const u=(s==null?void 0:s[t])??o.querySelectorAll(t);return u?Array.from(u):[]}return Array.from(t).filter(o=>o!=null)}const Ey=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function Xu(t){return B0(t)&&"offsetHeight"in t}const{schedule:Kh}=Y0(queueMicrotask,!1),di={x:!1,y:!1};function Ry(){return di.x||di.y}function lj(t){return t==="x"||t==="y"?di[t]?null:(di[t]=!0,()=>{di[t]=!1}):di.x||di.y?null:(di.x=di.y=!0,()=>{di.x=di.y=!1})}function Ty(t,i){const s=jy(t),o=new AbortController,u={passive:!0,...i,signal:o.signal};return[s,u,()=>o.abort()]}function cj(t){return!(t.pointerType==="touch"||Ry())}function dj(t,i,s={}){const[o,u,S]=Ty(t,s);return o.forEach(b=>{let l=!1,c=!1,x;const v=()=>{b.removeEventListener("pointerleave",j)},d=h=>{x&&(x(h),x=void 0),v()},y=h=>{l=!1,window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",y),c&&(c=!1,d(h))},_=()=>{l=!0,window.addEventListener("pointerup",y,u),window.addEventListener("pointercancel",y,u)},j=h=>{if(h.pointerType!=="touch"){if(l){c=!0;return}d(h)}},C=h=>{if(!cj(h))return;c=!1;const p=i(b,h);typeof p=="function"&&(x=p,b.addEventListener("pointerleave",j,u))};b.addEventListener("pointerenter",C,u),b.addEventListener("pointerdown",_,u)}),S}const Ay=(t,i)=>i?t===i?!0:Ay(t,i.parentElement):!1,qh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hj(t){return uj.has(t.tagName)||t.isContentEditable===!0}const pj=new Set(["INPUT","SELECT","TEXTAREA"]);function fj(t){return pj.has(t.tagName)||t.isContentEditable===!0}const jl=new WeakSet;function Rx(t){return i=>{i.key==="Enter"&&t(i)}}function ru(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const gj=(t,i)=>{const s=t.currentTarget;if(!s)return;const o=Rx(()=>{if(jl.has(s))return;ru(s,"down");const u=Rx(()=>{ru(s,"up")}),S=()=>ru(s,"cancel");s.addEventListener("keyup",u,i),s.addEventListener("blur",S,i)});s.addEventListener("keydown",o,i),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),i)};function Tx(t){return qh(t)&&!Ry()}const Ax=new WeakSet;function xj(t,i,s={}){const[o,u,S]=Ty(t,s),b=l=>{const c=l.currentTarget;if(!Tx(l)||Ax.has(l))return;jl.add(c),s.stopPropagation&&Ax.add(l);const x=i(c,l),v=(_,j)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",y),jl.has(c)&&jl.delete(c),Tx(_)&&typeof x=="function"&&x(_,{success:j})},d=_=>{v(_,c===window||c===document||s.useGlobalTarget||Ay(c,_.target))},y=_=>{v(_,!1)};window.addEventListener("pointerup",d,u),window.addEventListener("pointercancel",y,u)};return o.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",b,u),Xu(l)&&(l.addEventListener("focus",x=>gj(x,u)),!hj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),S}function Gh(t){return B0(t)&&"ownerSVGElement"in t}const El=new WeakMap;let hn;const Ly=(t,i,s)=>(o,u)=>u&&u[0]?u[0][t+"Size"]:Gh(o)&&"getBBox"in o?o.getBBox()[i]:o[s],mj=Ly("inline","width","offsetWidth"),yj=Ly("block","height","offsetHeight");function vj({target:t,borderBoxSize:i}){var s;(s=El.get(t))==null||s.forEach(o=>{o(t,{get width(){return mj(t,i)},get height(){return yj(t,i)}})})}function bj(t){t.forEach(vj)}function _j(){typeof ResizeObserver>"u"||(hn=new ResizeObserver(bj))}function Sj(t,i){hn||_j();const s=jy(t);return s.forEach(o=>{let u=El.get(o);u||(u=new Set,El.set(o,u)),u.add(i),hn==null||hn.observe(o)}),()=>{s.forEach(o=>{const u=El.get(o);u==null||u.delete(i),u!=null&&u.size||hn==null||hn.unobserve(o)})}}const Rl=new Set;let ws;function wj(){ws=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Rl.forEach(i=>i(t))},window.addEventListener("resize",ws)}function Cj(t){return Rl.add(t),ws||wj(),()=>{Rl.delete(t),!Rl.size&&typeof ws=="function"&&(window.removeEventListener("resize",ws),ws=void 0)}}function Lx(t,i){return typeof t=="function"?Cj(t):Sj(t,i)}function kj(t){return Gh(t)&&t.tagName==="svg"}const jj=[...wy,Yt,Sn],Ej=t=>jj.find(Sy(t)),zx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cs=()=>({x:zx(),y:zx()}),Dx=()=>({min:0,max:0}),tr=()=>({x:Dx(),y:Dx()}),Rj=new WeakMap;function Jl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ho(t){return typeof t=="string"||Array.isArray(t)}const Yh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xh=["initial",...Yh];function Ql(t){return Jl(t.animate)||Xh.some(i=>Ho(t[i]))}function zy(t){return!!(Ql(t)||t.variants)}function Tj(t,i,s){for(const o in i){const u=i[o],S=s[o];if(yr(u))t.addValue(o,u);else if(yr(S))t.addValue(o,Is(u,{owner:t}));else if(S!==u)if(t.hasValue(o)){const b=t.getValue(o);b.liveStyle===!0?b.jump(u):b.hasAnimated||b.set(u)}else{const b=t.getStaticValue(o);t.addValue(o,Is(b!==void 0?b:u,{owner:t}))}}for(const o in s)i[o]===void 0&&t.removeValue(o);return i}const Ju={current:null},Dy={current:!1},Aj=typeof window<"u";function Lj(){if(Dy.current=!0,!!Aj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>Ju.current=t.matches;t.addEventListener("change",i),i()}else Ju.current=!1}const Ix=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ol={};function Iy(t){Ol=t}function zj(){return Ol}class Dj{scrapeMotionValuesFromProps(i,s,o){return{}}constructor({parent:i,props:s,presenceContext:o,reducedMotionConfig:u,skipAnimations:S,blockInitialAnimation:b,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Fh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Sr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,jt.render(this.render,!1,!0))};const{latestValues:x,renderState:v}=l;this.latestValues=x,this.baseTarget={...x},this.initialValues=s.initial?{...x}:{},this.renderState=v,this.parent=i,this.props=s,this.presenceContext=o,this.depth=i?i.depth+1:0,this.reducedMotionConfig=u,this.skipAnimationsConfig=S,this.options=c,this.blockInitialAnimation=!!b,this.isControllingVariants=Ql(s),this.isVariantNode=zy(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:d,...y}=this.scrapeMotionValuesFromProps(s,{},this);for(const _ in y){const j=y[_];x[_]!==void 0&&yr(j)&&j.set(x[_])}}mount(i){var s,o;if(this.hasBeenMounted)for(const u in this.initialValues)(s=this.values.get(u))==null||s.jump(this.initialValues[u]),this.latestValues[u]=this.initialValues[u];this.current=i,Rj.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,S)=>this.bindToMotionValue(S,u)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Dy.current||Lj(),this.shouldReduceMotion=Ju.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(o=this.parent)==null||o.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var i;this.projection&&this.projection.unmount(),_n(this.notifyUpdate),_n(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const o=this.features[s];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,s){if(this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)(),s.accelerate&&aj.has(i)&&this.current instanceof HTMLElement){const{factory:b,keyframes:l,times:c,ease:x,duration:v}=s.accelerate,d=new py({element:this.current,name:i,keyframes:l,times:c,ease:x,duration:hi(v)}),y=b(d);this.valueSubscriptions.set(i,()=>{y(),d.cancel()});return}const o=Ws.has(i);o&&this.onBindTransform&&this.onBindTransform();const u=s.on("change",b=>{this.latestValues[i]=b,this.props.onUpdate&&jt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;typeof window<"u"&&window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,i,s)),this.valueSubscriptions.set(i,()=>{u(),S&&S(),s.owner&&s.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Ol){const s=Ol[i];if(!s)continue;const{isEnabled:o,Feature:u}=s;if(!this.features[i]&&u&&o(this.props)&&(this.features[i]=new u(this)),this.features[i]){const S=this.features[i];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tr()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<Ix.length;o++){const u=Ix[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const S="on"+u,b=i[S];b&&(this.propEventSubscriptions[u]=this.on(u,b))}this.prevMotionValues=Tj(this,this.scrapeMotionValuesFromProps(i,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){const o=this.values.get(i);s!==o&&(o&&this.removeValue(i),this.bindToMotionValue(i,s),this.values.set(i,s),this.latestValues[i]=s.get())}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let o=this.values.get(i);return o===void 0&&s!==void 0&&(o=Is(s===null?void 0:s,{owner:this}),this.addValue(i,o)),o}readValue(i,s){let o=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return o!=null&&(typeof o=="string"&&(M0(o)||P0(o))?o=parseFloat(o):!Ej(o)&&Sn.test(s)&&(o=ky(i,s)),this.setBaseTarget(i,yr(o)?o.get():o)),yr(o)?o.get():o}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){var S;const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const b=Hh(this.props,s,(S=this.presenceContext)==null?void 0:S.custom);b&&(o=b[i])}if(s&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,i);return u!==void 0&&!yr(u)?u:this.initialValues[i]!==void 0&&o===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new Th),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}scheduleRenderMicrotask(){Kh.render(this.render)}}class My extends Dj{constructor(){super(...arguments),this.KeyframeResolver=oj}sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){const o=i.style;return o?o[s]:void 0}removeValueFromRenderState(i,{vars:s,style:o}){delete s[i],delete o[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;yr(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class kn{constructor(i){this.isMounted=!1,this.node=i}update(){}}function By({top:t,left:i,right:s,bottom:o}){return{x:{min:i,max:s},y:{min:t,max:o}}}function Ij({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function Mj(t,i){if(!i)return t;const s=i({x:t.left,y:t.top}),o=i({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function iu(t){return t===void 0||t===1}function Qu({scale:t,scaleX:i,scaleY:s}){return!iu(t)||!iu(i)||!iu(s)}function Nn(t){return Qu(t)||Py(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Py(t){return Mx(t.x)||Mx(t.y)}function Mx(t){return t&&t!=="0%"}function $l(t,i,s){const o=t-s,u=i*o;return s+u}function Bx(t,i,s,o,u){return u!==void 0&&(t=$l(t,u,o)),$l(t,s,o)+i}function Zu(t,i=0,s=1,o,u){t.min=Bx(t.min,i,s,o,u),t.max=Bx(t.max,i,s,o,u)}function Oy(t,{x:i,y:s}){Zu(t.x,i.translate,i.scale,i.originPoint),Zu(t.y,s.translate,s.scale,s.originPoint)}const Px=.999999999999,Ox=1.0000000000001;function Bj(t,i,s,o=!1){const u=s.length;if(!u)return;i.x=i.y=1;let S,b;for(let l=0;l<u;l++){S=s[l],b=S.projectionDelta;const{visualElement:c}=S.options;c&&c.props.style&&c.props.style.display==="contents"||(o&&S.options.layoutScroll&&S.scroll&&S!==S.root&&js(t,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),b&&(i.x*=b.x.scale,i.y*=b.y.scale,Oy(t,b)),o&&Nn(S.latestValues)&&js(t,S.latestValues))}i.x<Ox&&i.x>Px&&(i.x=1),i.y<Ox&&i.y>Px&&(i.y=1)}function ks(t,i){t.min=t.min+i,t.max=t.max+i}function $x(t,i,s,o,u=.5){const S=It(t.min,t.max,u);Zu(t,i,s,S,o)}function js(t,i){$x(t.x,i.x,i.scaleX,i.scale,i.originX),$x(t.y,i.y,i.scaleY,i.scale,i.originY)}function $y(t,i){return By(Mj(t.getBoundingClientRect(),i))}function Pj(t,i,s){const o=$y(t,s),{scroll:u}=i;return u&&(ks(o.x,u.offset.x),ks(o.y,u.offset.y)),o}const Oj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$j=Fs.length;function Fj(t,i,s){let o="",u=!0;for(let S=0;S<$j;S++){const b=Fs[S],l=t[b];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(b.startsWith("scale")?1:0);else{const x=parseFloat(l);c=b.startsWith("scale")?x===1:x===0}if(!c||s){const x=Ey(l,Vh[b]);if(!c){u=!1;const v=Oj[b]||b;o+=`${v}(${x}) `}s&&(i[b]=x)}}return o=o.trim(),s?o=s(i,u?"":o):u&&(o="none"),o}function Jh(t,i,s){const{style:o,vars:u,transformOrigin:S}=t;let b=!1,l=!1;for(const c in i){const x=i[c];if(Ws.has(c)){b=!0;continue}else if(J0(c)){u[c]=x;continue}else{const v=Ey(x,Vh[c]);c.startsWith("origin")?(l=!0,S[c]=v):o[c]=v}}if(i.transform||(b||s?o.transform=Fj(i,t.transform,s):o.transform&&(o.transform="none")),l){const{originX:c="50%",originY:x="50%",originZ:v=0}=S;o.transformOrigin=`${c} ${x} ${v}`}}function Fy(t,{style:i,vars:s},o,u){const S=t.style;let b;for(b in i)S[b]=i[b];u==null||u.applyProjectionStyles(S,o);for(b in s)S.setProperty(b,s[b])}function Fx(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const ko={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(Qe.test(t))t=parseFloat(t);else return t;const s=Fx(t,i.target.x),o=Fx(t,i.target.y);return`${s}% ${o}%`}},Wj={correct:(t,{treeScale:i,projectionDelta:s})=>{const o=t,u=Sn.parse(t);if(u.length>5)return o;const S=Sn.createTransformer(t),b=typeof u[0]!="number"?1:0,l=s.x.scale*i.x,c=s.y.scale*i.y;u[0+b]/=l,u[1+b]/=c;const x=It(l,c,.5);return typeof u[2+b]=="number"&&(u[2+b]/=x),typeof u[3+b]=="number"&&(u[3+b]/=x),S(u)}},eh={borderRadius:{...ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ko,borderTopRightRadius:ko,borderBottomLeftRadius:ko,borderBottomRightRadius:ko,boxShadow:Wj};function Wy(t,{layout:i,layoutId:s}){return Ws.has(t)||t.startsWith("origin")||(i||s!==void 0)&&(!!eh[t]||t==="opacity")}function Qh(t,i,s){var b;const o=t.style,u=i==null?void 0:i.style,S={};if(!o)return S;for(const l in o)(yr(o[l])||u&&yr(u[l])||Wy(l,t)||((b=s==null?void 0:s.getValue(l))==null?void 0:b.liveStyle)!==void 0)&&(S[l]=o[l]);return S}function Nj(t){return window.getComputedStyle(t)}class Hj extends My{constructor(){super(...arguments),this.type="html",this.renderInstance=Fy}readValueFromInstance(i,s){var o;if(Ws.has(s))return(o=this.projection)!=null&&o.isProjecting?Fu(s):lk(i,s);{const u=Nj(i),S=(J0(s)?u.getPropertyValue(s):u[s])||0;return typeof S=="string"?S.trim():S}}measureInstanceViewportBox(i,{transformPagePoint:s}){return $y(i,s)}build(i,s,o){Jh(i,s,o.transformTemplate)}scrapeMotionValuesFromProps(i,s,o){return Qh(i,s,o)}}const Uj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vj={offset:"strokeDashoffset",array:"strokeDasharray"};function Kj(t,i,s=1,o=0,u=!0){t.pathLength=1;const S=u?Uj:Vj;t[S.offset]=`${-o}`,t[S.array]=`${i} ${s}`}const qj=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Ny(t,{attrX:i,attrY:s,attrScale:o,pathLength:u,pathSpacing:S=1,pathOffset:b=0,...l},c,x,v){if(Jh(t,l,x),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:y}=t;d.transform&&(y.transform=d.transform,delete d.transform),(y.transform||d.transformOrigin)&&(y.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),y.transform&&(y.transformBox=(v==null?void 0:v.transformBox)??"fill-box",delete d.transformBox);for(const _ of qj)d[_]!==void 0&&(y[_]=d[_],delete d[_]);i!==void 0&&(d.x=i),s!==void 0&&(d.y=s),o!==void 0&&(d.scale=o),u!==void 0&&Kj(d,u,S,b,!1)}const Hy=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Uy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gj(t,i,s,o){Fy(t,i,void 0,o);for(const u in i.attrs)t.setAttribute(Hy.has(u)?u:Uh(u),i.attrs[u])}function Vy(t,i,s){const o=Qh(t,i,s);for(const u in t)if(yr(t[u])||yr(i[u])){const S=Fs.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;o[S]=t[u]}return o}class Yj extends My{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tr}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(Ws.has(s)){const o=Cy(s);return o&&o.default||0}return s=Hy.has(s)?s:Uh(s),i.getAttribute(s)}scrapeMotionValuesFromProps(i,s,o){return Vy(i,s,o)}build(i,s,o){Ny(i,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(i,s,o,u){Gj(i,s,o,u)}mount(i){this.isSVGTag=Uy(i.tagName),super.mount(i)}}const Xj=Xh.length;function Ky(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Ky(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const i={};for(let s=0;s<Xj;s++){const o=Xh[s],u=t.props[o];(Ho(u)||u===!1)&&(i[o]=u)}return i}function qy(t,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(i[o]!==t[o])return!1;return!0}const Jj=[...Yh].reverse(),Qj=Yh.length;function Zj(t){return i=>Promise.all(i.map(({animation:s,options:o})=>Xk(t,s,o)))}function e5(t){let i=Zj(t),s=Wx(),o=!0;const u=c=>(x,v)=>{var y;const d=Ts(t,v,c==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(d){const{transition:_,transitionEnd:j,...C}=d;x={...x,...C,...j}}return x};function S(c){i=c(t)}function b(c){const{props:x}=t,v=Ky(t.parent)||{},d=[],y=new Set;let _={},j=1/0;for(let h=0;h<Qj;h++){const p=Jj[h],f=s[p],g=x[p]!==void 0?x[p]:v[p],w=Ho(g),R=p===c?f.isActive:null;R===!1&&(j=h);let A=g===v[p]&&g!==x[p]&&w;if(A&&o&&t.manuallyAnimateOnMount&&(A=!1),f.protectedKeys={..._},!f.isActive&&R===null||!g&&!f.prevProp||Jl(g)||typeof g=="boolean")continue;if(p==="exit"&&f.isActive&&R!==!0){f.prevResolvedValues&&(_={..._,...f.prevResolvedValues});continue}const z=t5(f.prevProp,g);let E=z||p===c&&f.isActive&&!A&&w||h>j&&w,P=!1;const O=Array.isArray(g)?g:[g];let H=O.reduce(u(p),{});R===!1&&(H={});const{prevResolvedValues:K={}}=f,U={...K,...H},te=Q=>{E=!0,y.has(Q)&&(P=!0,y.delete(Q)),f.needsAnimating[Q]=!0;const Y=t.getValue(Q);Y&&(Y.liveStyle=!1)};for(const Q in U){const Y=H[Q],B=K[Q];if(_.hasOwnProperty(Q))continue;let D=!1;Ku(Y)&&Ku(B)?D=!qy(Y,B):D=Y!==B,D?Y!=null?te(Q):y.add(Q):Y!==void 0&&y.has(Q)?te(Q):f.protectedKeys[Q]=!0}f.prevProp=g,f.prevResolvedValues=H,f.isActive&&(_={..._,...H}),o&&t.blockInitialAnimation&&(E=!1);const V=A&&z;E&&(!V||P)&&d.push(...O.map(Q=>{const Y={type:p};if(typeof Q=="string"&&o&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,D=Ts(B,Q);if(B.enteringChildren&&D){const{delayChildren:M}=D.transition||{};Y.delay=gy(B.enteringChildren,t,M)}}return{animation:Q,options:Y}}))}if(y.size){const h={};if(typeof x.initial!="boolean"){const p=Ts(t,Array.isArray(x.initial)?x.initial[0]:x.initial);p&&p.transition&&(h.transition=p.transition)}y.forEach(p=>{const f=t.getBaseTarget(p),g=t.getValue(p);g&&(g.liveStyle=!0),h[p]=f??null}),d.push({animation:h})}let C=!!d.length;return o&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(C=!1),o=!1,C?i(d):Promise.resolve()}function l(c,x){var d;if(s[c].isActive===x)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(y=>{var _;return(_=y.animationState)==null?void 0:_.setActive(c,x)}),s[c].isActive=x;const v=b(c);for(const y in s)s[y].protectedKeys={};return v}return{animateChanges:b,setActive:l,setAnimateFunction:S,getState:()=>s,reset:()=>{s=Wx()}}}function t5(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!qy(i,t):!1}function On(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wx(){return{animate:On(!0),whileInView:On(),whileHover:On(),whileTap:On(),whileDrag:On(),whileFocus:On(),exit:On()}}function Nx(t,i){t.min=i.min,t.max=i.max}function ci(t,i){Nx(t.x,i.x),Nx(t.y,i.y)}function Hx(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}const Gy=1e-4,r5=1-Gy,i5=1+Gy,Yy=.01,n5=0-Yy,s5=0+Yy;function wr(t){return t.max-t.min}function o5(t,i,s){return Math.abs(t-i)<=s}function Ux(t,i,s,o=.5){t.origin=o,t.originPoint=It(i.min,i.max,t.origin),t.scale=wr(s)/wr(i),t.translate=It(s.min,s.max,t.origin)-t.originPoint,(t.scale>=r5&&t.scale<=i5||isNaN(t.scale))&&(t.scale=1),(t.translate>=n5&&t.translate<=s5||isNaN(t.translate))&&(t.translate=0)}function Bo(t,i,s,o){Ux(t.x,i.x,s.x,o?o.originX:void 0),Ux(t.y,i.y,s.y,o?o.originY:void 0)}function Vx(t,i,s){t.min=s.min+i.min,t.max=t.min+wr(i)}function a5(t,i,s){Vx(t.x,i.x,s.x),Vx(t.y,i.y,s.y)}function Kx(t,i,s){t.min=i.min-s.min,t.max=t.min+wr(i)}function Fl(t,i,s){Kx(t.x,i.x,s.x),Kx(t.y,i.y,s.y)}function qx(t,i,s,o,u){return t-=i,t=$l(t,1/s,o),u!==void 0&&(t=$l(t,1/u,o)),t}function l5(t,i=0,s=1,o=.5,u,S=t,b=t){if(Si.test(i)&&(i=parseFloat(i),i=It(b.min,b.max,i/100)-b.min),typeof i!="number")return;let l=It(S.min,S.max,o);t===S&&(l-=i),t.min=qx(t.min,i,s,l,u),t.max=qx(t.max,i,s,l,u)}function Gx(t,i,[s,o,u],S,b){l5(t,i[s],i[o],i[u],i.scale,S,b)}const c5=["x","scaleX","originX"],d5=["y","scaleY","originY"];function Yx(t,i,s,o){Gx(t.x,i,c5,s?s.x:void 0,o?o.x:void 0),Gx(t.y,i,d5,s?s.y:void 0,o?o.y:void 0)}function Xx(t){return t.translate===0&&t.scale===1}function Xy(t){return Xx(t.x)&&Xx(t.y)}function Jx(t,i){return t.min===i.min&&t.max===i.max}function u5(t,i){return Jx(t.x,i.x)&&Jx(t.y,i.y)}function Qx(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function Jy(t,i){return Qx(t.x,i.x)&&Qx(t.y,i.y)}function Zx(t){return wr(t.x)/wr(t.y)}function em(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}function bi(t){return[t("x"),t("y")]}function h5(t,i,s){let o="";const u=t.x.translate/i.x,S=t.y.translate/i.y,b=(s==null?void 0:s.z)||0;if((u||S||b)&&(o=`translate3d(${u}px, ${S}px, ${b}px) `),(i.x!==1||i.y!==1)&&(o+=`scale(${1/i.x}, ${1/i.y}) `),s){const{transformPerspective:x,rotate:v,rotateX:d,rotateY:y,skewX:_,skewY:j}=s;x&&(o=`perspective(${x}px) ${o}`),v&&(o+=`rotate(${v}deg) `),d&&(o+=`rotateX(${d}deg) `),y&&(o+=`rotateY(${y}deg) `),_&&(o+=`skewX(${_}deg) `),j&&(o+=`skewY(${j}deg) `)}const l=t.x.scale*i.x,c=t.y.scale*i.y;return(l!==1||c!==1)&&(o+=`scale(${l}, ${c})`),o||"none"}const Qy=["TopLeft","TopRight","BottomLeft","BottomRight"],p5=Qy.length,tm=t=>typeof t=="string"?parseFloat(t):t,rm=t=>typeof t=="number"||Qe.test(t);function f5(t,i,s,o,u,S){u?(t.opacity=It(0,s.opacity??1,g5(o)),t.opacityExit=It(i.opacity??1,0,x5(o))):S&&(t.opacity=It(i.opacity??1,s.opacity??1,o));for(let b=0;b<p5;b++){const l=`border${Qy[b]}Radius`;let c=im(i,l),x=im(s,l);if(c===void 0&&x===void 0)continue;c||(c=0),x||(x=0),c===0||x===0||rm(c)===rm(x)?(t[l]=Math.max(It(tm(c),tm(x),o),0),(Si.test(x)||Si.test(c))&&(t[l]+="%")):t[l]=x}(i.rotate||s.rotate)&&(t.rotate=It(i.rotate||0,s.rotate||0,o))}function im(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const g5=Zy(0,.5,V0),x5=Zy(.5,.95,Qr);function Zy(t,i,s){return o=>o<t?0:o>i?1:s(Fo(t,i,o))}function m5(t,i,s){const o=yr(t)?t:Is(t);return o.start(Nh("",o,i,s)),o.animation}function Uo(t,i,s,o={passive:!0}){return t.addEventListener(i,s,o),()=>t.removeEventListener(i,s)}const y5=(t,i)=>t.depth-i.depth;class v5{constructor(){this.children=[],this.isDirty=!1}add(i){jh(this.children,i),this.isDirty=!0}remove(i){Il(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(y5),this.isDirty=!1,this.children.forEach(i)}}function b5(t,i){const s=Sr.now(),o=({timestamp:u})=>{const S=u-s;S>=i&&(_n(o),t(S-i))};return jt.setup(o,!0),()=>_n(o)}function Tl(t){return yr(t)?t.get():t}class _5{constructor(){this.members=[]}add(i){jh(this.members,i);for(let s=this.members.length-1;s>=0;s--){const o=this.members[s];if(o===i||o===this.lead||o===this.prevLead)continue;const u=o.instance;u&&u.isConnected===!1&&o.isPresent!==!1&&!o.snapshot&&Il(this.members,o)}i.scheduleRender()}remove(i){if(Il(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(u=>i===u);if(s===0)return!1;let o;for(let u=s;u>=0;u--){const S=this.members[u],b=S.instance;if(S.isPresent!==!1&&(!b||b.isConnected!==!1)){o=S;break}}return o?(this.promote(o),!0):!1}promote(i,s){const o=this.lead;if(i!==o&&(this.prevLead=o,this.lead=i,i.show(),o)){o.instance&&o.scheduleRender(),i.scheduleRender();const u=o.options.layoutDependency,S=i.options.layoutDependency;if(!(u!==void 0&&S!==void 0&&u===S)){const c=o.instance;c&&c.isConnected===!1&&!o.snapshot||(i.resumeFrom=o,s&&(i.resumeFrom.preserveOpacity=!0),o.snapshot&&(i.snapshot=o.snapshot,i.snapshot.latestValues=o.animationValues||o.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0))}const{crossfade:l}=i.options;l===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:o}=i;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Al={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nu=["","X","Y","Z"],S5=1e3;let w5=0;function su(t,i,s,o){const{latestValues:u}=i;u[t]&&(s[t]=u[t],i.setStaticValue(t,0),o&&(o[t]=0))}function e1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const s=by(i);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:u,layoutId:S}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",jt,!(u||S))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&e1(o)}function t1({attachResizeListener:t,defaultParent:i,measureScroll:s,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(b={},l=i==null?void 0:i()){this.id=w5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(j5),this.nodes.forEach(A5),this.nodes.forEach(L5),this.nodes.forEach(E5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new v5)}addEventListener(b,l){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new Th),this.eventHandlers.get(b).add(l)}notifyListeners(b,...l){const c=this.eventHandlers.get(b);c&&c.notify(...l)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=Gh(b)&&!kj(b),this.instance=b;const{layoutId:l,layout:c,visualElement:x}=this.options;if(x&&!x.current&&x.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let v,d=0;const y=()=>this.root.updateBlockedByResize=!1;jt.read(()=>{d=window.innerWidth}),t(b,()=>{const _=window.innerWidth;_!==d&&(d=_,this.root.updateBlockedByResize=!0,v&&v(),v=b5(y,250),Al.hasAnimatedSinceResize&&(Al.hasAnimatedSinceResize=!1,this.nodes.forEach(om)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&x&&(l||c)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:d,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||x.getDefaultTransition()||B5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:h}=x.getProps(),p=!this.targetLayout||!Jy(this.targetLayout,_),f=!d&&y;if(this.options.layoutRoot||this.resumeFrom||f||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...Wh(j,"layout"),onPlay:C,onComplete:h};(x.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(v,f)}else d||om(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_n(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(z5),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&e1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const d=this.path[v];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T5),this.nodes.forEach(C5),this.nodes.forEach(k5)):this.nodes.forEach(sm),this.clearAllSnapshots();const l=Sr.now();ur.delta=ki(0,1e3/60,l-ur.timestamp),ur.timestamp=l,ur.isProcessing=!0,Xd.update.process(ur),Xd.preRender.process(ur),Xd.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(R5),this.sharedNodes.forEach(D5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wr(this.snapshot.measuredBox.x)&&!wr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(l=!1),l&&this.instance){const c=o(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!u)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Xy(this.projectionDelta),c=this.getTransformTemplate(),x=c?c(this.latestValues,""):void 0,v=x!==this.prevTransformTemplateValue;b&&this.instance&&(l||Nn(this.latestValues)||v)&&(u(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return b&&(c=this.removeTransform(c)),P5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:b}=this.options;if(!b)return tr();const l=b.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(O5))){const{scroll:v}=this.root;v&&(ks(l.x,v.offset.x),ks(l.y,v.offset.y))}return l}removeElementScroll(b){var c;const l=tr();if(ci(l,b),(c=this.scroll)!=null&&c.wasRoot)return l;for(let x=0;x<this.path.length;x++){const v=this.path[x],{scroll:d,options:y}=v;v!==this.root&&d&&y.layoutScroll&&(d.wasRoot&&ci(l,b),ks(l.x,d.offset.x),ks(l.y,d.offset.y))}return l}applyTransform(b,l=!1){const c=tr();ci(c,b);for(let x=0;x<this.path.length;x++){const v=this.path[x];!l&&v.options.layoutScroll&&v.scroll&&v!==v.root&&js(c,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Nn(v.latestValues)&&js(c,v.latestValues)}return Nn(this.latestValues)&&js(c,this.latestValues),c}removeTransform(b){const l=tr();ci(l,b);for(let c=0;c<this.path.length;c++){const x=this.path[c];if(!x.instance||!Nn(x.latestValues))continue;Qu(x.latestValues)&&x.updateSnapshot();const v=tr(),d=x.measurePageBox();ci(v,d),Yx(l,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,v)}return Nn(this.latestValues)&&Yx(l,this.latestValues),l}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var _;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(b||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:d}=this.options;if(!this.layout||!(v||d))return;this.resolvedRelativeTargetAt=ur.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tr(),this.targetWithTransforms=tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),Oy(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Qu(this.parent.latestValues)||Py(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(b,l,c){this.relativeParent=b,this.linkedParentVersion=b.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Fl(this.relativeTargetOrigin,l,c),ci(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var j;const b=this.getLead(),l=!!this.resumingFrom||this!==b;let c=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(c=!1),c)return;const{layout:x,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||v))return;ci(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,y=this.treeScale.y;Bj(this.layoutCorrected,this.treeScale,this.path,l),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=tr());const{target:_}=b;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hx(this.prevProjectionDelta.x,this.projectionDelta.x),Hx(this.prevProjectionDelta.y,this.projectionDelta.y)),Bo(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==y||!em(this.projectionDelta.x,this.prevProjectionDelta.x)||!em(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),b){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Cs(),this.projectionDelta=Cs(),this.projectionDeltaWithTransform=Cs()}setAnimationOrigin(b,l=!1){const c=this.snapshot,x=c?c.latestValues:{},v={...this.latestValues},d=Cs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=tr(),_=c?c.source:void 0,j=this.layout?this.layout.source:void 0,C=_!==j,h=this.getStack(),p=!h||h.members.length<=1,f=!!(C&&!p&&this.options.crossfade===!0&&!this.path.some(M5));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const R=w/1e3;am(d.x,b.x,R),am(d.y,b.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I5(this.relativeTarget,this.relativeTargetOrigin,y,R),g&&u5(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=tr()),ci(g,this.relativeTarget)),C&&(this.animationValues=v,f5(v,x,this.latestValues,R,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var l,c,x;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(x=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||x.stop(),this.pendingAnimation&&(_n(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jt.update(()=>{Al.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Is(0)),this.currentAnimation=m5(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),b.onUpdate&&b.onUpdate(v)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:l,target:c,layout:x,latestValues:v}=b;if(!(!l||!c||!x)){if(this!==b&&this.layout&&x&&r1(this.options.animationType,this.layout.layoutBox,x.layoutBox)){c=this.target||tr();const d=wr(this.layout.layoutBox.x);c.x.min=b.target.x.min,c.x.max=c.x.min+d;const y=wr(this.layout.layoutBox.y);c.y.min=b.target.y.min,c.y.max=c.y.min+y}ci(l,c),js(l,v),Bo(this.projectionDeltaWithTransform,this.layoutCorrected,l,v)}}registerSharedNode(b,l){this.sharedNodes.has(b)||this.sharedNodes.set(b,new _5),this.sharedNodes.get(b).add(l);const x=l.options.initialPromotionConfig;l.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(l):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var l;const{layoutId:b}=this.options;return b?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:b}=this.options;return b?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:l,preserveFollowOpacity:c}={}){const x=this.getStack();x&&x.promote(this,c),b&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let l=!1;const{latestValues:c}=b;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const x={};c.z&&su("z",b,x,this.animationValues);for(let v=0;v<nu.length;v++)su(`rotate${nu[v]}`,b,x,this.animationValues),su(`skew${nu[v]}`,b,x,this.animationValues);b.render();for(const v in x)b.setStaticValue(v,x[v]),this.animationValues&&(this.animationValues[v]=x[v]);b.scheduleRender()}applyProjectionStyles(b,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=Tl(l==null?void 0:l.pointerEvents)||"",b.transform=c?c(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Tl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Nn(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1);return}b.visibility="";const v=x.animationValues||x.latestValues;this.applyTransformsToTarget();let d=h5(this.projectionDeltaWithTransform,this.treeScale,v);c&&(d=c(v,d)),b.transform=d;const{x:y,y:_}=this.projectionDelta;b.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,x.animationValues?b.opacity=x===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:b.opacity=x===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const j in eh){if(v[j]===void 0)continue;const{correct:C,applyTo:h,isCSSVariable:p}=eh[j],f=d==="none"?v[j]:C(v[j],x);if(h){const g=h.length;for(let w=0;w<g;w++)b[h[w]]=f}else p?this.options.visualElement.renderState.vars[j]=f:b[j]=f}this.options.layoutId&&(b.pointerEvents=x===this?Tl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var l;return(l=b.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(nm),this.root.sharedNodes.clear()}}}function C5(t){t.updateLayout()}function k5(t){var s;const i=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:u}=t.layout,{animationType:S}=t.options,b=i.source!==t.layout.source;S==="size"?bi(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=wr(y);y.min=o[d].min,y.max=y.min+_}):r1(S,i.layoutBox,o)&&bi(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=wr(o[d]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+_)});const l=Cs();Bo(l,o,i.layoutBox);const c=Cs();b?Bo(c,t.applyTransform(u,!0),i.measuredBox):Bo(c,o,i.layoutBox);const x=!Xy(l);let v=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:y,layout:_}=d;if(y&&_){const j=tr();Fl(j,i.layoutBox,y.layoutBox);const C=tr();Fl(C,o,_.layoutBox),Jy(j,C)||(v=!0),d.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:c,layoutDelta:l,hasLayoutChanged:x,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function j5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function R5(t){t.clearSnapshot()}function nm(t){t.clearMeasurements()}function sm(t){t.isLayoutDirty=!1}function T5(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function om(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function A5(t){t.resolveTargetDelta()}function L5(t){t.calcProjection()}function z5(t){t.resetSkewAndRotation()}function D5(t){t.removeLeadSnapshot()}function am(t,i,s){t.translate=It(i.translate,0,s),t.scale=It(i.scale,1,s),t.origin=i.origin,t.originPoint=i.originPoint}function lm(t,i,s,o){t.min=It(i.min,s.min,o),t.max=It(i.max,s.max,o)}function I5(t,i,s,o){lm(t.x,i.x,s.x,o),lm(t.y,i.y,s.y,o)}function M5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B5={duration:.45,ease:[.4,0,.1,1]},cm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),dm=cm("applewebkit/")&&!cm("chrome/")?Math.round:Qr;function um(t){t.min=dm(t.min),t.max=dm(t.max)}function P5(t){um(t.x),um(t.y)}function r1(t,i,s){return t==="position"||t==="preserve-aspect"&&!o5(Zx(i),Zx(s),.2)}function O5(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const $5=t1({attachResizeListener:(t,i)=>Uo(t,"resize",i),measureScroll:()=>{var t,i;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((i=document.body)==null?void 0:i.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ou={current:void 0},i1=t1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ou.current){const t=new $5({});t.mount(window),t.setOptions({layoutScroll:!0}),ou.current=t}return ou.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zh=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function hm(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function F5(...t){return i=>{let s=!1;const o=t.map(u=>{const S=hm(u,i);return!s&&typeof S=="function"&&(s=!0),S});if(s)return()=>{for(let u=0;u<o.length;u++){const S=o[u];typeof S=="function"?S():hm(t[u],null)}}}}function W5(...t){return L.useCallback(F5(...t),t)}class N5 extends L.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const o=s.offsetParent,u=Xu(o)&&o.offsetWidth||0,S=Xu(o)&&o.offsetHeight||0,b=this.props.sizeRef.current;b.height=s.offsetHeight||0,b.width=s.offsetWidth||0,b.top=s.offsetTop,b.left=s.offsetLeft,b.right=u-b.width-b.left,b.bottom=S-b.height-b.top}return null}componentDidUpdate(){}render(){return this.props.children}}function H5({children:t,isPresent:i,anchorX:s,anchorY:o,root:u,pop:S}){var y;const b=L.useId(),l=L.useRef(null),c=L.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:x}=L.useContext(Zh),v=((y=t.props)==null?void 0:y.ref)??(t==null?void 0:t.ref),d=W5(l,v);return L.useInsertionEffect(()=>{const{width:_,height:j,top:C,left:h,right:p,bottom:f}=c.current;if(i||S===!1||!l.current||!_||!j)return;const g=s==="left"?`left: ${h}`:`right: ${p}`,w=o==="bottom"?`bottom: ${f}`:`top: ${C}`;l.current.dataset.motionPopId=b;const R=document.createElement("style");x&&(R.nonce=x);const A=u??document.head;return A.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${b}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${j}px !important;
            ${g}px !important;
            ${w}px !important;
          }
        `),()=>{A.contains(R)&&A.removeChild(R)}},[i]),e.jsx(N5,{isPresent:i,childRef:l,sizeRef:c,pop:S,children:S===!1?t:L.cloneElement(t,{ref:d})})}const U5=({children:t,initial:i,isPresent:s,onExitComplete:o,custom:u,presenceAffectsLayout:S,mode:b,anchorX:l,anchorY:c,root:x})=>{const v=kh(V5),d=L.useId();let y=!0,_=L.useMemo(()=>(y=!1,{id:d,initial:i,isPresent:s,custom:u,onExitComplete:j=>{v.set(j,!0);for(const C of v.values())if(!C)return;o&&o()},register:j=>(v.set(j,!1),()=>v.delete(j))}),[s,v,o]);return S&&y&&(_={..._}),L.useMemo(()=>{v.forEach((j,C)=>v.set(C,!1))},[s]),L.useEffect(()=>{!s&&!v.size&&o&&o()},[s]),t=e.jsx(H5,{pop:b==="popLayout",isPresent:s,anchorX:l,anchorY:c,root:x,children:t}),e.jsx(Xl.Provider,{value:_,children:t})};function V5(){return new Map}function n1(t=!0){const i=L.useContext(Xl);if(i===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:u}=i,S=L.useId();L.useEffect(()=>{if(t)return u(S)},[t]);const b=L.useCallback(()=>t&&o&&o(S),[S,o,t]);return!s&&o?[!1,b]:[!0]}const hl=t=>t.key||"";function pm(t){const i=[];return L.Children.forEach(t,s=>{L.isValidElement(s)&&i.push(s)}),i}const au=({children:t,custom:i,initial:s=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:S="sync",propagate:b=!1,anchorX:l="left",anchorY:c="top",root:x})=>{const[v,d]=n1(b),y=L.useMemo(()=>pm(t),[t]),_=b&&!v?[]:y.map(hl),j=L.useRef(!0),C=L.useRef(y),h=kh(()=>new Map),p=L.useRef(new Set),[f,g]=L.useState(y),[w,R]=L.useState(y);I0(()=>{j.current=!1,C.current=y;for(let E=0;E<w.length;E++){const P=hl(w[E]);_.includes(P)?(h.delete(P),p.current.delete(P)):h.get(P)!==!0&&h.set(P,!1)}},[w,_.length,_.join("-")]);const A=[];if(y!==f){let E=[...y];for(let P=0;P<w.length;P++){const O=w[P],H=hl(O);_.includes(H)||(E.splice(P,0,O),A.push(O))}return S==="wait"&&A.length&&(E=A),R(pm(E)),g(y),null}const{forceRender:z}=L.useContext(Ch);return e.jsx(e.Fragment,{children:w.map(E=>{const P=hl(E),O=b&&!v?!1:y===w||_.includes(P),H=()=>{if(p.current.has(P))return;if(p.current.add(P),h.has(P))h.set(P,!0);else return;let K=!0;h.forEach(U=>{U||(K=!1)}),K&&(z==null||z(),R(C.current),b&&(d==null||d()),o&&o())};return e.jsx(U5,{isPresent:O,initial:!j.current||s?void 0:!1,custom:i,presenceAffectsLayout:u,mode:S,root:x,onExitComplete:O?void 0:H,anchorX:l,anchorY:c,children:E},P)})})},s1=L.createContext({strict:!1}),fm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let gm=!1;function K5(){if(gm)return;const t={};for(const i in fm)t[i]={isEnabled:s=>fm[i].some(o=>!!s[o])};Iy(t),gm=!0}function o1(){return K5(),zj()}function q5(t){const i=o1();for(const s in t)i[s]={...i[s],...t[s]};Iy(i)}const G5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Wl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G5.has(t)}let a1=t=>!Wl(t);function Y5(t){typeof t=="function"&&(a1=i=>i.startsWith("on")?!Wl(i):t(i))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function X5(t,i,s){const o={};for(const u in t)u==="values"&&typeof t.values=="object"||(a1(u)||s===!0&&Wl(u)||!i&&!Wl(u)||t.draggable&&u.startsWith("onDrag"))&&(o[u]=t[u]);return o}const Zl=L.createContext({});function J5(t,i){if(Ql(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Ho(s)?s:void 0,animate:Ho(o)?o:void 0}}return t.inherit!==!1?i:{}}function Q5(t){const{initial:i,animate:s}=J5(t,L.useContext(Zl));return L.useMemo(()=>({initial:i,animate:s}),[xm(i),xm(s)])}function xm(t){return Array.isArray(t)?t.join(" "):t}const ep=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function l1(t,i,s){for(const o in i)!yr(i[o])&&!Wy(o,s)&&(t[o]=i[o])}function Z5({transformTemplate:t},i){return L.useMemo(()=>{const s=ep();return Jh(s,i,t),Object.assign({},s.vars,s.style)},[i])}function e4(t,i){const s=t.style||{},o={};return l1(o,s,t),Object.assign(o,Z5(t,i)),o}function t4(t,i){const s={},o=e4(t,i);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const c1=()=>({...ep(),attrs:{}});function r4(t,i,s,o){const u=L.useMemo(()=>{const S=c1();return Ny(S,i,Uy(o),t.transformTemplate,t.style),{...S.attrs,style:{...S.style}}},[i]);if(t.style){const S={};l1(S,t.style,t),u.style={...S,...u.style}}return u}const i4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tp(t){return typeof t!="string"||t.includes("-")?!1:!!(i4.indexOf(t)>-1||/[A-Z]/u.test(t))}function n4(t,i,s,{latestValues:o},u,S=!1,b){const c=(b??tp(t)?r4:t4)(i,o,u,t),x=X5(i,typeof t=="string",S),v=t!==L.Fragment?{...x,...c,ref:s}:{},{children:d}=i,y=L.useMemo(()=>yr(d)?d.get():d,[d]);return L.createElement(t,{...v,children:y})}function s4({scrapeMotionValuesFromProps:t,createRenderState:i},s,o,u){return{latestValues:o4(s,o,u,t),renderState:i()}}function o4(t,i,s,o){const u={},S=o(t,{});for(const y in S)u[y]=Tl(S[y]);let{initial:b,animate:l}=t;const c=Ql(t),x=zy(t);i&&x&&!c&&t.inherit!==!1&&(b===void 0&&(b=i.initial),l===void 0&&(l=i.animate));let v=s?s.initial===!1:!1;v=v||b===!1;const d=v?l:b;if(d&&typeof d!="boolean"&&!Jl(d)){const y=Array.isArray(d)?d:[d];for(let _=0;_<y.length;_++){const j=Hh(t,y[_]);if(j){const{transitionEnd:C,transition:h,...p}=j;for(const f in p){let g=p[f];if(Array.isArray(g)){const w=v?g.length-1:0;g=g[w]}g!==null&&(u[f]=g)}for(const f in C)u[f]=C[f]}}}return u}const d1=t=>(i,s)=>{const o=L.useContext(Zl),u=L.useContext(Xl),S=()=>s4(t,i,o,u);return s?S():kh(S)},a4=d1({scrapeMotionValuesFromProps:Qh,createRenderState:ep}),l4=d1({scrapeMotionValuesFromProps:Vy,createRenderState:c1}),c4=Symbol.for("motionComponentSymbol");function d4(t,i,s){const o=L.useRef(s);L.useInsertionEffect(()=>{o.current=s});const u=L.useRef(null);return L.useCallback(S=>{var l;S&&((l=t.onMount)==null||l.call(t,S)),i&&(S?i.mount(S):i.unmount());const b=o.current;if(typeof b=="function")if(S){const c=b(S);typeof c=="function"&&(u.current=c)}else u.current?(u.current(),u.current=null):b(S);else b&&(b.current=S)},[i])}const u1=L.createContext({});function bs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function u4(t,i,s,o,u,S){var g,w;const{visualElement:b}=L.useContext(Zl),l=L.useContext(s1),c=L.useContext(Xl),x=L.useContext(Zh),v=x.reducedMotion,d=x.skipAnimations,y=L.useRef(null),_=L.useRef(!1);o=o||l.renderer,!y.current&&o&&(y.current=o(t,{visualState:i,parent:b,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:v,skipAnimations:d,isSVG:S}),_.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const j=y.current,C=L.useContext(u1);j&&!j.projection&&u&&(j.type==="html"||j.type==="svg")&&h4(y.current,s,u,C);const h=L.useRef(!1);L.useInsertionEffect(()=>{j&&h.current&&j.update(s,c)});const p=s[vy],f=L.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return I0(()=>{_.current=!0,j&&(h.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),f.current&&j.animationState&&j.animationState.animateChanges())}),L.useEffect(()=>{j&&(!f.current&&j.animationState&&j.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,p)}),f.current=!1),j.enteringChildren=void 0)}),j}function h4(t,i,s,o){const{layoutId:u,layout:S,drag:b,dragConstraints:l,layoutScroll:c,layoutRoot:x,layoutCrossfade:v}=i;t.projection=new s(t.latestValues,i["data-framer-portal-id"]?void 0:h1(t.parent)),t.projection.setOptions({layoutId:u,layout:S,alwaysMeasureLayout:!!b||l&&bs(l),visualElement:t,animationType:typeof S=="string"?S:"both",initialPromotionConfig:o,crossfade:v,layoutScroll:c,layoutRoot:x})}function h1(t){if(t)return t.options.allowProjection!==!1?t.projection:h1(t.parent)}function lu(t,{forwardMotionProps:i=!1,type:s}={},o,u){o&&q5(o);const S=s?s==="svg":tp(t),b=S?l4:a4;function l(x,v){let d;const y={...L.useContext(Zh),...x,layoutId:p4(x)},{isStatic:_}=y,j=Q5(x),C=b(x,_);if(!_&&D0){f4();const h=g4(y);d=h.MeasureLayout,j.visualElement=u4(t,C,y,u,h.ProjectionNode,S)}return e.jsxs(Zl.Provider,{value:j,children:[d&&j.visualElement?e.jsx(d,{visualElement:j.visualElement,...y}):null,n4(t,x,d4(C,j.visualElement,v),C,_,i,S)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=L.forwardRef(l);return c[c4]=t,c}function p4({layoutId:t}){const i=L.useContext(Ch).id;return i&&t!==void 0?i+"-"+t:t}function f4(t,i){L.useContext(s1).strict}function g4(t){const i=o1(),{drag:s,layout:o}=i;if(!s&&!o)return{};const u={...s,...o};return{MeasureLayout:s!=null&&s.isEnabled(t)||o!=null&&o.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function x4(t,i){if(typeof Proxy>"u")return lu;const s=new Map,o=(S,b)=>lu(S,b,t,i),u=(S,b)=>o(S,b);return new Proxy(u,{get:(S,b)=>b==="create"?o:(s.has(b)||s.set(b,lu(b,void 0,t,i)),s.get(b))})}const m4=(t,i)=>i.isSVG??tp(t)?new Yj(i):new Hj(i,{allowProjection:t!==L.Fragment});class y4 extends kn{constructor(i){super(i),i.animationState||(i.animationState=e5(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();Jl(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let v4=0;class b4 extends kn{constructor(){super(...arguments),this.id=v4++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===o)return;const u=this.node.animationState.setActive("exit",!i);s&&!i&&u.then(()=>{s(this.id)})}mount(){const{register:i,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const _4={animation:{Feature:y4},exit:{Feature:b4}};function ea(t){return{point:{x:t.pageX,y:t.pageY}}}const S4=t=>i=>qh(i)&&t(i,ea(i));function Po(t,i,s,o){return Uo(t,i,S4(s),o)}const p1=({current:t})=>t?t.ownerDocument.defaultView:null,mm=(t,i)=>Math.abs(t-i);function w4(t,i){const s=mm(t.x,i.x),o=mm(t.y,i.y);return Math.sqrt(s**2+o**2)}const ym=new Set(["auto","scroll"]);class f1{constructor(i,s,{transformPagePoint:o,contextWindow:u=window,dragSnapToOrigin:S=!1,distanceThreshold:b=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=du(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,C=w4(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!C)return;const{point:h}=_,{timestamp:p}=ur;this.history.push({...h,timestamp:p});const{onStart:f,onMove:g}=this.handlers;j||(f&&f(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,_)},this.handlePointerMove=(_,j)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=cu(j,this.transformPagePoint),jt.update(this.updatePoint,!0)},this.handlePointerUp=(_,j)=>{this.end();const{onEnd:C,onSessionEnd:h,resumeAnimation:p}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=du(_.type==="pointercancel"?this.lastMoveEventInfo:cu(j,this.transformPagePoint),this.history);this.startEvent&&C&&C(_,f),h&&h(_,f)},!qh(i))return;this.dragSnapToOrigin=S,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=b,this.contextWindow=u||window;const c=ea(i),x=cu(c,this.transformPagePoint),{point:v}=x,{timestamp:d}=ur;this.history=[{...v,timestamp:d}];const{onSessionStart:y}=s;y&&y(i,du(x,this.history)),this.removeListeners=Jo(Po(this.contextWindow,"pointermove",this.handlePointerMove),Po(this.contextWindow,"pointerup",this.handlePointerUp),Po(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(i){let s=i.parentElement;for(;s;){const o=getComputedStyle(s);(ym.has(o.overflowX)||ym.has(o.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(i){const s=this.scrollPositions.get(i);if(!s)return;const o=i===window,u=o?{x:window.scrollX,y:window.scrollY}:{x:i.scrollLeft,y:i.scrollTop},S={x:u.x-s.x,y:u.y-s.y};S.x===0&&S.y===0||(o?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=S.x,this.lastMoveEventInfo.point.y+=S.y):this.history.length>0&&(this.history[0].x-=S.x,this.history[0].y-=S.y),this.scrollPositions.set(i,u),jt.update(this.updatePoint,!0))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),_n(this.updatePoint)}}function cu(t,i){return i?{point:i(t.point)}:t}function vm(t,i){return{x:t.x-i.x,y:t.y-i.y}}function du({point:t},i){return{point:t,delta:vm(t,g1(i)),offset:vm(t,C4(i)),velocity:k4(i,.1)}}function C4(t){return t[0]}function g1(t){return t[t.length-1]}function k4(t,i){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const u=g1(t);for(;s>=0&&(o=t[s],!(u.timestamp-o.timestamp>hi(i)));)s--;if(!o)return{x:0,y:0};o===t[0]&&t.length>2&&u.timestamp-o.timestamp>hi(i)*2&&(o=t[1]);const S=Jr(u.timestamp-o.timestamp);if(S===0)return{x:0,y:0};const b={x:(u.x-o.x)/S,y:(u.y-o.y)/S};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function j4(t,{min:i,max:s},o){return i!==void 0&&t<i?t=o?It(i,t,o.min):Math.max(t,i):s!==void 0&&t>s&&(t=o?It(s,t,o.max):Math.min(t,s)),t}function bm(t,i,s){return{min:i!==void 0?t.min+i:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function E4(t,{top:i,left:s,bottom:o,right:u}){return{x:bm(t.x,s,u),y:bm(t.y,i,o)}}function _m(t,i){let s=i.min-t.min,o=i.max-t.max;return i.max-i.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function R4(t,i){return{x:_m(t.x,i.x),y:_m(t.y,i.y)}}function T4(t,i){let s=.5;const o=wr(t),u=wr(i);return u>o?s=Fo(i.min,i.max-o,t.min):o>u&&(s=Fo(t.min,t.max-u,i.min)),ki(0,1,s)}function A4(t,i){const s={};return i.min!==void 0&&(s.min=i.min-t.min),i.max!==void 0&&(s.max=i.max-t.min),s}const th=.35;function L4(t=th){return t===!1?t=0:t===!0&&(t=th),{x:Sm(t,"left","right"),y:Sm(t,"top","bottom")}}function Sm(t,i,s){return{min:wm(t,i),max:wm(t,s)}}function wm(t,i){return typeof t=="number"?t:t[i]||0}const z4=new WeakMap;class D4{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const S=d=>{s&&this.snapToCursor(ea(d).point),this.stopAnimation()},b=(d,y)=>{const{drag:_,dragPropagation:j,onDragStart:C}=this.getProps();if(_&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lj(_),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bi(p=>{let f=this.getAxisMotionValue(p).get()||0;if(Si.test(f)){const{projection:g}=this.visualElement;if(g&&g.layout){const w=g.layout.layoutBox[p];w&&(f=wr(w)*(parseFloat(f)/100))}}this.originPoint[p]=f}),C&&jt.update(()=>C(d,y),!1,!0),qu(this.visualElement,"transform");const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},l=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:j,onDirectionLock:C,onDrag:h}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:p}=y;if(j&&this.currentDirection===null){this.currentDirection=M4(p),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,p),this.updateAxis("y",y.point,p),this.visualElement.render(),h&&jt.update(()=>h(d,y),!1,!0)},c=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y,this.stop(d,y),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:v}=this.getProps();this.panSession=new f1(i,{onSessionStart:S,onStart:b,onMove:l,onSessionEnd:c,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:o,contextWindow:p1(this.visualElement),element:this.visualElement.current})}stop(i,s){const o=i||this.latestPointerEvent,u=s||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!u||!o)return;const{velocity:b}=u;this.startAnimation(b);const{onDragEnd:l}=this.getProps();l&&jt.postRender(()=>l(o,u))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(i,s,o){const{drag:u}=this.getProps();if(!o||!pl(i,u,this.currentDirection))return;const S=this.getAxisMotionValue(i);let b=this.originPoint[i]+o[i];this.constraints&&this.constraints[i]&&(b=j4(b,this.constraints[i],this.elastic[i])),S.set(b)}resolveConstraints(){var S;const{dragConstraints:i,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,u=this.constraints;i&&bs(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&o?this.constraints=E4(o.layoutBox,i):this.constraints=!1,this.elastic=L4(s),u!==this.constraints&&!bs(i)&&o&&this.constraints&&!this.hasMutatedConstraints&&bi(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=A4(o.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!bs(i))return!1;const o=i.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const S=Pj(o,u.root,this.visualElement.getTransformPagePoint());let b=R4(u.layout.layoutBox,S);if(s){const l=s(Ij(b));this.hasMutatedConstraints=!!l,l&&(b=By(l))}return b}startAnimation(i){const{drag:s,dragMomentum:o,dragElastic:u,dragTransition:S,dragSnapToOrigin:b,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},x=bi(v=>{if(!pl(v,s,this.currentDirection))return;let d=c&&c[v]||{};b&&(d={min:0,max:0});const y=u?200:1e6,_=u?40:1e7,j={type:"inertia",velocity:o?i[v]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...S,...d};return this.startAxisValueAnimation(v,j)});return Promise.all(x).then(l)}startAxisValueAnimation(i,s){const o=this.getAxisMotionValue(i);return qu(this.visualElement,i),o.start(Nh(i,o,0,s,this.visualElement,!1))}stopAnimation(){bi(i=>this.getAxisMotionValue(i).stop())}getAxisMotionValue(i){const s=`_drag${i.toUpperCase()}`,o=this.visualElement.getProps(),u=o[s];return u||this.visualElement.getValue(i,(o.initial?o.initial[i]:void 0)||0)}snapToCursor(i){bi(s=>{const{drag:o}=this.getProps();if(!pl(s,o,this.currentDirection))return;const{projection:u}=this.visualElement,S=this.getAxisMotionValue(s);if(u&&u.layout){const{min:b,max:l}=u.layout.layoutBox[s],c=S.get()||0;S.set(i[s]-It(b,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!bs(s)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};bi(b=>{const l=this.getAxisMotionValue(b);if(l&&this.constraints!==!1){const c=l.get();u[b]=T4({min:c,max:c},this.constraints[b])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.constraints=!1,this.resolveConstraints(),bi(b=>{if(!pl(b,i,null))return;const l=this.getAxisMotionValue(b),{min:c,max:x}=this.constraints[b];l.set(It(c,x,u[b]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;z4.set(this.visualElement,this);const i=this.visualElement.current,s=Po(i,"pointerdown",x=>{const{drag:v,dragListener:d=!0}=this.getProps(),y=x.target,_=y!==i&&fj(y);v&&d&&!_&&this.start(x)});let o;const u=()=>{const{dragConstraints:x}=this.getProps();bs(x)&&x.current&&(this.constraints=this.resolveRefConstraints(),o||(o=I4(i,x.current,()=>this.scalePositionWithinConstraints())))},{projection:S}=this.visualElement,b=S.addEventListener("measure",u);S&&!S.layout&&(S.root&&S.root.updateScroll(),S.updateLayout()),jt.read(u);const l=Uo(window,"resize",()=>this.scalePositionWithinConstraints()),c=S.addEventListener("didUpdate",(({delta:x,hasLayoutChanged:v})=>{this.isDragging&&v&&(bi(d=>{const y=this.getAxisMotionValue(d);y&&(this.originPoint[d]+=x[d].translate,y.set(y.get()+x[d].translate))}),this.visualElement.render())}));return()=>{l(),s(),b(),c&&c(),o&&o()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:S=!1,dragElastic:b=th,dragMomentum:l=!0}=i;return{...i,drag:s,dragDirectionLock:o,dragPropagation:u,dragConstraints:S,dragElastic:b,dragMomentum:l}}}function Cm(t){let i=!0;return()=>{if(i){i=!1;return}t()}}function I4(t,i,s){const o=Lx(t,Cm(s)),u=Lx(i,Cm(s));return()=>{o(),u()}}function pl(t,i,s){return(i===!0||i===t)&&(s===null||s===t)}function M4(t,i=10){let s=null;return Math.abs(t.y)>i?s="y":Math.abs(t.x)>i&&(s="x"),s}class B4 extends kn{constructor(i){super(i),this.removeGroupControls=Qr,this.removeListeners=Qr,this.controls=new D4(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qr}update(){const{dragControls:i}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};i!==s&&(this.removeGroupControls(),i&&(this.removeGroupControls=i.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const uu=t=>(i,s)=>{t&&jt.update(()=>t(i,s),!1,!0)};class P4 extends kn{constructor(){super(...arguments),this.removePointerDownListener=Qr}onPointerDown(i){this.session=new f1(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:p1(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:uu(i),onStart:uu(s),onMove:uu(o),onEnd:(S,b)=>{delete this.session,u&&jt.postRender(()=>u(S,b))}}}mount(){this.removePointerDownListener=Po(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hu=!1;class O4 extends L.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o,layoutId:u}=this.props,{projection:S}=i;S&&(s.group&&s.group.add(S),o&&o.register&&u&&o.register(S),hu&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Al.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:o,drag:u,isPresent:S}=this.props,{projection:b}=o;return b&&(b.isPresent=S,i.layoutDependency!==s&&b.setOptions({...b.options,layoutDependency:s}),hu=!0,u||i.layoutDependency!==s||s===void 0||i.isPresent!==S?b.willUpdate():this.safeToRemove(),i.isPresent!==S&&(S?b.promote():b.relegate()||jt.postRender(()=>{const l=b.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),Kh.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:u}=i;hu=!0,u&&(u.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function x1(t){const[i,s]=n1(),o=L.useContext(Ch);return e.jsx(O4,{...t,layoutGroup:o,switchLayoutGroup:L.useContext(u1),isPresent:i,safeToRemove:s})}const $4={pan:{Feature:P4},drag:{Feature:B4,ProjectionNode:i1,MeasureLayout:x1}};function km(t,i,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const u="onHover"+s,S=o[u];S&&jt.postRender(()=>S(i,ea(i)))}class F4 extends kn{mount(){const{current:i}=this.node;i&&(this.unmount=dj(i,(s,o)=>(km(this.node,o,"Start"),u=>km(this.node,u,"End"))))}unmount(){}}class W4 extends kn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jo(Uo(this.node.current,"focus",()=>this.onFocus()),Uo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jm(t,i,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const u="onTap"+(s==="End"?"":s),S=o[u];S&&jt.postRender(()=>S(i,ea(i)))}class N4 extends kn{mount(){const{current:i}=this.node;if(!i)return;const{globalTapTarget:s,propagate:o}=this.node.props;this.unmount=xj(i,(u,S)=>(jm(this.node,S,"Start"),(b,{success:l})=>jm(this.node,b,l?"End":"Cancel")),{useGlobalTarget:s,stopPropagation:(o==null?void 0:o.tap)===!1})}unmount(){}}const rh=new WeakMap,pu=new WeakMap,H4=t=>{const i=rh.get(t.target);i&&i(t)},U4=t=>{t.forEach(H4)};function V4({root:t,...i}){const s=t||document;pu.has(s)||pu.set(s,{});const o=pu.get(s),u=JSON.stringify(i);return o[u]||(o[u]=new IntersectionObserver(U4,{root:t,...i})),o[u]}function K4(t,i,s){const o=V4(i);return rh.set(t,s),o.observe(t),()=>{rh.delete(t),o.unobserve(t)}}const q4={some:0,all:1};class G4 extends kn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:o,amount:u="some",once:S}=i,b={root:s?s.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:q4[u]},l=c=>{const{isIntersecting:x}=c;if(this.isInView===x||(this.isInView=x,S&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:v,onViewportLeave:d}=this.node.getProps(),y=x?v:d;y&&y(c)};return K4(this.node.current,b,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(Y4(i,s))&&this.startObserver()}unmount(){}}function Y4({viewport:t={}},{viewport:i={}}={}){return s=>t[s]!==i[s]}const X4={inView:{Feature:G4},tap:{Feature:N4},focus:{Feature:W4},hover:{Feature:F4}},J4={layout:{ProjectionNode:i1,MeasureLayout:x1}},Q4={..._4,...X4,...$4,...J4},Ut=x4(Q4,m4),ge={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",cyan:"#06b6d4",mono:'"JetBrains Mono","Fira Code",monospace'},Em={id:"welcome",role:"assistant",content:`I'm your AI agent architect. I can see your uploaded screenshots directly  upload references and let's discuss the design.

Start by uploading screenshots, adding URLs, or describing the style you want.`},Rm=t=>({id:"welcome",role:"assistant",content:`I've loaded the current prompt for **${t.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase())}**. I'm ready to help you enhance it.

Tell me what you'd like to improve  capabilities, style, structure, new sections, or anything else.`}),rp=({onClose:t,initialAgent:i})=>{var hr,pr,Cr;const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(""),[c,x]=L.useState(!1),[v,d]=L.useState(""),[y,_]=L.useState([]),[j,C]=L.useState(""),[h,p]=L.useState([]),[f,g]=L.useState(""),[w,R]=L.useState(!1),[A,z]=L.useState(""),[E,P]=L.useState(!1),[O,H]=L.useState(!1),[K,U]=L.useState(!1),[te,V]=L.useState(!1),[de,Q]=L.useState(!1),[Y,B]=L.useState(null),[D,M]=L.useState(null),[W,pe]=L.useState(!1),[me,we]=L.useState(null),[Re,X]=L.useState(""),[F,be]=L.useState(!1),[oe,De]=L.useState(null),[ee,ke]=L.useState(!1),[he,Ie]=L.useState(!1),[Oe,Pe]=L.useState(""),Ee=L.useRef(null),We=L.useRef(null);L.useEffect(()=>{Z().then(async ne=>{var ct;if(i)try{const yt=i.name.replace(/-/g," ").replace(/\b\w/g,qt=>qt.toUpperCase()),ft=(await ae("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:`Enhance: ${yt}`})})).conversation;if(o(qt=>[ft,...qt]),S(ft.id),l(ft.name),localStorage.setItem("atp-agent-creator-conv",ft.id),Pe(i.name),i.prompt&&(z(i.prompt),R(!0)),p([Rm(i.name)]),_([]),i.prompt)try{const qt=`I want to enhance this existing agent "${yt}". Here is its current prompt:

\`\`\`
${i.prompt.slice(0,8e3)}
\`\`\`

Please analyze it and wait for my instructions on what to improve.`,Br=await ae(`/api/agent-creator/conversations/${ft.id}/messages`,{method:"POST",body:JSON.stringify({message:qt})}),Hr={id:`init-${Date.now()}`,role:"user",content:qt},Zr=((ct=Br.message)==null?void 0:ct.content)||Br.response||"",kr={id:`resp-${Date.now()}`,role:"assistant",content:Zr};p(Pr=>[...Pr,Hr,kr])}catch(qt){console.error("Failed to send initial context:",qt)}return}catch(yt){console.error("Failed to create enhance conversation:",yt)}if(!ne||ne.length===0)return;const Ne=localStorage.getItem("atp-agent-creator-conv"),Ge=Ne?ne.find(yt=>yt.id===Ne):null;Fe(Ge||ne[0])})},[]),L.useEffect(()=>{var ne;(ne=Ee.current)==null||ne.scrollIntoView({behavior:"smooth"})},[h]),L.useEffect(()=>{c&&We.current&&We.current.focus()},[c]);const Z=async()=>{try{const Ne=(await ae("/api/agent-creator/conversations")).conversations||[];return o(Ne),Ne}catch(ne){return console.error("Failed to load conversations:",ne),[]}},le=async ne=>{try{const Ge=(await ae("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:ne||"New Agent"})})).conversation;o(ct=>[Ge,...ct]),Fe(Ge)}catch(Ne){console.error("Failed to create conversation:",Ne)}},Fe=async ne=>{S(ne.id),l(ne.name),localStorage.setItem("atp-agent-creator-conv",ne.id),x(!1),B(null),z(""),M(null),R(!1),we(null),Pe(""),De(null),Ie(!1);try{const Ge=(await ae(`/api/agent-creator/conversations/${ne.id}`)).conversation,ct=(Ge.messages||[]).map(ft=>({id:ft.id,role:ft.role,content:ft.content})),yt=ne.name.startsWith("Enhance:")?Rm(ne.name.replace("Enhance: ","")):Em;if(p(ct.length>0?ct:[yt]),_(Ge.references||[]),Ge.design_brief&&B(Ge.design_brief),Ge.generated_agent){z(Ge.generated_agent),R(!0);const ft=Ge.generated_agent.match(/^name:\s*(.+)$/m);ft&&Pe(ft[1].trim())}const Kt=`/uploads/agent-creator/preview-${ne.id}.png`;fetch(Kt,{method:"HEAD"}).then(ft=>{ft.ok&&De(Kt+"?t="+Date.now())}).catch(()=>{})}catch(Ne){console.error("Failed to load conversation:",Ne),p([Em]),_([])}},Ze=async()=>{if(!(!u||!v.trim()))try{await ae(`/api/agent-creator/conversations/${u}`,{method:"PUT",body:JSON.stringify({name:v.trim()})}),l(v.trim()),o(ne=>ne.map(Ne=>Ne.id===u?{...Ne,name:v.trim()}:Ne)),x(!1)}catch(ne){console.error("Failed to rename:",ne)}},et=async ne=>{try{await ae(`/api/agent-creator/conversations/${ne}`,{method:"DELETE"}),o(Ne=>Ne.filter(Ge=>Ge.id!==ne)),u===ne&&(S(null),p([]),_([]),B(null),z(""),localStorage.removeItem("atp-agent-creator-conv"))}catch(Ne){console.error("Failed to delete conversation:",Ne)}},dt=async()=>{var ne;if(!(!j.trim()||!u||W)){pe(!0);try{const Ne=await ae(`/api/agent-creator/conversations/${u}/urls`,{method:"POST",body:JSON.stringify({url:j})});_(ct=>[...ct,Ne.reference]);const Ge=Ne.reference.profile_image_url||((ne=Ne.reference.structured_analysis)==null?void 0:ne.profile_image_url);if(Ge&&(p(ct=>[...ct,{id:`profile-${Date.now()}`,role:"assistant",content:`![Profile Picture](${Ge})

I found and saved the profile picture from this URL. It will be used as the agent's avatar.`}]),i))try{await ae(`/api/agents/${i.name}/screenshot`,{method:"PATCH",body:JSON.stringify({screenshot_path:Ge})})}catch(ct){console.warn("Failed to update agent screenshot:",ct)}C("")}catch(Ne){console.error("Failed to add URL:",Ne)}finally{pe(!1)}}},Vt=async ne=>{const Ne=ne.target.files;if(!(!Ne||Ne.length===0||!u)){P(!0);try{for(let Ge=0;Ge<Ne.length;Ge++){const ct=new FormData;ct.append("image",Ne[Ge]);const yt=await fetch(`/api/agent-creator/conversations/${u}/images`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("atp-token")}`},body:ct});if(!yt.ok){const ft=await yt.json().catch(()=>({error:yt.statusText}));throw new Error(ft.error||"Upload failed")}const Kt=await yt.json();_(ft=>[...ft,Kt.reference])}}catch(Ge){console.error("Failed to upload image:",Ge)}finally{P(!1),ne.target&&(ne.target.value="")}}},St=async ne=>{if(u)try{await ae(`/api/agent-creator/conversations/${u}/references/${ne}`,{method:"DELETE"}),_(Ne=>Ne.filter(Ge=>Ge.id!==ne))}catch(Ne){console.error("Failed to remove reference:",Ne)}},wt=async()=>{if(!f.trim()||!u||O)return;const ne={id:Date.now().toString(),role:"user",content:f};p(Ne=>[...Ne.filter(Ge=>Ge.id!=="welcome"),ne]),g(""),H(!0);try{const Ne=await ae(`/api/agent-creator/conversations/${u}/messages`,{method:"POST",body:JSON.stringify({message:f})});p(Ge=>[...Ge,{id:Ne.message.id,role:"assistant",content:Ne.message.content}])}catch(Ne){p(Ge=>[...Ge,{id:(Date.now()+1).toString(),role:"assistant",content:`Error: ${Ne.message||"Failed"}`}])}finally{H(!1)}},Tt=async()=>{if(!(!u||de)){Q(!0);try{const ne=await ae(`/api/agent-creator/conversations/${u}/analyze`,{method:"POST"});B(ne.brief),p(Ne=>{var Ge,ct,yt,Kt;return[...Ne,{id:`brief-${Date.now()}`,role:"assistant",content:`Design Brief synthesized from ${y.length} reference(s):

**Aesthetic**: ${((Ge=ne.brief.agentIdentity)==null?void 0:Ge.aesthetic)||"custom"}
**Colors**: ${Object.keys(((ct=ne.brief.colorSystem)==null?void 0:ct.cssVariables)||{}).length} CSS variables
**Fonts**: ${((yt=ne.brief.typographySystem)==null?void 0:yt.displayFont)||"?"} + ${((Kt=ne.brief.typographySystem)==null?void 0:Kt.bodyFont)||"?"}
**Components**: ${(ne.brief.componentInventory||[]).map(ft=>ft.name).join(", ")}

Ready to generate. Click **Generate Agent**.`}]})}catch(ne){console.error("Failed to analyze:",ne)}finally{Q(!1)}}},mt=async()=>{if(!(!u||K)){U(!0),R(!0),z(""),M(null);try{const ne=await ae(`/api/agent-creator/conversations/${u}/generate`,{method:"POST"});z(ne.agentFile),M(ne.validation);const Ne=ne.agentFile.match(/^name:\s*(.+)$/m);Ne&&Pe(Ne[1].trim())}catch(ne){console.error("Failed to generate:",ne),z(`# Error generating agent

${ne.message||"Unknown error"}`)}finally{U(!1)}}},Lt=async()=>{if(!(!u||!me||!Re.trim()||F)){be(!0);try{const ne=await ae(`/api/agent-creator/conversations/${u}/refine`,{method:"POST",body:JSON.stringify({section:me,feedback:Re})});z(ne.agentFile),M(ne.validation),we(null),X("")}catch(ne){console.error("Failed to refine:",ne)}finally{be(!1)}}},ut=async()=>{if(!(!u||ee)){ke(!0);try{const ne=await ae(`/api/agent-creator/conversations/${u}/preview-image`,{method:"POST"});De(ne.previewUrl+"?t="+Date.now())}catch(ne){console.error("Failed to generate preview:",ne),alert(`Preview failed: ${ne.message||"Unknown error"}`)}finally{ke(!1)}}},Mr=async()=>{if(!(!u||!A||te)){V(!0);try{let ne=A;Oe.trim()&&(ne=ne.replace(/^name:\s*.+$/m,`name: ${Oe.trim()}`));const Ne=await ae(`/api/agent-creator/conversations/${u}/save`,{method:"POST",body:JSON.stringify({agentContent:ne})});Ne.success&&(alert(`Agent "${Ne.agent.name}" saved to library!`),t())}catch(ne){alert(`Failed: ${ne.message||"Unknown error"}`)}finally{V(!1)}}},rr=A?(A.match(/^## .+$/gm)||[]).map(ne=>ne.replace("## ","")):[],Ei=ne=>{const Ne=Date.now()-new Date(ne).getTime(),Ge=Math.floor(Ne/6e4);if(Ge<1)return"now";if(Ge<60)return`${Ge}m`;const ct=Math.floor(Ge/60);return ct<24?`${ct}h`:`${Math.floor(ct/24)}d`};return e.jsxs("div",{style:{backgroundColor:ge.bg,color:ge.tp,position:"fixed",inset:0,zIndex:1e3,display:"flex",flexDirection:"column",fontFamily:"Inter, system-ui, sans-serif"},children:[e.jsxs("header",{style:{padding:"10px 20px",borderBottom:`1px solid ${ge.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:ge.surface,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:ge.violetG,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ge.violetM}`},children:e.jsx(fn,{size:18,color:ge.violet})}),e.jsxs("div",{children:[u&&!c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:b}),e.jsx("button",{onClick:()=>{x(!0),d(b)},style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px"},children:e.jsx(Xo,{size:12})})]}):u&&c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("input",{ref:We,type:"text",value:v,onChange:ne=>d(ne.target.value),onKeyDown:ne=>{ne.key==="Enter"&&Ze(),ne.key==="Escape"&&x(!1)},style:{background:ge.bg,border:`1px solid ${ge.violet}`,borderRadius:"4px",padding:"2px 8px",color:ge.tp,fontSize:"14px",fontWeight:600,outline:"none",width:"200px"}}),e.jsx("button",{onClick:Ze,style:{background:"none",border:"none",color:ge.success,cursor:"pointer",padding:"2px"},children:e.jsx(or,{size:14})}),e.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px"},children:e.jsx(bt,{size:14})})]}):e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:"Agent Architect"}),e.jsx("span",{style:{fontSize:"11px",color:ge.tm},children:u?`${y.length} refs | ${h.filter(ne=>ne.id!=="welcome").length} msgs`:"Select or create a conversation"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[D&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"6px",background:D.score>=7?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${D.score>=7?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[D.score>=7?e.jsx(cl,{size:14,color:ge.success}):e.jsx(cx,{size:14,color:ge.warning}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:D.score>=7?ge.success:ge.warning},children:[D.score,"/10 | ",D.totalLines," lines"]})]}),e.jsx("button",{onClick:t,style:{background:"none",border:"none",color:ge.ts,cursor:"pointer",padding:"6px",borderRadius:"50%"},children:e.jsx(bt,{size:18})})]})]}),e.jsxs("main",{style:{flex:1,display:"grid",gridTemplateColumns:w?"220px 260px 1fr 420px":"220px 260px 1fr",overflow:"hidden",minHeight:0},children:[e.jsxs("aside",{style:{borderRight:`1px solid ${ge.border}`,background:ge.bg,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px",borderBottom:`1px solid ${ge.border}`},children:e.jsxs("button",{onClick:()=>le(),style:{width:"100%",padding:"8px",borderRadius:"8px",fontWeight:600,fontSize:"12px",cursor:"pointer",background:ge.violetG,color:ge.violet,border:`1px solid ${ge.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Jt,{size:14})," New Conversation"]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[s.length===0&&e.jsxs("div",{style:{padding:"24px 16px",textAlign:"center",color:ge.tm,fontSize:"12px"},children:["No conversations yet.",e.jsx("br",{}),'Click "New" to start.']}),s.map(ne=>e.jsx("div",{onClick:()=>Fe(ne),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${ge.border}`,background:ne.id===u?ge.surfaceEl:"transparent",borderLeft:ne.id===u?`2px solid ${ge.violet}`:"2px solid transparent",transition:"all 0.15s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"12px",fontWeight:600,color:ne.id===u?ge.tp:ge.ts,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:ne.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"3px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:ge.tm,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Yo,{size:9})," ",Ei(ne.updated_at||ne.created_at)]}),ne.generation_status==="complete"&&e.jsx("span",{style:{fontSize:"9px",color:ge.success,padding:"0 4px",background:"rgba(34,197,94,0.1)",borderRadius:"3px"},children:"generated"}),ne.generation_status==="analyzing"&&e.jsx("span",{style:{fontSize:"9px",color:ge.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"analyzing"}),ne.generation_status==="briefing"&&e.jsx("span",{style:{fontSize:"9px",color:ge.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"briefing"}),ne.generation_status==="generating"&&e.jsx("span",{style:{fontSize:"9px",color:ge.warning,padding:"0 4px",background:"rgba(245,158,11,0.1)",borderRadius:"3px"},children:"generating"}),ne.generation_status==="error"&&e.jsx("span",{style:{fontSize:"9px",color:ge.danger,padding:"0 4px",background:"rgba(239,68,68,0.1)",borderRadius:"3px"},children:"error"})]})]}),e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),et(ne.id)},style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px",opacity:.5,flexShrink:0},children:e.jsx(Ir,{size:11})})]})},ne.id))]})]}),e.jsx("aside",{style:{borderRight:`1px solid ${ge.border}`,background:ge.surface,display:"flex",flexDirection:"column",padding:"12px",gap:"12px",overflowY:"auto",minHeight:0},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"11px",color:ge.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",fontWeight:700},children:"References"}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"16px 10px",border:`1px dashed ${ge.borderS}`,borderRadius:"8px",cursor:"pointer",backgroundColor:ge.bg},children:[e.jsx(rx,{size:18,color:E?ge.violet:ge.ts}),e.jsx("span",{style:{fontSize:"11px",color:ge.ts},children:E?"Analyzing...":"Upload screenshots"}),e.jsx("input",{type:"file",hidden:!0,onChange:Vt,accept:"image/*",multiple:!0,disabled:E})]}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx(ox,{size:11,color:ge.tm,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{type:"text",placeholder:"URL...",value:j,onChange:ne=>C(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&dt(),style:{width:"100%",background:ge.bg,border:`1px solid ${ge.border}`,borderRadius:"6px",padding:"7px 8px 7px 26px",color:ge.tp,fontSize:"11px",outline:"none"}})]}),e.jsx("button",{onClick:dt,disabled:W,style:{padding:"7px",borderRadius:"6px",background:ge.violet,border:"none",color:"white",cursor:"pointer"},children:W?e.jsx($i,{size:12,className:"animate-spin"}):e.jsx(Jt,{size:12})})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{fontSize:"10px",color:ge.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",fontWeight:700},children:["Context (",y.length,")"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[y.length===0&&e.jsx("div",{style:{padding:"12px",textAlign:"center",color:ge.tm,fontSize:"11px"},children:"No references yet"}),e.jsx(au,{initial:!1,children:y.map(ne=>{var Ne,Ge,ct,yt,Kt,ft;return e.jsxs(Ut.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},style:{padding:"6px",background:ge.surfaceEl,borderRadius:"6px",border:`1px solid ${ne.structured_analysis?"rgba(34,197,94,0.15)":ge.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[ne.type==="image"||ne.profile_image_url||(Ne=ne.structured_analysis)!=null&&Ne.profile_image_url?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:ne.profile_image_url||(Ge=ne.structured_analysis)!=null&&Ge.profile_image_url?"50%":"3px",overflow:"hidden",background:ge.bg,flexShrink:0},children:e.jsx("img",{src:ne.type==="image"?ne.url:ne.profile_image_url||((ct=ne.structured_analysis)==null?void 0:ct.profile_image_url),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"3px",background:ge.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ox,{size:10,color:ge.ts})}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"10px",color:ge.tp,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0},children:ne.filename||ne.url}),ne.structured_analysis&&e.jsxs("span",{style:{fontSize:"9px",color:ge.success,display:"flex",alignItems:"center",gap:"2px",marginTop:"1px"},children:[e.jsx(cl,{size:8})," Analyzed"]})]}),e.jsx("button",{onClick:()=>St(ne.id),style:{background:"none",border:"none",cursor:"pointer",color:ge.tm,padding:"2px"},children:e.jsx(Ir,{size:10})})]}),ne.type==="url"&&(ne.profile_image_url||((yt=ne.structured_analysis)==null?void 0:yt.profile_image_url))&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("img",{src:ne.profile_image_url||((Kt=ne.structured_analysis)==null?void 0:Kt.profile_image_url),alt:"Profile",style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${ge.violet}`}}),e.jsxs("span",{style:{fontSize:"9px",color:ge.success,display:"flex",alignItems:"center",gap:"2px"},children:[e.jsx(cl,{size:8})," Profile pic saved"]})]}),ne.structured_analysis&&ne.type==="image"&&ne.structured_analysis.colors&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",gap:"2px",flexWrap:"wrap"},children:[[ne.structured_analysis.colors.dominantBackground,ne.structured_analysis.colors.primaryAccent,ne.structured_analysis.colors.secondaryAccent].filter(Boolean).map((qt,Br)=>e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"2px",background:qt,border:"1px solid rgba(255,255,255,0.1)"},title:qt},Br)),((ft=ne.structured_analysis.components)==null?void 0:ft.overallAesthetic)&&e.jsx("span",{style:{fontSize:"8px",color:ge.tm,padding:"1px 4px",background:ge.bg,borderRadius:"2px",marginLeft:"2px"},children:ne.structured_analysis.components.overallAesthetic})]})]},ne.id)})})]})]}),y.length>0&&e.jsx("button",{onClick:Tt,disabled:de,style:{width:"100%",padding:"8px",borderRadius:"6px",fontWeight:600,fontSize:"11px",cursor:de?"not-allowed":"pointer",background:Y?"rgba(34,197,94,0.1)":ge.violetG,color:Y?ge.success:ge.violet,border:`1px solid ${Y?"rgba(34,197,94,0.2)":ge.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:de?e.jsxs(e.Fragment,{children:[e.jsx($i,{size:12})," Synthesizing..."]}):Y?e.jsxs(e.Fragment,{children:[e.jsx(cl,{size:12})," Brief ready"]}):e.jsxs(e.Fragment,{children:[e.jsx(Nr,{size:12})," Analyze & Brief"]})}),Y&&e.jsxs("div",{style:{padding:"8px",borderRadius:"6px",background:ge.bg,border:`1px solid ${ge.border}`,fontSize:"10px"},children:[e.jsx("div",{style:{color:ge.tm,fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px",fontSize:"9px"},children:"Brief"}),e.jsxs("div",{style:{color:ge.ts,lineHeight:"1.5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(dw,{size:9,color:ge.cyan}),Object.keys(((hr=Y.colorSystem)==null?void 0:hr.cssVariables)||{}).length," CSS vars"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Ao,{size:9,color:ge.cyan}),((pr=Y.typographySystem)==null?void 0:pr.displayFont)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Dl,{size:9,color:ge.cyan}),((Cr=Y.layoutArchitecture)==null?void 0:Cr.primaryLayout)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(zs,{size:9,color:ge.cyan}),(Y.componentInventory||[]).length," comps"]})]})]})]}):e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:ge.tm,fontSize:"12px",textAlign:"center",padding:"20px"},children:"Select or create a conversation to start"})}),e.jsx("section",{style:{display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 6%",display:"flex",flexDirection:"column",gap:"14px"},children:[h.map(ne=>e.jsxs(Ut.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:ne.role==="user"?"flex-end":"flex-start",flexDirection:ne.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:ne.role==="user"?ge.surfaceEl:ge.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:`1px solid ${ne.role==="user"?ge.border:ge.violetM}`},children:ne.role==="user"?e.jsx(Cn,{size:12,color:ge.ts}):e.jsx(Ft,{size:12,color:ge.violet})}),e.jsx("div",{style:{background:ne.role==="user"?ge.violet:ge.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopRightRadius:ne.role==="user"?"3px":"12px",borderTopLeftRadius:ne.role==="assistant"?"3px":"12px",color:ne.role==="user"?"white":ge.tp,fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:ne.content.split(/(\!\[.*?\]\(.*?\))/).map((Ne,Ge)=>{const ct=Ne.match(/^\!\[(.*?)\]\((.*?)\)$/);return ct?e.jsx("img",{src:ct[2],alt:ct[1],style:{maxWidth:"120px",borderRadius:"12px",display:"block",margin:"4px 0",border:`2px solid ${ge.violet}40`}},Ge):e.jsx("span",{children:Ne},Ge)})})]},ne.id)),O&&e.jsxs(Ut.div,{initial:{opacity:0},animate:{opacity:1},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:"flex-start"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:ge.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ft,{size:12,color:ge.violet})}),e.jsx("div",{style:{background:ge.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopLeftRadius:"3px",color:ge.ts,fontSize:"13px"},children:"Analyzing images & thinking..."})]}),e.jsx("div",{ref:Ee})]}),e.jsx("div",{style:{padding:"12px 20px",borderTop:`1px solid ${ge.border}`,background:ge.bg},children:e.jsxs("div",{style:{maxWidth:"680px",margin:"0 auto",background:ge.surface,borderRadius:"10px",border:`1px solid ${ge.borderS}`,padding:"3px"},children:[e.jsx("textarea",{value:f,onChange:ne=>g(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),wt()),placeholder:"Describe the design, ask about your screenshots...",disabled:O,style:{width:"100%",background:"transparent",border:"none",color:ge.tp,padding:"8px 10px",height:"48px",resize:"none",outline:"none",fontSize:"13px",fontFamily:"inherit"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 6px"},children:[e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[y.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:ge.tm,display:"flex",alignItems:"center",gap:"3px",padding:"4px 8px",background:ge.bg,borderRadius:"4px"},children:[e.jsx(rx,{size:10})," ",y.filter(ne=>ne.type==="image").length," images in vision"]}),e.jsx("button",{onClick:mt,disabled:K||h.filter(ne=>ne.id!=="welcome").length<2,style:{background:K?ge.surfaceEl:ge.violetG,color:K?ge.tm:ge.violet,border:`1px solid ${K?ge.border:ge.violetM}`,borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:K?"not-allowed":"pointer"},children:K?e.jsxs(e.Fragment,{children:[e.jsx($i,{size:11})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lu,{size:11})," ",w?"Regenerate":"Generate"]})})]}),e.jsxs("button",{onClick:wt,disabled:!f.trim()||O,style:{background:f.trim()&&!O?ge.violet:ge.surfaceEl,color:f.trim()&&!O?"white":ge.tm,border:"none",borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:f.trim()&&!O?"pointer":"not-allowed"},children:[e.jsx(wh,{size:11})," Send"]})]})]})})]}):e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",color:ge.tm},children:[e.jsx(fn,{size:40,color:ge.tm}),e.jsx("span",{style:{fontSize:"14px"},children:"Create or select a conversation"}),e.jsxs("button",{onClick:()=>le(),style:{padding:"10px 20px",borderRadius:"8px",background:ge.violet,color:"white",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:14})," New Conversation"]})]})}),e.jsx(au,{children:w&&e.jsxs(Ut.aside,{initial:{width:0,opacity:0},animate:{width:420,opacity:1},exit:{width:0,opacity:0},style:{borderLeft:`1px solid ${ge.border}`,background:ge.surface,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ge.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Lu,{size:13,color:ge.ts}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:ge.ts},children:"agent.md"})]}),D&&e.jsxs("div",{style:{display:"flex",gap:"6px",fontSize:"10px",color:ge.tm},children:[e.jsxs("span",{children:[D.totalLines,"L"]}),e.jsxs("span",{children:[D.stats.cssVariables,"vars"]}),e.jsxs("span",{children:[D.sections.filter(ne=>ne.found).length,"/",D.sections.length,"sec"]})]})]}),A&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",color:ge.tm,flexShrink:0},children:"Name:"}),e.jsx("input",{type:"text",value:Oe,onChange:ne=>Pe(ne.target.value),placeholder:"agent-name",style:{flex:1,background:ge.bg,border:`1px solid ${ge.border}`,borderRadius:"4px",padding:"3px 8px",color:ge.tp,fontSize:"12px",fontWeight:600,fontFamily:ge.mono,outline:"none"}}),e.jsxs("button",{onClick:ut,disabled:ee,title:oe?"Regenerate Preview":"Generate Preview",style:{padding:"4px 10px",borderRadius:"5px",fontSize:"10px",fontWeight:600,cursor:ee?"not-allowed":"pointer",background:ee?ge.surfaceEl:"rgba(6,182,212,0.12)",color:ee?ge.tm:ge.cyan,border:`1px solid ${ee?ge.border:"rgba(6,182,212,0.25)"}`,display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap",flexShrink:0},children:[ee?e.jsx($i,{size:10,style:{animation:"spin 1s linear infinite"}}):e.jsx(US,{size:10}),ee?"Generating...":oe?"Regen":"Preview"]})]})]}),rr.length>0&&e.jsx("div",{style:{padding:"6px 14px",borderBottom:`1px solid ${ge.border}`,display:"flex",flexWrap:"wrap",gap:"3px"},children:rr.map((ne,Ne)=>{const Ge=D==null?void 0:D.sections.find(ct=>ne.toLowerCase().includes(ct.name.toLowerCase().split(" ")[0]));return e.jsx("button",{onClick:()=>we(me===ne?null:ne),style:{padding:"1px 6px",borderRadius:"3px",fontSize:"9px",fontWeight:500,cursor:"pointer",border:"none",background:me===ne?ge.violetM:Ge!=null&&Ge.found?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",color:me===ne?ge.violet:Ge!=null&&Ge.found?ge.success:ge.warning},children:ne.slice(0,18)},Ne)})}),me&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${ge.border}`,background:ge.bg},children:[e.jsxs("div",{style:{fontSize:"10px",color:ge.violet,fontWeight:600,marginBottom:"4px"},children:["Refine: ",me]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"text",value:Re,onChange:ne=>X(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&Lt(),placeholder:"What to improve...",style:{flex:1,background:ge.surface,border:`1px solid ${ge.border}`,borderRadius:"4px",padding:"5px 8px",color:ge.tp,fontSize:"11px",outline:"none"}}),e.jsx("button",{onClick:Lt,disabled:F||!Re.trim(),style:{padding:"5px 10px",borderRadius:"4px",background:ge.violet,border:"none",color:"white",fontSize:"10px",fontWeight:600,cursor:"pointer"},children:F?"...":"Refine"})]})]}),oe&&e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ge.border}`,background:ge.bg},children:e.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:`1px solid ${ge.border}`,cursor:"pointer"},onClick:()=>Ie(!0),children:[e.jsx("img",{src:oe,alt:"Preview mockup",style:{width:"100%",height:"auto",display:"block"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",background:"rgba(0,0,0,0.7)",borderRadius:"4px",padding:"3px 6px",display:"flex",alignItems:"center",gap:"3px",color:"white",fontSize:"9px"},children:[e.jsx(rw,{size:9})," Fullscreen"]})]})}),e.jsx("div",{style:{flex:1,padding:"14px",fontFamily:ge.mono,fontSize:"10px",lineHeight:"1.6",color:ge.ts,backgroundColor:ge.bg,overflowY:"auto",whiteSpace:"pre-wrap"},children:K?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"14px"},children:[e.jsx($i,{size:22,color:ge.violet,style:{animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{color:ge.ts,fontSize:"12px",fontFamily:"Inter, sans-serif"},children:"Generating 600-900 line agent..."}),e.jsx("div",{style:{color:ge.tm,fontSize:"10px",fontFamily:"Inter, sans-serif"},children:"30-60 seconds"})]}):A||"Generate your agent to preview it here..."}),D&&D.issues.length>0&&e.jsx("div",{style:{padding:"8px 14px",borderTop:`1px solid ${ge.border}`,background:"rgba(245,158,11,0.05)",maxHeight:"70px",overflowY:"auto"},children:D.issues.map((ne,Ne)=>e.jsxs("div",{style:{fontSize:"9px",color:ge.warning,display:"flex",alignItems:"center",gap:"3px",marginBottom:"1px"},children:[e.jsx(cx,{size:8})," ",ne]},Ne))}),e.jsx("div",{style:{padding:"10px 14px",background:ge.surface,borderTop:`1px solid ${ge.border}`},children:e.jsxs("button",{onClick:Mr,disabled:!A||te||K,style:{width:"100%",background:A&&!te&&!K?ge.violet:ge.surfaceEl,color:A&&!te&&!K?"white":ge.tm,border:"none",padding:"9px",borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:A&&!te&&!K?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Gl,{size:13})," ",te?"Saving...":`Save${Oe?` "${Oe}"`:""} to Library`]})})]})})]}),e.jsx(au,{children:he&&oe&&e.jsxs(Ut.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ie(!1),style:{position:"fixed",inset:0,zIndex:2e3,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[e.jsx("button",{onClick:()=>Ie(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(bt,{size:18,color:"white"})}),e.jsx("img",{src:oe,alt:"Preview fullscreen",onClick:ne=>ne.stopPropagation(),style:{maxWidth:"95vw",maxHeight:"95vh",objectFit:"contain",borderRadius:"8px",cursor:"default"}})]})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})},se={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'},Z4=({value:t})=>{const[i,s]=L.useState(0);return L.useEffect(()=>{let o=0;const u=parseInt(t)||0;if(o===u)return;const b=u/(1e3/30);let l=setInterval(()=>{o+=b,o>=u?(s(u),clearInterval(l)):s(Math.floor(o))},30);return()=>clearInterval(l)},[t]),e.jsx("span",{children:i.toLocaleString()})},ih=({children:t,color:i=se.violet})=>e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",background:`${i}15`,border:`1px solid ${i}44`,color:i,fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em"},children:t}),e6=({project:t,navigate:i,onDelete:s,t:o})=>{const[u,S]=Vo.useState(!1);return e.jsxs("div",{onClick:()=>i(`/project/${t.id}`),onMouseEnter:b=>{b.currentTarget.style.borderColor=`${o.violet}44`,b.currentTarget.style.boxShadow=`0 8px 24px -8px ${o.violet}22`,b.currentTarget.style.transform="translateY(-2px)",S(!0)},onMouseLeave:b=>{b.currentTarget.style.borderColor=o.border,b.currentTarget.style.boxShadow="none",b.currentTarget.style.transform="translateY(0)",S(!1)},style:{background:o.surface,borderRadius:"12px",border:`1px solid ${o.border}`,padding:"18px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"14px",transition:"all 0.2s",position:"relative"},children:[u&&e.jsx(Ut.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:b=>s(t.id,t.name,b),style:{position:"absolute",top:"12px",right:"12px",zIndex:10,width:"32px",height:"32px",borderRadius:"6px",backgroundColor:"rgba(239, 68, 68, 0.9)",border:"1px solid rgba(239, 68, 68, 1)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseEnter:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 1)",b.currentTarget.style.transform="scale(1.05)"},onMouseLeave:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.9)",b.currentTarget.style.transform="scale(1)"},children:e.jsx(Ir,{size:16})}),t.latest_iteration_id&&e.jsx("div",{style:{width:"100%",height:"140px",borderRadius:"8px",overflow:"hidden",background:o.surfaceEl,border:`1px solid ${o.border}`,position:"relative"},children:e.jsx("iframe",{src:`/api/preview/${t.id}/${t.latest_iteration_id}`,title:`Preview ${t.name}`,style:{width:"1280px",height:"800px",border:"none",transform:"scale(0.22)",transformOrigin:"top left",pointerEvents:"none"},sandbox:"allow-same-origin",loading:"lazy"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:o.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${o.borderS}`},children:e.jsx(Yl,{size:18,color:o.violet})}),e.jsx(ih,{color:t.status==="active"?o.success:o.ts,children:t.status||"Idle"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",marginBottom:"4px"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",color:o.ts,lineHeight:"1.4",height:"32px",overflow:"hidden"},children:t.description||"No description provided."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",borderTop:`1px solid ${o.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Agent"}),e.jsxs("div",{style:{fontSize:"11px",color:o.tp,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(qn,{size:10,color:o.ts})," ",t.agent_name||"None"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Iters"}),e.jsx("div",{style:{fontSize:"11px",color:o.tp},children:t.iteration_count||0})]})]})]})};function t6(){const t=Wt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[x,v]=L.useState(""),[d,y]=L.useState(""),[_,j]=L.useState(!1),[C,h]=L.useState(!1),[p,f]=L.useState(null),[g,w]=L.useState(!1),R=Vo.useRef(null),A=async()=>{try{b(!0);const[V,de]=await Promise.all([ae("/api/projects"),ae("/api/agents")]);s(V||[]),u(de||[])}catch(V){console.error(V)}finally{b(!1)}};L.useEffect(()=>{A()},[]);const z=async()=>{c(!0);try{await ae("/api/seed",{method:"POST"}),await A()}catch(V){console.error(V)}finally{c(!1)}},E=async()=>{if(!(!x.trim()||_)){j(!0),y("");try{const V=await ae("/api/orchestrator/command",{method:"POST",body:JSON.stringify({prompt:x})});y(V.response)}catch(V){y(`Error: ${V.message}`)}finally{j(!1)}}},P=async(V,de,Q)=>{if(Q.stopPropagation(),!!window.confirm(`Are you sure you want to delete "${de}"? This action cannot be undone.`))try{await ae(`/api/projects/${V}`,{method:"DELETE"}),await A()}catch(Y){console.error("Failed to delete project:",Y),alert("Failed to delete project. Please try again.")}},O=i.reduce((V,de)=>V+(de.iteration_count||0),0),H=V=>{if(R.current){const{scrollLeft:de,clientWidth:Q}=R.current,Y=V==="left"?de-Q*.5:de+Q*.5;R.current.scrollTo({left:Y,behavior:"smooth"})}},K=[{id:"commit",name:"/commit",description:"Analyze staged changes and generate semantic commit messages.",icon:Sh,usage:142,status:"Available",accent:se.success,isNew:!1},{id:"review",name:"/review-pr",description:"Perform an automated security and logic audit on pull requests.",icon:kS,usage:89,status:"Available",accent:se.violet,isNew:!1},{id:"refactor",name:"/refactor",description:"Suggest structural improvements for complex functions or components.",icon:_h,usage:56,status:"Available",accent:se.violet,isNew:!0},{id:"optimize",name:"/optimize",description:"Identify performance bottlenecks and suggest faster alternatives.",icon:Nr,usage:0,status:"Coming Soon",accent:se.warning,isNew:!1}],U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},te={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return S?e.jsxs("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:se.violet,fontFamily:se.mono,fontSize:"13px"},children:[e.jsx($i,{size:20,style:{animation:"spin 2s linear infinite",marginRight:"8px"}}),"INITIALIZING_DASHBOARD..."]}):e.jsxs(Ut.div,{variants:U,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:"32px"},children:[e.jsxs(Ut.header,{variants:te,className:"dash-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"6px",letterSpacing:"-0.02em"},children:["Dashboard ",e.jsx("span",{style:{fontSize:"24px"},children:""})]}),e.jsxs("p",{style:{color:se.ts,fontSize:"14px",margin:0},children:["Managing ",i.length," projects across ",o.length," specialized agents."]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"8px",backgroundColor:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:se.success,boxShadow:`0 0 10px ${se.success}`}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:se.ts},children:"All Systems Operational"})]})})]}),e.jsxs(Ut.div,{variants:te,className:"dash-actions",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[e.jsxs("button",{onClick:()=>t("/project/new"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.violet}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:`0 0 20px ${se.violet}15`},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=se.violet,V.currentTarget.style.boxShadow=`0 10px 30px ${se.violet}25`},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${se.violet}66`,V.currentTarget.style.boxShadow=`0 0 20px ${se.violet}15`},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.violet,color:"#fff",boxShadow:`0 0 15px ${se.violet}88`},children:e.jsx(Jt,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"New Project"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Initialize testing environment"})]})]}),e.jsxs("button",{onClick:()=>w(!0),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.success}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:"0 0 20px rgba(34, 197, 94, 0.08)"},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=se.success,V.currentTarget.style.boxShadow="0 10px 30px rgba(34, 197, 94, 0.15)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${se.success}66`,V.currentTarget.style.boxShadow="0 0 20px rgba(34, 197, 94, 0.08)"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",color:se.success,boxShadow:"0 0 15px rgba(34, 197, 94, 0.2)"},children:e.jsx(Ft,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Design with GPT-5"})]})]}),e.jsxs("button",{onClick:()=>t("/agents"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=se.surfaceEl,V.currentTarget.style.borderColor=se.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=se.surface,V.currentTarget.style.borderColor=se.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`},children:e.jsx(Es,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Browse Agents"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Explore pretrained models"})]})]}),e.jsxs("button",{onClick:()=>t("/marketplace"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=se.surfaceEl,V.currentTarget.style.borderColor=se.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=se.surface,V.currentTarget.style.borderColor=se.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`},children:e.jsx(Nr,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Marketplace"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Discover & share agents"})]})]})]}),e.jsx(Ut.div,{variants:te,children:e.jsxs("div",{onClick:()=>t("/personaboarding"),style:{position:"relative",overflow:"hidden",cursor:"pointer",borderRadius:"16px",padding:"32px 36px",background:`linear-gradient(135deg, ${se.surface} 0%, #1e1233 50%, ${se.surface} 100%)`,border:`1px solid ${se.violet}33`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"32px",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.borderColor=se.violet,V.currentTarget.style.boxShadow=`0 12px 40px ${se.violet}20`,V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.borderColor=`${se.violet}33`,V.currentTarget.style.boxShadow="none",V.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"absolute",top:"-40px",right:"120px",width:"200px",height:"200px",borderRadius:"50%",background:`radial-gradient(circle, ${se.violet}18 0%, transparent 70%)`,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-60px",left:"30%",width:"160px",height:"160px",borderRadius:"50%",background:"radial-gradient(circle, rgba(236,72,153,0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",zIndex:1},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:`linear-gradient(135deg, ${se.violet}, #a855f7)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 24px ${se.violet}44`,flexShrink:0},children:e.jsx(Cn,{size:28,color:"#fff"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:se.tp,letterSpacing:"-0.01em"},children:"Persona Onboarding"}),e.jsx("span",{style:{padding:"2px 10px",borderRadius:"100px",background:"linear-gradient(135deg, #ec4899, #8b5cf6)",color:"#fff",fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.08em"},children:"New"})]}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:se.ts,lineHeight:"1.5",maxWidth:"420px"},children:"Crez un agent personnalis qui comprend votre faon de travailler. Chaque choix construit une histoire narrative unique."})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",zIndex:1,flexShrink:0},children:[e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",maxWidth:"180px"},children:["Role","Skills","Style","Workflow"].map(V=>e.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",backgroundColor:`${se.violet}15`,border:`1px solid ${se.violet}30`,color:se.violet,fontSize:"10px",fontWeight:600},children:V},V))}),e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:se.tp,color:se.bg,display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s"},children:e.jsx(V2,{size:20})})]})]})}),e.jsx(Ut.div,{variants:te,className:"dash-metrics",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[{label:"Total Agents",value:o.length,icon:qn,trend:"Active",color:se.violet},{label:"Active Projects",value:i.length,icon:vh,trend:"Running",color:se.success},{label:"Total Iterations",value:O,icon:kw,trend:"Completed",color:se.warning}].map((V,de)=>e.jsxs("div",{style:{background:se.surface,padding:"20px",borderRadius:"12px",border:`1px solid ${se.border}`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"14px"},children:[e.jsx("div",{style:{color:se.ts,fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:V.label}),e.jsx(V.icon,{size:18,color:V.color})]}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,marginBottom:"6px",color:se.tp},children:e.jsx(Z4,{value:V.value})}),e.jsxs("div",{style:{fontSize:"11px",color:se.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(v0,{size:10})," ",V.trend]}),e.jsx("div",{style:{position:"absolute",right:"-20px",bottom:"-20px",width:"100px",height:"100px",background:`radial-gradient(circle, ${V.color}11 0%, transparent 70%)`,borderRadius:"50%"}})]},de))}),e.jsxs(Ut.div,{variants:te,style:{position:"relative"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:se.tp,fontSize:"18px",fontWeight:"700",marginBottom:"4px",margin:0},children:"My Agents"}),e.jsx("p",{style:{color:se.ts,fontSize:"13px",margin:0},children:"Your active collection of AI specialized tools"})]}),e.jsxs("span",{style:{color:se.tm,fontSize:"12px",fontWeight:"500"},children:[o.length," Available"]})]}),C&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ut.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>H("left"),style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:se.surfaceEl,border:`1px solid ${se.borderS}`,color:se.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:20})}),e.jsx(Ut.button,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},onClick:()=>H("right"),style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:se.surfaceEl,border:`1px solid ${se.borderS}`,color:se.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(ar,{size:20})})]}),e.jsx("div",{ref:R,style:{display:"flex",gap:"16px",overflowX:"auto",padding:"8px 4px 24px 4px",msOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth"},children:o.length===0?e.jsxs("div",{style:{width:"100%",padding:"40px",textAlign:"center",color:se.tm,background:se.surface,border:`1px dashed ${se.border}`,borderRadius:"12px"},children:[e.jsx(fn,{size:32,style:{margin:"0 auto 12px",opacity:.5}}),e.jsx("p",{style:{fontSize:"13px",margin:0},children:"No agents available yet"})]}):e.jsxs(e.Fragment,{children:[o.map((V,de)=>e.jsxs(Ut.div,{whileHover:{y:-5,borderColor:se.violet,boxShadow:`0 8px 30px ${se.violetG}`},style:{flex:"0 0 300px",backgroundColor:se.surface,border:`1px solid ${se.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",cursor:"pointer",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},onClick:()=>t(`/agents/${V.name}`),children:[V.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"8px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${se.border}`},children:e.jsx("img",{src:V.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:de%2===0?se.violetM:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:de%2===0?se.violet:se.ts,border:`1px solid ${de%2===0?se.violet:se.border}`},children:de%2===0?e.jsx(fn,{size:22}):e.jsx(qn,{size:22})}),V.rating&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:se.warning},children:[e.jsx(vn,{size:12,fill:se.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:V.rating})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("h3",{style:{color:se.tp,fontSize:"15px",fontWeight:"600",margin:0},children:V.name}),V.category&&e.jsx(ih,{color:se.violet,children:V.category})]}),e.jsx("p",{style:{color:se.ts,fontSize:"12px",lineHeight:"1.5",margin:0,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"36px"},children:V.description||"No description available"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"auto",paddingTop:"8px"},children:[e.jsxs(Ut.button,{whileTap:{scale:.96},style:{backgroundColor:se.tp,color:se.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:2},onClick:Q=>{Q.stopPropagation(),t(`/project/new?agent=${V.name}`)},children:[e.jsx(ql,{size:14,fill:"currentColor"}),"Use"]}),e.jsxs("button",{style:{backgroundColor:se.surfaceEl,color:se.ts,border:`1px solid ${se.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:1.5},onClick:Q=>{Q.stopPropagation(),t(`/agents/${V.name}`)},children:[e.jsx(Os,{size:14}),"View"]}),e.jsx("button",{style:{backgroundColor:se.surfaceEl,color:se.ts,border:`1px solid ${se.borderS}`,borderRadius:"4px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:Q=>{Q.stopPropagation(),t(`/agents/${V.name}/edit`)},children:e.jsx(Du,{size:14})})]})]},V.name||de)),e.jsx("div",{style:{minWidth:"10px"}})]})})]}),e.jsxs(Ut.div,{variants:te,style:{width:"100%"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px",padding:"0 4px"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",color:se.tp,margin:"0 0 4px 0",letterSpacing:"-0.01em"},children:"Platform Capabilities"}),e.jsx("p",{style:{fontSize:"13px",color:se.ts,margin:0},children:"Slash commands and specialized agent skills available for your projects."})]})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"16px"},children:K.map(V=>e.jsxs(Ut.div,{whileHover:{y:-2},onMouseEnter:()=>f(V.id),onMouseLeave:()=>f(null),style:{backgroundColor:se.surface,border:`1px solid ${p===V.id?se.violet:se.border}`,borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",transition:"border-color 0.2s ease, box-shadow 0.2s ease",boxShadow:p===V.id?`0 0 20px ${se.violetG}`:"none",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"60px",height:"60px",background:V.accent,filter:"blur(40px)",opacity:p===V.id?.15:.05,borderRadius:"50%",transition:"opacity 0.3s ease"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:`${V.accent}15`,border:`1px solid ${V.accent}30`,display:"flex",alignItems:"center",justifyContent:"center",color:V.accent},children:e.jsx(V.icon,{size:18})}),V.isNew?e.jsx("span",{style:{padding:"2px 8px",borderRadius:"100px",backgroundColor:se.violetM,border:`1px solid ${se.violet}`,color:se.violet,fontSize:"10px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em"},children:"New"}):e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:se.tm,textTransform:"uppercase",fontWeight:"600"},children:"Uses"}),e.jsx("div",{style:{fontSize:"13px",color:se.ts,fontWeight:"500",fontFamily:se.mono},children:V.usage})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 6px 0",fontSize:"15px",color:se.tp,fontFamily:se.mono,fontWeight:"600"},children:V.name}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:se.ts,lineHeight:"1.5",height:"40px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:V.description})]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:`1px solid ${se.border}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:V.status==="Available"?se.success:se.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:V.status==="Available"?se.success:se.tm}}),V.status]}),e.jsxs(Ut.div,{animate:{x:p===V.id?4:0},style:{display:"flex",alignItems:"center",color:se.violet,fontSize:"12px",fontWeight:"600"},children:["Use skill ",e.jsx(ar,{size:14})]})]})]},V.id))})]}),e.jsxs("div",{className:"dash-main-grid",style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"28px",alignItems:"start"},children:[e.jsxs(Ut.div,{variants:te,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("h2",{style:{fontSize:"18px",fontWeight:700,display:"flex",alignItems:"center",gap:"8px",margin:0},children:["Projects ",e.jsx(ih,{color:se.ts,children:i.length})]})}),i.length===0?e.jsxs("div",{style:{padding:"50px 40px",borderRadius:"16px",border:`2px dashed ${se.border}`,textAlign:"center",backgroundColor:`${se.surface}44`},children:[e.jsx("div",{style:{marginBottom:"16px",color:se.tm},children:e.jsx(Es,{size:40,strokeWidth:1,style:{margin:"0 auto"}})}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:700,marginBottom:"6px"},children:"Your workspace is empty"}),e.jsx("p",{style:{color:se.ts,fontSize:"13px",maxWidth:"300px",margin:"0 auto 20px",lineHeight:"1.5"},children:"Start by creating a new project or initialize with our sample test suite."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{onClick:z,disabled:l,style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`,fontWeight:600,fontSize:"13px",cursor:"pointer"},children:l?"Generating...":"Seed Sample Data"}),e.jsx("button",{onClick:()=>t("/project/new"),style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:se.violet,color:"#fff",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer"},children:"Create Project"})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:i.map(V=>e.jsx(e6,{project:V,navigate:t,onDelete:P,t:se},V.id))})]}),e.jsxs(Ut.div,{variants:te,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${se.surface}, ${se.bg})`,borderRadius:"14px",border:`1px solid ${se.violet}33`,padding:"20px",boxShadow:`0 10px 40px -10px ${se.violet}15`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",background:se.violetG,color:se.violet},children:e.jsx(Ft,{size:16})}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:700,margin:0},children:"Ask Guru AI"})]}),e.jsx("p",{style:{fontSize:"12px",color:se.ts,marginBottom:"16px",lineHeight:"1.5"},children:"Get recommendations for agent selection, optimization tips, and platform guidance."}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{value:x,onChange:V=>v(V.target.value),onKeyDown:V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),E())},placeholder:"Ask anything...",style:{width:"100%",height:"70px",backgroundColor:se.bg,border:`1px solid ${se.border}`,borderRadius:"10px",padding:"10px",color:se.tp,fontSize:"13px",resize:"none",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit",boxSizing:"border-box"},onFocus:V=>V.target.style.borderColor=se.violet,onBlur:V=>V.target.style.borderColor=se.border}),e.jsx("button",{onClick:E,disabled:_||!x.trim(),style:{position:"absolute",bottom:"8px",right:"8px",padding:"5px 10px",backgroundColor:se.violet,color:"#fff",border:"none",borderRadius:"5px",fontSize:"11px",fontWeight:700,cursor:"pointer",opacity:!x.trim()||_?.5:1,transition:"opacity 0.2s"},children:_?"Thinking...":"Send"})]}),d&&e.jsx("div",{style:{marginTop:"12px",padding:"10px",borderRadius:"8px",backgroundColor:`${se.violet}08`,borderLeft:`3px solid ${se.violet}`,fontSize:"12px",color:se.tp,lineHeight:"1.5",fontFamily:se.mono,maxHeight:"200px",overflowY:"auto"},children:d})]}),e.jsxs("div",{style:{background:se.surface,borderRadius:"14px",border:`1px solid ${se.border}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${se.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",margin:0},children:[e.jsx(A0,{size:13,color:se.ts})," Activity Log"]}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:se.success,animation:"pulse 2s infinite"}})]}),e.jsxs("div",{style:{height:"220px",overflowY:"auto",padding:"12px",fontFamily:se.mono,fontSize:"11px",display:"flex",flexDirection:"column",gap:"8px"},children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:1},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date().toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:se.success},children:"System initialized"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.8},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-12e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsxs("span",{style:{color:se.ts},children:["Projects loaded (",i.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.6},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-24e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:se.ts},children:"Agent registry synced"})]})]}),i.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:se.tm},children:"No activity yet"})]})]}),e.jsxs("div",{style:{background:se.surface,borderRadius:"14px",border:`1px solid ${se.border}`,padding:"16px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,marginBottom:"14px"},children:"Platform Status"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:se.ts},children:"Project Capacity"}),e.jsxs("span",{style:{color:se.tp,fontWeight:600},children:[i.length,"/20"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:se.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${i.length/20*100}%`,height:"100%",backgroundColor:se.violet,borderRadius:"10px",transition:"width 0.5s ease-out"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:se.ts},children:"Agent Registry"}),e.jsxs("span",{style:{color:se.tp,fontWeight:600},children:[o.length," loaded"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:se.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:se.success,borderRadius:"10px"}})})]})]})]})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: ${se.borderS}; borderRadius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: ${se.tm}; }

        @media (max-width: 1024px) {
          .dash-main-grid { grid-template-columns: 1fr !important; }
        }
        @media (max-width: 768px) {
          .dash-actions { grid-template-columns: repeat(2, 1fr) !important; gap: 10px !important; }
          .dash-metrics { grid-template-columns: 1fr !important; gap: 12px !important; }
          .dash-main-grid { grid-template-columns: 1fr !important; }
          .dash-header { flex-direction: column; align-items: flex-start !important; }
        }
        @media (max-width: 480px) {
          .dash-actions { grid-template-columns: 1fr !important; }
        }
      `}}),g&&e.jsx(rp,{onClose:()=>w(!1)})]})}const jo={violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"},nh={folder:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),code:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"16 18 22 12 16 6"}),e.jsx("polyline",{points:"8 6 2 12 8 18"})]}),globe:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]}),database:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),rocket:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 00-2.91-.09z"}),e.jsx("path",{d:"M12 15l-3-3a22 22 0 012-3.95A12.88 12.88 0 0122 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 01-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),star:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),heart:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})}),lightning:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),brain:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.5 2A2.5 2.5 0 0112 4.5v15a2.5 2.5 0 01-4.96.44 2.5 2.5 0 01-2.96-3.08 3 3 0 01-.34-5.58 2.5 2.5 0 011.32-4.24 2.5 2.5 0 011.98-3A2.5 2.5 0 019.5 2z"}),e.jsx("path",{d:"M14.5 2A2.5 2.5 0 0012 4.5v15a2.5 2.5 0 004.96.44 2.5 2.5 0 002.96-3.08 3 3 0 00.34-5.58 2.5 2.5 0 00-1.32-4.24 2.5 2.5 0 00-1.98-3A2.5 2.5 0 0014.5 2z"})]}),terminal:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),cloud:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z"})}),shield:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),bug:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"8",y:"6",width:"8",height:"14",rx:"4"}),e.jsx("path",{d:"M19 12h2"}),e.jsx("path",{d:"M3 12h2"}),e.jsx("path",{d:"M19 8h2"}),e.jsx("path",{d:"M3 8h2"}),e.jsx("path",{d:"M19 16h2"}),e.jsx("path",{d:"M3 16h2"}),e.jsx("path",{d:"M12 6V2"})]}),palette:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"13.5",cy:"6.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"17.5",cy:"10.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"8.5",cy:"7.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"12.5",r:"0.5",fill:"currentColor"}),e.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.93 0 1.5-.75 1.5-1.5 0-.39-.15-.74-.39-1.04-.24-.3-.39-.65-.39-1.04 0-.83.67-1.5 1.5-1.5H16c3.31 0 6-2.69 6-6 0-5.5-4.5-9.92-10-9.92z"})]}),cpu:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),wand:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 4V2"}),e.jsx("path",{d:"M15 16v-2"}),e.jsx("path",{d:"M8 9h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M17.8 11.8L19 13"}),e.jsx("path",{d:"M15 9h0"}),e.jsx("path",{d:"M17.8 6.2L19 5"}),e.jsx("path",{d:"M11 6.2L9.7 5"}),e.jsx("path",{d:"M2 22l10-10"})]}),hammer:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 12l-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 010-3L12 9"}),e.jsx("path",{d:"M17.64 15L22 10.64"}),e.jsx("path",{d:"M20.91 11.7l-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V6.5a.5.5 0 00-.5-.5H16.5c-.85 0-1.65-.33-2.25-.93l-1.25-1.25"}),e.jsx("path",{d:"M13.09 7.91l3 3"})]}),search:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),sparkles:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"})}),brush:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.06 11.9l8.07-8.06a2.85 2.85 0 114.03 4.03l-8.06 8.08"}),e.jsx("path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 00-3-3.02z"})]})};function r6(t,i=16){const s=nh[t];return s?s(i):null}function i6({value:t,onChange:i}){const[s,o]=L.useState(null),u=Object.keys(nh);return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"4px"},children:u.map(S=>e.jsx("button",{onClick:()=>i(S),onMouseEnter:()=>o(S),onMouseLeave:()=>o(null),title:S,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t===S?jo.violetM:s===S?"rgba(255,255,255,0.04)":"transparent",border:t===S?`1px solid ${jo.violet}`:"1px solid transparent",borderRadius:"6px",cursor:"pointer",padding:0,color:t===S?jo.violet:s===S?jo.ts:jo.tm,transition:"all 0.15s ease"},children:nh[S](16)},S))})}const Ct={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444"},n6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316","#22c55e","#a855f7"],Tm={backgroundColor:Ct.bg,border:`1px solid ${Ct.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},fl={fontSize:"11px",fontWeight:"600",color:Ct.tm,textTransform:"uppercase",letterSpacing:"0.05em"};function s6({isOpen:t,onClose:i,categories:s,agentCounts:o,onSave:u,onDelete:S,onReorder:b}){const[l,c]=L.useState({name:"",color:"#8B5CF6",icon:"",description:""}),[x,v]=L.useState(null),[d,y]=L.useState(null),[_,j]=L.useState(null);if(L.useEffect(()=>{t||(c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null),y(null))},[t]),!t)return null;const C=g=>{v(g.id),c({name:g.name,color:g.color||"#8B5CF6",icon:g.icon||"",description:g.description||""})},h=()=>{var g;(g=l.name)!=null&&g.trim()&&(u({...l,id:x||void 0}),c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null))},p=()=>{c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null)},f=(g,w)=>{const R=[...s],A=g+w;A<0||A>=R.length||([R[g],R[A]]=[R[A],R[g]],b(R.map(z=>z.id)))};return e.jsx("div",{onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{onClick:g=>g.stopPropagation(),style:{width:"720px",maxHeight:"80vh",backgroundColor:Ct.surface,border:`1px solid ${Ct.borderS}`,borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${Ct.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Manage Categories"}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:Ct.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"55%",padding:"20px 24px",borderRight:`1px solid ${Ct.border}`,overflowY:"auto",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h3",{style:{fontSize:"13px",fontWeight:"600",margin:0,color:Ct.ts},children:x?"Edit Category":"New Category"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Name"}),e.jsx("input",{style:Tm,value:l.name,placeholder:"Category name...",onChange:g=>c(w=>({...w,name:g.target.value})),onKeyDown:g=>{g.key==="Enter"&&h()}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:n6.map(g=>e.jsx("button",{onClick:()=>c(w=>({...w,color:g})),style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:g,padding:0,cursor:"pointer",border:l.color===g?"2px solid #fff":"2px solid transparent",transition:"border 0.15s"}},g))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Icon"}),e.jsx(i6,{value:l.icon,onChange:g=>c(w=>({...w,icon:g}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Description"}),e.jsx("input",{style:Tm,value:l.description,placeholder:"Optional description...",onChange:g=>c(w=>({...w,description:g.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[x&&e.jsx("button",{onClick:p,style:{backgroundColor:Ct.surfaceEl,color:Ct.ts,border:`1px solid ${Ct.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:h,style:{backgroundColor:Ct.tp,color:Ct.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:12}),x?"Update":"Add Category"]})]})]}),e.jsxs("div",{style:{width:"45%",padding:"20px 16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:"600",margin:"0 0 8px 0",color:Ct.ts},children:["Existing (",s.length,")"]}),s.map((g,w)=>e.jsxs("div",{onMouseEnter:()=>j(g.id),onMouseLeave:()=>j(null),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",borderRadius:"6px",fontSize:"13px",backgroundColor:x===g.id?Ct.violetM:_===g.id?"rgba(255,255,255,0.02)":"transparent",border:x===g.id?`1px solid ${Ct.violet}`:"1px solid transparent",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:g.color||Ct.violet,flexShrink:0}}),e.jsx("span",{style:{color:Ct.tm,flexShrink:0,display:"flex"},children:r6(g.icon,14)}),e.jsx("span",{style:{flex:1,color:Ct.tp,textTransform:"capitalize",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.name}),e.jsx("span",{style:{fontSize:"10px",color:Ct.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px",flexShrink:0},children:o[g.name]||0}),_===g.id&&e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>f(w,-1),disabled:w===0,style:{background:"none",border:"none",color:w===0?"rgba(255,255,255,0.1)":Ct.tm,cursor:w===0?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(bh,{size:12})}),e.jsx("button",{onClick:()=>f(w,1),disabled:w===s.length-1,style:{background:"none",border:"none",color:w===s.length-1?"rgba(255,255,255,0.1)":Ct.tm,cursor:w===s.length-1?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(bn,{size:12})}),e.jsx("button",{onClick:()=>C(g),style:{background:"none",border:"none",color:Ct.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Xo,{size:12})}),d===g.id?e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:()=>{S(g.id),y(null)},style:{background:"none",border:"none",color:Ct.danger,cursor:"pointer",padding:"2px",fontSize:"10px",fontWeight:"700"},children:"Yes"}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:Ct.tm,cursor:"pointer",padding:"2px",fontSize:"10px"},children:"No"})]}):e.jsx("button",{onClick:()=>y(g.id),style:{background:"none",border:"none",color:Ct.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Ir,{size:12})})]})]},g.id)),s.length===0&&e.jsx("p",{style:{color:Ct.tm,fontSize:"12px",textAlign:"center",padding:"20px 0"},children:"No categories yet"})]})]})]})})}const xe={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},o6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316"];function Am({initial:t,onCancel:i,onSave:s,onChange:o}){return e.jsxs("div",{style:{padding:"10px",backgroundColor:xe.surfaceEl,borderRadius:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("input",{style:{background:xe.bg,border:`1px solid ${xe.border}`,color:"#fff",fontSize:"12px",padding:"6px 8px",borderRadius:"4px",outline:"none"},value:t.name,placeholder:"Category name...",onChange:u=>o({name:u.target.value}),onKeyDown:u=>{u.key==="Enter"&&s(),u.key==="Escape"&&i()},autoFocus:!0}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:o6.map(u=>e.jsx("button",{onClick:()=>o({color:u}),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:u,padding:0,cursor:"pointer",border:t.color===u?"2px solid #fff":"2px solid transparent"}},u))}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"4px"},children:[e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(bt,{size:14})}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:xe.success,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(or,{size:14})})]})]})}function a6({cat:t,isActive:i,count:s,onClick:o,onEdit:u,onDelete:S}){const[b,l]=L.useState(!1);return e.jsxs("div",{onClick:o,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",fontSize:"13px",gap:"10px",backgroundColor:i?xe.surfaceEl:b?"rgba(255,255,255,0.02)":"transparent",color:i?xe.tp:xe.ts,border:i?`1px solid ${xe.borderS}`:"1px solid transparent"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:t.color||xe.violet,flexShrink:0}}),e.jsx("span",{style:{flex:1,textTransform:"capitalize"},children:t.name}),b&&e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),u()},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Xo,{size:11})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),S()},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Ir,{size:11})})]}),e.jsx("span",{style:{fontSize:"11px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:s})]})}function l6({agent:t,viewType:i,categories:s,onEdit:o,onDelete:u,onRate:S,onTest:b,onClick:l,canEdit:c,canDelete:x}){const[v,d]=L.useState(!1),y=s.find(j=>j.name===t.category),_=i==="grid";return e.jsxs("div",{onClick:l,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{cursor:"pointer",backgroundColor:xe.surface,borderRadius:_?"8px":"4px",border:`1px solid ${v?xe.violet:xe.border}`,padding:_?"16px":"10px 16px",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:v?`0 0 20px ${xe.violetG}`:"none",display:"flex",flexDirection:_?"column":"row",alignItems:_?"stretch":"center",gap:_?"0":"16px"},children:[_&&t.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"6px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${xe.border}`},children:e.jsx("img",{src:t.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:0,color:xe.tp},children:t.name.replace(/-/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",width:"fit-content",backgroundColor:y!=null&&y.color?`${y.color}15`:xe.violetM,color:(y==null?void 0:y.color)||xe.violet},children:t.category||"uncategorized"})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(j=>e.jsx(vn,{size:12,fill:j<=(t.rating||0)?xe.warning:"none",color:j<=(t.rating||0)?xe.warning:xe.tm,style:{cursor:"pointer"},onClick:C=>{C.stopPropagation(),S(j)}},j))})]}),_&&e.jsx("p",{style:{fontSize:"12px",color:xe.ts,lineHeight:"1.5",margin:"0 0 12px 0",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:_?"12px":"0",borderTop:_?`1px solid ${xe.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:xe.mono,color:xe.tm},children:t.model||"unknown"}),t.project_count>0&&e.jsxs("span",{style:{fontSize:"10px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:[t.project_count," project",t.project_count!==1?"s":""]}),c?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:xe.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:j=>{j.stopPropagation(),b()},style:{backgroundColor:xe.violetM,color:xe.violet,border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(Do,{size:10,style:{marginRight:4}}),"TEST"]}),c&&e.jsx("button",{onClick:j=>{j.stopPropagation(),o()},style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Xo,{size:13})}),x&&e.jsx("button",{onClick:j=>{j.stopPropagation(),u()},style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Ir,{size:13})})]})]})]})]})}function c6({agent:t,categories:i,onClose:s,onSave:o}){const[u,S]=L.useState({...t}),[b,l]=L.useState(!1),c=async()=>{l(!0);try{await o(u)}finally{l(!1)}},x={backgroundColor:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"};return e.jsx("div",{onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"flex-end",zIndex:1e3},children:e.jsxs("div",{onClick:v=>v.stopPropagation(),style:{width:"450px",height:"100%",backgroundColor:xe.surface,borderLeft:`1px solid ${xe.borderS}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${xe.border}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 4px 0"},children:"Edit Agent"}),e.jsx("p",{style:{fontSize:"12px",fontFamily:xe.mono,color:xe.tm,margin:0},children:t.name})]}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Description"}),e.jsx("textarea",{style:{...x,resize:"vertical",fontFamily:"inherit",minHeight:"80px"},value:u.description||"",rows:4,onChange:v=>S({...u,description:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Model"}),e.jsx("input",{style:x,value:u.model||"",onChange:v=>S({...u,model:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Category"}),e.jsxs("select",{style:x,value:u.category||"",onChange:v=>S({...u,category:v.target.value}),children:[e.jsx("option",{value:"",children:"uncategorized"}),i.map(v=>e.jsx("option",{value:v.name,children:v.name},v.id))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Prompt Preview"}),e.jsx("div",{style:{backgroundColor:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"12px",fontSize:"11px",color:xe.ts,fontFamily:xe.mono,whiteSpace:"pre-wrap",maxHeight:"200px",overflowY:"auto",lineHeight:"1.6"},children:t.prompt_preview||"[No prompt content]"})]})]}),e.jsxs("div",{style:{padding:"20px 24px",borderTop:`1px solid ${xe.border}`,display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:s,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:c,disabled:b,style:{backgroundColor:xe.tp,color:xe.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",opacity:b?.6:1},children:[e.jsx(Gl,{size:14,style:{marginRight:6}}),b?"Saving...":"Save Changes"]})]})]})})}function d6(){const t=Wt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(null),[x,v]=L.useState(""),[d,y]=L.useState("rating"),[_,j]=L.useState("mine"),[C,h]=L.useState("grid"),p=qo(),[f,g]=L.useState(!1),[w,R]=L.useState(null),[A,z]=L.useState(null),[E,P]=L.useState(null),[O,H]=L.useState(!1),[K,U]=L.useState(!1),[te,V]=L.useState(new Set),[de,Q]=L.useState(null),[Y,B]=L.useState(!1),[D,M]=L.useState(!1),W=L.useCallback(async()=>{try{b(!0);const[Z,le]=await Promise.all([ae("/api/agents"),ae("/api/categories")]);s(Z||[]),u(le||[])}catch(Z){console.error(Z)}finally{b(!1)}},[]);L.useEffect(()=>{W()},[W]);const pe=()=>{const Z=document.createElement("input");Z.type="file",Z.accept=".md",Z.onchange=async le=>{var et;const Fe=(et=le.target.files)==null?void 0:et[0];if(!Fe)return;const Ze=await Fe.text();try{await ae("/api/agents/import",{method:"POST",body:JSON.stringify({filename:Fe.name,content:Ze})}),await W()}catch(dt){console.error("Import failed:",dt),alert(dt.message||"Import failed")}},Z.click()},me=async()=>{g(!0);try{await ae("/api/agents/sync",{method:"POST"}),await W()}catch(Z){console.error(Z)}finally{g(!1)}},we=async(Z,le)=>{try{await ae(`/api/agents/${Z}/rating`,{method:"PATCH",body:JSON.stringify({rating:le})}),s(Fe=>Fe.map(Ze=>Ze.name===Z?{...Ze,rating:le}:Ze))}catch(Fe){console.error(Fe)}},Re=async Z=>{try{await ae(`/api/agents/${Z}`,{method:"DELETE"}),s(le=>le.filter(Fe=>Fe.name!==Z)),P(null)}catch(le){console.error(le)}},X=async Z=>{try{const le=await ae(`/api/agents/${Z.name}`,{method:"PUT",body:JSON.stringify(Z)});s(Fe=>Fe.map(Ze=>Ze.name===Z.name?{...Ze,...le}:Ze)),R(null)}catch(le){console.error(le)}},F=async Z=>{var le;if((le=Z.name)!=null&&le.trim())try{Z.id?await ae(`/api/categories/${Z.id}`,{method:"PUT",body:JSON.stringify(Z)}):await ae("/api/categories",{method:"POST",body:JSON.stringify(Z)}),z(null),W()}catch(Fe){console.error(Fe)}},be=async Z=>{var le;try{await ae(`/api/categories/${Z}`,{method:"DELETE"}),((le=o.find(Fe=>Fe.id===Z))==null?void 0:le.name)===l&&c(null),W()}catch(Fe){console.error(Fe)}},oe=async Z=>{try{await ae("/api/categories/reorder",{method:"PUT",body:JSON.stringify({ids:Z})}),W()}catch(le){console.error(le)}},De=async Z=>{var le;if((le=Z.name)!=null&&le.trim())try{Z.id?await ae(`/api/categories/${Z.id}`,{method:"PUT",body:JSON.stringify(Z)}):await ae("/api/categories",{method:"POST",body:JSON.stringify(Z)}),W()}catch(Fe){console.error(Fe)}},ee=Z=>{V(le=>{const Fe=new Set(le);return Fe.has(Z)?Fe.delete(Z):Fe.add(Z),Fe})},ke=()=>{te.size===Ee.length?V(new Set):V(new Set(Ee.map(Z=>Z.name)))},he=async()=>{if(te.size&&window.confirm(`Delete ${te.size} agents?`))try{await ae("/api/agents/bulk/delete",{method:"POST",body:JSON.stringify({names:[...te]})}),V(new Set),U(!1),W()}catch(Z){console.error(Z)}},Ie=async Z=>{if(te.size)try{await ae("/api/agents/bulk/categorize",{method:"POST",body:JSON.stringify({names:[...te],category:Z})}),Q(null),V(new Set),U(!1),W()}catch(le){console.error(le)}},Oe=async()=>{if(te.size)try{const Z=await ae("/api/agents/bulk/export",{method:"POST",body:JSON.stringify({names:[...te]})}),le=new Blob([JSON.stringify(Z,null,2)],{type:"application/json"}),Fe=URL.createObjectURL(le),Ze=document.createElement("a");Ze.href=Fe,Ze.download=`agents-export-${te.size}.json`,Ze.click(),URL.revokeObjectURL(Fe)}catch(Z){console.error(Z)}},Pe=L.useMemo(()=>{const Z={};return i.forEach(le=>{Z[le.category]=(Z[le.category]||0)+1}),Z},[i]),Ee=L.useMemo(()=>i.filter(Z=>{const le=!l||Z.category===l,Fe=x.toLowerCase(),Ze=!Fe||Z.name.toLowerCase().includes(Fe)||(Z.description||"").toLowerCase().includes(Fe);let et=!0;return _==="mine"?et=Z.source==="manual"&&(!Z.created_by||Z.created_by===(p==null?void 0:p.userId)):_==="platform"&&(et=Z.source==="filesystem"||Z.source==="manual"&&Z.created_by&&Z.created_by!==(p==null?void 0:p.userId)),le&&Ze&&et}).sort((Z,le)=>d==="rating"?(le.rating||0)-(Z.rating||0):d==="name"?Z.name.localeCompare(le.name):d==="projects"?(le.project_count||0)-(Z.project_count||0):(le.updated_at||0)-(Z.updated_at||0)),[i,l,x,d,_,p==null?void 0:p.userId]),We=Z=>i.filter(le=>le.category===Z).length;return e.jsxs("div",{className:"ab-root",style:{display:"flex",height:"calc(100vh - 53px)",width:"100%",backgroundColor:xe.bg,color:xe.tp,overflow:"hidden"},children:[e.jsxs("aside",{className:"ab-sidebar",style:{width:"260px",borderRight:`1px solid ${xe.border}`,display:"flex",flexDirection:"column",backgroundColor:"#0a0a0b",flexShrink:0},children:[e.jsx("button",{className:"ab-sidebar-close",onClick:()=>B(!1),style:{display:"none",background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"8px",position:"absolute",top:"8px",right:"8px",zIndex:10},children:e.jsx(bt,{size:18})}),e.jsxs("div",{style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${xe.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Categories"}),e.jsx("button",{onClick:()=>H(!0),title:"Manage categories",style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(j0,{size:14})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[e.jsxs("div",{onClick:()=>c(null),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"13px",gap:"10px",marginBottom:"2px",backgroundColor:l===null?xe.surfaceEl:"transparent",color:l===null?xe.tp:xe.ts,border:l===null?`1px solid ${xe.borderS}`:"1px solid transparent"},children:[e.jsx(zs,{size:12,color:xe.tm}),e.jsx("span",{style:{flex:1},children:"All Agents"}),e.jsx("span",{style:{fontSize:"11px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:i.length})]}),o.map(Z=>e.jsx("div",{style:{marginBottom:"2px"},children:(A==null?void 0:A.id)===Z.id?e.jsx(Am,{initial:A,onCancel:()=>z(null),onSave:()=>F(A),onChange:le=>z(Fe=>({...Fe,...le}))}):e.jsx(a6,{cat:Z,isActive:l===Z.name,count:We(Z.name),onClick:()=>c(Z.name),onEdit:()=>z({...Z}),onDelete:()=>be(Z.id)})},Z.id)),A&&!A.id&&e.jsx(Am,{initial:A,onCancel:()=>z(null),onSave:()=>F(A),onChange:Z=>z(le=>({...le,...Z}))})]})]}),e.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("header",{className:"ab-toolbar",style:{minHeight:"52px",padding:"8px 24px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${xe.border}`,flexShrink:0,flexWrap:"wrap",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("button",{className:"ab-sidebar-toggle",onClick:()=>B(!Y),style:{display:"none",background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"6px",borderRadius:"4px",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:e.jsx(zs,{size:14})})}),e.jsxs("div",{className:"ab-search",style:{display:"flex",alignItems:"center",backgroundColor:xe.surface,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"0 12px",width:"300px",maxWidth:"100%"},children:[e.jsx(Ds,{size:14,color:xe.tm}),e.jsx("input",{value:x,onChange:Z=>v(Z.target.value),placeholder:"Search agents...",style:{background:"none",border:"none",color:"#fff",padding:"8px 10px",fontSize:"13px",width:"100%",outline:"none"}})]}),e.jsxs("div",{className:"ab-toolbar-right",style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("select",{value:d,onChange:Z=>y(Z.target.value),style:{backgroundColor:xe.surface,border:`1px solid ${xe.border}`,color:xe.ts,fontSize:"12px",padding:"6px 10px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"name",children:"Alphabetical"}),e.jsx("option",{value:"recent",children:"Recent"}),e.jsx("option",{value:"projects",children:"Most Used"})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:xe.surface,padding:"3px",borderRadius:"6px",border:`1px solid ${xe.border}`},children:[e.jsx("button",{onClick:()=>h("grid"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:C==="grid"?xe.surfaceEl:"transparent",color:C==="grid"?xe.violet:xe.tm,display:"flex",alignItems:"center"},children:e.jsx(S0,{size:14})}),e.jsx("button",{onClick:()=>h("compact"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:C==="compact"?xe.surfaceEl:"transparent",color:C==="compact"?xe.violet:xe.tm,display:"flex",alignItems:"center"},children:e.jsx(zu,{size:14})})]}),e.jsxs("button",{onClick:()=>{U(!K),V(new Set)},style:{backgroundColor:K?xe.violetM:xe.surfaceEl,color:K?xe.violet:xe.ts,border:`1px solid ${K?xe.violet:xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ow,{size:14}),K?"Cancel":"Select"]}),e.jsxs("button",{onClick:me,disabled:f,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($i,{size:14,style:f?{animation:"spin 1s linear infinite"}:{}}),"Sync"]}),e.jsxs("button",{onClick:pe,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(L0,{size:14}),"Import .md"]}),e.jsxs("button",{onClick:()=>t("/agents/new"),style:{backgroundColor:xe.violet,color:"#fff",border:"none",padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:14}),"Create Agent"]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${xe.border}`,padding:"0 24px"},children:[{key:"all",label:"All Agents",count:i.length},{key:"mine",label:"My Agents",count:i.filter(Z=>Z.source==="manual"&&(!Z.created_by||Z.created_by===(p==null?void 0:p.userId))).length},{key:"platform",label:"Platform",count:i.filter(Z=>Z.source==="filesystem"||Z.source==="manual"&&Z.created_by&&Z.created_by!==(p==null?void 0:p.userId)).length}].map(Z=>e.jsxs("button",{onClick:()=>j(Z.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:_===Z.key?xe.violet:xe.ts,borderBottom:_===Z.key?`2px solid ${xe.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[Z.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:_===Z.key?xe.violetM:"rgba(255,255,255,0.04)",color:_===Z.key?xe.violet:xe.tm},children:Z.count})]},Z.key))}),e.jsxs("div",{style:{padding:"20px 24px 0 24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"12px",textTransform:"capitalize"},children:[l||"All Agents",e.jsx("span",{style:{fontSize:"12px",fontWeight:"400",color:xe.tm,backgroundColor:xe.border,padding:"2px 8px",borderRadius:"100px"},children:Ee.length})]}),K&&te.size>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"12px",color:xe.violet,fontWeight:600},children:[te.size," selected"]}),e.jsx("button",{onClick:ke,style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer"},children:te.size===Ee.length?"Deselect All":"Select All"}),de?e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsxs("select",{autoFocus:!0,onChange:Z=>{Z.target.value&&Ie(Z.target.value)},style:{backgroundColor:xe.surfaceEl,border:`1px solid ${xe.borderS}`,color:xe.tp,fontSize:"11px",padding:"4px 8px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"",children:"Pick category..."}),o.map(Z=>e.jsx("option",{value:Z.name,children:Z.name},Z.id))]}),e.jsx("button",{onClick:()=>Q(null),style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(bt,{size:14})})]}):e.jsxs("button",{onClick:()=>Q("picking"),style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Uw,{size:12})," Categorize"]}),e.jsxs("button",{onClick:Oe,style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(yn,{size:12})," Export"]}),e.jsxs("button",{onClick:he,style:{background:"none",border:"1px solid rgba(239,68,68,0.3)",color:xe.danger,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ir,{size:12})," Delete"]})]})]}),K&&te.size===0&&e.jsx("p",{style:{fontSize:"12px",color:xe.tm,margin:"8px 0 0 0"},children:"Click agents to select them for bulk actions."})]}),e.jsxs("div",{className:"ab-cta-row",style:{padding:"16px 24px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>t("/agents/new"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Z=>{Z.currentTarget.style.borderColor=xe.violet,Z.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",Z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Z=>{Z.currentTarget.style.borderColor="rgba(139,92,246,0.25)",Z.currentTarget.style.boxShadow="none",Z.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(Jt,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Build a new agent from scratch"})]}),e.jsx(ar,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>t("/skills/create"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Z=>{Z.currentTarget.style.borderColor="#06b6d4",Z.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",Z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Z=>{Z.currentTarget.style.borderColor="rgba(6,182,212,0.25)",Z.currentTarget.style.boxShadow="none",Z.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Nr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Create reusable skill modules"})]}),e.jsx(ar,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>M(!0),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Z=>{Z.currentTarget.style.borderColor="#f59e0b",Z.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",Z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Z=>{Z.currentTarget.style.borderColor="rgba(245,158,11,0.25)",Z.currentTarget.style.boxShadow="none",Z.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ft,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Craft with AI"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Design an agent via GPT conversation"})]}),e.jsx(ar,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 24px",display:C==="grid"?"grid":"flex",gridTemplateColumns:C==="grid"?"repeat(auto-fill, minmax(320px, 1fr))":void 0,flexDirection:C==="compact"?"column":void 0,gap:"12px",opacity:S?.5:1,transition:"opacity 0.3s"},children:[Ee.map(Z=>e.jsxs("div",{style:{position:"relative"},children:[K&&e.jsx("div",{onClick:le=>{le.stopPropagation(),ee(Z.name)},style:{position:"absolute",top:"8px",left:"8px",zIndex:10,width:"20px",height:"20px",borderRadius:"4px",cursor:"pointer",backgroundColor:te.has(Z.name)?xe.violet:xe.surfaceEl,border:`1px solid ${te.has(Z.name)?xe.violet:xe.borderS}`,display:"flex",alignItems:"center",justifyContent:"center"},children:te.has(Z.name)&&e.jsx(or,{size:12,color:"#fff"})}),e.jsx(l6,{agent:Z,viewType:C,categories:o,canEdit:Z.source==="manual"&&(!Z.created_by||Z.created_by===(p==null?void 0:p.userId)),canDelete:Z.source==="manual"&&(!Z.created_by||Z.created_by===(p==null?void 0:p.userId)),onClick:()=>K?ee(Z.name):t(`/agents/${Z.name}`),onEdit:()=>{K||R(Z)},onDelete:()=>{K||P(Z.name)},onRate:le=>{K||we(Z.name,le)},onTest:()=>{K||t(`/project/new?agent=${Z.name}`)}})]},Z.name)),Ee.length===0&&!S&&e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",padding:"60px",border:`1px dashed ${xe.borderS}`,borderRadius:"12px"},children:[e.jsx("h3",{style:{fontSize:"14px",color:xe.ts,margin:"0 0 8px 0"},children:"No agents found"}),e.jsx("p",{style:{fontSize:"12px",color:xe.tm,margin:"0 0 16px 0"},children:"Try adjusting your search or category filters."}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await ae("/api/seed/demo",{method:"POST"}),await W()}catch(Z){console.error(Z)}},style:{backgroundColor:xe.violetM,color:xe.violet,border:"1px solid rgba(139,92,246,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Nr,{size:14})," Load Demo Data"]})]})]})]}),w&&e.jsx(c6,{agent:w,categories:o,onClose:()=>R(null),onSave:X}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{style:{backgroundColor:xe.surface,border:`1px solid ${xe.borderS}`,borderRadius:"12px",padding:"32px",width:"400px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ci,{size:32,color:xe.danger,style:{marginBottom:16}}),e.jsx("h3",{style:{fontSize:"16px",margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{color:xe.ts,fontSize:"13px",textAlign:"center",margin:"0 0 24px 0"},children:["Are you sure you want to delete ",e.jsx("strong",{style:{color:"#fff"},children:E}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>P(null),style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:()=>Re(E),style:{backgroundColor:xe.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})}),e.jsx(s6,{isOpen:O,onClose:()=>H(!1),categories:o,agentCounts:Pe,onSave:async Z=>{await De(Z)},onDelete:async Z=>{await be(Z)},onReorder:oe}),D&&e.jsx(rp,{onClose:()=>M(!1)}),e.jsx("style",{children:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
          .ab-sidebar {
            position: fixed !important;
            top: 53px;
            left: ${Y?"0":"-280px"};
            width: 260px !important;
            height: calc(100vh - 53px) !important;
            z-index: 100;
            transition: left 0.3s ease;
          }
          .ab-sidebar-close { display: flex !important; }
          .ab-sidebar-toggle { display: flex !important; }
          .ab-toolbar { padding: 8px 12px !important; }
          .ab-search { width: 100% !important; flex: 1; min-width: 0; }
          .ab-toolbar-right { width: 100%; overflow-x: auto; scrollbar-width: none; }
          .ab-toolbar-right::-webkit-scrollbar { display: none; }
          .ab-cta-row { padding: 12px 12px 0 !important; gap: 8px !important; }
          .ab-cta-card { flex: 1 1 100% !important; padding: 12px 14px !important; }
        }
      `}),Y&&e.jsx("div",{onClick:()=>B(!1),className:"ab-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99,display:"none"}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .ab-overlay { display: block !important; }
        }
      `})]})}const Ue={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},u6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],h6=["sonnet","opus","haiku"],p6=["","default","plan","bypassPermissions"],Pi={backgroundColor:Ue.bg,border:`1px solid ${Ue.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},Oi={fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",display:"block"};function f6(){const t=Wt(),[i,s]=L.useState([]),[o,u]=L.useState(!1),[S,b]=L.useState(""),[l,c]=L.useState(!1),[x,v]=L.useState(""),[d,y]=L.useState(!1),[_,j]=L.useState(null),[C,h]=L.useState(""),[p,f]=L.useState({name:"",description:"",model:"sonnet",category:"uncategorized",tools:[],max_turns:0,memory:"",permission_mode:"",prompt:""}),g=async()=>{if(x.trim()){y(!0),h(""),j(null);try{const O=await ae("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:x,style:p.category!=="uncategorized"?p.category:"",tools_needed:"",category:p.category!=="uncategorized"?p.category:""})});j(O)}catch(O){h(O.message||"AI generation failed")}finally{y(!1)}}},w=()=>{_&&(f(O=>({...O,name:_.name||O.name,description:_.description||O.description,model:_.model||O.model,tools:_.tools||O.tools,max_turns:_.max_turns||O.max_turns,permission_mode:_.permission_mode||O.permission_mode,prompt:_.prompt||O.prompt})),j(null),c(!1))};L.useEffect(()=>{ae("/api/categories").then(s).catch(()=>{})},[]);const R=p.name.length===0?null:/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(p.name),A=O=>{f(H=>({...H,tools:H.tools.includes(O)?H.tools.filter(K=>K!==O):[...H.tools,O]}))},z=L.useMemo(()=>{const O=[];return p.description&&O.push(`description: "${p.description.replace(/"/g,'\\"')}"`),p.model&&O.push(`model: ${p.model}`),p.tools.length>0&&O.push(`tools: [${p.tools.join(", ")}]`),p.max_turns>0&&O.push(`max_turns: ${p.max_turns}`),p.memory&&O.push(`memory: "${p.memory.replace(/"/g,'\\"')}"`),p.permission_mode&&O.push(`permission_mode: ${p.permission_mode}`),(O.length>0?`---
${O.join(`
`)}
---

`:"")+(p.prompt||"")},[p]),E=async()=>{if(!(!p.name||!R)){u(!0),b("");try{await ae("/api/agents",{method:"POST",body:JSON.stringify({name:p.name,description:p.description,model:p.model,category:p.category,tools:p.tools.join(", "),max_turns:p.max_turns,memory:p.memory,permission_mode:p.permission_mode,prompt:p.prompt})}),t(`/agents/${p.name}`)}catch(O){b(O.message||"Failed to create agent")}finally{u(!1)}}},P=i.find(O=>O.name===p.category);return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ue.bg,color:Ue.tp,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${Ue.border}`,display:"flex",alignItems:"center",gap:"16px",flexShrink:0},children:[e.jsx(pi,{to:"/agents",style:{color:Ue.tm,display:"flex",textDecoration:"none"},children:e.jsx(yh,{size:18})}),e.jsx("h1",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Create New Agent"})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsxs("div",{style:{width:"60%",overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"10px",border:`1px solid ${l?Ue.violet:Ue.border}`,overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("button",{onClick:()=>c(!l),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",backgroundColor:"transparent",border:"none",color:Ue.tp,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ft,{size:16,color:Ue.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600},children:"AI Assistant"}),e.jsx("span",{style:{fontSize:"11px",color:Ue.tm},children:"Describe your agent and let AI generate the config"})]}),e.jsx("span",{style:{fontSize:"12px",color:Ue.violet},children:l?"Close":"Open"})]}),l&&e.jsxs("div",{style:{padding:"0 16px 16px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("textarea",{value:x,onChange:O=>v(O.target.value),placeholder:"Describe what you want your agent to do... e.g. 'A code reviewer that focuses on React best practices and security vulnerabilities'",style:{...Pi,minHeight:"80px",resize:"vertical",fontFamily:"inherit",border:`1px solid ${Ue.borderS}`}}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsxs("button",{onClick:g,disabled:d||!x.trim(),style:{backgroundColor:Ue.violetM,color:Ue.violet,border:`1px solid ${Ue.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:d||!x.trim()?.5:1},children:[e.jsx(Cl,{size:14}),d?"Generating...":"Generate with AI"]}),C&&e.jsxs("span",{style:{fontSize:"12px",color:Ue.danger,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ci,{size:12}),C]})]}),_&&e.jsxs("div",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.success}`,borderRadius:"8px",padding:"14px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ue.success,textTransform:"uppercase"},children:"AI Suggestion"}),e.jsxs("button",{onClick:w,style:{backgroundColor:Ue.success,color:"#fff",border:"none",padding:"5px 12px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(or,{size:12}),"Apply"]})]}),_.name&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Name:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.name})]}),_.description&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Description:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.description})]}),_.model&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Model:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.model})]}),_.tools&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Tools:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.tools.join(", ")})]}),_.prompt&&e.jsxs("pre",{style:{fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,backgroundColor:"rgba(255,255,255,0.02)",padding:"10px",borderRadius:"6px",maxHeight:"150px",overflowY:"auto",whiteSpace:"pre-wrap",margin:0,lineHeight:"1.5"},children:[_.prompt.substring(0,500),_.prompt.length>500?"...":""]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Oi,children:"Name"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...Pi,paddingRight:"36px"},value:p.name,placeholder:"my-custom-agent",onChange:O=>f(H=>({...H,name:O.target.value.toLowerCase().replace(/\s/g,"-")}))}),R!==null&&e.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex"},children:R?e.jsx(or,{size:14,color:Ue.success}):e.jsx(bt,{size:14,color:Ue.danger})})]}),e.jsx("p",{style:{fontSize:"11px",color:R===!1?Ue.danger:Ue.tm,margin:"4px 0 0 0"},children:R===!1?"Must be kebab-case (e.g. my-agent-name)":"Lowercase, hyphens only"})]}),e.jsxs("div",{children:[e.jsx("label",{style:Oi,children:"Description"}),e.jsx("textarea",{style:{...Pi,resize:"vertical",minHeight:"60px",fontFamily:"inherit"},value:p.description,rows:3,placeholder:"What does this agent do?",onChange:O=>f(H=>({...H,description:O.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Oi,children:"Model"}),e.jsx("select",{style:Pi,value:p.model,onChange:O=>f(H=>({...H,model:O.target.value})),children:h6.map(O=>e.jsx("option",{value:O,children:O},O))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Oi,children:"Category"}),e.jsxs("select",{style:Pi,value:p.category,onChange:O=>f(H=>({...H,category:O.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),i.map(O=>e.jsx("option",{value:O.name,children:O.name},O.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Oi,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:u6.map(O=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:p.tools.includes(O)?Ue.violetM:Ue.bg,border:`1px solid ${p.tools.includes(O)?Ue.violet:Ue.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:p.tools.includes(O)?Ue.violet:Ue.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:p.tools.includes(O),onChange:()=>A(O),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${p.tools.includes(O)?Ue.violet:Ue.tm}`,backgroundColor:p.tools.includes(O)?Ue.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:p.tools.includes(O)&&e.jsx(or,{size:10,color:"#fff"})}),O]},O))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:Oi,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:Pi,value:p.max_turns,onChange:O=>f(H=>({...H,max_turns:parseInt(O.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Oi,children:"Permission Mode"}),e.jsx("select",{style:Pi,value:p.permission_mode,onChange:O=>f(H=>({...H,permission_mode:O.target.value})),children:p6.map(O=>e.jsx("option",{value:O,children:O||"(none)"},O))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Oi,children:"Memory"}),e.jsx("input",{style:Pi,value:p.memory,placeholder:"Optional...",onChange:O=>f(H=>({...H,memory:O.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Oi,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...Pi,resize:"vertical",minHeight:"280px",fontFamily:Ue.mono,fontSize:"12px",lineHeight:"1.7",whiteSpace:"pre"},value:p.prompt,rows:20,placeholder:"Write the agent instructions here...",onChange:O=>f(H=>({...H,prompt:O.target.value}))})]}),S&&e.jsx("div",{style:{color:Ue.danger,fontSize:"12px",padding:"8px 12px",backgroundColor:"rgba(239,68,68,0.1)",borderRadius:"6px",border:"1px solid rgba(239,68,68,0.2)"},children:S}),e.jsxs("div",{style:{display:"flex",gap:"12px",paddingBottom:"24px"},children:[e.jsx(pi,{to:"/agents",style:{backgroundColor:Ue.surfaceEl,color:Ue.ts,border:`1px solid ${Ue.borderS}`,padding:"10px 20px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:o||!R,style:{backgroundColor:Ue.tp,color:Ue.bg,border:"none",padding:"10px 24px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",opacity:o||!R?.5:1,display:"flex",alignItems:"center",gap:"8px"},children:o?"Creating...":"Create Agent"})]})]}),e.jsxs("div",{style:{width:"40%",borderLeft:`1px solid ${Ue.border}`,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Os,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Card Preview"})]}),e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"8px",border:`1px solid ${Ue.border}`,padding:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0",color:Ue.tp},children:p.name?p.name.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase()):"Agent Name"}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:P!=null&&P.color?`${P.color}15`:Ue.violetM,color:(P==null?void 0:P.color)||Ue.violet},children:p.category||"uncategorized"})]})}),e.jsx("p",{style:{fontSize:"12px",color:Ue.ts,lineHeight:"1.5",margin:0},children:p.description||"[No description]"}),e.jsxs("div",{style:{borderTop:`1px solid ${Ue.border}`,paddingTop:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:Ue.mono,color:Ue.tm},children:p.model||"unknown"}),p.tools.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:Ue.tm},children:[p.tools.length," tools"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ls,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:z||"# Empty agent file"})]})]})]})]})}const it={surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},g6=t=>t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--";function x6({agentName:t,onRevert:i}){const[s,o]=L.useState([]),[u,S]=L.useState(!0),[b,l]=L.useState(null),[c,x]=L.useState(null),[v,d]=L.useState(null);L.useEffect(()=>{y()},[t]);const y=async()=>{S(!0);try{const C=(await ae(`/api/agents/${t}/versions`)||[]).sort((h,p)=>p.version_number-h.version_number);o(C)}catch{l("Failed to load version history")}finally{S(!1)}},_=async j=>{try{await ae(`/api/agents/${t}/versions/${j}/revert`,{method:"POST"}),x(null),i&&i(),y()}catch{alert("Failed to revert version")}};return u?e.jsxs("div",{style:{padding:"24px",color:it.ts,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(nx,{size:14}),"Loading history..."]}):b?e.jsxs("div",{style:{padding:"24px",color:it.danger,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ci,{size:14}),b]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:it.violetG,display:"flex",alignItems:"center",justifyContent:"center",color:it.violet},children:e.jsx(nx,{size:14})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600,color:it.tp},children:"Version History"}),e.jsxs("span",{style:{fontSize:"10px",color:it.tm},children:[s.length," versions"]})]})]}),e.jsxs("div",{style:{position:"relative",paddingLeft:"24px"},children:[s.length>0&&e.jsx("div",{style:{position:"absolute",left:"7px",top:"8px",bottom:"8px",width:"1px",background:it.borderS}}),s.map((j,C)=>{const h=C===0,p=v===j.id,f=c===j.id,g=s[C+1],w=g&&j.model!==g.model,R=g&&j.tools!==g.tools;return e.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"-21px",top:"12px",width:"9px",height:"9px",borderRadius:"50%",background:h?it.violet:it.surfaceEl,border:`2px solid ${h?it.violetM:it.borderS}`,zIndex:2}}),e.jsxs("div",{style:{background:it.surface,border:`1px solid ${it.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>d(p?null:j.id),style:{padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:"11px",fontFamily:it.mono,color:h?it.violet:it.ts,background:h?it.violetG:"transparent",padding:"2px 6px",borderRadius:"4px",border:`1px solid ${h?it.violetM:it.border}`,flexShrink:0},children:["v",j.version_number]}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("span",{style:{fontSize:"13px",color:it.tp,fontWeight:500},children:j.change_summary||"[No summary]"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"2px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:it.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Yo,{size:10})," ",g6(j.created_at)]}),h&&e.jsx("span",{style:{fontSize:"10px",color:it.violet,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Current"})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[!h&&!f&&e.jsxs("button",{onClick:A=>{A.stopPropagation(),x(j.id)},style:{background:"transparent",border:`1px solid ${it.border}`,borderRadius:"6px",color:it.ts,padding:"4px 8px",fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",transition:"border-color 0.2s"},children:[e.jsx(Rw,{size:12})," Revert"]}),p?e.jsx(bn,{size:14,color:it.tm}):e.jsx(ar,{size:14,color:it.tm})]})]}),f&&e.jsxs("div",{style:{padding:"12px 16px",background:"rgba(139,92,246,0.05)",borderTop:`1px solid ${it.violetM}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontSize:"12px",color:it.tp},children:["Revert to ",e.jsxs("strong",{children:["v",j.version_number]}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>x(null),style:{background:"transparent",border:"none",color:it.ts,fontSize:"11px",cursor:"pointer",padding:"4px 8px"},children:"Cancel"}),e.jsx("button",{onClick:()=>_(j.id),style:{background:it.violet,border:"none",color:"#fff",fontSize:"11px",fontWeight:600,padding:"4px 12px",borderRadius:"4px",cursor:"pointer"},children:"Revert Now"})]})]}),p&&e.jsxs("div",{style:{padding:"16px",borderTop:`1px solid ${it.border}`,background:"rgba(0,0,0,0.1)"},children:[e.jsx("p",{style:{fontSize:"12px",color:it.ts,margin:"0 0 12px 0",lineHeight:1.5},children:j.description||"[No description]"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${w?it.violetM:it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(qn,{size:10})," Model"]}),e.jsx("div",{style:{fontSize:"12px",color:w?it.violet:it.tp,fontFamily:it.mono},children:j.model||"unknown"})]}),e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${R?it.violetM:it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(z0,{size:10})," Tools"]}),e.jsxs("div",{style:{fontSize:"12px",color:R?it.violet:it.tp},children:[j.tools?j.tools.split(",").filter(Boolean).length:0," defined"]})]}),e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(Sh,{size:10})," Memory"]}),e.jsx("div",{style:{fontSize:"12px",color:it.tp},children:j.memory||"None"})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"6px",textTransform:"uppercase"},children:[e.jsx(Ls,{size:10})," Prompt Snippet"]}),e.jsxs("div",{style:{fontSize:"11px",color:it.ts,fontFamily:it.mono,background:"#000",padding:"10px",borderRadius:"6px",border:`1px solid ${it.border}`,maxHeight:"100px",overflowY:"auto",whiteSpace:"pre-wrap",lineHeight:1.4},children:[(j.full_prompt||"[Empty]").substring(0,500),j.full_prompt&&j.full_prompt.length>500?"...":""]})]})]})]})]},j.id)})]}),s.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",border:`1px dashed ${it.border}`,borderRadius:"12px",color:it.tm,fontSize:"12px"},children:"No version history available yet."})]})}const N={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function fu(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function Eo(t){return t?t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString():"0"}function m6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=N.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${N.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=N.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})})}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:N.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:N.ts},children:t.project_name}),e.jsx("span",{style:{color:N.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:["v",t.iteration_version]})]})]})]})}function y6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),x=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Fi,{size:14,style:{color:N.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:N.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:N.surfaceEl,border:`1px solid ${N.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:N.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:16})}),e.jsx("div",{ref:u,onScroll:x,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${N.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=N.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=N.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:N.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:N.surfaceEl,border:`1px solid ${N.border}`,color:N.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:N.surfaceEl,border:`1px solid ${N.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:N.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(ar,{size:16})})]})]})}function v6(){const{name:t}=Gn(),i=Wt(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState([]),[c,x]=L.useState(!0),[v,d]=L.useState(!1),[y,_]=L.useState([]),[j,C]=L.useState([]),[h,p]=L.useState(!1),[f,g]=L.useState([]),[w,R]=L.useState(!1),[A,z]=L.useState(!1),[E,P]=L.useState(new Set),[O,H]=L.useState([]),[K,U]=L.useState({}),[te,V]=L.useState(!1),[de,Q]=L.useState(!1),[Y,B]=L.useState(null),[D,M]=L.useState(!1),[W,pe]=L.useState([]),[me,we]=L.useState(!0),[Re,X]=L.useState(null),[F,be]=L.useState({}),[oe,De]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[ee,ke]=L.useState(!1),he=qo(),Ie=s&&s.source==="manual"&&(!s.created_by||s.created_by===(he==null?void 0:he.userId)),[Oe,Pe]=L.useState(null),[Ee,We]=L.useState(!1),[Z,le]=L.useState(null),[Fe,Ze]=L.useState(!1),[et,dt]=L.useState(null),[Vt,St]=L.useState(null),[wt,Tt]=L.useState([]),[mt,Lt]=L.useState(""),[ut,Mr]=L.useState(!1),[rr,Ei]=L.useState(!1),[hr,pr]=L.useState(null),Cr=L.useRef(null);L.useEffect(()=>{var I;(I=Cr.current)==null||I.scrollIntoView({behavior:"smooth"})},[wt]);const ne=async()=>{if(!mt.trim()||ut)return;const I=mt.trim();Lt("");const G=[...wt,{role:"user",content:I}];Tt(G),Mr(!0);try{const _e=await ae(`/api/agents/${t}/test-chat`,{method:"POST",body:JSON.stringify({messages:G})});Tt(je=>[...je,{role:"assistant",content:_e.content}]),_e.context&&pr(_e.context)}catch(_e){Tt(je=>[...je,{role:"assistant",content:"Error: "+(_e.message||"Failed to get response")}])}finally{Mr(!1)}};L.useEffect(()=>{try{const I=localStorage.getItem(`mcp_key_${t}`);I&&St(I)}catch{}},[t]);const Ne=(I,G)=>{navigator.clipboard.writeText(I),dt(G),setTimeout(()=>dt(null),2e3)};L.useEffect(()=>{x(!0),Promise.all([ae(`/api/agents/${t}`),ae(`/api/agents/${t}/projects`),ae("/api/categories"),ae(`/api/marketplace/${t}`)]).then(async([I,G,_e,je])=>{o(I),S(G||[]),l(_e||[]),H(je.showcases||[]);try{const He=await ae(`/api/skills/agent/${t}`);_(He||[])}catch(He){console.error("Failed to load agent skills:",He)}try{const He=await ae(`/api/agent-deploy/${t}/deployment`);Pe(He)}catch{}const ye=(G||[]).slice(0,20),Ke={};await Promise.all(ye.map(async He=>{try{const vt=await ae(`/api/iterations/${He.id}`);vt&&vt.length>0&&(Ke[He.id]=vt)}catch(vt){console.error(`Failed to load iterations for project ${He.id}:`,vt)}})),U(Ke)}).catch(I=>{console.error(I)}).finally(()=>x(!1))},[t]);const Ge=async I=>{try{await ae(`/api/agents/${t}/rating`,{method:"PATCH",body:JSON.stringify({rating:I})}),o(G=>({...G,rating:I}))}catch(G){console.error(G)}},ct=async()=>{try{await ae(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch(I){console.error(I)}},yt=()=>{if(!(s!=null&&s.full_prompt))return;const I=new Blob([s.full_prompt],{type:"text/markdown"}),G=URL.createObjectURL(I),_e=document.createElement("a");_e.href=G,_e.download=`${s.name}.md`,_e.click(),URL.revokeObjectURL(G)},Kt=async()=>{const I=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(I)try{await ae(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:I})}),i(`/agents/${I}`)}catch(G){console.error(G)}},ft=async I=>{if(I.preventDefault(),Q(!1),O.length>=6){alert("Maximum 6 showcases per agent");return}try{const G=JSON.parse(I.dataTransfer.getData("application/json"));await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(G)});const _e=await ae(`/api/marketplace/${t}`);H(_e.showcases||[])}catch(G){console.error("Drop error:",G),alert(G.message||"Failed to add showcase")}},qt=I=>{I.preventDefault(),I.dataTransfer.dropEffect="copy",Q(!0)},Br=()=>{Q(!1)},Hr=async()=>{We(!0);try{const I=await ae(`/api/agent-deploy/${t}/deploy`,{method:"POST",body:JSON.stringify({tier:"starter"})});Pe(I.deployment),le(I.apiKey),St(I.apiKey),Ze(!0);try{localStorage.setItem(`mcp_key_${t}`,I.apiKey)}catch{}}catch(I){alert(I.message||"Deploy failed")}finally{We(!1)}},Zr=async()=>{if(window.confirm("Undeploy this MCP server? API keys will be revoked.")){We(!0);try{await ae(`/api/agent-deploy/${t}/deployment`,{method:"DELETE"}),Pe(null),le(null)}catch(I){alert(I.message||"Undeploy failed")}finally{We(!1)}}},kr=async()=>{if(!Oe)return;const I=Oe.status==="active"?"paused":"active";try{await ae(`/api/agent-deploy/${t}/deployment`,{method:"PUT",body:JSON.stringify({status:I})}),Pe(G=>({...G,status:I}))}catch(G){alert(G.message||"Status update failed")}},Pr=async(I,G)=>{const _e=O.findIndex(Ke=>Ke.id===I);if(G==="up"&&_e===0||G==="down"&&_e===O.length-1)return;const je=[...O],ye=G==="up"?_e-1:_e+1;[je[_e],je[ye]]=[je[ye],je[_e]],H(je),await ae(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:je.map(Ke=>Ke.id)})})},ei=async I=>{window.confirm("Remove this showcase?")&&(await ae(`/api/marketplace/${t}/showcases/${I}`,{method:"DELETE"}),H(O.filter(G=>G.id!==I)))},fi=async()=>{try{const I=await ae("/api/projects");pe(I||[]);const G={};await Promise.all((I||[]).map(async _e=>{try{const je=await ae(`/api/iterations/${_e.id}`);je&&je.length>0&&(G[_e.id]=je)}catch(je){console.error(`Failed to load iterations for project ${_e.id}:`,je)}})),be(G)}catch(I){console.error(I)}we(!0),X(null),M(!0)},jr=async()=>{if(!(!oe.project_id||!oe.iteration_id||!oe.title))try{await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(oe)});const I=await ae(`/api/marketplace/${t}`);H(I.showcases||[]),M(!1),X(null),De({project_id:"",iteration_id:"",title:"",description:""})}catch(I){console.error(I),alert(I.message||"Failed to add showcase")}};if(c)return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:N.bg,color:N.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:N.tm,fontSize:"13px"},children:"Loading..."})});if(!s)return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:N.bg,color:N.tp,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px"},children:[e.jsx("span",{style:{color:N.ts,fontSize:"14px"},children:"Agent not found"}),e.jsx(pi,{to:"/agents",style:{color:N.violet,fontSize:"13px"},children:"Back to agents"})]});const lr=b.find(I=>I.name===s.category),ti=s.tools?s.tools.split(",").map(I=>I.trim()).filter(Boolean):[];return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:N.bg,color:N.tp,overflowY:"auto"},children:[e.jsxs("div",{className:"agent-detail-breadcrumb",style:{padding:"16px 32px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${N.border}`},children:[e.jsx(pi,{to:"/agents",style:{color:N.tm,display:"flex",textDecoration:"none"},children:e.jsx(yh,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:N.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:N.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:N.ts},children:t})]}),e.jsxs("div",{className:"agent-detail-header",style:{margin:"0",padding:"32px",borderRadius:"0",border:"none",borderBottom:`1px solid ${N.border}`,background:"rgba(26,26,27,0.8)",backdropFilter:"blur(20px)",boxShadow:`0 0 40px ${N.violetG}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[s.screenshot_path?e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",overflow:"hidden",border:`2px solid ${N.violet}40`,flexShrink:0,background:N.surfaceEl,boxShadow:`0 4px 16px ${N.violetG}`},children:e.jsx("img",{src:s.screenshot_path+"?t="+Date.now(),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",flexShrink:0,background:`linear-gradient(135deg, ${N.violetM} 0%, ${N.surfaceEl} 100%)`,border:`2px solid ${N.violet}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",color:N.violet},children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 10px 0",letterSpacing:"-0.01em"},children:s.name.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:lr!=null&&lr.color?`${lr.color}15`:N.violetM,color:(lr==null?void 0:lr.color)||N.violet},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:"rgba(255,255,255,0.05)",color:N.ts,fontFamily:N.mono},children:s.model||"unknown"}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:s.source==="manual"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:s.source==="manual"?N.success:N.ts},children:s.source||"filesystem"}),ti.map(I=>e.jsx("span",{style:{display:"inline-flex",padding:"3px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"500",backgroundColor:"rgba(255,255,255,0.04)",color:N.tm},children:I},I))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"3px",flexShrink:0},children:[1,2,3,4,5].map(I=>e.jsx(vn,{size:16,fill:I<=(s.rating||0)?N.warning:"none",color:I<=(s.rating||0)?N.warning:N.tm,style:{cursor:"pointer"},onClick:()=>Ge(I)},I))})]}),e.jsx("p",{style:{fontSize:"13px",color:N.ts,lineHeight:"1.6",margin:"0 0 16px 0",maxWidth:"700px"},children:s.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",marginBottom:"20px"},children:[s.memory&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Memory:"})," ",s.memory]}),s.permission_mode&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Permission:"})," ",s.permission_mode]}),s.max_turns>0&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Max Turns:"})," ",s.max_turns]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(tx,{size:10})," ",fu(s.created_at)]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Yo,{size:10})," ",fu(s.updated_at)]})]}),e.jsxs("div",{className:"agent-detail-actions",style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[Ie&&e.jsxs("button",{onClick:()=>i(`/agents/${t}/edit`),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xo,{size:13}),"Edit"]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Do,{size:13}),"Test"]}),e.jsxs("button",{onClick:Kt,style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(wl,{size:13}),"Duplicate"]}),e.jsxs("button",{onClick:yt,style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(yn,{size:13}),"Export .md"]}),Oe?e.jsxs("a",{href:`/mcp/${Oe.slug}`,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"rgba(34,197,94,0.1)",color:N.success,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",textDecoration:"none"},children:[e.jsx(Es,{size:13}),"View MCP"]}):e.jsxs("button",{onClick:Hr,disabled:Ee,style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:Ee?"wait":"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Yd,{size:13}),Ee?"Deploying...":"Deploy MCP"]}),e.jsxs("button",{onClick:()=>V(!te),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Fi,{size:13}),te?"Hide Showcases":"Manage Showcases"]}),Ie&&(v?e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"12px",color:N.danger},children:"Confirm?"}),e.jsx("button",{onClick:ct,style:{backgroundColor:N.danger,color:"#fff",border:"none",padding:"6px 12px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer"},children:"Yes"}),e.jsx("button",{onClick:()=>d(!1),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"6px 12px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"No"})]}):e.jsxs("button",{onClick:()=>d(!0),style:{backgroundColor:"transparent",color:N.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ir,{size:13}),"Delete"]}))]})]}),Ie&&e.jsxs("div",{style:{padding:"20px 32px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>i(`/skills/create?agent=${t}`),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:I=>{I.currentTarget.style.borderColor="#06b6d4",I.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",I.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:I=>{I.currentTarget.style.borderColor="rgba(6,182,212,0.25)",I.currentTarget.style.boxShadow="none",I.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Nr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Create Skill"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"New skill auto-linked to this agent"})]}),e.jsx(ar,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:async()=>{try{const I=await ae("/api/skills");C(I||[]),p(!0)}catch(I){console.error(I)}},style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:I=>{I.currentTarget.style.borderColor=N.violet,I.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",I.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:I=>{I.currentTarget.style.borderColor="rgba(139,92,246,0.25)",I.currentTarget.style.boxShadow="none",I.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(Jt,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Assign existing skills to this agent"})]}),e.jsx(ar,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>ke(!0),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:I=>{I.currentTarget.style.borderColor="#f59e0b",I.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",I.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:I=>{I.currentTarget.style.borderColor="rgba(245,158,11,0.25)",I.currentTarget.style.boxShadow="none",I.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ft,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Enhance with AI"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Improve this agent via AI conversation"})]}),e.jsx(ar,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]})]}),te&&e.jsxs("div",{style:{margin:"0 24px 24px",padding:"24px",borderRadius:"12px",border:`1px solid ${N.violet}40`,background:N.surface},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:N.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:N.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:N.ts},children:[O.length," / 6 showcases"]}),O.length<6&&e.jsxs("button",{onClick:fi,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:N.tp,color:N.bg,border:"none"},children:[e.jsx(Jt,{size:14})," Add Showcase"]})]})]}),e.jsxs("div",{onDrop:ft,onDragOver:qt,onDragLeave:Br,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:O.length===0?"120px":"auto",border:de?`2px dashed ${N.violet}`:"none",borderRadius:"8px",padding:de?"8px":"0",background:de?`${N.violet}10`:"transparent",transition:"all 0.2s"},children:[O.map((I,G)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:N.surfaceEl,borderRadius:"8px",border:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>Pr(I.id,"up"),disabled:G===0,style:{background:"none",border:"none",color:G===0?N.tm:N.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(_0,{size:14})}),e.jsx("button",{onClick:()=>Pr(I.id,"down"),disabled:G===O.length-1,style:{background:"none",border:"none",color:G===O.length-1?N.tm:N.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(b0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:I.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[I.project_name,"  v",I.iteration_version]})]}),e.jsxs("button",{onClick:()=>ei(I.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${N.danger}20`,color:N.danger,border:"none"},children:[e.jsx(Ir,{size:14})," Remove"]})]},I.id)),O.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${de?N.violet:N.border}`,borderRadius:"8px",color:de?N.violet:N.tm,background:de?`${N.violet}10`:"transparent",transition:"all 0.2s"},children:de?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations below!"})]})]}),O.length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Os,{size:16,style:{color:N.violet}})," Showcase Gallery"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:O.map(I=>e.jsx(m6,{showcase:I,onClick:B},I.id))})]}),Object.keys(K).length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Fi,{size:16,style:{color:N.violet}})," Iteration Browser"]}),u.filter(I=>K[I.id]&&K[I.id].length>0).map(I=>e.jsx(y6,{iterations:K[I.id],projectId:I.id,projectName:I.name,onSelectIteration:(G,_e,je)=>{B({project_id:_e,iteration_id:G.id,title:G.title||`V${G.version}`,project_name:je,iteration_version:G.version})}},I.id))]}),e.jsxs("div",{className:"agent-detail-content",style:{display:"flex",padding:"0 24px 24px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{className:"agent-detail-left",style:{width:"65%",minWidth:"300px",flex:"1 1 400px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:["Prompt",s.full_prompt&&e.jsxs("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",fontFamily:N.mono},children:[s.full_prompt.split(`
`).length," lines"]})]}),e.jsx("div",{style:{backgroundColor:N.bg,border:`1px solid ${N.borderS}`,borderRadius:"8px",maxHeight:"600px",overflowY:"auto"},children:s.full_prompt?e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{padding:"16px 12px 16px 16px",borderRight:`1px solid ${N.border}`,userSelect:"none",flexShrink:0},children:s.full_prompt.split(`
`).map((I,G)=>e.jsx("div",{style:{fontSize:"11px",fontFamily:N.mono,color:"rgba(255,255,255,0.15)",lineHeight:"1.7",textAlign:"right"},children:G+1},G))}),e.jsx("pre",{style:{padding:"16px",margin:0,fontSize:"11px",fontFamily:N.mono,color:N.ts,lineHeight:"1.7",whiteSpace:"pre-wrap",wordBreak:"break-word",flex:1,overflow:"hidden"},children:s.full_prompt})]}):e.jsx("div",{style:{padding:"40px",textAlign:"center",color:N.tm,fontSize:"13px"},children:"[No prompt content]"})}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx(x6,{agentName:t,onRevert:()=>{ae(`/api/agents/${t}`).then(o).catch(console.error)}})})]}),e.jsxs("div",{className:"agent-detail-right",style:{width:"35%",minWidth:"280px",flex:"1 1 280px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:["Projects",e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:u.length})]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Jt,{size:12}),"New"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[u.map(I=>e.jsxs("div",{onClick:()=>i(`/project/${I.id}`),style:{backgroundColor:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"14px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:G=>G.currentTarget.style.borderColor=N.violet,onMouseLeave:G=>G.currentTarget.style.borderColor=N.border,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"500"},children:I.name}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:I.status==="active"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:I.status==="active"?N.success:N.tm},children:I.status})]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(tx,{size:10})," ",fu(I.created_at)]})]},I.id)),u.length===0&&e.jsx("div",{style:{padding:"40px 20px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${N.borderS}`,color:N.tm,fontSize:"12px"},children:"No projects yet"})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Nr,{size:14,style:{color:N.violet}}),"Skills",e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:y.length})]}),Ie&&e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:async()=>{R(!0),z(!0),P(new Set);try{const I=await ae(`/api/skills/agent/${t}/ai-generate`,{method:"POST"});g(I.skills||[]),P(new Set((I.skills||[]).map((G,_e)=>_e)))}catch(I){console.error(I),g([])}R(!1)},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.25)",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ft,{size:12}),"AI Enhance"]}),e.jsxs("button",{onClick:async()=>{try{const I=await ae("/api/skills");C(I||[]),p(!0)}catch(I){console.error(I)}},style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Jt,{size:12}),"Add"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[y.map(I=>e.jsxs("div",{style:{backgroundColor:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:G=>{G.currentTarget.style.borderColor=I.color||N.violet,G.currentTarget.style.transform="translateX(4px)"},onMouseLeave:G=>{G.currentTarget.style.borderColor=N.border,G.currentTarget.style.transform="translateX(0)"},onClick:()=>i(`/skills/${I.id}/edit`),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:I.color||N.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:I.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:I.category||"general"}),e.jsx(Do,{size:10,style:{color:N.tm,opacity:.5}})]}),Ie&&e.jsx("button",{onClick:async G=>{G.stopPropagation();try{await ae(`/api/skills/${I.id}/unassign/${t}`,{method:"DELETE"}),_(_e=>_e.filter(je=>je.id!==I.id))}catch(_e){console.error(_e)}},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Remove skill",children:e.jsx(bt,{size:13})})]},I.id)),y.length===0&&!A&&e.jsx("div",{style:{padding:"24px 14px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${N.borderS}`,color:N.tm,fontSize:"11px"},children:"No skills assigned"})]}),A&&e.jsxs("div",{style:{marginTop:"12px",borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(245,158,11,0.3)",background:"linear-gradient(135deg, rgba(245,158,11,0.06) 0%, rgba(245,158,11,0.02) 100%)"},children:[e.jsxs("div",{style:{padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(245,158,11,0.15)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ft,{size:14,style:{color:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:N.tp},children:"AI-Suggested Skills"}),!w&&f.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:N.tm},children:[E.size,"/",f.length," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[!w&&f.length>0&&e.jsxs("button",{onClick:async()=>{if(E.size===0)return;const I=f.filter((G,_e)=>E.has(_e));try{const G=await ae("/api/skills/bulk",{method:"POST",body:JSON.stringify({skills:I})});if(G.skills&&G.skills.length>0){const _e=G.skills.map(ye=>ye.id);await ae(`/api/skills/agent/${t}/bulk`,{method:"POST",body:JSON.stringify({skill_ids:_e})});const je=await ae(`/api/skills/agent/${t}`);_(je||[])}z(!1),g([])}catch(G){console.error(G)}},style:{backgroundColor:"rgba(34,197,94,0.15)",color:"#22c55e",border:"1px solid rgba(34,197,94,0.3)",padding:"4px 12px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:["Add ",E.size," Skills"]}),e.jsx("button",{onClick:()=>{z(!1),g([])},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex",padding:"4px"},children:e.jsx(bt,{size:14})})]})]}),e.jsx("div",{style:{padding:"8px",maxHeight:"320px",overflowY:"auto"},children:w?e.jsxs("div",{style:{padding:"30px",textAlign:"center"},children:[e.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid rgba(245,158,11,0.3)",borderTopColor:"#f59e0b",borderRadius:"50%",margin:"0 auto 10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Analyzing agent context..."}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg) } }"})]}):f.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:N.tm,fontSize:"11px"},children:"No suggestions generated. Try again."}):f.map((I,G)=>{const _e=E.has(G);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",padding:"10px 12px",borderRadius:"6px",marginBottom:"4px",backgroundColor:_e?"rgba(245,158,11,0.08)":"transparent",border:`1px solid ${_e?"rgba(245,158,11,0.2)":"transparent"}`,cursor:"pointer",transition:"all 0.15s"},onClick:()=>{P(je=>{const ye=new Set(je);return ye.has(G)?ye.delete(G):ye.add(G),ye})},children:[e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",flexShrink:0,marginTop:"1px",border:`2px solid ${_e?"#f59e0b":N.borderS}`,backgroundColor:_e?"#f59e0b":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},children:_e&&e.jsx("span",{style:{color:"#000",fontSize:"11px",fontWeight:"700"},children:""})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"3px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:I.color||"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:N.tp},children:I.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:I.category})]}),e.jsx("div",{style:{fontSize:"11px",color:N.ts,lineHeight:"1.4"},children:I.description})]})]},G)})})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Yd,{size:14,style:{color:N.violet}}),"MCP Deploy",Oe&&e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:Oe.status==="active"?"rgba(34,197,94,0.15)":"rgba(245,158,11,0.15)",color:Oe.status==="active"?N.success:N.warning},children:Oe.status})]})}),Oe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("a",{href:`/mcp/${Oe.slug}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 14px",borderBottom:`1px solid ${N.border}`,textDecoration:"none",color:N.tp,fontSize:"12px",transition:"background 0.15s"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=N.surfaceEl,onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Es,{size:13,style:{color:N.violet}}),e.jsxs("span",{style:{fontFamily:N.mono,fontSize:"11px",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["/mcp/",Oe.slug]}),e.jsx(Do,{size:11,style:{color:N.tm}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",borderBottom:`1px solid ${N.border}`,fontSize:"11px"},children:[e.jsx(sx,{size:12,style:{color:N.violet}}),e.jsxs("span",{style:{fontFamily:N.mono,color:N.ts,flex:1},children:["/mcp/",Oe.slug,"/api/chat"]})]}),Fe&&Z&&e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,background:"rgba(139,92,246,0.05)"},children:[e.jsxs("div",{style:{fontSize:"10px",color:N.warning,fontWeight:"600",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(sx,{size:10})," Save your API key (shown only once)"]}),e.jsxs("div",{style:{fontFamily:N.mono,fontSize:"10px",color:N.tp,background:"rgba(0,0,0,0.3)",padding:"6px 8px",borderRadius:"4px",wordBreak:"break-all",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{flex:1},children:Z}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Z)},style:{background:"none",border:"none",color:N.violet,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(wl,{size:12})})]})]}),Oe.monthlyUsage!==void 0&&e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(vh,{size:10})," Monthly Tokens"]}),e.jsxs("span",{style:{fontSize:"10px",fontFamily:N.mono,color:N.ts},children:[Eo(Oe.monthlyUsage)," / ",Eo(Oe.monthly_token_limit)]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.06)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:"3px",width:`${Math.min((Oe.monthlyUsage||0)/(Oe.monthly_token_limit||1)*100,100)}%`,background:`linear-gradient(90deg, ${N.violet}, ${N.violet}cc)`,transition:"width 0.5s ease"}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",borderBottom:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${N.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:Oe.total_requests||0}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Requests"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${N.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:Eo(Oe.total_input_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Input"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:Eo(Oe.total_output_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Output"})]})]}),e.jsxs("div",{style:{padding:"10px 14px",display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:kr,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:Oe.status==="active"?"rgba(245,158,11,0.1)":"rgba(34,197,94,0.1)",color:Oe.status==="active"?N.warning:N.success,border:"none",cursor:"pointer"},children:Oe.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(gw,{size:10}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(ql,{size:10}),"Resume"]})}),e.jsxs("button",{onClick:Zr,disabled:Ee,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:"rgba(239,68,68,0.1)",color:N.danger,border:"none",cursor:Ee?"wait":"pointer"},children:[e.jsx(lx,{size:10}),"Undeploy"]})]})]}),(()=>{const I=Vt||Z||"YOUR_API_KEY",_e=`${window.location.origin}/mcp/${Oe.slug}/api/chat`,je=s.name.replace(/-/g," ").replace(/\b\w/g,Hi=>Hi.toUpperCase()),ye=`curl -X POST ${_e} \\
  -H "Authorization: Bearer ${I}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"Hello!"}]}'`,Ke=`You have access to an AI agent "${je}" via HTTP API.

Endpoint: ${_e}
API Key: ${I}

To interact with this agent, make HTTP POST requests:

curl -X POST ${_e} \\
  -H "Authorization: Bearer ${I}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}'

The response will contain the agent's reply in: response.choices[0].message.content

Use this agent when you need help with: ${s.description||"specialized tasks"}.`,He=`You are connected to an external AI agent "${je}".

To call this agent, use the following HTTP API:
- Method: POST
- URL: ${_e}
- Headers: Authorization: Bearer ${I}, Content-Type: application/json
- Body: {"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}

The agent responds with: {"choices":[{"message":{"content":"RESPONSE"}}]}

Agent description: ${s.description||"Specialized AI agent"}.
Use this agent to delegate tasks matching its expertise.`,vt=({label:Hi,value:Yn,fieldKey:Ri})=>e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"600",textTransform:"uppercase"},children:Hi}),e.jsxs("button",{onClick:()=>Ne(Yn,Ri),style:{background:et===Ri?"rgba(34,197,94,0.15)":N.surfaceEl,border:`1px solid ${et===Ri?"rgba(34,197,94,0.3)":N.border}`,color:et===Ri?N.success:N.ts,padding:"3px 8px",fontSize:"9px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s"},children:[e.jsx(wl,{size:9}),et===Ri?"Copied!":"Copy"]})]}),e.jsx("div",{onClick:()=>Ne(Yn,Ri),style:{fontFamily:N.mono,fontSize:"10px",color:N.ts,background:"rgba(0,0,0,0.3)",padding:"8px 10px",borderRadius:"6px",whiteSpace:"pre-wrap",wordBreak:"break-all",lineHeight:"1.5",cursor:"pointer",border:`1px solid ${N.border}`,maxHeight:"120px",overflowY:"auto",transition:"border-color 0.2s"},onMouseEnter:Xn=>Xn.currentTarget.style.borderColor=N.violet,onMouseLeave:Xn=>Xn.currentTarget.style.borderColor=N.border,children:Yn})]});return e.jsxs("div",{style:{marginTop:"12px",background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Nr,{size:12,style:{color:N.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:"Test in your LLM"})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx(vt,{label:"API Token",value:I,fieldKey:"token"}),e.jsx(vt,{label:"Curl Command",value:ye,fieldKey:"curl"}),e.jsx(vt,{label:"Prompt for Claude",value:Ke,fieldKey:"claude"}),e.jsx(vt,{label:"Prompt for ChatGPT",value:He,fieldKey:"gpt"})]})]})})()]}):e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"20px",textAlign:"center"},children:[e.jsx(Es,{size:24,style:{color:N.tm,marginBottom:"8px"}}),e.jsx("p",{style:{fontSize:"12px",color:N.tm,marginBottom:"14px"},children:"Deploy this agent as an MCP server with its own landing page & API"}),e.jsxs("button",{onClick:Hr,disabled:Ee,style:{backgroundColor:N.violet,color:"#fff",border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:"600",borderRadius:"6px",cursor:Ee?"wait":"pointer",display:"inline-flex",alignItems:"center",gap:"6px",opacity:Ee?.6:1},children:[e.jsx(Yd,{size:13}),Ee?"Deploying...":"Deploy as MCP"]})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ax,{size:14,style:{color:N.violet}}),"Test Agent"]}),e.jsxs("button",{onClick:()=>Ei(!rr),style:{background:rr?N.violetG:N.surfaceEl,border:`1px solid ${rr?N.violet:N.border}`,color:rr?N.violet:N.ts,padding:"4px 10px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ax,{size:10})," ",rr?"Close":"Open Chat"]})]}),rr&&e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",height:"420px"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(139,92,246,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(fn,{size:13,style:{color:N.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:s.name.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),hr&&e.jsxs("span",{style:{fontSize:"9px",color:N.tm,fontFamily:N.mono,padding:"1px 6px",borderRadius:"100px",background:"rgba(255,255,255,0.05)"},children:[Eo(hr.systemPromptTokens)," tokens context"]})]}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:wt.length>0&&e.jsxs("button",{onClick:()=>{Tt([]),pr(null)},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",fontSize:"9px",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(lx,{size:9})," Clear"]})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:wt.length===0?e.jsxs("div",{style:{padding:"30px 12px",textAlign:"center"},children:[e.jsx(fn,{size:28,style:{color:N.tm,marginBottom:"10px",opacity:.2}}),e.jsx("div",{style:{fontSize:"12px",color:N.ts,marginBottom:"6px"},children:"Chat with this agent to test it"}),e.jsxs("div",{style:{fontSize:"10px",color:N.tm,lineHeight:"1.5"},children:["Full system prompt + all skills are injected.",y.length>0&&e.jsxs("span",{children:[" ",y.length," skill",y.length>1?"s":""," loaded."]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",justifyContent:"center",marginTop:"14px"},children:["What can you do?","List your skills","Help me get started"].map(I=>e.jsx("button",{onClick:()=>{Lt(I)},style:{padding:"4px 10px",fontSize:"10px",borderRadius:"100px",background:N.surfaceEl,border:`1px solid ${N.border}`,color:N.ts,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:G=>{G.currentTarget.style.borderColor=N.violet,G.currentTarget.style.color=N.violet},onMouseLeave:G=>{G.currentTarget.style.borderColor=N.border,G.currentTarget.style.color=N.ts},children:I},I))})]}):e.jsxs(e.Fragment,{children:[wt.map((I,G)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexDirection:I.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:I.role==="user"?"rgba(255,255,255,0.08)":N.violetG},children:I.role==="user"?e.jsx(Cn,{size:11,style:{color:N.ts}}):e.jsx(fn,{size:11,style:{color:N.violet}})}),e.jsx("div",{style:{maxWidth:"85%",padding:"8px 12px",borderRadius:I.role==="user"?"10px 10px 2px 10px":"10px 10px 10px 2px",background:I.role==="user"?"rgba(139,92,246,0.12)":N.surfaceEl,border:`1px solid ${I.role==="user"?"rgba(139,92,246,0.2)":N.border}`,fontSize:"12px",lineHeight:"1.6",color:N.tp,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:I.content})]},G)),ut&&e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:N.violetG},children:e.jsx(fn,{size:11,style:{color:N.violet}})}),e.jsx("div",{style:{padding:"8px 12px",borderRadius:"10px 10px 10px 2px",background:N.surfaceEl,border:`1px solid ${N.border}`,fontSize:"11px",color:N.tm,fontStyle:"italic"},children:"Thinking..."})]}),e.jsx("div",{ref:Cr})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${N.border}`,display:"flex",gap:"6px"},children:[e.jsx("input",{value:mt,onChange:I=>Lt(I.target.value),onKeyDown:I=>I.key==="Enter"&&!I.shiftKey&&ne(),placeholder:"Test a message...",disabled:ut,style:{flex:1,backgroundColor:N.bg,border:`1px solid ${N.border}`,borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"12px",outline:"none",fontFamily:"inherit"}}),e.jsx("button",{onClick:ne,disabled:ut||!mt.trim(),style:{backgroundColor:mt.trim()?N.violet:N.surfaceEl,border:"none",borderRadius:"6px",padding:"8px 12px",color:mt.trim()?"#fff":N.tm,cursor:mt.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:"600",transition:"all 0.15s"},children:e.jsx(wh,{size:12})})]})]})]}),h&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>p(!1),children:e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.borderS}`,borderRadius:"8px",width:"400px",maxHeight:"500px",overflow:"hidden"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${N.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",margin:0},children:"Add Skills"}),e.jsx("button",{onClick:()=>p(!1),style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:16})})]}),e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"8px"},children:[j.filter(I=>!y.find(G=>G.id===I.id)).map(I=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.15s"},onMouseEnter:G=>G.currentTarget.style.backgroundColor=N.surfaceEl,onMouseLeave:G=>G.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:I.color||N.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:I.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm},children:I.category})]}),e.jsx("button",{onClick:async()=>{try{await ae(`/api/skills/${I.id}/assign/${t}`,{method:"POST"}),_(G=>[...G,I]),C(G=>G.filter(_e=>_e.id!==I.id))}catch(G){console.error(G)}},style:{backgroundColor:N.violetM,color:N.violet,border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Add"})]},I.id)),j.filter(I=>!y.find(G=>G.id===I.id)).length===0&&e.jsx("div",{style:{padding:"30px",textAlign:"center",color:N.tm,fontSize:"12px"},children:"No more skills available"})]})]})})]})]}),D&&(()=>{const I=me?W.filter(je=>je.agent===t):W,G=(je,ye)=>{const Ke=ye.title||`${je.name} v${ye.version}`;De({project_id:je.id,iteration_id:ye.id,title:Ke,description:""}),X({project:je,iteration:ye,title:Ke})},_e=async()=>{!oe.project_id||!oe.iteration_id||await jr()};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:N.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{M(!1),X(null)},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:N.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>we(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:me?N.violet:"transparent",color:me?"#fff":N.ts},children:["This Agent (",u.length,")"]}),e.jsxs("button",{onClick:()=>we(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:me?"transparent":N.violet,color:me?N.ts:"#fff"},children:["All Projects (",W.length,")"]})]}),I.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:N.tm,fontSize:"14px"},children:["No projects found",me?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:I.map(je=>{const ye=F[je.id]||[];return ye.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Fi,{size:14,style:{color:N.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:N.tp},children:je.name}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:[ye.length," version",ye.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:ye.map(Ke=>{const He=(Re==null?void 0:Re.iteration.id)===Ke.id;return e.jsxs("div",{onClick:()=>G(je,Ke),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:He?`2px solid ${N.violet}`:`1px solid ${N.border}`,background:N.surfaceEl,transition:"all 0.2s",boxShadow:He?`0 0 20px ${N.violet}40`:"none"},onMouseEnter:vt=>{He||(vt.currentTarget.style.borderColor=N.violet)},onMouseLeave:vt=>{He||(vt.currentTarget.style.borderColor=N.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${je.id}/${Ke.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${Ke.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),He&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:N.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:N.tp,marginBottom:"2px"},children:Ke.title||`Version ${Ke.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:N.tm},children:["v",Ke.version]})]})]},Ke.id)})})]},je.id)})}),Re&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:N.surfaceEl,border:`1px solid ${N.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:N.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:oe.title,onChange:je=>De({...oe,title:je.target.value}),style:{width:"100%",background:N.surface,border:`1px solid ${N.border}`,borderRadius:"6px",padding:"10px",color:N.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>X(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:N.ts,border:`1px solid ${N.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:_e,disabled:!oe.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:N.violet,color:"#fff",border:"none",opacity:oe.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),Y&&e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.95)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"60px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Y.title}),e.jsxs("span",{style:{fontSize:"12px",color:N.tm,whiteSpace:"nowrap"},children:[Y.project_name," v",Y.iteration_version]})]}),e.jsx("button",{onClick:()=>B(null),style:{background:N.surfaceEl,border:"none",color:N.tp,width:"32px",height:"32px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(bt,{size:18})})]}),e.jsx("div",{style:{flex:1},children:e.jsx("iframe",{src:`/api/preview/${Y.project_id}/${Y.iteration_id}`,style:{width:"100%",height:"100%",border:"none"}})})]}),ee&&e.jsx(rp,{onClose:()=>{ke(!1),ae(`/api/agents/${t}`).then(o).catch(console.error)},initialAgent:{name:s.name,prompt:s.full_prompt||""}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .agent-detail-breadcrumb { padding: 12px 16px !important; }
          .agent-detail-header { padding: 20px 16px !important; }
          .agent-detail-content { padding: 0 16px 16px !important; flex-direction: column; }
          .agent-detail-left, .agent-detail-right { width: 100% !important; min-width: 0 !important; }
          .agent-detail-actions button { padding: 6px 10px !important; font-size: 11px !important; }
        }
      `})]})}const Ce={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},b6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],_6=["sonnet","opus","haiku"],S6=["","default","plan","bypassPermissions"],dn={display:"block",fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},$n={width:"100%",backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function Lm(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"}function w6(){const{name:t}=Gn(),i=Wt(),s=L.useRef(null),[o,u]=L.useState(!0),[S,b]=L.useState(!1),[l,c]=L.useState(!1),[x,v]=L.useState([]),[d,y]=L.useState(!1),[_,j]=L.useState(null),[C,h]=L.useState([]),[p,f]=L.useState([]),[g,w]=L.useState(!1),[R,A]=L.useState(""),[z,E]=L.useState({description:"",model:"sonnet",category:"uncategorized",full_prompt:"",tools:[],max_turns:0,memory:"",permission_mode:"",created_at:null,updated_at:null,project_count:0});L.useEffect(()=>{Promise.all([ae(`/api/agents/${t}`),ae("/api/categories"),ae(`/api/skills/agent/${t}`)]).then(([D,M,W])=>{const pe=D.tools?D.tools.split(",").map(me=>me.trim()).filter(Boolean):[];E({description:D.description||"",model:D.model||"sonnet",category:D.category||"uncategorized",full_prompt:D.full_prompt||"",tools:pe,max_turns:D.max_turns||0,memory:D.memory||"",permission_mode:D.permission_mode||"",created_at:D.created_at,updated_at:D.updated_at,project_count:D.project_count||0}),v(M||[]),h(W||[])}).catch(D=>{P("Error loading agent","danger")}).finally(()=>u(!1))},[t]);const P=(D,M="success")=>{j({message:D,type:M}),setTimeout(()=>j(null),3e3)},O=D=>{E(M=>({...M,tools:M.tools.includes(D)?M.tools.filter(W=>W!==D):[...M.tools,D]}))},H=L.useMemo(()=>{const D=(z.full_prompt||"").split(`
`).length;return Array.from({length:Math.max(D,1)},(M,W)=>W+1)},[z.full_prompt]),K=L.useMemo(()=>{const D=[];return z.description&&D.push(`description: "${z.description.replace(/"/g,'\\"')}"`),z.model&&D.push(`model: ${z.model}`),z.tools.length>0&&D.push(`tools: [${z.tools.join(", ")}]`),z.max_turns>0&&D.push(`max_turns: ${z.max_turns}`),z.memory&&D.push(`memory: "${z.memory.replace(/"/g,'\\"')}"`),z.permission_mode&&D.push(`permission_mode: ${z.permission_mode}`),(D.length>0?`---
${D.join(`
`)}
---

`:"")+(z.full_prompt||"")},[z]),U=async()=>{b(!0);try{await ae(`/api/agents/${t}`,{method:"PUT",body:JSON.stringify({description:z.description,model:z.model,category:z.category,full_prompt:z.full_prompt,tools:z.tools.join(", "),max_turns:z.max_turns,memory:z.memory,permission_mode:z.permission_mode})}),P("Agent saved successfully"),setTimeout(()=>i(`/agents/${t}`),800)}catch(D){P(D.message||"Failed to save","danger")}finally{b(!1)}},te=async()=>{const D=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(D)try{await ae(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:D})}),P("Agent duplicated"),i(`/agents/${D}/edit`)}catch(M){P(M.message||"Duplicate failed","danger")}},V=async()=>{c(!0);try{const D=await ae("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:z.description||"Improve this agent prompt",style:z.category,tools_needed:z.tools.join(", "),category:z.category,existing_prompt:z.full_prompt})});D.prompt&&(E(M=>({...M,full_prompt:D.prompt})),P("Prompt enhanced by AI"))}catch(D){P(D.message||"AI enhancement failed","danger")}finally{c(!1)}},de=async()=>{try{await ae(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch{P("Delete failed","danger"),y(!1)}},Q=async()=>{try{const D=await ae("/api/skills");f(D||[]),A(""),w(!0)}catch{P("Failed to load skills","danger")}},Y=async D=>{try{await ae(`/api/skills/${D.id}/assign/${t}`,{method:"POST"}),h(M=>[...M,D]),P(`Skill "${D.name}" assigned`)}catch(M){P(M.message||"Assign failed","danger")}},B=async D=>{try{await ae(`/api/skills/${D.id}/unassign/${t}`,{method:"DELETE"}),h(M=>M.filter(W=>W.id!==D.id)),P(`Skill "${D.name}" removed`)}catch(M){P(M.message||"Unassign failed","danger")}};return o?e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ce.bg,color:Ce.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:Ce.tm,fontSize:"13px"},children:"Loading agent..."})}):e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:Ce.bg,color:Ce.tp,paddingBottom:"80px"},children:[e.jsxs("div",{style:{padding:"16px 24px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${Ce.border}`},children:[e.jsx(pi,{to:`/agents/${t}`,style:{color:Ce.tm,display:"flex",textDecoration:"none"},children:e.jsx(Go,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"/"}),e.jsx(pi,{to:`/agents/${t}`,style:{fontSize:"12px",color:Ce.ts,textDecoration:"none"},children:t}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tp,fontWeight:600},children:"Edit"})]}),e.jsxs("div",{style:{display:"flex",padding:"24px",gap:"24px"},children:[e.jsxs("div",{style:{flex:"1 1 60%",display:"flex",flexDirection:"column",gap:"20px",minWidth:0},children:[e.jsxs("div",{children:[e.jsx("label",{style:dn,children:"Description"}),e.jsx("textarea",{style:{...$n,resize:"vertical",minHeight:"70px"},value:z.description,placeholder:"What does this agent do?",onChange:D=>E(M=>({...M,description:D.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:dn,children:"Model"}),e.jsx("select",{style:$n,value:z.model,onChange:D=>E(M=>({...M,model:D.target.value})),children:_6.map(D=>e.jsx("option",{value:D,children:D},D))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:dn,children:"Category"}),e.jsxs("select",{style:$n,value:z.category,onChange:D=>E(M=>({...M,category:D.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),x.map(D=>e.jsx("option",{value:D.name,children:D.name},D.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:dn,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:b6.map(D=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:z.tools.includes(D)?Ce.violetM:Ce.bg,border:`1px solid ${z.tools.includes(D)?Ce.violet:Ce.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:z.tools.includes(D)?Ce.violet:Ce.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:z.tools.includes(D),onChange:()=>O(D),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${z.tools.includes(D)?Ce.violet:Ce.tm}`,backgroundColor:z.tools.includes(D)?Ce.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:z.tools.includes(D)&&e.jsx(or,{size:10,color:"#fff"})}),D]},D))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:dn,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:$n,value:z.max_turns,onChange:D=>E(M=>({...M,max_turns:parseInt(D.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:dn,children:"Permission Mode"}),e.jsx("select",{style:$n,value:z.permission_mode,onChange:D=>E(M=>({...M,permission_mode:D.target.value})),children:S6.map(D=>e.jsx("option",{value:D,children:D||"(none)"},D))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:dn,children:"Memory"}),e.jsx("input",{style:$n,value:z.memory,placeholder:"Optional...",onChange:D=>E(M=>({...M,memory:D.target.value}))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"6px"},children:[e.jsx("label",{style:{...dn,marginBottom:0},children:"System Prompt"}),e.jsxs("span",{style:{fontSize:"11px",color:Ce.tm,fontFamily:Ce.mono},children:[z.full_prompt.length," chars / ",H.length," lines"]})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:Ce.bg,border:`1px solid ${Ce.borderS}`,borderRadius:"8px",minHeight:"500px",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px 8px 16px 12px",borderRight:`1px solid ${Ce.border}`,userSelect:"none",flexShrink:0,backgroundColor:Ce.surface},children:H.map(D=>e.jsx("div",{style:{fontSize:"11px",fontFamily:Ce.mono,color:"rgba(255,255,255,0.15)",lineHeight:"20px",textAlign:"right"},children:D},D))}),e.jsx("textarea",{ref:s,value:z.full_prompt,onChange:D=>E(M=>({...M,full_prompt:D.target.value})),spellCheck:"false",style:{flex:1,background:"transparent",border:"none",outline:"none",color:Ce.tp,fontSize:"13px",lineHeight:"20px",padding:"16px",resize:"none",fontFamily:Ce.mono,width:"100%"},placeholder:"Write the agent instructions here..."})]})]})]}),e.jsxs("div",{style:{flex:"0 0 380px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Dl,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Live Preview"})]}),e.jsxs("div",{style:{backgroundColor:Ce.surface,borderRadius:"8px",border:`1px solid ${Ce.borderS}`,padding:"16px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:`radial-gradient(circle at top right, ${Ce.violetG}, transparent)`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:600,textTransform:"uppercase",backgroundColor:Ce.violetM,color:Ce.violet},children:z.category}),e.jsx("span",{style:{fontSize:"10px",color:Ce.tm,fontFamily:Ce.mono,fontWeight:600},children:z.model})]}),e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,margin:"0 0 6px 0"},children:t.replace(/-/g," ").replace(/\b\w/g,D=>D.toUpperCase())}),e.jsx("p",{style:{fontSize:"12px",color:Ce.ts,lineHeight:"1.5",margin:"0 0 10px 0"},children:z.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[z.tools.slice(0,5).map(D=>e.jsx("span",{style:{fontSize:"10px",backgroundColor:Ce.surfaceEl,padding:"2px 6px",borderRadius:"4px",border:`1px solid ${Ce.border}`,color:Ce.tm},children:D},D)),z.tools.length>5&&e.jsxs("span",{style:{fontSize:"10px",color:Ce.tm},children:["+",z.tools.length-5]})]})]})]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(KS,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Stats"})]}),[{icon:e.jsx(Yo,{size:12,color:Ce.tm}),label:"Created",value:Lm(z.created_at)},{icon:e.jsx(qn,{size:12,color:Ce.tm}),label:"Updated",value:Lm(z.updated_at)},{icon:e.jsx(Dl,{size:12,color:Ce.tm}),label:"Projects",value:`${z.project_count}`}].map((D,M)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:M<2?`1px solid ${Ce.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[D.icon,e.jsx("span",{style:{fontSize:"12px",color:Ce.ts},children:D.label})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:Ce.mono,color:Ce.tp},children:D.value})]},M))]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Nr,{size:14,color:Ce.violet}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Skills (",C.length,")"]})]}),e.jsxs("button",{onClick:Q,style:{background:"none",border:"none",color:Ce.violet,cursor:"pointer",fontSize:"11px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Jt,{size:12})," Add"]})]}),C.length===0?e.jsx("div",{style:{padding:"16px",textAlign:"center",color:Ce.tm,fontSize:"11px",border:`1px dashed ${Ce.border}`,borderRadius:"6px"},children:"No skills assigned. Skills inject context into workspace CLAUDE.md when running projects."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:C.map(D=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:Ce.surface,borderRadius:"6px",border:`1px solid ${Ce.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:D.color||Ce.violet,flexShrink:0}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),D.total_files>0&&e.jsxs("span",{style:{fontSize:"9px",color:Ce.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 5px",borderRadius:"100px"},children:[D.total_files," files"]})]}),e.jsx("button",{onClick:()=>B(D),style:{background:"none",border:"none",color:Ce.tm,cursor:"pointer",padding:"2px",display:"flex"},title:"Remove skill",children:e.jsx(bt,{size:12})})]},D.id))})]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Os,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:"#0a0a0a",border:`1px solid ${Ce.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:Ce.ts,fontFamily:Ce.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:K||"# Empty agent file"})]})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:100,backgroundColor:Ce.bg,borderTop:`1px solid ${Ce.borderS}`,padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>y(!0),style:{backgroundColor:"transparent",color:Ce.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ir,{size:14}),"Delete"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:V,disabled:l,style:{backgroundColor:Ce.violetM,color:Ce.violet,border:`1px solid ${Ce.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:l?.6:1},children:[e.jsx(Ft,{size:14}),l?"Enhancing...":"AI Enhance"]}),e.jsxs("button",{onClick:te,style:{backgroundColor:Ce.surfaceEl,color:Ce.ts,border:`1px solid ${Ce.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(wl,{size:14}),"Duplicate"]}),e.jsxs("button",{onClick:U,disabled:S,style:{backgroundColor:Ce.tp,color:Ce.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:S?.6:1},children:[e.jsx(Gl,{size:14}),S?"Saving...":"Save Changes"]})]})]}),_&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:_.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${_.type==="danger"?Ce.danger:Ce.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[_.type==="danger"?e.jsx(Ci,{size:14,color:Ce.danger}):e.jsx(or,{size:14,color:Ce.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ce.tp},children:_.message})]}),g&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:()=>w(!1),children:e.jsxs("div",{style:{width:"420px",backgroundColor:Ce.surface,border:`1px solid ${Ce.borderS}`,borderRadius:"12px",overflow:"hidden"},onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 20px",borderBottom:`1px solid ${Ce.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:["Add Skills to ",t]}),e.jsx("button",{onClick:()=>w(!1),style:{background:"none",border:"none",color:Ce.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:16})})]}),e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${Ce.border}`},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ds,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:Ce.tm}}),e.jsx("input",{style:{...$n,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search skills...",value:R,onChange:D=>A(D.target.value),autoFocus:!0})]})}),e.jsxs("div",{style:{maxHeight:"320px",overflowY:"auto"},children:[p.filter(D=>!C.find(M=>M.id===D.id)).filter(D=>!R||D.name.toLowerCase().includes(R.toLowerCase())||(D.category||"").toLowerCase().includes(R.toLowerCase())).map(D=>e.jsxs("div",{onClick:()=>Y(D),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",borderBottom:`1px solid ${Ce.border}`,cursor:"pointer",transition:"background 0.1s"},onMouseEnter:M=>M.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)",onMouseLeave:M=>M.currentTarget.style.backgroundColor="transparent",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:D.color||Ce.violet,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500},children:D.name}),D.description&&e.jsx("div",{style:{fontSize:"10px",color:Ce.tm,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.description})]}),D.category&&e.jsx("span",{style:{fontSize:"9px",color:D.color||Ce.violet,backgroundColor:`${D.color||Ce.violet}15`,padding:"2px 6px",borderRadius:"100px",flexShrink:0},children:D.category})]},D.id)),p.filter(D=>!C.find(M=>M.id===D.id)).length===0&&e.jsx("div",{style:{padding:"24px",textAlign:"center",color:Ce.tm,fontSize:"12px"},children:"No more skills available"})]})]})}),d&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"400px",backgroundColor:Ce.surface,border:`1px solid ${Ce.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{fontSize:"13px",color:Ce.ts,lineHeight:"1.5",margin:"0 0 20px 0"},children:["This will permanently delete ",e.jsx("strong",{style:{color:Ce.tp},children:t})," and cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>y(!1),style:{backgroundColor:Ce.surfaceEl,color:Ce.ts,border:`1px solid ${Ce.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:de,style:{backgroundColor:Ce.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})})]})}const Pt={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",tm:"#52525B",mono:'"JetBrains Mono","Fira Code",monospace'},zm={completed:{color:"#22c55e",bg:"rgba(34,197,94,0.1)"},failed:{color:"#ef4444",bg:"rgba(239,68,68,0.1)"},running:{color:"#8B5CF6",bg:"rgba(139,92,246,0.2)"},pending:{color:"#A1A1AA",bg:"rgba(255,255,255,0.05)"}},Dm={info:"#A1A1AA",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"};function C6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--"}function k6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--"}function j6({teamId:t,members:i}){const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState({}),[c,x]=L.useState(!1),[v,d]=L.useState(!0),y=L.useRef(null),_=async()=>{try{const h=await ae(`/api/agent-teams/${t}/runs`);o(h.runs||[])}catch(h){console.error("Failed to fetch runs",h)}finally{d(!1)}},j=async h=>{try{const p=await ae(`/api/agent-teams/${t}/runs/${h}`);l(f=>({...f,[h]:p.logs||[]}))}catch(p){console.error("Failed to fetch logs",p)}},C=async()=>{x(!0);try{const h=await ae(`/api/agent-teams/${t}/runs`,{method:"POST",body:JSON.stringify({config:{initiated_by:"user_ui"}})});await ae(`/api/agent-teams/${t}/runs/${h.id}/start`,{method:"POST"}),await _(),S(h.id)}catch(h){console.error("Failed to start run",h)}finally{x(!1)}};return L.useEffect(()=>{_();const h=setInterval(_,5e3);return()=>clearInterval(h)},[t]),L.useEffect(()=>{let h;return u&&(j(u),h=setInterval(()=>j(u),2e3)),()=>{h&&clearInterval(h)}},[u]),L.useEffect(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})},[b,u]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",borderBottom:`1px solid ${Pt.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(A0,{size:16,color:Pt.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Pt.tp},children:"Team Runs"}),e.jsx("span",{style:{fontSize:"11px",color:Pt.tm,backgroundColor:Pt.surfaceEl,padding:"2px 6px",borderRadius:"4px"},children:s.length})]}),e.jsxs("button",{onClick:C,disabled:c,style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:Pt.violet,color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:c?"not-allowed":"pointer",opacity:c?.7:1},children:[c?e.jsx(Hn,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx(ql,{size:14,fill:"currentColor"}),"New Run"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.length===0&&!v?e.jsx("div",{style:{padding:"32px",textAlign:"center",border:`1px dashed ${Pt.border}`,borderRadius:"8px",color:Pt.tm,fontSize:"12px"},children:'No runs yet. Click "New Run" to start.'}):s.map(h=>{const p=u===h.id,f=zm[h.status]||zm.pending;return e.jsxs("div",{style:{backgroundColor:Pt.surface,border:`1px solid ${p?Pt.violetM:Pt.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>S(p?null:h.id),style:{padding:"10px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[p?e.jsx(bn,{size:14,color:Pt.tm}):e.jsx(ar,{size:14,color:Pt.tm}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{fontSize:"12px",fontWeight:500,color:Pt.tp,fontFamily:Pt.mono},children:["run_",h.id.split("-")[0]]}),e.jsx("span",{style:{fontSize:"10px",color:Pt.tm},children:k6(h.created_at)})]})]}),e.jsxs("div",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:f.bg,color:f.color,display:"flex",alignItems:"center",gap:"4px"},children:[h.status==="running"&&e.jsx(Hn,{size:10,style:{animation:"spin 1s linear infinite"}}),h.status==="completed"&&e.jsx(lS,{size:10}),h.status==="failed"&&e.jsx(dS,{size:10}),h.status==="pending"&&e.jsx(Yo,{size:10}),h.status]})]}),p&&e.jsx("div",{style:{backgroundColor:Pt.bg,borderTop:`1px solid ${Pt.border}`,maxHeight:"400px",overflowY:"auto",padding:"12px",fontFamily:Pt.mono,fontSize:"11px",lineHeight:"1.6"},children:!b[h.id]||b[h.id].length===0?e.jsx("div",{style:{color:Pt.tm,fontStyle:"italic",padding:"8px"},children:"Waiting for logs..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[b[h.id].map((g,w)=>e.jsxs("div",{style:{display:"flex",gap:"12px",whiteSpace:"pre-wrap"},children:[e.jsxs("span",{style:{color:Pt.tm,flexShrink:0,width:"70px"},children:["[",C6(g.created_at),"]"]}),e.jsx("span",{style:{color:Pt.violet,fontWeight:600,flexShrink:0,minWidth:"80px"},children:g.agent_name||"system"}),e.jsx("span",{style:{color:Dm[g.log_type]||Dm.info},children:g.message})]},g.id||w)),e.jsx("div",{ref:y})]})})]},h.id)})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})}const Ve={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},gu={width:"100%",backgroundColor:Ve.bg,border:`1px solid ${Ve.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"},Im={leader:{bg:"rgba(245,158,11,0.1)",color:Ve.warning,icon:Yl},member:{bg:"rgba(255,255,255,0.04)",color:Ve.tm,icon:Cn}};function E6(){var de;Wt();const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(!1),[b,l]=L.useState(null),[c,x]=L.useState(null),[v,d]=L.useState([]),[y,_]=L.useState(""),[j,C]=L.useState(null),[h,p]=L.useState({name:"",description:""}),[f,g]=L.useState(!1),[w,R]=L.useState(null),A=(Q,Y="success")=>{C({message:Q,type:Y}),setTimeout(()=>C(null),3e3)},z=L.useCallback(async()=>{try{const Q=await ae("/api/agent-teams");i(Q)}catch{A("Failed to load teams","danger")}finally{o(!1)}},[]);L.useEffect(()=>{z(),ae("/api/agents").then(d).catch(()=>{})},[z]);const E=async()=>{if(h.name.trim()){g(!0);try{await ae("/api/agent-teams",{method:"POST",body:JSON.stringify(h)}),S(!1),p({name:"",description:""}),A("Team created"),z()}catch(Q){A(Q.message||"Failed to create team","danger")}finally{g(!1)}}},P=async Q=>{try{await ae(`/api/agent-teams/${Q}`,{method:"DELETE"}),A("Team deleted"),R(null),b===Q&&(l(null),x(null)),z()}catch{A("Failed to delete team","danger")}},O=async Q=>{if(b===Q){l(null),x(null);return}l(Q);try{const Y=await ae(`/api/agent-teams/${Q}`);x(Y)}catch{A("Failed to load team details","danger")}},H=async Q=>{if(b)try{await ae(`/api/agent-teams/${b}/members`,{method:"POST",body:JSON.stringify({agent_name:Q,role:"member"})}),_("");const Y=await ae(`/api/agent-teams/${b}`);x(Y),z()}catch(Y){A(Y.message||"Failed to add member","danger")}},K=async Q=>{if(b)try{await ae(`/api/agent-teams/${b}/members/${Q}`,{method:"DELETE"});const Y=await ae(`/api/agent-teams/${b}`);x(Y),z()}catch{A("Failed to remove member","danger")}},U=async(Q,Y)=>{if(!b)return;const B=Y==="leader"?"member":"leader";try{await ae(`/api/agent-teams/${b}/members/${Q}`,{method:"PUT",body:JSON.stringify({role:B})});const D=await ae(`/api/agent-teams/${b}`);x(D)}catch{A("Failed to update role","danger")}},te=((de=c==null?void 0:c.members)==null?void 0:de.map(Q=>Q.agent_name))||[],V=v.filter(Q=>!te.includes(Q.name)&&(Q.name.includes(y.toLowerCase())||(Q.description||"").toLowerCase().includes(y.toLowerCase())));return e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:Ve.bg,color:Ve.tp},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${Ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Rs,{size:20,color:Ve.violet}),"Agent Teams"]}),e.jsx("p",{style:{fontSize:"13px",color:Ve.ts,margin:0},children:"Compose teams of agents for complex tasks"})]}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ve.tp,color:Ve.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:14}),"Create Team"]})]}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px"},children:s?e.jsx("div",{style:{textAlign:"center",padding:"60px",color:Ve.tm},children:"Loading teams..."}):t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",border:`1px dashed ${Ve.borderS}`,borderRadius:"12px",color:Ve.tm},children:[e.jsx(Rs,{size:40,color:Ve.tm,style:{marginBottom:"12px"}}),e.jsx("p",{style:{fontSize:"14px",margin:"0 0 4px 0"},children:"No teams yet"}),e.jsx("p",{style:{fontSize:"12px",margin:"0 0 16px 0"},children:"Create your first agent team to compose powerful workflows"}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ve.violetM,color:Ve.violet,border:`1px solid ${Ve.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:[e.jsx(Jt,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),"Create Team"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(Q=>{var Y;return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:Ve.surface,border:`1px solid ${b===Q.id?Ve.violet:Ve.border}`,borderRadius:b===Q.id?"12px 12px 0 0":"12px",padding:"16px 20px",cursor:"pointer",transition:"border-color 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>O(Q.id),onMouseEnter:B=>{b!==Q.id&&(B.currentTarget.style.borderColor=Ve.borderS)},onMouseLeave:B=>{b!==Q.id&&(B.currentTarget.style.borderColor=Ve.border)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b===Q.id?e.jsx(bn,{size:16,color:Ve.violet}):e.jsx(ar,{size:16,color:Ve.tm}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:Q.name}),e.jsxs("span",{style:{fontSize:"10px",fontWeight:600,backgroundColor:Ve.violetM,color:Ve.violet,padding:"2px 8px",borderRadius:"100px"},children:[Q.member_count||0," agents"]})]}),Q.description&&e.jsx("p",{style:{fontSize:"12px",color:Ve.ts,margin:"4px 0 0 0"},children:Q.description})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},onClick:B=>B.stopPropagation(),children:[e.jsx("div",{style:{display:"flex",marginRight:"8px"},children:(Q.member_names||"").split(",").filter(Boolean).slice(0,4).map((B,D)=>e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:`hsl(${B.charCodeAt(0)*7%360}, 50%, 35%)`,border:`2px solid ${Ve.surface}`,marginLeft:D>0?"-6px":"0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:700,color:"#fff"},children:B.charAt(0).toUpperCase()},D))}),w===Q.id?e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>P(Q.id),style:{backgroundColor:Ve.danger,color:"#fff",border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"}),e.jsx("button",{onClick:()=>R(null),style:{backgroundColor:Ve.surfaceEl,color:Ve.ts,border:`1px solid ${Ve.borderS}`,padding:"4px 10px",fontSize:"11px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]}):e.jsx("button",{onClick:()=>R(Q.id),style:{backgroundColor:"transparent",color:Ve.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(Ir,{size:14})})]})]}),b===Q.id&&c&&e.jsxs("div",{style:{backgroundColor:Ve.bg,border:`1px solid ${Ve.violet}`,borderTop:"none",borderRadius:"0 0 12px 12px",padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 10px 0"},children:["Members (",((Y=c.members)==null?void 0:Y.length)||0,")"]}),c.members&&c.members.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:c.members.map(B=>{const D=Im[B.role]||Im.member,M=D.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",backgroundColor:Ve.surface,borderRadius:"8px",border:`1px solid ${Ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx($S,{size:14,color:Ve.tm,style:{cursor:"grab"}}),e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:`hsl(${B.agent_name.charCodeAt(0)*7%360}, 50%, 35%)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:700,color:"#fff"},children:B.agent_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:B.agent_name.replace(/-/g," ").replace(/\b\w/g,W=>W.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"2px"},children:[B.category&&e.jsx("span",{style:{fontSize:"10px",color:Ve.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"4px"},children:B.category}),B.model&&e.jsx("span",{style:{fontSize:"10px",color:Ve.tm,fontFamily:Ve.mono},children:B.model})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("button",{onClick:()=>U(B.agent_name,B.role),style:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:D.bg,color:D.color,border:"none",padding:"4px 10px",fontSize:"10px",fontWeight:600,borderRadius:"100px",cursor:"pointer",textTransform:"uppercase"},children:[e.jsx(M,{size:10}),B.role]}),e.jsx("button",{onClick:()=>K(B.agent_name),style:{backgroundColor:"transparent",color:Ve.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(bt,{size:14})})]})]},B.agent_name)})}):e.jsx("p",{style:{fontSize:"12px",color:Ve.tm,padding:"12px",textAlign:"center",border:`1px dashed ${Ve.border}`,borderRadius:"8px"},children:"No members yet. Add agents below."})]}),e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(j6,{teamId:Q.id,members:c.members||[]})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px 0"},children:"Add Agent"}),e.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[e.jsx(Ds,{size:14,color:Ve.tm,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{value:y,onChange:B=>_(B.target.value),placeholder:"Search agents...",style:{...gu,paddingLeft:"34px"}})]}),y&&e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",backgroundColor:Ve.surface,border:`1px solid ${Ve.border}`,borderRadius:"8px"},children:V.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:Ve.tm,fontSize:"12px"},children:"No matching agents"}):V.slice(0,10).map(B=>e.jsxs("div",{onClick:()=>H(B.name),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${Ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background 0.15s"},onMouseEnter:D=>D.currentTarget.style.backgroundColor=Ve.surfaceEl,onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ve.tp},children:B.name.replace(/-/g," ").replace(/\b\w/g,D=>D.toUpperCase())}),e.jsx("p",{style:{fontSize:"11px",color:Ve.tm,margin:"2px 0 0 0"},children:(B.description||"").substring(0,80)})]}),e.jsx(Jt,{size:14,color:Ve.violet})]},B.name))})]})]})]},Q.id)})})}),u&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"440px",backgroundColor:Ve.surface,border:`1px solid ${Ve.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:0},children:"Create Team"}),e.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",color:Ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Team Name"}),e.jsx("input",{style:gu,value:h.name,placeholder:"e.g. Landing Page Team",onChange:Q=>p(Y=>({...Y,name:Q.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Description"}),e.jsx("textarea",{style:{...gu,minHeight:"80px",resize:"vertical"},value:h.description,placeholder:"What is this team for?",onChange:Q=>p(Y=>({...Y,description:Q.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"6px"},children:[e.jsx("button",{onClick:()=>S(!1),style:{backgroundColor:Ve.surfaceEl,color:Ve.ts,border:`1px solid ${Ve.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f||!h.name.trim(),style:{backgroundColor:Ve.tp,color:Ve.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",opacity:f||!h.name.trim()?.5:1},children:f?"Creating...":"Create Team"})]})]})]})}),j&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:j.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${j.type==="danger"?Ve.danger:Ve.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[j.type==="danger"?e.jsx(Ci,{size:14,color:Ve.danger}):e.jsx(or,{size:14,color:Ve.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ve.tp},children:j.message})]})]})}const Xe={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'};function gl({icon:t,label:i,value:s,subtext:o,color:u=Xe.violet}){return e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"8px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10px",right:"-10px",opacity:.05},children:e.jsx(t,{size:80,color:u})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:`${u}15`,color:u,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(t,{size:14})}),e.jsx("span",{style:{color:Xe.ts,fontSize:"12px",fontWeight:500},children:i})]}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"6px"},children:[e.jsx("span",{style:{color:Xe.tp,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:s}),o&&e.jsx("span",{style:{color:Xe.tm,fontSize:"11px"},children:o})]})]})}function xl({children:t,icon:i}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[i&&e.jsx(i,{size:14,style:{color:Xe.violet}}),e.jsx("h2",{style:{color:Xe.tp,fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:t})]})}function R6(){var v,d,y,_,j,C,h;const[t,i]=L.useState(null),[s,o]=L.useState([]),[u,S]=L.useState(!0),b=Wt();if(L.useEffect(()=>{(async()=>{try{const[f,g]=await Promise.all([ae("/api/agents/stats"),ae("/api/agents")]);i(f);const w=[...g||[]].sort((R,A)=>(A.rating||0)-(R.rating||0)).slice(0,5);o(w)}catch(f){console.error("Error fetching dashboard data",f)}finally{S(!1)}})()},[]),u)return e.jsx("div",{style:{height:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Xe.bg,color:Xe.ts},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx(v0,{size:24,style:{color:Xe.violet}}),e.jsx("span",{style:{fontSize:"13px",letterSpacing:"0.05em"},children:"ANALYZING AGENT DATA..."})]})});const l=((v=t==null?void 0:t.bySource)==null?void 0:v.reduce((p,f)=>p+f.count,0))||1,c=((y=(d=t==null?void 0:t.bySource)==null?void 0:d.find(p=>p.source==="filesystem"))==null?void 0:y.count)||0,x=Math.round(c/l*100);return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Xe.bg,padding:"24px",overflowY:"auto"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:Xe.tp,fontSize:"20px",fontWeight:600,margin:"0 0 4px 0"},children:"Agent Statistics"}),e.jsx("p",{style:{color:Xe.ts,fontSize:"13px",margin:0},children:"System-wide metrics and distribution for all agents."})]}),e.jsxs("div",{style:{padding:"6px 12px",borderRadius:"4px",border:`1px solid ${Xe.border}`,color:Xe.ts,fontSize:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Xe.success}}),"Live"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"16px",marginBottom:"32px"},children:[e.jsx(gl,{icon:Rs,label:"Total Agents",value:(t==null?void 0:t.total)||0,subtext:"deployed"}),e.jsx(gl,{icon:vn,label:"Avg Rating",value:`${((t==null?void 0:t.avgRating)||0).toFixed(1)}/5.0`,color:Xe.warning,subtext:"user feedback"}),e.jsx(gl,{icon:zs,label:"Total Projects",value:(t==null?void 0:t.totalProjects)||0,subtext:"active"}),e.jsx(gl,{icon:Yw,label:"Categories",value:((_=t==null?void 0:t.byCategory)==null?void 0:_.length)||0,color:Xe.success,subtext:"organized"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:vh,children:"Agent Distribution by Category"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(j=t==null?void 0:t.byCategory)==null?void 0:j.map((p,f)=>{const g=t.total>0?p.count/t.total*100:0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[e.jsx("span",{style:{color:Xe.ts,textTransform:"capitalize"},children:p.category}),e.jsxs("span",{style:{color:Xe.tp,fontWeight:500},children:[p.count," ",e.jsxs("span",{style:{color:Xe.tm,fontSize:"10px"},children:["(",g.toFixed(0),"%)"]})]})]}),e.jsx("div",{style:{height:"6px",width:"100%",backgroundColor:Xe.surfaceEl,borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${g}%`,backgroundColor:Xe.violet,boxShadow:`0 0 10px ${Xe.violetG}`,borderRadius:"3px"}})})]},f)})})]}),e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsx(xl,{icon:Z2,children:"Source Analysis"}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 0"},children:e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${Xe.violet} 0% ${x}%, ${Xe.surfaceEl} ${x}% 100%)`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:Xe.surface,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(mS,{size:16,style:{color:Xe.tm,marginBottom:"2px"}}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:Xe.tp},children:(t==null?void 0:t.total)||0})]})})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"16px"},children:(C=t==null?void 0:t.bySource)==null?void 0:C.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",borderRadius:"6px",backgroundColor:Xe.surfaceEl},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.source==="filesystem"?e.jsx(Lu,{size:12,color:Xe.violet}):e.jsx(Es,{size:12,color:Xe.ts}),e.jsx("span",{style:{fontSize:"11px",color:Xe.ts,textTransform:"capitalize"},children:p.source})]}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:Xe.tp},children:[p.count," agents"]})]},f))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px"},children:[e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:qn,children:"Model Usage"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:(h=t==null?void 0:t.byModel)==null?void 0:h.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",borderBottom:f!==t.byModel.length-1?`1px solid ${Xe.border}`:"none"},children:[e.jsx("span",{style:{fontSize:"12px",color:Xe.tp,fontFamily:Xe.mono},children:p.model}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Xe.violet},children:p.count})]},f))})]}),e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:vn,children:"Top Rated Agents"}),e.jsx("div",{style:{width:"100%",overflow:"hidden"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",padding:"12px 8px",borderBottom:`1px solid ${Xe.border}`},children:[e.jsx("span",{style:{flex:2,fontSize:"11px",color:Xe.tm,textTransform:"uppercase"},children:"Agent"}),e.jsx("span",{style:{flex:1,fontSize:"11px",color:Xe.tm,textTransform:"uppercase"},children:"Category"}),e.jsx("span",{style:{width:"80px",fontSize:"11px",color:Xe.tm,textTransform:"uppercase",textAlign:"right"},children:"Rating"}),e.jsx("span",{style:{width:"30px"}})]}),s.map((p,f)=>e.jsxs("div",{onClick:()=>b(`/agents/${p.name}`),style:{display:"flex",alignItems:"center",padding:"12px 8px",cursor:"pointer",borderBottom:f!==s.length-1?`1px solid ${Xe.border}`:"none",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:g=>g.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{flex:2,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",backgroundColor:Xe.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",color:Xe.violet,fontSize:"12px",fontWeight:"bold"},children:p.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:Xe.tp},children:p.name.replace(/-/g," ").replace(/\b\w/g,g=>g.toUpperCase())}),e.jsx("div",{style:{fontSize:"10px",color:Xe.tm,fontFamily:Xe.mono},children:p.model||"unknown"})]})]}),e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",backgroundColor:Xe.violetM,color:Xe.violet},children:p.category})}),e.jsxs("div",{style:{width:"80px",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px"},children:[e.jsx(vn,{size:10,fill:Xe.warning,color:Xe.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Xe.tp},children:p.rating||0})]}),e.jsx("div",{style:{width:"30px",textAlign:"right"},children:e.jsx(ar,{size:14,color:Xe.tm})})]},p.name))]})}),e.jsx(pi,{to:"/agents",style:{display:"block",textAlign:"center",marginTop:"16px",fontSize:"11px",color:Xe.ts,textDecoration:"none",padding:"8px",borderRadius:"6px",border:`1px dashed ${Xe.border}`},children:"View all agents"})]})]})]})})}const Ae={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B"};function m1({node:t,level:i=0,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:b=!1}){const l=(s==null?void 0:s.id)===t.id,[c,x]=L.useState(!1),[v,d]=L.useState(!1),y=t.children&&t.children.length>0,_=i===0;return e.jsxs("div",{style:{position:"relative"},children:[!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:0,width:"1px",height:b?"16px":"100%",background:"rgba(139,92,246,0.15)"}}),!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:"16px",width:"11px",height:"1px",background:"rgba(139,92,246,0.15)"}}),e.jsx("div",{style:{marginLeft:`${i*20}px`},children:e.jsxs("div",{onClick:()=>o(t),onContextMenu:j=>{j.preventDefault(),u({x:j.clientX,y:j.clientY,node:t})},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{padding:"4px 8px",margin:"1px 0",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",background:l?"rgba(139,92,246,0.12)":c?"rgba(255,255,255,0.03)":"transparent",border:l?"1px solid rgba(139,92,246,0.3)":"1px solid transparent",transition:"all 0.15s"},children:[y?e.jsx("span",{onClick:j=>{j.stopPropagation(),d(!v)},style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",borderRadius:"3px",background:c?"rgba(255,255,255,0.06)":"transparent"},children:e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:Ae.tm,strokeWidth:"1.5",children:v?e.jsx("polyline",{points:"3,1 7,5 3,9"}):e.jsx("polyline",{points:"1,3 5,7 9,3"})})}):e.jsx("span",{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{width:"5px",height:"5px",borderRadius:"50%",background:l?Ae.violet:"rgba(255,255,255,0.15)"}})}),e.jsx("span",{style:{color:l?Ae.tp:Ae.ts,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:_?"500":"400"},children:t.title||`V${t.version}`}),c&&e.jsx("span",{onClick:j=>{j.stopPropagation(),S(t)},title:`Branch from ${t.title||"V"+t.version}`,style:{width:"16px",height:"16px",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"rgba(139,92,246,0.15)",color:Ae.violet,fontSize:"12px",fontWeight:"700",lineHeight:1,flexShrink:0},children:"+"}),e.jsx("span",{style:{background:_?Ae.violetM:"rgba(255,255,255,0.05)",color:_?Ae.violet:Ae.tm,padding:"1px 5px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",whiteSpace:"nowrap",maxWidth:"70px",overflow:"hidden",textOverflow:"ellipsis"},children:(t.agent_name||"").split("-").slice(0,2).join("-")}),y&&v&&e.jsx("span",{style:{background:"rgba(255,255,255,0.06)",color:Ae.tm,padding:"0 4px",borderRadius:"3px",fontSize:"9px",fontWeight:"600"},children:t.children.length})]})}),y&&!v&&e.jsx("div",{children:t.children.map((j,C)=>e.jsx(m1,{node:j,level:i+1,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:C===t.children.length-1},j.id))})]})}function T6({allIterations:t,selected:i,onSelect:s,projectId:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),x=()=>{if(u.current){const{scrollLeft:d,scrollWidth:y,clientWidth:_}=u.current;b(d>10),c(d<y-_-10)}};L.useEffect(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[t]);const v=d=>{u.current&&u.current.scrollBy({left:d==="left"?-400:400,behavior:"smooth"})};return!t||t.length===0?null:e.jsxs("div",{style:{position:"relative",height:"140px",width:"100%",backgroundColor:Ae.bg,borderTop:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",boxSizing:"border-box",flexShrink:0},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(Go,{size:18})}),e.jsx("div",{ref:u,onScroll:x,style:{display:"flex",gap:"16px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"8px 0",height:"100%",alignItems:"center",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",flex:1},children:t.map(d=>{const y=(i==null?void 0:i.id)===d.id;return e.jsxs("div",{onClick:()=>s(d),style:{flex:"0 0 160px",display:"flex",flexDirection:"column",gap:"4px",cursor:"pointer",transition:"transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{width:"160px",height:"90px",borderRadius:"8px",backgroundColor:Ae.surface,border:y?`2px solid ${Ae.violet}`:`1px solid ${Ae.border}`,boxShadow:y?`0 0 12px ${Ae.violetG}`:"none",overflow:"hidden",position:"relative",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},children:[e.jsx("div",{style:{width:"1280px",height:"720px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none",backgroundColor:Ae.surface},children:e.jsx("iframe",{src:`/api/preview/${o}/${d.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${d.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),y&&e.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Ae.violet}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:y?Ae.tp:Ae.ts},children:d.title||`V${d.version}`}),e.jsx("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",backgroundColor:Ae.surfaceEl,border:`1px solid ${Ae.border}`,color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.02em",maxWidth:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d.agent_name||"").split("-").slice(0,2).join("-")})]})]},d.id)})}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(ar,{size:18})})]})}function A6(){const{id:t}=Gn(),i=Wt(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState(null),[c,x]=L.useState(250),[v,d]=L.useState(600),[y,_]=L.useState(null),[j,C]=L.useState(null),[h,p]=L.useState(""),[f,g]=L.useState([]),[w,R]=L.useState(null),[A,z]=L.useState(!1),[E,P]=L.useState(void 0),[O,H]=L.useState(null),[K,U]=L.useState(null),[te,V]=L.useState("preview"),[de,Q]=L.useState([]),Y=L.useRef(null),B=L.useRef(null),D=L.useRef(null),[M,W]=L.useState(typeof window<"u"&&window.innerWidth<900);L.useEffect(()=>{const he=()=>W(window.innerWidth<900);return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const pe=Vo.useMemo(()=>{const he=[],Ie=Oe=>{for(const Pe of Oe)he.push(Pe),Pe.children&&Ie(Pe.children)};return Ie(u),he},[u]);L.useEffect(()=>{ae("/api/claude-status").then(he=>H(he)).catch(()=>H({installed:!1,version:null})),ae("/api/claude-auth/status").then(he=>U(he.connected)).catch(()=>U(!1))},[]),L.useEffect(()=>{t&&t!=="new"&&(async()=>{try{const[Ie,Oe,Pe,Ee]=await Promise.all([ae(`/api/projects/${t}`),ae(`/api/iterations/${t}/tree`),ae(`/api/terminal-tabs/${t}`),ae(`/api/projects/${t}/skills`).catch(()=>[])]);if(o(Ie),Q(Ee||[]),S(Oe||[]),Oe&&Oe.length>0){const We=[],Z=le=>{for(const Fe of le)We.push(Fe),Fe.children&&Z(Fe.children)};Z(Oe),l(We[We.length-1]||Oe[0])}if(Pe&&Pe.length>0){const We=Pe.map(Z=>({id:Z.id,name:Z.name||"claude-1",sessionId:Z.alive?Z.session_id:null}));g(We),R(We[0].id)}else{const We={id:`tab-${Date.now()}`,name:"claude-1",sessionId:null};g([We]),R(We.id),ae("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:We.id,project_id:t,name:We.name})}).catch(()=>{})}z(!0)}catch(Ie){console.error(Ie)}})()},[t]),L.useEffect(()=>{if(!t||t==="new")return;const he=zo({transports:["websocket"]});return he.on("iteration-created",Ie=>{Ie.projectId===t&&ae(`/api/iterations/${t}/tree`).then(Oe=>{S(Oe||[]),Ie.iteration&&l(Ie.iteration)}).catch(()=>{})}),()=>he.disconnect()},[t]);const me=L.useCallback(he=>{y==="left"&&x(Math.max(150,Math.min(500,he.clientX))),y==="right"&&d(Math.max(200,Math.min(700,window.innerWidth-he.clientX)))},[y]),we=L.useCallback(()=>_(null),[]);L.useEffect(()=>{if(y)return window.addEventListener("mousemove",me),window.addEventListener("mouseup",we),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",we)}},[y,me,we]);const Re=()=>{const he=`tab-${Date.now()}`,Ie=`claude-${f.length+1}`;g(Oe=>[...Oe,{id:he,name:Ie,sessionId:null}]),R(he),ae("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:he,project_id:t,name:Ie})}).catch(()=>{})},X=he=>{f.find(Oe=>Oe.id===he)&&(g(Oe=>{const Pe=Oe.filter(Ee=>Ee.id!==he);return w===he&&Pe.length>0&&R(Pe[0].id),Pe}),ae(`/api/terminal-tabs/${he}`,{method:"DELETE"}).catch(()=>{}))},F=L.useCallback(he=>{t&&ae(`/api/terminal-tabs/${t}/branch-context`,{method:"POST",body:JSON.stringify({parentId:he})}).catch(Ie=>console.error("[BranchContext]",Ie))},[t]),be=L.useCallback(()=>{P(null),F(null),setTimeout(()=>{var he;return(he=D.current)==null?void 0:he.focus()},100)},[F]),oe=L.useCallback(he=>{P(he),F(he.id),l(he),setTimeout(()=>{var Ie;return(Ie=D.current)==null?void 0:Ie.focus()},100)},[F]),De=L.useCallback(he=>{l(he),P(he),F(he.id)},[F]),ee=L.useCallback(()=>{if(!h.trim()||!Y.current)return;const he=h.replace(/'/g,"'\\''");Y.current.sendInput(`claude -p '${he}'
`),p("")},[h]),ke=(he,Ie)=>{g(Oe=>Oe.map(Pe=>Pe.id===he?{...Pe,sessionId:Ie}:Pe)),ae(`/api/terminal-tabs/${he}/session`,{method:"PUT",body:JSON.stringify({session_id:Ie})}).catch(()=>{})};return t==="new"?e.jsxs("div",{style:{padding:"24px",maxWidth:"500px",width:"100%",boxSizing:"border-box"},children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"24px"},children:"New Project"}),e.jsx(L6,{onCreated:he=>i(`/project/${he}`)})]}):e.jsxs("div",{style:{display:"flex",flexDirection:M?"column":"row",height:"calc(100vh - 53px)",background:Ae.bg,overflow:"hidden"},onClick:()=>C(null),children:[M&&e.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[{id:"tree",label:"Worktree"},{id:"preview",label:"Preview"},{id:"terminal",label:"Terminal"}].map(he=>e.jsx("button",{onClick:()=>V(he.id),style:{flex:1,padding:"10px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:te===he.id?Ae.surfaceEl:"transparent",color:te===he.id?Ae.tp:Ae.tm,border:"none",borderBottom:te===he.id?`2px solid ${Ae.violet}`:"2px solid transparent"},children:he.label},he.id))}),e.jsxs("aside",{style:{width:M?"100%":`${c}px`,background:Ae.surface,borderRight:M?"none":`1px solid ${Ae.border}`,display:M&&te!=="tree"?"none":"flex",flexDirection:"column",flexShrink:0,height:M?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Worktree"}),e.jsxs("button",{onClick:be,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New"]})]}),E!==void 0&&e.jsxs("div",{style:{padding:"6px 12px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",background:"rgba(139,92,246,0.06)"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:Ae.violet,strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),e.jsx("span",{style:{color:Ae.violet,flex:1},children:E===null?"New root worktree":`From ${E.title||"V"+E.version}`}),e.jsx("span",{onClick:()=>P(void 0),style:{color:Ae.tm,cursor:"pointer",fontSize:"13px"},children:"x"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[u.map(he=>e.jsx(m1,{node:he,selected:b,onSelect:De,onContext:C,onBranch:oe},he.id)),u.length===0&&e.jsx("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:Ae.tm},children:"No iterations yet"})]})]}),!M&&e.jsx("div",{onMouseDown:()=>_("left"),style:{width:"4px",cursor:"col-resize",background:y==="left"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsxs("main",{style:{flex:1,display:M&&te!=="preview"?"none":"flex",flexDirection:"column",minWidth:0,height:M?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"40px",background:Ae.surface,borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",gap:"12px",fontSize:"12px",color:Ae.ts,flexShrink:0,overflow:"hidden"},children:[e.jsx("span",{style:{color:Ae.tp,fontWeight:"500"},children:(s==null?void 0:s.name)||"Loading..."}),b&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:Ae.tm},children:"/"}),e.jsx("span",{children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:Ae.violetM,color:Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"10px",fontWeight:"600"},children:b.agent_name})]}),de.length>0&&e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"hidden",flexShrink:1,minWidth:0},children:[e.jsx("span",{style:{color:Ae.tm,fontSize:"10px",flexShrink:0},children:"Skills:"}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"auto",maxWidth:"100%"},children:de.map(he=>e.jsx("span",{style:{background:he.color?`${he.color}20`:"rgba(139,92,246,0.12)",color:he.color||Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",border:`1px solid ${he.color?`${he.color}40`:"rgba(139,92,246,0.2)"}`,whiteSpace:"nowrap",flexShrink:0},children:he.name},he.id))})]}),e.jsx("div",{style:{flex:1}}),e.jsxs("a",{href:`/preview/${t}`,target:"_blank",rel:"noreferrer",style:{color:"#fff",fontSize:"11px",display:"flex",alignItems:"center",gap:"5px",background:Ae.violet,padding:"4px 10px",borderRadius:"6px",textDecoration:"none",fontWeight:"600",boxShadow:`0 0 8px ${Ae.violetG}`,flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Client Preview"]}),b&&e.jsxs("a",{href:`/api/preview/${t}/${b.id}`,target:"_blank",rel:"noreferrer",style:{color:Ae.ts,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),"Open"]})]}),e.jsx("div",{style:{flex:1,background:"#fff",margin:"8px",borderRadius:"8px",border:`1px solid ${Ae.border}`,overflow:"hidden",position:"relative"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Preview"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tm,background:Ae.bg},children:"Select an iteration to preview"})}),e.jsx(T6,{allIterations:pe,selected:b,onSelect:De,projectId:t}),e.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[E!==void 0&&e.jsxs("div",{style:{fontSize:"10px",color:Ae.violet,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),E===null?"Creating new root iteration":`Branching from ${E.title||"V"+E.version}`]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{ref:D,value:h,onChange:he=>p(he.target.value),onKeyDown:he=>{he.key==="Enter"&&h.trim()&&ee()},placeholder:E!==void 0?E===null?"Describe the landing page to create from scratch...":`Describe changes to apply from ${E.title||"V"+E.version}...`:"Describe adjustments for the next iteration...",style:{width:"100%",padding:"10px 100px 10px 14px",background:Ae.surfaceEl,border:`1px solid ${E!==void 0?"rgba(139,92,246,0.4)":Ae.borderS}`,borderRadius:"8px",color:Ae.tp,fontSize:"13px",outline:"none"}}),e.jsxs("button",{onClick:ee,disabled:!h.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:h.trim()?Ae.violet:Ae.tm,color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:h.trim()?"pointer":"default",opacity:h.trim()?1:.5},children:[e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Generate"]})]})]})]}),!M&&e.jsx("div",{onMouseDown:()=>_("right"),style:{width:"4px",cursor:"col-resize",background:y==="right"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsx("aside",{style:{width:M?"100%":`${v}px`,background:Ae.surface,borderLeft:M?"none":`1px solid ${Ae.border}`,display:M&&te!=="terminal"?"none":"flex",flexDirection:"column",flexShrink:0,height:M?"calc(100vh - 53px - 42px)":"auto"},children:O&&!O.installed?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",padding:"0 14px",borderBottom:`1px solid ${Ae.border}`,gap:"8px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#f59e0b"},children:"Claude CLI Setup Required"})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 16px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("p",{style:{fontSize:"13px",color:Ae.ts,margin:"0 0 12px 0",lineHeight:1.5},children:"Claude Code CLI is not installed on this server. Install it to enable AI-powered iterations."}),e.jsxs("button",{onClick:()=>{B.current&&B.current.sendInput(`npm install -g @anthropic-ai/claude-code
`)},style:{background:Ae.violet,color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",width:"100%",justifyContent:"center"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),"Install Claude Code CLI"]}),e.jsxs("p",{style:{fontSize:"10px",color:Ae.tm,margin:"8px 0 0 0",textAlign:"center"},children:["Runs: ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"2px 4px",borderRadius:"3px"},children:"npm install -g @anthropic-ai/claude-code"})]})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx(Au,{ref:B,projectId:t,onSessionCreated:()=>{}})}),e.jsx("div",{style:{padding:"8px 16px",borderTop:`1px solid ${Ae.border}`,display:"flex",justifyContent:"center"},children:e.jsx("button",{onClick:()=>{ae("/api/claude-status").then(he=>H(he)).catch(()=>{})},style:{background:"transparent",color:Ae.ts,border:`1px solid ${Ae.border}`,borderRadius:"4px",padding:"6px 12px",fontSize:"11px",cursor:"pointer"},children:"Check again"})})]})]}):e.jsxs(e.Fragment,{children:[K===!1&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"8px",background:"rgba(245,158,11,0.06)",fontSize:"11px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsxs("span",{style:{color:"#f59e0b",flex:1},children:["Claude not authenticated. Run ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"1px 4px",borderRadius:"3px"},children:"claude"})," in the terminal to connect."]}),e.jsx("span",{onClick:()=>i("/setup-claude"),style:{color:Ae.violet,cursor:"pointer",fontWeight:"500",fontSize:"11px"},children:"Setup"})]}),e.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,height:"44px",flexShrink:0},children:[f.map(he=>e.jsxs("div",{onClick:()=>R(he.id),style:{padding:"0 14px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:w===he.id?Ae.tp:Ae.ts,background:w===he.id?Ae.surface:Ae.bg,borderBottom:w===he.id?`2px solid ${Ae.violet}`:"2px solid transparent",borderRight:`1px solid ${Ae.border}`},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),he.name,f.length>1&&e.jsx("span",{onClick:Ie=>{Ie.stopPropagation(),X(he.id)},style:{marginLeft:"4px",opacity:.4,fontSize:"14px",lineHeight:1},onMouseEnter:Ie=>Ie.currentTarget.style.opacity=1,onMouseLeave:Ie=>Ie.currentTarget.style.opacity=.4,children:"x"})]},he.id)),e.jsx("div",{onClick:Re,style:{padding:"0 12px",display:"flex",alignItems:"center",cursor:"pointer",color:Ae.tm},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:A&&w&&(()=>{const he=f.find(Ie=>Ie.id===w);return he?e.jsx(Au,{ref:Y,sessionId:he.sessionId,projectId:t,onSessionCreated:Ie=>ke(he.id,Ie)},he.id):null})()})]})}),j&&e.jsxs("div",{style:{position:"fixed",left:j.x,top:j.y,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"8px",padding:"4px",zIndex:1e3,boxShadow:"0 10px 25px rgba(0,0,0,0.5)",minWidth:"160px"},children:[e.jsxs("div",{onClick:()=>{oe(j.node),C(null)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),"Branch from here"]}),e.jsxs("div",{onClick:async()=>{var Pe;const he=j.node;C(null);const Ie=h(`New project name (from ${he.title||"V"+he.version}):`,`${(s==null?void 0:s.name)||"Project"} - Fork`);if(!Ie)return;const Oe=h(`Agent name (leave empty to keep "${he.agent_name}"):`,he.agent_name||"");try{const Ee=await ae("/api/projects/fork",{method:"POST",body:JSON.stringify({name:Ie,agent_name:Oe||he.agent_name,source_project_id:t,source_iteration_id:he.id})});(Pe=Ee==null?void 0:Ee.project)!=null&&Pe.id&&i(`/project/${Ee.project.id}`)}catch(Ee){console.error("Fork error:",Ee)}},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"}),e.jsx("path",{d:"M3 6v12"})]}),"New project from here"]}),e.jsxs("div",{onClick:()=>{const he=j.node;C(null),confirm(`Delete ${he.title||"V"+he.version}?`)&&ae(`/api/iterations/detail/${he.id}`,{method:"DELETE"}).then(()=>{ae(`/api/iterations/${t}/tree`).then(Ie=>{S(Ie||[]),(b==null?void 0:b.id)===he.id&&l(null)}).catch(()=>{})}).catch(Ie=>console.error(Ie))},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:"#ef4444",cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(239,68,68,0.1)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete"]})]})]})}function L6({onCreated:t}){const[i,s]=L.useState(""),[o,u]=L.useState(""),[S,b]=L.useState(""),[l,c]=L.useState([]),[x,v]=L.useState(!1);L.useEffect(()=>{ae("/api/agents").then(_=>c(_||[])).catch(()=>{});const y=new URLSearchParams(window.location.search);y.get("agent")&&b(y.get("agent"))},[]);const d=async y=>{if(y.preventDefault(),!!i){v(!0);try{const _=await ae("/api/projects",{method:"POST",body:JSON.stringify({name:i,description:o,agent_name:S})});t(_.id)}catch(_){console.error(_)}finally{v(!1)}}};return e.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Project Name"}),e.jsx("input",{value:i,onChange:y=>s(y.target.value),required:!0,style:{width:"100%"},placeholder:"My Landing Page Test"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Description"}),e.jsx("input",{value:o,onChange:y=>u(y.target.value),style:{width:"100%"},placeholder:"Optional description"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Agent"}),e.jsxs("select",{value:S,onChange:y=>b(y.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select agent..."}),l.map(y=>e.jsx("option",{value:y.name,children:y.name},y.name))]})]}),e.jsx("button",{type:"submit",disabled:x,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"10px",fontSize:"13px",fontWeight:"600",opacity:x?.7:1},children:x?"Creating...":"Create Project"})]})}const er={surface:"#0A0A0B",border:"rgba(255,255,255,0.06)",borderS:"rgba(255,255,255,0.12)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"};function z6(){const{id:t}=Gn(),i=Wt(),[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(null),[c,x]=L.useState(null);return L.useEffect(()=>{(async()=>{try{const[d,y]=await Promise.all([ae(`/api/projects/${t}`),ae(`/api/iterations/${t}`)]);x(d),o(y||[]),y&&y.length>=2?(S(y[0]),l(y[y.length-1])):y&&y.length===1&&S(y[0])}catch(d){console.error(d)}})()},[t]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",letterSpacing:"-0.02em",margin:0},children:"Compare Iterations"}),e.jsx("span",{style:{fontSize:"13px",color:er.tm},children:c==null?void 0:c.name})]}),e.jsx("button",{onClick:()=>i(`/project/${t}`),style:{background:"transparent",border:`1px solid ${er.borderS}`,color:er.ts,borderRadius:"4px",padding:"6px 14px",fontSize:"12px",fontWeight:"500"},children:"Back to Project"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:er.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Left"}),e.jsxs("select",{value:(u==null?void 0:u.id)||"",onChange:v=>S(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:er.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Right"}),e.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:v=>l(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",height:"calc(100vh - 260px)"},children:[e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${er.border}`,overflow:"hidden"},children:u?e.jsx("iframe",{src:`/api/preview/${t}/${u.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Left"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:er.tm,background:"#050505"},children:"Select left iteration"})}),e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${er.border}`,overflow:"hidden"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Right"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:er.tm,background:"#050505"},children:"Select right iteration"})})]}),u&&b&&e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1,background:er.surface,border:`1px solid ${er.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:u.title||`V${u.version}`}),e.jsx("span",{style:{background:er.violetM,color:er.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:u.agent_name}),u.prompt&&e.jsx("p",{style:{fontSize:"12px",color:er.ts,marginTop:"8px",lineHeight:"1.5"},children:u.prompt})]}),e.jsxs("div",{style:{flex:1,background:er.surface,border:`1px solid ${er.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:er.violetM,color:er.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:b.agent_name}),b.prompt&&e.jsx("p",{style:{fontSize:"12px",color:er.ts,marginTop:"8px",lineHeight:"1.5"},children:b.prompt})]})]})]})}function D6(){const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(null),b=Wt(),l=L.useCallback(()=>{ae("/api/sessions").then(_=>{i(_||[]),o(!1)}).catch(()=>o(!1))},[]);L.useEffect(()=>{l();const _=setInterval(l,3e3);return()=>clearInterval(_)},[l]);const c=async _=>{S(_);try{await ae(`/api/sessions/${_}`,{method:"DELETE"}),i(j=>j.filter(C=>C.id!==_))}catch(j){console.error("Kill failed:",j)}S(null)},x=async()=>{if(t.length){S("all");try{await ae("/api/sessions/all",{method:"DELETE"}),i([])}catch(_){console.error("Kill all failed:",_)}S(null)}},v=_=>{const j=Date.now()-_,C=Math.floor(j/6e4);if(C<1)return"just now";if(C<60)return`${C}m ago`;const h=Math.floor(C/60);return h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`},d=t.filter(_=>!_.exited),y=t.filter(_=>_.exited);return e.jsxs("div",{style:{padding:"32px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#F4F4F5",fontSize:"20px",fontWeight:"600",margin:0},children:"Sessions"}),e.jsxs("p",{style:{color:"#71717A",fontSize:"13px",margin:"4px 0 0"},children:[d.length," active instance",d.length!==1?"s":"",y.length>0&&`  ${y.length} exited`]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:l,style:{background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#A1A1AA",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:_=>{_.target.style.borderColor="rgba(255,255,255,0.2)",_.target.style.color="#F4F4F5"},onMouseLeave:_=>{_.target.style.borderColor="rgba(255,255,255,0.1)",_.target.style.color="#A1A1AA"},children:"Refresh"}),d.length>0&&e.jsx("button",{onClick:x,disabled:u==="all",style:{background:u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:u==="all"?"wait":"pointer",transition:"all 0.15s",opacity:u==="all"?.6:1},onMouseEnter:_=>{u!=="all"&&(_.target.style.background="rgba(239,68,68,0.25)")},onMouseLeave:_=>{_.target.style.background=u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)"},children:u==="all"?"Killing...":`Kill all (${d.length})`})]})]}),s&&e.jsx("div",{style:{textAlign:"center",padding:"60px 0",color:"#52525B"},children:"Loading sessions..."}),!s&&t.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"80px 24px",background:"#1a1a1b",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px",opacity:.4},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#52525B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),e.jsx("path",{d:"m8 21 4-4 4 4"}),e.jsx("path",{d:"M7 8h.01M12 8h.01"})]})}),e.jsx("p",{style:{color:"#71717A",fontSize:"14px",margin:0},children:"No active terminal sessions"}),e.jsx("p",{style:{color:"#52525B",fontSize:"12px",margin:"4px 0 0"},children:"Sessions appear when you open terminals in projects"})]}),d.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{color:"#A1A1AA",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Active"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.04)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.06)"},children:d.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"#1a1a1b",transition:"background 0.15s"},onMouseEnter:j=>j.currentTarget.style.background="#1f1f21",onMouseLeave:j=>j.currentTarget.style.background="#1a1a1b",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#22c55e",boxShadow:"0 0 6px rgba(34,197,94,0.4)"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#F4F4F5",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#8B5CF6",background:"rgba(139,92,246,0.12)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA",cursor:"pointer",transition:"color 0.15s"},onClick:()=>b(`/project/${_.projectId}`),onMouseEnter:j=>j.target.style.color="#8B5CF6",onMouseLeave:j=>j.target.style.color="#A1A1AA",children:_.projectName}),!_.projectName&&_.projectId&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B",fontFamily:'"JetBrains Mono", monospace'},children:_.projectId.slice(0,8)}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Started ",v(_.createdAt)]}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Active ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),disabled:u===_.id,style:{background:"transparent",border:"1px solid rgba(239,68,68,0.2)",color:"#ef4444",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",fontWeight:"500",cursor:u===_.id?"wait":"pointer",transition:"all 0.15s",opacity:u===_.id?.5:1,flexShrink:0},onMouseEnter:j=>{u!==_.id&&(j.target.style.background="rgba(239,68,68,0.1)",j.target.style.borderColor="rgba(239,68,68,0.4)")},onMouseLeave:j=>{j.target.style.background="transparent",j.target.style.borderColor="rgba(239,68,68,0.2)"},children:u===_.id?"...":"Kill"})]},_.id))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#52525B",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Exited"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.04)"},children:y.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(26,26,27,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#52525B"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#71717A",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#52525B",background:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B"},children:_.projectName}),e.jsxs("span",{style:{fontSize:"11px",color:"#3F3F46"},children:["Exited ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.06)",color:"#52525B",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",transition:"all 0.15s",flexShrink:0},onMouseEnter:j=>{j.target.style.borderColor="rgba(255,255,255,0.15)",j.target.style.color="#71717A"},onMouseLeave:j=>{j.target.style.borderColor="rgba(255,255,255,0.06)",j.target.style.color="#52525B"},children:"Remove"})]},_.id))})]})]})}const at={bg:"#0f0f0f",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function I6(){const{projectId:t}=Gn(),[i,s]=L.useState(!0),[o,u]=L.useState(null),[S,b]=L.useState(null),[l,c]=L.useState("desktop"),[x,v]=L.useState(!1),[d,y]=L.useState(!1);L.useEffect(()=>{(async()=>{var f;try{s(!0);const w=await(await fetch(`/api/preview/showcase/${t}`)).json();if(u(w),((f=w.iterations)==null?void 0:f.length)>0){const R=[...w.iterations].sort((A,z)=>z.version-A.version);b(R[0].id)}}catch(g){console.error("Failed to fetch showcase data",g)}finally{s(!1)}})()},[t]);const _=L.useMemo(()=>{var f;return(f=o==null?void 0:o.iterations)==null?void 0:f.find(g=>g.id===S)},[o,S]),j=()=>{v(!0),setTimeout(()=>v(!1),800)},C=async()=>{try{await navigator.clipboard.writeText(window.location.href)}catch{}};if(i)return e.jsxs("div",{style:{height:"100vh",backgroundColor:at.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`2px solid ${at.violetM}`,borderTopColor:at.violet,borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("span",{style:{color:at.ts,fontFamily:at.mono,fontSize:"12px"},children:"Loading preview..."})]});if(!(o!=null&&o.project))return e.jsxs("div",{style:{height:"100vh",backgroundColor:at.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px",color:at.tm},children:[e.jsx(Ci,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"Project not found"})]});const h={desktop:"100%",tablet:"768px",mobile:"390px"},p=[...o.iterations].sort((f,g)=>f.version-g.version);return e.jsxs("div",{style:{height:"100vh",width:"100vw",backgroundColor:at.bg,color:at.tp,fontFamily:"Inter, sans-serif",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#050505",position:"relative",overflow:"hidden"},children:[l!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${at.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:h[l],height:l==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:l==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:l==="desktop"?"0":"12px",overflow:"hidden",border:l==="desktop"?"none":`1px solid ${at.borderS}`},children:_?e.jsx("iframe",{src:`/api/preview/${t}/${S}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:x?.5:1,transition:"opacity 0.2s"},title:`Iteration v${_.version}`},`${S}-${x}`):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:at.tm,flexDirection:"column",gap:"12px"},children:[e.jsx(Ci,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"No iteration selected"})]})})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:d?"auto":"calc(100% - 40px)",maxWidth:d?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${at.borderS}`,borderRadius:"16px",zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:d?e.jsxs("button",{onClick:()=>y(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:at.ts},children:[e.jsx(bh,{size:14}),e.jsxs("span",{style:{fontFamily:at.mono,fontSize:"11px",fontWeight:600},children:["v",(_==null?void 0:_.version)||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:at.border}}),e.jsx("span",{style:{fontSize:"10px",color:at.tm},children:o.project.name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:at.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:at.mono,fontWeight:800,fontSize:"14px",color:at.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:at.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:at.tp},children:o.project.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:(_==null?void 0:_.status)==="completed"?at.success:at.warning}}),e.jsx("span",{style:{fontSize:"10px",color:(_==null?void 0:_.status)==="completed"?at.success:at.warning,fontWeight:500},children:(_==null?void 0:_.status)==="completed"?"Live":"Draft"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${at.border}`},children:[{id:"mobile",icon:e.jsx(R0,{size:13})},{id:"tablet",icon:e.jsx(T0,{size:13})},{id:"desktop",icon:e.jsx(C0,{size:13})}].map(f=>e.jsx("button",{onClick:()=>c(f.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:l===f.id?at.surfaceEl:"transparent",color:l===f.id?at.violet:at.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:f.icon},f.id))}),e.jsx("button",{onClick:j,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${at.border}`,backgroundColor:"transparent",color:at.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k0,{size:14,style:x?{animation:"spin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:S?`/api/preview/download/${t}/${S}`:"#",style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${at.border}`,color:at.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(yn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:C,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:at.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${at.violetG}`},children:[e.jsx(E0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>y(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${at.border}`,backgroundColor:"transparent",color:at.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(bn,{size:14})})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:p.map(f=>{const g=S===f.id;return e.jsxs("button",{onClick:()=>b(f.id),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:g?at.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${g?at.violet:at.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:f.status==="completed"?at.success:f.status==="error"?at.danger:at.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:g?at.tp:at.ts,fontFamily:at.mono},children:["v",f.version]}),f.title&&e.jsx("span",{style:{fontSize:"11px",color:g?at.ts:at.tm,maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:f.title})]},f.id)})})]})}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})}const nt={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",warning:"#f59e0b"};function M6({agent:t,onDownload:i,navigate:s}){var b;const[o,u]=L.useState(!1),S=l=>l.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("div",{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{backgroundColor:nt.surface,border:`1px solid ${o?nt.violet:nt.border}`,borderRadius:"10px",overflow:"hidden",display:"flex",flexDirection:"column",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",transform:o?"translateY(-2px)":"none",boxShadow:o?`0 8px 24px rgba(0,0,0,0.5), 0 0 20px ${nt.violetG}`:"none"},children:[e.jsx("div",{style:{aspectRatio:"16/10",backgroundColor:"#141415",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${nt.border}`,overflow:"hidden",position:"relative"},children:t.screenshot_path?e.jsx("img",{src:t.screenshot_path+"?t=1",alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):t.featured_project_id&&t.featured_iteration_id?e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${t.featured_project_id}/${t.featured_iteration_id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview ${t.name}`,loading:"lazy",sandbox:"allow-same-origin"})}):e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"10px",backgroundColor:nt.violetM,color:nt.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"700",border:`1px solid ${nt.violet}30`},children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{style:{padding:"14px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${nt.violet}15`,color:nt.violet,border:`1px solid ${nt.violet}25`,marginRight:"4px"},children:t.category||"General"}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${nt.ts}15`,color:nt.ts,border:`1px solid ${nt.ts}25`},children:t.model||"unknown"})]}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",color:nt.tp,marginBottom:"4px",margin:"0 0 4px 0"},children:S(t.name)}),e.jsx("p",{style:{fontSize:"12px",color:nt.ts,lineHeight:"1.4",marginBottom:"12px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"34px",margin:"0 0 12px 0"},children:t.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",color:nt.tm,marginBottom:"12px"},children:[e.jsx(Cn,{size:12}),e.jsx("span",{children:((b=t.creator)==null?void 0:b.display_name)||"Platform"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:`1px solid ${nt.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:nt.ts},children:[e.jsx(yn,{size:12,color:nt.tm}),e.jsx("span",{children:t.download_count||0})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:nt.ts},children:[e.jsx(Fi,{size:12,color:nt.tm}),e.jsx("span",{children:t.project_count||0})]})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(l=>e.jsx(vn,{size:10,fill:l<=(t.rating||0)?nt.warning:"transparent",color:l<=(t.rating||0)?nt.warning:nt.tm},l))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"14px"},children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(t.name)},style:{backgroundColor:nt.surfaceEl,color:nt.ts,border:`1px solid ${nt.borderS}`,borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(yn,{size:13})," Download"]}),e.jsxs("button",{onClick:()=>s(`/marketplace/${t.name}`),style:{backgroundColor:nt.tp,color:nt.bg,border:"none",borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Os,{size:13})," Details"]})]})]})]})}function B6(){const t=Wt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(""),[x,v]=L.useState("all"),[d,y]=L.useState("popular"),_=async()=>{b(!0);try{const h=new URLSearchParams({sort:d});l&&h.set("search",l),x!=="all"&&h.set("category",x);const[p,f]=await Promise.all([ae(`/api/marketplace?${h.toString()}`),ae("/api/categories")]);s(p||[]),u(f||[])}catch(h){console.error("Marketplace fetch error:",h)}finally{b(!1)}};L.useEffect(()=>{const h=setTimeout(_,300);return()=>clearTimeout(h)},[l,x,d]);const j=async h=>{try{const p=Ko(),f=await fetch(`/api/marketplace/${encodeURIComponent(h)}/download`,{headers:{Authorization:`Bearer ${p}`}});if(!f.ok)throw new Error("Download failed");const g=await f.blob(),w=URL.createObjectURL(g),R=document.createElement("a");R.href=w,R.download=`${h}.md`,R.click(),URL.revokeObjectURL(w),_()}catch(p){console.error("Download error:",p)}},C=h=>h.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return e.jsx("div",{className:"mp-root",style:{backgroundColor:nt.bg,minHeight:"calc(100vh - 53px)",color:nt.tp,padding:"40px 24px"},children:e.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"48px"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"12px"},children:"Agent Marketplace"}),e.jsx("p",{style:{fontSize:"14px",color:nt.ts,marginBottom:"24px"},children:"Browse, download, and explore AI agents for your projects"}),e.jsxs("div",{style:{position:"relative",maxWidth:"500px",margin:"0 auto"},children:[e.jsx(Ds,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:nt.tm}}),e.jsx("input",{style:{width:"100%",backgroundColor:nt.surface,border:`1px solid ${nt.border}`,borderRadius:"8px",padding:"10px 16px 10px 40px",color:nt.tp,fontSize:"14px",outline:"none",boxSizing:"border-box"},placeholder:"Search agents, capabilities, models...",value:l,onChange:h=>c(h.target.value)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"32px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:[e.jsx("div",{onClick:()=>v("all"),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:x==="all"?nt.violetM:nt.surface,color:x==="all"?nt.violet:nt.ts,border:`1px solid ${x==="all"?nt.violet:nt.border}`},children:"All Agents"}),o.map(h=>e.jsx("div",{onClick:()=>v(h.name),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:x===h.name?nt.violetM:nt.surface,color:x===h.name?nt.violet:nt.ts,border:`1px solid ${x===h.name?nt.violet:nt.border}`},children:C(h.name)},h.id||h.name))]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(H2,{size:14,style:{color:nt.tm}}),e.jsxs("select",{style:{backgroundColor:nt.surface,border:`1px solid ${nt.border}`,color:nt.ts,padding:"6px 12px",borderRadius:"6px",fontSize:"12px",outline:"none",cursor:"pointer"},value:d,onChange:h=>y(h.target.value),children:[e.jsx("option",{value:"popular",children:"Popular"}),e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"recent",children:"Recently Added"}),e.jsx("option",{value:"name",children:"Name A-Z"})]})]})]}),i.length===0&&!S?e.jsxs("div",{style:{textAlign:"center",padding:"80px 0",color:nt.tm},children:[e.jsx(S0,{size:48,strokeWidth:1,style:{marginBottom:"16px",opacity:.5}}),e.jsx("p",{style:{margin:0},children:"No agents found matching your criteria."})]}):e.jsx("div",{className:"mp-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px",opacity:S&&i.length===0?.5:1,transition:"opacity 0.2s ease"},children:i.map(h=>e.jsx(M6,{agent:h,onDownload:j,navigate:t},h.name))}),e.jsx("style",{children:`
          @media (max-width: 768px) {
            .mp-root { padding: 20px 12px !important; }
            .mp-grid { grid-template-columns: 1fr !important; gap: 16px !important; }
          }
          @media (max-width: 480px) {
            .mp-grid { grid-template-columns: 1fr !important; }
          }
        `})]})})}const ce={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function P6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=ce.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${ce.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=ce.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})}),e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.8))",display:"flex",alignItems:"flex-end",padding:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fff"},children:[e.jsx(ql,{size:12,fill:"currentColor"}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Preview"})]})})]}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:ce.ts},children:t.project_name}),e.jsx("span",{style:{color:ce.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:["v",t.iteration_version]})]})]})]})}function O6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),x=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Fi,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:ce.surfaceEl,border:`1px solid ${ce.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:ce.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:16})}),e.jsx("div",{ref:u,onScroll:x,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${ce.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=ce.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=ce.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:ce.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:ce.surfaceEl,border:`1px solid ${ce.border}`,color:ce.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:ce.surfaceEl,border:`1px solid ${ce.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:ce.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(ar,{size:16})})]})]})}function $6(){var Pe;const{name:t}=Gn(),i=Wt(),[s,o]=L.useState(null),[u,S]=L.useState(null),[b,l]=L.useState([]),[c,x]=L.useState([]),[v,d]=L.useState({}),[y,_]=L.useState(!0),[j,C]=L.useState(!1),[h,p]=L.useState(null),[f,g]=L.useState(!1),[w,R]=L.useState(!1),[A,z]=L.useState([]),[E,P]=L.useState([]),[O,H]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[K,U]=L.useState(!1),[te,V]=L.useState(!0),[de,Q]=L.useState(null),[Y,B]=L.useState({}),[D,M]=L.useState("desktop"),[W,pe]=L.useState(!1),[me,we]=L.useState(!1);L.useEffect(()=>{Re()},[t]);const Re=async()=>{try{_(!0);const[Ee,We]=await Promise.all([ae(`/api/marketplace/${t}`),ae("/api/user/me")]);o(Ee),l(Ee.showcases||[]),x(Ee.projects||[]),d(Ee.iterations_by_project||{}),S(We)}catch(Ee){console.error(Ee)}finally{_(!1)}},X=s&&u&&(s.created_by===u.id||u.role==="admin"),F=async()=>{try{const Ee=Ko(),We=await fetch(`/api/marketplace/${encodeURIComponent(t)}/download`,{headers:{Authorization:`Bearer ${Ee}`}});if(!We.ok)throw new Error("Download failed");const Z=await We.blob(),le=URL.createObjectURL(Z),Fe=document.createElement("a");Fe.href=le,Fe.download=`${t}.md`,Fe.click(),URL.revokeObjectURL(le)}catch(Ee){console.error("Download error:",Ee)}},be=async(Ee,We)=>{const Z=b.findIndex(Ze=>Ze.id===Ee);if(We==="up"&&Z===0||We==="down"&&Z===b.length-1)return;const le=[...b],Fe=We==="up"?Z-1:Z+1;[le[Z],le[Fe]]=[le[Fe],le[Z]],l(le),await ae(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:le.map(Ze=>Ze.id)})})},oe=async Ee=>{window.confirm("Remove this showcase?")&&(await ae(`/api/marketplace/${t}/showcases/${Ee}`,{method:"DELETE"}),l(b.filter(We=>We.id!==Ee)))},De=async()=>{try{const Ee=await ae("/api/projects");z(Ee||[]);const We={};await Promise.all((Ee||[]).map(async Z=>{try{const le=await ae(`/api/iterations/${Z.id}`);le&&le.length>0&&(We[Z.id]=le)}catch(le){console.error(`Failed to load iterations for project ${Z.id}:`,le)}})),B(We)}catch(Ee){console.error(Ee)}V(!0),Q(null),R(!0)},ee=async()=>{if(!(!O.project_id||!O.iteration_id||!O.title))try{const Ee=await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(O)});await Re(),R(!1),H({project_id:"",iteration_id:"",title:"",description:""})}catch(Ee){console.error(Ee),alert(Ee.message||"Failed to add showcase")}},ke=async Ee=>{if(Ee.preventDefault(),U(!1),b.length>=6){alert("Maximum 6 showcases per agent");return}try{const We=JSON.parse(Ee.dataTransfer.getData("application/json"));await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(We)}),await Re()}catch(We){console.error("Drop error:",We),alert(We.message||"Failed to add showcase")}},he=Ee=>{Ee.preventDefault(),Ee.dataTransfer.dropEffect="copy",U(!0)},Ie=()=>{U(!1)};if(y)return e.jsx("div",{style:{background:ce.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{color:ce.tm,fontSize:"14px"},children:"Loading..."})});if(!s)return e.jsx("div",{style:{background:ce.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",color:ce.ts},children:"Agent not found."});const Oe=Ee=>Ee.split("-").map(We=>We.charAt(0).toUpperCase()+We.slice(1)).join(" ");return e.jsxs("div",{className:"mp-detail",style:{background:ce.bg,minHeight:"calc(100vh - 53px)",color:ce.tp,padding:"40px 20px"},children:[e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(pi,{to:"/marketplace",style:{fontSize:"12px",color:ce.tm,textDecoration:"none"},children:"Marketplace"}),e.jsx(ar,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"12px",color:ce.ts},children:Oe(s.name)})]}),e.jsxs("div",{className:"mp-detail-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"40px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",letterSpacing:"-0.02em",margin:0},children:Oe(s.name)}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:ce.violetM,color:ce.violet,border:`1px solid ${ce.violet}40`},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:`${ce.ts}20`,color:ce.ts,border:`1px solid ${ce.ts}40`},children:s.model||"unknown"})]}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:ce.ts,marginBottom:"24px",maxWidth:"700px"},children:s.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:ce.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ce.border}`},children:e.jsx(Cn,{size:16,style:{color:ce.ts}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:ce.tm,textTransform:"uppercase"},children:"Created By"}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:((Pe=s.creator)==null?void 0:Pe.display_name)||"Platform"})]})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:ce.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(Ee=>e.jsx(vn,{size:14,fill:Ee<=(s.rating||0)?ce.warning:"none",stroke:Ee<=(s.rating||0)?ce.warning:ce.tm},Ee))}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:(s.rating||0).toFixed(1)})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:ce.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(yn,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:s.download_count||0}),e.jsx("span",{style:{fontSize:"12px",color:ce.tm},children:"Downloads"})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:F,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"14px",fontWeight:"600",cursor:"pointer",background:ce.tp,color:ce.bg,border:"none"},children:[e.jsx(yn,{size:16})," Download Agent"]}),X&&e.jsxs("button",{onClick:()=>g(!f),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.surfaceEl,color:ce.ts,border:`1px solid ${ce.borderS}`},children:[e.jsx(Fi,{size:14})," ",f?"Hide Management":"Manage Showcases"]})]})]}),f&&e.jsxs("div",{style:{background:ce.surface,border:`1px solid ${ce.violet}40`,borderRadius:"12px",padding:"24px",marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:ce.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:ce.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),b.length<6&&e.jsxs("button",{onClick:De,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.tp,color:ce.bg,border:"none"},children:[e.jsx(Jt,{size:14})," Add Showcase"]})]}),e.jsxs("div",{onDrop:ke,onDragOver:he,onDragLeave:Ie,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:b.length===0?"120px":"auto",border:K?`2px dashed ${ce.violet}`:"none",borderRadius:"8px",padding:K?"8px":"0",background:K?`${ce.violet}10`:"transparent",transition:"all 0.2s"},children:[b.map((Ee,We)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:ce.surfaceEl,borderRadius:"8px",border:`1px solid ${ce.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>be(Ee.id,"up"),disabled:We===0,style:{background:"none",border:"none",color:We===0?ce.tm:ce.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(_0,{size:14})}),e.jsx("button",{onClick:()=>be(Ee.id,"down"),disabled:We===b.length-1,style:{background:"none",border:"none",color:We===b.length-1?ce.tm:ce.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(b0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:Ee.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:ce.tm},children:[Ee.project_name,"  v",Ee.iteration_version]})]}),e.jsxs("button",{onClick:()=>oe(Ee.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${ce.danger}20`,color:ce.danger,border:"none"},children:[e.jsx(Ir,{size:14})," Remove"]})]},Ee.id)),b.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${K?ce.violet:ce.border}`,borderRadius:"8px",color:K?ce.violet:ce.tm,background:K?`${ce.violet}10`:"transparent",transition:"all 0.2s"},children:K?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations here!"})]})]}),b.length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Showcase Gallery"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:b.map(Ee=>e.jsx(P6,{showcase:Ee,onClick:p},Ee.id))})]}),c.length>0&&Object.keys(v).length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx(Os,{size:18,style:{color:ce.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Iteration Browser"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),c.filter(Ee=>v[Ee.id]&&v[Ee.id].length>0).map(Ee=>e.jsx(O6,{iterations:v[Ee.id],projectId:Ee.id,projectName:Ee.name,onSelectIteration:(We,Z,le)=>{p({project_id:Z,iteration_id:We.id,title:We.title||`V${We.version}`,project_name:le,iteration_version:We.version})}},Ee.id))]}),e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{onClick:()=>C(!j),style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"16px"},children:[e.jsx(_h,{size:18,style:{color:ce.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Agent Prompt"}),e.jsx(bn,{size:18,style:{color:ce.tm,transform:j?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),j&&e.jsx("div",{style:{background:"#0a0a0a",border:`1px solid ${ce.border}`,borderRadius:"8px",padding:"20px",fontFamily:ce.mono,fontSize:"13px",lineHeight:"1.6",color:ce.ts,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto"},children:s.full_prompt||"[No prompt content]"})]}),e.jsxs("section",{style:{marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Projects using this Agent"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:[c.map(Ee=>e.jsxs("div",{onClick:()=>i(`/project/${Ee.id}`),style:{padding:"8px 16px",background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"6px",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:We=>We.currentTarget.style.borderColor=ce.violet,onMouseLeave:We=>We.currentTarget.style.borderColor=ce.border,children:[e.jsx(Fi,{size:14,style:{color:ce.tm}}),Ee.name]},Ee.id)),c.length===0&&e.jsx("div",{style:{fontSize:"14px",color:ce.tm},children:"No projects recorded yet."})]})]})]}),h&&(()=>{const Ee={desktop:"100%",tablet:"768px",mobile:"390px"},Z=[...v[h.project_id]||[]].sort((et,dt)=>et.version-dt.version),le=()=>{pe(!0),setTimeout(()=>pe(!1),800)},Fe=async()=>{try{const et=`${window.location.origin}/preview/${h.project_id}`;await navigator.clipboard.writeText(et)}catch{}},Ze=et=>{p({...h,iteration_id:et.id,title:et.title||`V${et.version}`,iteration_version:et.version})};return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,backgroundColor:"#050505",display:"flex",flexDirection:"column",color:ce.tp,fontFamily:"Inter, sans-serif"},children:[e.jsx("button",{onClick:()=>{p(null),M("desktop"),we(!1)},style:{position:"absolute",top:"16px",right:"16px",zIndex:1100,background:"rgba(15,15,15,0.85)",backdropFilter:"blur(12px)",border:`1px solid ${ce.borderS}`,borderRadius:"10px",width:"36px",height:"36px",cursor:"pointer",color:ce.ts,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(bt,{size:16})}),e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[D!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${ce.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:Ee[D],height:D==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:D==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:D==="desktop"?"0":"12px",overflow:"hidden",border:D==="desktop"?"none":`1px solid ${ce.borderS}`},children:e.jsx("iframe",{src:`/api/preview/${h.project_id}/${h.iteration_id}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:W?.5:1,transition:"opacity 0.2s"},title:h.title},`${h.iteration_id}-${W}`)})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:me?"auto":"calc(100% - 40px)",maxWidth:me?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${ce.borderS}`,borderRadius:"16px",zIndex:1100,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:me?e.jsxs("button",{onClick:()=>we(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:ce.ts},children:[e.jsx(bh,{size:14}),e.jsxs("span",{style:{fontFamily:ce.mono,fontSize:"11px",fontWeight:600},children:["v",h.iteration_version||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:ce.border}}),e.jsx("span",{style:{fontSize:"10px",color:ce.tm},children:h.project_name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:ce.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:ce.mono,fontWeight:800,fontSize:"14px",color:ce.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:ce.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ce.tp},children:h.project_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:"rgba(34,197,94,0.1)",border:"1px solid rgba(34,197,94,0.2)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:ce.success}}),e.jsx("span",{style:{fontSize:"10px",color:ce.success,fontWeight:500},children:"Live"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${ce.border}`},children:[{id:"mobile",icon:e.jsx(R0,{size:13})},{id:"tablet",icon:e.jsx(T0,{size:13})},{id:"desktop",icon:e.jsx(C0,{size:13})}].map(et=>e.jsx("button",{onClick:()=>M(et.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:D===et.id?ce.surfaceEl:"transparent",color:D===et.id?ce.violet:ce.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:et.icon},et.id))}),e.jsx("button",{onClick:le,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ce.border}`,backgroundColor:"transparent",color:ce.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k0,{size:14,style:W?{animation:"mpSpin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:`/api/preview/download/${h.project_id}/${h.iteration_id}`,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${ce.border}`,color:ce.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(yn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:Fe,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:ce.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${ce.violetG}`},children:[e.jsx(E0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>we(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ce.border}`,backgroundColor:"transparent",color:ce.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(bn,{size:14})})]})]}),Z.length>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:Z.map(et=>{const dt=h.iteration_id===et.id;return e.jsxs("button",{onClick:()=>Ze(et),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:dt?ce.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${dt?ce.violet:ce.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0,color:dt?ce.tp:ce.ts},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:et.status==="completed"?ce.success:et.status==="error"?ce.danger:ce.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:ce.mono},children:["v",et.version]}),et.title&&e.jsx("span",{style:{fontSize:"11px",color:dt?ce.ts:ce.tm,maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis"},children:et.title})]},et.id)})})]})}),e.jsx("style",{children:"@keyframes mpSpin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})})(),w&&(()=>{const Ee=te?A.filter(le=>le.agent===t):A,We=(le,Fe)=>{const Ze=Fe.title||`${le.name} v${Fe.version}`;H({project_id:le.id,iteration_id:Fe.id,title:Ze,description:""}),Q({project:le,iteration:Fe,title:Ze})},Z=async()=>{!O.project_id||!O.iteration_id||(await ee(),Q(null))};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:ce.surface,border:`1px solid ${ce.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:ce.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{R(!1),Q(null)},style:{background:"none",border:"none",color:ce.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:ce.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>V(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:te?ce.violet:"transparent",color:te?"#fff":ce.ts},children:["This Agent (",c.length,")"]}),e.jsxs("button",{onClick:()=>V(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:te?"transparent":ce.violet,color:te?ce.ts:"#fff"},children:["All Projects (",A.length,")"]})]}),Ee.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:ce.tm,fontSize:"14px"},children:["No projects found",te?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Ee.map(le=>{const Fe=Y[le.id]||[];return Fe.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Fi,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp},children:le.name}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:[Fe.length," version",Fe.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:Fe.map(Ze=>{const et=(de==null?void 0:de.iteration.id)===Ze.id;return e.jsxs("div",{onClick:()=>We(le,Ze),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:et?`2px solid ${ce.violet}`:`1px solid ${ce.border}`,background:ce.surfaceEl,transition:"all 0.2s",boxShadow:et?`0 0 20px ${ce.violet}40`:"none"},onMouseEnter:dt=>{et||(dt.currentTarget.style.borderColor=ce.violet)},onMouseLeave:dt=>{et||(dt.currentTarget.style.borderColor=ce.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${le.id}/${Ze.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${Ze.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),et&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:ce.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:ce.tp,marginBottom:"2px"},children:Ze.title||`Version ${Ze.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:ce.tm},children:["v",Ze.version]})]})]},Ze.id)})})]},le.id)})}),de&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:ce.surfaceEl,border:`1px solid ${ce.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:ce.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:O.title,onChange:le=>H({...O,title:le.target.value}),style:{width:"100%",background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"6px",padding:"10px",color:ce.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>Q(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:ce.ts,border:`1px solid ${ce.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:Z,disabled:!O.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.violet,color:"#fff",border:"none",opacity:O.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),e.jsx("style",{children:`
        select option { background: ${ce.surface}; color: ${ce.tp}; }
        @media (max-width: 768px) {
          .mp-detail { padding: 20px 12px !important; }
          .mp-detail-header { flex-direction: column; gap: 16px !important; }
          .mp-detail-header > div:last-child { flex-direction: row; width: 100%; }
          .mp-detail-header > div:last-child button,
          .mp-detail-header > div:last-child a { flex: 1; }
        }
      `})]})}const Me={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},Fn={width:"100%",backgroundColor:Me.bg,border:`1px solid ${Me.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s ease"},F6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#14B8A6","#F97316"];function W6(){const t=Wt(),[i,s]=L.useState([]),[o,u]=L.useState(null),[S,b]=L.useState([]),[l,c]=L.useState([]),[x,v]=L.useState(!0),[d,y]=L.useState(null),[_,j]=L.useState(""),[C,h]=L.useState(""),[p,f]=L.useState("all"),g=qo(),[w,R]=L.useState(!1),[A,z]=L.useState(!1),[E,P]=L.useState(!1),[O,H]=L.useState(null),[K,U]=L.useState(!1),[te,V]=L.useState(!1),[de,Q]=L.useState({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),[Y,B]=L.useState(""),[D,M]=L.useState([]);L.useEffect(()=>{if(d){const ee=setTimeout(()=>y(null),4e3);return()=>clearTimeout(ee)}},[d]);const W=L.useCallback(async()=>{try{v(!0);const ee=new URLSearchParams;_&&ee.set("search",_),C&&ee.set("category",C);const ke=ee.toString(),[he,Ie,Oe]=await Promise.all([ae(`/api/skills${ke?`?${ke}`:""}`),ae("/api/skills/stats"),ae("/api/skills/categories")]);s(he),u(Ie),b(Oe)}catch{y("Failed to load skills data")}finally{v(!1)}},[_,C]);L.useEffect(()=>{W()},[W]);const pe=async()=>{try{const ee=await ae("/api/agents");c(ee)}catch{y("Failed to load agents list")}},me=()=>{U(!1),Q({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),R(!0)},we=ee=>{U(!0),H(ee),Q({name:ee.name||"",description:ee.description||"",prompt:ee.prompt||"",category:ee.category||"",icon:ee.icon||"",color:ee.color||"#8B5CF6"}),R(!0)},Re=async ee=>{H(ee),M([]),B(""),await pe();try{const ke=await ae(`/api/skills/${ee.id}`);M((ke.agents||[]).map(he=>he.name))}catch{}z(!0)},X=async ee=>{try{const ke=await ae(`/api/skills/${ee.id}`);H(ke),P(!0)}catch{y("Could not load skill details")}},F=async()=>{if(!de.name.trim()){y("Skill name is required");return}try{V(!0),K&&O?await ae(`/api/skills/${O.id}`,{method:"PUT",body:JSON.stringify(de)}):await ae("/api/skills",{method:"POST",body:JSON.stringify(de)}),R(!1),W()}catch(ee){y(ee.message||"Save failed")}finally{V(!1)}},be=async ee=>{if(window.confirm("Delete this skill? This will unassign it from all agents."))try{await ae(`/api/skills/${ee}`,{method:"DELETE"}),W(),E&&(O==null?void 0:O.id)===ee&&P(!1)}catch(ke){y(ke.message||"Delete failed")}},oe=async()=>{try{if(await ae(`/api/skills/${O.id}/bulk-assign`,{method:"POST",body:JSON.stringify({agent_names:D})}),z(!1),W(),E&&O){const ee=await ae(`/api/skills/${O.id}`);H(ee)}}catch(ee){y(ee.message||"Assignment failed")}},De=async ee=>{try{await ae(`/api/skills/${O.id}/unassign/${ee}`,{method:"DELETE"});const ke=await ae(`/api/skills/${O.id}`);H(ke),W()}catch(ke){y(ke.message||"Unassign failed")}};return e.jsxs("div",{style:{color:Me.tp},children:[e.jsxs("div",{className:"skills-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"28px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 6px 0",letterSpacing:"-0.02em"},children:"Skills"}),e.jsx("p",{style:{color:Me.ts,fontSize:"13px",margin:0},children:"Create and manage reusable skills for your agents"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>t("/skills/create"),style:{backgroundColor:Me.violetM,color:Me.violet,border:"1px solid rgba(139,92,246,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ft,{size:14})," Create with AI"]}),e.jsxs("button",{onClick:me,style:{backgroundColor:Me.tp,color:Me.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:14})," New Skill"]})]})]}),e.jsx("div",{className:"skills-stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"24px"},children:[{label:"Total Skills",val:(o==null?void 0:o.total)||0,icon:e.jsx(zs,{size:13})},{label:"Assignments",val:(o==null?void 0:o.totalAssignments)||0,icon:e.jsx(dx,{size:13})},{label:"Unique Agents",val:(o==null?void 0:o.uniqueAgents)||0,icon:e.jsx(Rs,{size:13})},{label:"Categories",val:(S==null?void 0:S.length)||0,icon:e.jsx(WS,{size:13})}].map((ee,ke)=>e.jsxs("div",{style:{backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:Me.tm,fontSize:"10px",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:[ee.icon," ",ee.label]}),e.jsx("div",{style:{fontSize:"22px",fontWeight:"700"},children:ee.val})]},ke))}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Ds,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Me.tm}}),e.jsx("input",{placeholder:"Search skills...",value:_,onChange:ee=>j(ee.target.value),style:{...Fn,paddingLeft:"34px"}})]}),e.jsxs("div",{style:{position:"relative",minWidth:"170px"},children:[e.jsx(MS,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Me.tm,pointerEvents:"none"}}),e.jsxs("select",{value:C,onChange:ee=>h(ee.target.value),style:{...Fn,paddingLeft:"34px",appearance:"none",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"All Categories"}),S.map(ee=>e.jsx("option",{value:ee,children:ee},ee))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${Me.border}`,marginBottom:"20px"},children:[{key:"all",label:"All Skills",count:i.length},{key:"mine",label:"My Skills",count:i.filter(ee=>ee.created_by===(g==null?void 0:g.userId)).length},{key:"platform",label:"Platform",count:i.filter(ee=>!ee.created_by||ee.created_by!==(g==null?void 0:g.userId)).length}].map(ee=>e.jsxs("button",{onClick:()=>f(ee.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:p===ee.key?Me.violet:Me.ts,borderBottom:p===ee.key?`2px solid ${Me.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[ee.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:p===ee.key?"rgba(139,92,246,0.2)":"rgba(255,255,255,0.04)",color:p===ee.key?Me.violet:Me.tm},children:ee.count})]},ee.key))}),x?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:Me.tm,fontSize:"13px"},children:"Loading..."}):(()=>{const ee=i.filter(ke=>p==="mine"?ke.created_by===(g==null?void 0:g.userId):p==="platform"?!ke.created_by||ke.created_by!==(g==null?void 0:g.userId):!0);return ee.length===0?e.jsxs("div",{style:{border:`1px dashed ${Me.borderS}`,borderRadius:"12px",padding:"60px 20px",textAlign:"center"},children:[e.jsx(zs,{size:32,style:{color:Me.tm,marginBottom:"12px"}}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 6px 0"},children:"No skills found"}),e.jsx("p",{style:{color:Me.tm,fontSize:"12px",margin:"0 0 16px 0"},children:_||C?"Try adjusting your filters.":"Create your first skill to get started."}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[!_&&!C&&e.jsxs("button",{onClick:me,style:{backgroundColor:Me.violetM,color:Me.violet,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(Jt,{size:14})," Create Skill"]}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await ae("/api/seed/demo",{method:"POST"}),await W()}catch(ke){y(ke.message||"Failed to load demo data")}},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(Nr,{size:14})," Load Demo Data"]})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px"},children:ee.map(ke=>{const he=!ke.created_by||ke.created_by===(g==null?void 0:g.userId),Ie=he;return e.jsxs("div",{style:{backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",padding:"16px",transition:"all 0.2s",cursor:"pointer",position:"relative"},onMouseEnter:Oe=>{Oe.currentTarget.style.borderColor=ke.color||Me.violet,Oe.currentTarget.style.boxShadow=`0 4px 20px ${ke.color||Me.violet}15`},onMouseLeave:Oe=>{Oe.currentTarget.style.borderColor=Me.border,Oe.currentTarget.style.boxShadow="none"},onClick:()=>X(ke),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:ke.color||Me.violet,flexShrink:0}}),e.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:ke.name}),he?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:Me.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsx("span",{style:{backgroundColor:`${ke.color||Me.violet}20`,color:ke.color||Me.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",flexShrink:0},children:ke.category||"general"})]}),e.jsx("p",{style:{color:Me.ts,fontSize:"12px",lineHeight:"1.5",margin:"0 0 14px 0",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"36px"},children:ke.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",color:Me.tm,fontSize:"11px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Rs,{size:11}),e.jsxs("span",{children:[ke.agent_count||0," agent",(ke.agent_count||0)!==1?"s":""]})]}),ke.total_files>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Me.violet},children:[e.jsx(Ls,{size:11}),e.jsxs("span",{children:[ke.total_files," file",ke.total_files!==1?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px"},onClick:Oe=>Oe.stopPropagation(),children:[ke.total_files>0&&e.jsx("button",{onClick:()=>t(`/skills/${ke.id}/edit`),style:{...yl,color:Me.violet},title:"Edit in Editor",children:e.jsx(Ls,{size:13})}),e.jsx("button",{onClick:()=>Re(ke),style:yl,title:"Assign to Agents",children:e.jsx(dx,{size:13})}),he&&e.jsx("button",{onClick:()=>we(ke),style:yl,title:"Edit",children:e.jsx(Du,{size:13})}),Ie&&e.jsx("button",{onClick:()=>be(ke.id),style:{...yl,color:Me.danger},title:"Delete",children:e.jsx(Ir,{size:13})})]})]})]},ke.id)})})})(),w&&e.jsx("div",{style:Mm,onClick:()=>R(!1),children:e.jsxs("div",{style:{...Bm,width:"500px"},onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{style:xu,children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:0},children:K?"Edit Skill":"Create New Skill"}),e.jsx("button",{onClick:()=>R(!1),style:yu,children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Ro,children:"Name"}),e.jsx("input",{style:Fn,placeholder:"e.g. Code Reviewer",value:de.name,onChange:ee=>Q({...de,name:ee.target.value}),onFocus:ee=>ee.target.style.borderColor=Me.violet,onBlur:ee=>ee.target.style.borderColor=Me.border})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Ro,children:"Category"}),e.jsx("input",{style:Fn,placeholder:"general",value:de.category,onChange:ee=>Q({...de,category:ee.target.value}),onFocus:ee=>ee.target.style.borderColor=Me.violet,onBlur:ee=>ee.target.style.borderColor=Me.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ro,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",paddingTop:"2px"},children:F6.map(ee=>e.jsx("div",{onClick:()=>Q({...de,color:ee}),style:{width:"22px",height:"22px",borderRadius:"4px",cursor:"pointer",backgroundColor:ee,border:de.color===ee?"2px solid #fff":"2px solid transparent",transition:"border-color 0.15s"}},ee))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ro,children:"Description"}),e.jsx("textarea",{style:{...Fn,minHeight:"50px",resize:"vertical"},placeholder:"Briefly describe what this skill does...",value:de.description,onChange:ee=>Q({...de,description:ee.target.value}),onFocus:ee=>ee.target.style.borderColor=Me.violet,onBlur:ee=>ee.target.style.borderColor=Me.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ro,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...Fn,minHeight:"120px",fontFamily:Me.mono,fontSize:"12px",resize:"vertical"},placeholder:"The actual instructions or prompt snippet for this skill...",value:de.prompt,onChange:ee=>Q({...de,prompt:ee.target.value}),onFocus:ee=>ee.target.style.borderColor=Me.violet,onBlur:ee=>ee.target.style.borderColor=Me.border})]})]}),e.jsxs("div",{style:Pm,children:[e.jsx("button",{onClick:()=>R(!1),style:ml,children:"Cancel"}),e.jsx("button",{onClick:F,disabled:te,style:{...Om,opacity:te?.6:1},children:te?"Saving...":K?"Save Changes":"Create Skill"})]})]})}),A&&O&&e.jsx("div",{style:Mm,onClick:()=>z(!1),children:e.jsxs("div",{style:{...Bm,width:"420px"},onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{style:xu,children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 2px 0"},children:"Assign to Agents"}),e.jsx("span",{style:{fontSize:"11px",color:Me.tm},children:O.name})]}),e.jsx("button",{onClick:()=>z(!1),style:yu,children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{padding:"14px"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[e.jsx(Ds,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:Me.tm}}),e.jsx("input",{style:{...Fn,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search agents...",value:Y,onChange:ee=>B(ee.target.value)})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:`1px solid ${Me.border}`,borderRadius:"6px"},children:l.filter(ee=>ee.name.toLowerCase().includes(Y.toLowerCase())).map(ee=>{const ke=D.includes(ee.name);return e.jsxs("div",{onClick:()=>{M(he=>ke?he.filter(Ie=>Ie!==ee.name):[...he,ee.name])},style:{display:"flex",alignItems:"center",gap:"10px",padding:"9px 12px",cursor:"pointer",borderBottom:`1px solid ${Me.border}`,backgroundColor:ke?Me.violetG:"transparent",transition:"background-color 0.15s"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",border:`1.5px solid ${ke?Me.violet:Me.tm}`,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ke?Me.violet:"transparent",transition:"all 0.15s",flexShrink:0},children:ke&&e.jsx(or,{size:10,color:"#fff"})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"500"},children:ee.name}),ee.category&&e.jsx("div",{style:{fontSize:"10px",color:Me.tm},children:ee.category})]})]},ee.name)})}),e.jsxs("div",{style:{fontSize:"11px",color:Me.tm,marginTop:"8px"},children:[D.length," agent",D.length!==1?"s":""," selected"]})]}),e.jsxs("div",{style:Pm,children:[e.jsx("button",{onClick:()=>z(!1),style:ml,children:"Cancel"}),e.jsxs("button",{onClick:oe,disabled:D.length===0,style:{...Om,opacity:D.length===0?.5:1},children:["Assign ",D.length," Agent",D.length!==1?"s":""]})]})]})}),E&&O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99},onClick:()=>P(!1)}),e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"450px",height:"100vh",backgroundColor:Me.surface,borderLeft:`1px solid ${Me.border}`,zIndex:100,display:"flex",flexDirection:"column",boxShadow:"-10px 0 30px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{...xu,borderBottom:`1px solid ${Me.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:O.color||Me.violet}}),e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:O.name})]}),e.jsx("button",{onClick:()=>P(!1),style:yu,children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",flex:1,overflowY:"auto"},children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:e.jsx("span",{style:{backgroundColor:`${O.color||Me.violet}20`,color:O.color||Me.violet,padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:O.category||"general"})}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:mu,children:"Description"}),e.jsx("p",{style:{color:Me.ts,fontSize:"13px",lineHeight:"1.6",margin:0},children:O.description||"No description."})]}),O.prompt&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:mu,children:"Prompt / Instructions"}),e.jsx("div",{style:{backgroundColor:Me.bg,border:`1px solid ${Me.border}`,borderRadius:"6px",padding:"12px",fontFamily:Me.mono,fontSize:"11px",color:Me.ts,whiteSpace:"pre-wrap",lineHeight:"1.6",maxHeight:"250px",overflowY:"auto"},children:O.prompt})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("h3",{style:{...mu,margin:0},children:["Assigned Agents (",(O.agents||[]).length,")"]}),e.jsxs("button",{onClick:()=>Re(O),style:{background:"none",border:"none",color:Me.violet,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",fontWeight:"500"},children:[e.jsx(Jt,{size:12})," Add"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(O.agents||[]).length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:Me.tm,fontSize:"12px",border:`1px dashed ${Me.border}`,borderRadius:"6px"},children:"No agents assigned yet"}):(O.agents||[]).map(ee=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:Me.surfaceEl,borderRadius:"6px",border:`1px solid ${Me.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Rs,{size:12,style:{color:Me.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:ee.name}),ee.category&&e.jsx("span",{style:{fontSize:"9px",color:Me.tm,padding:"1px 5px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"100px"},children:ee.category})]}),e.jsx("button",{onClick:()=>De(ee.name),style:{background:"none",border:"none",color:Me.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Unassign",children:e.jsx(bt,{size:13})})]},ee.name))})]})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${Me.border}`,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{P(!1),t(`/skills/${O.id}/edit`)},style:{width:"100%",padding:"8px",borderRadius:"4px",backgroundColor:Me.violetM,color:Me.violet,border:"1px solid rgba(139,92,246,0.3)",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ft,{size:13})," Open in Editor"]}),(!O.created_by||O.created_by===(g==null?void 0:g.userId))&&e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:()=>we(O),style:{...ml,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Du,{size:13})," Edit"]}),e.jsxs("button",{onClick:()=>be(O.id),style:{...ml,color:Me.danger,borderColor:`${Me.danger}33`,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ir,{size:13})," Delete"]})]})]})]})]}),d&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:Me.danger,color:"#fff",padding:"10px 20px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.4)",zIndex:200,fontSize:"13px"},children:[e.jsx(Ci,{size:16}),e.jsx("span",{children:d}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:14})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .skills-stats-grid { grid-template-columns: repeat(2, 1fr) !important; }
          .skills-header { flex-direction: column !important; align-items: flex-start !important; gap: 12px !important; }
          .skills-search-row { flex-direction: column !important; }
          .skills-search-row > div:last-child { min-width: 0 !important; width: 100% !important; }
          .skills-grid { grid-template-columns: 1fr !important; }
          .skills-modal-content { width: 95vw !important; max-width: 95vw !important; }
          .skills-drawer {
            width: 100vw !important;
            border-left: none !important;
          }
        }
        @media (max-width: 480px) {
          .skills-stats-grid { grid-template-columns: 1fr !important; }
        }
      `})]})}const Mm={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:110},Bm={backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",overflow:"hidden"},xu={padding:"14px 20px",borderBottom:`1px solid ${Me.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},Pm={padding:"12px 20px",borderTop:`1px solid ${Me.border}`,display:"flex",justifyContent:"flex-end",gap:"10px",backgroundColor:Me.surfaceEl},Om={backgroundColor:Me.tp,color:Me.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},ml={backgroundColor:Me.surfaceEl,color:Me.ts,border:`1px solid ${Me.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},yl={background:"none",border:"none",color:Me.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.15s"},Ro={display:"block",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",color:Me.tm,marginBottom:"6px",letterSpacing:"0.05em"},mu={fontSize:"11px",fontWeight:"600",textTransform:"uppercase",color:Me.tm,letterSpacing:"0.08em",marginBottom:"10px"},yu={background:"none",border:"none",color:Me.tm,cursor:"pointer",display:"flex"},ve={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},vl={width:"100%",backgroundColor:ve.bg,border:`1px solid ${ve.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function $m(t){if(!t||!t.trim())return[{id:crypto.randomUUID(),type:"paragraph",content:""}];const i=t.split(`
`),s=[];let o=0;for(;o<i.length;){const u=i[o];if(!u.trim()){o++;continue}if(u.startsWith("```")){const b=u.slice(3).trim(),l=[];for(o++;o<i.length&&!i[o].startsWith("```");)l.push(i[o]),o++;o++,s.push({id:crypto.randomUUID(),type:"code",content:l.join(`
`),lang:b});continue}if(u.startsWith("### ")){s.push({id:crypto.randomUUID(),type:"heading3",content:u.slice(4)}),o++;continue}if(u.startsWith("## ")){s.push({id:crypto.randomUUID(),type:"heading2",content:u.slice(3)}),o++;continue}if(u.startsWith("# ")){s.push({id:crypto.randomUUID(),type:"heading1",content:u.slice(2)}),o++;continue}if(u.match(/^---+\s*$/)){s.push({id:crypto.randomUUID(),type:"divider",content:""}),o++;continue}if(u.startsWith("> ")){const b=[];for(;o<i.length&&i[o].startsWith("> ");)b.push(i[o].slice(2)),o++;s.push({id:crypto.randomUUID(),type:"callout",content:b.join(`
`)});continue}if(u.match(/^[-*] /)){const b=[];for(;o<i.length&&i[o].match(/^[-*] /);)b.push(i[o].replace(/^[-*] /,"")),o++;s.push({id:crypto.randomUUID(),type:"list",content:b.join(`
`)});continue}if(u.match(/^\d+\. /)){const b=[];for(;o<i.length&&i[o].match(/^\d+\. /);)b.push(i[o].replace(/^\d+\. /,"")),o++;s.push({id:crypto.randomUUID(),type:"numbered",content:b.join(`
`)});continue}if(u.startsWith("|")){const b=[];for(;o<i.length&&i[o].startsWith("|");)b.push(i[o]),o++;s.push({id:crypto.randomUUID(),type:"table",content:b.join(`
`)});continue}const S=[];for(;o<i.length&&i[o].trim()&&!i[o].startsWith("#")&&!i[o].startsWith("```")&&!i[o].startsWith("> ")&&!i[o].startsWith("---")&&!i[o].startsWith("|")&&!i[o].match(/^[-*] /)&&!i[o].match(/^\d+\. /);)S.push(i[o]),o++;S.length>0&&s.push({id:crypto.randomUUID(),type:"paragraph",content:S.join(`
`)})}return s.length>0?s:[{id:crypto.randomUUID(),type:"paragraph",content:""}]}function N6(t){return t.map(i=>{switch(i.type){case"heading1":return`# ${i.content}`;case"heading2":return`## ${i.content}`;case"heading3":return`### ${i.content}`;case"code":return`\`\`\`${i.lang||""}
${i.content}
\`\`\``;case"list":return i.content.split(`
`).map(s=>`- ${s}`).join(`
`);case"numbered":return i.content.split(`
`).map((s,o)=>`${o+1}. ${s}`).join(`
`);case"callout":return i.content.split(`
`).map(s=>`> ${s}`).join(`
`);case"table":return i.content;case"divider":return"---";default:return i.content}}).join(`

`)}function y1({item:t,depth:i=0,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b}){const l=t.type==="directory",c=s===t.path,x=u.includes(t.path);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"5px 10px",paddingLeft:`${12+i*16}px`,fontSize:"12px",cursor:"pointer",borderRadius:"4px",margin:"1px 6px",color:c?ve.violet:ve.ts,backgroundColor:c?ve.violetG:"transparent",transition:"background 0.1s"},onClick:()=>l?S(t.path):o(t.path),onMouseEnter:v=>{c||(v.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)")},onMouseLeave:v=>{c||(v.currentTarget.style.backgroundColor="transparent")},children:[l?x?e.jsx(bn,{size:12,style:{flexShrink:0}}):e.jsx(ar,{size:12,style:{flexShrink:0}}):null,l?e.jsx(DS,{size:13,style:{flexShrink:0,color:ve.tm}}):e.jsx(RS,{size:13,style:{flexShrink:0,color:ve.tm}}),e.jsx("span",{style:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name})]}),l&&x&&t.children&&t.children.map((v,d)=>e.jsx(y1,{item:v,depth:i+1,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b},v.path||d))]})}const H6=[{id:"paragraph",label:"Text",icon:Ao},{id:"heading1",label:"Heading 1",icon:Ao},{id:"heading2",label:"Heading 2",icon:Ao},{id:"heading3",label:"Heading 3",icon:Ao},{id:"code",label:"Code Block",icon:_h},{id:"list",label:"Bullet List",icon:zu},{id:"numbered",label:"Numbered List",icon:zu},{id:"table",label:"Table",icon:Ww},{id:"callout",label:"Callout",icon:Ci},{id:"divider",label:"Divider",icon:ow}];function Fm(){const{id:t}=Gn(),i=Wt(),[s]=j_(),o=s.get("agent"),u=!t,[S,b]=L.useState(null),[l,c]=L.useState(t||null),[x,v]=L.useState([]),[d,y]=L.useState(null),[_,j]=L.useState([]),[C,h]=L.useState(null),[p,f]=L.useState({visible:!1,x:0,y:0,blockId:null}),[g,w]=L.useState(""),[R,A]=L.useState(null),[z,E]=L.useState(u),[P,O]=L.useState([]),[H,K]=L.useState(!0),[U,te]=L.useState("chat"),[V,de]=L.useState([]),[Q,Y]=L.useState(""),[B,D]=L.useState(!1),[M,W]=L.useState([]),[pe,me]=L.useState(!1),[we,Re]=L.useState(null),[X,F]=L.useState(!1),[be,oe]=L.useState(null),[De,ee]=L.useState(""),[ke,he]=L.useState(!1),[Ie,Oe]=L.useState(""),[Pe,Ee]=L.useState(!1),[We,Z]=L.useState(!1),[le,Fe]=L.useState(!1),[Ze,et]=L.useState(""),[dt,Vt]=L.useState(!1),[St,wt]=L.useState(null),[Tt,mt]=L.useState(!1),Lt=L.useRef(null),ut=L.useRef(null);L.useEffect(()=>{if(be){const I=setTimeout(()=>oe(null),4e3);return()=>clearTimeout(I)}},[be]),L.useEffect(()=>{t?Mr(t):rr()},[t]),L.useEffect(()=>{var I;(I=ut.current)==null||I.scrollIntoView({behavior:"smooth"})},[V]);const Mr=async I=>{try{const G=await ae(`/api/skills/${I}`);b(G),c(I);let je=(await ae(`/api/skills/${I}/files`)).tree||[];if(!je||je.length===0)try{je=(await ae(`/api/skills/${I}/init`,{method:"POST",body:JSON.stringify({template:"blank"})})).tree||[]}catch(Ke){console.warn("Auto-init failed:",Ke)}v(je),W(je.filter(Ke=>Ke.type==="directory").map(Ke=>Ke.path)),G.entry_point&&ti(je).includes(G.entry_point)&&hr(I,G.entry_point),await Ei(I,G.name)}catch(G){oe("Failed to load skill"),console.error(G)}},rr=async()=>{try{const I=await ae("/api/skill-creator/templates");O(I.templates||[])}catch(I){console.error(I)}},Ei=async(I,G)=>{var _e;try{const je=await ae("/api/skill-creator/conversations",{method:"POST",body:JSON.stringify({name:G||"New Skill",skillId:I})});Re((_e=je.conversation)==null?void 0:_e.id)}catch(je){console.error(je)}},hr=async(I,G)=>{X&&d&&await pr(I);try{const _e=await ae(`/api/skills/${I}/files/${G}`);y(G),j($m(_e.content||"")),h(null),F(!1),w("")}catch(_e){oe("Failed to open file"),console.error(_e)}},pr=async I=>{const G=I||l;if(!(!d||!G)){me(!0);try{const _e=N6(_),je=await ae(`/api/skills/${G}/files/${d}`,{method:"PUT",body:JSON.stringify({content:_e})});v(je.tree||x),F(!1)}catch{oe("Failed to save file")}finally{me(!1)}}},Cr=async I=>{try{const G=Date.now().toString(36).slice(-4),je=`${I==="blank"?"New Skill":I.replace(/-/g," ").replace(/\b\w/g,He=>He.toUpperCase())} ${G}`,Ke=(await ae("/api/skills",{method:"POST",body:JSON.stringify({name:je,description:"",category:"general"})})).id;if(await ae(`/api/skills/${Ke}/init`,{method:"POST",body:JSON.stringify({template:I})}),o)try{await ae(`/api/skills/${Ke}/assign/${o}`,{method:"POST"})}catch(He){console.error("Auto-assign failed:",He)}E(!1),i(`/skills/${Ke}/edit${o?`?agent=${o}`:""}`,{replace:!0})}catch(G){oe(G.message||"Failed to create skill")}},ne=I=>{W(G=>G.includes(I)?G.filter(_e=>_e!==I):[...G,I])},Ne=async()=>{if(!(!De.trim()||!l))try{const I=await ae(`/api/skills/${l}/files/${De.trim()}`,{method:"PUT",body:JSON.stringify({content:""})});v(I.tree||x),he(!1),ee(""),hr(l,De.trim())}catch{oe("Failed to create file")}},Ge=async()=>{if(!(!Ie.trim()||!l))try{const I=await ae(`/api/skills/${l}/dirs`,{method:"POST",body:JSON.stringify({path:Ie.trim()})});v(I.tree||x),Ee(!1),Oe(""),W(G=>[...G,Ie.trim()])}catch{oe("Failed to create folder")}},ct=async I=>{if(l)try{const G=await ae(`/api/skills/${l}/files/${I}`,{method:"DELETE"});v(G.tree||x),d===I&&(y(null),j([]))}catch{oe("Failed to delete file")}},yt=(I,G)=>{j(_e=>_e.map(je=>je.id===I?{...je,content:G}:je)),F(!0),w(""),A(null),Hr(I,G)},Kt=(I,G)=>{j(_e=>_e.map(je=>je.id===I?{...je,type:G}:je)),f({visible:!1,x:0,y:0,blockId:null}),F(!0)},ft=(I,G="paragraph")=>{const _e={id:crypto.randomUUID(),type:G,content:""};if(!I)j(je=>[...je,_e]);else{const je=_.findIndex(Ke=>Ke.id===I),ye=[..._];ye.splice(je+1,0,_e),j(ye)}h(_e.id),F(!0)},qt=I=>{_.length<=1||(j(G=>G.filter(_e=>_e.id!==I)),h(null),F(!0))},Br=(I,G)=>{const _e=_.find(je=>je.id===G);if(I.key==="/"&&_e&&_e.content===""){I.preventDefault();const je=I.target.getBoundingClientRect();f({visible:!0,x:je.left,y:je.bottom+4,blockId:G});return}if(I.key==="Tab"&&g&&R===G){I.preventDefault(),yt(G,_e.content+g),w(""),A(null);return}if(I.key==="Escape"){w(""),A(null),f({...p,visible:!1}),h(null);return}if(I.key==="Enter"&&!I.shiftKey&&(_e==null?void 0:_e.type)!=="code"&&(_e==null?void 0:_e.type)!=="table"){I.preventDefault(),ft(G);return}I.key==="Backspace"&&(_e==null?void 0:_e.content)===""&&_.length>1&&(I.preventDefault(),qt(G))},Hr=L.useCallback((I,G)=>{!G||G.length<10||!we||(clearTimeout(Lt.current),Lt.current=setTimeout(async()=>{try{const _e=_.findIndex(Ke=>Ke.id===I),je=_.slice(Math.max(0,_e-5),_e).map(Ke=>Ke.content),ye=await ae(`/api/skill-creator/conversations/${we}/complete`,{method:"POST",body:JSON.stringify({fileContext:d,blocksBefore:je,currentBlock:G,cursorPosition:G.length,skillContext:{name:S==null?void 0:S.name,files:ti(x)}})});ye.completion&&(w(ye.completion),A(I))}catch{}},2e3))},[_,we,d,S,x]),Zr=async()=>{if(!Q.trim()||!we)return;const I=Q.trim();Y(""),de(G=>[...G,{role:"user",content:I}]),D(!0);try{const G=await ae(`/api/skill-creator/conversations/${we}/messages`,{method:"POST",body:JSON.stringify({message:I,fileContext:d})});G.message&&de(_e=>[..._e,{role:"assistant",content:G.message.content}])}catch(G){de(_e=>[..._e,{role:"assistant",content:"Error: "+(G.message||"Failed to get response")}])}finally{D(!1)}},kr=async()=>{if(!(!we||!d)){Z(!0);try{const I=await ae(`/api/skill-creator/conversations/${we}/generate-file`,{method:"POST",body:JSON.stringify({filePath:d})});I.content&&(j($m(I.content)),F(!0),de(G=>[...G,{role:"assistant",content:`Generated content for ${d} (${I.content.length} chars). Review it in the editor and click Save when ready.`}]))}catch(I){oe(I.message||"Generate failed")}finally{Z(!1)}}},Pr=async()=>{if(we){Z(!0);try{const I=await ae(`/api/skill-creator/conversations/${we}/generate-structure`,{method:"POST",body:JSON.stringify({})});if(I.tree){v(I.tree);const G=[],_e=je=>{for(const ye of je)ye.type==="directory"&&(G.push(ye.path),ye.children&&_e(ye.children))};_e(I.tree),W(G),l&&hr(l,"SKILL.md"),de(je=>[...je,{role:"assistant",content:`Generated ${I.files} files (${I.totalFiles} total). Check the file tree on the left  all files have been created with detailed content. Click any file to view/edit it.`}])}}catch(I){oe(I.message||"Generate all failed  try describing your skill in the chat first")}finally{Z(!1)}}},ei=()=>{et((S==null?void 0:S.name)||""),Fe(!0)},fi=async()=>{const I=Ze.trim();if(!I||!l||I===(S==null?void 0:S.name)){Fe(!1);return}Vt(!0);try{const G=await ae(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:I})});b(_e=>({..._e,...G})),Fe(!1)}catch(G){oe(G.message||"Failed to rename skill")}finally{Vt(!1)}},jr=async(I="all")=>{if(we){mt(!0);try{const G=await ae(`/api/skill-creator/conversations/${we}/suggestions`,{method:"POST",body:JSON.stringify({type:I})});wt(G.suggestions)}catch(G){oe(G.message||"Failed to load suggestions")}finally{mt(!1)}}},lr=async I=>{if(l){Vt(!0);try{const G=await ae(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:I})});b(_e=>({..._e,...G}))}catch(G){oe(G.message||"Failed to apply name")}finally{Vt(!1)}}};function ti(I){const G=[];function _e(je){for(const ye of je)G.push(ye.path||ye.name),ye.children&&_e(ye.children)}return _e(I||[]),G}return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 56px)",backgroundColor:ve.bg,color:ve.tp,overflow:"hidden"},children:[o&&e.jsxs("div",{style:{padding:"8px 20px",display:"flex",alignItems:"center",gap:"8px",background:"linear-gradient(90deg, rgba(6,182,212,0.12) 0%, rgba(139,92,246,0.08) 100%)",borderBottom:"1px solid rgba(6,182,212,0.2)",fontSize:"12px",flexShrink:0},children:[e.jsx(Cl,{size:13,style:{color:"#06b6d4"}}),e.jsx("span",{style:{color:ve.ts},children:"This skill will be auto-linked to agent"}),e.jsx("span",{style:{fontWeight:600,color:"#06b6d4",padding:"1px 8px",borderRadius:"100px",background:"rgba(6,182,212,0.15)",fontSize:"11px"},children:o}),e.jsx("button",{onClick:()=>i(`/agents/${o}`),style:{marginLeft:"auto",background:"none",border:"none",color:ve.tm,cursor:"pointer",fontSize:"11px",textDecoration:"underline"},children:"Back to agent"})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"240px",borderRight:`1px solid ${ve.border}`,display:"flex",flexDirection:"column",backgroundColor:ve.surface,flexShrink:0},children:[e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:0},children:[e.jsx("button",{onClick:()=>i("/skills"),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(yh,{size:14})}),le?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0},children:[e.jsx("input",{autoFocus:!0,value:Ze,onChange:I=>et(I.target.value),onKeyDown:I=>{I.key==="Enter"&&fi(),I.key==="Escape"&&Fe(!1)},style:{...vl,padding:"4px 8px",fontSize:"12px",fontWeight:600},disabled:dt}),e.jsx("button",{onClick:fi,disabled:dt,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(or,{size:13})}),e.jsx("button",{onClick:()=>Fe(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(bt,{size:13})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0,cursor:"pointer"},onClick:ei,title:"Click to rename",children:[e.jsx("span",{style:{fontWeight:600,fontSize:"13px",letterSpacing:"-0.01em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(S==null?void 0:S.name)||"New Skill"}),e.jsx(Gd,{size:10,style:{color:ve.tm,flexShrink:0,opacity:.5}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>he(!0),style:{background:"none",border:"none",color:ve.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New File",children:e.jsx(wS,{size:14})}),e.jsx("button",{onClick:()=>Ee(!0),style:{background:"none",border:"none",color:ve.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New Folder",children:e.jsx(AS,{size:14})})]})]}),ke&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:De,onChange:I=>ee(I.target.value),placeholder:"path/file.md",onKeyDown:I=>I.key==="Enter"&&Ne(),style:{...vl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:Ne,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex"},children:e.jsx(or,{size:14})}),e.jsx("button",{onClick:()=>he(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:14})})]}),Pe&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:Ie,onChange:I=>Oe(I.target.value),placeholder:"folder-name",onKeyDown:I=>I.key==="Enter"&&Ge(),style:{...vl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:Ge,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex"},children:e.jsx(or,{size:14})}),e.jsx("button",{onClick:()=>Ee(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:14})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",paddingTop:"8px"},children:x.length===0?e.jsx("div",{style:{padding:"24px 16px",textAlign:"center",color:ve.tm,fontSize:"11px"},children:"No files yet. Use a template or create a file."}):x.map((I,G)=>e.jsx(y1,{item:I,currentFilePath:d,onOpenFile:_e=>hr(l,_e),expandedFolders:M,onToggleFolder:ne,onDeleteFile:ct},I.path||G))}),e.jsx("div",{style:{padding:"10px",borderTop:`1px solid ${ve.border}`},children:e.jsxs("button",{onClick:()=>E(!0),style:{width:"100%",padding:"7px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ft,{size:12})," From Template"]})})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 20px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:ve.bg,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:ve.ts},children:[e.jsx(Ls,{size:12,style:{color:ve.tm}}),e.jsx("span",{style:{color:ve.tm},children:(S==null?void 0:S.name)||"Skill"}),d&&e.jsxs(e.Fragment,{children:[e.jsx(ar,{size:10,style:{color:ve.tm}}),e.jsx("span",{style:{color:ve.tp,fontWeight:500},children:d})]}),X&&e.jsx("span",{style:{fontSize:"10px",color:ve.warning,marginLeft:"6px"},children:"unsaved"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>pr(),disabled:pe||!X,style:{padding:"5px 14px",borderRadius:"4px",backgroundColor:X?ve.tp:ve.surfaceEl,color:X?ve.bg:ve.tm,border:"none",fontSize:"11px",fontWeight:600,cursor:X?"pointer":"default",display:"flex",alignItems:"center",gap:"5px",opacity:X?1:.5},children:[e.jsx(Gl,{size:12})," ",pe?"Saving...":"Save"]}),e.jsx("button",{onClick:()=>K(!H),style:{background:H?ve.violetG:ve.surfaceEl,border:`1px solid ${H?ve.violet:ve.border}`,color:H?ve.violet:ve.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex"},children:e.jsx(hw,{size:14})})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"40px 0"},children:d?e.jsx("div",{style:{maxWidth:"760px",margin:"0 auto",padding:"0 40px"},children:_.map((I,G)=>e.jsxs("div",{style:{position:"relative",marginBottom:"2px",group:!0},onMouseEnter:_e=>{const je=_e.currentTarget.querySelector(".add-btn");je&&(je.style.opacity="1")},onMouseLeave:_e=>{const je=_e.currentTarget.querySelector(".add-btn");je&&(je.style.opacity="0")},children:[C===I.id?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{autoFocus:!0,value:I.content,onChange:_e=>yt(I.id,_e.target.value),onKeyDown:_e=>Br(_e,I.id),style:{width:"100%",backgroundColor:"rgba(255,255,255,0.02)",border:`1px solid ${ve.border}`,borderRadius:"4px",color:ve.tp,outline:"none",boxSizing:"border-box",resize:"none",padding:"8px 12px",fontSize:I.type==="heading1"?"24px":I.type==="heading2"?"18px":I.type==="heading3"?"15px":"14px",fontWeight:I.type.startsWith("heading")?600:400,fontFamily:I.type==="code"||I.type==="table"?ve.mono:"inherit",lineHeight:"1.6",minHeight:I.type==="code"?"100px":"36px"},rows:Math.max(1,I.content.split(`
`).length)}),g&&R===I.id&&e.jsxs("div",{style:{position:"absolute",bottom:"-20px",left:"12px",fontSize:"11px",color:ve.tm,fontStyle:"italic"},children:[e.jsx("span",{style:{opacity:.6},children:"Tab"})," ",g.slice(0,60),g.length>60?"...":""]})]}):e.jsxs("div",{onClick:()=>h(I.id),style:{padding:"4px 12px",borderRadius:"4px",cursor:"text",minHeight:"24px",border:"1px solid transparent",transition:"background 0.1s"},onMouseEnter:_e=>_e.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:_e=>_e.currentTarget.style.backgroundColor="transparent",children:[I.type==="heading1"&&e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:I.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 1"})}),I.type==="heading2"&&e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,letterSpacing:"-0.01em"},children:I.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 2"})}),I.type==="heading3"&&e.jsx("h3",{style:{margin:0,fontSize:"15px",fontWeight:600},children:I.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 3"})}),I.type==="paragraph"&&e.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.7",color:I.content?ve.tp:ve.tm},children:I.content||'Type "/" for commands...'}),I.type==="code"&&e.jsx("pre",{style:{margin:0,padding:"12px",backgroundColor:ve.surface,borderRadius:"6px",fontSize:"12px",fontFamily:ve.mono,lineHeight:"1.6",border:`1px solid ${ve.border}`,overflow:"auto"},children:e.jsx("code",{children:I.content||"// code..."})}),I.type==="list"&&e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(I.content||"").split(`
`).map((_e,je)=>e.jsx("li",{children:_e},je))}),I.type==="numbered"&&e.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(I.content||"").split(`
`).map((_e,je)=>e.jsx("li",{children:_e},je))}),I.type==="table"&&e.jsx("pre",{style:{margin:0,fontSize:"12px",fontFamily:ve.mono,lineHeight:"1.5",color:ve.ts},children:I.content||"| col1 | col2 |"}),I.type==="callout"&&e.jsx("div",{style:{padding:"10px 14px",borderLeft:`3px solid ${ve.violet}`,backgroundColor:ve.violetG,borderRadius:"0 6px 6px 0",fontSize:"13px",lineHeight:"1.6"},children:I.content||"Note..."}),I.type==="divider"&&e.jsx("hr",{style:{border:"none",borderTop:`1px solid ${ve.border}`,margin:"12px 0"}})]}),e.jsx("div",{className:"add-btn",style:{position:"absolute",left:"-28px",top:"50%",transform:"translateY(-50%)",opacity:0,transition:"opacity 0.15s"},children:e.jsx("button",{onClick:()=>ft(I.id),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Jt,{size:14})})})]},I.id))}):e.jsxs("div",{style:{textAlign:"center",marginTop:"120px",color:ve.tm},children:[e.jsx(Dl,{size:36,style:{marginBottom:"12px",opacity:.15}}),e.jsx("div",{style:{fontSize:"13px",marginBottom:"4px"},children:"Select a file from the sidebar"}),e.jsx("div",{style:{fontSize:"11px",color:ve.tm},children:"or create a new one to start editing"})]})})]}),H&&e.jsxs("div",{style:{width:"320px",borderLeft:`1px solid ${ve.border}`,backgroundColor:ve.surface,display:"flex",flexDirection:"column",flexShrink:0},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"12px"},children:["chat","suggest","complete"].map(I=>e.jsx("button",{onClick:()=>{te(I),I==="suggest"&&!St&&!Tt&&jr()},style:{background:"none",border:"none",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:U===I?ve.tp:ve.tm,cursor:"pointer",paddingBottom:"4px",borderBottom:U===I?`2px solid ${ve.violet}`:"2px solid transparent"},children:I==="chat"?"AI Chat":I==="suggest"?"Suggestions":"Autocomplete"},I))}),U==="suggest"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:Tt?e.jsxs("div",{style:{padding:"40px 12px",textAlign:"center"},children:[e.jsx($i,{size:20,style:{color:ve.violet,marginBottom:"10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts},children:"Analyzing your skill..."})]}):St?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{onClick:()=>{wt(null),jr()},style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",fontSize:"10px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx($i,{size:10})," Refresh"]})}),St.names&&St.names.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Gd,{size:10})," Name Suggestions"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:St.names.map((I,G)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:ve.tp,marginBottom:"2px"},children:I.name}),e.jsx("div",{style:{fontSize:"10px",color:ve.tm,lineHeight:"1.4"},children:I.reason})]}),e.jsxs("button",{onClick:()=>lr(I.name),disabled:dt,style:{background:"none",border:`1px solid ${ve.border}`,borderRadius:"4px",color:ve.violet,cursor:"pointer",padding:"3px 8px",fontSize:"10px",fontWeight:600,flexShrink:0,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(_s,{size:9})," Apply"]})]},G))})]}),St.improvements&&St.improvements.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Kd,{size:10})," Content Improvements"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:St.improvements.map((I,G)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ve.tp},children:I.title}),e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:I.priority==="high"?"#ef4444":I.priority==="medium"?"#f59e0b":"#22c55e",backgroundColor:I.priority==="high"?"rgba(239,68,68,0.12)":I.priority==="medium"?"rgba(245,158,11,0.12)":"rgba(34,197,94,0.12)"},children:I.priority})]}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.5"},children:I.description}),I.target_file&&e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ls,{size:9})," ",I.target_file]})]},G))})]}),St.structure&&St.structure.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ix,{size:10})," Structure"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:St.structure.map((I,G)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:ve.violet,backgroundColor:ve.violetG},children:I.action}),e.jsx("span",{style:{fontSize:"11px",color:ve.tp,fontWeight:500,fontFamily:ve.mono},children:I.target})]}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.5"},children:I.suggestion}),I.description&&e.jsx("div",{style:{fontSize:"10px",color:ve.tm,marginTop:"2px",lineHeight:"1.4"},children:I.description})]},G))})]})]}):e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Kd,{size:20,style:{color:ve.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts,marginBottom:"14px"},children:"Get AI-powered suggestions to improve your skill"}),e.jsxs("button",{onClick:()=>jr(),disabled:!we,style:{padding:"8px 16px",borderRadius:"6px",backgroundColor:ve.violet,border:"none",color:"#fff",fontSize:"12px",fontWeight:600,cursor:we?"pointer":"default",display:"inline-flex",alignItems:"center",gap:"6px",opacity:we?1:.4},children:[e.jsx(Nr,{size:12})," Analyze Skill"]})]})}),e.jsx("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ve.border}`},children:e.jsx("div",{style:{display:"flex",gap:"6px"},children:[{label:"Names",type:"names",icon:Gd},{label:"Content",type:"improvements",icon:Kd},{label:"Structure",type:"structure",icon:ix}].map(I=>e.jsxs("button",{onClick:()=>jr(I.type),disabled:Tt||!we,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!we||Tt?.4:1},children:[e.jsx(I.icon,{size:10})," ",I.label]},I.type))})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:V.length===0?e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Ft,{size:20,style:{color:ve.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts,marginBottom:"14px"},children:"Ask AI to help write skill content"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[{label:"Generate This File",action:kr,icon:Cl},{label:"Generate All Files",action:Pr,icon:Ft}].map(I=>e.jsxs("button",{onClick:I.action,disabled:We,style:{background:ve.surfaceEl,border:`1px solid ${ve.border}`,padding:"8px 10px",borderRadius:"6px",color:ve.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:We?.5:1},children:[e.jsx(I.icon,{size:12})," ",We?"Generating...":I.label]},I.label))})]}):e.jsxs(e.Fragment,{children:[V.map((I,G)=>e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"9px",color:ve.tm,marginBottom:"3px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:I.role}),e.jsx("div",{style:{padding:"8px 10px",borderRadius:"6px",fontSize:"12px",lineHeight:"1.6",backgroundColor:I.role==="user"?ve.violetG:ve.surfaceEl,border:`1px solid ${I.role==="user"?"rgba(139,92,246,0.15)":ve.border}`,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:I.content})]},G)),B&&e.jsx("div",{style:{fontSize:"11px",color:ve.tm,padding:"8px",fontStyle:"italic"},children:"Thinking..."}),e.jsx("div",{ref:ut})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[e.jsxs("button",{onClick:kr,disabled:We||!d,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!d||We?.4:1},children:[e.jsx(Cl,{size:10})," Generate File"]}),e.jsxs("button",{onClick:Pr,disabled:We,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:We?.4:1},children:[e.jsx(Ft,{size:10})," Generate All"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...vl,paddingRight:"36px",fontSize:"12px"},placeholder:"Ask AI for help...",value:Q,onChange:I=>Y(I.target.value),onKeyDown:I=>I.key==="Enter"&&!I.shiftKey&&Zr(),disabled:B}),e.jsx("button",{onClick:Zr,disabled:B||!Q.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:Q.trim()?ve.violet:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(wh,{size:14})})]})]})]})]}),p.visible&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>f({...p,visible:!1})}),e.jsxs("div",{style:{position:"fixed",left:p.x,top:p.y,zIndex:100,backgroundColor:ve.surfaceEl,border:`1px solid ${ve.borderS}`,borderRadius:"8px",padding:"4px",width:"200px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{padding:"6px 10px",fontSize:"9px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.06em",fontWeight:600},children:"Block Type"}),H6.map(I=>e.jsxs("div",{onClick:()=>Kt(p.blockId,I.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",fontSize:"12px",cursor:"pointer",borderRadius:"4px",color:ve.ts,transition:"background 0.1s"},onMouseEnter:G=>G.currentTarget.style.backgroundColor="rgba(255,255,255,0.05)",onMouseLeave:G=>G.currentTarget.style.backgroundColor="transparent",children:[e.jsx(I.icon,{size:13,style:{color:ve.tm}}),I.label]},I.id))]})]})]}),z&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},children:e.jsxs("div",{style:{width:"580px",backgroundColor:ve.surface,border:`1px solid ${ve.border}`,borderRadius:"12px",overflow:"hidden",boxShadow:"0 20px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600},children:"Choose a template"}),e.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:ve.ts},children:"Start with a pre-built structure or blank slate"})]}),!u&&e.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(bt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",maxHeight:"380px",overflowY:"auto"},children:[e.jsxs("div",{onClick:()=>Cr("blank"),style:{padding:"14px",border:`1px dashed ${ve.borderS}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:I=>{I.currentTarget.style.borderColor=ve.violet,I.currentTarget.style.borderStyle="solid"},onMouseLeave:I=>{I.currentTarget.style.borderColor=ve.borderS,I.currentTarget.style.borderStyle="dashed"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:"Blank Skill"}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.4"},children:"Start from scratch with just SKILL.md"})]}),(P||[]).map(I=>e.jsxs("div",{onClick:()=>Cr(I.slug),style:{padding:"14px",border:`1px solid ${ve.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:G=>{G.currentTarget.style.borderColor=ve.violet,G.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"},onMouseLeave:G=>{G.currentTarget.style.borderColor=ve.border,G.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:I.name}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.4",marginBottom:"6px"},children:I.description||"Pre-built skill structure"}),e.jsxs("div",{style:{fontSize:"10px",color:ve.tm},children:[I.totalFiles," files"]})]},I.slug))]}),e.jsx("div",{style:{padding:"12px 24px",borderTop:`1px solid ${ve.border}`,backgroundColor:"rgba(0,0,0,0.15)",textAlign:"center"},children:e.jsx("button",{onClick:()=>u?i(o?`/agents/${o}`:"/skills"):E(!1),style:{background:"none",border:"none",color:ve.tm,fontSize:"11px",cursor:"pointer"},children:u?"Cancel and go back":"Close"})})]})}),be&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:ve.danger,color:"#fff",padding:"8px 18px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:300,fontSize:"12px"},children:[e.jsx(Ci,{size:14}),be,e.jsx("button",{onClick:()=>oe(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex",marginLeft:"4px"},children:e.jsx(bt,{size:12})})]}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @media (max-width: 900px) {
          .ai-panel { display: none !important; }
        }
      `})]})}const J={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace',font:'"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif'},U6=`
@keyframes fadeInUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
@keyframes spin { from { transform:rotate(0deg); } to { transform:rotate(360deg); } }
@keyframes pulse { 0%,100% { transform:scale(1); opacity:0.3; } 50% { transform:scale(1.25); opacity:0.6; } }
@keyframes cursorBlink { 0%,100% { opacity:1; } 50% { opacity:0; } }
@keyframes nodeGlow { 0%,100% { filter:drop-shadow(0 0 6px rgba(139,92,246,0.4)); } 50% { filter:drop-shadow(0 0 14px rgba(139,92,246,0.8)); } }
@keyframes drawPath {
  from { stroke-dashoffset: var(--path-len); }
  to { stroke-dashoffset: 0; }
}
@keyframes quillWrite {
  0% { transform:translateX(0) rotate(0deg); }
  25% { transform:translateX(3px) rotate(-3deg); }
  50% { transform:translateX(0) rotate(0deg); }
  75% { transform:translateX(-2px) rotate(2deg); }
  100% { transform:translateX(0) rotate(0deg); }
}
@keyframes constellationBirth {
  0% { opacity:0; transform:scale(0); }
  60% { opacity:1; transform:scale(1.08); }
  100% { opacity:1; transform:scale(1); }
}
@keyframes constellationBreathe {
  0%,100% { filter:drop-shadow(0 0 12px rgba(139,92,246,0.3)); }
  50% { filter:drop-shadow(0 0 24px rgba(139,92,246,0.7)); }
}
@keyframes constellationDrawConn {
  from { stroke-dashoffset: 300; }
  to { stroke-dashoffset: 0; }
}
@keyframes ambientRing {
  0% { r:60; opacity:0; }
  40% { opacity:0.12; }
  100% { r:200; opacity:0; }
}
@keyframes particleDrift {
  0% { opacity:0; r:1; }
  15% { opacity:0.5; }
  100% { opacity:0; r:0; transform:translate(var(--dx),var(--dy)); }
}
`;function V6({text:t,onComplete:i,speed:s=25}){const[o,u]=L.useState(""),S=L.useRef(i);S.current=i,L.useEffect(()=>{u("");let l=0;const c=setInterval(()=>{var x;l++,u(t.slice(0,l)),l>=t.length&&(clearInterval(c),(x=S.current)==null||x.call(S))},s);return()=>clearInterval(c)},[t,s]);const b=o.length<t.length;return e.jsxs("span",{style:{lineHeight:"1.7"},children:[o,b&&e.jsx("span",{style:{display:"inline-block",width:"2px",height:"1.1em",backgroundColor:J.violet,marginLeft:"2px",verticalAlign:"middle",animation:"cursorBlink 0.8s infinite"}})]})}function vs({label:t,selected:i,onClick:s,subtitle:o,multi:u,color:S}){const[b,l]=L.useState(!1),c=S||J.violet;return e.jsxs("button",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"3px",padding:o?"10px 16px":"8px 16px",backgroundColor:i?`${c}22`:b?J.surfaceEl:J.surface,border:`1px solid ${i?c:b?J.borderS:J.border}`,borderRadius:u?"8px":"100px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",minWidth:o?"170px":"auto",boxShadow:i?`0 0 12px ${c}20`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},children:[u&&e.jsx("div",{style:{width:15,height:15,borderRadius:3,flexShrink:0,border:`1.5px solid ${i?c:J.tm}`,backgroundColor:i?c:"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s ease"},children:i&&e.jsx(or,{size:9,color:"#fff",strokeWidth:3.5})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:i?J.tp:J.ts},children:t}),!u&&i&&e.jsx(or,{size:12,color:c,style:{marginLeft:"auto"}})]}),o&&e.jsx("span",{style:{fontSize:"11px",color:J.tm,marginLeft:u?"23px":0},children:o})]})}const sh=[{id:"name",label:"Nom",Icon:Cn},{id:"role",label:"Rle",Icon:Yl},{id:"skills",label:"Comptences",Icon:Nr},{id:"comm",label:"Communication",Icon:w0},{id:"method",label:"Mthodologie",Icon:Sh},{id:"tools",label:"Outils",Icon:z0},{id:"model",label:"Modle",Icon:qn},{id:"autonomy",label:"Autonomie",Icon:j0},{id:"enhance",label:"IA Enhance",Icon:Ft},{id:"complete",label:"Termin",Icon:or}];function K6(){const t=Wt(),i=L.useRef(null),s=L.useRef(null),[o,u]=L.useState(0),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[x,v]=L.useState(!1),[d,y]=L.useState(null),[_,j]=L.useState(!1),[C,h]=L.useState(null),[p,f]=L.useState([]),[g,w]=L.useState(""),[R,A]=L.useState(null),[z,E]=L.useState([]),[P,O]=L.useState([]),[H,K]=L.useState(null),[U,te]=L.useState(null),[V,de]=L.useState([]),[Q,Y]=L.useState(null),[B,D]=L.useState(null),[M,W]=L.useState(null),[pe,me]=L.useState(""),[we,Re]=L.useState([]),[X,F]=L.useState([]),[be,oe]=L.useState(null),[De,ee]=L.useState(!1),[ke,he]=L.useState(""),[Ie,Oe]=L.useState(null),[Pe,Ee]=L.useState(""),[We,Z]=L.useState(!1),[le,Fe]=L.useState(null),[Ze,et]=L.useState("input"),[dt,Vt]=L.useState(!1),[St,wt]=L.useState(!1),Tt=L.useRef(null),[mt,Lt]=L.useState([]);L.useEffect(()=>{(async()=>{try{const[I,G]=await Promise.all([ae("/api/personaboarding/options"),ae("/api/personaboarding/roles")]);h(I),f(G)}catch(I){console.error("Failed to load personaboarding options:",I)}})()},[]),L.useEffect(()=>{var I;(I=i.current)==null||I.scrollIntoView({behavior:"smooth",block:"end"})},[mt,S,o]),L.useEffect(()=>{o===0&&!S&&setTimeout(()=>{var I;return(I=s.current)==null?void 0:I.focus()},100)},[o,S]);async function ut(){var I;if(Pe.trim()){Z(!0),et("analyzing"),y(null);try{const G=await ae("/api/personaboarding/linkedin-analyze",{method:"POST",body:JSON.stringify({url:Pe.trim()})});Fe(G.suggestions),(I=G.suggestions)!=null&&I.displayName&&w(G.suggestions.displayName),et("results")}catch(G){y(G.message||"Impossible d'analyser ce profil LinkedIn"),et("input")}Z(!1)}}function Mr(){et("done"),Oe("linkedin-done"),le!=null&&le.tools&&de(le.tools)}function rr(){Oe("manual")}async function Ei(I){var _e;const G=(_e=I.target.files)==null?void 0:_e[0];if(G){wt(!0);try{const je=new FormData;je.append("image",G);const Ke=await(await fetch("/api/personaboarding/upload-profile-pic",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:je})).json();Ke.profileImageUrl&&Fe(He=>({...He,profileImageUrl:Ke.profileImageUrl}))}catch(je){console.error("Profile pic upload failed:",je)}wt(!1)}}async function hr(I){var G;if(((G=le==null?void 0:le.skills)==null?void 0:G.length)>0){const _e=le.skills;E(_e),O(_e.map(je=>je.name));return}Vt(!0);try{const _e=await ae("/api/personaboarding/ai-suggest-skills",{method:"POST",body:JSON.stringify({role:I,linkedinData:null})});E(_e.skills||[])}catch{const _e=p.find(je=>je.id===I);E((_e==null?void 0:_e.skills)||[])}Vt(!1)}const pr=!!le,Cr=[pr?"LinkedIn m'a parl de vous. Confirmez le nom de votre agent ?":"Commenons la gense. Quel sera le nom de votre agent ?",pr?`${g} est un beau nom. Votre profil suggre un rle. Lequel vous correspond ?`:`Je m'appellerai ${g}. Quel rle souhaitez-vous me confier ?`,pr?`En tant que ${(R==null?void 0:R.label)||"..."}, voici les comptences suggres par votre profil. Validez ou personnalisez.`:`En tant que ${(R==null?void 0:R.label)||"..."}, j'aurai besoin de comptences spcifiques. Quelles sont les miennes ?`,`Mes ${P.length} comptences sont acquises. Comment souhaitez-vous que je communique ?`,`Style ${(H==null?void 0:H.label)||"..."} not. Quelle mthodologie de travail me guidera ?`,`Mthodologie ${(U==null?void 0:U.label)||"..."} intgre. De quels outils aurai-je besoin ?`,"Mes outils sont configurs. Quel cerveau IA souhaitez-vous me donner ?",`Je fonctionnerai avec ${(Q==null?void 0:Q.label)||"..."}. Quel sera mon degr de libert ?`,"Configuration termine. L'intelligence artificielle analyse votre vision et compose mon essence...",pe||`${g} est prt. Son existence commence maintenant.`];function ne(I){Lt(G=>[...G,I]),b(!0),u(G=>G+1)}function Ne(){const I=g.trim();I&&(w(I),ne(`Je vais crer un agent qui s'appellera ${I}.`))}function Ge(I){A(I),O([]),ne(`${g} sera ${I.label}.`),hr(I.id)}function ct(){if(P.length===0)return;const I=P.join(", ");ne(`${g} matrisera ${I}.`)}function yt(I){K(I),ne(`${g} communiquera de manire ${I.label.toLowerCase()}.`)}function Kt(I){te(I),ne(`${g} travaillera selon la mthodologie ${I.label}.`)}function ft(){if(V.length===0)return;const I=V.join(", ");ne(`${g} utilisera les outils : ${I}.`)}function qt(I){Y(I),ne(`Son moteur d'intelligence sera ${I.label}.`)}function Br(I){D(I),ne(`Son niveau d'autonomie sera ${I.label.toLowerCase()}.`)}async function Hr(){v(!0),y(null);try{const I=await ae("/api/personaboarding/ai-enhance",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:P,skillsData:z,commStyle:H.id,methodology:U.id,selectedTools:V,model:Q.id,autonomy:B.id})});W(I.gptData),me(I.narrative),v(!1),ne(`L'IA a parl : "${I.narrative}"`)}catch{const G=`Ainsi naquit ${g}, prt  transformer chaque dfi en opportunit.`;me(G),v(!1),ne(`L'IA a parl : "${G}"`)}}async function Zr(){var I;c(!0),y(null);try{const G=await ae("/api/personaboarding/complete",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:P,customSkills:we,skillsData:z,commStyle:H.id,methodology:U.id,selectedTools:V,model:Q.id,autonomy:B.id,gptData:M||null,profileImageUrl:(le==null?void 0:le.profileImageUrl)||null})});oe(G.agent);const _e=((I=p.find(ye=>ye.id===R.id))==null?void 0:I.skills)||[],je=P.map(ye=>{const Ke=_e.find(vt=>vt.name===ye),He=we.find(vt=>vt.name===ye);return{name:ye,color:(Ke==null?void 0:Ke.color)||(He==null?void 0:He.color)||J.violet,category:(Ke==null?void 0:Ke.category)||(He==null?void 0:He.category)||""}});F(je),j(!0)}catch(G){y(G.message||"Erreur lors de la cration"),c(!1)}}function kr(){return[g||null,(R==null?void 0:R.label)||null,P.length>0?`${P.length} skills`:null,(H==null?void 0:H.label)||null,(U==null?void 0:U.label)||null,V.length>0?`${V.length} outils`:null,(Q==null?void 0:Q.label)||null,(B==null?void 0:B.label)||null,M?"Enhanced":null,_?"Cr":null]}function Pr(){return e.jsxs("div",{style:{animation:"fadeInUp 0.5s ease"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:J.tp,marginBottom:"8px",letterSpacing:"-0.02em"},children:"Comment souhaitez-vous crer votre agent ?"}),e.jsx("p",{style:{fontSize:"13px",color:J.tm,marginBottom:"28px",lineHeight:"1.6"},children:"Importez votre profil LinkedIn pour des suggestions intelligentes, ou crez manuellement."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{Oe("linkedin"),et("input")},onMouseEnter:I=>{I.currentTarget.style.backgroundColor="#1e3a5f20",I.currentTarget.style.borderColor="#3B82F640",I.currentTarget.style.boxShadow="0 0 20px rgba(59,130,246,0.1)"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor=J.surface,I.currentTarget.style.borderColor=J.border,I.currentTarget.style.boxShadow="none"},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:J.surface,border:`1px solid ${J.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease",boxShadow:"none"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:"#0A66C215",border:"1px solid #0A66C230",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Co,{size:22,color:"#0A66C2"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:J.tp,marginBottom:"4px"},children:"Importer depuis LinkedIn"}),e.jsx("div",{style:{fontSize:"12px",color:J.ts,lineHeight:"1.5"},children:"Collez votre URL LinkedIn  l'IA analysera votre profil et suggrera nom, rle, comptences et plus."})]}),e.jsx(_s,{size:18,color:J.tm,style:{flexShrink:0}})]}),e.jsxs("button",{onClick:rr,onMouseEnter:I=>{I.currentTarget.style.backgroundColor=J.surfaceEl,I.currentTarget.style.borderColor=J.borderS},onMouseLeave:I=>{I.currentTarget.style.backgroundColor=J.surface,I.currentTarget.style.borderColor=J.border},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:J.surface,border:`1px solid ${J.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:J.violetG,border:`1px solid ${J.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(qd,{size:20,color:J.violet})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:J.tp,marginBottom:"4px"},children:"Cration manuelle"}),e.jsx("div",{style:{fontSize:"12px",color:J.ts,lineHeight:"1.5"},children:"Configurez chaque aspect de votre agent tape par tape, en toute libert."})]}),e.jsx(_s,{size:18,color:J.tm,style:{flexShrink:0}})]})]})]})}function ei(){var I,G,_e,je;return e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[Ze==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:"#60A5FA",fontSize:"12px",fontWeight:600},children:[e.jsx(Co,{size:15})," Import LinkedIn"]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:J.tp,marginBottom:"6px"},children:"Collez votre URL LinkedIn"}),e.jsx("p",{style:{fontSize:"13px",color:J.tm,marginBottom:"20px",lineHeight:"1.5"},children:"L'IA analysera les mtadonnes de votre profil pour suggrer automatiquement les champs."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{autoFocus:!0,style:{backgroundColor:J.bg,border:`1px solid ${J.borderS}`,borderRadius:"8px",padding:"12px 16px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:J.font,transition:"border-color 0.2s"},onFocus:ye=>ye.target.style.borderColor="#3B82F6",onBlur:ye=>ye.target.style.borderColor=J.borderS,placeholder:"https://linkedin.com/in/votre-profil",value:Pe,onChange:ye=>Ee(ye.target.value),onKeyDown:ye=>ye.key==="Enter"&&ut()}),e.jsxs("button",{disabled:!Pe.trim()||!Pe.includes("linkedin.com/in/"),onClick:ut,style:{backgroundColor:Pe.includes("linkedin.com/in/")?"#3B82F6":J.surfaceEl,color:"#fff",border:"none",borderRadius:"8px",padding:"0 20px",fontSize:"13px",fontWeight:600,cursor:Pe.includes("linkedin.com/in/")?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",fontFamily:J.font},children:["Analyser ",e.jsx(Do,{size:13})]})]}),d&&e.jsx("p",{style:{fontSize:"12px",color:J.danger,marginTop:"10px"},children:d}),e.jsx("button",{onClick:rr,style:{background:"none",border:"none",color:J.tm,fontSize:"12px",cursor:"pointer",marginTop:"16px",padding:0,fontFamily:J.font,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Passer et crer manuellement"})]}),Ze==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"40px 20px",animation:"fadeInUp 0.4s ease"},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",backgroundColor:"#1e3a5f20",border:"2px solid #3B82F640",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Co,{size:28,color:"#3B82F6",style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:J.tp,marginBottom:"6px"},children:"Analyse de votre profil LinkedIn..."}),e.jsx("div",{style:{fontSize:"12px",color:J.tm},children:"Extraction des mtadonnes et gnration des suggestions"})]}),e.jsx(Hn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}})]}),Ze==="results"&&le&&e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:J.success,fontSize:"13px",fontWeight:600},children:[e.jsx(or,{size:15})," Profil analys avec succs"]}),le.summary&&e.jsxs("div",{style:{padding:"14px 18px",backgroundColor:J.surface,borderRadius:"10px",border:`1px solid ${J.border}`,marginBottom:"20px",fontSize:"13px",color:J.ts,lineHeight:"1.6",fontStyle:"italic"},children:['"',le.summary,'"']}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"14px 18px",backgroundColor:J.surface,borderRadius:"10px",border:`1px solid ${le.profileImageUrl?"#3B82F630":J.border}`,marginBottom:"4px"},children:[le.profileImageUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:le.profileImageUrl,alt:"Profile",style:{width:"56px",height:"56px",borderRadius:"14px",objectFit:"cover",border:"2px solid #3B82F640",boxShadow:"0 4px 12px rgba(59,130,246,0.15)"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:J.tp},children:le.displayName}),e.jsx("div",{style:{fontSize:"11px",color:"#60A5FA",marginTop:"2px"},children:"Photo de profil importe"})]}),e.jsx("button",{onClick:()=>{var ye;return(ye=Tt.current)==null?void 0:ye.click()},style:{background:"none",border:`1px solid ${J.border}`,borderRadius:"6px",padding:"4px 10px",color:J.ts,fontSize:"11px",cursor:"pointer",fontFamily:J.font,transition:"all 0.2s"},children:"Changer"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var ye;return(ye=Tt.current)==null?void 0:ye.click()},disabled:St,style:{width:"56px",height:"56px",borderRadius:"14px",backgroundColor:"#3B82F610",border:"2px dashed #3B82F640",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"},children:St?e.jsx(Hn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}}):e.jsx(X2,{size:20,color:"#3B82F6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:J.tp},children:"Ajouter la photo de profil"}),e.jsx("div",{style:{fontSize:"11px",color:J.tm,marginTop:"2px",lineHeight:"1.4"},children:"Clic droit sur votre photo LinkedIn  Enregistrer, puis uploadez-la ici"})]}),e.jsxs("button",{onClick:()=>{var ye;return(ye=Tt.current)==null?void 0:ye.click()},disabled:St,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 14px",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:J.font,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",flexShrink:0},children:[e.jsx(L0,{size:13})," Upload"]})]}),e.jsx("input",{ref:Tt,type:"file",accept:"image/*",style:{display:"none"},onChange:Ei})]}),[{label:"Nom",value:le.displayName,icon:e.jsx(Cn,{size:13})},{label:"Rle",value:(I=le.role)==null?void 0:I.replace(/-/g," ").replace(/\b\w/g,ye=>ye.toUpperCase()),icon:e.jsx(Yl,{size:13})},{label:"Comptences",value:`${((G=le.skills)==null?void 0:G.length)||0} dtectes`,icon:e.jsx(Nr,{size:13})},{label:"Style",value:((_e=le.commStyle)==null?void 0:_e.charAt(0).toUpperCase())+((je=le.commStyle)==null?void 0:je.slice(1)),icon:e.jsx(w0,{size:13})}].map((ye,Ke)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 14px",backgroundColor:J.surface,borderRadius:"8px",border:`1px solid ${J.border}`},children:[e.jsx("div",{style:{color:"#3B82F6"},children:ye.icon}),e.jsx("span",{style:{fontSize:"11px",color:J.tm,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",minWidth:"90px"},children:ye.label}),e.jsx("span",{style:{fontSize:"13px",color:J.tp,fontWeight:500},children:ye.value})]},Ke))]}),e.jsx("p",{style:{fontSize:"11px",color:J.tm,marginBottom:"16px",lineHeight:"1.5"},children:"Ces suggestions pr-rempliront les tapes suivantes. Vous pourrez modifier ou rejeter chaque suggestion."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:Mr,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:J.font,transition:"all 0.2s"},children:["Continuer avec ces suggestions ",e.jsx(_s,{size:14})]}),e.jsx("button",{onClick:rr,style:{backgroundColor:J.surface,color:J.ts,border:`1px solid ${J.border}`,borderRadius:"8px",padding:"12px 18px",fontSize:"13px",fontWeight:500,cursor:"pointer",fontFamily:J.font,transition:"all 0.2s"},children:"Ignorer"})]})]})]})}function fi({label:I}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"8px 14px",backgroundColor:"rgba(59,130,246,0.08)",borderRadius:"8px",border:"1px solid rgba(59,130,246,0.12)",fontSize:"12px",color:"#60A5FA"},children:[e.jsx(Co,{size:13})," Suggestion : ",e.jsx("strong",{style:{color:"#93C5FD"},children:I})]})}function jr(){var G,_e,je;if(S)return null;const I={animation:"fadeInUp 0.35s ease"};switch(o){case 0:return e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",...I},children:[e.jsx("input",{ref:s,autoFocus:!0,style:{backgroundColor:J.bg,border:`1px solid ${J.borderS}`,borderRadius:"6px",padding:"11px 14px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:J.font,transition:"border-color 0.2s"},onFocus:ye=>ye.target.style.borderColor=J.violet,onBlur:ye=>ye.target.style.borderColor=J.borderS,placeholder:"Nom de l'agent...",value:g,onChange:ye=>w(ye.target.value),onKeyDown:ye=>ye.key==="Enter"&&Ne()}),e.jsxs("button",{disabled:!g.trim(),onClick:Ne,style:{backgroundColor:g.trim()?J.tp:J.surfaceEl,color:g.trim()?J.bg:J.tm,border:"none",borderRadius:"6px",padding:"0 22px",fontSize:"12px",fontWeight:600,cursor:g.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:["Continuer ",e.jsx(_s,{size:14})]})]});case 1:{if(!C)return e.jsx(Wn,{});const ye=[...C.roles];if(le!=null&&le.role){const He=le.role;ye.some(vt=>vt.id===He)||ye.unshift({id:He,label:He.replace(/-/g," ").replace(/\b\w/g,vt=>vt.toUpperCase()),skillCount:"IA",_linkedin:!0})}const Ke=()=>{const He=ke.trim();if(!He)return;const vt=He.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");Ge({id:vt,label:He,skillCount:"IA"}),he("")};return e.jsxs("div",{style:{marginTop:"20px",...I},children:[(le==null?void 0:le.role)&&e.jsx(fi,{label:((G=ye.find(He=>He.id===le.role))==null?void 0:G.label)||le.role.replace(/-/g," ").replace(/\b\w/g,He=>He.toUpperCase())}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:ye.map(He=>e.jsx(vs,{label:He.label,subtitle:He._linkedin?"Suggestion LinkedIn":`${He.skillCount} comptences`,selected:(R==null?void 0:R.id)===He.id,onClick:()=>Ge(He),color:(le==null?void 0:le.role)===He.id||He._linkedin?"#3B82F6":void 0},He.id))}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px",padding:"12px 14px",backgroundColor:J.surface,borderRadius:"10px",border:`1px solid ${J.border}`},children:[e.jsx("input",{style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"13px",flex:1,outline:"none",fontFamily:J.font},placeholder:"Ou saisissez un rle personnalis...",value:ke,onChange:He=>he(He.target.value),onKeyDown:He=>He.key==="Enter"&&Ke()}),e.jsx("button",{disabled:!ke.trim(),onClick:Ke,style:{backgroundColor:ke.trim()?J.violet:"transparent",color:ke.trim()?"#fff":J.tm,border:"none",borderRadius:"6px",padding:"6px 14px",fontSize:"12px",fontWeight:600,cursor:ke.trim()?"pointer":"default",transition:"all 0.2s",fontFamily:J.font},children:"Valider"})]})]})}case 2:return dt?e.jsx("div",{style:{marginTop:"20px",...I},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:J.surface,borderRadius:"10px",border:`1px solid ${J.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:J.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ft,{size:16,color:J.violet,style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:J.tp,fontWeight:500},children:"L'IA gnre vos comptences..."}),e.jsx("div",{style:{fontSize:"11px",color:J.tm,marginTop:"2px"},children:"Analyse du profil et du rle en cours"})]}),e.jsx(Hn,{size:16,color:J.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]})}):z.length===0?e.jsx(Wn,{text:"Chargement des comptences..."}):e.jsxs("div",{style:{marginTop:"20px",...I},children:[e.jsxs("div",{style:{fontSize:"12px",color:J.ts,marginBottom:"16px",lineHeight:"1.6",padding:"12px 16px",backgroundColor:J.surface,borderRadius:"8px",border:`1px solid ${J.border}`},children:["Cliquez sur les nodes dans la constellation pour connecter des comptences  ",g,". Vous pouvez aussi crer vos propres skills."]}),e.jsxs("div",{style:{width:"100%",minHeight:"420px",marginBottom:"16px",borderRadius:"12px",border:`1px solid ${J.border}`,backgroundColor:"#0a0a0a",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${J.border} 1px, transparent 1px)`,backgroundSize:"28px 28px",opacity:.4,pointerEvents:"none"}}),e.jsx(G6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:z,selectedSkills:P,customSkills:we,onToggleSkill:ye=>{O(Ke=>Ke.includes(ye)?Ke.filter(He=>He!==ye):[...Ke,ye])},onAddCustomSkill:ye=>{Re(Ke=>[...Ke,ye]),O(Ke=>[...Ke,ye.name])},onRemoveCustomSkill:ye=>{Re(Ke=>Ke.filter(He=>He.name!==ye)),O(Ke=>Ke.filter(He=>He!==ye))}})]}),P.length>0&&e.jsx(Wm,{items:P}),e.jsx(Nm,{disabled:P.length===0,onClick:ct,label:`Valider ${P.length} comptence${P.length>1?"s":""}`})]});case 3:return C?e.jsxs("div",{style:{marginTop:"20px",...I},children:[(le==null?void 0:le.commStyle)&&e.jsx(fi,{label:((_e=C.commStyles.find(ye=>ye.id===le.commStyle))==null?void 0:_e.label)||le.commStyle}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:C.commStyles.map(ye=>e.jsx(vs,{label:ye.label,subtitle:ye.description,selected:(H==null?void 0:H.id)===ye.id,onClick:()=>yt(ye),color:(le==null?void 0:le.commStyle)===ye.id?"#3B82F6":void 0},ye.id))})]}):e.jsx(Wn,{});case 4:return C?e.jsxs("div",{style:{marginTop:"20px",...I},children:[(le==null?void 0:le.methodology)&&e.jsx(fi,{label:((je=C.methodologies.find(ye=>ye.id===le.methodology))==null?void 0:je.label)||le.methodology}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:C.methodologies.map(ye=>e.jsx(vs,{label:ye.label,subtitle:ye.description,selected:(U==null?void 0:U.id)===ye.id,onClick:()=>Kt(ye),color:(le==null?void 0:le.methodology)===ye.id?"#3B82F6":void 0},ye.id))})]}):e.jsx(Wn,{});case 5:return C?e.jsxs("div",{style:{marginTop:"20px",...I},children:[V.length>0&&e.jsx(Wm,{items:V}),["files","system","search","web","agents"].map(ye=>{const Ke=C.tools.filter(He=>He.category===ye);return Ke.length===0?null:e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:J.tm,textTransform:"uppercase",letterSpacing:"0.06em"},children:ye}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"6px"},children:Ke.map(He=>e.jsx(vs,{label:He.label,subtitle:He.description,multi:!0,selected:V.includes(He.id),onClick:()=>{de(vt=>vt.includes(He.id)?vt.filter(Hi=>Hi!==He.id):[...vt,He.id])}},He.id))})]},ye)}),e.jsx(Nm,{disabled:V.length===0,onClick:ft,label:"Valider les outils"})]}):e.jsx(Wn,{});case 6:return C?e.jsx("div",{style:{marginTop:"20px",...I},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:C.models.map(ye=>e.jsx(vs,{label:ye.label,subtitle:ye.description,selected:(Q==null?void 0:Q.id)===ye.id,onClick:()=>qt(ye)},ye.id))})}):e.jsx(Wn,{});case 7:return C?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"20px",...I},children:C.autonomyLevels.map(ye=>e.jsx(vs,{label:ye.label,subtitle:ye.description,selected:(B==null?void 0:B.id)===ye.id,onClick:()=>Br(ye)},ye.id))}):e.jsx(Wn,{});case 8:return e.jsx("div",{style:{marginTop:"24px",...I},children:x?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:J.surface,borderRadius:"10px",border:`1px solid ${J.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:J.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(qd,{size:16,color:J.violet,style:{animation:"quillWrite 1s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:J.tp,fontWeight:500},children:"L'IA compose votre agent..."}),e.jsx("div",{style:{fontSize:"11px",color:J.tm,marginTop:"4px"},children:"Optimisation de la matrice comportementale"})]}),e.jsx(Hn,{size:16,color:J.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]}):e.jsxs("button",{onClick:Hr,style:{backgroundColor:J.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 32px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:J.font,boxShadow:`0 0 24px ${J.violetG}`,transition:"all 0.2s"},onMouseOver:ye=>ye.currentTarget.style.transform="scale(1.02)",onMouseOut:ye=>ye.currentTarget.style.transform="scale(1)",children:[e.jsx(Ft,{size:16})," Lancer l'amlioration IA"]})});case 9:return e.jsx("div",{style:{marginTop:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",...I},children:_?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"14px",padding:"32px",backgroundColor:J.surface,borderRadius:"12px",border:`1px solid ${J.violetM}`,animation:"fadeInUp 0.5s ease",width:"100%"},children:[le!=null&&le.profileImageUrl?e.jsx("img",{src:le.profileImageUrl,alt:g,style:{width:"64px",height:"64px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${J.success}`,boxShadow:`0 0 20px ${J.success}30`}}):e.jsx("div",{style:{width:56,height:56,borderRadius:"50%",backgroundColor:`${J.success}22`,border:`2px solid ${J.success}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(or,{size:28,color:J.success})}),e.jsxs("span",{style:{fontSize:"15px",color:J.tp,fontWeight:600},children:[g," est n"]}),e.jsxs("span",{style:{fontSize:"12px",color:J.ts,textAlign:"center",maxWidth:"280px",lineHeight:"1.6"},children:[X.length," comptences connectes. La constellation se forme..."]}),X.length>0&&e.jsxs("div",{style:{width:"100%",minHeight:"380px",marginTop:"8px",borderRadius:"12px",border:`1px solid ${J.border}`,backgroundColor:"#0a0a0a",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${J.border} 1px, transparent 1px)`,backgroundSize:"28px 28px",opacity:.4,pointerEvents:"none"}}),e.jsx(Y6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:X,onComplete:()=>ee(!0)})]}),De&&e.jsxs("button",{onClick:()=>t(`/agents/${(be==null?void 0:be.name)||g.toLowerCase().replace(/\s+/g,"-")}`),style:{backgroundColor:J.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"12px 28px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:J.font,boxShadow:`0 0 24px ${J.violetG}`,transition:"all 0.2s",animation:"fadeInUp 0.5s ease"},onMouseOver:ye=>ye.currentTarget.style.transform="scale(1.03)",onMouseOut:ye=>ye.currentTarget.style.transform="scale(1)",children:[e.jsx(Ft,{size:15})," Dcouvrir ",g]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Zr,disabled:l,style:{backgroundColor:J.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 36px",fontSize:"15px",fontWeight:600,cursor:l?"wait":"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:J.font,boxShadow:`0 0 30px ${J.violetG}`,transition:"all 0.2s"},onMouseOver:ye=>{l||(ye.currentTarget.style.transform="scale(1.03)")},onMouseOut:ye=>ye.currentTarget.style.transform="scale(1)",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Hn,{size:18,style:{animation:"spin 1s linear infinite"}})," Cration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{size:18})," Crer ",g]})}),d&&e.jsx("span",{style:{fontSize:"12px",color:J.danger},children:d})]})});default:return null}}const lr=sh.length,ti=kr();return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 56px)",backgroundColor:J.bg,color:J.tp,fontFamily:J.font,overflow:"hidden"},children:[e.jsx("style",{children:U6}),e.jsxs("div",{style:{flex:"0 0 55%",display:"flex",flexDirection:"column",borderRight:`1px solid ${J.border}`,padding:"36px 40px",overflow:"hidden"},children:[e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"4px 12px",borderRadius:"100px",backgroundColor:le?"rgba(59,130,246,0.15)":J.violetM,border:`1px solid ${le?"rgba(59,130,246,0.3)":"rgba(139,92,246,0.3)"}`,color:le?"#60A5FA":J.violet,fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"14px"},children:le?e.jsxs(e.Fragment,{children:[e.jsx(Co,{size:11})," LinkedIn Import"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{size:11})," Persona Onboarding"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[(le==null?void 0:le.profileImageUrl)&&Ie==="linkedin-done"&&e.jsx("img",{src:le.profileImageUrl,alt:"",style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${J.violet}40`,boxShadow:`0 4px 16px ${J.violetG}`,flexShrink:0}}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"22px",fontWeight:700,color:J.tp,margin:0,letterSpacing:"-0.02em"},children:"Crer votre agent personnel"}),e.jsx("p",{style:{fontSize:"13px",color:J.tm,marginTop:"6px",margin:"6px 0 0"},children:le?"Validez ou personnalisez chaque suggestion issue de votre profil":"Chaque choix construit l'histoire et les capacits de votre agent"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",opacity:Ie===null||Ie==="linkedin"&&Ze!=="done"?.2:1,transition:"opacity 0.3s"},children:Array.from({length:lr}).map((I,G)=>e.jsx("div",{style:{width:G<=o?"22px":"6px",height:"4px",borderRadius:"100px",backgroundColor:G<o||G===o?J.violet:J.surfaceEl,opacity:G<o?.5:G===o?1:.25,transition:"all 0.4s ease"}},G))}),e.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"8px"},children:[Ie===null?Pr():Ie==="linkedin"&&Ze!=="done"?ei():e.jsxs(e.Fragment,{children:[mt.map((I,G)=>e.jsx("p",{style:{margin:"0 0 10px",fontSize:"15px",lineHeight:"1.7",color:J.ts,opacity:.5,fontStyle:"italic"},children:I},G)),e.jsxs("p",{style:{margin:"0 0 4px",fontSize:"17px",lineHeight:"1.7",color:J.tp,fontWeight:500,display:"flex",gap:o===8?"10px":"0"},children:[o===8&&e.jsx(qd,{size:18,style:{color:J.violet,marginTop:"4px",flexShrink:0}}),e.jsx(V6,{text:Cr[o]||"",onComplete:()=>b(!1)},`step-${o}`)]}),e.jsx("div",{style:{minHeight:"220px",marginTop:"8px"},children:jr()})]}),e.jsx("div",{ref:i,style:{height:"20px"}})]})]}),e.jsxs("div",{style:{flex:"0 0 45%",background:"#0a0a0a",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${J.border} 1px, transparent 1px)`,backgroundSize:"28px 28px",opacity:.4,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"30%",left:"30%",width:"200px",height:"200px",borderRadius:"50%",background:"radial-gradient(circle, rgba(139,92,246,0.08) 0%, transparent 70%)",pointerEvents:"none",filter:"blur(40px)"}}),e.jsx("div",{style:{position:"relative",zIndex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(q6,{currentStep:o,nodeValues:ti})}),!_&&e.jsxs("div",{style:{position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",fontSize:"11px",color:J.tm,fontFamily:J.mono},children:[o+1," / ",lr]})]})]})}function Wn({text:t="Chargement..."}){return e.jsx("span",{style:{color:J.tm,fontSize:"12px",marginTop:"16px",display:"block"},children:t})}function Wm({items:t}){return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",padding:"10px 12px",backgroundColor:J.violetG,borderRadius:"8px",border:`1px solid ${J.violetM}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:J.violet,fontWeight:600,marginRight:"4px",lineHeight:"22px"},children:[t.length," slectionne",t.length>1?"s":""," :"]}),t.map(i=>e.jsx("span",{style:{fontSize:"11px",color:J.tp,backgroundColor:J.violetM,padding:"2px 8px",borderRadius:"100px",fontWeight:500},children:i},i))]})}function Nm({disabled:t,onClick:i,label:s}){return e.jsxs("button",{disabled:t,onClick:i,style:{backgroundColor:t?J.surfaceEl:J.tp,color:t?J.tm:J.bg,border:"none",borderRadius:"6px",padding:"10px 24px",fontSize:"12px",fontWeight:600,cursor:t?"default":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:[s," ",e.jsx(_s,{size:14})]})}function q6({currentStep:t,nodeValues:i}){const S=40+(sh.length-1)*64+40,b=sh.map((l,c)=>({...l,x:90,y:40+c*64}));return e.jsxs("svg",{width:"230",height:S,style:{overflow:"visible"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"pathGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:J.violet}),e.jsx("stop",{offset:"100%",stopColor:"#6D28D9"})]})}),b.map((l,c)=>{if(c>=b.length-1)return null;const x=b[c+1],v=(l.y+x.y)/2,d=`M ${l.x} ${l.y+18} C ${l.x} ${v}, ${x.x} ${v}, ${x.x} ${x.y-18}`,y=t>c;return e.jsxs("g",{children:[e.jsx("path",{d,fill:"none",stroke:J.border,strokeWidth:"1.5"}),y&&e.jsx("path",{d,fill:"none",stroke:"url(#pathGrad)",strokeWidth:"2",strokeDasharray:"120",style:{"--path-len":120,animation:"drawPath 0.8s ease-out forwards"}})]},`p-${c}`)}),b.map((l,c)=>{const x=t===c,v=t>c,d=l.Icon,y=i[c];return e.jsxs("g",{children:[x&&e.jsx("circle",{cx:l.x,cy:l.y,r:"22",fill:"none",stroke:J.violet,strokeWidth:"1",opacity:"0.4",style:{transformOrigin:`${l.x}px ${l.y}px`,animation:"pulse 2s ease-in-out infinite"}}),e.jsx("circle",{cx:l.x,cy:l.y,r:"18",fill:v?J.violet:x?J.surfaceEl:J.surface,stroke:v||x?J.violet:J.border,strokeWidth:x?2:1.5,style:v?{animation:"nodeGlow 3s ease-in-out infinite"}:{}}),e.jsx("foreignObject",{x:l.x-9,y:l.y-9,width:"18",height:"18",children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:v?"#fff":x?J.violet:J.tm,width:"100%",height:"100%"},children:e.jsx(d,{size:13})})}),e.jsx("text",{x:l.x+30,y:l.y+4,style:{fontSize:"11px",fontWeight:x?600:400,fill:x?J.tp:v?J.ts:J.tm,fontFamily:J.font},children:l.label}),v&&y&&e.jsx("text",{x:l.x+30,y:l.y+16,style:{fontSize:"9px",fill:J.violet,fontFamily:J.mono,opacity:.7},children:y.length>20?y.slice(0,20)+"":y})]},l.id)})]})}function G6({agentName:t,roleLabel:i,skills:s,selectedSkills:o,customSkills:u,onToggleSkill:S,onAddCustomSkill:b,onRemoveCustomSkill:l}){const[c,x]=L.useState(""),[v,d]=L.useState(null),y=420,_=y/2,j=y/2,C=148,h=[...s.map(w=>({...w,custom:!1})),...u.map(w=>({...w,custom:!0}))],p=h.length,f=h.map((w,R)=>{const A=(R*360/Math.max(p,1)-90)*(Math.PI/180),z=_+C*Math.cos(A),E=j+C*Math.sin(A),P=A+.2,O=C*.45,H=_+O*Math.cos(P),K=j+O*Math.sin(P),U=`M ${_} ${j} Q ${H} ${K} ${z} ${E}`,te=o.includes(w.name);return{...w,x:z,y:E,path:U,isSelected:te,index:R}});function g(){const w=c.trim();w&&(h.some(R=>R.name.toLowerCase()===w.toLowerCase())||(b({name:w,color:"#F59E0B",category:"custom",description:"Comptence personnalise"}),x("")))}return e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsxs("svg",{viewBox:`0 0 ${y} ${y}`,style:{width:"85%",maxHeight:"75%",overflow:"visible",pointerEvents:"none"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"icGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),e.jsx("circle",{cx:_,cy:j,r:C,fill:"none",stroke:J.border,strokeWidth:"1",strokeDasharray:"4 6",opacity:"0.5"}),f.map((w,R)=>e.jsx("path",{d:w.path,fill:"none",stroke:w.isSelected?w.color||J.violet:J.border,strokeWidth:w.isSelected?1.8:.8,strokeOpacity:w.isSelected?.5:.15,style:{transition:"all 0.5s ease"}},`ic-conn-${R}`)),f.map((w,R)=>{const A=w.x>_,z=v===R,E=w.isSelected,P=w.color||J.violet;return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all",animation:`constellationBirth 0.5s ease-out forwards ${R*80}ms`,opacity:0,transformOrigin:`${w.x}px ${w.y}px`},onMouseEnter:()=>d(R),onMouseLeave:()=>d(null),onClick:()=>w.custom&&E?l(w.name):S(w.name),children:[(E||z)&&e.jsx("circle",{cx:w.x,cy:w.y,r:"28",fill:P,fillOpacity:E?.1:.05,style:{transition:"all 0.3s"}}),e.jsx("circle",{cx:w.x,cy:w.y,r:"20",fill:E?`${P}22`:z?J.surfaceEl:J.surface,stroke:E?P:z?J.borderS:J.border,strokeWidth:E?2.5:1.5,style:{transition:"all 0.3s ease"}}),E&&e.jsx("circle",{cx:w.x,cy:w.y,r:"5",fill:P,style:{transition:"all 0.3s"}}),!E&&e.jsx("circle",{cx:w.x,cy:w.y,r:"2",fill:J.tm}),w.custom&&e.jsx("text",{x:w.x,y:w.y-24,textAnchor:"middle",fill:J.warning,style:{fontSize:"8px",fontWeight:700,fontFamily:J.mono},children:"CUSTOM"}),e.jsx("text",{x:w.x+(A?28:-28),y:w.y+1,textAnchor:A?"start":"end",fill:E?J.tp:z?J.ts:J.tm,style:{fontSize:"10px",fontWeight:E?600:400,fontFamily:J.font,transition:"all 0.2s",pointerEvents:"none"},children:w.name}),e.jsx("text",{x:w.x+(A?28:-28),y:w.y+13,textAnchor:A?"start":"end",fill:J.tm,style:{fontSize:"7px",textTransform:"uppercase",fontFamily:J.mono,letterSpacing:"0.05em",pointerEvents:"none"},children:w.category})]},`ic-n-${R}`)}),e.jsxs("g",{children:[e.jsx("circle",{cx:_,cy:j,r:"44",fill:J.violet,fillOpacity:"0.06"}),e.jsx("circle",{cx:_,cy:j,r:"38",fill:J.bg,stroke:J.violet,strokeWidth:"2.5",filter:"url(#icGlow)"}),e.jsx("text",{x:_,y:j-4,textAnchor:"middle",fill:J.tp,style:{fontSize:"13px",fontWeight:700,fontFamily:J.font},children:t}),e.jsx("text",{x:_,y:j+11,textAnchor:"middle",fill:J.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:J.mono,letterSpacing:"0.04em",opacity:.8},children:i}),e.jsx("circle",{cx:_+30,cy:j-28,r:"12",fill:J.violet}),e.jsx("text",{x:_+30,y:j-24,textAnchor:"middle",fill:"#fff",style:{fontSize:"10px",fontWeight:700,fontFamily:J.mono},children:o.length})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{value:c,onChange:w=>x(w.target.value),onKeyDown:w=>w.key==="Enter"&&g(),placeholder:"+ Ajouter une comptence...",style:{backgroundColor:J.surface,border:`1px solid ${J.border}`,borderRadius:"100px",padding:"8px 16px",color:J.tp,fontSize:"12px",fontFamily:J.font,outline:"none",width:"200px",transition:"border-color 0.2s"},onFocus:w=>w.target.style.borderColor=J.violet,onBlur:w=>w.target.style.borderColor=J.border}),e.jsx("button",{onClick:g,disabled:!c.trim(),style:{backgroundColor:c.trim()?J.violet:J.surfaceEl,color:"#fff",border:"none",borderRadius:"100px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c.trim()?"pointer":"default",fontSize:"16px",fontWeight:700,transition:"all 0.2s"},children:"+"})]})]})}function Y6({agentName:t,roleLabel:i,skills:s=[],onComplete:o}){const c=L.useRef(o);c.current=o,L.useEffect(()=>{const v=s.length*350+1500,d=setTimeout(()=>{var y;return(y=c.current)==null?void 0:y.call(c)},v);return()=>clearTimeout(d)},[s.length]);const x=s.map((v,d)=>{const y=(d*360/s.length-90)*(Math.PI/180),_=210+150*Math.cos(y),j=210+150*Math.sin(y),C=y+.25,h=150*.5,p=210+h*Math.cos(C),f=210+h*Math.sin(C),g=`M 210 210 Q ${p} ${f} ${_} ${j}`;return{...v,x:_,y:j,path:g,delay:d*350}});return e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{viewBox:"0 0 420 420",style:{width:"88%",height:"88%",overflow:"visible"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"conGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),[0,1,2].map(v=>e.jsx("circle",{cx:210,cy:210,r:"80",fill:"none",stroke:J.violet,strokeWidth:"0.8",opacity:"0",style:{transformOrigin:"210px 210px",animation:`ambientRing ${3+v}s ease-out infinite ${v*1.2}s`}},`ring-${v}`)),x.map((v,d)=>e.jsx("path",{d:v.path,fill:"none",stroke:v.color||J.violet,strokeWidth:"1.5",strokeOpacity:"0.35",strokeDasharray:"300",strokeDashoffset:"300",style:{animation:`constellationDrawConn 1s ease-out forwards ${v.delay}ms`}},`conn-${d}`)),x.map((v,d)=>{const y=v.x>210;return v.y>210,e.jsxs("g",{style:{transformOrigin:`${v.x}px ${v.y}px`,opacity:0,animation:`constellationBirth 0.7s cubic-bezier(0.34,1.56,0.64,1) forwards ${v.delay+200}ms`},children:[e.jsx("circle",{cx:v.x,cy:v.y,r:"26",fill:v.color||J.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"20",fill:J.surfaceEl,stroke:v.color||J.violet,strokeWidth:"2"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"4",fill:v.color||J.violet}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y-1,textAnchor:y?"start":"end",fill:J.tp,style:{fontSize:"11px",fontWeight:500,fontFamily:J.font},children:v.name}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y+12,textAnchor:y?"start":"end",fill:J.tm,style:{fontSize:"8px",textTransform:"uppercase",fontFamily:J.mono,letterSpacing:"0.06em"},children:v.category})]},`sn-${d}`)}),e.jsxs("g",{style:{transformOrigin:"210px 210px",animation:"constellationBreathe 3s ease-in-out infinite"},children:[e.jsx("circle",{cx:210,cy:210,r:"48",fill:J.violet,fillOpacity:"0.05"}),e.jsx("circle",{cx:210,cy:210,r:"44",fill:J.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:210,cy:210,r:"38",fill:J.bg,stroke:J.violet,strokeWidth:"2.5",filter:"url(#conGlow)"}),e.jsx("text",{x:210,y:207,textAnchor:"middle",fill:J.tp,style:{fontSize:"14px",fontWeight:700,fontFamily:J.font,letterSpacing:"-0.01em"},children:t}),e.jsx("text",{x:210,y:223,textAnchor:"middle",fill:J.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:J.mono,letterSpacing:"0.05em",opacity:.8},children:i})]}),Array.from({length:10}).map((v,d)=>{const y=d*36*(Math.PI/180),_=Math.cos(y)*220,j=Math.sin(y)*220;return e.jsx("circle",{cx:210,cy:210,r:"1.5",fill:J.tp,style:{"--dx":`${_}px`,"--dy":`${j}px`,opacity:0,animation:`particleDrift ${2.5+d%3*.5}s ease-out infinite ${d*.4}s`}},`p-${d}`)})]})})}function Hm({children:t}){return Ko()?t:e.jsx(c_,{to:"/login",replace:!0})}function X6(){return e.jsx(__,{children:e.jsxs(h_,{children:[e.jsx(Ot,{path:"/preview/:projectId",element:e.jsx(I6,{})}),e.jsx(Ot,{path:"/login",element:e.jsx(A_,{})}),e.jsx(Ot,{path:"/register",element:e.jsx(L_,{})}),e.jsx(Ot,{path:"/setup-claude",element:e.jsx(Hm,{children:e.jsx(z2,{})})}),e.jsxs(Ot,{path:"/",element:e.jsx(Hm,{children:e.jsx(T_,{})}),children:[e.jsx(Ot,{index:!0,element:e.jsx(t6,{})}),e.jsx(Ot,{path:"marketplace",element:e.jsx(B6,{})}),e.jsx(Ot,{path:"marketplace/:name",element:e.jsx($6,{})}),e.jsx(Ot,{path:"agents",element:e.jsx(d6,{})}),e.jsx(Ot,{path:"agents/new",element:e.jsx(f6,{})}),e.jsx(Ot,{path:"agents/teams",element:e.jsx(E6,{})}),e.jsx(Ot,{path:"agents/stats",element:e.jsx(R6,{})}),e.jsx(Ot,{path:"skills",element:e.jsx(W6,{})}),e.jsx(Ot,{path:"skills/create",element:e.jsx(Fm,{})}),e.jsx(Ot,{path:"skills/:id/edit",element:e.jsx(Fm,{})}),e.jsx(Ot,{path:"agents/:name/edit",element:e.jsx(w6,{})}),e.jsx(Ot,{path:"agents/:name",element:e.jsx(v6,{})}),e.jsx(Ot,{path:"project/:id",element:e.jsx(A6,{})}),e.jsx(Ot,{path:"compare/:id",element:e.jsx(z6,{})}),e.jsx(Ot,{path:"personaboarding",element:e.jsx(K6,{})}),e.jsx(Ot,{path:"sessions",element:e.jsx(D6,{})})]})]})})}yb.createRoot(document.getElementById("root")).render(e.jsx(Vo.StrictMode,{children:e.jsx(X6,{})}));
