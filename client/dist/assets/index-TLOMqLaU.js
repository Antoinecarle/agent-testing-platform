function lb(t,i){for(var s=0;s<i.length;s++){const o=i[s];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const S=Object.getOwnPropertyDescriptor(o,u);S&&Object.defineProperty(t,u,S.get?S:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const S of u)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(u){const S={};return u.integrity&&(S.integrity=u.integrity),u.referrerPolicy&&(S.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?S.credentials="include":u.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function o(u){if(u.ep)return;u.ep=!0;const S=s(u);fetch(u.href,S)}})();function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dd={exports:{}},wo={},Md={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function cb(){if(Ag)return ft;Ag=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),b=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),d=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=d&&D[d]||D["@@iterator"],typeof D=="function"?D:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function h(D,W,fe){this.props=D,this.context=W,this.refs=C,this.updater=fe||_}h.prototype.isReactComponent={},h.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},h.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function p(){}p.prototype=h.prototype;function f(D,W,fe){this.props=D,this.context=W,this.refs=C,this.updater=fe||_}var g=f.prototype=new p;g.constructor=f,j(g,h.prototype),g.isPureReactComponent=!0;var w=Array.isArray,R=Object.prototype.hasOwnProperty,A={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function E(D,W,fe){var ye,we={},Re=null,Y=null;if(W!=null)for(ye in W.ref!==void 0&&(Y=W.ref),W.key!==void 0&&(Re=""+W.key),W)R.call(W,ye)&&!z.hasOwnProperty(ye)&&(we[ye]=W[ye]);var F=arguments.length-2;if(F===1)we.children=fe;else if(1<F){for(var be=Array(F),oe=0;oe<F;oe++)be[oe]=arguments[oe+2];we.children=be}if(D&&D.defaultProps)for(ye in F=D.defaultProps,F)we[ye]===void 0&&(we[ye]=F[ye]);return{$$typeof:t,type:D,key:Re,ref:Y,props:we,_owner:A.current}}function B(D,W){return{$$typeof:t,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function H(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(fe){return W[fe]})}var K=/\/+/g;function U(D,W){return typeof D=="object"&&D!==null&&D.key!=null?H(""+D.key):W.toString(36)}function ee(D,W,fe,ye,we){var Re=typeof D;(Re==="undefined"||Re==="boolean")&&(D=null);var Y=!1;if(D===null)Y=!0;else switch(Re){case"string":case"number":Y=!0;break;case"object":switch(D.$$typeof){case t:case i:Y=!0}}if(Y)return Y=D,we=we(Y),D=ye===""?"."+U(Y,0):ye,w(we)?(fe="",D!=null&&(fe=D.replace(K,"$&/")+"/"),ee(we,W,fe,"",function(oe){return oe})):we!=null&&(O(we)&&(we=B(we,fe+(!we.key||Y&&Y.key===we.key?"":(""+we.key).replace(K,"$&/")+"/")+D)),W.push(we)),1;if(Y=0,ye=ye===""?".":ye+":",w(D))for(var F=0;F<D.length;F++){Re=D[F];var be=ye+U(Re,F);Y+=ee(Re,W,fe,be,we)}else if(be=y(D),typeof be=="function")for(D=be.call(D),F=0;!(Re=D.next()).done;)Re=Re.value,be=ye+U(Re,F++),Y+=ee(Re,W,fe,be,we);else if(Re==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Y}function V(D,W,fe){if(D==null)return D;var ye=[],we=0;return ee(D,ye,"","",function(Re){return W.call(fe,Re,we++)}),ye}function ue(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(fe){(D._status===0||D._status===-1)&&(D._status=1,D._result=fe)},function(fe){(D._status===0||D._status===-1)&&(D._status=2,D._result=fe)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var Q={current:null},G={transition:null},M={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:G,ReactCurrentOwner:A};function I(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:V,forEach:function(D,W,fe){V(D,function(){W.apply(this,arguments)},fe)},count:function(D){var W=0;return V(D,function(){W++}),W},toArray:function(D){return V(D,function(W){return W})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ft.Component=h,ft.Fragment=s,ft.Profiler=u,ft.PureComponent=f,ft.StrictMode=o,ft.Suspense=c,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,ft.act=I,ft.cloneElement=function(D,W,fe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ye=j({},D.props),we=D.key,Re=D.ref,Y=D._owner;if(W!=null){if(W.ref!==void 0&&(Re=W.ref,Y=A.current),W.key!==void 0&&(we=""+W.key),D.type&&D.type.defaultProps)var F=D.type.defaultProps;for(be in W)R.call(W,be)&&!z.hasOwnProperty(be)&&(ye[be]=W[be]===void 0&&F!==void 0?F[be]:W[be])}var be=arguments.length-2;if(be===1)ye.children=fe;else if(1<be){F=Array(be);for(var oe=0;oe<be;oe++)F[oe]=arguments[oe+2];ye.children=F}return{$$typeof:t,type:D.type,key:we,ref:Re,props:ye,_owner:Y}},ft.createContext=function(D){return D={$$typeof:b,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:S,_context:D},D.Consumer=D},ft.createElement=E,ft.createFactory=function(D){var W=E.bind(null,D);return W.type=D,W},ft.createRef=function(){return{current:null}},ft.forwardRef=function(D){return{$$typeof:l,render:D}},ft.isValidElement=O,ft.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ue}},ft.memo=function(D,W){return{$$typeof:m,type:D,compare:W===void 0?null:W}},ft.startTransition=function(D){var W=G.transition;G.transition={};try{D()}finally{G.transition=W}},ft.unstable_act=I,ft.useCallback=function(D,W){return Q.current.useCallback(D,W)},ft.useContext=function(D){return Q.current.useContext(D)},ft.useDebugValue=function(){},ft.useDeferredValue=function(D){return Q.current.useDeferredValue(D)},ft.useEffect=function(D,W){return Q.current.useEffect(D,W)},ft.useId=function(){return Q.current.useId()},ft.useImperativeHandle=function(D,W,fe){return Q.current.useImperativeHandle(D,W,fe)},ft.useInsertionEffect=function(D,W){return Q.current.useInsertionEffect(D,W)},ft.useLayoutEffect=function(D,W){return Q.current.useLayoutEffect(D,W)},ft.useMemo=function(D,W){return Q.current.useMemo(D,W)},ft.useReducer=function(D,W,fe){return Q.current.useReducer(D,W,fe)},ft.useRef=function(D){return Q.current.useRef(D)},ft.useState=function(D){return Q.current.useState(D)},ft.useSyncExternalStore=function(D,W,fe){return Q.current.useSyncExternalStore(D,W,fe)},ft.useTransition=function(){return Q.current.useTransition()},ft.version="18.3.1",ft}var Lg;function ah(){return Lg||(Lg=1,Md.exports=cb()),Md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function db(){if(zg)return wo;zg=1;var t=ah(),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function b(l,c,m){var v,d={},y=null,_=null;m!==void 0&&(y=""+m),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(_=c.ref);for(v in c)o.call(c,v)&&!S.hasOwnProperty(v)&&(d[v]=c[v]);if(l&&l.defaultProps)for(v in c=l.defaultProps,c)d[v]===void 0&&(d[v]=c[v]);return{$$typeof:i,type:l,key:y,ref:_,props:d,_owner:u.current}}return wo.Fragment=s,wo.jsx=b,wo.jsxs=b,wo}var Ig;function ub(){return Ig||(Ig=1,Dd.exports=db()),Dd.exports}var e=ub(),L=ah();const Ms=Um(L),hb=lb({__proto__:null,default:Ms},[L]);var ol={},Bd={exports:{}},Br={},Pd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function pb(){return Dg||(Dg=1,(function(t){function i(G,M){var I=G.length;G.push(M);e:for(;0<I;){var D=I-1>>>1,W=G[D];if(0<u(W,M))G[D]=M,G[I]=W,I=D;else break e}}function s(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var M=G[0],I=G.pop();if(I!==M){G[0]=I;e:for(var D=0,W=G.length,fe=W>>>1;D<fe;){var ye=2*(D+1)-1,we=G[ye],Re=ye+1,Y=G[Re];if(0>u(we,I))Re<W&&0>u(Y,we)?(G[D]=Y,G[Re]=I,D=Re):(G[D]=we,G[ye]=I,D=ye);else if(Re<W&&0>u(Y,I))G[D]=Y,G[Re]=I,D=Re;else break e}}return M}function u(G,M){var I=G.sortIndex-M.sortIndex;return I!==0?I:G.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;t.unstable_now=function(){return S.now()}}else{var b=Date,l=b.now();t.unstable_now=function(){return b.now()-l}}var c=[],m=[],v=1,d=null,y=3,_=!1,j=!1,C=!1,h=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(G){for(var M=s(m);M!==null;){if(M.callback===null)o(m);else if(M.startTime<=G)o(m),M.sortIndex=M.expirationTime,i(c,M);else break;M=s(m)}}function w(G){if(C=!1,g(G),!j)if(s(c)!==null)j=!0,ue(R);else{var M=s(m);M!==null&&Q(w,M.startTime-G)}}function R(G,M){j=!1,C&&(C=!1,p(E),E=-1),_=!0;var I=y;try{for(g(M),d=s(c);d!==null&&(!(d.expirationTime>M)||G&&!H());){var D=d.callback;if(typeof D=="function"){d.callback=null,y=d.priorityLevel;var W=D(d.expirationTime<=M);M=t.unstable_now(),typeof W=="function"?d.callback=W:d===s(c)&&o(c),g(M)}else o(c);d=s(c)}if(d!==null)var fe=!0;else{var ye=s(m);ye!==null&&Q(w,ye.startTime-M),fe=!1}return fe}finally{d=null,y=I,_=!1}}var A=!1,z=null,E=-1,B=5,O=-1;function H(){return!(t.unstable_now()-O<B)}function K(){if(z!==null){var G=t.unstable_now();O=G;var M=!0;try{M=z(!0,G)}finally{M?U():(A=!1,z=null)}}else A=!1}var U;if(typeof f=="function")U=function(){f(K)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,V=ee.port2;ee.port1.onmessage=K,U=function(){V.postMessage(null)}}else U=function(){h(K,0)};function ue(G){z=G,A||(A=!0,U())}function Q(G,M){E=h(function(){G(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){j||_||(j=!0,ue(R))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var I=y;y=M;try{return G()}finally{y=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,M){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var I=y;y=G;try{return M()}finally{y=I}},t.unstable_scheduleCallback=function(G,M,I){var D=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?D+I:D):I=D,G){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=I+W,G={id:v++,callback:M,priorityLevel:G,startTime:I,expirationTime:W,sortIndex:-1},I>D?(G.sortIndex=I,i(m,G),s(c)===null&&G===s(m)&&(C?(p(E),E=-1):C=!0,Q(w,I-D))):(G.sortIndex=W,i(c,G),j||_||(j=!0,ue(R))),G},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(G){var M=y;return function(){var I=y;y=M;try{return G.apply(this,arguments)}finally{y=I}}}})(Od)),Od}var Mg;function fb(){return Mg||(Mg=1,Pd.exports=pb()),Pd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function gb(){if(Bg)return Br;Bg=1;var t=ah(),i=fb();function s(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function S(r,n){b(r,n),b(r+"Capture",n)}function b(r,n){for(u[r]=n,r=0;r<n.length;r++)o.add(n[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},d={};function y(r){return c.call(d,r)?!0:c.call(v,r)?!1:m.test(r)?d[r]=!0:(v[r]=!0,!1)}function _(r,n,a,x){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return x?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,n,a,x){if(n===null||typeof n>"u"||_(r,n,a,x))return!0;if(x)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function C(r,n,a,x,k,T,$){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=x,this.attributeNamespace=k,this.mustUseProperty=a,this.propertyName=r,this.type=n,this.sanitizeURL=T,this.removeEmptyString=$}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){h[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];h[n]=new C(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){h[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){h[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){h[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){h[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){h[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){h[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){h[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function f(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(p,f);h[n]=new C(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){h[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),h.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){h[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function g(r,n,a,x){var k=h.hasOwnProperty(n)?h[n]:null;(k!==null?k.type!==0:x||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,a,k,x)&&(a=null),x||k===null?y(n)&&(a===null?r.removeAttribute(n):r.setAttribute(n,""+a)):k.mustUseProperty?r[k.propertyName]=a===null?k.type===3?!1:"":a:(n=k.attributeName,x=k.attributeNamespace,a===null?r.removeAttribute(n):(k=k.type,a=k===3||k===4&&a===!0?"":""+a,x?r.setAttributeNS(x,n,a):r.setAttribute(n,a))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),A=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),H=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),G=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var I=Object.assign,D;function W(r){if(D===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return`
`+D+r}var fe=!1;function ye(r,n){if(!r||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(_e){var x=_e}Reflect.construct(r,[],n)}else{try{n.call()}catch(_e){x=_e}r.call(n.prototype)}else{try{throw Error()}catch(_e){x=_e}r()}}catch(_e){if(_e&&x&&typeof _e.stack=="string"){for(var k=_e.stack.split(`
`),T=x.stack.split(`
`),$=k.length-1,q=T.length-1;1<=$&&0<=q&&k[$]!==T[q];)q--;for(;1<=$&&0<=q;$--,q--)if(k[$]!==T[q]){if($!==1||q!==1)do if($--,q--,0>q||k[$]!==T[q]){var te=`
`+k[$].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=$&&0<=q);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?W(r):""}function we(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=ye(r.type,!1),r;case 11:return r=ye(r.type.render,!1),r;case 1:return r=ye(r.type,!0),r;default:return""}}function Re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case A:return"Portal";case B:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case ee:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case H:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case K:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return n=r.displayName||null,n!==null?n:Re(r.type)||"Memo";case ue:n=r._payload,r=r._init;try{return Re(r(n))}catch{}}return null}function Y(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function F(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function be(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oe(r){var n=be(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),x=""+r[n];if(!r.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var k=a.get,T=a.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return k.call(this)},set:function($){x=""+$,T.call(this,$)}}),Object.defineProperty(r,n,{enumerable:a.enumerable}),{getValue:function(){return x},setValue:function($){x=""+$},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function Ie(r){r._valueTracker||(r._valueTracker=oe(r))}function Z(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var a=n.getValue(),x="";return r&&(x=be(r)?r.checked?"true":"false":r.value),r=x,r!==a?(n.setValue(r),!0):!1}function je(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pe(r,n){var a=n.checked;return I({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function De(r,n){var a=n.defaultValue==null?"":n.defaultValue,x=n.checked!=null?n.checked:n.defaultChecked;a=F(n.value!=null?n.value:a),r._wrapperState={initialChecked:x,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function $e(r,n){n=n.checked,n!=null&&g(r,"checked",n,!1)}function Pe(r,n){$e(r,n);var a=F(n.value),x=n.type;if(a!=null)x==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(x==="submit"||x==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?He(r,n.type,a):n.hasOwnProperty("defaultValue")&&He(r,n.type,F(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function Ee(r,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var x=n.type;if(!(x!=="submit"&&x!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,a||n===r.value||(r.value=n),r.defaultValue=n}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function He(r,n,a){(n!=="number"||je(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var J=Array.isArray;function ce(r,n,a,x){if(r=r.options,n){n={};for(var k=0;k<a.length;k++)n["$"+a[k]]=!0;for(a=0;a<r.length;a++)k=n.hasOwnProperty("$"+r[a].value),r[a].selected!==k&&(r[a].selected=k),k&&x&&(r[a].defaultSelected=!0)}else{for(a=""+F(a),n=null,k=0;k<r.length;k++){if(r[k].value===a){r[k].selected=!0,x&&(r[k].defaultSelected=!0);return}n!==null||r[k].disabled||(n=r[k])}n!==null&&(n.selected=!0)}}function Ne(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return I({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function et(r,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(s(92));if(J(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),a=n}r._wrapperState={initialValue:F(a)}}function Je(r,n){var a=F(n.value),x=F(n.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),n.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),x!=null&&(r.defaultValue=""+x)}function pt(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function Gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?Gt(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var kt,Lt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,x,k){MSApp.execUnsafeLocalFunction(function(){return r(n,a,x,k)})}:r})(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(kt=kt||document.createElement("div"),kt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=kt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function bt(r,n){if(n){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=n;return}}r.textContent=n}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(r){gt.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),It[n]=It[r]})});function Rr(r,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||It.hasOwnProperty(r)&&It[r]?(""+n).trim():n+"px"}function pr(r,n){r=r.style;for(var a in n)if(n.hasOwnProperty(a)){var x=a.indexOf("--")===0,k=Rr(a,n[a],x);a==="float"&&(a="cssFloat"),x?r.setProperty(a,k):r[a]=k}}var ii=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(r,n){if(n){if(ii[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function Tr(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gr=null;function ae(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var We=null,Ge=null,ut=null;function _t(r){if(r=ao(r)){if(typeof We!="function")throw Error(s(280));var n=r.stateNode;n&&(n=_a(n),We(r.stateNode,r.type,n))}}function Yt(r){Ge?ut?ut.push(r):ut=[r]:Ge=r}function mt(){if(Ge){var r=Ge,n=ut;if(ut=Ge=null,_t(r),n)for(r=0;r<n.length;r++)_t(n[r])}}function Xt(r,n){return r(n)}function $r(){}var Kr=!1;function ni(r,n,a){if(Kr)return r(n,a);Kr=!0;try{return Xt(r,n,a)}finally{Kr=!1,(Ge!==null||ut!==null)&&($r(),mt())}}function Ar(r,n){var a=r.stateNode;if(a===null)return null;var x=_a(a);if(x===null)return null;a=x[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(r=r.type,x=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!x;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Fr=!1;if(l)try{var si={};Object.defineProperty(si,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{Fr=!1}function Ui(r,n,a,x,k,T,$,q,te){var _e=Array.prototype.slice.call(arguments,3);try{n.apply(a,_e)}catch(ze){this.onError(ze)}}var xr=!1,mr=null,qr=!1,P=null,re={onError:function(r){xr=!0,mr=r}};function Se(r,n,a,x,k,T,$,q,te){xr=!1,mr=null,Ui.apply(re,arguments)}function ie(r,n,a,x,k,T,$,q,te){if(Se.apply(this,arguments),xr){if(xr){var _e=mr;xr=!1,mr=null}else throw Error(s(198));qr||(qr=!0,P=_e)}}function Oe(r){var n=r,a=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,(n.flags&4098)!==0&&(a=n.return),r=n.return;while(r)}return n.tag===3?a:null}function Ve(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function ot(r){if(Oe(r)!==r)throw Error(s(188))}function Ce(r){var n=r.alternate;if(!n){if(n=Oe(r),n===null)throw Error(s(188));return n!==r?null:r}for(var a=r,x=n;;){var k=a.return;if(k===null)break;var T=k.alternate;if(T===null){if(x=k.return,x!==null){a=x;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===a)return ot(k),r;if(T===x)return ot(k),n;T=T.sibling}throw Error(s(188))}if(a.return!==x.return)a=k,x=T;else{for(var $=!1,q=k.child;q;){if(q===a){$=!0,a=k,x=T;break}if(q===x){$=!0,x=k,a=T;break}q=q.sibling}if(!$){for(q=T.child;q;){if(q===a){$=!0,a=T,x=k;break}if(q===x){$=!0,x=T,a=k;break}q=q.sibling}if(!$)throw Error(s(189))}}if(a.alternate!==x)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:n}function ht(r){return r=Ce(r),r!==null?it(r):null}function it(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=it(r);if(n!==null)return n;r=r.sibling}return null}var Dt=i.unstable_scheduleCallback,Vi=i.unstable_cancelCallback,v1=i.unstable_shouldYield,b1=i.unstable_requestPaint,Vt=i.unstable_now,_1=i.unstable_getCurrentPriorityLevel,ec=i.unstable_ImmediatePriority,np=i.unstable_UserBlockingPriority,ta=i.unstable_NormalPriority,S1=i.unstable_LowPriority,sp=i.unstable_IdlePriority,ra=null,yi=null;function w1(r){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(ra,r,void 0,(r.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:j1,C1=Math.log,k1=Math.LN2;function j1(r){return r>>>=0,r===0?32:31-(C1(r)/k1|0)|0}var ia=64,na=4194304;function Hs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function sa(r,n){var a=r.pendingLanes;if(a===0)return 0;var x=0,k=r.suspendedLanes,T=r.pingedLanes,$=a&268435455;if($!==0){var q=$&~k;q!==0?x=Hs(q):(T&=$,T!==0&&(x=Hs(T)))}else $=a&~k,$!==0?x=Hs($):T!==0&&(x=Hs(T));if(x===0)return 0;if(n!==0&&n!==x&&(n&k)===0&&(k=x&-x,T=n&-n,k>=T||k===16&&(T&4194240)!==0))return n;if((x&4)!==0&&(x|=a&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=x;0<n;)a=31-oi(n),k=1<<a,x|=r[a],n&=~k;return x}function E1(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R1(r,n){for(var a=r.suspendedLanes,x=r.pingedLanes,k=r.expirationTimes,T=r.pendingLanes;0<T;){var $=31-oi(T),q=1<<$,te=k[$];te===-1?((q&a)===0||(q&x)!==0)&&(k[$]=E1(q,n)):te<=n&&(r.expiredLanes|=q),T&=~q}}function tc(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function op(){var r=ia;return ia<<=1,(ia&4194240)===0&&(ia=64),r}function rc(r){for(var n=[],a=0;31>a;a++)n.push(r);return n}function Us(r,n,a){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-oi(n),r[n]=a}function T1(r,n){var a=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var x=r.eventTimes;for(r=r.expirationTimes;0<a;){var k=31-oi(a),T=1<<k;n[k]=0,x[k]=-1,r[k]=-1,a&=~T}}function ic(r,n){var a=r.entangledLanes|=n;for(r=r.entanglements;a;){var x=31-oi(a),k=1<<x;k&n|r[x]&n&&(r[x]|=n),a&=~k}}var wt=0;function ap(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var lp,nc,cp,dp,up,sc=!1,oa=[],Ki=null,qi=null,Gi=null,Vs=new Map,Ks=new Map,Yi=[],A1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hp(r,n){switch(r){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Vs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(n.pointerId)}}function qs(r,n,a,x,k,T){return r===null||r.nativeEvent!==T?(r={blockedOn:n,domEventName:a,eventSystemFlags:x,nativeEvent:T,targetContainers:[k]},n!==null&&(n=ao(n),n!==null&&nc(n)),r):(r.eventSystemFlags|=x,n=r.targetContainers,k!==null&&n.indexOf(k)===-1&&n.push(k),r)}function L1(r,n,a,x,k){switch(n){case"focusin":return Ki=qs(Ki,r,n,a,x,k),!0;case"dragenter":return qi=qs(qi,r,n,a,x,k),!0;case"mouseover":return Gi=qs(Gi,r,n,a,x,k),!0;case"pointerover":var T=k.pointerId;return Vs.set(T,qs(Vs.get(T)||null,r,n,a,x,k)),!0;case"gotpointercapture":return T=k.pointerId,Ks.set(T,qs(Ks.get(T)||null,r,n,a,x,k)),!0}return!1}function pp(r){var n=Rn(r.target);if(n!==null){var a=Oe(n);if(a!==null){if(n=a.tag,n===13){if(n=Ve(a),n!==null){r.blockedOn=n,up(r.priority,function(){cp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function aa(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var a=ac(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var x=new a.constructor(a.type,a);gr=x,a.target.dispatchEvent(x),gr=null}else return n=ao(a),n!==null&&nc(n),r.blockedOn=a,!1;n.shift()}return!0}function fp(r,n,a){aa(r)&&a.delete(n)}function z1(){sc=!1,Ki!==null&&aa(Ki)&&(Ki=null),qi!==null&&aa(qi)&&(qi=null),Gi!==null&&aa(Gi)&&(Gi=null),Vs.forEach(fp),Ks.forEach(fp)}function Gs(r,n){r.blockedOn===n&&(r.blockedOn=null,sc||(sc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,z1)))}function Ys(r){function n(k){return Gs(k,r)}if(0<oa.length){Gs(oa[0],r);for(var a=1;a<oa.length;a++){var x=oa[a];x.blockedOn===r&&(x.blockedOn=null)}}for(Ki!==null&&Gs(Ki,r),qi!==null&&Gs(qi,r),Gi!==null&&Gs(Gi,r),Vs.forEach(n),Ks.forEach(n),a=0;a<Yi.length;a++)x=Yi[a],x.blockedOn===r&&(x.blockedOn=null);for(;0<Yi.length&&(a=Yi[0],a.blockedOn===null);)pp(a),a.blockedOn===null&&Yi.shift()}var Qn=w.ReactCurrentBatchConfig,la=!0;function I1(r,n,a,x){var k=wt,T=Qn.transition;Qn.transition=null;try{wt=1,oc(r,n,a,x)}finally{wt=k,Qn.transition=T}}function D1(r,n,a,x){var k=wt,T=Qn.transition;Qn.transition=null;try{wt=4,oc(r,n,a,x)}finally{wt=k,Qn.transition=T}}function oc(r,n,a,x){if(la){var k=ac(r,n,a,x);if(k===null)Cc(r,n,x,ca,a),hp(r,x);else if(L1(k,r,n,a,x))x.stopPropagation();else if(hp(r,x),n&4&&-1<A1.indexOf(r)){for(;k!==null;){var T=ao(k);if(T!==null&&lp(T),T=ac(r,n,a,x),T===null&&Cc(r,n,x,ca,a),T===k)break;k=T}k!==null&&x.stopPropagation()}else Cc(r,n,x,null,a)}}var ca=null;function ac(r,n,a,x){if(ca=null,r=ae(x),r=Rn(r),r!==null)if(n=Oe(r),n===null)r=null;else if(a=n.tag,a===13){if(r=Ve(n),r!==null)return r;r=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return ca=r,null}function gp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_1()){case ec:return 1;case np:return 4;case ta:case S1:return 16;case sp:return 536870912;default:return 16}default:return 16}}var Xi=null,lc=null,da=null;function xp(){if(da)return da;var r,n=lc,a=n.length,x,k="value"in Xi?Xi.value:Xi.textContent,T=k.length;for(r=0;r<a&&n[r]===k[r];r++);var $=a-r;for(x=1;x<=$&&n[a-x]===k[T-x];x++);return da=k.slice(r,1<x?1-x:void 0)}function ua(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function ha(){return!0}function mp(){return!1}function Wr(r){function n(a,x,k,T,$){this._reactName=a,this._targetInst=k,this.type=x,this.nativeEvent=T,this.target=$,this.currentTarget=null;for(var q in r)r.hasOwnProperty(q)&&(a=r[q],this[q]=a?a(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ha:mp,this.isPropagationStopped=mp,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),n}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=Wr(Zn),Xs=I({},Zn,{view:0,detail:0}),M1=Wr(Xs),dc,uc,Js,pa=I({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Js&&(Js&&r.type==="mousemove"?(dc=r.screenX-Js.screenX,uc=r.screenY-Js.screenY):uc=dc=0,Js=r),dc)},movementY:function(r){return"movementY"in r?r.movementY:uc}}),yp=Wr(pa),B1=I({},pa,{dataTransfer:0}),P1=Wr(B1),O1=I({},Xs,{relatedTarget:0}),hc=Wr(O1),$1=I({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),F1=Wr($1),W1=I({},Zn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),N1=Wr(W1),H1=I({},Zn,{data:0}),vp=Wr(H1),U1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=K1[r])?!!n[r]:!1}function pc(){return q1}var G1=I({},Xs,{key:function(r){if(r.key){var n=U1[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=ua(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?V1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(r){return r.type==="keypress"?ua(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ua(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Y1=Wr(G1),X1=I({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=Wr(X1),J1=I({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),Q1=Wr(J1),Z1=I({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=Wr(Z1),tv=I({},pa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),rv=Wr(tv),iv=[9,13,27,32],fc=l&&"CompositionEvent"in window,Qs=null;l&&"documentMode"in document&&(Qs=document.documentMode);var nv=l&&"TextEvent"in window&&!Qs,_p=l&&(!fc||Qs&&8<Qs&&11>=Qs),Sp=" ",wp=!1;function Cp(r,n){switch(r){case"keyup":return iv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var es=!1;function sv(r,n){switch(r){case"compositionend":return kp(n);case"keypress":return n.which!==32?null:(wp=!0,Sp);case"textInput":return r=n.data,r===Sp&&wp?null:r;default:return null}}function ov(r,n){if(es)return r==="compositionend"||!fc&&Cp(r,n)?(r=xp(),da=lc=Xi=null,es=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _p&&n.locale!=="ko"?null:n.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!av[r.type]:n==="textarea"}function Ep(r,n,a,x){Yt(x),n=ya(n,"onChange"),0<n.length&&(a=new cc("onChange","change",null,a,x),r.push({event:a,listeners:n}))}var Zs=null,eo=null;function lv(r){Vp(r,0)}function fa(r){var n=ss(r);if(Z(n))return r}function cv(r,n){if(r==="change")return n}var Rp=!1;if(l){var gc;if(l){var xc="oninput"in document;if(!xc){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),xc=typeof Tp.oninput=="function"}gc=xc}else gc=!1;Rp=gc&&(!document.documentMode||9<document.documentMode)}function Ap(){Zs&&(Zs.detachEvent("onpropertychange",Lp),eo=Zs=null)}function Lp(r){if(r.propertyName==="value"&&fa(eo)){var n=[];Ep(n,eo,r,ae(r)),ni(lv,n)}}function dv(r,n,a){r==="focusin"?(Ap(),Zs=n,eo=a,Zs.attachEvent("onpropertychange",Lp)):r==="focusout"&&Ap()}function uv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fa(eo)}function hv(r,n){if(r==="click")return fa(n)}function pv(r,n){if(r==="input"||r==="change")return fa(n)}function fv(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var ai=typeof Object.is=="function"?Object.is:fv;function to(r,n){if(ai(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var a=Object.keys(r),x=Object.keys(n);if(a.length!==x.length)return!1;for(x=0;x<a.length;x++){var k=a[x];if(!c.call(n,k)||!ai(r[k],n[k]))return!1}return!0}function zp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ip(r,n){var a=zp(r);r=0;for(var x;a;){if(a.nodeType===3){if(x=r+a.textContent.length,r<=n&&x>=n)return{node:a,offset:n-r};r=x}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zp(a)}}function Dp(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Dp(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function Mp(){for(var r=window,n=je();n instanceof r.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)r=n.contentWindow;else break;n=je(r.document)}return n}function mc(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function gv(r){var n=Mp(),a=r.focusedElem,x=r.selectionRange;if(n!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(x!==null&&mc(a)){if(n=x.start,r=x.end,r===void 0&&(r=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(r,a.value.length);else if(r=(n=a.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var k=a.textContent.length,T=Math.min(x.start,k);x=x.end===void 0?T:Math.min(x.end,k),!r.extend&&T>x&&(k=x,x=T,T=k),k=Ip(a,T);var $=Ip(a,x);k&&$&&(r.rangeCount!==1||r.anchorNode!==k.node||r.anchorOffset!==k.offset||r.focusNode!==$.node||r.focusOffset!==$.offset)&&(n=n.createRange(),n.setStart(k.node,k.offset),r.removeAllRanges(),T>x?(r.addRange(n),r.extend($.node,$.offset)):(n.setEnd($.node,$.offset),r.addRange(n)))}}for(n=[],r=a;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)r=n[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var xv=l&&"documentMode"in document&&11>=document.documentMode,ts=null,yc=null,ro=null,vc=!1;function Bp(r,n,a){var x=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vc||ts==null||ts!==je(x)||(x=ts,"selectionStart"in x&&mc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ro&&to(ro,x)||(ro=x,x=ya(yc,"onSelect"),0<x.length&&(n=new cc("onSelect","select",null,n,a),r.push({event:n,listeners:x}),n.target=ts)))}function ga(r,n){var a={};return a[r.toLowerCase()]=n.toLowerCase(),a["Webkit"+r]="webkit"+n,a["Moz"+r]="moz"+n,a}var rs={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},bc={},Pp={};l&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function xa(r){if(bc[r])return bc[r];if(!rs[r])return r;var n=rs[r],a;for(a in n)if(n.hasOwnProperty(a)&&a in Pp)return bc[r]=n[a];return r}var Op=xa("animationend"),$p=xa("animationiteration"),Fp=xa("animationstart"),Wp=xa("transitionend"),Np=new Map,Hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(r,n){Np.set(r,n),S(n,[r])}for(var _c=0;_c<Hp.length;_c++){var Sc=Hp[_c],mv=Sc.toLowerCase(),yv=Sc[0].toUpperCase()+Sc.slice(1);Ji(mv,"on"+yv)}Ji(Op,"onAnimationEnd"),Ji($p,"onAnimationIteration"),Ji(Fp,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(Wp,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Up(r,n,a){var x=r.type||"unknown-event";r.currentTarget=a,ie(x,n,void 0,r),r.currentTarget=null}function Vp(r,n){n=(n&4)!==0;for(var a=0;a<r.length;a++){var x=r[a],k=x.event;x=x.listeners;e:{var T=void 0;if(n)for(var $=x.length-1;0<=$;$--){var q=x[$],te=q.instance,_e=q.currentTarget;if(q=q.listener,te!==T&&k.isPropagationStopped())break e;Up(k,q,_e),T=te}else for($=0;$<x.length;$++){if(q=x[$],te=q.instance,_e=q.currentTarget,q=q.listener,te!==T&&k.isPropagationStopped())break e;Up(k,q,_e),T=te}}}if(qr)throw r=P,qr=!1,P=null,r}function Tt(r,n){var a=n[Ac];a===void 0&&(a=n[Ac]=new Set);var x=r+"__bubble";a.has(x)||(Kp(n,r,2,!1),a.add(x))}function wc(r,n,a){var x=0;n&&(x|=4),Kp(a,r,x,n)}var ma="_reactListening"+Math.random().toString(36).slice(2);function no(r){if(!r[ma]){r[ma]=!0,o.forEach(function(a){a!=="selectionchange"&&(vv.has(a)||wc(a,!1,r),wc(a,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[ma]||(n[ma]=!0,wc("selectionchange",!1,n))}}function Kp(r,n,a,x){switch(gp(n)){case 1:var k=I1;break;case 4:k=D1;break;default:k=oc}a=k.bind(null,n,a,r),k=void 0,!Fr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(k=!0),x?k!==void 0?r.addEventListener(n,a,{capture:!0,passive:k}):r.addEventListener(n,a,!0):k!==void 0?r.addEventListener(n,a,{passive:k}):r.addEventListener(n,a,!1)}function Cc(r,n,a,x,k){var T=x;if((n&1)===0&&(n&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var q=x.stateNode.containerInfo;if(q===k||q.nodeType===8&&q.parentNode===k)break;if($===4)for($=x.return;$!==null;){var te=$.tag;if((te===3||te===4)&&(te=$.stateNode.containerInfo,te===k||te.nodeType===8&&te.parentNode===k))return;$=$.return}for(;q!==null;){if($=Rn(q),$===null)return;if(te=$.tag,te===5||te===6){x=T=$;continue e}q=q.parentNode}}x=x.return}ni(function(){var _e=T,ze=ae(a),Be=[];e:{var Te=Np.get(r);if(Te!==void 0){var qe=cc,Qe=r;switch(r){case"keypress":if(ua(a)===0)break e;case"keydown":case"keyup":qe=Y1;break;case"focusin":Qe="focus",qe=hc;break;case"focusout":Qe="blur",qe=hc;break;case"beforeblur":case"afterblur":qe=hc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Q1;break;case Op:case $p:case Fp:qe=F1;break;case Wp:qe=ev;break;case"scroll":qe=M1;break;case"wheel":qe=rv;break;case"copy":case"cut":case"paste":qe=N1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=bp}var tt=(n&4)!==0,Kt=!tt&&r==="scroll",he=tt?Te!==null?Te+"Capture":null:Te;tt=[];for(var ne=_e,ge;ne!==null;){ge=ne;var Fe=ge.stateNode;if(ge.tag===5&&Fe!==null&&(ge=Fe,he!==null&&(Fe=Ar(ne,he),Fe!=null&&tt.push(so(ne,Fe,ge)))),Kt)break;ne=ne.return}0<tt.length&&(Te=new qe(Te,Qe,null,a,ze),Be.push({event:Te,listeners:tt}))}}if((n&7)===0){e:{if(Te=r==="mouseover"||r==="pointerover",qe=r==="mouseout"||r==="pointerout",Te&&a!==gr&&(Qe=a.relatedTarget||a.fromElement)&&(Rn(Qe)||Qe[Ai]))break e;if((qe||Te)&&(Te=ze.window===ze?ze:(Te=ze.ownerDocument)?Te.defaultView||Te.parentWindow:window,qe?(Qe=a.relatedTarget||a.toElement,qe=_e,Qe=Qe?Rn(Qe):null,Qe!==null&&(Kt=Oe(Qe),Qe!==Kt||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(qe=null,Qe=_e),qe!==Qe)){if(tt=yp,Fe="onMouseLeave",he="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(tt=bp,Fe="onPointerLeave",he="onPointerEnter",ne="pointer"),Kt=qe==null?Te:ss(qe),ge=Qe==null?Te:ss(Qe),Te=new tt(Fe,ne+"leave",qe,a,ze),Te.target=Kt,Te.relatedTarget=ge,Fe=null,Rn(ze)===_e&&(tt=new tt(he,ne+"enter",Qe,a,ze),tt.target=ge,tt.relatedTarget=Kt,Fe=tt),Kt=Fe,qe&&Qe)t:{for(tt=qe,he=Qe,ne=0,ge=tt;ge;ge=is(ge))ne++;for(ge=0,Fe=he;Fe;Fe=is(Fe))ge++;for(;0<ne-ge;)tt=is(tt),ne--;for(;0<ge-ne;)he=is(he),ge--;for(;ne--;){if(tt===he||he!==null&&tt===he.alternate)break t;tt=is(tt),he=is(he)}tt=null}else tt=null;qe!==null&&qp(Be,Te,qe,tt,!1),Qe!==null&&Kt!==null&&qp(Be,Kt,Qe,tt,!0)}}e:{if(Te=_e?ss(_e):window,qe=Te.nodeName&&Te.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Te.type==="file")var rt=cv;else if(jp(Te))if(Rp)rt=pv;else{rt=uv;var at=dv}else(qe=Te.nodeName)&&qe.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(rt=hv);if(rt&&(rt=rt(r,_e))){Ep(Be,rt,a,ze);break e}at&&at(r,Te,_e),r==="focusout"&&(at=Te._wrapperState)&&at.controlled&&Te.type==="number"&&He(Te,"number",Te.value)}switch(at=_e?ss(_e):window,r){case"focusin":(jp(at)||at.contentEditable==="true")&&(ts=at,yc=_e,ro=null);break;case"focusout":ro=yc=ts=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Bp(Be,a,ze);break;case"selectionchange":if(xv)break;case"keydown":case"keyup":Bp(Be,a,ze)}var lt;if(fc)e:{switch(r){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else es?Cp(r,a)&&(dt="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(_p&&a.locale!=="ko"&&(es||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&es&&(lt=xp()):(Xi=ze,lc="value"in Xi?Xi.value:Xi.textContent,es=!0)),at=ya(_e,dt),0<at.length&&(dt=new vp(dt,r,null,a,ze),Be.push({event:dt,listeners:at}),lt?dt.data=lt:(lt=kp(a),lt!==null&&(dt.data=lt)))),(lt=nv?sv(r,a):ov(r,a))&&(_e=ya(_e,"onBeforeInput"),0<_e.length&&(ze=new vp("onBeforeInput","beforeinput",null,a,ze),Be.push({event:ze,listeners:_e}),ze.data=lt))}Vp(Be,n)})}function so(r,n,a){return{instance:r,listener:n,currentTarget:a}}function ya(r,n){for(var a=n+"Capture",x=[];r!==null;){var k=r,T=k.stateNode;k.tag===5&&T!==null&&(k=T,T=Ar(r,a),T!=null&&x.unshift(so(r,T,k)),T=Ar(r,n),T!=null&&x.push(so(r,T,k))),r=r.return}return x}function is(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function qp(r,n,a,x,k){for(var T=n._reactName,$=[];a!==null&&a!==x;){var q=a,te=q.alternate,_e=q.stateNode;if(te!==null&&te===x)break;q.tag===5&&_e!==null&&(q=_e,k?(te=Ar(a,T),te!=null&&$.unshift(so(a,te,q))):k||(te=Ar(a,T),te!=null&&$.push(so(a,te,q)))),a=a.return}$.length!==0&&r.push({event:n,listeners:$})}var bv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function Gp(r){return(typeof r=="string"?r:""+r).replace(bv,`
`).replace(_v,"")}function va(r,n,a){if(n=Gp(n),Gp(r)!==n&&a)throw Error(s(425))}function ba(){}var kc=null,jc=null;function Ec(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Yp=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof Yp<"u"?function(r){return Yp.resolve(null).then(r).catch(Cv)}:Rc;function Cv(r){setTimeout(function(){throw r})}function Tc(r,n){var a=n,x=0;do{var k=a.nextSibling;if(r.removeChild(a),k&&k.nodeType===8)if(a=k.data,a==="/$"){if(x===0){r.removeChild(k),Ys(n);return}x--}else a!=="$"&&a!=="$?"&&a!=="$!"||x++;a=k}while(a);Ys(n)}function Qi(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Xp(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return r;n--}else a==="/$"&&n++}r=r.previousSibling}return null}var ns=Math.random().toString(36).slice(2),vi="__reactFiber$"+ns,oo="__reactProps$"+ns,Ai="__reactContainer$"+ns,Ac="__reactEvents$"+ns,kv="__reactListeners$"+ns,jv="__reactHandles$"+ns;function Rn(r){var n=r[vi];if(n)return n;for(var a=r.parentNode;a;){if(n=a[Ai]||a[vi]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(r=Xp(r);r!==null;){if(a=r[vi])return a;r=Xp(r)}return n}r=a,a=r.parentNode}return null}function ao(r){return r=r[vi]||r[Ai],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ss(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function _a(r){return r[oo]||null}var Lc=[],os=-1;function Zi(r){return{current:r}}function At(r){0>os||(r.current=Lc[os],Lc[os]=null,os--)}function Et(r,n){os++,Lc[os]=r.current,r.current=n}var en={},yr=Zi(en),Lr=Zi(!1),Tn=en;function as(r,n){var a=r.type.contextTypes;if(!a)return en;var x=r.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===n)return x.__reactInternalMemoizedMaskedChildContext;var k={},T;for(T in a)k[T]=n[T];return x&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=k),k}function zr(r){return r=r.childContextTypes,r!=null}function Sa(){At(Lr),At(yr)}function Jp(r,n,a){if(yr.current!==en)throw Error(s(168));Et(yr,n),Et(Lr,a)}function Qp(r,n,a){var x=r.stateNode;if(n=n.childContextTypes,typeof x.getChildContext!="function")return a;x=x.getChildContext();for(var k in x)if(!(k in n))throw Error(s(108,Y(r)||"Unknown",k));return I({},a,x)}function wa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||en,Tn=yr.current,Et(yr,r),Et(Lr,Lr.current),!0}function Zp(r,n,a){var x=r.stateNode;if(!x)throw Error(s(169));a?(r=Qp(r,n,Tn),x.__reactInternalMemoizedMergedChildContext=r,At(Lr),At(yr),Et(yr,r)):At(Lr),Et(Lr,a)}var Li=null,Ca=!1,zc=!1;function ef(r){Li===null?Li=[r]:Li.push(r)}function Ev(r){Ca=!0,ef(r)}function tn(){if(!zc&&Li!==null){zc=!0;var r=0,n=wt;try{var a=Li;for(wt=1;r<a.length;r++){var x=a[r];do x=x(!0);while(x!==null)}Li=null,Ca=!1}catch(k){throw Li!==null&&(Li=Li.slice(r+1)),Dt(ec,tn),k}finally{wt=n,zc=!1}}return null}var ls=[],cs=0,ka=null,ja=0,Gr=[],Yr=0,An=null,zi=1,Ii="";function Ln(r,n){ls[cs++]=ja,ls[cs++]=ka,ka=r,ja=n}function tf(r,n,a){Gr[Yr++]=zi,Gr[Yr++]=Ii,Gr[Yr++]=An,An=r;var x=zi;r=Ii;var k=32-oi(x)-1;x&=~(1<<k),a+=1;var T=32-oi(n)+k;if(30<T){var $=k-k%5;T=(x&(1<<$)-1).toString(32),x>>=$,k-=$,zi=1<<32-oi(n)+k|a<<k|x,Ii=T+r}else zi=1<<T|a<<k|x,Ii=r}function Ic(r){r.return!==null&&(Ln(r,1),tf(r,1,0))}function Dc(r){for(;r===ka;)ka=ls[--cs],ls[cs]=null,ja=ls[--cs],ls[cs]=null;for(;r===An;)An=Gr[--Yr],Gr[Yr]=null,Ii=Gr[--Yr],Gr[Yr]=null,zi=Gr[--Yr],Gr[Yr]=null}var Nr=null,Hr=null,zt=!1,li=null;function rf(r,n){var a=Zr(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=r,n=r.deletions,n===null?(r.deletions=[a],r.flags|=16):n.push(a)}function nf(r,n){switch(r.tag){case 5:var a=r.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,Nr=r,Hr=Qi(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,Nr=r,Hr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=An!==null?{id:zi,overflow:Ii}:null,r.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=Zr(18,null,null,0),a.stateNode=n,a.return=r,r.child=a,Nr=r,Hr=null,!0):!1;default:return!1}}function Mc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Bc(r){if(zt){var n=Hr;if(n){var a=n;if(!nf(r,n)){if(Mc(r))throw Error(s(418));n=Qi(a.nextSibling);var x=Nr;n&&nf(r,n)?rf(x,a):(r.flags=r.flags&-4097|2,zt=!1,Nr=r)}}else{if(Mc(r))throw Error(s(418));r.flags=r.flags&-4097|2,zt=!1,Nr=r}}}function sf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Nr=r}function Ea(r){if(r!==Nr)return!1;if(!zt)return sf(r),zt=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!Ec(r.type,r.memoizedProps)),n&&(n=Hr)){if(Mc(r))throw of(),Error(s(418));for(;n;)rf(r,n),n=Qi(n.nextSibling)}if(sf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(n===0){Hr=Qi(r.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}r=r.nextSibling}Hr=null}}else Hr=Nr?Qi(r.stateNode.nextSibling):null;return!0}function of(){for(var r=Hr;r;)r=Qi(r.nextSibling)}function ds(){Hr=Nr=null,zt=!1}function Pc(r){li===null?li=[r]:li.push(r)}var Rv=w.ReactCurrentBatchConfig;function lo(r,n,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var x=a.stateNode}if(!x)throw Error(s(147,r));var k=x,T=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===T?n.ref:(n=function($){var q=k.refs;$===null?delete q[T]:q[T]=$},n._stringRef=T,n)}if(typeof r!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,r))}return r}function Ra(r,n){throw r=Object.prototype.toString.call(n),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function af(r){var n=r._init;return n(r._payload)}function lf(r){function n(he,ne){if(r){var ge=he.deletions;ge===null?(he.deletions=[ne],he.flags|=16):ge.push(ne)}}function a(he,ne){if(!r)return null;for(;ne!==null;)n(he,ne),ne=ne.sibling;return null}function x(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}function k(he,ne){return he=dn(he,ne),he.index=0,he.sibling=null,he}function T(he,ne,ge){return he.index=ge,r?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)}function $(he){return r&&he.alternate===null&&(he.flags|=2),he}function q(he,ne,ge,Fe){return ne===null||ne.tag!==6?(ne=Rd(ge,he.mode,Fe),ne.return=he,ne):(ne=k(ne,ge),ne.return=he,ne)}function te(he,ne,ge,Fe){var rt=ge.type;return rt===z?ze(he,ne,ge.props.children,Fe,ge.key):ne!==null&&(ne.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ue&&af(rt)===ne.type)?(Fe=k(ne,ge.props),Fe.ref=lo(he,ne,ge),Fe.return=he,Fe):(Fe=Qa(ge.type,ge.key,ge.props,null,he.mode,Fe),Fe.ref=lo(he,ne,ge),Fe.return=he,Fe)}function _e(he,ne,ge,Fe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=Td(ge,he.mode,Fe),ne.return=he,ne):(ne=k(ne,ge.children||[]),ne.return=he,ne)}function ze(he,ne,ge,Fe,rt){return ne===null||ne.tag!==7?(ne=$n(ge,he.mode,Fe,rt),ne.return=he,ne):(ne=k(ne,ge),ne.return=he,ne)}function Be(he,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Rd(""+ne,he.mode,ge),ne.return=he,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case R:return ge=Qa(ne.type,ne.key,ne.props,null,he.mode,ge),ge.ref=lo(he,null,ne),ge.return=he,ge;case A:return ne=Td(ne,he.mode,ge),ne.return=he,ne;case ue:var Fe=ne._init;return Be(he,Fe(ne._payload),ge)}if(J(ne)||M(ne))return ne=$n(ne,he.mode,ge,null),ne.return=he,ne;Ra(he,ne)}return null}function Te(he,ne,ge,Fe){var rt=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return rt!==null?null:q(he,ne,""+ge,Fe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:return ge.key===rt?te(he,ne,ge,Fe):null;case A:return ge.key===rt?_e(he,ne,ge,Fe):null;case ue:return rt=ge._init,Te(he,ne,rt(ge._payload),Fe)}if(J(ge)||M(ge))return rt!==null?null:ze(he,ne,ge,Fe,null);Ra(he,ge)}return null}function qe(he,ne,ge,Fe,rt){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return he=he.get(ge)||null,q(ne,he,""+Fe,rt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case R:return he=he.get(Fe.key===null?ge:Fe.key)||null,te(ne,he,Fe,rt);case A:return he=he.get(Fe.key===null?ge:Fe.key)||null,_e(ne,he,Fe,rt);case ue:var at=Fe._init;return qe(he,ne,ge,at(Fe._payload),rt)}if(J(Fe)||M(Fe))return he=he.get(ge)||null,ze(ne,he,Fe,rt,null);Ra(ne,Fe)}return null}function Qe(he,ne,ge,Fe){for(var rt=null,at=null,lt=ne,dt=ne=0,lr=null;lt!==null&&dt<ge.length;dt++){lt.index>dt?(lr=lt,lt=null):lr=lt.sibling;var vt=Te(he,lt,ge[dt],Fe);if(vt===null){lt===null&&(lt=lr);break}r&&lt&&vt.alternate===null&&n(he,lt),ne=T(vt,ne,dt),at===null?rt=vt:at.sibling=vt,at=vt,lt=lr}if(dt===ge.length)return a(he,lt),zt&&Ln(he,dt),rt;if(lt===null){for(;dt<ge.length;dt++)lt=Be(he,ge[dt],Fe),lt!==null&&(ne=T(lt,ne,dt),at===null?rt=lt:at.sibling=lt,at=lt);return zt&&Ln(he,dt),rt}for(lt=x(he,lt);dt<ge.length;dt++)lr=qe(lt,he,dt,ge[dt],Fe),lr!==null&&(r&&lr.alternate!==null&&lt.delete(lr.key===null?dt:lr.key),ne=T(lr,ne,dt),at===null?rt=lr:at.sibling=lr,at=lr);return r&&lt.forEach(function(un){return n(he,un)}),zt&&Ln(he,dt),rt}function tt(he,ne,ge,Fe){var rt=M(ge);if(typeof rt!="function")throw Error(s(150));if(ge=rt.call(ge),ge==null)throw Error(s(151));for(var at=rt=null,lt=ne,dt=ne=0,lr=null,vt=ge.next();lt!==null&&!vt.done;dt++,vt=ge.next()){lt.index>dt?(lr=lt,lt=null):lr=lt.sibling;var un=Te(he,lt,vt.value,Fe);if(un===null){lt===null&&(lt=lr);break}r&&lt&&un.alternate===null&&n(he,lt),ne=T(un,ne,dt),at===null?rt=un:at.sibling=un,at=un,lt=lr}if(vt.done)return a(he,lt),zt&&Ln(he,dt),rt;if(lt===null){for(;!vt.done;dt++,vt=ge.next())vt=Be(he,vt.value,Fe),vt!==null&&(ne=T(vt,ne,dt),at===null?rt=vt:at.sibling=vt,at=vt);return zt&&Ln(he,dt),rt}for(lt=x(he,lt);!vt.done;dt++,vt=ge.next())vt=qe(lt,he,dt,vt.value,Fe),vt!==null&&(r&&vt.alternate!==null&&lt.delete(vt.key===null?dt:vt.key),ne=T(vt,ne,dt),at===null?rt=vt:at.sibling=vt,at=vt);return r&&lt.forEach(function(ab){return n(he,ab)}),zt&&Ln(he,dt),rt}function Kt(he,ne,ge,Fe){if(typeof ge=="object"&&ge!==null&&ge.type===z&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:e:{for(var rt=ge.key,at=ne;at!==null;){if(at.key===rt){if(rt=ge.type,rt===z){if(at.tag===7){a(he,at.sibling),ne=k(at,ge.props.children),ne.return=he,he=ne;break e}}else if(at.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ue&&af(rt)===at.type){a(he,at.sibling),ne=k(at,ge.props),ne.ref=lo(he,at,ge),ne.return=he,he=ne;break e}a(he,at);break}else n(he,at);at=at.sibling}ge.type===z?(ne=$n(ge.props.children,he.mode,Fe,ge.key),ne.return=he,he=ne):(Fe=Qa(ge.type,ge.key,ge.props,null,he.mode,Fe),Fe.ref=lo(he,ne,ge),Fe.return=he,he=Fe)}return $(he);case A:e:{for(at=ge.key;ne!==null;){if(ne.key===at)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){a(he,ne.sibling),ne=k(ne,ge.children||[]),ne.return=he,he=ne;break e}else{a(he,ne);break}else n(he,ne);ne=ne.sibling}ne=Td(ge,he.mode,Fe),ne.return=he,he=ne}return $(he);case ue:return at=ge._init,Kt(he,ne,at(ge._payload),Fe)}if(J(ge))return Qe(he,ne,ge,Fe);if(M(ge))return tt(he,ne,ge,Fe);Ra(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ne!==null&&ne.tag===6?(a(he,ne.sibling),ne=k(ne,ge),ne.return=he,he=ne):(a(he,ne),ne=Rd(ge,he.mode,Fe),ne.return=he,he=ne),$(he)):a(he,ne)}return Kt}var us=lf(!0),cf=lf(!1),Ta=Zi(null),Aa=null,hs=null,Oc=null;function $c(){Oc=hs=Aa=null}function Fc(r){var n=Ta.current;At(Ta),r._currentValue=n}function Wc(r,n,a){for(;r!==null;){var x=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,x!==null&&(x.childLanes|=n)):x!==null&&(x.childLanes&n)!==n&&(x.childLanes|=n),r===a)break;r=r.return}}function ps(r,n){Aa=r,Oc=hs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&n)!==0&&(Ir=!0),r.firstContext=null)}function Xr(r){var n=r._currentValue;if(Oc!==r)if(r={context:r,memoizedValue:n,next:null},hs===null){if(Aa===null)throw Error(s(308));hs=r,Aa.dependencies={lanes:0,firstContext:r}}else hs=hs.next=r;return n}var zn=null;function Nc(r){zn===null?zn=[r]:zn.push(r)}function df(r,n,a,x){var k=n.interleaved;return k===null?(a.next=a,Nc(n)):(a.next=k.next,k.next=a),n.interleaved=a,Di(r,x)}function Di(r,n){r.lanes|=n;var a=r.alternate;for(a!==null&&(a.lanes|=n),a=r,r=r.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),a=r,r=r.return;return a.tag===3?a.stateNode:null}var rn=!1;function Hc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uf(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Mi(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function nn(r,n,a){var x=r.updateQueue;if(x===null)return null;if(x=x.shared,(yt&2)!==0){var k=x.pending;return k===null?n.next=n:(n.next=k.next,k.next=n),x.pending=n,Di(r,a)}return k=x.interleaved,k===null?(n.next=n,Nc(x)):(n.next=k.next,k.next=n),x.interleaved=n,Di(r,a)}function La(r,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var x=n.lanes;x&=r.pendingLanes,a|=x,n.lanes=a,ic(r,a)}}function hf(r,n){var a=r.updateQueue,x=r.alternate;if(x!==null&&(x=x.updateQueue,a===x)){var k=null,T=null;if(a=a.firstBaseUpdate,a!==null){do{var $={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};T===null?k=T=$:T=T.next=$,a=a.next}while(a!==null);T===null?k=T=n:T=T.next=n}else k=T=n;a={baseState:x.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:x.shared,effects:x.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=n:r.next=n,a.lastBaseUpdate=n}function za(r,n,a,x){var k=r.updateQueue;rn=!1;var T=k.firstBaseUpdate,$=k.lastBaseUpdate,q=k.shared.pending;if(q!==null){k.shared.pending=null;var te=q,_e=te.next;te.next=null,$===null?T=_e:$.next=_e,$=te;var ze=r.alternate;ze!==null&&(ze=ze.updateQueue,q=ze.lastBaseUpdate,q!==$&&(q===null?ze.firstBaseUpdate=_e:q.next=_e,ze.lastBaseUpdate=te))}if(T!==null){var Be=k.baseState;$=0,ze=_e=te=null,q=T;do{var Te=q.lane,qe=q.eventTime;if((x&Te)===Te){ze!==null&&(ze=ze.next={eventTime:qe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Qe=r,tt=q;switch(Te=n,qe=a,tt.tag){case 1:if(Qe=tt.payload,typeof Qe=="function"){Be=Qe.call(qe,Be,Te);break e}Be=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=tt.payload,Te=typeof Qe=="function"?Qe.call(qe,Be,Te):Qe,Te==null)break e;Be=I({},Be,Te);break e;case 2:rn=!0}}q.callback!==null&&q.lane!==0&&(r.flags|=64,Te=k.effects,Te===null?k.effects=[q]:Te.push(q))}else qe={eventTime:qe,lane:Te,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ze===null?(_e=ze=qe,te=Be):ze=ze.next=qe,$|=Te;if(q=q.next,q===null){if(q=k.shared.pending,q===null)break;Te=q,q=Te.next,Te.next=null,k.lastBaseUpdate=Te,k.shared.pending=null}}while(!0);if(ze===null&&(te=Be),k.baseState=te,k.firstBaseUpdate=_e,k.lastBaseUpdate=ze,n=k.shared.interleaved,n!==null){k=n;do $|=k.lane,k=k.next;while(k!==n)}else T===null&&(k.shared.lanes=0);Mn|=$,r.lanes=$,r.memoizedState=Be}}function pf(r,n,a){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var x=r[n],k=x.callback;if(k!==null){if(x.callback=null,x=a,typeof k!="function")throw Error(s(191,k));k.call(x)}}}var co={},bi=Zi(co),uo=Zi(co),ho=Zi(co);function In(r){if(r===co)throw Error(s(174));return r}function Uc(r,n){switch(Et(ho,n),Et(uo,r),Et(bi,co),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ct(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=Ct(n,r)}At(bi),Et(bi,n)}function fs(){At(bi),At(uo),At(ho)}function ff(r){In(ho.current);var n=In(bi.current),a=Ct(n,r.type);n!==a&&(Et(uo,r),Et(bi,a))}function Vc(r){uo.current===r&&(At(bi),At(uo))}var Mt=Zi(0);function Ia(r){for(var n=r;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Kc=[];function qc(){for(var r=0;r<Kc.length;r++)Kc[r]._workInProgressVersionPrimary=null;Kc.length=0}var Da=w.ReactCurrentDispatcher,Gc=w.ReactCurrentBatchConfig,Dn=0,Bt=null,tr=null,or=null,Ma=!1,po=!1,fo=0,Tv=0;function vr(){throw Error(s(321))}function Yc(r,n){if(n===null)return!1;for(var a=0;a<n.length&&a<r.length;a++)if(!ai(r[a],n[a]))return!1;return!0}function Xc(r,n,a,x,k,T){if(Dn=T,Bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Da.current=r===null||r.memoizedState===null?Iv:Dv,r=a(x,k),po){T=0;do{if(po=!1,fo=0,25<=T)throw Error(s(301));T+=1,or=tr=null,n.updateQueue=null,Da.current=Mv,r=a(x,k)}while(po)}if(Da.current=Oa,n=tr!==null&&tr.next!==null,Dn=0,or=tr=Bt=null,Ma=!1,n)throw Error(s(300));return r}function Jc(){var r=fo!==0;return fo=0,r}function _i(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?Bt.memoizedState=or=r:or=or.next=r,or}function Jr(){if(tr===null){var r=Bt.alternate;r=r!==null?r.memoizedState:null}else r=tr.next;var n=or===null?Bt.memoizedState:or.next;if(n!==null)or=n,tr=r;else{if(r===null)throw Error(s(310));tr=r,r={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},or===null?Bt.memoizedState=or=r:or=or.next=r}return or}function go(r,n){return typeof n=="function"?n(r):n}function Qc(r){var n=Jr(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var x=tr,k=x.baseQueue,T=a.pending;if(T!==null){if(k!==null){var $=k.next;k.next=T.next,T.next=$}x.baseQueue=k=T,a.pending=null}if(k!==null){T=k.next,x=x.baseState;var q=$=null,te=null,_e=T;do{var ze=_e.lane;if((Dn&ze)===ze)te!==null&&(te=te.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),x=_e.hasEagerState?_e.eagerState:r(x,_e.action);else{var Be={lane:ze,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};te===null?(q=te=Be,$=x):te=te.next=Be,Bt.lanes|=ze,Mn|=ze}_e=_e.next}while(_e!==null&&_e!==T);te===null?$=x:te.next=q,ai(x,n.memoizedState)||(Ir=!0),n.memoizedState=x,n.baseState=$,n.baseQueue=te,a.lastRenderedState=x}if(r=a.interleaved,r!==null){k=r;do T=k.lane,Bt.lanes|=T,Mn|=T,k=k.next;while(k!==r)}else k===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function Zc(r){var n=Jr(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var x=a.dispatch,k=a.pending,T=n.memoizedState;if(k!==null){a.pending=null;var $=k=k.next;do T=r(T,$.action),$=$.next;while($!==k);ai(T,n.memoizedState)||(Ir=!0),n.memoizedState=T,n.baseQueue===null&&(n.baseState=T),a.lastRenderedState=T}return[T,x]}function gf(){}function xf(r,n){var a=Bt,x=Jr(),k=n(),T=!ai(x.memoizedState,k);if(T&&(x.memoizedState=k,Ir=!0),x=x.queue,ed(vf.bind(null,a,x,r),[r]),x.getSnapshot!==n||T||or!==null&&or.memoizedState.tag&1){if(a.flags|=2048,xo(9,yf.bind(null,a,x,k,n),void 0,null),ar===null)throw Error(s(349));(Dn&30)!==0||mf(a,n,k)}return k}function mf(r,n,a){r.flags|=16384,r={getSnapshot:n,value:a},n=Bt.updateQueue,n===null?(n={lastEffect:null,stores:null},Bt.updateQueue=n,n.stores=[r]):(a=n.stores,a===null?n.stores=[r]:a.push(r))}function yf(r,n,a,x){n.value=a,n.getSnapshot=x,bf(n)&&_f(r)}function vf(r,n,a){return a(function(){bf(n)&&_f(r)})}function bf(r){var n=r.getSnapshot;r=r.value;try{var a=n();return!ai(r,a)}catch{return!0}}function _f(r){var n=Di(r,1);n!==null&&hi(n,r,1,-1)}function Sf(r){var n=_i();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:r},n.queue=r,r=r.dispatch=zv.bind(null,Bt,r),[n.memoizedState,r]}function xo(r,n,a,x){return r={tag:r,create:n,destroy:a,deps:x,next:null},n=Bt.updateQueue,n===null?(n={lastEffect:null,stores:null},Bt.updateQueue=n,n.lastEffect=r.next=r):(a=n.lastEffect,a===null?n.lastEffect=r.next=r:(x=a.next,a.next=r,r.next=x,n.lastEffect=r)),r}function wf(){return Jr().memoizedState}function Ba(r,n,a,x){var k=_i();Bt.flags|=r,k.memoizedState=xo(1|n,a,void 0,x===void 0?null:x)}function Pa(r,n,a,x){var k=Jr();x=x===void 0?null:x;var T=void 0;if(tr!==null){var $=tr.memoizedState;if(T=$.destroy,x!==null&&Yc(x,$.deps)){k.memoizedState=xo(n,a,T,x);return}}Bt.flags|=r,k.memoizedState=xo(1|n,a,T,x)}function Cf(r,n){return Ba(8390656,8,r,n)}function ed(r,n){return Pa(2048,8,r,n)}function kf(r,n){return Pa(4,2,r,n)}function jf(r,n){return Pa(4,4,r,n)}function Ef(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function Rf(r,n,a){return a=a!=null?a.concat([r]):null,Pa(4,4,Ef.bind(null,n,r),a)}function td(){}function Tf(r,n){var a=Jr();n=n===void 0?null:n;var x=a.memoizedState;return x!==null&&n!==null&&Yc(n,x[1])?x[0]:(a.memoizedState=[r,n],r)}function Af(r,n){var a=Jr();n=n===void 0?null:n;var x=a.memoizedState;return x!==null&&n!==null&&Yc(n,x[1])?x[0]:(r=r(),a.memoizedState=[r,n],r)}function Lf(r,n,a){return(Dn&21)===0?(r.baseState&&(r.baseState=!1,Ir=!0),r.memoizedState=a):(ai(a,n)||(a=op(),Bt.lanes|=a,Mn|=a,r.baseState=!0),n)}function Av(r,n){var a=wt;wt=a!==0&&4>a?a:4,r(!0);var x=Gc.transition;Gc.transition={};try{r(!1),n()}finally{wt=a,Gc.transition=x}}function zf(){return Jr().memoizedState}function Lv(r,n,a){var x=ln(r);if(a={lane:x,action:a,hasEagerState:!1,eagerState:null,next:null},If(r))Df(n,a);else if(a=df(r,n,a,x),a!==null){var k=Cr();hi(a,r,x,k),Mf(a,n,x)}}function zv(r,n,a){var x=ln(r),k={lane:x,action:a,hasEagerState:!1,eagerState:null,next:null};if(If(r))Df(n,k);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=n.lastRenderedReducer,T!==null))try{var $=n.lastRenderedState,q=T($,a);if(k.hasEagerState=!0,k.eagerState=q,ai(q,$)){var te=n.interleaved;te===null?(k.next=k,Nc(n)):(k.next=te.next,te.next=k),n.interleaved=k;return}}catch{}finally{}a=df(r,n,k,x),a!==null&&(k=Cr(),hi(a,r,x,k),Mf(a,n,x))}}function If(r){var n=r.alternate;return r===Bt||n!==null&&n===Bt}function Df(r,n){po=Ma=!0;var a=r.pending;a===null?n.next=n:(n.next=a.next,a.next=n),r.pending=n}function Mf(r,n,a){if((a&4194240)!==0){var x=n.lanes;x&=r.pendingLanes,a|=x,n.lanes=a,ic(r,a)}}var Oa={readContext:Xr,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},Iv={readContext:Xr,useCallback:function(r,n){return _i().memoizedState=[r,n===void 0?null:n],r},useContext:Xr,useEffect:Cf,useImperativeHandle:function(r,n,a){return a=a!=null?a.concat([r]):null,Ba(4194308,4,Ef.bind(null,n,r),a)},useLayoutEffect:function(r,n){return Ba(4194308,4,r,n)},useInsertionEffect:function(r,n){return Ba(4,2,r,n)},useMemo:function(r,n){var a=_i();return n=n===void 0?null:n,r=r(),a.memoizedState=[r,n],r},useReducer:function(r,n,a){var x=_i();return n=a!==void 0?a(n):n,x.memoizedState=x.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},x.queue=r,r=r.dispatch=Lv.bind(null,Bt,r),[x.memoizedState,r]},useRef:function(r){var n=_i();return r={current:r},n.memoizedState=r},useState:Sf,useDebugValue:td,useDeferredValue:function(r){return _i().memoizedState=r},useTransition:function(){var r=Sf(!1),n=r[0];return r=Av.bind(null,r[1]),_i().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,a){var x=Bt,k=_i();if(zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),ar===null)throw Error(s(349));(Dn&30)!==0||mf(x,n,a)}k.memoizedState=a;var T={value:a,getSnapshot:n};return k.queue=T,Cf(vf.bind(null,x,T,r),[r]),x.flags|=2048,xo(9,yf.bind(null,x,T,a,n),void 0,null),a},useId:function(){var r=_i(),n=ar.identifierPrefix;if(zt){var a=Ii,x=zi;a=(x&~(1<<32-oi(x)-1)).toString(32)+a,n=":"+n+"R"+a,a=fo++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=Tv++,n=":"+n+"r"+a.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},Dv={readContext:Xr,useCallback:Tf,useContext:Xr,useEffect:ed,useImperativeHandle:Rf,useInsertionEffect:kf,useLayoutEffect:jf,useMemo:Af,useReducer:Qc,useRef:wf,useState:function(){return Qc(go)},useDebugValue:td,useDeferredValue:function(r){var n=Jr();return Lf(n,tr.memoizedState,r)},useTransition:function(){var r=Qc(go)[0],n=Jr().memoizedState;return[r,n]},useMutableSource:gf,useSyncExternalStore:xf,useId:zf,unstable_isNewReconciler:!1},Mv={readContext:Xr,useCallback:Tf,useContext:Xr,useEffect:ed,useImperativeHandle:Rf,useInsertionEffect:kf,useLayoutEffect:jf,useMemo:Af,useReducer:Zc,useRef:wf,useState:function(){return Zc(go)},useDebugValue:td,useDeferredValue:function(r){var n=Jr();return tr===null?n.memoizedState=r:Lf(n,tr.memoizedState,r)},useTransition:function(){var r=Zc(go)[0],n=Jr().memoizedState;return[r,n]},useMutableSource:gf,useSyncExternalStore:xf,useId:zf,unstable_isNewReconciler:!1};function ci(r,n){if(r&&r.defaultProps){n=I({},n),r=r.defaultProps;for(var a in r)n[a]===void 0&&(n[a]=r[a]);return n}return n}function rd(r,n,a,x){n=r.memoizedState,a=a(x,n),a=a==null?n:I({},n,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var $a={isMounted:function(r){return(r=r._reactInternals)?Oe(r)===r:!1},enqueueSetState:function(r,n,a){r=r._reactInternals;var x=Cr(),k=ln(r),T=Mi(x,k);T.payload=n,a!=null&&(T.callback=a),n=nn(r,T,k),n!==null&&(hi(n,r,k,x),La(n,r,k))},enqueueReplaceState:function(r,n,a){r=r._reactInternals;var x=Cr(),k=ln(r),T=Mi(x,k);T.tag=1,T.payload=n,a!=null&&(T.callback=a),n=nn(r,T,k),n!==null&&(hi(n,r,k,x),La(n,r,k))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var a=Cr(),x=ln(r),k=Mi(a,x);k.tag=2,n!=null&&(k.callback=n),n=nn(r,k,x),n!==null&&(hi(n,r,x,a),La(n,r,x))}};function Bf(r,n,a,x,k,T,$){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(x,T,$):n.prototype&&n.prototype.isPureReactComponent?!to(a,x)||!to(k,T):!0}function Pf(r,n,a){var x=!1,k=en,T=n.contextType;return typeof T=="object"&&T!==null?T=Xr(T):(k=zr(n)?Tn:yr.current,x=n.contextTypes,T=(x=x!=null)?as(r,k):en),n=new n(a,T),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$a,r.stateNode=n,n._reactInternals=r,x&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=k,r.__reactInternalMemoizedMaskedChildContext=T),n}function Of(r,n,a,x){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,x),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,x),n.state!==r&&$a.enqueueReplaceState(n,n.state,null)}function id(r,n,a,x){var k=r.stateNode;k.props=a,k.state=r.memoizedState,k.refs={},Hc(r);var T=n.contextType;typeof T=="object"&&T!==null?k.context=Xr(T):(T=zr(n)?Tn:yr.current,k.context=as(r,T)),k.state=r.memoizedState,T=n.getDerivedStateFromProps,typeof T=="function"&&(rd(r,n,T,a),k.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(n=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),n!==k.state&&$a.enqueueReplaceState(k,k.state,null),za(r,a,k,x),k.state=r.memoizedState),typeof k.componentDidMount=="function"&&(r.flags|=4194308)}function gs(r,n){try{var a="",x=n;do a+=we(x),x=x.return;while(x);var k=a}catch(T){k=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:n,stack:k,digest:null}}function nd(r,n,a){return{value:r,source:null,stack:a??null,digest:n??null}}function sd(r,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var Bv=typeof WeakMap=="function"?WeakMap:Map;function $f(r,n,a){a=Mi(-1,a),a.tag=3,a.payload={element:null};var x=n.value;return a.callback=function(){Ka||(Ka=!0,bd=x),sd(r,n)},a}function Ff(r,n,a){a=Mi(-1,a),a.tag=3;var x=r.type.getDerivedStateFromError;if(typeof x=="function"){var k=n.value;a.payload=function(){return x(k)},a.callback=function(){sd(r,n)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){sd(r,n),typeof x!="function"&&(on===null?on=new Set([this]):on.add(this));var $=n.stack;this.componentDidCatch(n.value,{componentStack:$!==null?$:""})}),a}function Wf(r,n,a){var x=r.pingCache;if(x===null){x=r.pingCache=new Bv;var k=new Set;x.set(n,k)}else k=x.get(n),k===void 0&&(k=new Set,x.set(n,k));k.has(a)||(k.add(a),r=Xv.bind(null,r,n,a),n.then(r,r))}function Nf(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function Hf(r,n,a,x,k){return(r.mode&1)===0?(r===n?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=Mi(-1,1),n.tag=2,nn(a,n,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=k,r)}var Pv=w.ReactCurrentOwner,Ir=!1;function wr(r,n,a,x){n.child=r===null?cf(n,null,a,x):us(n,r.child,a,x)}function Uf(r,n,a,x,k){a=a.render;var T=n.ref;return ps(n,k),x=Xc(r,n,a,x,T,k),a=Jc(),r!==null&&!Ir?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Bi(r,n,k)):(zt&&a&&Ic(n),n.flags|=1,wr(r,n,x,k),n.child)}function Vf(r,n,a,x,k){if(r===null){var T=a.type;return typeof T=="function"&&!Ed(T)&&T.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=T,Kf(r,n,T,x,k)):(r=Qa(a.type,null,x,n,n.mode,k),r.ref=n.ref,r.return=n,n.child=r)}if(T=r.child,(r.lanes&k)===0){var $=T.memoizedProps;if(a=a.compare,a=a!==null?a:to,a($,x)&&r.ref===n.ref)return Bi(r,n,k)}return n.flags|=1,r=dn(T,x),r.ref=n.ref,r.return=n,n.child=r}function Kf(r,n,a,x,k){if(r!==null){var T=r.memoizedProps;if(to(T,x)&&r.ref===n.ref)if(Ir=!1,n.pendingProps=x=T,(r.lanes&k)!==0)(r.flags&131072)!==0&&(Ir=!0);else return n.lanes=r.lanes,Bi(r,n,k)}return od(r,n,a,x,k)}function qf(r,n,a){var x=n.pendingProps,k=x.children,T=r!==null?r.memoizedState:null;if(x.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ms,Ur),Ur|=a;else{if((a&1073741824)===0)return r=T!==null?T.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,Et(ms,Ur),Ur|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=T!==null?T.baseLanes:a,Et(ms,Ur),Ur|=x}else T!==null?(x=T.baseLanes|a,n.memoizedState=null):x=a,Et(ms,Ur),Ur|=x;return wr(r,n,k,a),n.child}function Gf(r,n){var a=n.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function od(r,n,a,x,k){var T=zr(a)?Tn:yr.current;return T=as(n,T),ps(n,k),a=Xc(r,n,a,x,T,k),x=Jc(),r!==null&&!Ir?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Bi(r,n,k)):(zt&&x&&Ic(n),n.flags|=1,wr(r,n,a,k),n.child)}function Yf(r,n,a,x,k){if(zr(a)){var T=!0;wa(n)}else T=!1;if(ps(n,k),n.stateNode===null)Wa(r,n),Pf(n,a,x),id(n,a,x,k),x=!0;else if(r===null){var $=n.stateNode,q=n.memoizedProps;$.props=q;var te=$.context,_e=a.contextType;typeof _e=="object"&&_e!==null?_e=Xr(_e):(_e=zr(a)?Tn:yr.current,_e=as(n,_e));var ze=a.getDerivedStateFromProps,Be=typeof ze=="function"||typeof $.getSnapshotBeforeUpdate=="function";Be||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(q!==x||te!==_e)&&Of(n,$,x,_e),rn=!1;var Te=n.memoizedState;$.state=Te,za(n,x,$,k),te=n.memoizedState,q!==x||Te!==te||Lr.current||rn?(typeof ze=="function"&&(rd(n,a,ze,x),te=n.memoizedState),(q=rn||Bf(n,a,q,x,Te,te,_e))?(Be||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(n.flags|=4194308)):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=x,n.memoizedState=te),$.props=x,$.state=te,$.context=_e,x=q):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),x=!1)}else{$=n.stateNode,uf(r,n),q=n.memoizedProps,_e=n.type===n.elementType?q:ci(n.type,q),$.props=_e,Be=n.pendingProps,Te=$.context,te=a.contextType,typeof te=="object"&&te!==null?te=Xr(te):(te=zr(a)?Tn:yr.current,te=as(n,te));var qe=a.getDerivedStateFromProps;(ze=typeof qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(q!==Be||Te!==te)&&Of(n,$,x,te),rn=!1,Te=n.memoizedState,$.state=Te,za(n,x,$,k);var Qe=n.memoizedState;q!==Be||Te!==Qe||Lr.current||rn?(typeof qe=="function"&&(rd(n,a,qe,x),Qe=n.memoizedState),(_e=rn||Bf(n,a,_e,x,Te,Qe,te)||!1)?(ze||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(x,Qe,te),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(x,Qe,te)),typeof $.componentDidUpdate=="function"&&(n.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof $.componentDidUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),n.memoizedProps=x,n.memoizedState=Qe),$.props=x,$.state=Qe,$.context=te,x=_e):(typeof $.componentDidUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||q===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),x=!1)}return ad(r,n,a,x,T,k)}function ad(r,n,a,x,k,T){Gf(r,n);var $=(n.flags&128)!==0;if(!x&&!$)return k&&Zp(n,a,!1),Bi(r,n,T);x=n.stateNode,Pv.current=n;var q=$&&typeof a.getDerivedStateFromError!="function"?null:x.render();return n.flags|=1,r!==null&&$?(n.child=us(n,r.child,null,T),n.child=us(n,null,q,T)):wr(r,n,q,T),n.memoizedState=x.state,k&&Zp(n,a,!0),n.child}function Xf(r){var n=r.stateNode;n.pendingContext?Jp(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Jp(r,n.context,!1),Uc(r,n.containerInfo)}function Jf(r,n,a,x,k){return ds(),Pc(k),n.flags|=256,wr(r,n,a,x),n.child}var ld={dehydrated:null,treeContext:null,retryLane:0};function cd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Qf(r,n,a){var x=n.pendingProps,k=Mt.current,T=!1,$=(n.flags&128)!==0,q;if((q=$)||(q=r!==null&&r.memoizedState===null?!1:(k&2)!==0),q?(T=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(k|=1),Et(Mt,k&1),r===null)return Bc(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((n.mode&1)===0?n.lanes=1:r.data==="$!"?n.lanes=8:n.lanes=1073741824,null):($=x.children,r=x.fallback,T?(x=n.mode,T=n.child,$={mode:"hidden",children:$},(x&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=$):T=Za($,x,0,null),r=$n(r,x,a,null),T.return=n,r.return=n,T.sibling=r,n.child=T,n.child.memoizedState=cd(a),n.memoizedState=ld,r):dd(n,$));if(k=r.memoizedState,k!==null&&(q=k.dehydrated,q!==null))return Ov(r,n,$,x,q,k,a);if(T){T=x.fallback,$=n.mode,k=r.child,q=k.sibling;var te={mode:"hidden",children:x.children};return($&1)===0&&n.child!==k?(x=n.child,x.childLanes=0,x.pendingProps=te,n.deletions=null):(x=dn(k,te),x.subtreeFlags=k.subtreeFlags&14680064),q!==null?T=dn(q,T):(T=$n(T,$,a,null),T.flags|=2),T.return=n,x.return=n,x.sibling=T,n.child=x,x=T,T=n.child,$=r.child.memoizedState,$=$===null?cd(a):{baseLanes:$.baseLanes|a,cachePool:null,transitions:$.transitions},T.memoizedState=$,T.childLanes=r.childLanes&~a,n.memoizedState=ld,x}return T=r.child,r=T.sibling,x=dn(T,{mode:"visible",children:x.children}),(n.mode&1)===0&&(x.lanes=a),x.return=n,x.sibling=null,r!==null&&(a=n.deletions,a===null?(n.deletions=[r],n.flags|=16):a.push(r)),n.child=x,n.memoizedState=null,x}function dd(r,n){return n=Za({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Fa(r,n,a,x){return x!==null&&Pc(x),us(n,r.child,null,a),r=dd(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function Ov(r,n,a,x,k,T,$){if(a)return n.flags&256?(n.flags&=-257,x=nd(Error(s(422))),Fa(r,n,$,x)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(T=x.fallback,k=n.mode,x=Za({mode:"visible",children:x.children},k,0,null),T=$n(T,k,$,null),T.flags|=2,x.return=n,T.return=n,x.sibling=T,n.child=x,(n.mode&1)!==0&&us(n,r.child,null,$),n.child.memoizedState=cd($),n.memoizedState=ld,T);if((n.mode&1)===0)return Fa(r,n,$,null);if(k.data==="$!"){if(x=k.nextSibling&&k.nextSibling.dataset,x)var q=x.dgst;return x=q,T=Error(s(419)),x=nd(T,x,void 0),Fa(r,n,$,x)}if(q=($&r.childLanes)!==0,Ir||q){if(x=ar,x!==null){switch($&-$){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(x.suspendedLanes|$))!==0?0:k,k!==0&&k!==T.retryLane&&(T.retryLane=k,Di(r,k),hi(x,r,k,-1))}return jd(),x=nd(Error(s(421))),Fa(r,n,$,x)}return k.data==="$?"?(n.flags|=128,n.child=r.child,n=Jv.bind(null,r),k._reactRetry=n,null):(r=T.treeContext,Hr=Qi(k.nextSibling),Nr=n,zt=!0,li=null,r!==null&&(Gr[Yr++]=zi,Gr[Yr++]=Ii,Gr[Yr++]=An,zi=r.id,Ii=r.overflow,An=n),n=dd(n,x.children),n.flags|=4096,n)}function Zf(r,n,a){r.lanes|=n;var x=r.alternate;x!==null&&(x.lanes|=n),Wc(r.return,n,a)}function ud(r,n,a,x,k){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:x,tail:a,tailMode:k}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=x,T.tail=a,T.tailMode=k)}function eg(r,n,a){var x=n.pendingProps,k=x.revealOrder,T=x.tail;if(wr(r,n,x.children,a),x=Mt.current,(x&2)!==0)x=x&1|2,n.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Zf(r,a,n);else if(r.tag===19)Zf(r,a,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}x&=1}if(Et(Mt,x),(n.mode&1)===0)n.memoizedState=null;else switch(k){case"forwards":for(a=n.child,k=null;a!==null;)r=a.alternate,r!==null&&Ia(r)===null&&(k=a),a=a.sibling;a=k,a===null?(k=n.child,n.child=null):(k=a.sibling,a.sibling=null),ud(n,!1,k,a,T);break;case"backwards":for(a=null,k=n.child,n.child=null;k!==null;){if(r=k.alternate,r!==null&&Ia(r)===null){n.child=k;break}r=k.sibling,k.sibling=a,a=k,k=r}ud(n,!0,a,null,T);break;case"together":ud(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wa(r,n){(n.mode&1)===0&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Bi(r,n,a){if(r!==null&&(n.dependencies=r.dependencies),Mn|=n.lanes,(a&n.childLanes)===0)return null;if(r!==null&&n.child!==r.child)throw Error(s(153));if(n.child!==null){for(r=n.child,a=dn(r,r.pendingProps),n.child=a,a.return=n;r.sibling!==null;)r=r.sibling,a=a.sibling=dn(r,r.pendingProps),a.return=n;a.sibling=null}return n.child}function $v(r,n,a){switch(n.tag){case 3:Xf(n),ds();break;case 5:ff(n);break;case 1:zr(n.type)&&wa(n);break;case 4:Uc(n,n.stateNode.containerInfo);break;case 10:var x=n.type._context,k=n.memoizedProps.value;Et(Ta,x._currentValue),x._currentValue=k;break;case 13:if(x=n.memoizedState,x!==null)return x.dehydrated!==null?(Et(Mt,Mt.current&1),n.flags|=128,null):(a&n.child.childLanes)!==0?Qf(r,n,a):(Et(Mt,Mt.current&1),r=Bi(r,n,a),r!==null?r.sibling:null);Et(Mt,Mt.current&1);break;case 19:if(x=(a&n.childLanes)!==0,(r.flags&128)!==0){if(x)return eg(r,n,a);n.flags|=128}if(k=n.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Et(Mt,Mt.current),x)break;return null;case 22:case 23:return n.lanes=0,qf(r,n,a)}return Bi(r,n,a)}var tg,hd,rg,ig;tg=function(r,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hd=function(){},rg=function(r,n,a,x){var k=r.memoizedProps;if(k!==x){r=n.stateNode,In(bi.current);var T=null;switch(a){case"input":k=pe(r,k),x=pe(r,x),T=[];break;case"select":k=I({},k,{value:void 0}),x=I({},x,{value:void 0}),T=[];break;case"textarea":k=Ne(r,k),x=Ne(r,x),T=[];break;default:typeof k.onClick!="function"&&typeof x.onClick=="function"&&(r.onclick=ba)}fr(a,x);var $;a=null;for(_e in k)if(!x.hasOwnProperty(_e)&&k.hasOwnProperty(_e)&&k[_e]!=null)if(_e==="style"){var q=k[_e];for($ in q)q.hasOwnProperty($)&&(a||(a={}),a[$]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(u.hasOwnProperty(_e)?T||(T=[]):(T=T||[]).push(_e,null));for(_e in x){var te=x[_e];if(q=k!=null?k[_e]:void 0,x.hasOwnProperty(_e)&&te!==q&&(te!=null||q!=null))if(_e==="style")if(q){for($ in q)!q.hasOwnProperty($)||te&&te.hasOwnProperty($)||(a||(a={}),a[$]="");for($ in te)te.hasOwnProperty($)&&q[$]!==te[$]&&(a||(a={}),a[$]=te[$])}else a||(T||(T=[]),T.push(_e,a)),a=te;else _e==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,q=q?q.__html:void 0,te!=null&&q!==te&&(T=T||[]).push(_e,te)):_e==="children"?typeof te!="string"&&typeof te!="number"||(T=T||[]).push(_e,""+te):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(u.hasOwnProperty(_e)?(te!=null&&_e==="onScroll"&&Tt("scroll",r),T||q===te||(T=[])):(T=T||[]).push(_e,te))}a&&(T=T||[]).push("style",a);var _e=T;(n.updateQueue=_e)&&(n.flags|=4)}},ig=function(r,n,a,x){a!==x&&(n.flags|=4)};function mo(r,n){if(!zt)switch(r.tailMode){case"hidden":n=r.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var x=null;a!==null;)a.alternate!==null&&(x=a),a=a.sibling;x===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:x.sibling=null}}function br(r){var n=r.alternate!==null&&r.alternate.child===r.child,a=0,x=0;if(n)for(var k=r.child;k!==null;)a|=k.lanes|k.childLanes,x|=k.subtreeFlags&14680064,x|=k.flags&14680064,k.return=r,k=k.sibling;else for(k=r.child;k!==null;)a|=k.lanes|k.childLanes,x|=k.subtreeFlags,x|=k.flags,k.return=r,k=k.sibling;return r.subtreeFlags|=x,r.childLanes=a,n}function Fv(r,n,a){var x=n.pendingProps;switch(Dc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(n),null;case 1:return zr(n.type)&&Sa(),br(n),null;case 3:return x=n.stateNode,fs(),At(Lr),At(yr),qc(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(r===null||r.child===null)&&(Ea(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,li!==null&&(wd(li),li=null))),hd(r,n),br(n),null;case 5:Vc(n);var k=In(ho.current);if(a=n.type,r!==null&&n.stateNode!=null)rg(r,n,a,x,k),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!x){if(n.stateNode===null)throw Error(s(166));return br(n),null}if(r=In(bi.current),Ea(n)){x=n.stateNode,a=n.type;var T=n.memoizedProps;switch(x[vi]=n,x[oo]=T,r=(n.mode&1)!==0,a){case"dialog":Tt("cancel",x),Tt("close",x);break;case"iframe":case"object":case"embed":Tt("load",x);break;case"video":case"audio":for(k=0;k<io.length;k++)Tt(io[k],x);break;case"source":Tt("error",x);break;case"img":case"image":case"link":Tt("error",x),Tt("load",x);break;case"details":Tt("toggle",x);break;case"input":De(x,T),Tt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!T.multiple},Tt("invalid",x);break;case"textarea":et(x,T),Tt("invalid",x)}fr(a,T),k=null;for(var $ in T)if(T.hasOwnProperty($)){var q=T[$];$==="children"?typeof q=="string"?x.textContent!==q&&(T.suppressHydrationWarning!==!0&&va(x.textContent,q,r),k=["children",q]):typeof q=="number"&&x.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&va(x.textContent,q,r),k=["children",""+q]):u.hasOwnProperty($)&&q!=null&&$==="onScroll"&&Tt("scroll",x)}switch(a){case"input":Ie(x),Ee(x,T,!0);break;case"textarea":Ie(x),pt(x);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(x.onclick=ba)}x=k,n.updateQueue=x,x!==null&&(n.flags|=4)}else{$=k.nodeType===9?k:k.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Gt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=$.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof x.is=="string"?r=$.createElement(a,{is:x.is}):(r=$.createElement(a),a==="select"&&($=r,x.multiple?$.multiple=!0:x.size&&($.size=x.size))):r=$.createElementNS(r,a),r[vi]=n,r[oo]=x,tg(r,n,!1,!1),n.stateNode=r;e:{switch($=Tr(a,x),a){case"dialog":Tt("cancel",r),Tt("close",r),k=x;break;case"iframe":case"object":case"embed":Tt("load",r),k=x;break;case"video":case"audio":for(k=0;k<io.length;k++)Tt(io[k],r);k=x;break;case"source":Tt("error",r),k=x;break;case"img":case"image":case"link":Tt("error",r),Tt("load",r),k=x;break;case"details":Tt("toggle",r),k=x;break;case"input":De(r,x),k=pe(r,x),Tt("invalid",r);break;case"option":k=x;break;case"select":r._wrapperState={wasMultiple:!!x.multiple},k=I({},x,{value:void 0}),Tt("invalid",r);break;case"textarea":et(r,x),k=Ne(r,x),Tt("invalid",r);break;default:k=x}fr(a,k),q=k;for(T in q)if(q.hasOwnProperty(T)){var te=q[T];T==="style"?pr(r,te):T==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Lt(r,te)):T==="children"?typeof te=="string"?(a!=="textarea"||te!=="")&&bt(r,te):typeof te=="number"&&bt(r,""+te):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?te!=null&&T==="onScroll"&&Tt("scroll",r):te!=null&&g(r,T,te,$))}switch(a){case"input":Ie(r),Ee(r,x,!1);break;case"textarea":Ie(r),pt(r);break;case"option":x.value!=null&&r.setAttribute("value",""+F(x.value));break;case"select":r.multiple=!!x.multiple,T=x.value,T!=null?ce(r,!!x.multiple,T,!1):x.defaultValue!=null&&ce(r,!!x.multiple,x.defaultValue,!0);break;default:typeof k.onClick=="function"&&(r.onclick=ba)}switch(a){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return br(n),null;case 6:if(r&&n.stateNode!=null)ig(r,n,r.memoizedProps,x);else{if(typeof x!="string"&&n.stateNode===null)throw Error(s(166));if(a=In(ho.current),In(bi.current),Ea(n)){if(x=n.stateNode,a=n.memoizedProps,x[vi]=n,(T=x.nodeValue!==a)&&(r=Nr,r!==null))switch(r.tag){case 3:va(x.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&va(x.nodeValue,a,(r.mode&1)!==0)}T&&(n.flags|=4)}else x=(a.nodeType===9?a:a.ownerDocument).createTextNode(x),x[vi]=n,n.stateNode=x}return br(n),null;case 13:if(At(Mt),x=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(zt&&Hr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)of(),ds(),n.flags|=98560,T=!1;else if(T=Ea(n),x!==null&&x.dehydrated!==null){if(r===null){if(!T)throw Error(s(318));if(T=n.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(s(317));T[vi]=n}else ds(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;br(n),T=!1}else li!==null&&(wd(li),li=null),T=!0;if(!T)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=a,n):(x=x!==null,x!==(r!==null&&r.memoizedState!==null)&&x&&(n.child.flags|=8192,(n.mode&1)!==0&&(r===null||(Mt.current&1)!==0?rr===0&&(rr=3):jd())),n.updateQueue!==null&&(n.flags|=4),br(n),null);case 4:return fs(),hd(r,n),r===null&&no(n.stateNode.containerInfo),br(n),null;case 10:return Fc(n.type._context),br(n),null;case 17:return zr(n.type)&&Sa(),br(n),null;case 19:if(At(Mt),T=n.memoizedState,T===null)return br(n),null;if(x=(n.flags&128)!==0,$=T.rendering,$===null)if(x)mo(T,!1);else{if(rr!==0||r!==null&&(r.flags&128)!==0)for(r=n.child;r!==null;){if($=Ia(r),$!==null){for(n.flags|=128,mo(T,!1),x=$.updateQueue,x!==null&&(n.updateQueue=x,n.flags|=4),n.subtreeFlags=0,x=a,a=n.child;a!==null;)T=a,r=x,T.flags&=14680066,$=T.alternate,$===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=$.childLanes,T.lanes=$.lanes,T.child=$.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=$.memoizedProps,T.memoizedState=$.memoizedState,T.updateQueue=$.updateQueue,T.type=$.type,r=$.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Et(Mt,Mt.current&1|2),n.child}r=r.sibling}T.tail!==null&&Vt()>ys&&(n.flags|=128,x=!0,mo(T,!1),n.lanes=4194304)}else{if(!x)if(r=Ia($),r!==null){if(n.flags|=128,x=!0,a=r.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),mo(T,!0),T.tail===null&&T.tailMode==="hidden"&&!$.alternate&&!zt)return br(n),null}else 2*Vt()-T.renderingStartTime>ys&&a!==1073741824&&(n.flags|=128,x=!0,mo(T,!1),n.lanes=4194304);T.isBackwards?($.sibling=n.child,n.child=$):(a=T.last,a!==null?a.sibling=$:n.child=$,T.last=$)}return T.tail!==null?(n=T.tail,T.rendering=n,T.tail=n.sibling,T.renderingStartTime=Vt(),n.sibling=null,a=Mt.current,Et(Mt,x?a&1|2:a&1),n):(br(n),null);case 22:case 23:return kd(),x=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==x&&(n.flags|=8192),x&&(n.mode&1)!==0?(Ur&1073741824)!==0&&(br(n),n.subtreeFlags&6&&(n.flags|=8192)):br(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Wv(r,n){switch(Dc(n),n.tag){case 1:return zr(n.type)&&Sa(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return fs(),At(Lr),At(yr),qc(),r=n.flags,(r&65536)!==0&&(r&128)===0?(n.flags=r&-65537|128,n):null;case 5:return Vc(n),null;case 13:if(At(Mt),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(s(340));ds()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return At(Mt),null;case 4:return fs(),null;case 10:return Fc(n.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Na=!1,_r=!1,Nv=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function xs(r,n){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(x){$t(r,n,x)}else a.current=null}function pd(r,n,a){try{a()}catch(x){$t(r,n,x)}}var ng=!1;function Hv(r,n){if(kc=la,r=Mp(),mc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var x=a.getSelection&&a.getSelection();if(x&&x.rangeCount!==0){a=x.anchorNode;var k=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{a.nodeType,T.nodeType}catch{a=null;break e}var $=0,q=-1,te=-1,_e=0,ze=0,Be=r,Te=null;t:for(;;){for(var qe;Be!==a||k!==0&&Be.nodeType!==3||(q=$+k),Be!==T||x!==0&&Be.nodeType!==3||(te=$+x),Be.nodeType===3&&($+=Be.nodeValue.length),(qe=Be.firstChild)!==null;)Te=Be,Be=qe;for(;;){if(Be===r)break t;if(Te===a&&++_e===k&&(q=$),Te===T&&++ze===x&&(te=$),(qe=Be.nextSibling)!==null)break;Be=Te,Te=Be.parentNode}Be=qe}a=q===-1||te===-1?null:{start:q,end:te}}else a=null}a=a||{start:0,end:0}}else a=null;for(jc={focusedElem:r,selectionRange:a},la=!1,Ye=n;Ye!==null;)if(n=Ye,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,Ye=r;else for(;Ye!==null;){n=Ye;try{var Qe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var tt=Qe.memoizedProps,Kt=Qe.memoizedState,he=n.stateNode,ne=he.getSnapshotBeforeUpdate(n.elementType===n.type?tt:ci(n.type,tt),Kt);he.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ge=n.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Fe){$t(n,n.return,Fe)}if(r=n.sibling,r!==null){r.return=n.return,Ye=r;break}Ye=n.return}return Qe=ng,ng=!1,Qe}function yo(r,n,a){var x=n.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&r)===r){var T=k.destroy;k.destroy=void 0,T!==void 0&&pd(n,a,T)}k=k.next}while(k!==x)}}function Ha(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&r)===r){var x=a.create;a.destroy=x()}a=a.next}while(a!==n)}}function fd(r){var n=r.ref;if(n!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof n=="function"?n(r):n.current=r}}function sg(r){var n=r.alternate;n!==null&&(r.alternate=null,sg(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[vi],delete n[oo],delete n[Ac],delete n[kv],delete n[jv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function og(r){return r.tag===5||r.tag===3||r.tag===4}function ag(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||og(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gd(r,n,a){var x=r.tag;if(x===5||x===6)r=r.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(r,n):a.insertBefore(r,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(r,a)):(n=a,n.appendChild(r)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ba));else if(x!==4&&(r=r.child,r!==null))for(gd(r,n,a),r=r.sibling;r!==null;)gd(r,n,a),r=r.sibling}function xd(r,n,a){var x=r.tag;if(x===5||x===6)r=r.stateNode,n?a.insertBefore(r,n):a.appendChild(r);else if(x!==4&&(r=r.child,r!==null))for(xd(r,n,a),r=r.sibling;r!==null;)xd(r,n,a),r=r.sibling}var dr=null,di=!1;function sn(r,n,a){for(a=a.child;a!==null;)lg(r,n,a),a=a.sibling}function lg(r,n,a){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(ra,a)}catch{}switch(a.tag){case 5:_r||xs(a,n);case 6:var x=dr,k=di;dr=null,sn(r,n,a),dr=x,di=k,dr!==null&&(di?(r=dr,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):dr.removeChild(a.stateNode));break;case 18:dr!==null&&(di?(r=dr,a=a.stateNode,r.nodeType===8?Tc(r.parentNode,a):r.nodeType===1&&Tc(r,a),Ys(r)):Tc(dr,a.stateNode));break;case 4:x=dr,k=di,dr=a.stateNode.containerInfo,di=!0,sn(r,n,a),dr=x,di=k;break;case 0:case 11:case 14:case 15:if(!_r&&(x=a.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){k=x=x.next;do{var T=k,$=T.destroy;T=T.tag,$!==void 0&&((T&2)!==0||(T&4)!==0)&&pd(a,n,$),k=k.next}while(k!==x)}sn(r,n,a);break;case 1:if(!_r&&(xs(a,n),x=a.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=a.memoizedProps,x.state=a.memoizedState,x.componentWillUnmount()}catch(q){$t(a,n,q)}sn(r,n,a);break;case 21:sn(r,n,a);break;case 22:a.mode&1?(_r=(x=_r)||a.memoizedState!==null,sn(r,n,a),_r=x):sn(r,n,a);break;default:sn(r,n,a)}}function cg(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Nv),n.forEach(function(x){var k=Qv.bind(null,r,x);a.has(x)||(a.add(x),x.then(k,k))})}}function ui(r,n){var a=n.deletions;if(a!==null)for(var x=0;x<a.length;x++){var k=a[x];try{var T=r,$=n,q=$;e:for(;q!==null;){switch(q.tag){case 5:dr=q.stateNode,di=!1;break e;case 3:dr=q.stateNode.containerInfo,di=!0;break e;case 4:dr=q.stateNode.containerInfo,di=!0;break e}q=q.return}if(dr===null)throw Error(s(160));lg(T,$,k),dr=null,di=!1;var te=k.alternate;te!==null&&(te.return=null),k.return=null}catch(_e){$t(k,n,_e)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)dg(n,r),n=n.sibling}function dg(r,n){var a=r.alternate,x=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ui(n,r),Si(r),x&4){try{yo(3,r,r.return),Ha(3,r)}catch(tt){$t(r,r.return,tt)}try{yo(5,r,r.return)}catch(tt){$t(r,r.return,tt)}}break;case 1:ui(n,r),Si(r),x&512&&a!==null&&xs(a,a.return);break;case 5:if(ui(n,r),Si(r),x&512&&a!==null&&xs(a,a.return),r.flags&32){var k=r.stateNode;try{bt(k,"")}catch(tt){$t(r,r.return,tt)}}if(x&4&&(k=r.stateNode,k!=null)){var T=r.memoizedProps,$=a!==null?a.memoizedProps:T,q=r.type,te=r.updateQueue;if(r.updateQueue=null,te!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&$e(k,T),Tr(q,$);var _e=Tr(q,T);for($=0;$<te.length;$+=2){var ze=te[$],Be=te[$+1];ze==="style"?pr(k,Be):ze==="dangerouslySetInnerHTML"?Lt(k,Be):ze==="children"?bt(k,Be):g(k,ze,Be,_e)}switch(q){case"input":Pe(k,T);break;case"textarea":Je(k,T);break;case"select":var Te=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!T.multiple;var qe=T.value;qe!=null?ce(k,!!T.multiple,qe,!1):Te!==!!T.multiple&&(T.defaultValue!=null?ce(k,!!T.multiple,T.defaultValue,!0):ce(k,!!T.multiple,T.multiple?[]:"",!1))}k[oo]=T}catch(tt){$t(r,r.return,tt)}}break;case 6:if(ui(n,r),Si(r),x&4){if(r.stateNode===null)throw Error(s(162));k=r.stateNode,T=r.memoizedProps;try{k.nodeValue=T}catch(tt){$t(r,r.return,tt)}}break;case 3:if(ui(n,r),Si(r),x&4&&a!==null&&a.memoizedState.isDehydrated)try{Ys(n.containerInfo)}catch(tt){$t(r,r.return,tt)}break;case 4:ui(n,r),Si(r);break;case 13:ui(n,r),Si(r),k=r.child,k.flags&8192&&(T=k.memoizedState!==null,k.stateNode.isHidden=T,!T||k.alternate!==null&&k.alternate.memoizedState!==null||(vd=Vt())),x&4&&cg(r);break;case 22:if(ze=a!==null&&a.memoizedState!==null,r.mode&1?(_r=(_e=_r)||ze,ui(n,r),_r=_e):ui(n,r),Si(r),x&8192){if(_e=r.memoizedState!==null,(r.stateNode.isHidden=_e)&&!ze&&(r.mode&1)!==0)for(Ye=r,ze=r.child;ze!==null;){for(Be=Ye=ze;Ye!==null;){switch(Te=Ye,qe=Te.child,Te.tag){case 0:case 11:case 14:case 15:yo(4,Te,Te.return);break;case 1:xs(Te,Te.return);var Qe=Te.stateNode;if(typeof Qe.componentWillUnmount=="function"){x=Te,a=Te.return;try{n=x,Qe.props=n.memoizedProps,Qe.state=n.memoizedState,Qe.componentWillUnmount()}catch(tt){$t(x,a,tt)}}break;case 5:xs(Te,Te.return);break;case 22:if(Te.memoizedState!==null){pg(Be);continue}}qe!==null?(qe.return=Te,Ye=qe):pg(Be)}ze=ze.sibling}e:for(ze=null,Be=r;;){if(Be.tag===5){if(ze===null){ze=Be;try{k=Be.stateNode,_e?(T=k.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=Be.stateNode,te=Be.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null,q.style.display=Rr("display",$))}catch(tt){$t(r,r.return,tt)}}}else if(Be.tag===6){if(ze===null)try{Be.stateNode.nodeValue=_e?"":Be.memoizedProps}catch(tt){$t(r,r.return,tt)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===r)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===r)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===r)break e;ze===Be&&(ze=null),Be=Be.return}ze===Be&&(ze=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:ui(n,r),Si(r),x&4&&cg(r);break;case 21:break;default:ui(n,r),Si(r)}}function Si(r){var n=r.flags;if(n&2){try{e:{for(var a=r.return;a!==null;){if(og(a)){var x=a;break e}a=a.return}throw Error(s(160))}switch(x.tag){case 5:var k=x.stateNode;x.flags&32&&(bt(k,""),x.flags&=-33);var T=ag(r);xd(r,T,k);break;case 3:case 4:var $=x.stateNode.containerInfo,q=ag(r);gd(r,q,$);break;default:throw Error(s(161))}}catch(te){$t(r,r.return,te)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function Uv(r,n,a){Ye=r,ug(r)}function ug(r,n,a){for(var x=(r.mode&1)!==0;Ye!==null;){var k=Ye,T=k.child;if(k.tag===22&&x){var $=k.memoizedState!==null||Na;if(!$){var q=k.alternate,te=q!==null&&q.memoizedState!==null||_r;q=Na;var _e=_r;if(Na=$,(_r=te)&&!_e)for(Ye=k;Ye!==null;)$=Ye,te=$.child,$.tag===22&&$.memoizedState!==null?fg(k):te!==null?(te.return=$,Ye=te):fg(k);for(;T!==null;)Ye=T,ug(T),T=T.sibling;Ye=k,Na=q,_r=_e}hg(r)}else(k.subtreeFlags&8772)!==0&&T!==null?(T.return=k,Ye=T):hg(r)}}function hg(r){for(;Ye!==null;){var n=Ye;if((n.flags&8772)!==0){var a=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:_r||Ha(5,n);break;case 1:var x=n.stateNode;if(n.flags&4&&!_r)if(a===null)x.componentDidMount();else{var k=n.elementType===n.type?a.memoizedProps:ci(n.type,a.memoizedProps);x.componentDidUpdate(k,a.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var T=n.updateQueue;T!==null&&pf(n,T,x);break;case 3:var $=n.updateQueue;if($!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}pf(n,$,a)}break;case 5:var q=n.stateNode;if(a===null&&n.flags&4){a=q;var te=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&a.focus();break;case"img":te.src&&(a.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var _e=n.alternate;if(_e!==null){var ze=_e.memoizedState;if(ze!==null){var Be=ze.dehydrated;Be!==null&&Ys(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}_r||n.flags&512&&fd(n)}catch(Te){$t(n,n.return,Te)}}if(n===r){Ye=null;break}if(a=n.sibling,a!==null){a.return=n.return,Ye=a;break}Ye=n.return}}function pg(r){for(;Ye!==null;){var n=Ye;if(n===r){Ye=null;break}var a=n.sibling;if(a!==null){a.return=n.return,Ye=a;break}Ye=n.return}}function fg(r){for(;Ye!==null;){var n=Ye;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{Ha(4,n)}catch(te){$t(n,a,te)}break;case 1:var x=n.stateNode;if(typeof x.componentDidMount=="function"){var k=n.return;try{x.componentDidMount()}catch(te){$t(n,k,te)}}var T=n.return;try{fd(n)}catch(te){$t(n,T,te)}break;case 5:var $=n.return;try{fd(n)}catch(te){$t(n,$,te)}}}catch(te){$t(n,n.return,te)}if(n===r){Ye=null;break}var q=n.sibling;if(q!==null){q.return=n.return,Ye=q;break}Ye=n.return}}var Vv=Math.ceil,Ua=w.ReactCurrentDispatcher,md=w.ReactCurrentOwner,Qr=w.ReactCurrentBatchConfig,yt=0,ar=null,Jt=null,ur=0,Ur=0,ms=Zi(0),rr=0,vo=null,Mn=0,Va=0,yd=0,bo=null,Dr=null,vd=0,ys=1/0,Pi=null,Ka=!1,bd=null,on=null,qa=!1,an=null,Ga=0,_o=0,_d=null,Ya=-1,Xa=0;function Cr(){return(yt&6)!==0?Vt():Ya!==-1?Ya:Ya=Vt()}function ln(r){return(r.mode&1)===0?1:(yt&2)!==0&&ur!==0?ur&-ur:Rv.transition!==null?(Xa===0&&(Xa=op()),Xa):(r=wt,r!==0||(r=window.event,r=r===void 0?16:gp(r.type)),r)}function hi(r,n,a,x){if(50<_o)throw _o=0,_d=null,Error(s(185));Us(r,a,x),((yt&2)===0||r!==ar)&&(r===ar&&((yt&2)===0&&(Va|=a),rr===4&&cn(r,ur)),Mr(r,x),a===1&&yt===0&&(n.mode&1)===0&&(ys=Vt()+500,Ca&&tn()))}function Mr(r,n){var a=r.callbackNode;R1(r,n);var x=sa(r,r===ar?ur:0);if(x===0)a!==null&&Vi(a),r.callbackNode=null,r.callbackPriority=0;else if(n=x&-x,r.callbackPriority!==n){if(a!=null&&Vi(a),n===1)r.tag===0?Ev(xg.bind(null,r)):ef(xg.bind(null,r)),wv(function(){(yt&6)===0&&tn()}),a=null;else{switch(ap(x)){case 1:a=ec;break;case 4:a=np;break;case 16:a=ta;break;case 536870912:a=sp;break;default:a=ta}a=Cg(a,gg.bind(null,r))}r.callbackPriority=n,r.callbackNode=a}}function gg(r,n){if(Ya=-1,Xa=0,(yt&6)!==0)throw Error(s(327));var a=r.callbackNode;if(vs()&&r.callbackNode!==a)return null;var x=sa(r,r===ar?ur:0);if(x===0)return null;if((x&30)!==0||(x&r.expiredLanes)!==0||n)n=Ja(r,x);else{n=x;var k=yt;yt|=2;var T=yg();(ar!==r||ur!==n)&&(Pi=null,ys=Vt()+500,Pn(r,n));do try{Gv();break}catch(q){mg(r,q)}while(!0);$c(),Ua.current=T,yt=k,Jt!==null?n=0:(ar=null,ur=0,n=rr)}if(n!==0){if(n===2&&(k=tc(r),k!==0&&(x=k,n=Sd(r,k))),n===1)throw a=vo,Pn(r,0),cn(r,x),Mr(r,Vt()),a;if(n===6)cn(r,x);else{if(k=r.current.alternate,(x&30)===0&&!Kv(k)&&(n=Ja(r,x),n===2&&(T=tc(r),T!==0&&(x=T,n=Sd(r,T))),n===1))throw a=vo,Pn(r,0),cn(r,x),Mr(r,Vt()),a;switch(r.finishedWork=k,r.finishedLanes=x,n){case 0:case 1:throw Error(s(345));case 2:On(r,Dr,Pi);break;case 3:if(cn(r,x),(x&130023424)===x&&(n=vd+500-Vt(),10<n)){if(sa(r,0)!==0)break;if(k=r.suspendedLanes,(k&x)!==x){Cr(),r.pingedLanes|=r.suspendedLanes&k;break}r.timeoutHandle=Rc(On.bind(null,r,Dr,Pi),n);break}On(r,Dr,Pi);break;case 4:if(cn(r,x),(x&4194240)===x)break;for(n=r.eventTimes,k=-1;0<x;){var $=31-oi(x);T=1<<$,$=n[$],$>k&&(k=$),x&=~T}if(x=k,x=Vt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Vv(x/1960))-x,10<x){r.timeoutHandle=Rc(On.bind(null,r,Dr,Pi),x);break}On(r,Dr,Pi);break;case 5:On(r,Dr,Pi);break;default:throw Error(s(329))}}}return Mr(r,Vt()),r.callbackNode===a?gg.bind(null,r):null}function Sd(r,n){var a=bo;return r.current.memoizedState.isDehydrated&&(Pn(r,n).flags|=256),r=Ja(r,n),r!==2&&(n=Dr,Dr=a,n!==null&&wd(n)),r}function wd(r){Dr===null?Dr=r:Dr.push.apply(Dr,r)}function Kv(r){for(var n=r;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var x=0;x<a.length;x++){var k=a[x],T=k.getSnapshot;k=k.value;try{if(!ai(T(),k))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function cn(r,n){for(n&=~yd,n&=~Va,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var a=31-oi(n),x=1<<a;r[a]=-1,n&=~x}}function xg(r){if((yt&6)!==0)throw Error(s(327));vs();var n=sa(r,0);if((n&1)===0)return Mr(r,Vt()),null;var a=Ja(r,n);if(r.tag!==0&&a===2){var x=tc(r);x!==0&&(n=x,a=Sd(r,x))}if(a===1)throw a=vo,Pn(r,0),cn(r,n),Mr(r,Vt()),a;if(a===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,On(r,Dr,Pi),Mr(r,Vt()),null}function Cd(r,n){var a=yt;yt|=1;try{return r(n)}finally{yt=a,yt===0&&(ys=Vt()+500,Ca&&tn())}}function Bn(r){an!==null&&an.tag===0&&(yt&6)===0&&vs();var n=yt;yt|=1;var a=Qr.transition,x=wt;try{if(Qr.transition=null,wt=1,r)return r()}finally{wt=x,Qr.transition=a,yt=n,(yt&6)===0&&tn()}}function kd(){Ur=ms.current,At(ms)}function Pn(r,n){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Sv(a)),Jt!==null)for(a=Jt.return;a!==null;){var x=a;switch(Dc(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Sa();break;case 3:fs(),At(Lr),At(yr),qc();break;case 5:Vc(x);break;case 4:fs();break;case 13:At(Mt);break;case 19:At(Mt);break;case 10:Fc(x.type._context);break;case 22:case 23:kd()}a=a.return}if(ar=r,Jt=r=dn(r.current,null),ur=Ur=n,rr=0,vo=null,yd=Va=Mn=0,Dr=bo=null,zn!==null){for(n=0;n<zn.length;n++)if(a=zn[n],x=a.interleaved,x!==null){a.interleaved=null;var k=x.next,T=a.pending;if(T!==null){var $=T.next;T.next=k,x.next=$}a.pending=x}zn=null}return r}function mg(r,n){do{var a=Jt;try{if($c(),Da.current=Oa,Ma){for(var x=Bt.memoizedState;x!==null;){var k=x.queue;k!==null&&(k.pending=null),x=x.next}Ma=!1}if(Dn=0,or=tr=Bt=null,po=!1,fo=0,md.current=null,a===null||a.return===null){rr=1,vo=n,Jt=null;break}e:{var T=r,$=a.return,q=a,te=n;if(n=ur,q.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var _e=te,ze=q,Be=ze.tag;if((ze.mode&1)===0&&(Be===0||Be===11||Be===15)){var Te=ze.alternate;Te?(ze.updateQueue=Te.updateQueue,ze.memoizedState=Te.memoizedState,ze.lanes=Te.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var qe=Nf($);if(qe!==null){qe.flags&=-257,Hf(qe,$,q,T,n),qe.mode&1&&Wf(T,_e,n),n=qe,te=_e;var Qe=n.updateQueue;if(Qe===null){var tt=new Set;tt.add(te),n.updateQueue=tt}else Qe.add(te);break e}else{if((n&1)===0){Wf(T,_e,n),jd();break e}te=Error(s(426))}}else if(zt&&q.mode&1){var Kt=Nf($);if(Kt!==null){(Kt.flags&65536)===0&&(Kt.flags|=256),Hf(Kt,$,q,T,n),Pc(gs(te,q));break e}}T=te=gs(te,q),rr!==4&&(rr=2),bo===null?bo=[T]:bo.push(T),T=$;do{switch(T.tag){case 3:T.flags|=65536,n&=-n,T.lanes|=n;var he=$f(T,te,n);hf(T,he);break e;case 1:q=te;var ne=T.type,ge=T.stateNode;if((T.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(on===null||!on.has(ge)))){T.flags|=65536,n&=-n,T.lanes|=n;var Fe=Ff(T,q,n);hf(T,Fe);break e}}T=T.return}while(T!==null)}bg(a)}catch(rt){n=rt,Jt===a&&a!==null&&(Jt=a=a.return);continue}break}while(!0)}function yg(){var r=Ua.current;return Ua.current=Oa,r===null?Oa:r}function jd(){(rr===0||rr===3||rr===2)&&(rr=4),ar===null||(Mn&268435455)===0&&(Va&268435455)===0||cn(ar,ur)}function Ja(r,n){var a=yt;yt|=2;var x=yg();(ar!==r||ur!==n)&&(Pi=null,Pn(r,n));do try{qv();break}catch(k){mg(r,k)}while(!0);if($c(),yt=a,Ua.current=x,Jt!==null)throw Error(s(261));return ar=null,ur=0,rr}function qv(){for(;Jt!==null;)vg(Jt)}function Gv(){for(;Jt!==null&&!v1();)vg(Jt)}function vg(r){var n=wg(r.alternate,r,Ur);r.memoizedProps=r.pendingProps,n===null?bg(r):Jt=n,md.current=null}function bg(r){var n=r;do{var a=n.alternate;if(r=n.return,(n.flags&32768)===0){if(a=Fv(a,n,Ur),a!==null){Jt=a;return}}else{if(a=Wv(a,n),a!==null){a.flags&=32767,Jt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{rr=6,Jt=null;return}}if(n=n.sibling,n!==null){Jt=n;return}Jt=n=r}while(n!==null);rr===0&&(rr=5)}function On(r,n,a){var x=wt,k=Qr.transition;try{Qr.transition=null,wt=1,Yv(r,n,a,x)}finally{Qr.transition=k,wt=x}return null}function Yv(r,n,a,x){do vs();while(an!==null);if((yt&6)!==0)throw Error(s(327));a=r.finishedWork;var k=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var T=a.lanes|a.childLanes;if(T1(r,T),r===ar&&(Jt=ar=null,ur=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||qa||(qa=!0,Cg(ta,function(){return vs(),null})),T=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||T){T=Qr.transition,Qr.transition=null;var $=wt;wt=1;var q=yt;yt|=4,md.current=null,Hv(r,a),dg(a,r),gv(jc),la=!!kc,jc=kc=null,r.current=a,Uv(a),b1(),yt=q,wt=$,Qr.transition=T}else r.current=a;if(qa&&(qa=!1,an=r,Ga=k),T=r.pendingLanes,T===0&&(on=null),w1(a.stateNode),Mr(r,Vt()),n!==null)for(x=r.onRecoverableError,a=0;a<n.length;a++)k=n[a],x(k.value,{componentStack:k.stack,digest:k.digest});if(Ka)throw Ka=!1,r=bd,bd=null,r;return(Ga&1)!==0&&r.tag!==0&&vs(),T=r.pendingLanes,(T&1)!==0?r===_d?_o++:(_o=0,_d=r):_o=0,tn(),null}function vs(){if(an!==null){var r=ap(Ga),n=Qr.transition,a=wt;try{if(Qr.transition=null,wt=16>r?16:r,an===null)var x=!1;else{if(r=an,an=null,Ga=0,(yt&6)!==0)throw Error(s(331));var k=yt;for(yt|=4,Ye=r.current;Ye!==null;){var T=Ye,$=T.child;if((Ye.flags&16)!==0){var q=T.deletions;if(q!==null){for(var te=0;te<q.length;te++){var _e=q[te];for(Ye=_e;Ye!==null;){var ze=Ye;switch(ze.tag){case 0:case 11:case 15:yo(8,ze,T)}var Be=ze.child;if(Be!==null)Be.return=ze,Ye=Be;else for(;Ye!==null;){ze=Ye;var Te=ze.sibling,qe=ze.return;if(sg(ze),ze===_e){Ye=null;break}if(Te!==null){Te.return=qe,Ye=Te;break}Ye=qe}}}var Qe=T.alternate;if(Qe!==null){var tt=Qe.child;if(tt!==null){Qe.child=null;do{var Kt=tt.sibling;tt.sibling=null,tt=Kt}while(tt!==null)}}Ye=T}}if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,Ye=$;else e:for(;Ye!==null;){if(T=Ye,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:yo(9,T,T.return)}var he=T.sibling;if(he!==null){he.return=T.return,Ye=he;break e}Ye=T.return}}var ne=r.current;for(Ye=ne;Ye!==null;){$=Ye;var ge=$.child;if(($.subtreeFlags&2064)!==0&&ge!==null)ge.return=$,Ye=ge;else e:for($=ne;Ye!==null;){if(q=Ye,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Ha(9,q)}}catch(rt){$t(q,q.return,rt)}if(q===$){Ye=null;break e}var Fe=q.sibling;if(Fe!==null){Fe.return=q.return,Ye=Fe;break e}Ye=q.return}}if(yt=k,tn(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(ra,r)}catch{}x=!0}return x}finally{wt=a,Qr.transition=n}}return!1}function _g(r,n,a){n=gs(a,n),n=$f(r,n,1),r=nn(r,n,1),n=Cr(),r!==null&&(Us(r,1,n),Mr(r,n))}function $t(r,n,a){if(r.tag===3)_g(r,r,a);else for(;n!==null;){if(n.tag===3){_g(n,r,a);break}else if(n.tag===1){var x=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(on===null||!on.has(x))){r=gs(a,r),r=Ff(n,r,1),n=nn(n,r,1),r=Cr(),n!==null&&(Us(n,1,r),Mr(n,r));break}}n=n.return}}function Xv(r,n,a){var x=r.pingCache;x!==null&&x.delete(n),n=Cr(),r.pingedLanes|=r.suspendedLanes&a,ar===r&&(ur&a)===a&&(rr===4||rr===3&&(ur&130023424)===ur&&500>Vt()-vd?Pn(r,0):yd|=a),Mr(r,n)}function Sg(r,n){n===0&&((r.mode&1)===0?n=1:(n=na,na<<=1,(na&130023424)===0&&(na=4194304)));var a=Cr();r=Di(r,n),r!==null&&(Us(r,n,a),Mr(r,a))}function Jv(r){var n=r.memoizedState,a=0;n!==null&&(a=n.retryLane),Sg(r,a)}function Qv(r,n){var a=0;switch(r.tag){case 13:var x=r.stateNode,k=r.memoizedState;k!==null&&(a=k.retryLane);break;case 19:x=r.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(n),Sg(r,a)}var wg;wg=function(r,n,a){if(r!==null)if(r.memoizedProps!==n.pendingProps||Lr.current)Ir=!0;else{if((r.lanes&a)===0&&(n.flags&128)===0)return Ir=!1,$v(r,n,a);Ir=(r.flags&131072)!==0}else Ir=!1,zt&&(n.flags&1048576)!==0&&tf(n,ja,n.index);switch(n.lanes=0,n.tag){case 2:var x=n.type;Wa(r,n),r=n.pendingProps;var k=as(n,yr.current);ps(n,a),k=Xc(null,n,x,r,k,a);var T=Jc();return n.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,zr(x)?(T=!0,wa(n)):T=!1,n.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Hc(n),k.updater=$a,n.stateNode=k,k._reactInternals=n,id(n,x,r,a),n=ad(null,n,x,!0,T,a)):(n.tag=0,zt&&T&&Ic(n),wr(null,n,k,a),n=n.child),n;case 16:x=n.elementType;e:{switch(Wa(r,n),r=n.pendingProps,k=x._init,x=k(x._payload),n.type=x,k=n.tag=eb(x),r=ci(x,r),k){case 0:n=od(null,n,x,r,a);break e;case 1:n=Yf(null,n,x,r,a);break e;case 11:n=Uf(null,n,x,r,a);break e;case 14:n=Vf(null,n,x,ci(x.type,r),a);break e}throw Error(s(306,x,""))}return n;case 0:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:ci(x,k),od(r,n,x,k,a);case 1:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:ci(x,k),Yf(r,n,x,k,a);case 3:e:{if(Xf(n),r===null)throw Error(s(387));x=n.pendingProps,T=n.memoizedState,k=T.element,uf(r,n),za(n,x,null,a);var $=n.memoizedState;if(x=$.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},n.updateQueue.baseState=T,n.memoizedState=T,n.flags&256){k=gs(Error(s(423)),n),n=Jf(r,n,x,a,k);break e}else if(x!==k){k=gs(Error(s(424)),n),n=Jf(r,n,x,a,k);break e}else for(Hr=Qi(n.stateNode.containerInfo.firstChild),Nr=n,zt=!0,li=null,a=cf(n,null,x,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ds(),x===k){n=Bi(r,n,a);break e}wr(r,n,x,a)}n=n.child}return n;case 5:return ff(n),r===null&&Bc(n),x=n.type,k=n.pendingProps,T=r!==null?r.memoizedProps:null,$=k.children,Ec(x,k)?$=null:T!==null&&Ec(x,T)&&(n.flags|=32),Gf(r,n),wr(r,n,$,a),n.child;case 6:return r===null&&Bc(n),null;case 13:return Qf(r,n,a);case 4:return Uc(n,n.stateNode.containerInfo),x=n.pendingProps,r===null?n.child=us(n,null,x,a):wr(r,n,x,a),n.child;case 11:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:ci(x,k),Uf(r,n,x,k,a);case 7:return wr(r,n,n.pendingProps,a),n.child;case 8:return wr(r,n,n.pendingProps.children,a),n.child;case 12:return wr(r,n,n.pendingProps.children,a),n.child;case 10:e:{if(x=n.type._context,k=n.pendingProps,T=n.memoizedProps,$=k.value,Et(Ta,x._currentValue),x._currentValue=$,T!==null)if(ai(T.value,$)){if(T.children===k.children&&!Lr.current){n=Bi(r,n,a);break e}}else for(T=n.child,T!==null&&(T.return=n);T!==null;){var q=T.dependencies;if(q!==null){$=T.child;for(var te=q.firstContext;te!==null;){if(te.context===x){if(T.tag===1){te=Mi(-1,a&-a),te.tag=2;var _e=T.updateQueue;if(_e!==null){_e=_e.shared;var ze=_e.pending;ze===null?te.next=te:(te.next=ze.next,ze.next=te),_e.pending=te}}T.lanes|=a,te=T.alternate,te!==null&&(te.lanes|=a),Wc(T.return,a,n),q.lanes|=a;break}te=te.next}}else if(T.tag===10)$=T.type===n.type?null:T.child;else if(T.tag===18){if($=T.return,$===null)throw Error(s(341));$.lanes|=a,q=$.alternate,q!==null&&(q.lanes|=a),Wc($,a,n),$=T.sibling}else $=T.child;if($!==null)$.return=T;else for($=T;$!==null;){if($===n){$=null;break}if(T=$.sibling,T!==null){T.return=$.return,$=T;break}$=$.return}T=$}wr(r,n,k.children,a),n=n.child}return n;case 9:return k=n.type,x=n.pendingProps.children,ps(n,a),k=Xr(k),x=x(k),n.flags|=1,wr(r,n,x,a),n.child;case 14:return x=n.type,k=ci(x,n.pendingProps),k=ci(x.type,k),Vf(r,n,x,k,a);case 15:return Kf(r,n,n.type,n.pendingProps,a);case 17:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:ci(x,k),Wa(r,n),n.tag=1,zr(x)?(r=!0,wa(n)):r=!1,ps(n,a),Pf(n,x,k),id(n,x,k,a),ad(null,n,x,!0,r,a);case 19:return eg(r,n,a);case 22:return qf(r,n,a)}throw Error(s(156,n.tag))};function Cg(r,n){return Dt(r,n)}function Zv(r,n,a,x){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(r,n,a,x){return new Zv(r,n,a,x)}function Ed(r){return r=r.prototype,!(!r||!r.isReactComponent)}function eb(r){if(typeof r=="function")return Ed(r)?1:0;if(r!=null){if(r=r.$$typeof,r===K)return 11;if(r===V)return 14}return 2}function dn(r,n){var a=r.alternate;return a===null?(a=Zr(r.tag,n,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=n,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,n=r.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Qa(r,n,a,x,k,T){var $=2;if(x=r,typeof r=="function")Ed(r)&&($=1);else if(typeof r=="string")$=5;else e:switch(r){case z:return $n(a.children,k,T,n);case E:$=8,k|=8;break;case B:return r=Zr(12,a,n,k|2),r.elementType=B,r.lanes=T,r;case U:return r=Zr(13,a,n,k),r.elementType=U,r.lanes=T,r;case ee:return r=Zr(19,a,n,k),r.elementType=ee,r.lanes=T,r;case Q:return Za(a,k,T,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:$=10;break e;case H:$=9;break e;case K:$=11;break e;case V:$=14;break e;case ue:$=16,x=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return n=Zr($,a,n,k),n.elementType=r,n.type=x,n.lanes=T,n}function $n(r,n,a,x){return r=Zr(7,r,x,n),r.lanes=a,r}function Za(r,n,a,x){return r=Zr(22,r,x,n),r.elementType=Q,r.lanes=a,r.stateNode={isHidden:!1},r}function Rd(r,n,a){return r=Zr(6,r,null,n),r.lanes=a,r}function Td(r,n,a){return n=Zr(4,r.children!==null?r.children:[],r.key,n),n.lanes=a,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function tb(r,n,a,x,k){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=x,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Ad(r,n,a,x,k,T,$,q,te){return r=new tb(r,n,a,q,te),n===1?(n=1,T===!0&&(n|=8)):n=0,T=Zr(3,null,null,n),r.current=T,T.stateNode=r,T.memoizedState={element:x,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(T),r}function rb(r,n,a){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:x==null?null:""+x,children:r,containerInfo:n,implementation:a}}function kg(r){if(!r)return en;r=r._reactInternals;e:{if(Oe(r)!==r||r.tag!==1)throw Error(s(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(zr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(r.tag===1){var a=r.type;if(zr(a))return Qp(r,a,n)}return n}function jg(r,n,a,x,k,T,$,q,te){return r=Ad(a,x,!0,r,k,T,$,q,te),r.context=kg(null),a=r.current,x=Cr(),k=ln(a),T=Mi(x,k),T.callback=n??null,nn(a,T,k),r.current.lanes=k,Us(r,k,x),Mr(r,x),r}function el(r,n,a,x){var k=n.current,T=Cr(),$=ln(k);return a=kg(a),n.context===null?n.context=a:n.pendingContext=a,n=Mi(T,$),n.payload={element:r},x=x===void 0?null:x,x!==null&&(n.callback=x),r=nn(k,n,$),r!==null&&(hi(r,k,$,T),La(r,k,$)),$}function tl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Eg(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<n?a:n}}function Ld(r,n){Eg(r,n),(r=r.alternate)&&Eg(r,n)}function ib(){return null}var Rg=typeof reportError=="function"?reportError:function(r){console.error(r)};function zd(r){this._internalRoot=r}rl.prototype.render=zd.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(s(409));el(r,n,null,null)},rl.prototype.unmount=zd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Bn(function(){el(null,r,null,null)}),n[Ai]=null}};function rl(r){this._internalRoot=r}rl.prototype.unstable_scheduleHydration=function(r){if(r){var n=dp();r={blockedOn:null,target:r,priority:n};for(var a=0;a<Yi.length&&n!==0&&n<Yi[a].priority;a++);Yi.splice(a,0,r),a===0&&pp(r)}};function Id(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function il(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function nb(r,n,a,x,k){if(k){if(typeof x=="function"){var T=x;x=function(){var _e=tl($);T.call(_e)}}var $=jg(n,x,r,0,null,!1,!1,"",Tg);return r._reactRootContainer=$,r[Ai]=$.current,no(r.nodeType===8?r.parentNode:r),Bn(),$}for(;k=r.lastChild;)r.removeChild(k);if(typeof x=="function"){var q=x;x=function(){var _e=tl(te);q.call(_e)}}var te=Ad(r,0,!1,null,null,!1,!1,"",Tg);return r._reactRootContainer=te,r[Ai]=te.current,no(r.nodeType===8?r.parentNode:r),Bn(function(){el(n,te,a,x)}),te}function nl(r,n,a,x,k){var T=a._reactRootContainer;if(T){var $=T;if(typeof k=="function"){var q=k;k=function(){var te=tl($);q.call(te)}}el(n,$,r,k)}else $=nb(a,n,r,k,x);return tl($)}lp=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var a=Hs(n.pendingLanes);a!==0&&(ic(n,a|1),Mr(n,Vt()),(yt&6)===0&&(ys=Vt()+500,tn()))}break;case 13:Bn(function(){var x=Di(r,1);if(x!==null){var k=Cr();hi(x,r,1,k)}}),Ld(r,1)}},nc=function(r){if(r.tag===13){var n=Di(r,134217728);if(n!==null){var a=Cr();hi(n,r,134217728,a)}Ld(r,134217728)}},cp=function(r){if(r.tag===13){var n=ln(r),a=Di(r,n);if(a!==null){var x=Cr();hi(a,r,n,x)}Ld(r,n)}},dp=function(){return wt},up=function(r,n){var a=wt;try{return wt=r,n()}finally{wt=a}},We=function(r,n,a){switch(n){case"input":if(Pe(r,a),n=a.name,a.type==="radio"&&n!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var x=a[n];if(x!==r&&x.form===r.form){var k=_a(x);if(!k)throw Error(s(90));Z(x),Pe(x,k)}}}break;case"textarea":Je(r,a);break;case"select":n=a.value,n!=null&&ce(r,!!a.multiple,n,!1)}},Xt=Cd,$r=Bn;var sb={usingClientEntryPoint:!1,Events:[ao,ss,_a,Yt,mt,Cd]},So={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ob={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ht(r),r===null?null:r.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||ib,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{ra=sl.inject(ob),yi=sl}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb,Br.createPortal=function(r,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(n))throw Error(s(200));return rb(r,n,null,a)},Br.createRoot=function(r,n){if(!Id(r))throw Error(s(299));var a=!1,x="",k=Rg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(x=n.identifierPrefix),n.onRecoverableError!==void 0&&(k=n.onRecoverableError)),n=Ad(r,1,!1,null,null,a,!1,x,k),r[Ai]=n.current,no(r.nodeType===8?r.parentNode:r),new zd(n)},Br.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=ht(n),r=r===null?null:r.stateNode,r},Br.flushSync=function(r){return Bn(r)},Br.hydrate=function(r,n,a){if(!il(n))throw Error(s(200));return nl(null,r,n,!0,a)},Br.hydrateRoot=function(r,n,a){if(!Id(r))throw Error(s(405));var x=a!=null&&a.hydratedSources||null,k=!1,T="",$=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(k=!0),a.identifierPrefix!==void 0&&(T=a.identifierPrefix),a.onRecoverableError!==void 0&&($=a.onRecoverableError)),n=jg(n,null,r,1,a??null,k,!1,T,$),r[Ai]=n.current,no(r),x)for(r=0;r<x.length;r++)a=x[r],k=a._getVersion,k=k(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,k]:n.mutableSourceEagerHydrationData.push(a,k);return new rl(n)},Br.render=function(r,n,a){if(!il(n))throw Error(s(200));return nl(null,r,n,!1,a)},Br.unmountComponentAtNode=function(r){if(!il(r))throw Error(s(40));return r._reactRootContainer?(Bn(function(){nl(null,null,r,!1,function(){r._reactRootContainer=null,r[Ai]=null})}),!0):!1},Br.unstable_batchedUpdates=Cd,Br.unstable_renderSubtreeIntoContainer=function(r,n,a,x){if(!il(a))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return nl(r,n,a,!1,x)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var Pg;function Vm(){if(Pg)return Bd.exports;Pg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),Bd.exports=gb(),Bd.exports}var Og;function xb(){if(Og)return ol;Og=1;var t=Vm();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var mb=xb();const yb=Um(mb);Vm();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},$o.apply(this,arguments)}var gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gn||(gn={}));const $g="popstate";function vb(t){t===void 0&&(t={});function i(o,u){let{pathname:S,search:b,hash:l}=o.location;return bu("",{pathname:S,search:b,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(o,u){return typeof u=="string"?u:Ll(u)}return _b(i,s,null,t)}function Ot(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function lh(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function bb(){return Math.random().toString(36).substr(2,8)}function Fg(t,i){return{usr:t.state,key:t.key,idx:i}}function bu(t,i,s,o){return s===void 0&&(s=null),$o({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?Bs(i):i,{state:s,key:i&&i.key||o||bb()})}function Ll(t){let{pathname:i="/",search:s="",hash:o=""}=t;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function Bs(t){let i={};if(t){let s=t.indexOf("#");s>=0&&(i.hash=t.substr(s),t=t.substr(0,s));let o=t.indexOf("?");o>=0&&(i.search=t.substr(o),t=t.substr(0,o)),t&&(i.pathname=t)}return i}function _b(t,i,s,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:S=!1}=o,b=u.history,l=gn.Pop,c=null,m=v();m==null&&(m=0,b.replaceState($o({},b.state,{idx:m}),""));function v(){return(b.state||{idx:null}).idx}function d(){l=gn.Pop;let h=v(),p=h==null?null:h-m;m=h,c&&c({action:l,location:C.location,delta:p})}function y(h,p){l=gn.Push;let f=bu(C.location,h,p);m=v()+1;let g=Fg(f,m),w=C.createHref(f);try{b.pushState(g,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(w)}S&&c&&c({action:l,location:C.location,delta:1})}function _(h,p){l=gn.Replace;let f=bu(C.location,h,p);m=v();let g=Fg(f,m),w=C.createHref(f);b.replaceState(g,"",w),S&&c&&c({action:l,location:C.location,delta:0})}function j(h){let p=u.location.origin!=="null"?u.location.origin:u.location.href,f=typeof h=="string"?h:Ll(h);return f=f.replace(/ $/,"%20"),Ot(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let C={get action(){return l},get location(){return t(u,b)},listen(h){if(c)throw new Error("A history only accepts one active listener");return u.addEventListener($g,d),c=h,()=>{u.removeEventListener($g,d),c=null}},createHref(h){return i(u,h)},createURL:j,encodeLocation(h){let p=j(h);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:y,replace:_,go(h){return b.go(h)}};return C}var Wg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wg||(Wg={}));function Sb(t,i,s){return s===void 0&&(s="/"),wb(t,i,s)}function wb(t,i,s,o){let u=typeof i=="string"?Bs(i):i,S=As(u.pathname||"/",s);if(S==null)return null;let b=Km(t);Cb(b);let l=null;for(let c=0;l==null&&c<b.length;++c){let m=Mb(S);l=Ib(b[c],m)}return l}function Km(t,i,s,o){i===void 0&&(i=[]),s===void 0&&(s=[]),o===void 0&&(o="");let u=(S,b,l)=>{let c={relativePath:l===void 0?S.path||"":l,caseSensitive:S.caseSensitive===!0,childrenIndex:b,route:S};c.relativePath.startsWith("/")&&(Ot(c.relativePath.startsWith(o),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(o.length));let m=yn([o,c.relativePath]),v=s.concat(c);S.children&&S.children.length>0&&(Ot(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Km(S.children,i,v,m)),!(S.path==null&&!S.index)&&i.push({path:m,score:Lb(m,S.index),routesMeta:v})};return t.forEach((S,b)=>{var l;if(S.path===""||!((l=S.path)!=null&&l.includes("?")))u(S,b);else for(let c of qm(S.path))u(S,b,c)}),i}function qm(t){let i=t.split("/");if(i.length===0)return[];let[s,...o]=i,u=s.endsWith("?"),S=s.replace(/\?$/,"");if(o.length===0)return u?[S,""]:[S];let b=qm(o.join("/")),l=[];return l.push(...b.map(c=>c===""?S:[S,c].join("/"))),u&&l.push(...b),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Cb(t){t.sort((i,s)=>i.score!==s.score?s.score-i.score:zb(i.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const kb=/^:[\w-]+$/,jb=3,Eb=2,Rb=1,Tb=10,Ab=-2,Ng=t=>t==="*";function Lb(t,i){let s=t.split("/"),o=s.length;return s.some(Ng)&&(o+=Ab),i&&(o+=Eb),s.filter(u=>!Ng(u)).reduce((u,S)=>u+(kb.test(S)?jb:S===""?Rb:Tb),o)}function zb(t,i){return t.length===i.length&&t.slice(0,-1).every((o,u)=>o===i[u])?t[t.length-1]-i[i.length-1]:0}function Ib(t,i,s){let{routesMeta:o}=t,u={},S="/",b=[];for(let l=0;l<o.length;++l){let c=o[l],m=l===o.length-1,v=S==="/"?i:i.slice(S.length)||"/",d=_u({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},v),y=c.route;if(!d)return null;Object.assign(u,d.params),b.push({params:u,pathname:yn([S,d.pathname]),pathnameBase:Fb(yn([S,d.pathnameBase])),route:y}),d.pathnameBase!=="/"&&(S=yn([S,d.pathnameBase]))}return b}function _u(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,o]=Db(t.path,t.caseSensitive,t.end),u=i.match(s);if(!u)return null;let S=u[0],b=S.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((m,v,d)=>{let{paramName:y,isOptional:_}=v;if(y==="*"){let C=l[d]||"";b=S.slice(0,S.length-C.length).replace(/(.)\/+$/,"$1")}const j=l[d];return _&&!j?m[y]=void 0:m[y]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:S,pathnameBase:b,pattern:t}}function Db(t,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),lh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],u="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,l,c)=>(o.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),u+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":t!==""&&t!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function Mb(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return lh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function As(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,o=t.charAt(s);return o&&o!=="/"?null:t.slice(s)||"/"}const Bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pb=t=>Bb.test(t);function Ob(t,i){i===void 0&&(i="/");let{pathname:s,search:o="",hash:u=""}=typeof t=="string"?Bs(t):t,S;if(s)if(Pb(s))S=s;else{if(s.includes("//")){let b=s;s=s.replace(/\/\/+/g,"/"),lh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(b+" -> "+s))}s.startsWith("/")?S=Hg(s.substring(1),"/"):S=Hg(s,i)}else S=i;return{pathname:S,search:Wb(o),hash:Nb(u)}}function Hg(t,i){let s=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function $d(t,i,s,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $b(t){return t.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function ch(t,i){let s=$b(t);return i?s.map((o,u)=>u===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function dh(t,i,s,o){o===void 0&&(o=!1);let u;typeof t=="string"?u=Bs(t):(u=$o({},t),Ot(!u.pathname||!u.pathname.includes("?"),$d("?","pathname","search",u)),Ot(!u.pathname||!u.pathname.includes("#"),$d("#","pathname","hash",u)),Ot(!u.search||!u.search.includes("#"),$d("#","search","hash",u)));let S=t===""||u.pathname==="",b=S?"/":u.pathname,l;if(b==null)l=s;else{let d=i.length-1;if(!o&&b.startsWith("..")){let y=b.split("/");for(;y[0]==="..";)y.shift(),d-=1;u.pathname=y.join("/")}l=d>=0?i[d]:"/"}let c=Ob(u,l),m=b&&b!=="/"&&b.endsWith("/"),v=(S||b===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(m||v)&&(c.pathname+="/"),c}const yn=t=>t.join("/").replace(/\/\/+/g,"/"),Fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gm=["post","put","patch","delete"];new Set(Gm);const Ub=["get",...Gm];new Set(Ub);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},Fo.apply(this,arguments)}const Nl=L.createContext(null),Ym=L.createContext(null),Hi=L.createContext(null),Hl=L.createContext(null),Ti=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Xm=L.createContext(null);function Vb(t,i){let{relative:s}=i===void 0?{}:i;Ps()||Ot(!1);let{basename:o,navigator:u}=L.useContext(Hi),{hash:S,pathname:b,search:l}=Ul(t,{relative:s}),c=b;return o!=="/"&&(c=b==="/"?o:yn([o,b])),u.createHref({pathname:c,search:l,hash:S})}function Ps(){return L.useContext(Hl)!=null}function kn(){return Ps()||Ot(!1),L.useContext(Hl).location}function Jm(t){L.useContext(Hi).static||L.useLayoutEffect(t)}function Ut(){let{isDataRoute:t}=L.useContext(Ti);return t?o_():Kb()}function Kb(){Ps()||Ot(!1);let t=L.useContext(Nl),{basename:i,future:s,navigator:o}=L.useContext(Hi),{matches:u}=L.useContext(Ti),{pathname:S}=kn(),b=JSON.stringify(ch(u,s.v7_relativeSplatPath)),l=L.useRef(!1);return Jm(()=>{l.current=!0}),L.useCallback(function(m,v){if(v===void 0&&(v={}),!l.current)return;if(typeof m=="number"){o.go(m);return}let d=dh(m,JSON.parse(b),S,v.relative==="path");t==null&&i!=="/"&&(d.pathname=d.pathname==="/"?i:yn([i,d.pathname])),(v.replace?o.replace:o.push)(d,v.state,v)},[i,o,b,S,t])}const qb=L.createContext(null);function Gb(t){let i=L.useContext(Ti).outlet;return i&&L.createElement(qb.Provider,{value:t},i)}function Jn(){let{matches:t}=L.useContext(Ti),i=t[t.length-1];return i?i.params:{}}function Ul(t,i){let{relative:s}=i===void 0?{}:i,{future:o}=L.useContext(Hi),{matches:u}=L.useContext(Ti),{pathname:S}=kn(),b=JSON.stringify(ch(u,o.v7_relativeSplatPath));return L.useMemo(()=>dh(t,JSON.parse(b),S,s==="path"),[t,b,S,s])}function Yb(t,i){return Xb(t,i)}function Xb(t,i,s,o){Ps()||Ot(!1);let{navigator:u}=L.useContext(Hi),{matches:S}=L.useContext(Ti),b=S[S.length-1],l=b?b.params:{};b&&b.pathname;let c=b?b.pathnameBase:"/";b&&b.route;let m=kn(),v;if(i){var d;let h=typeof i=="string"?Bs(i):i;c==="/"||(d=h.pathname)!=null&&d.startsWith(c)||Ot(!1),v=h}else v=m;let y=v.pathname||"/",_=y;if(c!=="/"){let h=c.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(h.length).join("/")}let j=Sb(t,{pathname:_}),C=t_(j&&j.map(h=>Object.assign({},h,{params:Object.assign({},l,h.params),pathname:yn([c,u.encodeLocation?u.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?c:yn([c,u.encodeLocation?u.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),S,s,o);return i&&C?L.createElement(Hl.Provider,{value:{location:Fo({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:gn.Pop}},C):C}function Jb(){let t=s_(),i=Hb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},i),s?L.createElement("pre",{style:u},s):null,null)}const Qb=L.createElement(Jb,null);class Zb extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?L.createElement(Ti.Provider,{value:this.props.routeContext},L.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e_(t){let{routeContext:i,match:s,children:o}=t,u=L.useContext(Nl);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement(Ti.Provider,{value:i},o)}function t_(t,i,s,o){var u;if(i===void 0&&(i=[]),s===void 0&&(s=null),o===void 0&&(o=null),t==null){var S;if(!s)return null;if(s.errors)t=s.matches;else if((S=o)!=null&&S.v7_partialHydration&&i.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let b=t,l=(u=s)==null?void 0:u.errors;if(l!=null){let v=b.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);v>=0||Ot(!1),b=b.slice(0,Math.min(b.length,v+1))}let c=!1,m=-1;if(s&&o&&o.v7_partialHydration)for(let v=0;v<b.length;v++){let d=b[v];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(m=v),d.route.id){let{loaderData:y,errors:_}=s,j=d.route.loader&&y[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||j){c=!0,m>=0?b=b.slice(0,m+1):b=[b[0]];break}}}return b.reduceRight((v,d,y)=>{let _,j=!1,C=null,h=null;s&&(_=l&&d.route.id?l[d.route.id]:void 0,C=d.route.errorElement||Qb,c&&(m<0&&y===0?(a_("route-fallback"),j=!0,h=null):m===y&&(j=!0,h=d.route.hydrateFallbackElement||null)));let p=i.concat(b.slice(0,y+1)),f=()=>{let g;return _?g=C:j?g=h:d.route.Component?g=L.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=v,L.createElement(e_,{match:d,routeContext:{outlet:v,matches:p,isDataRoute:s!=null},children:g})};return s&&(d.route.ErrorBoundary||d.route.errorElement||y===0)?L.createElement(Zb,{location:s.location,revalidation:s.revalidation,component:C,error:_,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var Qm=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Qm||{}),Zm=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Zm||{});function r_(t){let i=L.useContext(Nl);return i||Ot(!1),i}function i_(t){let i=L.useContext(Ym);return i||Ot(!1),i}function n_(t){let i=L.useContext(Ti);return i||Ot(!1),i}function e0(t){let i=n_(),s=i.matches[i.matches.length-1];return s.route.id||Ot(!1),s.route.id}function s_(){var t;let i=L.useContext(Xm),s=i_(),o=e0();return i!==void 0?i:(t=s.errors)==null?void 0:t[o]}function o_(){let{router:t}=r_(Qm.UseNavigateStable),i=e0(Zm.UseNavigateStable),s=L.useRef(!1);return Jm(()=>{s.current=!0}),L.useCallback(function(u,S){S===void 0&&(S={}),s.current&&(typeof u=="number"?t.navigate(u):t.navigate(u,Fo({fromRouteId:i},S)))},[t,i])}const Ug={};function a_(t,i,s){Ug[t]||(Ug[t]=!0)}function l_(t,i){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function c_(t){let{to:i,replace:s,state:o,relative:u}=t;Ps()||Ot(!1);let{future:S,static:b}=L.useContext(Hi),{matches:l}=L.useContext(Ti),{pathname:c}=kn(),m=Ut(),v=dh(i,ch(l,S.v7_relativeSplatPath),c,u==="path"),d=JSON.stringify(v);return L.useEffect(()=>m(JSON.parse(d),{replace:s,state:o,relative:u}),[m,d,u,s,o]),null}function d_(t){return Gb(t.context)}function Wt(t){Ot(!1)}function u_(t){let{basename:i="/",children:s=null,location:o,navigationType:u=gn.Pop,navigator:S,static:b=!1,future:l}=t;Ps()&&Ot(!1);let c=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:c,navigator:S,static:b,future:Fo({v7_relativeSplatPath:!1},l)}),[c,l,S,b]);typeof o=="string"&&(o=Bs(o));let{pathname:v="/",search:d="",hash:y="",state:_=null,key:j="default"}=o,C=L.useMemo(()=>{let h=As(v,c);return h==null?null:{location:{pathname:h,search:d,hash:y,state:_,key:j},navigationType:u}},[c,v,d,y,_,j,u]);return C==null?null:L.createElement(Hi.Provider,{value:m},L.createElement(Hl.Provider,{children:s,value:C}))}function h_(t){let{children:i,location:s}=t;return Yb(Su(i),s)}new Promise(()=>{});function Su(t,i){i===void 0&&(i=[]);let s=[];return L.Children.forEach(t,(o,u)=>{if(!L.isValidElement(o))return;let S=[...i,u];if(o.type===L.Fragment){s.push.apply(s,Su(o.props.children,S));return}o.type!==Wt&&Ot(!1),!o.props.index||!o.props.children||Ot(!1);let b={id:o.props.id||S.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(b.children=Su(o.props.children,S)),s.push(b)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},zl.apply(this,arguments)}function t0(t,i){if(t==null)return{};var s={},o=Object.keys(t),u,S;for(S=0;S<o.length;S++)u=o[S],!(i.indexOf(u)>=0)&&(s[u]=t[u]);return s}function p_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function f_(t,i){return t.button===0&&(!i||i==="_self")&&!p_(t)}function wu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,s)=>{let o=t[s];return i.concat(Array.isArray(o)?o.map(u=>[s,u]):[[s,o]])},[]))}function g_(t,i){let s=wu(t);return i&&i.forEach((o,u)=>{s.has(u)||i.getAll(u).forEach(S=>{s.append(u,S)})}),s}const x_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y_="6";try{window.__reactRouterVersion=y_}catch{}const v_=L.createContext({isTransitioning:!1}),b_="startTransition",Vg=hb[b_];function __(t){let{basename:i,children:s,future:o,window:u}=t,S=L.useRef();S.current==null&&(S.current=vb({window:u,v5Compat:!0}));let b=S.current,[l,c]=L.useState({action:b.action,location:b.location}),{v7_startTransition:m}=o||{},v=L.useCallback(d=>{m&&Vg?Vg(()=>c(d)):c(d)},[c,m]);return L.useLayoutEffect(()=>b.listen(v),[b,v]),L.useEffect(()=>l_(o),[o]),L.createElement(u_,{basename:i,children:s,location:l.location,navigationType:l.action,navigator:b,future:o})}const S_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=L.forwardRef(function(i,s){let{onClick:o,relative:u,reloadDocument:S,replace:b,state:l,target:c,to:m,preventScrollReset:v,viewTransition:d}=i,y=t0(i,x_),{basename:_}=L.useContext(Hi),j,C=!1;if(typeof m=="string"&&w_.test(m)&&(j=m,S_))try{let g=new URL(window.location.href),w=m.startsWith("//")?new URL(g.protocol+m):new URL(m),R=As(w.pathname,_);w.origin===g.origin&&R!=null?m=R+w.search+w.hash:C=!0}catch{}let h=Vb(m,{relative:u}),p=k_(m,{replace:b,state:l,target:c,preventScrollReset:v,relative:u,viewTransition:d});function f(g){o&&o(g),g.defaultPrevented||p(g)}return L.createElement("a",zl({},y,{href:j||h,onClick:C||S?o:f,ref:s,target:c}))}),Pr=L.forwardRef(function(i,s){let{"aria-current":o="page",caseSensitive:u=!1,className:S="",end:b=!1,style:l,to:c,viewTransition:m,children:v}=i,d=t0(i,m_),y=Ul(c,{relative:d.relative}),_=kn(),j=L.useContext(Ym),{navigator:C,basename:h}=L.useContext(Hi),p=j!=null&&E_(y)&&m===!0,f=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,g=_.pathname,w=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;u||(g=g.toLowerCase(),w=w?w.toLowerCase():null,f=f.toLowerCase()),w&&h&&(w=As(w,h)||w);const R=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let A=g===f||!b&&g.startsWith(f)&&g.charAt(R)==="/",z=w!=null&&(w===f||!b&&w.startsWith(f)&&w.charAt(f.length)==="/"),E={isActive:A,isPending:z,isTransitioning:p},B=A?o:void 0,O;typeof S=="function"?O=S(E):O=[S,A?"active":null,z?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let H=typeof l=="function"?l(E):l;return L.createElement(mi,zl({},d,{"aria-current":B,className:O,ref:s,style:H,to:c,viewTransition:m}),typeof v=="function"?v(E):v)});var Cu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cu||(Cu={}));var Kg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kg||(Kg={}));function C_(t){let i=L.useContext(Nl);return i||Ot(!1),i}function k_(t,i){let{target:s,replace:o,state:u,preventScrollReset:S,relative:b,viewTransition:l}=i===void 0?{}:i,c=Ut(),m=kn(),v=Ul(t,{relative:b});return L.useCallback(d=>{if(f_(d,s)){d.preventDefault();let y=o!==void 0?o:Ll(m)===Ll(v);c(t,{replace:y,state:u,preventScrollReset:S,relative:b,viewTransition:l})}},[m,c,v,o,u,s,t,S,b,l])}function j_(t){let i=L.useRef(wu(t)),s=L.useRef(!1),o=kn(),u=L.useMemo(()=>g_(o.search,s.current?null:i.current),[o.search]),S=Ut(),b=L.useCallback((l,c)=>{const m=wu(typeof l=="function"?l(u):l);s.current=!0,S("?"+m,c)},[S,u]);return[u,b]}function E_(t,i){i===void 0&&(i={});let s=L.useContext(v_);s==null&&Ot(!1);let{basename:o}=C_(Cu.useViewTransitionState),u=Ul(t,{relative:i.relative});if(!s.isTransitioning)return!1;let S=As(s.currentLocation.pathname,o)||s.currentLocation.pathname,b=As(s.nextLocation.pathname,o)||s.nextLocation.pathname;return _u(u.pathname,b)!=null||_u(u.pathname,S)!=null}const uh="atp-token",hh="atp-user";function Ko(){return localStorage.getItem(uh)}function r0(t){localStorage.setItem(uh,t)}function i0(){localStorage.removeItem(uh),localStorage.removeItem(hh)}function qo(){try{const t=localStorage.getItem(hh);return t?JSON.parse(t):null}catch{return null}}function ph(t){localStorage.setItem(hh,JSON.stringify(t))}async function le(t,i={}){const s=Ko(),o={"Content-Type":"application/json",...i.headers||{}};s&&(o.Authorization=`Bearer ${s}`);const u=await fetch(t,{...i,headers:o});if(u.status===401)throw i0(),window.location.href="/login",new Error("Unauthorized");if(!u.ok){const S=await u.json().catch(()=>({error:u.statusText}));throw new Error(S.error||"Request failed")}return u.json()}function R_({size:t=32,withText:i=!1,glowing:s=!1}){const o=s?{filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6)) drop-shadow(0 0 4px rgba(139, 92, 246, 0.4))"}:{};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",style:{imageRendering:"pixelated",...o},children:[e.jsx("rect",{x:"5",y:"3",width:"6",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"4",width:"8",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"5",width:"8",height:"5",fill:"#8B5CF6"}),e.jsx("rect",{x:"6",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"9",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"6",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"7",y:"9",width:"2",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"9",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"6",y:"2",width:"4",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"7",y:"1",width:"2",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"5",y:"10",width:"6",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"6",y:"11",width:"4",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"5",y:"6",width:"1",height:"1",fill:"#c4b5fd",opacity:"0.6"})]}),i&&e.jsxs("div",{style:{fontFamily:'"Press Start 2P", "JetBrains Mono", monospace',fontSize:t*.4,fontWeight:"400",letterSpacing:"0.05em",color:"#F4F4F5",lineHeight:1,textShadow:s?"0 0 10px rgba(139, 92, 246, 0.5)":"none"},children:["guru",e.jsx("span",{style:{color:"#8B5CF6"},children:".ai"})]})]})}function T_(){const t=Ut(),i=kn(),[s,o]=L.useState(null),[u,S]=L.useState(!1);L.useEffect(()=>{le("/api/user/me").then(o).catch(()=>{const d=qo();d&&o(d)})},[]),L.useEffect(()=>{S(!1)},[i.pathname]);const b=()=>{i0(),t("/login")},l=d=>({color:d?"#F4F4F5":"#52525B",fontSize:"13px",fontWeight:"500",textDecoration:"none",transition:"color 0.2s",padding:"6px 12px",borderRadius:"4px",background:d?"rgba(139,92,246,0.1)":"transparent"}),c=i.pathname.startsWith("/project/")&&i.pathname!=="/project/new",m=i.pathname.startsWith("/compare/"),v=c||m;return e.jsxs("div",{style:{minHeight:"100vh",background:"#0f0f0f"},children:[e.jsxs("nav",{className:"guru-nav",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:50,background:"rgba(15,15,15,0.95)",backdropFilter:"blur(12px)"},children:[e.jsx("div",{style:{cursor:"pointer"},onClick:()=>t("/"),children:e.jsx(R_,{size:28,withText:!0})}),e.jsxs("div",{className:"guru-nav-links",style:{display:"flex",gap:"4px"},children:[e.jsx(Pr,{to:"/",end:!0,style:({isActive:d})=>l(d),children:"Dashboard"}),e.jsx(Pr,{to:"/marketplace",style:({isActive:d})=>l(d||i.pathname.startsWith("/marketplace")),children:"Marketplace"}),e.jsx(Pr,{to:"/agents",style:({isActive:d})=>l(d||i.pathname.startsWith("/agents")),children:"Agents"}),e.jsx(Pr,{to:"/agents/teams",style:({isActive:d})=>l(d),children:"Teams"}),e.jsx(Pr,{to:"/skills",style:({isActive:d})=>l(d),children:"Skills"}),e.jsx(Pr,{to:"/agents/stats",style:({isActive:d})=>l(d),children:"Stats"}),e.jsx(Pr,{to:"/sessions",style:({isActive:d})=>l(d),children:"Sessions"})]}),e.jsxs("div",{className:"guru-nav-right",style:{display:"flex",alignItems:"center",gap:"12px"},children:[s&&e.jsxs("div",{className:"guru-user-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA"},children:s.displayName||s.email}),e.jsx("div",{title:s.claudeConnected?"Claude connected":"Claude not connected",onClick:()=>!s.claudeConnected&&t("/setup-claude"),style:{width:"8px",height:"8px",borderRadius:"50%",background:s.claudeConnected?"#22c55e":"#ef4444",cursor:s.claudeConnected?"default":"pointer",boxShadow:s.claudeConnected?"0 0 6px rgba(34,197,94,0.4)":"0 0 6px rgba(239,68,68,0.4)"}})]}),e.jsx("button",{onClick:b,className:"guru-logout-btn",style:{background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:d=>{d.target.style.borderColor="#8B5CF6",d.target.style.color="#F4F4F5"},onMouseLeave:d=>{d.target.style.borderColor="rgba(255,255,255,0.15)",d.target.style.color="#A1A1AA"},children:"Logout"}),e.jsxs("button",{className:"guru-hamburger",onClick:()=>S(!u),style:{display:"none",background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",flexDirection:"column",gap:"3px",alignItems:"center"},children:[e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(45deg) translateY(5px)":"none"}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",opacity:u?0:1}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(-45deg) translateY(-5px)":"none"}})]})]})]}),u&&e.jsxs("div",{className:"guru-mobile-menu",style:{position:"fixed",top:"53px",left:0,right:0,bottom:0,background:"rgba(15,15,15,0.98)",zIndex:49,display:"flex",flexDirection:"column",padding:"16px 24px",gap:"4px",backdropFilter:"blur(12px)"},children:[e.jsx(Pr,{to:"/",end:!0,style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Dashboard"}),e.jsx(Pr,{to:"/marketplace",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/marketplace")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Marketplace"}),e.jsx(Pr,{to:"/agents",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/agents")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Agents"}),e.jsx(Pr,{to:"/agents/teams",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Teams"}),e.jsx(Pr,{to:"/skills",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Skills"}),e.jsx(Pr,{to:"/agents/stats",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Stats"}),e.jsx(Pr,{to:"/sessions",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Sessions"})]}),e.jsx("main",{className:"guru-main",style:{padding:v?0:"24px",maxWidth:v?"none":"1400px",margin:"0 auto"},children:e.jsx(d_,{})}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .guru-nav { padding: 10px 16px !important; }
          .guru-nav-links { display: none !important; }
          .guru-hamburger { display: flex !important; }
          .guru-user-info { display: none !important; }
          .guru-logout-btn { display: none !important; }
          .guru-main { padding: 16px !important; }
        }
        @media (min-width: 769px) {
          .guru-mobile-menu { display: none !important; }
        }
      `})]})}function A_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(!1),c=Ut(),m=async v=>{v.preventDefault(),S(""),l(!0);try{const d=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}),y=await d.json();if(!d.ok)throw new Error(y.error);r0(y.token),ph({userId:y.userId,email:y.email,displayName:y.displayName,role:y.role,claudeConnected:y.claudeConnected}),c("/")}catch(d){S(d.message)}finally{l(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:m,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m4.93 4.93 4.24 4.24"}),e.jsx("path",{d:"m14.83 9.17 4.24-4.24"}),e.jsx("path",{d:"m14.83 14.83 4.24 4.24"}),e.jsx("path",{d:"m9.17 14.83-4.24 4.24"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px"},children:"Agent Testing Platform"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Sign in to continue"})]}),u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:u}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:v=>i(v.target.value),required:!0,style:{width:"100%"},placeholder:"admin@vps.local"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:v=>o(v.target.value),required:!0,style:{width:"100%"}})]}),e.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:b?.7:1},children:b?"Signing in...":"Sign In"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Don't have an account?"," ",e.jsx(mi,{to:"/register",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Create one"})]})]})]})}function L_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(""),[c,m]=L.useState(!1),v=Ut(),d=async y=>{y.preventDefault(),l(""),m(!0);try{const _=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s,displayName:u})}),j=await _.json();if(!_.ok)throw new Error(j.error);r0(j.token),ph({userId:j.userId,email:j.email,displayName:j.displayName,role:j.role,claudeConnected:j.claudeConnected}),v("/setup-claude")}catch(_){l(_.message)}finally{m(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:d,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),e.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px",color:"#F4F4F5"},children:"Create Account"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Join the Agent Testing Platform"})]}),b&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:b}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Display Name"}),e.jsx("input",{type:"text",value:u,onChange:y=>S(y.target.value),style:{width:"100%"},placeholder:"Your name"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:y=>i(y.target.value),required:!0,style:{width:"100%"},placeholder:"you@example.com"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:y=>o(y.target.value),required:!0,style:{width:"100%"},placeholder:"Min. 6 characters"})]}),e.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:c?.7:1,cursor:c?"default":"pointer"},children:c?"Creating account...":"Create Account"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Already have an account?"," ",e.jsx(mi,{to:"/login",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Sign in"})]})]})]})}const ji=Object.create(null);ji.open="0";ji.close="1";ji.ping="2";ji.pong="3";ji.message="4";ji.upgrade="5";ji.noop="6";const bl=Object.create(null);Object.keys(ji).forEach(t=>{bl[ji[t]]=t});const ku={type:"error",data:"parser error"},n0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",s0=typeof ArrayBuffer=="function",o0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,fh=({type:t,data:i},s,o)=>n0&&i instanceof Blob?s?o(i):qg(i,o):s0&&(i instanceof ArrayBuffer||o0(i))?s?o(i):qg(new Blob([i]),o):o(ji[t]+(i||"")),qg=(t,i)=>{const s=new FileReader;return s.onload=function(){const o=s.result.split(",")[1];i("b"+(o||""))},s.readAsDataURL(t)};function Gg(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Fd;function z_(t,i){if(n0&&t.data instanceof Blob)return t.data.arrayBuffer().then(Gg).then(i);if(s0&&(t.data instanceof ArrayBuffer||o0(t.data)))return i(Gg(t.data));fh(t,!1,s=>{Fd||(Fd=new TextEncoder),i(Fd.encode(s))})}const Yg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ao=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Yg.length;t++)Ao[Yg.charCodeAt(t)]=t;const I_=t=>{let i=t.length*.75,s=t.length,o,u=0,S,b,l,c;t[t.length-1]==="="&&(i--,t[t.length-2]==="="&&i--);const m=new ArrayBuffer(i),v=new Uint8Array(m);for(o=0;o<s;o+=4)S=Ao[t.charCodeAt(o)],b=Ao[t.charCodeAt(o+1)],l=Ao[t.charCodeAt(o+2)],c=Ao[t.charCodeAt(o+3)],v[u++]=S<<2|b>>4,v[u++]=(b&15)<<4|l>>2,v[u++]=(l&3)<<6|c&63;return m},D_=typeof ArrayBuffer=="function",gh=(t,i)=>{if(typeof t!="string")return{type:"message",data:a0(t,i)};const s=t.charAt(0);return s==="b"?{type:"message",data:M_(t.substring(1),i)}:bl[s]?t.length>1?{type:bl[s],data:t.substring(1)}:{type:bl[s]}:ku},M_=(t,i)=>{if(D_){const s=I_(t);return a0(s,i)}else return{base64:!0,data:t}},a0=(t,i)=>{switch(i){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},l0="",B_=(t,i)=>{const s=t.length,o=new Array(s);let u=0;t.forEach((S,b)=>{fh(S,!1,l=>{o[b]=l,++u===s&&i(o.join(l0))})})},P_=(t,i)=>{const s=t.split(l0),o=[];for(let u=0;u<s.length;u++){const S=gh(s[u],i);if(o.push(S),S.type==="error")break}return o};function O_(){return new TransformStream({transform(t,i){z_(t,s=>{const o=s.length;let u;if(o<126)u=new Uint8Array(1),new DataView(u.buffer).setUint8(0,o);else if(o<65536){u=new Uint8Array(3);const S=new DataView(u.buffer);S.setUint8(0,126),S.setUint16(1,o)}else{u=new Uint8Array(9);const S=new DataView(u.buffer);S.setUint8(0,127),S.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(u[0]|=128),i.enqueue(u),i.enqueue(s)})}})}let Wd;function al(t){return t.reduce((i,s)=>i+s.length,0)}function ll(t,i){if(t[0].length===i)return t.shift();const s=new Uint8Array(i);let o=0;for(let u=0;u<i;u++)s[u]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),s}function $_(t,i){Wd||(Wd=new TextDecoder);const s=[];let o=0,u=-1,S=!1;return new TransformStream({transform(b,l){for(s.push(b);;){if(o===0){if(al(s)<1)break;const c=ll(s,1);S=(c[0]&128)===128,u=c[0]&127,u<126?o=3:u===126?o=1:o=2}else if(o===1){if(al(s)<2)break;const c=ll(s,2);u=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),o=3}else if(o===2){if(al(s)<8)break;const c=ll(s,8),m=new DataView(c.buffer,c.byteOffset,c.length),v=m.getUint32(0);if(v>Math.pow(2,21)-1){l.enqueue(ku);break}u=v*Math.pow(2,32)+m.getUint32(4),o=3}else{if(al(s)<u)break;const c=ll(s,u);l.enqueue(gh(S?c:Wd.decode(c),i)),o=0}if(u===0||u>t){l.enqueue(ku);break}}}})}const c0=4;function Zt(t){if(t)return F_(t)}function F_(t){for(var i in Zt.prototype)t[i]=Zt.prototype[i];return t}Zt.prototype.on=Zt.prototype.addEventListener=function(t,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(i),this};Zt.prototype.once=function(t,i){function s(){this.off(t,s),i.apply(this,arguments)}return s.fn=i,this.on(t,s),this};Zt.prototype.off=Zt.prototype.removeListener=Zt.prototype.removeAllListeners=Zt.prototype.removeEventListener=function(t,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,u=0;u<s.length;u++)if(o=s[u],o===i||o.fn===i){s.splice(u,1);break}return s.length===0&&delete this._callbacks["$"+t],this};Zt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+t],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,u=s.length;o<u;++o)s[o].apply(this,i)}return this};Zt.prototype.emitReserved=Zt.prototype.emit;Zt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Zt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Vl=typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,s)=>s(i,0),ei=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),W_="arraybuffer";function d0(t,...i){return i.reduce((s,o)=>(t.hasOwnProperty(o)&&(s[o]=t[o]),s),{})}const N_=ei.setTimeout,H_=ei.clearTimeout;function Kl(t,i){i.useNativeTimers?(t.setTimeoutFn=N_.bind(ei),t.clearTimeoutFn=H_.bind(ei)):(t.setTimeoutFn=ei.setTimeout.bind(ei),t.clearTimeoutFn=ei.clearTimeout.bind(ei))}const U_=1.33;function V_(t){return typeof t=="string"?K_(t):Math.ceil((t.byteLength||t.size)*U_)}function K_(t){let i=0,s=0;for(let o=0,u=t.length;o<u;o++)i=t.charCodeAt(o),i<128?s+=1:i<2048?s+=2:i<55296||i>=57344?s+=3:(o++,s+=4);return s}function u0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function q_(t){let i="";for(let s in t)t.hasOwnProperty(s)&&(i.length&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return i}function G_(t){let i={},s=t.split("&");for(let o=0,u=s.length;o<u;o++){let S=s[o].split("=");i[decodeURIComponent(S[0])]=decodeURIComponent(S[1])}return i}class Y_ extends Error{constructor(i,s,o){super(i),this.description=s,this.context=o,this.type="TransportError"}}class xh extends Zt{constructor(i){super(),this.writable=!1,Kl(this,i),this.opts=i,this.query=i.query,this.socket=i.socket,this.supportsBinary=!i.forceBase64}onError(i,s,o){return super.emitReserved("error",new Y_(i,s,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const s=gh(i,this.socket.binaryType);this.onPacket(s)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}pause(i){}createUri(i,s={}){return i+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const i=this.opts.hostname;return i.indexOf(":")===-1?i:"["+i+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(i){const s=q_(i);return s.length?"?"+s:""}}class X_ extends xh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(i){this.readyState="pausing";const s=()=>{this.readyState="paused",i()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||s()})),this.writable||(o++,this.once("drain",function(){--o||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const s=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};P_(i,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,B_(i,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const i=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=u0()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(i,s)}}let h0=!1;try{h0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const J_=h0;function Q_(){}class Z_ extends X_{constructor(i){if(super(i),typeof location<"u"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location<"u"&&i.hostname!==location.hostname||o!==i.port}}doWrite(i,s){const o=this.request({method:"POST",data:i});o.on("success",s),o.on("error",(u,S)=>{this.onError("xhr post error",u,S)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(s,o)=>{this.onError("xhr poll error",s,o)}),this.pollXhr=i}}class Ci extends Zt{constructor(i,s,o){super(),this.createRequest=i,Kl(this,o),this._opts=o,this._method=o.method||"GET",this._uri=s,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var i;const s=d0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(s);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let u in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(u)&&o.setRequestHeader(u,this._opts.extraHeaders[u])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(i=this._opts.cookieJar)===null||i===void 0||i.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var u;o.readyState===3&&((u=this._opts.cookieJar)===null||u===void 0||u.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(u){this.setTimeoutFn(()=>{this._onError(u)},0);return}typeof document<"u"&&(this._index=Ci.requestsCount++,Ci.requests[this._index]=this)}_onError(i){this.emitReserved("error",i,this._xhr),this._cleanup(!0)}_cleanup(i){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Q_,i)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ci.requests[this._index],this._xhr=null}}_onLoad(){const i=this._xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ci.requestsCount=0;Ci.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Xg);else if(typeof addEventListener=="function"){const t="onpagehide"in ei?"pagehide":"unload";addEventListener(t,Xg,!1)}}function Xg(){for(let t in Ci.requests)Ci.requests.hasOwnProperty(t)&&Ci.requests[t].abort()}const e2=(function(){const t=p0({xdomain:!1});return t&&t.responseType!==null})();class t2 extends Z_{constructor(i){super(i);const s=i&&i.forceBase64;this.supportsBinary=e2&&!s}request(i={}){return Object.assign(i,{xd:this.xd},this.opts),new Ci(p0,this.uri(),i)}}function p0(t){const i=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!i||J_))return new XMLHttpRequest}catch{}if(!i)try{return new ei[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const f0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class r2 extends xh{get name(){return"websocket"}doOpen(){const i=this.uri(),s=this.opts.protocols,o=f0?{}:d0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(i,s,o)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;fh(o,this.supportsBinary,S=>{try{this.doWrite(o,S)}catch{}u&&Vl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const i=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=u0()),this.supportsBinary||(s.b64=1),this.createUri(i,s)}}const Nd=ei.WebSocket||ei.MozWebSocket;class i2 extends r2{createSocket(i,s,o){return f0?new Nd(i,s,o):s?new Nd(i,s):new Nd(i)}doWrite(i,s){this.ws.send(s)}}class n2 extends xh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(i){return this.emitReserved("error",i)}this._transport.closed.then(()=>{this.onClose()}).catch(i=>{this.onError("webtransport error",i)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(i=>{const s=$_(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=i.readable.pipeThrough(s).getReader(),u=O_();u.readable.pipeTo(i.writable),this._writer=u.writable.getWriter();const S=()=>{o.read().then(({done:l,value:c})=>{l||(this.onPacket(c),S())}).catch(l=>{})};S();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;this._writer.write(o).then(()=>{u&&Vl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var i;(i=this._transport)===null||i===void 0||i.close()}}const s2={websocket:i2,webtransport:n2,polling:t2},o2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ju(t){if(t.length>8e3)throw"URI too long";const i=t,s=t.indexOf("["),o=t.indexOf("]");s!=-1&&o!=-1&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));let u=o2.exec(t||""),S={},b=14;for(;b--;)S[a2[b]]=u[b]||"";return s!=-1&&o!=-1&&(S.source=i,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S.pathNames=l2(S,S.path),S.queryKey=c2(S,S.query),S}function l2(t,i){const s=/\/{2,9}/g,o=i.replace(s,"/").split("/");return(i.slice(0,1)=="/"||i.length===0)&&o.splice(0,1),i.slice(-1)=="/"&&o.splice(o.length-1,1),o}function c2(t,i){const s={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,u,S){u&&(s[u]=S)}),s}const Eu=typeof addEventListener=="function"&&typeof removeEventListener=="function",_l=[];Eu&&addEventListener("offline",()=>{_l.forEach(t=>t())},!1);class vn extends Zt{constructor(i,s){if(super(),this.binaryType=W_,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,i&&typeof i=="object"&&(s=i,i=null),i){const o=ju(i);s.hostname=o.host,s.secure=o.protocol==="https"||o.protocol==="wss",s.port=o.port,o.query&&(s.query=o.query)}else s.host&&(s.hostname=ju(s.host).host);Kl(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(o=>{const u=o.prototype.name;this.transports.push(u),this._transportsByName[u]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=G_(this.opts.query)),Eu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_l.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(i){const s=Object.assign({},this.opts.query);s.EIO=c0,s.transport=i,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new this._transportsByName[i](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const i=this.opts.rememberUpgrade&&vn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(i);s.open(),this.setTransport(s)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",vn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=i.data,this._onError(s);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this._pingInterval=i.pingInterval,this._pingTimeout=i.pingTimeout,this._maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const i=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+i,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},i),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this._getWritablePackets();this.transport.send(i),this._prevBufferLen=i.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const u=this.writeBuffer[o].data;if(u&&(s+=V_(u)),o>0&&s>this._maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const i=Date.now()>this._pingTimeoutTime;return i&&(this._pingTimeoutTime=0,Vl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),i}write(i,s,o){return this._sendPacket("message",i,s,o),this}send(i,s,o){return this._sendPacket("message",i,s,o),this}_sendPacket(i,s,o,u){if(typeof s=="function"&&(u=s,s=void 0),typeof o=="function"&&(u=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const S={type:i,data:s,options:o};this.emitReserved("packetCreate",S),this.writeBuffer.push(S),u&&this.once("flush",u),this.flush()}close(){const i=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),i()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():i()}):this.upgrading?o():i()),this}_onError(i){if(vn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",i),this._onClose("transport error",i)}_onClose(i,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Eu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=_l.indexOf(this._offlineEventListener);o!==-1&&_l.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",i,s),this.writeBuffer=[],this._prevBufferLen=0}}}vn.protocol=c0;class d2 extends vn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let i=0;i<this._upgrades.length;i++)this._probe(this._upgrades[i])}_probe(i){let s=this.createTransport(i),o=!1;vn.priorWebsocketSuccess=!1;const u=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",d=>{if(!o)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;vn.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(v(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=s.name,this.emitReserved("upgradeError",y)}}))};function S(){o||(o=!0,v(),s.close(),s=null)}const b=d=>{const y=new Error("probe error: "+d);y.transport=s.name,S(),this.emitReserved("upgradeError",y)};function l(){b("transport closed")}function c(){b("socket closed")}function m(d){s&&d.name!==s.name&&S()}const v=()=>{s.removeListener("open",u),s.removeListener("error",b),s.removeListener("close",l),this.off("close",c),this.off("upgrading",m)};s.once("open",u),s.once("error",b),s.once("close",l),this.once("close",c),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{o||s.open()},200):s.open()}onHandshake(i){this._upgrades=this._filterUpgrades(i.upgrades),super.onHandshake(i)}_filterUpgrades(i){const s=[];for(let o=0;o<i.length;o++)~this.transports.indexOf(i[o])&&s.push(i[o]);return s}}let u2=class extends d2{constructor(i,s={}){const o=typeof i=="object"?i:s;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(u=>s2[u]).filter(u=>!!u)),super(i,o)}};function h2(t,i="",s){let o=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),o=ju(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const S=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+S+":"+o.port+i,o.href=o.protocol+"://"+S+(s&&s.port===o.port?"":":"+o.port),o}const p2=typeof ArrayBuffer=="function",f2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,g0=Object.prototype.toString,g2=typeof Blob=="function"||typeof Blob<"u"&&g0.call(Blob)==="[object BlobConstructor]",x2=typeof File=="function"||typeof File<"u"&&g0.call(File)==="[object FileConstructor]";function mh(t){return p2&&(t instanceof ArrayBuffer||f2(t))||g2&&t instanceof Blob||x2&&t instanceof File}function Sl(t,i){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(Sl(t[s]))return!0;return!1}if(mh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sl(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Sl(t[s]))return!0;return!1}function m2(t){const i=[],s=t.data,o=t;return o.data=Ru(s,i),o.attachments=i.length,{packet:o,buffers:i}}function Ru(t,i){if(!t)return t;if(mh(t)){const s={_placeholder:!0,num:i.length};return i.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=Ru(t[o],i);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=Ru(t[o],i));return s}return t}function y2(t,i){return t.data=Tu(t.data,i),delete t.attachments,t}function Tu(t,i){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<i.length)return i[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Tu(t[s],i);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Tu(t[s],i));return t}const v2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var xt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(xt||(xt={}));class b2{constructor(i){this.replacer=i}encode(i){return(i.type===xt.EVENT||i.type===xt.ACK)&&Sl(i)?this.encodeAsBinary({type:i.type===xt.EVENT?xt.BINARY_EVENT:xt.BINARY_ACK,nsp:i.nsp,data:i.data,id:i.id}):[this.encodeAsString(i)]}encodeAsString(i){let s=""+i.type;return(i.type===xt.BINARY_EVENT||i.type===xt.BINARY_ACK)&&(s+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(s+=i.nsp+","),i.id!=null&&(s+=i.id),i.data!=null&&(s+=JSON.stringify(i.data,this.replacer)),s}encodeAsBinary(i){const s=m2(i),o=this.encodeAsString(s.packet),u=s.buffers;return u.unshift(o),u}}class yh extends Zt{constructor(i){super(),this.reviver=i}add(i){let s;if(typeof i=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(i);const o=s.type===xt.BINARY_EVENT;o||s.type===xt.BINARY_ACK?(s.type=o?xt.EVENT:xt.ACK,this.reconstructor=new _2(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(mh(i)||i.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(i),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let s=0;const o={type:Number(i.charAt(0))};if(xt[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===xt.BINARY_EVENT||o.type===xt.BINARY_ACK){const S=s+1;for(;i.charAt(++s)!=="-"&&s!=i.length;);const b=i.substring(S,s);if(b!=Number(b)||i.charAt(s)!=="-")throw new Error("Illegal attachments");o.attachments=Number(b)}if(i.charAt(s+1)==="/"){const S=s+1;for(;++s&&!(i.charAt(s)===","||s===i.length););o.nsp=i.substring(S,s)}else o.nsp="/";const u=i.charAt(s+1);if(u!==""&&Number(u)==u){const S=s+1;for(;++s;){const b=i.charAt(s);if(b==null||Number(b)!=b){--s;break}if(s===i.length)break}o.id=Number(i.substring(S,s+1))}if(i.charAt(++s)){const S=this.tryParse(i.substr(s));if(yh.isPayloadValid(o.type,S))o.data=S;else throw new Error("invalid payload")}return o}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,s){switch(i){case xt.CONNECT:return Jg(s);case xt.DISCONNECT:return s===void 0;case xt.CONNECT_ERROR:return typeof s=="string"||Jg(s);case xt.EVENT:case xt.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&v2.indexOf(s[0])===-1);case xt.ACK:case xt.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _2{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const s=y2(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Jg(t){return Object.prototype.toString.call(t)==="[object Object]"}const S2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:yh,Encoder:b2,get PacketType(){return xt}},Symbol.toStringTag,{value:"Module"}));function gi(t,i,s){return t.on(i,s),function(){t.off(i,s)}}const w2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x0 extends Zt{constructor(i,s,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=s,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[gi(i,"open",this.onopen.bind(this)),gi(i,"packet",this.onpacket.bind(this)),gi(i,"error",this.onerror.bind(this)),gi(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...s){var o,u,S;if(w2.hasOwnProperty(i))throw new Error('"'+i.toString()+'" is a reserved event name');if(s.unshift(i),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const b={type:xt.EVENT,data:s};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const v=this.ids++,d=s.pop();this._registerAckCallback(v,d),b.id=v}const l=(u=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||u===void 0?void 0:u.writable,c=this.connected&&!(!((S=this.io.engine)===null||S===void 0)&&S._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(i,s){var o;const u=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(u===void 0){this.acks[i]=s;return}const S=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===i&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},u),b=(...l)=>{this.io.clearTimeoutFn(S),s.apply(this,l)};b.withError=!0,this.acks[i]=b}emitWithAck(i,...s){return new Promise((o,u)=>{const S=(b,l)=>b?u(b):o(l);S.withError=!0,s.push(S),this.emit(i,...s)})}_addToQueue(i){let s;typeof i[i.length-1]=="function"&&(s=i.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:i,flags:Object.assign({fromQueue:!0},this.flags)};i.push((u,...S)=>(this._queue[0],u!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(u)):(this._queue.shift(),s&&s(null,...S)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(i=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!i||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this._sendConnectPacket(i)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(i){this.packet({type:xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},i):i})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(i=>{if(!this.sendBuffer.some(o=>String(o.id)===i)){const o=this.acks[i];delete this.acks[i],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case xt.CONNECT:i.data&&i.data.sid?this.onconnect(i.data.sid,i.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xt.EVENT:case xt.BINARY_EVENT:this.onevent(i);break;case xt.ACK:case xt.BINARY_ACK:this.onack(i);break;case xt.DISCONNECT:this.ondisconnect();break;case xt.CONNECT_ERROR:this.destroy();const o=new Error(i.data.message);o.data=i.data.data,this.emitReserved("connect_error",o);break}}onevent(i){const s=i.data||[];i.id!=null&&s.push(this.ack(i.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const o of s)o.apply(this,i)}super.emit.apply(this,i),this._pid&&i.length&&typeof i[i.length-1]=="string"&&(this._lastOffset=i[i.length-1])}ack(i){const s=this;let o=!1;return function(...u){o||(o=!0,s.packet({type:xt.ACK,id:i,data:u}))}}onack(i){const s=this.acks[i.id];typeof s=="function"&&(delete this.acks[i.id],s.withError&&i.data.unshift(null),s.apply(this,i.data))}onconnect(i,s){this.id=i,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const s=this._anyListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const s=this._anyOutgoingListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const o of s)o.apply(this,i.data)}}}function Os(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Os.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),s=Math.floor(i*this.jitter*t);t=(Math.floor(i*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Os.prototype.reset=function(){this.attempts=0};Os.prototype.setMin=function(t){this.ms=t};Os.prototype.setMax=function(t){this.max=t};Os.prototype.setJitter=function(t){this.jitter=t};class Au extends Zt{constructor(i,s){var o;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(s=i,i=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Kl(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((o=s.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Os({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=i;const u=s.parser||S2;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,i||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var s;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(s=this.backoff)===null||s===void 0||s.setMin(i),this)}randomizationFactor(i){var s;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(s=this.backoff)===null||s===void 0||s.setJitter(i),this)}reconnectionDelayMax(i){var s;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(s=this.backoff)===null||s===void 0||s.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new u2(this.uri,this.opts);const s=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const u=gi(s,"open",function(){o.onopen(),i&&i()}),S=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),i?i(l):this.maybeReconnectOnOpen()},b=gi(s,"error",S);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{u(),S(new Error("timeout")),s.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(u),this.subs.push(b),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(gi(i,"ping",this.onping.bind(this)),gi(i,"data",this.ondata.bind(this)),gi(i,"error",this.onerror.bind(this)),gi(i,"close",this.onclose.bind(this)),gi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){try{this.decoder.add(i)}catch(s){this.onclose("parse error",s)}}ondecoded(i){Vl(()=>{this.emitReserved("packet",i)},this.setTimeoutFn)}onerror(i){this.emitReserved("error",i)}socket(i,s){let o=this.nsps[i];return o?this._autoConnect&&!o.active&&o.connect():(o=new x0(this,i,s),this.nsps[i]=o),o}_destroy(i){const s=Object.keys(this.nsps);for(const o of s)if(this.nsps[o].active)return;this._close()}_packet(i){const s=this.encoder.encode(i);for(let o=0;o<s.length;o++)this.engine.write(s[o],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(i,s){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(u=>{u?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",u)):i.onreconnect()}))},s);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const Co={};function Io(t,i){typeof t=="object"&&(i=t,t=void 0),i=i||{};const s=h2(t,i.path||"/socket.io"),o=s.source,u=s.id,S=s.path,b=Co[u]&&S in Co[u].nsps,l=i.forceNew||i["force new connection"]||i.multiplex===!1||b;let c;return l?c=new Au(o,i):(Co[u]||(Co[u]=new Au(o,i)),c=Co[u]),s.query&&!i.query&&(i.query=s.queryKey),c.socket(s.path,i)}Object.assign(Io,{Manager:Au,Socket:x0,io:Io,connect:Io});var Hd={exports:{}},Qg;function C2(){return Qg||(Qg=1,(function(t,i){(function(s,o){t.exports=o()})(globalThis,(()=>(()=>{var s={4567:function(b,l,c){var m=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var B=f.length-1;B>=0;B--)(A=f[B])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const d=c(9042),y=c(9924),_=c(844),j=c(4725),C=c(2585),h=c(3656);let p=l.AccessibilityManager=class extends _.Disposable{constructor(f,g,w,R){super(),this._terminal=f,this._coreBrowserService=w,this._renderService=R,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let A=0;A<this._terminal.rows;A++)this._rowElements[A]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[A]);if(this._topBoundaryFocusListener=A=>this._handleBoundaryFocus(A,0),this._bottomBoundaryFocusListener=A=>this._handleBoundaryFocus(A,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((A=>this._handleResize(A.rows)))),this.register(this._terminal.onRender((A=>this._refreshRows(A.start,A.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((A=>this._handleChar(A)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((A=>this._handleTab(A)))),this.register(this._terminal.onKey((A=>this._handleKey(A.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,h.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,_.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(f){for(let g=0;g<f;g++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,g){this._liveRegionDebouncer.refresh(f,g,this._terminal.rows)}_renderRows(f,g){const w=this._terminal.buffer,R=w.lines.length.toString();for(let A=f;A<=g;A++){const z=w.lines.get(w.ydisp+A),E=[],B=(z==null?void 0:z.translateToString(!0,void 0,void 0,E))||"",O=(w.ydisp+A+1).toString(),H=this._rowElements[A];H&&(B.length===0?(H.innerText="",this._rowColumns.set(H,[0,1])):(H.textContent=B,this._rowColumns.set(H,E)),H.setAttribute("aria-posinset",O),H.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,g){const w=f.target,R=this._rowElements[g===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==R)return;let A,z;if(g===0?(A=w,z=this._rowElements.pop(),this._rowContainer.removeChild(z)):(A=this._rowElements.shift(),z=w,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),z.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleSelectionChange(){var B;if(this._rowElements.length===0)return;const f=document.getSelection();if(!f)return;if(f.isCollapsed)return void(this._rowContainer.contains(f.anchorNode)&&this._terminal.clearSelection());if(!f.anchorNode||!f.focusNode)return void console.error("anchorNode and/or focusNode are null");let g={node:f.anchorNode,offset:f.anchorOffset},w={node:f.focusNode,offset:f.focusOffset};if((g.node.compareDocumentPosition(w.node)&Node.DOCUMENT_POSITION_PRECEDING||g.node===w.node&&g.offset>w.offset)&&([g,w]=[w,g]),g.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(g={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(g.node))return;const R=this._rowElements.slice(-1)[0];if(w.node.compareDocumentPosition(R)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(w={node:R,offset:((B=R.textContent)==null?void 0:B.length)??0}),!this._rowContainer.contains(w.node))return;const A=({node:O,offset:H})=>{const K=O instanceof Text?O.parentNode:O;let U=parseInt(K==null?void 0:K.getAttribute("aria-posinset"),10)-1;if(isNaN(U))return console.warn("row is invalid. Race condition?"),null;const ee=this._rowColumns.get(K);if(!ee)return console.warn("columns is null. Race condition?"),null;let V=H<ee.length?ee[H]:ee.slice(-1)[0]+1;return V>=this._terminal.cols&&(++U,V=0),{row:U,column:V}},z=A(g),E=A(w);if(z&&E){if(z.row>E.row||z.row===E.row&&z.column>=E.column)throw new Error("invalid range");this._terminal.select(z.column,z.row,(E.row-z.row)*this._terminal.cols-z.column+E.column)}}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const f=this._coreBrowserService.mainDocument.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=p=m([v(1,C.IInstantiationService),v(2,j.ICoreBrowserService),v(3,j.IRenderService)],p)},3614:(b,l)=>{function c(y){return y.replace(/\r?\n/g,"\r")}function m(y,_){return _?"\x1B[200~"+y+"\x1B[201~":y}function v(y,_,j,C){y=m(y=c(y),j.decPrivateModes.bracketedPasteMode&&C.rawOptions.ignoreBracketedPasteMode!==!0),j.triggerDataEvent(y,!0),_.value=""}function d(y,_,j){const C=j.getBoundingClientRect(),h=y.clientX-C.left-10,p=y.clientY-C.top-10;_.style.width="20px",_.style.height="20px",_.style.left=`${h}px`,_.style.top=`${p}px`,_.style.zIndex="1000",_.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=c,l.bracketTextForPaste=m,l.copyHandler=function(y,_){y.clipboardData&&y.clipboardData.setData("text/plain",_.selectionText),y.preventDefault()},l.handlePasteEvent=function(y,_,j,C){y.stopPropagation(),y.clipboardData&&v(y.clipboardData.getData("text/plain"),_,j,C)},l.paste=v,l.moveTextAreaUnderMouseCursor=d,l.rightClickHandler=function(y,_,j,C,h){d(y,_,j),h&&C.rightClickSelect(y),_.value=C.selectionText,_.select()}},7239:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const m=c(1505);l.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(v,d,y){this._css.set(v,d,y)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,y){this._color.set(v,d,y)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(c,m,v,d){c.addEventListener(m,v,d);let y=!1;return{dispose:()=>{y||(y=!0,c.removeEventListener(m,v,d))}}}},3551:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const d=c(3656),y=c(8460),_=c(844),j=c(2585),C=c(4725);let h=l.Linkifier=class extends _.Disposable{get currentLink(){return this._currentLink}constructor(p,f,g,w,R){super(),this._element=p,this._mouseService=f,this._renderService=g,this._bufferService=w,this._linkProviderService=R,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,_.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,_.toDisposable)((()=>{var A;this._lastMouseEvent=void 0,(A=this._activeProviderReplies)==null||A.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const g=p.composedPath();for(let w=0;w<g.length;w++){const R=g[w];if(R.classList.contains("xterm"))break;if(R.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,f){var w,R;this._activeProviderReplies&&f||((w=this._activeProviderReplies)==null||w.forEach((A=>{A==null||A.forEach((z=>{z.link.dispose&&z.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=p.y);let g=!1;for(const[A,z]of this._linkProviderService.linkProviders.entries())f?(R=this._activeProviderReplies)!=null&&R.get(A)&&(g=this._checkLinkProviderResult(A,p,g)):z.provideLinks(p.y,(E=>{var O,H;if(this._isMouseOut)return;const B=E==null?void 0:E.map((K=>({link:K})));(O=this._activeProviderReplies)==null||O.set(A,B),g=this._checkLinkProviderResult(A,p,g),((H=this._activeProviderReplies)==null?void 0:H.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)}))}_removeIntersectingLinks(p,f){const g=new Set;for(let w=0;w<f.size;w++){const R=f.get(w);if(R)for(let A=0;A<R.length;A++){const z=R[A],E=z.link.range.start.y<p?0:z.link.range.start.x,B=z.link.range.end.y>p?this._bufferService.cols:z.link.range.end.x;for(let O=E;O<=B;O++){if(g.has(O)){R.splice(A--,1);break}g.add(O)}}}}_checkLinkProviderResult(p,f,g){var A;if(!this._activeProviderReplies)return g;const w=this._activeProviderReplies.get(p);let R=!1;for(let z=0;z<p;z++)this._activeProviderReplies.has(z)&&!this._activeProviderReplies.get(z)||(R=!0);if(!R&&w){const z=w.find((E=>this._linkAtPosition(E.link,f)));z&&(g=!0,this._handleNewLink(z))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!g)for(let z=0;z<this._activeProviderReplies.size;z++){const E=(A=this._activeProviderReplies.get(z))==null?void 0:A.find((B=>this._linkAtPosition(B.link,f)));if(E){g=!0,this._handleNewLink(E);break}}return g}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,f){this._currentLink&&this._lastMouseEvent&&(!p||!f||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(p.link,f)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var g,w;return(w=(g=this._currentLink)==null?void 0:g.state)==null?void 0:w.decorations.pointerCursor},set:g=>{var w;(w=this._currentLink)!=null&&w.state&&this._currentLink.state.decorations.pointerCursor!==g&&(this._currentLink.state.decorations.pointerCursor=g,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",g))}},underline:{get:()=>{var g,w;return(w=(g=this._currentLink)==null?void 0:g.state)==null?void 0:w.decorations.underline},set:g=>{var w,R,A;(w=this._currentLink)!=null&&w.state&&((A=(R=this._currentLink)==null?void 0:R.state)==null?void 0:A.decorations.underline)!==g&&(this._currentLink.state.decorations.underline=g,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,g))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((g=>{if(!this._currentLink)return;const w=g.start===0?0:g.start+1+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.ydisp+1+g.end;if(this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=R&&(this._clearCurrentLink(w,R),this._lastMouseEvent)){const A=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);A&&this._askForLink(A,!1)}}))))}_linkHover(p,f,g){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(g,f.text)}_fireUnderlineEvent(p,f){const g=p.range,w=this._bufferService.buffer.ydisp,R=this._createLinkUnderlineEvent(g.start.x-1,g.start.y-w-1,g.end.x,g.end.y-w-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(R)}_linkLeave(p,f,g){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(g,f.text)}_linkAtPosition(p,f){const g=p.range.start.y*this._bufferService.cols+p.range.start.x,w=p.range.end.y*this._bufferService.cols+p.range.end.x,R=f.y*this._bufferService.cols+f.x;return g<=R&&R<=w}_positionFromMouseEvent(p,f,g){const w=g.getCoords(p,f,this._bufferService.cols,this._bufferService.rows);if(w)return{x:w[0],y:w[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,f,g,w,R){return{x1:p,y1:f,x2:g,y2:w,cols:this._bufferService.cols,fg:R}}};l.Linkifier=h=m([v(1,C.IMouseService),v(2,C.IRenderService),v(3,j.IBufferService),v(4,C.ILinkProviderService)],h)},9042:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,l,c){var m=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const d=c(511),y=c(2585);let _=l.OscLinkProvider=class{constructor(C,h,p){this._bufferService=C,this._optionsService=h,this._oscLinkService=p}provideLinks(C,h){var B;const p=this._bufferService.buffer.lines.get(C-1);if(!p)return void h(void 0);const f=[],g=this._optionsService.rawOptions.linkHandler,w=new d.CellData,R=p.getTrimmedLength();let A=-1,z=-1,E=!1;for(let O=0;O<R;O++)if(z!==-1||p.hasContent(O)){if(p.loadCell(O,w),w.hasExtendedAttrs()&&w.extended.urlId){if(z===-1){z=O,A=w.extended.urlId;continue}E=w.extended.urlId!==A}else z!==-1&&(E=!0);if(E||z!==-1&&O===R-1){const H=(B=this._oscLinkService.getLinkData(A))==null?void 0:B.uri;if(H){const K={start:{x:z+1,y:C},end:{x:O+(E||O!==R-1?0:1),y:C}};let U=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const ee=new URL(H);["http:","https:"].includes(ee.protocol)||(U=!0)}catch{U=!0}U||f.push({text:H,range:K,activate:(ee,V)=>g?g.activate(ee,V,K):j(0,V),hover:(ee,V)=>{var ue;return(ue=g==null?void 0:g.hover)==null?void 0:ue.call(g,ee,V,K)},leave:(ee,V)=>{var ue;return(ue=g==null?void 0:g.leave)==null?void 0:ue.call(g,ee,V,K)}})}E=!1,w.hasExtendedAttrs()&&w.extended.urlId?(z=O,A=w.extended.urlId):(z=-1,A=-1)}}h(f)}};function j(C,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=_=m([v(0,y.IBufferService),v(1,y.IOptionsService),v(2,y.IOscLinkService)],_)},6193:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(c,m){this._renderCallback=c,this._coreBrowserService=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(c,m,v){this._rowCount=v,c=c!==void 0?c:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const m=c(3614),v=c(3656),d=c(3551),y=c(9042),_=c(3730),j=c(1680),C=c(3107),h=c(5744),p=c(2950),f=c(1296),g=c(428),w=c(4269),R=c(5114),A=c(8934),z=c(3230),E=c(9312),B=c(4725),O=c(6731),H=c(8055),K=c(8969),U=c(8460),ee=c(844),V=c(6114),ue=c(8437),Q=c(2584),G=c(7399),M=c(5941),I=c(9074),D=c(2585),W=c(5435),fe=c(4567),ye=c(779);class we extends K.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(Y={}){super(Y),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new ee.MutableDisposable),this._onCursorMove=this.register(new U.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new U.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new U.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new U.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new U.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new U.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new U.EventEmitter),this._onBlur=this.register(new U.EventEmitter),this._onA11yCharEmitter=this.register(new U.EventEmitter),this._onA11yTabEmitter=this.register(new U.EventEmitter),this._onWillOpen=this.register(new U.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(D.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ye.LinkProviderService),this._instantiationService.setService(B.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(_.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((F,be)=>this.refresh(F,be)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((F=>this._reportWindowsOptions(F)))),this.register(this._inputHandler.onColor((F=>this._handleColorEvent(F)))),this.register((0,U.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,U.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((F=>this._afterResize(F.cols,F.rows)))),this.register((0,ee.toDisposable)((()=>{var F,be;this._customKeyEventHandler=void 0,(be=(F=this.element)==null?void 0:F.parentNode)==null||be.removeChild(this.element)})))}_handleColorEvent(Y){if(this._themeService)for(const F of Y){let be,oe="";switch(F.index){case 256:be="foreground",oe="10";break;case 257:be="background",oe="11";break;case 258:be="cursor",oe="12";break;default:be="ansi",oe="4;"+F.index}switch(F.type){case 0:const Ie=H.color.toColorRGB(be==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[be]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${oe};${(0,M.toRgbString)(Ie)}${Q.C1_ESCAPED.ST}`);break;case 1:if(be==="ansi")this._themeService.modifyColors((Z=>Z.ansi[F.index]=H.channels.toColor(...F.color)));else{const Z=be;this._themeService.modifyColors((je=>je[Z]=H.channels.toColor(...F.color)))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(Y){Y?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(fe.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(Y){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var Y;return(Y=this.textarea)==null?void 0:Y.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const Y=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(Y);if(!F)return;const be=Math.min(this.buffer.x,this.cols-1),oe=this._renderService.dimensions.css.cell.height,Ie=F.getWidth(be),Z=this._renderService.dimensions.css.cell.width*Ie,je=this.buffer.y*this._renderService.dimensions.css.cell.height,pe=be*this._renderService.dimensions.css.cell.width;this.textarea.style.left=pe+"px",this.textarea.style.top=je+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=oe+"px",this.textarea.style.lineHeight=oe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(F=>{this.hasSelection()&&(0,m.copyHandler)(F,this._selectionService)})));const Y=F=>(0,m.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",Y)),this.register((0,v.addDisposableDomListener)(this.element,"paste",Y)),V.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(F=>{F.button===2&&(0,m.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(F=>{(0,m.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),V.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(F=>{F.button===1&&(0,m.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(Y=>this._keyUp(Y)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(Y=>this._keyDown(Y)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(Y=>this._keyPress(Y)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(Y=>this._compositionHelper.compositionupdate(Y)))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(Y=>this._inputEvent(Y)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(Y){var be;if(!Y)throw new Error("Terminal requires a parent element.");if(Y.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((be=this.element)==null?void 0:be.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=Y.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),Y.appendChild(this.element);const F=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",(oe=>this.updateCursorStyle(oe)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,Y.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(B.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(oe=>this._handleTextAreaFocus(oe)))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(g.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(B.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(O.ThemeService),this._instantiationService.setService(B.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(w.CharacterJoinerService),this._instantiationService.setService(B.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(z.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(B.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((oe=>this._onRender.fire(oe)))),this.onResize((oe=>this._renderService.resize(oe.cols,oe.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(B.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(j.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(E.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(B.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((oe=>this._renderService.handleSelectionChanged(oe.start,oe.end,oe.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((oe=>{this.textarea.value=oe,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((oe=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(C.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(oe=>this._selectionService.handleMouseDown(oe)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(fe.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(oe=>this._handleScreenReaderModeOptionChange(oe)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(oe=>{!this._overviewRulerRenderer&&oe&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const Y=this,F=this.element;function be(Z){const je=Y._mouseService.getMouseReportCoords(Z,Y.screenElement);if(!je)return!1;let pe,De;switch(Z.overrideType||Z.type){case"mousemove":De=32,Z.buttons===void 0?(pe=3,Z.button!==void 0&&(pe=Z.button<3?Z.button:3)):pe=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":De=0,pe=Z.button<3?Z.button:3;break;case"mousedown":De=1,pe=Z.button<3?Z.button:3;break;case"wheel":if(Y._customWheelEventHandler&&Y._customWheelEventHandler(Z)===!1||Y.viewport.getLinesScrolled(Z)===0)return!1;De=Z.deltaY<0?0:1,pe=4;break;default:return!1}return!(De===void 0||pe===void 0||pe>4)&&Y.coreMouseService.triggerMouseEvent({col:je.col,row:je.row,x:je.x,y:je.y,button:pe,action:De,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const oe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ie={mouseup:Z=>(be(Z),Z.buttons||(this._document.removeEventListener("mouseup",oe.mouseup),oe.mousedrag&&this._document.removeEventListener("mousemove",oe.mousedrag)),this.cancel(Z)),wheel:Z=>(be(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&be(Z)},mousemove:Z=>{Z.buttons||be(Z)}};this.register(this.coreMouseService.onProtocolChange((Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?oe.mousemove||(F.addEventListener("mousemove",Ie.mousemove),oe.mousemove=Ie.mousemove):(F.removeEventListener("mousemove",oe.mousemove),oe.mousemove=null),16&Z?oe.wheel||(F.addEventListener("wheel",Ie.wheel,{passive:!1}),oe.wheel=Ie.wheel):(F.removeEventListener("wheel",oe.wheel),oe.wheel=null),2&Z?oe.mouseup||(oe.mouseup=Ie.mouseup):(this._document.removeEventListener("mouseup",oe.mouseup),oe.mouseup=null),4&Z?oe.mousedrag||(oe.mousedrag=Ie.mousedrag):(this._document.removeEventListener("mousemove",oe.mousedrag),oe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(F,"mousedown",(Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return be(Z),oe.mouseup&&this._document.addEventListener("mouseup",oe.mouseup),oe.mousedrag&&this._document.addEventListener("mousemove",oe.mousedrag),this.cancel(Z)}))),this.register((0,v.addDisposableDomListener)(F,"wheel",(Z=>{if(!oe.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Z)===!1)return!1;if(!this.buffer.hasScrollback){const je=this.viewport.getLinesScrolled(Z);if(je===0)return;const pe=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let De="";for(let $e=0;$e<Math.abs(je);$e++)De+=pe;return this.coreService.triggerDataEvent(De,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(F,"touchstart",(Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(F,"touchmove",(Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)}),{passive:!1}))}refresh(Y,F){var be;(be=this._renderService)==null||be.refreshRows(Y,F)}updateCursorStyle(Y){var F;(F=this._selectionService)!=null&&F.shouldColumnSelect(Y)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(Y,F,be=0){var oe;be===1?(super.scrollLines(Y,F,be),this.refresh(0,this.rows-1)):(oe=this.viewport)==null||oe.scrollLines(Y)}paste(Y){(0,m.paste)(Y,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(Y){this._customKeyEventHandler=Y}attachCustomWheelEventHandler(Y){this._customWheelEventHandler=Y}registerLinkProvider(Y){return this._linkProviderService.registerLinkProvider(Y)}registerCharacterJoiner(Y){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(Y);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(Y){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(Y)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(Y){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+Y)}registerDecoration(Y){return this._decorationService.registerDecoration(Y)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(Y,F,be){this._selectionService.setSelection(Y,F,be)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var Y;(Y=this._selectionService)==null||Y.clearSelection()}selectAll(){var Y;(Y=this._selectionService)==null||Y.selectAll()}selectLines(Y,F){var be;(be=this._selectionService)==null||be.selectLines(Y,F)}_keyDown(Y){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(Y)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&Y.altKey;if(!F&&!this._compositionHelper.keydown(Y))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||Y.key!=="Dead"&&Y.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const be=(0,G.evaluateKeyboardEvent)(Y,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(Y),be.type===3||be.type===2){const oe=this.rows-1;return this.scrollLines(be.type===2?-oe:oe),this.cancel(Y,!0)}return be.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,Y)||(be.cancel&&this.cancel(Y,!0),!be.key||!!(Y.key&&!Y.ctrlKey&&!Y.altKey&&!Y.metaKey&&Y.key.length===1&&Y.key.charCodeAt(0)>=65&&Y.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(be.key!==Q.C0.ETX&&be.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:be.key,domEvent:Y}),this._showCursor(),this.coreService.triggerDataEvent(be.key,!0),!this.optionsService.rawOptions.screenReaderMode||Y.altKey||Y.ctrlKey?this.cancel(Y,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(Y,F){const be=Y.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||Y.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||Y.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?be:be&&(!F.keyCode||F.keyCode>47)}_keyUp(Y){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(Y)===!1||((function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18})(Y)||this.focus(),this.updateCursorStyle(Y),this._keyPressHandled=!1)}_keyPress(Y){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(Y)===!1)return!1;if(this.cancel(Y),Y.charCode)F=Y.charCode;else if(Y.which===null||Y.which===void 0)F=Y.keyCode;else{if(Y.which===0||Y.charCode===0)return!1;F=Y.which}return!(!F||(Y.altKey||Y.ctrlKey||Y.metaKey)&&!this._isThirdLevelShift(this.browser,Y)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:Y}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(Y){if(Y.data&&Y.inputType==="insertText"&&(!Y.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=Y.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(Y),!0}return!1}resize(Y,F){Y!==this.cols||F!==this.rows?super.resize(Y,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(Y,F){var be,oe;(be=this._charSizeService)==null||be.measure(),(oe=this.viewport)==null||oe.syncScrollArea(!0)}clear(){var Y;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine(ue.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(Y=this.viewport)==null||Y.reset(),this.refresh(0,this.rows-1)}}reset(){var F,be;this.options.rows=this.rows,this.options.cols=this.cols;const Y=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)==null||F.reset(),this._decorationService.reset(),(be=this.viewport)==null||be.reset(),this._customKeyEventHandler=Y,this.refresh(0,this.rows-1)}clearTextureAtlas(){var Y;(Y=this._renderService)==null||Y.clearTextureAtlas()}_reportFocus(){var Y;(Y=this.element)!=null&&Y.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(Y){if(this._renderService)switch(Y){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),be=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${be};${F}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const oe=this._renderService.dimensions.css.cell.width.toFixed(0),Ie=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${Ie};${oe}t`)}}cancel(Y,F){if(this.options.cancelEvents||F)return Y.preventDefault(),Y.stopPropagation(),!1}}l.Terminal=we},9924:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(c,m=1e3){this._renderCallback=c,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,m,v){this._rowCount=v,c=c!==void 0?c:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=d-this._lastRefreshMs,_=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),_)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,m)}}},1680:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const d=c(3656),y=c(4725),_=c(8460),j=c(844),C=c(2585);let h=l.Viewport=class extends j.Disposable{constructor(p,f,g,w,R,A,z,E){super(),this._viewportElement=p,this._scrollArea=f,this._bufferService=g,this._optionsService=w,this._charSizeService=R,this._renderService=A,this._coreBrowserService=z,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((B=>this._renderDimensions=B))),this._handleThemeChange(E.colors),this.register(E.onChangeColors((B=>this._handleThemeChange(B)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,f){const g=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&g<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const f=this._getPixelsScrolled(p);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const f=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(p,f){var E;let g,w="";const R=[],A=f??this._bufferService.buffer.lines.length,z=this._bufferService.buffer.lines;for(let B=p;B<A;B++){const O=z.get(B);if(!O)continue;const H=(E=z.get(B+1))==null?void 0:E.isWrapped;if(w+=O.translateToString(!H),!H||B===z.length-1){const K=document.createElement("div");K.textContent=w,R.push(K),w.length>0&&(g=K),w=""}}return{bufferElements:R,cursorElement:g}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(p,f){const g=this._optionsService.rawOptions.fastScrollModifier;return g==="alt"&&f.altKey||g==="ctrl"&&f.ctrlKey||g==="shift"&&f.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const f=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}};l.Viewport=h=m([v(2,C.IBufferService),v(3,C.IOptionsService),v(4,y.ICharSizeService),v(5,y.IRenderService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],h)},3107:function(b,l,c){var m=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const d=c(4725),y=c(844),_=c(2585);let j=l.BufferDecorationRenderer=class extends y.Disposable{constructor(C,h,p,f,g){super(),this._screenElement=C,this._bufferService=h,this._coreBrowserService=p,this._decorationService=f,this._renderService=g,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((w=>this._removeDecoration(w)))),this.register((0,y.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const C of this._decorationService.decorations)this._renderDecoration(C);this._dimensionsChanged=!1}_renderDecoration(C){this._refreshStyle(C),this._dimensionsChanged&&this._refreshXPosition(C)}_createElement(C){var f;const h=this._coreBrowserService.mainDocument.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((f=C==null?void 0:C.options)==null?void 0:f.layer)==="top"),h.style.width=`${Math.round((C.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(C.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(C.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=C.options.x??0;return p&&p>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(C,h),h}_refreshStyle(C){const h=C.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)C.element&&(C.element.style.display="none",C.onRenderEmitter.fire(C.element));else{let p=this._decorationElements.get(C);p||(p=this._createElement(C),C.element=p,this._decorationElements.set(C,p),this._container.appendChild(p),C.onDispose((()=>{this._decorationElements.delete(C),p.remove()}))),p.style.top=h*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",C.onRenderEmitter.fire(p)}}_refreshXPosition(C,h=C.element){if(!h)return;const p=C.options.x??0;(C.options.anchor||"left")==="right"?h.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(C){var h;(h=this._decorationElements.get(C))==null||h.remove(),this._decorationElements.delete(C),C.dispose()}};l.BufferDecorationRenderer=j=m([v(1,_.IBufferService),v(2,d.ICoreBrowserService),v(3,_.IDecorationService),v(4,d.IRenderService)],j)},5871:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const m of this._zones)if(m.color===c.options.overviewRulerOptions.color&&m.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,c.marker.line))return;if(this._lineAdjacentToZone(m,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(m,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,m){return m>=c.startBufferLine&&m<=c.endBufferLine}_lineAdjacentToZone(c,m,v){return m>=c.startBufferLine-this._linePadding[v||"full"]&&m<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,m){c.startBufferLine=Math.min(c.startBufferLine,m),c.endBufferLine=Math.max(c.endBufferLine,m)}}},5744:function(b,l,c){var m=this&&this.__decorate||function(g,w,R,A){var z,E=arguments.length,B=E<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,R):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,w,R,A);else for(var O=g.length-1;O>=0;O--)(z=g[O])&&(B=(E<3?z(B):E>3?z(w,R,B):z(w,R))||B);return E>3&&B&&Object.defineProperty(w,R,B),B},v=this&&this.__param||function(g,w){return function(R,A){w(R,A,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const d=c(5871),y=c(4725),_=c(844),j=c(2585),C={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let f=l.OverviewRulerRenderer=class extends _.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,w,R,A,z,E,B){var H;super(),this._viewportElement=g,this._screenElement=w,this._bufferService=R,this._decorationService=A,this._renderService=z,this._optionsService=E,this._coreBrowserService=B,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(H=this._viewportElement.parentElement)==null||H.insertBefore(this._canvas,this._viewportElement);const O=this._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");this._ctx=O,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,_.toDisposable)((()=>{var K;(K=this._canvas)==null||K.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=w,h.right=g,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=h.left,p.right=h.left+h.center}_refreshDrawHeightConstants(){C.full=Math.round(2*this._coreBrowserService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowserService.dpr);C.left=w,C.center=w,C.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*C.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const w of g)w.position!=="full"&&this._renderColorZone(w);for(const w of g)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(p[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-C[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+C[g.position||"full"]))}_queueRefresh(g,w){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=f=m([v(2,j.IBufferService),v(3,j.IDecorationService),v(4,y.IRenderService),v(5,j.IOptionsService),v(6,y.ICoreBrowserService)],f)},2950:function(b,l,c){var m=this&&this.__decorate||function(C,h,p,f){var g,w=arguments.length,R=w<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,h,p,f);else for(var A=C.length-1;A>=0;A--)(g=C[A])&&(R=(w<3?g(R):w>3?g(h,p,R):g(h,p))||R);return w>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(C,h){return function(p,f){h(p,f,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const d=c(4725),y=c(2585),_=c(2584);let j=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(C,h,p,f,g,w){this._textarea=C,this._compositionView=h,this._bufferService=p,this._optionsService=f,this._coreService=g,this._renderService=w,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(C){this._compositionView.textContent=C.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(C){if(this._isComposing||this._isSendingComposition){if(C.keyCode===229||C.keyCode===16||C.keyCode===17||C.keyCode===18)return!1;this._finalizeComposition(!1)}return C.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(C){if(this._compositionView.classList.remove("active"),this._isComposing=!1,C){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}}),0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const C=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const h=this._textarea.value,p=h.replace(C,"");this._dataAlreadySent=p,h.length>C.length?this._coreService.triggerDataEvent(p,!0):h.length<C.length?this._coreService.triggerDataEvent(`${_.C0.DEL}`,!0):h.length===C.length&&h!==C&&this._coreService.triggerDataEvent(h,!0)}}),0)}updateCompositionElements(C){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,g=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=g+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const w=this._compositionView.getBoundingClientRect();this._textarea.style.left=g+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(w.width,1)+"px",this._textarea.style.height=Math.max(w.height,1)+"px",this._textarea.style.lineHeight=w.height+"px"}C||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=j=m([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,y.ICoreService),v(5,d.IRenderService)],j)},9806:(b,l)=>{function c(m,v,d){const y=d.getBoundingClientRect(),_=m.getComputedStyle(d),j=parseInt(_.getPropertyValue("padding-left")),C=parseInt(_.getPropertyValue("padding-top"));return[v.clientX-y.left-j,v.clientY-y.top-C]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=c,l.getCoords=function(m,v,d,y,_,j,C,h,p){if(!j)return;const f=c(m,v,d);return f?(f[0]=Math.ceil((f[0]+(p?C/2:0))/C),f[1]=Math.ceil(f[1]/h),f[0]=Math.min(Math.max(f[0],1),y+(p?1:0)),f[1]=Math.min(Math.max(f[1],1),_),f):void 0}},9504:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const m=c(2584);function v(h,p,f,g){const w=h-d(h,f),R=p-d(p,f),A=Math.abs(w-R)-(function(z,E,B){let O=0;const H=z-d(z,B),K=E-d(E,B);for(let U=0;U<Math.abs(H-K);U++){const ee=y(z,E)==="A"?-1:1,V=B.buffer.lines.get(H+ee*U);V!=null&&V.isWrapped&&O++}return O})(h,p,f);return C(A,j(y(h,p),g))}function d(h,p){let f=0,g=p.buffer.lines.get(h),w=g==null?void 0:g.isWrapped;for(;w&&h>=0&&h<p.rows;)f++,g=p.buffer.lines.get(--h),w=g==null?void 0:g.isWrapped;return f}function y(h,p){return h>p?"A":"B"}function _(h,p,f,g,w,R){let A=h,z=p,E="";for(;A!==f||z!==g;)A+=w?1:-1,w&&A>R.cols-1?(E+=R.buffer.translateBufferLineToString(z,!1,h,A),A=0,h=0,z++):!w&&A<0&&(E+=R.buffer.translateBufferLineToString(z,!1,0,h+1),A=R.cols-1,h=A,z--);return E+R.buffer.translateBufferLineToString(z,!1,h,A)}function j(h,p){const f=p?"O":"[";return m.C0.ESC+f+h}function C(h,p){h=Math.floor(h);let f="";for(let g=0;g<h;g++)f+=p;return f}l.moveToCellSequence=function(h,p,f,g){const w=f.buffer.x,R=f.buffer.y;if(!f.buffer.hasScrollback)return(function(E,B,O,H,K,U){return v(B,H,K,U).length===0?"":C(_(E,B,E,B-d(B,K),!1,K).length,j("D",U))})(w,R,0,p,f,g)+v(R,p,f,g)+(function(E,B,O,H,K,U){let ee;ee=v(B,H,K,U).length>0?H-d(H,K):B;const V=H,ue=(function(Q,G,M,I,D,W){let fe;return fe=v(M,I,D,W).length>0?I-d(I,D):G,Q<M&&fe<=I||Q>=M&&fe<I?"C":"D"})(E,B,O,H,K,U);return C(_(E,ee,O,V,ue==="C",K).length,j(ue,U))})(w,R,h,p,f,g);let A;if(R===p)return A=w>h?"D":"C",C(Math.abs(w-h),j(A,g));A=R>p?"D":"C";const z=Math.abs(R-p);return C((function(E,B){return B.cols-E})(R>p?h:w,f)+(z-1)*f.cols+1+((R>p?w:h)-1),j(A,g))}},1296:function(b,l,c){var m=this&&this.__decorate||function(U,ee,V,ue){var Q,G=arguments.length,M=G<3?ee:ue===null?ue=Object.getOwnPropertyDescriptor(ee,V):ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(U,ee,V,ue);else for(var I=U.length-1;I>=0;I--)(Q=U[I])&&(M=(G<3?Q(M):G>3?Q(ee,V,M):Q(ee,V))||M);return G>3&&M&&Object.defineProperty(ee,V,M),M},v=this&&this.__param||function(U,ee){return function(V,ue){ee(V,ue,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const d=c(3787),y=c(2550),_=c(2223),j=c(6171),C=c(6052),h=c(4725),p=c(8055),f=c(8460),g=c(844),w=c(2585),R="xterm-dom-renderer-owner-",A="xterm-rows",z="xterm-fg-",E="xterm-bg-",B="xterm-focus",O="xterm-selection";let H=1,K=l.DomRenderer=class extends g.Disposable{constructor(U,ee,V,ue,Q,G,M,I,D,W,fe,ye,we){super(),this._terminal=U,this._document=ee,this._element=V,this._screenElement=ue,this._viewportElement=Q,this._helperContainer=G,this._linkifier2=M,this._charSizeService=D,this._optionsService=W,this._bufferService=fe,this._coreBrowserService=ye,this._themeService=we,this._terminalClass=H++,this._rowElements=[],this._selectionRenderModel=(0,C.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(A),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(O),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,j.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Re=>this._injectCss(Re)))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(R+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Re=>this._handleLinkHover(Re)))),this.register(this._linkifier2.onHideLinkUnderline((Re=>this._handleLinkLeave(Re)))),this.register((0,g.toDisposable)((()=>{this._element.classList.remove(R+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new y.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const ee=`${this._terminalSelector} .${A} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=ee,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let ee=`${this._terminalSelector} .${A} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;ee+=`${this._terminalSelector} .${A} .xterm-dim { color: ${p.color.multiplyOpacity(U.foreground,.5).css};}`,ee+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const V=`blink_underline_${this._terminalClass}`,ue=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;ee+=`@keyframes ${V} { 50% {  border-bottom-style: hidden; }}`,ee+=`@keyframes ${ue} { 50% {  box-shadow: none; }}`,ee+=`@keyframes ${Q} { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,ee+=`${this._terminalSelector} .${A}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${A}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ue} 1s step-end infinite;}${this._terminalSelector} .${A}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${U.cursor.css} !important; color: ${U.cursorAccent.css} !important;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,ee+=`${this._terminalSelector} .${O} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${O} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${O} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[G,M]of U.ansi.entries())ee+=`${this._terminalSelector} .${z}${G} { color: ${M.css}; }${this._terminalSelector} .${z}${G}.xterm-dim { color: ${p.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${E}${G} { background-color: ${M.css}; }`;ee+=`${this._terminalSelector} .${z}${_.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(U.background).css}; }${this._terminalSelector} .${z}${_.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${E}${_.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=ee}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,ee){for(let V=this._rowElements.length;V<=ee;V++){const ue=this._document.createElement("div");this._rowContainer.appendChild(ue),this._rowElements.push(ue)}for(;this._rowElements.length>ee;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,ee){this._refreshRowElements(U,ee),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(B),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(B),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,ee,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,ee,V),this.renderRows(0,this._bufferService.rows-1),!U||!ee)return;this._selectionRenderModel.update(this._terminal,U,ee,V);const ue=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,G=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(G>=this._bufferService.rows||M<0)return;const I=this._document.createDocumentFragment();if(V){const D=U[0]>ee[0];I.appendChild(this._createSelectionElement(G,D?ee[0]:U[0],D?U[0]:ee[0],M-G+1))}else{const D=ue===G?U[0]:0,W=G===Q?ee[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(G,D,W));const fe=M-G-1;if(I.appendChild(this._createSelectionElement(G+1,0,this._bufferService.cols,fe)),G!==M){const ye=Q===M?ee[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(M,0,ye))}}this._selectionContainer.appendChild(I)}_createSelectionElement(U,ee,V,ue=1){const Q=this._document.createElement("div"),G=ee*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(V-ee);return G+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-G),Q.style.height=ue*this.dimensions.css.cell.height+"px",Q.style.top=U*this.dimensions.css.cell.height+"px",Q.style.left=`${G}px`,Q.style.width=`${M}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,ee){const V=this._bufferService.buffer,ue=V.ybase+V.y,Q=Math.min(V.x,this._bufferService.cols-1),G=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let D=U;D<=ee;D++){const W=D+V.ydisp,fe=this._rowElements[D],ye=V.lines.get(W);if(!fe||!ye)break;fe.replaceChildren(...this._rowFactory.createRow(ye,W,W===ue,M,I,Q,G,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${R}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,ee,V,ue,Q,G){V<0&&(U=0),ue<0&&(ee=0);const M=this._bufferService.rows-1;V=Math.max(Math.min(V,M),0),ue=Math.max(Math.min(ue,M),0),Q=Math.min(Q,this._bufferService.cols);const I=this._bufferService.buffer,D=I.ybase+I.y,W=Math.min(I.x,Q-1),fe=this._optionsService.rawOptions.cursorBlink,ye=this._optionsService.rawOptions.cursorStyle,we=this._optionsService.rawOptions.cursorInactiveStyle;for(let Re=V;Re<=ue;++Re){const Y=Re+I.ydisp,F=this._rowElements[Re],be=I.lines.get(Y);if(!F||!be)break;F.replaceChildren(...this._rowFactory.createRow(be,Y,Y===D,ye,we,W,fe,this.dimensions.css.cell.width,this._widthCache,G?Re===V?U:0:-1,G?(Re===ue?ee:Q)-1:-1))}}};l.DomRenderer=K=m([v(7,w.IInstantiationService),v(8,h.ICharSizeService),v(9,w.IOptionsService),v(10,w.IBufferService),v(11,h.ICoreBrowserService),v(12,h.IThemeService)],K)},3787:function(b,l,c){var m=this&&this.__decorate||function(A,z,E,B){var O,H=arguments.length,K=H<3?z:B===null?B=Object.getOwnPropertyDescriptor(z,E):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(A,z,E,B);else for(var U=A.length-1;U>=0;U--)(O=A[U])&&(K=(H<3?O(K):H>3?O(z,E,K):O(z,E))||K);return H>3&&K&&Object.defineProperty(z,E,K),K},v=this&&this.__param||function(A,z){return function(E,B){z(E,B,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const d=c(2223),y=c(643),_=c(511),j=c(2585),C=c(8055),h=c(4725),p=c(4269),f=c(6171),g=c(3734);let w=l.DomRendererRowFactory=class{constructor(A,z,E,B,O,H,K){this._document=A,this._characterJoinerService=z,this._optionsService=E,this._coreBrowserService=B,this._coreService=O,this._decorationService=H,this._themeService=K,this._workCell=new _.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(A,z,E){this._selectionStart=A,this._selectionEnd=z,this._columnSelectMode=E}createRow(A,z,E,B,O,H,K,U,ee,V,ue){const Q=[],G=this._characterJoinerService.getJoinedCharacters(z),M=this._themeService.colors;let I,D=A.getNoBgTrimmedLength();E&&D<H+1&&(D=H+1);let W=0,fe="",ye=0,we=0,Re=0,Y=!1,F=0,be=!1,oe=0;const Ie=[],Z=V!==-1&&ue!==-1;for(let je=0;je<D;je++){A.loadCell(je,this._workCell);let pe=this._workCell.getWidth();if(pe===0)continue;let De=!1,$e=je,Pe=this._workCell;if(G.length>0&&je===G[0][0]){De=!0;const gt=G.shift();Pe=new p.JoinedCellData(this._workCell,A.translateToString(!0,gt[0],gt[1]),gt[1]-gt[0]),$e=gt[1]-1,pe=Pe.getWidth()}const Ee=this._isCellInSelection(je,z),He=E&&je===H,J=Z&&je>=V&&je<=ue;let ce=!1;this._decorationService.forEachDecorationAtCell(je,z,void 0,(gt=>{ce=!0}));let Ne=Pe.getChars()||y.WHITESPACE_CELL_CHAR;if(Ne===" "&&(Pe.isUnderline()||Pe.isOverline())&&(Ne=""),oe=pe*U-ee.get(Ne,Pe.isBold(),Pe.isItalic()),I){if(W&&(Ee&&be||!Ee&&!be&&Pe.bg===ye)&&(Ee&&be&&M.selectionForeground||Pe.fg===we)&&Pe.extended.ext===Re&&J===Y&&oe===F&&!He&&!De&&!ce){Pe.isInvisible()?fe+=y.WHITESPACE_CELL_CHAR:fe+=Ne,W++;continue}W&&(I.textContent=fe),I=this._document.createElement("span"),W=0,fe=""}else I=this._document.createElement("span");if(ye=Pe.bg,we=Pe.fg,Re=Pe.extended.ext,Y=J,F=oe,be=Ee,De&&H>=je&&H<=$e&&(H=je),!this._coreService.isCursorHidden&&He&&this._coreService.isCursorInitialized){if(Ie.push("xterm-cursor"),this._coreBrowserService.isFocused)K&&Ie.push("xterm-cursor-blink"),Ie.push(B==="bar"?"xterm-cursor-bar":B==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(O)switch(O){case"outline":Ie.push("xterm-cursor-outline");break;case"block":Ie.push("xterm-cursor-block");break;case"bar":Ie.push("xterm-cursor-bar");break;case"underline":Ie.push("xterm-cursor-underline")}}if(Pe.isBold()&&Ie.push("xterm-bold"),Pe.isItalic()&&Ie.push("xterm-italic"),Pe.isDim()&&Ie.push("xterm-dim"),fe=Pe.isInvisible()?y.WHITESPACE_CELL_CHAR:Pe.getChars()||y.WHITESPACE_CELL_CHAR,Pe.isUnderline()&&(Ie.push(`xterm-underline-${Pe.extended.underlineStyle}`),fe===" "&&(fe=""),!Pe.isUnderlineColorDefault()))if(Pe.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${g.AttributeData.toColorRGB(Pe.getUnderlineColor()).join(",")})`;else{let gt=Pe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Pe.isBold()&&gt<8&&(gt+=8),I.style.textDecorationColor=M.ansi[gt].css}Pe.isOverline()&&(Ie.push("xterm-overline"),fe===" "&&(fe="")),Pe.isStrikethrough()&&Ie.push("xterm-strikethrough"),J&&(I.style.textDecoration="underline");let et=Pe.getFgColor(),Je=Pe.getFgColorMode(),pt=Pe.getBgColor(),Gt=Pe.getBgColorMode();const Ct=!!Pe.isInverse();if(Ct){const gt=et;et=pt,pt=gt;const Rr=Je;Je=Gt,Gt=Rr}let kt,Lt,bt,It=!1;switch(this._decorationService.forEachDecorationAtCell(je,z,void 0,(gt=>{gt.options.layer!=="top"&&It||(gt.backgroundColorRGB&&(Gt=50331648,pt=gt.backgroundColorRGB.rgba>>8&16777215,kt=gt.backgroundColorRGB),gt.foregroundColorRGB&&(Je=50331648,et=gt.foregroundColorRGB.rgba>>8&16777215,Lt=gt.foregroundColorRGB),It=gt.options.layer==="top")})),!It&&Ee&&(kt=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,pt=kt.rgba>>8&16777215,Gt=50331648,It=!0,M.selectionForeground&&(Je=50331648,et=M.selectionForeground.rgba>>8&16777215,Lt=M.selectionForeground)),It&&Ie.push("xterm-decoration-top"),Gt){case 16777216:case 33554432:bt=M.ansi[pt],Ie.push(`xterm-bg-${pt}`);break;case 50331648:bt=C.channels.toColor(pt>>16,pt>>8&255,255&pt),this._addStyle(I,`background-color:#${R((pt>>>0).toString(16),"0",6)}`);break;default:Ct?(bt=M.foreground,Ie.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):bt=M.background}switch(kt||Pe.isDim()&&(kt=C.color.multiplyOpacity(bt,.5)),Je){case 16777216:case 33554432:Pe.isBold()&&et<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(et+=8),this._applyMinimumContrast(I,bt,M.ansi[et],Pe,kt,void 0)||Ie.push(`xterm-fg-${et}`);break;case 50331648:const gt=C.channels.toColor(et>>16&255,et>>8&255,255&et);this._applyMinimumContrast(I,bt,gt,Pe,kt,Lt)||this._addStyle(I,`color:#${R(et.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,bt,M.foreground,Pe,kt,Lt)||Ct&&Ie.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}Ie.length&&(I.className=Ie.join(" "),Ie.length=0),He||De||ce?I.textContent=fe:W++,oe!==this.defaultSpacing&&(I.style.letterSpacing=`${oe}px`),Q.push(I),je=$e}return I&&W&&(I.textContent=fe),Q}_applyMinimumContrast(A,z,E,B,O,H){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.treatGlyphAsBackgroundColor)(B.getCode()))return!1;const K=this._getContrastCache(B);let U;if(O||H||(U=K.getColor(z.rgba,E.rgba)),U===void 0){const ee=this._optionsService.rawOptions.minimumContrastRatio/(B.isDim()?2:1);U=C.color.ensureContrastRatio(O||z,H||E,ee),K.setColor((O||z).rgba,(H||E).rgba,U??null)}return!!U&&(this._addStyle(A,`color:${U.css}`),!0)}_getContrastCache(A){return A.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(A,z){A.setAttribute("style",`${A.getAttribute("style")||""}${z};`)}_isCellInSelection(A,z){const E=this._selectionStart,B=this._selectionEnd;return!(!E||!B)&&(this._columnSelectMode?E[0]<=B[0]?A>=E[0]&&z>=E[1]&&A<B[0]&&z<=B[1]:A<E[0]&&z>=E[1]&&A>=B[0]&&z<=B[1]:z>E[1]&&z<B[1]||E[1]===B[1]&&z===E[1]&&A>=E[0]&&A<B[0]||E[1]<B[1]&&z===B[1]&&A<B[0]||E[1]<B[1]&&z===E[1]&&A>=E[0])}};function R(A,z,E){for(;A.length<E;)A=z+A;return A}l.DomRendererRowFactory=w=m([v(1,h.ICharacterJoinerService),v(2,j.IOptionsService),v(3,h.ICoreBrowserService),v(4,j.ICoreService),v(5,j.IDecorationService),v(6,h.IThemeService)],w)},2550:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(c,m){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const y=c.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontStyle="italic";const _=c.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[v,d,y,_],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(y),this._container.appendChild(_),m.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,m,v,d){c===this._font&&m===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=m,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,m,v){let d=0;if(!m&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const j=this._measure(c,0);return j>0&&(this._flat[d]=j),j}let y=c;m&&(y+="B"),v&&(y+="I");let _=this._holey.get(y);if(_===void 0){let j=0;m&&(j|=1),v&&(j|=2),_=this._measure(c,j),_>0&&this._holey.set(y,_)}return _}_measure(c,m){const v=this._measureElements[m];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const m=c(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(b,l)=>{function c(v){return 57508<=v&&v<=57558}function m(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},l.isPowerlineGlyph=c,l.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},l.isEmoji=m,l.allowRescaling=function(v,d,y,_){return d===1&&y>Math.ceil(1.5*_)&&v!==void 0&&v>255&&!m(v)&&!c(v)&&!(function(j){return 57344<=j&&j<=63743})(v)},l.treatGlyphAsBackgroundColor=function(v){return c(v)||(function(d){return 9472<=d&&d<=9631})(v)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(v,d,y=0){return(v-(2*Math.round(d)-y))%(2*Math.round(d))}},6052:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,y,_=!1){if(this.selectionStart=d,this.selectionEnd=y,!d||!y||d[0]===y[0]&&d[1]===y[1])return void this.clear();const j=v.buffers.active.ydisp,C=d[1]-j,h=y[1]-j,p=Math.max(C,0),f=Math.min(h,v.rows-1);p>=v.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=C,this.viewportEndRow=h,this.viewportCappedStartRow=p,this.viewportCappedEndRow=f,this.startCol=d[0],this.endCol=y[0])}isCellSelected(v,d,y){return!!this.hasSelection&&(y-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&y>=this.viewportCappedStartRow&&d<this.endCol&&y<=this.viewportCappedEndRow:d<this.startCol&&y>=this.viewportCappedStartRow&&d>=this.endCol&&y<=this.viewportCappedEndRow:y>this.viewportStartRow&&y<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol)}}l.createSelectionRenderModel=function(){return new c}},456:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,m=this.selectionEnd;return!(!c||!m)&&(c[1]>m[1]||c[1]===m[1]&&c[0]>m[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,l,c){var m=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var B=f.length-1;B>=0;B--)(A=f[B])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const d=c(2585),y=c(8460),_=c(844);let j=l.CharSizeService=class extends _.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,g,w){super(),this._optionsService=w,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new h(f,g,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};l.CharSizeService=j=m([v(2,d.IOptionsService)],j);class C extends _.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(g,w){g!==void 0&&g>0&&w!==void 0&&w>0&&(this._result.width=g,this._result.height=w)}}class h extends C{constructor(g,w,R){super(),this._document=g,this._parentElement=w,this._optionsService=R,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends C{constructor(g){super(),this._optionsService=g,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const w=this._ctx.measureText("W");if(!("width"in w&&"fontBoundingBoxAscent"in w&&"fontBoundingBoxDescent"in w))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const g=this._ctx.measureText("W");return this._validateAndSet(g.width,g.fontBoundingBoxAscent+g.fontBoundingBoxDescent),this._result}}},4269:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,w){var R,A=arguments.length,z=A<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(p,f,g,w);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(z=(A<3?R(z):A>3?R(f,g,z):R(f,g))||z);return A>3&&z&&Object.defineProperty(f,g,z),z},v=this&&this.__param||function(p,f){return function(g,w){f(g,w,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const d=c(3734),y=c(643),_=c(511),j=c(2585);class C extends d.AttributeData{constructor(f,g,w){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=g,this._width=w}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=C;let h=l.CharacterJoinerService=class m0{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _.CellData}register(f){const g={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(g),g.id}deregister(f){for(let g=0;g<this._characterJoiners.length;g++)if(this._characterJoiners[g].id===f)return this._characterJoiners.splice(g,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];const g=this._bufferService.buffer.lines.get(f);if(!g||g.length===0)return[];const w=[],R=g.translateToString(!0);let A=0,z=0,E=0,B=g.getFg(0),O=g.getBg(0);for(let H=0;H<g.getTrimmedLength();H++)if(g.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==B||this._workCell.bg!==O){if(H-A>1){const K=this._getJoinedRanges(R,E,z,g,A);for(let U=0;U<K.length;U++)w.push(K[U])}A=H,E=z,B=this._workCell.fg,O=this._workCell.bg}z+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-A>1){const H=this._getJoinedRanges(R,E,z,g,A);for(let K=0;K<H.length;K++)w.push(H[K])}return w}_getJoinedRanges(f,g,w,R,A){const z=f.substring(g,w);let E=[];try{E=this._characterJoiners[0].handler(z)}catch(B){console.error(B)}for(let B=1;B<this._characterJoiners.length;B++)try{const O=this._characterJoiners[B].handler(z);for(let H=0;H<O.length;H++)m0._mergeRanges(E,O[H])}catch(O){console.error(O)}return this._stringRangesToCellRanges(E,R,A),E}_stringRangesToCellRanges(f,g,w){let R=0,A=!1,z=0,E=f[R];if(E){for(let B=w;B<this._bufferService.cols;B++){const O=g.getWidth(B),H=g.getString(B).length||y.WHITESPACE_CELL_CHAR.length;if(O!==0){if(!A&&E[0]<=z&&(E[0]=B,A=!0),E[1]<=z){if(E[1]=B,E=f[++R],!E)break;E[0]<=z?(E[0]=B,A=!0):A=!1}z+=H}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(f,g){let w=!1;for(let R=0;R<f.length;R++){const A=f[R];if(w){if(g[1]<=A[0])return f[R-1][1]=g[1],f;if(g[1]<=A[1])return f[R-1][1]=Math.max(g[1],A[1]),f.splice(R,1),f;f.splice(R,1),R--}else{if(g[1]<=A[0])return f.splice(R,0,g),f;if(g[1]<=A[1])return A[0]=Math.min(g[0],A[0]),f;g[0]<A[1]&&(A[0]=Math.min(g[0],A[0]),w=!0)}}return w?f[f.length-1][1]=g[1]:f.push(g),f}};l.CharacterJoinerService=h=m([v(0,j.IBufferService)],h)},5114:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const m=c(844),v=c(8460),d=c(3656);class y extends m.Disposable{constructor(C,h,p){super(),this._textarea=C,this._window=h,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new _(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((f=>this._screenDprMonitor.setWindow(f)))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(C){this._window!==C&&(this._window=C,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}l.CoreBrowserService=y;class _ extends m.Disposable{constructor(C){super(),this._parentWindow=C,this._windowResizeListener=this.register(new m.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,m.toDisposable)((()=>this.clearListener())))}setWindow(C){this._parentWindow=C,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var C;this._outerListener&&((C=this._resolutionMediaMatchList)==null||C.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const m=c(844);class v extends m.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,m.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(y){return this.linkProviders.push(y),{dispose:()=>{const _=this.linkProviders.indexOf(y);_!==-1&&this.linkProviders.splice(_,1)}}}}l.LinkProviderService=v},8934:function(b,l,c){var m=this&&this.__decorate||function(j,C,h,p){var f,g=arguments.length,w=g<3?C:p===null?p=Object.getOwnPropertyDescriptor(C,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(j,C,h,p);else for(var R=j.length-1;R>=0;R--)(f=j[R])&&(w=(g<3?f(w):g>3?f(C,h,w):f(C,h))||w);return g>3&&w&&Object.defineProperty(C,h,w),w},v=this&&this.__param||function(j,C){return function(h,p){C(h,p,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const d=c(4725),y=c(9806);let _=l.MouseService=class{constructor(j,C){this._renderService=j,this._charSizeService=C}getCoords(j,C,h,p,f){return(0,y.getCoords)(window,j,C,h,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(j,C){const h=(0,y.getCoordsRelativeToElement)(window,j,C);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};l.MouseService=_=m([v(0,d.IRenderService),v(1,d.ICharSizeService)],_)},3230:function(b,l,c){var m=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var B=f.length-1;B>=0;B--)(A=f[B])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const d=c(6193),y=c(4725),_=c(8460),j=c(844),C=c(7226),h=c(2585);let p=l.RenderService=class extends j.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,g,w,R,A,z,E,B){super(),this._rowCount=f,this._charSizeService=R,this._renderer=this.register(new j.MutableDisposable),this._pausedResizeTask=new C.DebouncedIdleTask,this._observerDisposable=this.register(new j.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer(((O,H)=>this._renderRows(O,H)),E),this.register(this._renderDebouncer),this.register(E.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(z.onResize((()=>this._fullRefresh()))),this.register(z.buffers.onBufferActivate((()=>{var O;return(O=this._renderer.value)==null?void 0:O.clear()}))),this.register(w.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(A.onDecorationRegistered((()=>this._fullRefresh()))),this.register(A.onDecorationRemoved((()=>this._fullRefresh()))),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(z.cols,z.rows),this._fullRefresh()}))),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(z.buffer.y,z.buffer.y,!0)))),this.register(B.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(E.window,g),this.register(E.onWindowChange((O=>this._registerIntersectionObserver(O,g))))}_registerIntersectionObserver(f,g){if("IntersectionObserver"in f){const w=new f.IntersectionObserver((R=>this._handleIntersectionChange(R[R.length-1])),{threshold:0});w.observe(g),this._observerDisposable.value=(0,j.toDisposable)((()=>w.disconnect()))}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,g,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,g,this._rowCount))}_renderRows(f,g){this._renderer.value&&(f=Math.min(f,this._rowCount-1),g=Math.min(g,this._rowCount-1),this._renderer.value.renderRows(f,g),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:g}),this._onRender.fire({start:f,end:g}),this._isNextRenderRedrawOnly=!0)}resize(f,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value&&(this._renderer.value.onRequestRedraw((g=>this.refreshRows(g.start,g.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,g;this._renderer.value&&((g=(f=this._renderer.value).clearTextureAtlas)==null||g.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,g){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var w;return(w=this._renderer.value)==null?void 0:w.handleResize(f,g)})):this._renderer.value.handleResize(f,g),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)==null||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)==null||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)==null||f.handleFocus()}handleSelectionChanged(f,g,w){var R;this._selectionState.start=f,this._selectionState.end=g,this._selectionState.columnSelectMode=w,(R=this._renderer.value)==null||R.handleSelectionChanged(f,g,w)}handleCursorMove(){var f;(f=this._renderer.value)==null||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)==null||f.clear()}};l.RenderService=p=m([v(2,h.IOptionsService),v(3,y.ICharSizeService),v(4,h.IDecorationService),v(5,h.IBufferService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],p)},9312:function(b,l,c){var m=this&&this.__decorate||function(E,B,O,H){var K,U=arguments.length,ee=U<3?B:H===null?H=Object.getOwnPropertyDescriptor(B,O):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(E,B,O,H);else for(var V=E.length-1;V>=0;V--)(K=E[V])&&(ee=(U<3?K(ee):U>3?K(B,O,ee):K(B,O))||ee);return U>3&&ee&&Object.defineProperty(B,O,ee),ee},v=this&&this.__param||function(E,B){return function(O,H){B(O,H,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const d=c(9806),y=c(9504),_=c(456),j=c(4725),C=c(8460),h=c(844),p=c(6114),f=c(4841),g=c(511),w=c(2585),R="",A=new RegExp(R,"g");let z=l.SelectionService=class extends h.Disposable{constructor(E,B,O,H,K,U,ee,V,ue){super(),this._element=E,this._screenElement=B,this._linkifier=O,this._bufferService=H,this._coreService=K,this._mouseService=U,this._optionsService=ee,this._renderService=V,this._coreBrowserService=ue,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new g.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new C.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new C.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new C.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((Q=>this._handleTrim(Q))),this.register(this._bufferService.buffers.onBufferActivate((Q=>this._handleBufferActivate(Q)))),this.enable(),this._model=new _.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!E||!B||E[0]===B[0]&&E[1]===B[1])}get selectionText(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;if(!E||!B)return"";const O=this._bufferService.buffer,H=[];if(this._activeSelectionMode===3){if(E[0]===B[0])return"";const K=E[0]<B[0]?E[0]:B[0],U=E[0]<B[0]?B[0]:E[0];for(let ee=E[1];ee<=B[1];ee++){const V=O.translateBufferLineToString(ee,!0,K,U);H.push(V)}}else{const K=E[1]===B[1]?B[0]:void 0;H.push(O.translateBufferLineToString(E[1],!0,E[0],K));for(let U=E[1]+1;U<=B[1]-1;U++){const ee=O.lines.get(U),V=O.translateBufferLineToString(U,!0);ee!=null&&ee.isWrapped?H[H.length-1]+=V:H.push(V)}if(E[1]!==B[1]){const U=O.lines.get(B[1]),ee=O.translateBufferLineToString(B[1],!0,0,B[0]);U&&U.isWrapped?H[H.length-1]+=ee:H.push(ee)}}return H.map((K=>K.replace(A," "))).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),p.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){const B=this._getMouseBufferCoords(E),O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!!(O&&H&&B)&&this._areCoordsInSelection(B,O,H)}isCellInSelection(E,B){const O=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!(!O||!H)&&this._areCoordsInSelection([E,B],O,H)}_areCoordsInSelection(E,B,O){return E[1]>B[1]&&E[1]<O[1]||B[1]===O[1]&&E[1]===B[1]&&E[0]>=B[0]&&E[0]<O[0]||B[1]<O[1]&&E[1]===O[1]&&E[0]<O[0]||B[1]<O[1]&&E[1]===B[1]&&E[0]>=B[0]}_selectWordAtCursor(E,B){var K,U;const O=(U=(K=this._linkifier.currentLink)==null?void 0:K.link)==null?void 0:U.range;if(O)return this._model.selectionStart=[O.start.x-1,O.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(O,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const H=this._getMouseBufferCoords(E);return!!H&&(this._selectWordAt(H,B),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,B){this._model.clearSelection(),E=Math.max(E,0),B=Math.min(B,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,B],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){const B=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(B)return B[0]--,B[1]--,B[1]+=this._bufferService.buffer.ydisp,B}_getMouseEventScrollAmount(E){let B=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1];const O=this._renderService.dimensions.css.canvas.height;return B>=0&&B<=O?0:(B>O&&(B-=O),B=Math.min(Math.max(B,-50),50),B/=50,B/Math.abs(B)+Math.round(14*B))}shouldForceSelection(E){return p.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const B=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);B&&B.length!==this._model.selectionStart[0]&&B.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){const B=this._getMouseBufferCoords(E);B&&(this._activeSelectionMode=2,this._selectLineAt(B[1]))}shouldColumnSelect(E){return E.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;const B=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){const H=O.lines.get(this._model.selectionEnd[1]);H&&H.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}B&&B[0]===this._model.selectionEnd[0]&&B[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){const B=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&B<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const O=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){const H=(0,y.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(H,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd,O=!(!E||!B||E[0]===B[0]&&E[1]===B[1]);O?E&&B&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&B[0]===this._oldSelectionEnd[0]&&B[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,B,O)):this._oldHasSelection&&this._fireOnSelectionChange(E,B,O)}_fireOnSelectionChange(E,B,O){this._oldSelectionStart=E,this._oldSelectionEnd=B,this._oldHasSelection=O,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim((B=>this._handleTrim(B)))}_convertViewportColToCharacterIndex(E,B){let O=B;for(let H=0;B>=H;H++){const K=E.loadCell(H,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:K>1&&B!==H&&(O+=K-1)}return O}setSelection(E,B,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,B],this._model.selectionStartLength=O,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,B,O=!0,H=!0){if(E[0]>=this._bufferService.cols)return;const K=this._bufferService.buffer,U=K.lines.get(E[1]);if(!U)return;const ee=K.translateBufferLineToString(E[1],!1);let V=this._convertViewportColToCharacterIndex(U,E[0]),ue=V;const Q=E[0]-V;let G=0,M=0,I=0,D=0;if(ee.charAt(V)===" "){for(;V>0&&ee.charAt(V-1)===" ";)V--;for(;ue<ee.length&&ee.charAt(ue+1)===" ";)ue++}else{let ye=E[0],we=E[0];U.getWidth(ye)===0&&(G++,ye--),U.getWidth(we)===2&&(M++,we++);const Re=U.getString(we).length;for(Re>1&&(D+=Re-1,ue+=Re-1);ye>0&&V>0&&!this._isCharWordSeparator(U.loadCell(ye-1,this._workCell));){U.loadCell(ye-1,this._workCell);const Y=this._workCell.getChars().length;this._workCell.getWidth()===0?(G++,ye--):Y>1&&(I+=Y-1,V-=Y-1),V--,ye--}for(;we<U.length&&ue+1<ee.length&&!this._isCharWordSeparator(U.loadCell(we+1,this._workCell));){U.loadCell(we+1,this._workCell);const Y=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,we++):Y>1&&(D+=Y-1,ue+=Y-1),ue++,we++}}ue++;let W=V+Q-G+I,fe=Math.min(this._bufferService.cols,ue-V+G+M-I-D);if(B||ee.slice(V,ue).trim()!==""){if(O&&W===0&&U.getCodePoint(0)!==32){const ye=K.lines.get(E[1]-1);if(ye&&U.isWrapped&&ye.getCodePoint(this._bufferService.cols-1)!==32){const we=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(we){const Re=this._bufferService.cols-we.start;W-=Re,fe+=Re}}}if(H&&W+fe===this._bufferService.cols&&U.getCodePoint(this._bufferService.cols-1)!==32){const ye=K.lines.get(E[1]+1);if(ye!=null&&ye.isWrapped&&ye.getCodePoint(0)!==32){const we=this._getWordAt([0,E[1]+1],!1,!1,!0);we&&(fe+=we.length)}}return{start:W,length:fe}}}_selectWordAt(E,B){const O=this._getWordAt(E,B);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[O.start,E[1]],this._model.selectionStartLength=O.length}}_selectToWordAt(E){const B=this._getWordAt(E,!0);if(B){let O=E[1];for(;B.start<0;)B.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;B.start+B.length>this._bufferService.cols;)B.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?B.start:B.start+B.length,O]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){const B=this._bufferService.buffer.getWrappedRangeForLine(E),O={start:{x:0,y:B.first},end:{x:this._bufferService.cols-1,y:B.last}};this._model.selectionStart=[0,B.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(O,this._bufferService.cols)}};l.SelectionService=z=m([v(3,w.IBufferService),v(4,w.ICoreService),v(5,j.IMouseService),v(6,w.IOptionsService),v(7,j.IRenderService),v(8,j.ICoreBrowserService)],z)},4725:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const m=c(8343);l.ICharSizeService=(0,m.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),l.IMouseService=(0,m.createDecorator)("MouseService"),l.IRenderService=(0,m.createDecorator)("RenderService"),l.ISelectionService=(0,m.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,m.createDecorator)("ThemeService"),l.ILinkProviderService=(0,m.createDecorator)("LinkProviderService")},6731:function(b,l,c){var m=this&&this.__decorate||function(z,E,B,O){var H,K=arguments.length,U=K<3?E:O===null?O=Object.getOwnPropertyDescriptor(E,B):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(z,E,B,O);else for(var ee=z.length-1;ee>=0;ee--)(H=z[ee])&&(U=(K<3?H(U):K>3?H(E,B,U):H(E,B))||U);return K>3&&U&&Object.defineProperty(E,B,U),U},v=this&&this.__param||function(z,E){return function(B,O){E(B,O,z)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),y=c(8055),_=c(8460),j=c(844),C=c(2585),h=y.css.toColor("#ffffff"),p=y.css.toColor("#000000"),f=y.css.toColor("#ffffff"),g=y.css.toColor("#000000"),w={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const z=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let B=0;B<216;B++){const O=E[B/36%6|0],H=E[B/6%6|0],K=E[B%6];z.push({css:y.channels.toCss(O,H,K),rgba:y.channels.toRgba(O,H,K)})}for(let B=0;B<24;B++){const O=8+10*B;z.push({css:y.channels.toCss(O,O,O),rgba:y.channels.toRgba(O,O,O)})}return z})());let R=l.ThemeService=class extends j.Disposable{get colors(){return this._colors}constructor(z){super(),this._optionsService=z,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new _.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:p,cursor:f,cursorAccent:g,selectionForeground:void 0,selectionBackgroundTransparent:w,selectionBackgroundOpaque:y.color.blend(p,w),selectionInactiveBackgroundTransparent:w,selectionInactiveBackgroundOpaque:y.color.blend(p,w),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(z={}){const E=this._colors;if(E.foreground=A(z.foreground,h),E.background=A(z.background,p),E.cursor=A(z.cursor,f),E.cursorAccent=A(z.cursorAccent,g),E.selectionBackgroundTransparent=A(z.selectionBackground,w),E.selectionBackgroundOpaque=y.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=A(z.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=y.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=z.selectionForeground?A(z.selectionForeground,y.NULL_COLOR):void 0,E.selectionForeground===y.NULL_COLOR&&(E.selectionForeground=void 0),y.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=y.color.opacity(E.selectionBackgroundTransparent,.3)),y.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=y.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=l.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=A(z.black,l.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=A(z.red,l.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=A(z.green,l.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=A(z.yellow,l.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=A(z.blue,l.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=A(z.magenta,l.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=A(z.cyan,l.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=A(z.white,l.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=A(z.brightBlack,l.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=A(z.brightRed,l.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=A(z.brightGreen,l.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=A(z.brightYellow,l.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=A(z.brightBlue,l.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=A(z.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=A(z.brightCyan,l.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=A(z.brightWhite,l.DEFAULT_ANSI_COLORS[15]),z.extendedAnsi){const B=Math.min(E.ansi.length-16,z.extendedAnsi.length);for(let O=0;O<B;O++)E.ansi[O+16]=A(z.extendedAnsi[O],l.DEFAULT_ANSI_COLORS[O+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(z){this._restoreColor(z),this._onChangeColors.fire(this.colors)}_restoreColor(z){if(z!==void 0)switch(z){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[z]=this._restoreColors.ansi[z]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(z){z(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function A(z,E){if(z!==void 0)try{return y.css.toColor(z)}catch{}return E}l.ThemeService=R=m([v(0,C.IOptionsService)],R)},6349:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const m=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._maxLength=_,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(_){if(this._maxLength===_)return;const j=new Array(_);for(let C=0;C<Math.min(_,this.length);C++)j[C]=this._array[this._getCyclicIndex(C)];this._array=j,this._maxLength=_,this._startIndex=0}get length(){return this._length}set length(_){if(_>this._length)for(let j=this._length;j<_;j++)this._array[j]=void 0;this._length=_}get(_){return this._array[this._getCyclicIndex(_)]}set(_,j){this._array[this._getCyclicIndex(_)]=j}push(_){this._array[this._getCyclicIndex(this._length)]=_,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(_,j,...C){if(j){for(let h=_;h<this._length-j;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+j)];this._length-=j,this.onDeleteEmitter.fire({index:_,amount:j})}for(let h=this._length-1;h>=_;h--)this._array[this._getCyclicIndex(h+C.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<C.length;h++)this._array[this._getCyclicIndex(_+h)]=C[h];if(C.length&&this.onInsertEmitter.fire({index:_,amount:C.length}),this._length+C.length>this._maxLength){const h=this._length+C.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=C.length}trimStart(_){_>this._length&&(_=this._length),this._startIndex+=_,this._length-=_,this.onTrimEmitter.fire(_)}shiftElements(_,j,C){if(!(j<=0)){if(_<0||_>=this._length)throw new Error("start argument out of range");if(_+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(let p=j-1;p>=0;p--)this.set(_+p+C,this.get(_+p));const h=_+j+C-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<j;h++)this.set(_+h+C,this.get(_+h))}}_getCyclicIndex(_){return(this._startIndex+_)%this._maxLength}}l.CircularList=d},1439:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function c(m,v=5){if(typeof m!="object")return m;const d=Array.isArray(m)?[]:{};for(const y in m)d[y]=v<=1?m[y]:m[y]&&c(m[y],v-1);return d}},8055:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let c=0,m=0,v=0,d=0;var y,_,j,C,h;function p(g){const w=g.toString(16);return w.length<2?"0"+w:w}function f(g,w){return g<w?(w+.05)/(g+.05):(g+.05)/(w+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(g){g.toCss=function(w,R,A,z){return z!==void 0?`#${p(w)}${p(R)}${p(A)}${p(z)}`:`#${p(w)}${p(R)}${p(A)}`},g.toRgba=function(w,R,A,z=255){return(w<<24|R<<16|A<<8|z)>>>0},g.toColor=function(w,R,A,z){return{css:g.toCss(w,R,A,z),rgba:g.toRgba(w,R,A,z)}}})(y||(l.channels=y={})),(function(g){function w(R,A){return d=Math.round(255*A),[c,m,v]=h.toChannels(R.rgba),{css:y.toCss(c,m,v,d),rgba:y.toRgba(c,m,v,d)}}g.blend=function(R,A){if(d=(255&A.rgba)/255,d===1)return{css:A.css,rgba:A.rgba};const z=A.rgba>>24&255,E=A.rgba>>16&255,B=A.rgba>>8&255,O=R.rgba>>24&255,H=R.rgba>>16&255,K=R.rgba>>8&255;return c=O+Math.round((z-O)*d),m=H+Math.round((E-H)*d),v=K+Math.round((B-K)*d),{css:y.toCss(c,m,v),rgba:y.toRgba(c,m,v)}},g.isOpaque=function(R){return(255&R.rgba)==255},g.ensureContrastRatio=function(R,A,z){const E=h.ensureContrastRatio(R.rgba,A.rgba,z);if(E)return y.toColor(E>>24&255,E>>16&255,E>>8&255)},g.opaque=function(R){const A=(255|R.rgba)>>>0;return[c,m,v]=h.toChannels(A),{css:y.toCss(c,m,v),rgba:A}},g.opacity=w,g.multiplyOpacity=function(R,A){return d=255&R.rgba,w(R,d*A/255)},g.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}})(_||(l.color=_={})),(function(g){let w,R;try{const A=document.createElement("canvas");A.width=1,A.height=1;const z=A.getContext("2d",{willReadFrequently:!0});z&&(w=z,w.globalCompositeOperation="copy",R=w.createLinearGradient(0,0,1,1))}catch{}g.toColor=function(A){if(A.match(/#[\da-f]{3,8}/i))switch(A.length){case 4:return c=parseInt(A.slice(1,2).repeat(2),16),m=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),y.toColor(c,m,v);case 5:return c=parseInt(A.slice(1,2).repeat(2),16),m=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),d=parseInt(A.slice(4,5).repeat(2),16),y.toColor(c,m,v,d);case 7:return{css:A,rgba:(parseInt(A.slice(1),16)<<8|255)>>>0};case 9:return{css:A,rgba:parseInt(A.slice(1),16)>>>0}}const z=A.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(z)return c=parseInt(z[1]),m=parseInt(z[2]),v=parseInt(z[3]),d=Math.round(255*(z[5]===void 0?1:parseFloat(z[5]))),y.toColor(c,m,v,d);if(!w||!R)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=R,w.fillStyle=A,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[c,m,v,d]=w.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(c,m,v,d),css:A}}})(j||(l.css=j={})),(function(g){function w(R,A,z){const E=R/255,B=A/255,O=z/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}g.relativeLuminance=function(R){return w(R>>16&255,R>>8&255,255&R)},g.relativeLuminance2=w})(C||(l.rgb=C={})),(function(g){function w(A,z,E){const B=A>>24&255,O=A>>16&255,H=A>>8&255;let K=z>>24&255,U=z>>16&255,ee=z>>8&255,V=f(C.relativeLuminance2(K,U,ee),C.relativeLuminance2(B,O,H));for(;V<E&&(K>0||U>0||ee>0);)K-=Math.max(0,Math.ceil(.1*K)),U-=Math.max(0,Math.ceil(.1*U)),ee-=Math.max(0,Math.ceil(.1*ee)),V=f(C.relativeLuminance2(K,U,ee),C.relativeLuminance2(B,O,H));return(K<<24|U<<16|ee<<8|255)>>>0}function R(A,z,E){const B=A>>24&255,O=A>>16&255,H=A>>8&255;let K=z>>24&255,U=z>>16&255,ee=z>>8&255,V=f(C.relativeLuminance2(K,U,ee),C.relativeLuminance2(B,O,H));for(;V<E&&(K<255||U<255||ee<255);)K=Math.min(255,K+Math.ceil(.1*(255-K))),U=Math.min(255,U+Math.ceil(.1*(255-U))),ee=Math.min(255,ee+Math.ceil(.1*(255-ee))),V=f(C.relativeLuminance2(K,U,ee),C.relativeLuminance2(B,O,H));return(K<<24|U<<16|ee<<8|255)>>>0}g.blend=function(A,z){if(d=(255&z)/255,d===1)return z;const E=z>>24&255,B=z>>16&255,O=z>>8&255,H=A>>24&255,K=A>>16&255,U=A>>8&255;return c=H+Math.round((E-H)*d),m=K+Math.round((B-K)*d),v=U+Math.round((O-U)*d),y.toRgba(c,m,v)},g.ensureContrastRatio=function(A,z,E){const B=C.relativeLuminance(A>>8),O=C.relativeLuminance(z>>8);if(f(B,O)<E){if(O<B){const U=w(A,z,E),ee=f(B,C.relativeLuminance(U>>8));if(ee<E){const V=R(A,z,E);return ee>f(B,C.relativeLuminance(V>>8))?U:V}return U}const H=R(A,z,E),K=f(B,C.relativeLuminance(H>>8));if(K<E){const U=w(A,z,E);return K>f(B,C.relativeLuminance(U>>8))?H:U}return H}},g.reduceLuminance=w,g.increaseLuminance=R,g.toChannels=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]}})(h||(l.rgba=h={})),l.toPaddedHex=p,l.contrastRatio=f},8969:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const m=c(844),v=c(2585),d=c(4348),y=c(7866),_=c(744),j=c(7302),C=c(6975),h=c(8460),p=c(1753),f=c(1480),g=c(7994),w=c(9282),R=c(5435),A=c(5981),z=c(2660);let E=!1;class B extends m.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event((H=>{var K;(K=this._onScrollApi)==null||K.fire(H.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(H){for(const K in H)this.optionsService.options[K]=H[K]}constructor(H){super(),this._windowsWrappingHeuristics=this.register(new m.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new j.OptionsService(H)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(_.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(C.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(g.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(z.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new R.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new A.WriteBuffer(((K,U)=>this._inputHandler.parse(K,U)))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(H,K){this._writeBuffer.write(H,K)}writeSync(H,K){this._logService.logLevel<=v.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(H,K)}input(H,K=!0){this.coreService.triggerDataEvent(H,K)}resize(H,K){isNaN(H)||isNaN(K)||(H=Math.max(H,_.MINIMUM_COLS),K=Math.max(K,_.MINIMUM_ROWS),this._bufferService.resize(H,K))}scroll(H,K=!1){this._bufferService.scroll(H,K)}scrollLines(H,K,U){this._bufferService.scrollLines(H,K,U)}scrollPages(H){this.scrollLines(H*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(H){const K=H-this._bufferService.buffer.ydisp;K!==0&&this.scrollLines(K)}registerEscHandler(H,K){return this._inputHandler.registerEscHandler(H,K)}registerDcsHandler(H,K){return this._inputHandler.registerDcsHandler(H,K)}registerCsiHandler(H,K){return this._inputHandler.registerCsiHandler(H,K)}registerOscHandler(H,K){return this._inputHandler.registerOscHandler(H,K)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let H=!1;const K=this.optionsService.rawOptions.windowsPty;K&&K.buildNumber!==void 0&&K.buildNumber!==void 0?H=K.backend==="conpty"&&K.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(H=!0),H?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const H=[];H.push(this.onLineFeed(w.updateWindowsModeWrappedState.bind(null,this._bufferService))),H.push(this.registerCsiHandler({final:"H"},(()=>((0,w.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,m.toDisposable)((()=>{for(const K of H)K.dispose()}))}}}l.CoreTerminal=B},8460:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===c)return void this._listeners.splice(m,1)}}})),this._event}fire(c,m){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(c,m){return c((v=>m.fire(v)))},l.runAndSubscribe=function(c,m){return m(void 0),c((v=>m(v)))}},5435:function(b,l,c){var m=this&&this.__decorate||function(G,M,I,D){var W,fe=arguments.length,ye=fe<3?M:D===null?D=Object.getOwnPropertyDescriptor(M,I):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ye=Reflect.decorate(G,M,I,D);else for(var we=G.length-1;we>=0;we--)(W=G[we])&&(ye=(fe<3?W(ye):fe>3?W(M,I,ye):W(M,I))||ye);return fe>3&&ye&&Object.defineProperty(M,I,ye),ye},v=this&&this.__param||function(G,M){return function(I,D){M(I,D,G)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const d=c(2584),y=c(7116),_=c(2015),j=c(844),C=c(482),h=c(8437),p=c(8460),f=c(643),g=c(511),w=c(3734),R=c(2585),A=c(1480),z=c(6242),E=c(6351),B=c(5941),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},H=131072;function K(G,M){if(G>24)return M.setWinLines||!1;switch(G){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var U;(function(G){G[G.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",G[G.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let ee=0;class V extends j.Disposable{getAttrData(){return this._curAttrData}constructor(M,I,D,W,fe,ye,we,Re,Y=new _.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=I,this._coreService=D,this._logService=W,this._optionsService=fe,this._oscLinkService=ye,this._coreMouseService=we,this._unicodeService=Re,this._parser=Y,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new C.StringToUtf32,this._utf8Decoder=new C.Utf8ToUtf32,this._workCell=new g.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ue(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((F=>this._activeBuffer=F.activeBuffer))),this._parser.setCsiHandlerFallback(((F,be)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:be.toArray()})})),this._parser.setEscHandlerFallback((F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})})),this._parser.setExecuteHandlerFallback((F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})})),this._parser.setOscHandlerFallback(((F,be,oe)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:be,data:oe})})),this._parser.setDcsHandlerFallback(((F,be,oe)=>{be==="HOOK"&&(oe=oe.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:be,payload:oe})})),this._parser.setPrintHandler(((F,be,oe)=>this.print(F,be,oe))),this._parser.registerCsiHandler({final:"@"},(F=>this.insertChars(F))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(F=>this.scrollLeft(F))),this._parser.registerCsiHandler({final:"A"},(F=>this.cursorUp(F))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(F=>this.scrollRight(F))),this._parser.registerCsiHandler({final:"B"},(F=>this.cursorDown(F))),this._parser.registerCsiHandler({final:"C"},(F=>this.cursorForward(F))),this._parser.registerCsiHandler({final:"D"},(F=>this.cursorBackward(F))),this._parser.registerCsiHandler({final:"E"},(F=>this.cursorNextLine(F))),this._parser.registerCsiHandler({final:"F"},(F=>this.cursorPrecedingLine(F))),this._parser.registerCsiHandler({final:"G"},(F=>this.cursorCharAbsolute(F))),this._parser.registerCsiHandler({final:"H"},(F=>this.cursorPosition(F))),this._parser.registerCsiHandler({final:"I"},(F=>this.cursorForwardTab(F))),this._parser.registerCsiHandler({final:"J"},(F=>this.eraseInDisplay(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(F=>this.eraseInDisplay(F,!0))),this._parser.registerCsiHandler({final:"K"},(F=>this.eraseInLine(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(F=>this.eraseInLine(F,!0))),this._parser.registerCsiHandler({final:"L"},(F=>this.insertLines(F))),this._parser.registerCsiHandler({final:"M"},(F=>this.deleteLines(F))),this._parser.registerCsiHandler({final:"P"},(F=>this.deleteChars(F))),this._parser.registerCsiHandler({final:"S"},(F=>this.scrollUp(F))),this._parser.registerCsiHandler({final:"T"},(F=>this.scrollDown(F))),this._parser.registerCsiHandler({final:"X"},(F=>this.eraseChars(F))),this._parser.registerCsiHandler({final:"Z"},(F=>this.cursorBackwardTab(F))),this._parser.registerCsiHandler({final:"`"},(F=>this.charPosAbsolute(F))),this._parser.registerCsiHandler({final:"a"},(F=>this.hPositionRelative(F))),this._parser.registerCsiHandler({final:"b"},(F=>this.repeatPrecedingCharacter(F))),this._parser.registerCsiHandler({final:"c"},(F=>this.sendDeviceAttributesPrimary(F))),this._parser.registerCsiHandler({prefix:">",final:"c"},(F=>this.sendDeviceAttributesSecondary(F))),this._parser.registerCsiHandler({final:"d"},(F=>this.linePosAbsolute(F))),this._parser.registerCsiHandler({final:"e"},(F=>this.vPositionRelative(F))),this._parser.registerCsiHandler({final:"f"},(F=>this.hVPosition(F))),this._parser.registerCsiHandler({final:"g"},(F=>this.tabClear(F))),this._parser.registerCsiHandler({final:"h"},(F=>this.setMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(F=>this.setModePrivate(F))),this._parser.registerCsiHandler({final:"l"},(F=>this.resetMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(F=>this.resetModePrivate(F))),this._parser.registerCsiHandler({final:"m"},(F=>this.charAttributes(F))),this._parser.registerCsiHandler({final:"n"},(F=>this.deviceStatus(F))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(F=>this.deviceStatusPrivate(F))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(F=>this.softReset(F))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(F=>this.setCursorStyle(F))),this._parser.registerCsiHandler({final:"r"},(F=>this.setScrollRegion(F))),this._parser.registerCsiHandler({final:"s"},(F=>this.saveCursor(F))),this._parser.registerCsiHandler({final:"t"},(F=>this.windowOptions(F))),this._parser.registerCsiHandler({final:"u"},(F=>this.restoreCursor(F))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(F=>this.insertColumns(F))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(F=>this.deleteColumns(F))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(F=>this.selectProtected(F))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(F=>this.requestMode(F,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(F=>this.requestMode(F,!1))),this._parser.setExecuteHandler(d.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(d.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(d.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(d.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(d.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(d.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(d.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(d.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(d.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new z.OscHandler((F=>(this.setTitle(F),this.setIconName(F),!0)))),this._parser.registerOscHandler(1,new z.OscHandler((F=>this.setIconName(F)))),this._parser.registerOscHandler(2,new z.OscHandler((F=>this.setTitle(F)))),this._parser.registerOscHandler(4,new z.OscHandler((F=>this.setOrReportIndexedColor(F)))),this._parser.registerOscHandler(8,new z.OscHandler((F=>this.setHyperlink(F)))),this._parser.registerOscHandler(10,new z.OscHandler((F=>this.setOrReportFgColor(F)))),this._parser.registerOscHandler(11,new z.OscHandler((F=>this.setOrReportBgColor(F)))),this._parser.registerOscHandler(12,new z.OscHandler((F=>this.setOrReportCursorColor(F)))),this._parser.registerOscHandler(104,new z.OscHandler((F=>this.restoreIndexedColor(F)))),this._parser.registerOscHandler(110,new z.OscHandler((F=>this.restoreFgColor(F)))),this._parser.registerOscHandler(111,new z.OscHandler((F=>this.restoreBgColor(F)))),this._parser.registerOscHandler(112,new z.OscHandler((F=>this.restoreCursorColor(F)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const F in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},(()=>this.selectCharset("("+F))),this._parser.registerEscHandler({intermediates:")",final:F},(()=>this.selectCharset(")"+F))),this._parser.registerEscHandler({intermediates:"*",final:F},(()=>this.selectCharset("*"+F))),this._parser.registerEscHandler({intermediates:"+",final:F},(()=>this.selectCharset("+"+F))),this._parser.registerEscHandler({intermediates:"-",final:F},(()=>this.selectCharset("-"+F))),this._parser.registerEscHandler({intermediates:".",final:F},(()=>this.selectCharset("."+F))),this._parser.registerEscHandler({intermediates:"/",final:F},(()=>this.selectCharset("/"+F)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((F=>(this._logService.error("Parsing error: ",F),F))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler(((F,be)=>this.requestStatusString(F,be))))}_preserveStack(M,I,D,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=D,this._parseStack.position=W}_logSlowResolvingAsync(M){this._logService.logLevel<=R.LogLevelEnum.WARN&&Promise.race([M,new Promise(((I,D)=>setTimeout((()=>D("#SLOW_TIMEOUT")),5e3)))]).catch((I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,I){let D,W=this._activeBuffer.x,fe=this._activeBuffer.y,ye=0;const we=this._parseStack.paused;if(we){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(D),D;W=this._parseStack.cursorStartX,fe=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>H&&(ye=this._parseStack.position+H)}if(this._logService.logLevel<=R.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,(F=>String.fromCharCode(F))).join("")}"`),typeof M=="string"?M.split("").map((F=>F.charCodeAt(0))):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<H&&(this._parseBuffer=new Uint32Array(Math.min(M.length,H))),we||this._dirtyRowTracker.clearRange(),M.length>H)for(let F=ye;F<M.length;F+=H){const be=F+H<M.length?F+H:M.length,oe=typeof M=="string"?this._stringDecoder.decode(M.substring(F,be),this._parseBuffer):this._utf8Decoder.decode(M.subarray(F,be),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,oe))return this._preserveStack(W,fe,oe,F),this._logSlowResolvingAsync(D),D}else if(!we){const F=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,F))return this._preserveStack(W,fe,F,0),this._logSlowResolvingAsync(D),D}this._activeBuffer.x===W&&this._activeBuffer.y===fe||this._onCursorMove.fire();const Re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),Y=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);Y<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(Y,this._bufferService.rows-1),Math.min(Re,this._bufferService.rows-1))}print(M,I,D){let W,fe;const ye=this._charsetService.charset,we=this._optionsService.rawOptions.screenReaderMode,Re=this._bufferService.cols,Y=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,be=this._curAttrData;let oe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-I>0&&oe.getWidth(this._activeBuffer.x-1)===2&&oe.setCellFromCodepoint(this._activeBuffer.x-1,0,1,be);let Ie=this._parser.precedingJoinState;for(let Z=I;Z<D;++Z){if(W=M[Z],W<127&&ye){const $e=ye[String.fromCharCode(W)];$e&&(W=$e.charCodeAt(0))}const je=this._unicodeService.charProperties(W,Ie);fe=A.UnicodeService.extractWidth(je);const pe=A.UnicodeService.extractShouldJoin(je),De=pe?A.UnicodeService.extractWidth(Ie):0;if(Ie=je,we&&this._onA11yChar.fire((0,C.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+fe-De>Re){if(Y){const $e=oe;let Pe=this._activeBuffer.x-De;for(this._activeBuffer.x=De,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),oe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),De>0&&oe instanceof h.BufferLine&&oe.copyCellsFrom($e,Pe,0,De,!1);Pe<Re;)$e.setCellFromCodepoint(Pe++,0,1,be)}else if(this._activeBuffer.x=Re-1,fe===2)continue}if(pe&&this._activeBuffer.x){const $e=oe.getWidth(this._activeBuffer.x-1)?1:2;oe.addCodepointToCell(this._activeBuffer.x-$e,W,fe);for(let Pe=fe-De;--Pe>=0;)oe.setCellFromCodepoint(this._activeBuffer.x++,0,0,be)}else if(F&&(oe.insertCells(this._activeBuffer.x,fe-De,this._activeBuffer.getNullCell(be)),oe.getWidth(Re-1)===2&&oe.setCellFromCodepoint(Re-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,be)),oe.setCellFromCodepoint(this._activeBuffer.x++,W,fe,be),fe>0)for(;--fe;)oe.setCellFromCodepoint(this._activeBuffer.x++,0,0,be)}this._parser.precedingJoinState=Ie,this._activeBuffer.x<Re&&D-I>0&&oe.getWidth(this._activeBuffer.x)===0&&!oe.hasContent(this._activeBuffer.x)&&oe.setCellFromCodepoint(this._activeBuffer.x,0,1,be),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,I){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,I):this._parser.registerCsiHandler(M,(D=>!K(D.params[0],this._optionsService.rawOptions.windowOptions)||I(D)))}registerDcsHandler(M,I){return this._parser.registerDcsHandler(M,new E.DcsHandler(I))}registerEscHandler(M,I){return this._parser.registerEscHandler(M,I)}registerOscHandler(M,I){return this._parser.registerOscHandler(M,new z.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=M,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+I)}cursorUp(M){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const I=M.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const I=M.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,I,D,W=!1,fe=!1){const ye=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);ye.replaceCells(I,D,this._activeBuffer.getNullCell(this._eraseAttrData()),fe),W&&(ye.isWrapped=!1)}_resetBufferLine(M,I=!1){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);D&&(D.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),D.isWrapped=!1)}eraseInDisplay(M,I=!1){let D;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);D<this._bufferService.rows;D++)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(D);break;case 1:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(D+1).isWrapped=!1);D--;)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(D=this._bufferService.rows,this._dirtyRowTracker.markDirty(D-1);D--;)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(M,I=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,fe=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;I--;)this._activeBuffer.lines.splice(fe-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;I--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const I=this._parser.precedingJoinState;if(!I)return!0;const D=M.params[0]||1,W=A.UnicodeService.extractWidth(I),fe=this._activeBuffer.x-W,ye=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(fe),we=new Uint32Array(ye.length*D);let Re=0;for(let F=0;F<ye.length;){const be=ye.codePointAt(F)||0;we[Re++]=be,F+=be>65535?2:1}let Y=Re;for(let F=1;F<D;++F)we.copyWithin(Y,0,Re),Y+=Re;return this.print(we,0,Y),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,I){const D=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:fe}=this._coreMouseService,ye=this._coreService,{buffers:we,cols:Re}=this._bufferService,{active:Y,alt:F}=we,be=this._optionsService.rawOptions,oe=pe=>pe?1:2,Ie=M.params[0];return Z=Ie,je=I?Ie===2?4:Ie===4?oe(ye.modes.insertMode):Ie===12?3:Ie===20?oe(be.convertEol):0:Ie===1?oe(D.applicationCursorKeys):Ie===3?be.windowOptions.setWinLines?Re===80?2:Re===132?1:0:0:Ie===6?oe(D.origin):Ie===7?oe(D.wraparound):Ie===8?3:Ie===9?oe(W==="X10"):Ie===12?oe(be.cursorBlink):Ie===25?oe(!ye.isCursorHidden):Ie===45?oe(D.reverseWraparound):Ie===66?oe(D.applicationKeypad):Ie===67?4:Ie===1e3?oe(W==="VT200"):Ie===1002?oe(W==="DRAG"):Ie===1003?oe(W==="ANY"):Ie===1004?oe(D.sendFocus):Ie===1005?4:Ie===1006?oe(fe==="SGR"):Ie===1015?4:Ie===1016?oe(fe==="SGR_PIXELS"):Ie===1048?1:Ie===47||Ie===1047||Ie===1049?oe(Y===F):Ie===2004?oe(D.bracketedPasteMode):0,ye.triggerDataEvent(`${d.C0.ESC}[${I?"":"?"}${Z};${je}$y`),!0;var Z,je}_updateAttrColor(M,I,D,W,fe){return I===2?(M|=50331648,M&=-16777216,M|=w.AttributeData.fromColorRGB([D,W,fe])):I===5&&(M&=-50331904,M|=33554432|255&D),M}_extractColor(M,I,D){const W=[0,0,-1,0,0,0];let fe=0,ye=0;do{if(W[ye+fe]=M.params[I+ye],M.hasSubParams(I+ye)){const we=M.getSubParams(I+ye);let Re=0;do W[1]===5&&(fe=1),W[ye+Re+1+fe]=we[Re];while(++Re<we.length&&Re+ye+1+fe<W.length);break}if(W[1]===5&&ye+fe>=2||W[1]===2&&ye+fe>=5)break;W[1]&&(fe=1)}while(++ye+I<M.length&&ye+fe<W.length);for(let we=2;we<W.length;++we)W[we]===-1&&(W[we]=0);switch(W[0]){case 38:D.fg=this._updateAttrColor(D.fg,W[1],W[3],W[4],W[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,W[1],W[3],W[4],W[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,W[1],W[3],W[4],W[5])}return ye}_processUnderline(M,I){I.extended=I.extended.clone(),(!~M||M>5)&&(M=1),I.extended.underlineStyle=M,I.fg|=268435456,M===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(M){M.fg=h.DEFAULT_ATTR_DATA.fg,M.bg=h.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=M.length;let D;const W=this._curAttrData;for(let fe=0;fe<I;fe++)D=M.params[fe],D>=30&&D<=37?(W.fg&=-50331904,W.fg|=16777216|D-30):D>=40&&D<=47?(W.bg&=-50331904,W.bg|=16777216|D-40):D>=90&&D<=97?(W.fg&=-50331904,W.fg|=16777224|D-90):D>=100&&D<=107?(W.bg&=-50331904,W.bg|=16777224|D-100):D===0?this._processSGR0(W):D===1?W.fg|=134217728:D===3?W.bg|=67108864:D===4?(W.fg|=268435456,this._processUnderline(M.hasSubParams(fe)?M.getSubParams(fe)[0]:1,W)):D===5?W.fg|=536870912:D===7?W.fg|=67108864:D===8?W.fg|=1073741824:D===9?W.fg|=2147483648:D===2?W.bg|=134217728:D===21?this._processUnderline(2,W):D===22?(W.fg&=-134217729,W.bg&=-134217729):D===23?W.bg&=-67108865:D===24?(W.fg&=-268435457,this._processUnderline(0,W)):D===25?W.fg&=-536870913:D===27?W.fg&=-67108865:D===28?W.fg&=-1073741825:D===29?W.fg&=2147483647:D===39?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):D===49?(W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):D===38||D===48||D===58?fe+=this._extractColor(M,fe,W):D===53?W.bg|=1073741824:D===55?W.bg&=-1073741825:D===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):D===100?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",D);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${I};${D}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const I=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${I};${D}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const I=M.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const D=I%2==1;return this._optionsService.options.cursorBlink=D,!0}setScrollRegion(M){const I=M.params[0]||1;let D;return(M.length<2||(D=M.params[1])>this._bufferService.rows||D===0)&&(D=this._bufferService.rows),D>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=D-1,this._setCursor(0,0)),!0}windowOptions(M){if(!K(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const I=[],D=M.split(";");for(;D.length>1;){const W=D.shift(),fe=D.shift();if(/^\d+$/.exec(W)){const ye=parseInt(W);if(Q(ye))if(fe==="?")I.push({type:0,index:ye});else{const we=(0,B.parseColor)(fe);we&&I.push({type:1,index:ye,color:we})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(M){const I=M.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(M,I){this._getCurrentLinkId()&&this._finishHyperlink();const D=M.split(":");let W;const fe=D.findIndex((ye=>ye.startsWith("id=")));return fe!==-1&&(W=D[fe].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,I){const D=M.split(";");for(let W=0;W<D.length&&!(I>=this._specialColors.length);++W,++I)if(D[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const fe=(0,B.parseColor)(D[W]);fe&&this._onColor.fire([{type:1,index:this._specialColors[I],color:fe}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const I=[],D=M.split(";");for(let W=0;W<D.length;++W)if(/^\d+$/.exec(D[W])){const fe=parseInt(D[W]);Q(fe)&&I.push({type:2,index:fe})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(O[M[0]],y.CHARSETS[M[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new g.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const D=this._activeBuffer.ybase+this._activeBuffer.y+I,W=this._activeBuffer.lines.get(D);W&&(W.fill(M),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,I){const D=this._bufferService.buffer,W=this._optionsService.rawOptions;return(fe=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${fe}${d.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${D.scrollTop+1};${D.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,I){this._dirtyRowTracker.markRangeDirty(M,I)}}l.InputHandler=V;let ue=class{constructor(G){this._bufferService=G,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(G){G<this.start?this.start=G:G>this.end&&(this.end=G)}markRangeDirty(G,M){G>M&&(ee=G,G=M,M=ee),G<this.start&&(this.start=G),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(G){return 0<=G&&G<256}ue=m([v(0,R.IBufferService)],ue)},844:(b,l)=>{function c(m){for(const v of m)v.dispose();m.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const v=this._disposables.indexOf(m);v!==-1&&this._disposables.splice(v,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var v;this._isDisposed||m===this._value||((v=this._value)==null||v.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)==null||m.dispose(),this._value=void 0}},l.toDisposable=function(m){return{dispose:m}},l.disposeArray=c,l.getDisposeArrayDisposable=function(m){return{dispose:()=>c(m)}}},1505:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,y){this._data[v]||(this._data[v]={}),this._data[v][d]=y}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}l.TwoKeyMap=c,l.FourKeyMap=class{constructor(){this._data=new c}set(m,v,d,y,_){this._data.get(m,v)||this._data.set(m,v,new c),this._data.get(m,v).set(d,y,_)}get(m,v,d,y){var _;return(_=this._data.get(m,v))==null?void 0:_.get(d,y)}clear(){this._data.clear()}}},6114:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const c=l.isNode?"node":navigator.userAgent,m=l.isNode?"node":navigator.platform;l.isFirefox=c.includes("Firefox"),l.isLegacyEdge=c.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(c),l.getSafariVersion=function(){if(!l.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),l.isIpad=m==="iPad",l.isIphone=m==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),l.isLinux=m.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(c)},6106:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let c=0;l.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(c=this._search(this._getKey(m)),this._array.splice(c,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;const v=this._getKey(m);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===m)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(m){if(this._array.length!==0&&(c=this._search(m),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===m))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===m)}forEachByKey(m,v){if(this._array.length!==0&&(c=this._search(m),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===m))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===m)}values(){return[...this._array].values()}_search(m){let v=0,d=this._array.length-1;for(;d>=v;){let y=v+d>>1;const _=this._getKey(this._array[y]);if(_>m)d=y-1;else{if(!(_<m)){for(;y>0&&this._getKey(this._array[y-1])===m;)y--;return y}v=y+1}}return v}}},7226:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const m=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let j=0,C=0,h=_.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(j=Date.now(),this._tasks[this._i]()||this._i++,j=Math.max(1,Date.now()-j),C=Math.max(j,C),p=_.timeRemaining(),1.5*C>p)return h-j<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-j))}ms`),void this._start();h=p}this.clear()}}class d extends v{_requestCallback(_){return setTimeout((()=>_(this._createDeadline(16))))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const j=Date.now()+_;return{timeRemaining:()=>Math.max(0,j-Date.now())}}}l.PriorityTaskQueue=d,l.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:d,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const m=c(643);l.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),y=d==null?void 0:d.get(v.cols-1),_=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);_&&y&&(_.isWrapped=y[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&y[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=c;class m{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,y=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=y}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=m},9092:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const m=c(6349),v=c(7226),d=c(3734),y=c(8437),_=c(4634),j=c(511),C=c(643),h=c(4863),p=c(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(f,g,w){this._hasScrollback=f,this._optionsService=g,this._bufferService=w,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=j.CellData.fromCharData([0,C.NULL_CELL_CHAR,C.NULL_CELL_WIDTH,C.NULL_CELL_CODE]),this._whitespaceCell=j.CellData.fromCharData([0,C.WHITESPACE_CELL_CHAR,C.WHITESPACE_CELL_WIDTH,C.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,g){return new y.BufferLine(this._bufferService.cols,this.getNullCell(f),g)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;const g=f+this._optionsService.rawOptions.scrollback;return g>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:g}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=y.DEFAULT_ATTR_DATA);let g=this._rows;for(;g--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,g){const w=this.getNullCell(y.DEFAULT_ATTR_DATA);let R=0;const A=this._getCorrectBufferLength(g);if(A>this.lines.maxLength&&(this.lines.maxLength=A),this.lines.length>0){if(this._cols<f)for(let E=0;E<this.lines.length;E++)R+=+this.lines.get(E).resize(f,w);let z=0;if(this._rows<g)for(let E=this._rows;E<g;E++)this.lines.length<g+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(f,w)):this.ybase>0&&this.lines.length<=this.ybase+this.y+z+1?(this.ybase--,z++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(f,w)));else for(let E=this._rows;E>g;E--)this.lines.length>g+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(A<this.lines.maxLength){const E=this.lines.length-A;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=A}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,g-1),z&&(this.y+=z),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=g-1,this._isReflowEnabled&&(this._reflow(f,g),this._cols>f))for(let z=0;z<this.lines.length;z++)R+=+this.lines.get(z).resize(f,w);this._cols=f,this._rows=g,this._memoryCleanupQueue.clear(),R>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let g=0;for(;this._memoryCleanupPosition<this.lines.length;)if(g+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),g>100)return!0;return f}get _isReflowEnabled(){const f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,g){this._cols!==f&&(f>this._cols?this._reflowLarger(f,g):this._reflowSmaller(f,g))}_reflowLarger(f,g){const w=(0,_.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(w.length>0){const R=(0,_.reflowLargerCreateNewLayout)(this.lines,w);(0,_.reflowLargerApplyNewLayout)(this.lines,R.layout),this._reflowLargerAdjustViewport(f,g,R.countRemoved)}}_reflowLargerAdjustViewport(f,g,w){const R=this.getNullCell(y.DEFAULT_ATTR_DATA);let A=w;for(;A-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<g&&this.lines.push(new y.BufferLine(f,R))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-w,0)}_reflowSmaller(f,g){const w=this.getNullCell(y.DEFAULT_ATTR_DATA),R=[];let A=0;for(let z=this.lines.length-1;z>=0;z--){let E=this.lines.get(z);if(!E||!E.isWrapped&&E.getTrimmedLength()<=f)continue;const B=[E];for(;E.isWrapped&&z>0;)E=this.lines.get(--z),B.unshift(E);const O=this.ybase+this.y;if(O>=z&&O<z+B.length)continue;const H=B[B.length-1].getTrimmedLength(),K=(0,_.reflowSmallerGetNewLineLengths)(B,this._cols,f),U=K.length-B.length;let ee;ee=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);const V=[];for(let D=0;D<U;D++){const W=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);V.push(W)}V.length>0&&(R.push({start:z+B.length+A,newLines:V}),A+=V.length),B.push(...V);let ue=K.length-1,Q=K[ue];Q===0&&(ue--,Q=K[ue]);let G=B.length-U-1,M=H;for(;G>=0;){const D=Math.min(M,Q);if(B[ue]===void 0)break;if(B[ue].copyCellsFrom(B[G],M-D,Q-D,D,!0),Q-=D,Q===0&&(ue--,Q=K[ue]),M-=D,M===0){G--;const W=Math.max(G,0);M=(0,_.getWrappedLineTrimmedLength)(B,W,this._cols)}}for(let D=0;D<B.length;D++)K[D]<f&&B[D].setCell(K[D],w);let I=U-ee;for(;I-- >0;)this.ybase===0?this.y<g-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+A)-g&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+g-1)}if(R.length>0){const z=[],E=[];for(let ue=0;ue<this.lines.length;ue++)E.push(this.lines.get(ue));const B=this.lines.length;let O=B-1,H=0,K=R[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+A);let U=0;for(let ue=Math.min(this.lines.maxLength-1,B+A-1);ue>=0;ue--)if(K&&K.start>O+U){for(let Q=K.newLines.length-1;Q>=0;Q--)this.lines.set(ue--,K.newLines[Q]);ue++,z.push({index:O+1,amount:K.newLines.length}),U+=K.newLines.length,K=R[++H]}else this.lines.set(ue,E[O--]);let ee=0;for(let ue=z.length-1;ue>=0;ue--)z[ue].index+=ee,this.lines.onInsertEmitter.fire(z[ue]),ee+=z[ue].amount;const V=Math.max(0,B+A-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(f,g,w=0,R){const A=this.lines.get(f);return A?A.translateToString(g,w,R):""}getWrappedRangeForLine(f){let g=f,w=f;for(;g>0&&this.lines.get(g).isWrapped;)g--;for(;w+1<this.lines.length&&this.lines.get(w+1).isWrapped;)w++;return{first:g,last:w}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].line===f&&(this.markers[g].dispose(),this.markers.splice(g--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){const g=new h.Marker(f);return this.markers.push(g),g.register(this.lines.onTrim((w=>{g.line-=w,g.line<0&&g.dispose()}))),g.register(this.lines.onInsert((w=>{g.line>=w.index&&(g.line+=w.amount)}))),g.register(this.lines.onDelete((w=>{g.line>=w.index&&g.line<w.index+w.amount&&g.dispose(),g.line>w.index&&(g.line-=w.amount)}))),g.register(g.onDispose((()=>this._removeMarker(g)))),g}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const m=c(3734),v=c(511),d=c(643),y=c(482);l.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);let _=0;class j{constructor(h,p,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const g=p||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let w=0;w<h;++w)this.setCell(w,g);this.length=h}get(h){const p=this._data[3*h+0],f=2097151&p;return[this._data[3*h+1],2097152&p?this._combined[h]:f?(0,y.stringFromCodePoint)(f):"",p>>22,2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):f]}set(h,p){this._data[3*h+1]=p[d.CHAR_DATA_ATTR_INDEX],p[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=p[1],this._data[3*h+0]=2097152|h|p[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&p}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h]:2097151&p?(0,y.stringFromCodePoint)(2097151&p):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,p){return _=3*h,p.content=this._data[_+0],p.fg=this._data[_+1],p.bg=this._data[_+2],2097152&p.content&&(p.combinedData=this._combined[h]),268435456&p.bg&&(p.extended=this._extendedAttrs[h]),p}setCell(h,p){2097152&p.content&&(this._combined[h]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[h]=p.extended),this._data[3*h+0]=p.content,this._data[3*h+1]=p.fg,this._data[3*h+2]=p.bg}setCellFromCodepoint(h,p,f,g){268435456&g.bg&&(this._extendedAttrs[h]=g.extended),this._data[3*h+0]=p|f<<22,this._data[3*h+1]=g.fg,this._data[3*h+2]=g.bg}addCodepointToCell(h,p,f){let g=this._data[3*h+0];2097152&g?this._combined[h]+=(0,y.stringFromCodePoint)(p):2097151&g?(this._combined[h]=(0,y.stringFromCodePoint)(2097151&g)+(0,y.stringFromCodePoint)(p),g&=-2097152,g|=2097152):g=p|4194304,f&&(g&=-12582913,g|=f<<22),this._data[3*h+0]=g}insertCells(h,p,f){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length-h){const g=new v.CellData;for(let w=this.length-h-p-1;w>=0;--w)this.setCell(h+p+w,this.loadCell(h+w,g));for(let w=0;w<p;++w)this.setCell(h+w,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,f)}deleteCells(h,p,f){if(h%=this.length,p<this.length-h){const g=new v.CellData;for(let w=0;w<this.length-h-p;++w)this.setCell(h+w,this.loadCell(h+p+w,g));for(let w=this.length-p;w<this.length;++w)this.setCell(w,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodepoint(h,0,1,f)}replaceCells(h,p,f,g=!1){if(g)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.isProtected(h)||this.setCell(h,f),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.setCell(h++,f)}resize(h,p){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const f=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{const g=new Uint32Array(f);g.set(this._data),this._data=g}for(let g=this.length;g<h;++g)this.setCell(g,p)}else{this._data=this._data.subarray(0,f);const g=Object.keys(this._combined);for(let R=0;R<g.length;R++){const A=parseInt(g[R],10);A>=h&&delete this._combined[A]}const w=Object.keys(this._extendedAttrs);for(let R=0;R<w.length;R++){const A=parseInt(w[R],10);A>=h&&delete this._extendedAttrs[A]}}return this.length=h,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,p=!1){if(p)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,h);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const p in h._combined)this._combined[p]=h._combined[p];this._extendedAttrs={};for(const p in h._extendedAttrs)this._extendedAttrs[p]=h._extendedAttrs[p];this.isWrapped=h.isWrapped}clone(){const h=new j(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const p in this._combined)h._combined[p]=this._combined[p];for(const p in this._extendedAttrs)h._extendedAttrs[p]=this._extendedAttrs[p];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,p,f,g,w){const R=h._data;if(w)for(let z=g-1;z>=0;z--){for(let E=0;E<3;E++)this._data[3*(f+z)+E]=R[3*(p+z)+E];268435456&R[3*(p+z)+2]&&(this._extendedAttrs[f+z]=h._extendedAttrs[p+z])}else for(let z=0;z<g;z++){for(let E=0;E<3;E++)this._data[3*(f+z)+E]=R[3*(p+z)+E];268435456&R[3*(p+z)+2]&&(this._extendedAttrs[f+z]=h._extendedAttrs[p+z])}const A=Object.keys(h._combined);for(let z=0;z<A.length;z++){const E=parseInt(A[z],10);E>=p&&(this._combined[E-p+f]=h._combined[E])}}translateToString(h,p,f,g){p=p??0,f=f??this.length,h&&(f=Math.min(f,this.getTrimmedLength())),g&&(g.length=0);let w="";for(;p<f;){const R=this._data[3*p+0],A=2097151&R,z=2097152&R?this._combined[p]:A?(0,y.stringFromCodePoint)(A):d.WHITESPACE_CELL_CHAR;if(w+=z,g)for(let E=0;E<z.length;++E)g.push(p);p+=R>>22||1}return g&&g.push(p),w}}l.BufferLine=j},4841:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(c,m){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return m*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(b,l)=>{function c(m,v,d){if(v===m.length-1)return m[v].getTrimmedLength();const y=!m[v].hasContent(d-1)&&m[v].getWidth(d-1)===1,_=m[v+1].getWidth(0)===2;return y&&_?d-1:d}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(m,v,d,y,_){const j=[];for(let C=0;C<m.length-1;C++){let h=C,p=m.get(++h);if(!p.isWrapped)continue;const f=[m.get(C)];for(;h<m.length&&p.isWrapped;)f.push(p),p=m.get(++h);if(y>=C&&y<h){C+=f.length-1;continue}let g=0,w=c(f,g,v),R=1,A=0;for(;R<f.length;){const E=c(f,R,v),B=E-A,O=d-w,H=Math.min(B,O);f[g].copyCellsFrom(f[R],A,w,H,!1),w+=H,w===d&&(g++,w=0),A+=H,A===E&&(R++,A=0),w===0&&g!==0&&f[g-1].getWidth(d-1)===2&&(f[g].copyCellsFrom(f[g-1],d-1,w++,1,!1),f[g-1].setCell(d-1,_))}f[g].replaceCells(w,d,_);let z=0;for(let E=f.length-1;E>0&&(E>g||f[E].getTrimmedLength()===0);E--)z++;z>0&&(j.push(C+f.length-z),j.push(z)),C+=f.length-1}return j},l.reflowLargerCreateNewLayout=function(m,v){const d=[];let y=0,_=v[y],j=0;for(let C=0;C<m.length;C++)if(_===C){const h=v[++y];m.onDeleteEmitter.fire({index:C-j,amount:h}),C+=h-1,j+=h,_=v[++y]}else d.push(C);return{layout:d,countRemoved:j}},l.reflowLargerApplyNewLayout=function(m,v){const d=[];for(let y=0;y<v.length;y++)d.push(m.get(v[y]));for(let y=0;y<d.length;y++)m.set(y,d[y]);m.length=v.length},l.reflowSmallerGetNewLineLengths=function(m,v,d){const y=[],_=m.map(((p,f)=>c(m,f,v))).reduce(((p,f)=>p+f));let j=0,C=0,h=0;for(;h<_;){if(_-h<d){y.push(_-h);break}j+=d;const p=c(m,C,v);j>p&&(j-=p,C++);const f=m[C].getWidth(j-1)===2;f&&j--;const g=f?d-1:d;y.push(g),h+=g}return y},l.getWrappedLineTrimmedLength=c},5295:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const m=c(8460),v=c(844),d=c(9092);class y extends v.Disposable{constructor(j,C){super(),this._optionsService=j,this._bufferService=C,this._onBufferActivate=this.register(new m.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(j){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(j),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(j,C){this._normal.resize(j,C),this._alt.resize(j,C),this.setupTabStops(j)}setupTabStops(j){this._normal.setupTabStops(j),this._alt.setupTabStops(j)}}l.BufferSet=y},511:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const m=c(482),v=c(643),d=c(3734);class y extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(j){const C=new y;return C.setFromCharData(j),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(j){this.fg=j[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(j[v.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(j[v.CHAR_DATA_CHAR_INDEX].length===2){const h=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const p=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(h-55296)+p-56320+65536|j[v.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|j[v.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=j[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|j[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=y},643:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const m=c(8460),v=c(844);class d{get id(){return this._id}constructor(_){this.line=_,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(_){return this._disposables.push(_),_}}l.Marker=d,d._nextId=1},7116:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(b,l)=>{var c,m,v;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""})(c||(l.C0=c={})),(function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""})(m||(l.C1=m={})),(function(d){d.ST=`${c.ESC}\\`})(v||(l.C1_ESCAPED=v={}))},7399:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const m=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(d,y,_,j){const C={type:0,cancel:!1,key:void 0},h=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?C.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?C.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?C.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(C.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:C.key=d.ctrlKey?"\b":m.C0.DEL,d.altKey&&(C.key=m.C0.ESC+C.key);break;case 9:if(d.shiftKey){C.key=m.C0.ESC+"[Z";break}C.key=m.C0.HT,C.cancel=!0;break;case 13:C.key=d.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,C.cancel=!0;break;case 27:C.key=m.C0.ESC,d.altKey&&(C.key=m.C0.ESC+m.C0.ESC),C.cancel=!0;break;case 37:if(d.metaKey)break;h?(C.key=m.C0.ESC+"[1;"+(h+1)+"D",C.key===m.C0.ESC+"[1;3D"&&(C.key=m.C0.ESC+(_?"b":"[1;5D"))):C.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(d.metaKey)break;h?(C.key=m.C0.ESC+"[1;"+(h+1)+"C",C.key===m.C0.ESC+"[1;3C"&&(C.key=m.C0.ESC+(_?"f":"[1;5C"))):C.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(d.metaKey)break;h?(C.key=m.C0.ESC+"[1;"+(h+1)+"A",_||C.key!==m.C0.ESC+"[1;3A"||(C.key=m.C0.ESC+"[1;5A")):C.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(d.metaKey)break;h?(C.key=m.C0.ESC+"[1;"+(h+1)+"B",_||C.key!==m.C0.ESC+"[1;3B"||(C.key=m.C0.ESC+"[1;5B")):C.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(C.key=m.C0.ESC+"[2~");break;case 46:C.key=h?m.C0.ESC+"[3;"+(h+1)+"~":m.C0.ESC+"[3~";break;case 36:C.key=h?m.C0.ESC+"[1;"+(h+1)+"H":y?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:C.key=h?m.C0.ESC+"[1;"+(h+1)+"F":y?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:d.shiftKey?C.type=2:d.ctrlKey?C.key=m.C0.ESC+"[5;"+(h+1)+"~":C.key=m.C0.ESC+"[5~";break;case 34:d.shiftKey?C.type=3:d.ctrlKey?C.key=m.C0.ESC+"[6;"+(h+1)+"~":C.key=m.C0.ESC+"[6~";break;case 112:C.key=h?m.C0.ESC+"[1;"+(h+1)+"P":m.C0.ESC+"OP";break;case 113:C.key=h?m.C0.ESC+"[1;"+(h+1)+"Q":m.C0.ESC+"OQ";break;case 114:C.key=h?m.C0.ESC+"[1;"+(h+1)+"R":m.C0.ESC+"OR";break;case 115:C.key=h?m.C0.ESC+"[1;"+(h+1)+"S":m.C0.ESC+"OS";break;case 116:C.key=h?m.C0.ESC+"[15;"+(h+1)+"~":m.C0.ESC+"[15~";break;case 117:C.key=h?m.C0.ESC+"[17;"+(h+1)+"~":m.C0.ESC+"[17~";break;case 118:C.key=h?m.C0.ESC+"[18;"+(h+1)+"~":m.C0.ESC+"[18~";break;case 119:C.key=h?m.C0.ESC+"[19;"+(h+1)+"~":m.C0.ESC+"[19~";break;case 120:C.key=h?m.C0.ESC+"[20;"+(h+1)+"~":m.C0.ESC+"[20~";break;case 121:C.key=h?m.C0.ESC+"[21;"+(h+1)+"~":m.C0.ESC+"[21~";break;case 122:C.key=h?m.C0.ESC+"[23;"+(h+1)+"~":m.C0.ESC+"[23~";break;case 123:C.key=h?m.C0.ESC+"[24;"+(h+1)+"~":m.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(_&&!j||!d.altKey||d.metaKey)!_||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?C.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(C.key=m.C0.US),d.key==="@"&&(C.key=m.C0.NUL)):d.keyCode===65&&(C.type=1);else{const p=v[d.keyCode],f=p==null?void 0:p[d.shiftKey?1:0];if(f)C.key=m.C0.ESC+f;else if(d.keyCode>=65&&d.keyCode<=90){const g=d.ctrlKey?d.keyCode-64:d.keyCode+32;let w=String.fromCharCode(g);d.shiftKey&&(w=w.toUpperCase()),C.key=m.C0.ESC+w}else if(d.keyCode===32)C.key=m.C0.ESC+(d.ctrlKey?m.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let g=d.code.slice(3,4);d.shiftKey||(g=g.toLowerCase()),C.key=m.C0.ESC+g,C.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?C.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?C.key=m.C0.NUL:d.keyCode>=51&&d.keyCode<=55?C.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?C.key=m.C0.DEL:d.keyCode===219?C.key=m.C0.ESC:d.keyCode===220?C.key=m.C0.FS:d.keyCode===221&&(C.key=m.C0.GS)}return C}},482:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},l.utf32ToString=function(c,m=0,v=c.length){let d="";for(let y=m;y<v;++y){let _=c[y];_>65535?(_-=65536,d+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):d+=String.fromCharCode(_)}return d},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,m){const v=c.length;if(!v)return 0;let d=0,y=0;if(this._interim){const _=c.charCodeAt(y++);56320<=_&&_<=57343?m[d++]=1024*(this._interim-55296)+_-56320+65536:(m[d++]=this._interim,m[d++]=_),this._interim=0}for(let _=y;_<v;++_){const j=c.charCodeAt(_);if(55296<=j&&j<=56319){if(++_>=v)return this._interim=j,d;const C=c.charCodeAt(_);56320<=C&&C<=57343?m[d++]=1024*(j-55296)+C-56320+65536:(m[d++]=j,m[d++]=C)}else j!==65279&&(m[d++]=j)}return d}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,m){const v=c.length;if(!v)return 0;let d,y,_,j,C=0,h=0,p=0;if(this.interim[0]){let w=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let A,z=0;for(;(A=63&this.interim[++z])&&z<4;)R<<=6,R|=A;const E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=E-z;for(;p<B;){if(p>=v)return 0;if(A=c[p++],(192&A)!=128){p--,w=!0;break}this.interim[z++]=A,R<<=6,R|=63&A}w||(E===2?R<128?p--:m[C++]=R:E===3?R<2048||R>=55296&&R<=57343||R===65279||(m[C++]=R):R<65536||R>1114111||(m[C++]=R)),this.interim.fill(0)}const f=v-4;let g=p;for(;g<v;){for(;!(!(g<f)||128&(d=c[g])||128&(y=c[g+1])||128&(_=c[g+2])||128&(j=c[g+3]));)m[C++]=d,m[C++]=y,m[C++]=_,m[C++]=j,g+=4;if(d=c[g++],d<128)m[C++]=d;else if((224&d)==192){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(h=(31&d)<<6|63&y,h<128){g--;continue}m[C++]=h}else if((240&d)==224){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,C;if(_=c[g++],(192&_)!=128){g--;continue}if(h=(15&d)<<12|(63&y)<<6|63&_,h<2048||h>=55296&&h<=57343||h===65279)continue;m[C++]=h}else if((248&d)==240){if(g>=v)return this.interim[0]=d,C;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,C;if(_=c[g++],(192&_)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,this.interim[2]=_,C;if(j=c[g++],(192&j)!=128){g--;continue}if(h=(7&d)<<18|(63&y)<<12|(63&_)<<6|63&j,h<65536||h>1114111)continue;m[C++]=h}}return C}}},225:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const m=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let y;l.UnicodeV6=class{constructor(){if(this.version="6",!y){y=new Uint8Array(65536),y.fill(1),y[0]=0,y.fill(0,1,32),y.fill(0,127,160),y.fill(2,4352,4448),y[9001]=2,y[9002]=2,y.fill(2,11904,42192),y[12351]=1,y.fill(2,44032,55204),y.fill(2,63744,64256),y.fill(2,65040,65050),y.fill(2,65072,65136),y.fill(2,65280,65377),y.fill(2,65504,65511);for(let _=0;_<v.length;++_)y.fill(0,v[_][0],v[_][1]+1)}}wcwidth(_){return _<32?0:_<127?1:_<65536?y[_]:(function(j,C){let h,p=0,f=C.length-1;if(j<C[0][0]||j>C[f][1])return!1;for(;f>=p;)if(h=p+f>>1,j>C[h][1])p=h+1;else{if(!(j<C[h][0]))return!0;f=h-1}return!1})(_,d)?0:_>=131072&&_<=196605||_>=196608&&_<=262141?2:1}charProperties(_,j){let C=this.wcwidth(_),h=C===0&&j!==0;if(h){const p=m.UnicodeService.extractWidth(j);p===0?h=!1:p>C&&(C=p)}return m.UnicodeService.createPropertyValue(0,C,h)}}},5981:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const m=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(_,j){if(j!==void 0&&this._syncCalls>j)return void(this._syncCalls=0);if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let C;for(this._isSyncWriting=!0;C=this._writeBuffer.shift();){this._action(C);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(_,j){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j)}_innerWrite(_=0,j=!0){const C=_||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],p=this._action(h,j);if(p){const g=w=>Date.now()-C>=12?setTimeout((()=>this._innerWrite(0,w))):this._innerWrite(C,w);return void p.catch((w=>(queueMicrotask((()=>{throw w})),Promise.resolve(!1)))).then(g)}const f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=d},5941:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function v(d,y){const _=d.toString(16),j=_.length<2?"0"+_:_;switch(y){case 4:return _[0];case 8:return j;case 12:return(j+j).slice(0,3);default:return j+j}}l.parseColor=function(d){if(!d)return;let y=d.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const _=c.exec(y);if(_){const j=_[1]?15:_[4]?255:_[7]?4095:65535;return[Math.round(parseInt(_[1]||_[4]||_[7]||_[10],16)/j*255),Math.round(parseInt(_[2]||_[5]||_[8]||_[11],16)/j*255),Math.round(parseInt(_[3]||_[6]||_[9]||_[12],16)/j*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),m.exec(y)&&[3,6,9,12].includes(y.length))){const _=y.length/3,j=[0,0,0];for(let C=0;C<3;++C){const h=parseInt(y.slice(_*C,_*C+_),16);j[C]=_===1?h<<4:_===2?h:_===3?h>>4:h>>8}return j}},l.toRgbString=function(d,y=16){const[_,j,C]=d;return`rgb:${v(_,y)}/${v(j,y)}/${v(C,y)}`}},5770:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const m=c(482),v=c(8742),d=c(5770),y=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(j,C){this._handlers[j]===void 0&&(this._handlers[j]=[]);const h=this._handlers[j];return h.push(C),{dispose:()=>{const p=h.indexOf(C);p!==-1&&h.splice(p,1)}}}clearHandler(j){this._handlers[j]&&delete this._handlers[j]}setHandlerFallback(j){this._handlerFb=j}reset(){if(this._active.length)for(let j=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;j>=0;--j)this._active[j].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(j,C){if(this.reset(),this._ident=j,this._active=this._handlers[j]||y,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(C);else this._handlerFb(this._ident,"HOOK",C)}put(j,C,h){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(j,C,h);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(j,C,h))}unhook(j,C=!0){if(this._active.length){let h=!1,p=this._active.length-1,f=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,h=C,f=this._stack.fallThrough,this._stack.paused=!1),!f&&h===!1){for(;p>=0&&(h=this._active[p].unhook(j),h!==!0);p--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,h;p--}for(;p>=0;p--)if(h=this._active[p].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",j);this._active=y,this._ident=0}};const _=new v.Params;_.addParam(0),l.DcsHandler=class{constructor(j){this._handler=j,this._data="",this._params=_,this._hitLimit=!1}hook(j){this._params=j.length>1||j.params[0]?j.clone():_,this._data="",this._hitLimit=!1}put(j,C,h){this._hitLimit||(this._data+=(0,m.utf32ToString)(j,C,h),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(j){let C=!1;if(this._hitLimit)C=!1;else if(j&&(C=this._handler(this._data,this._params),C instanceof Promise))return C.then((h=>(this._params=_,this._data="",this._hitLimit=!1,h)));return this._params=_,this._data="",this._hitLimit=!1,C}}},2015:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const m=c(844),v=c(8742),d=c(6242),y=c(6351);class _{constructor(p){this.table=new Uint8Array(p)}setDefault(p,f){this.table.fill(p<<4|f)}add(p,f,g,w){this.table[f<<8|p]=g<<4|w}addMany(p,f,g,w){for(let R=0;R<p.length;R++)this.table[f<<8|p[R]]=g<<4|w}}l.TransitionTable=_;const j=160;l.VT500_TRANSITION_TABLE=(function(){const h=new _(4095),p=Array.apply(null,Array(256)).map(((z,E)=>E)),f=(z,E)=>p.slice(z,E),g=f(32,127),w=f(0,24);w.push(25),w.push.apply(w,f(28,32));const R=f(0,14);let A;for(A in h.setDefault(1,0),h.addMany(g,0,2,0),R)h.addMany([24,26,153,154],A,3,0),h.addMany(f(128,144),A,3,0),h.addMany(f(144,152),A,3,0),h.add(156,A,0,0),h.add(27,A,11,1),h.add(157,A,4,8),h.addMany([152,158,159],A,0,7),h.add(155,A,11,3),h.add(144,A,11,9);return h.addMany(w,0,3,0),h.addMany(w,1,3,1),h.add(127,1,0,1),h.addMany(w,8,0,8),h.addMany(w,3,3,3),h.add(127,3,0,3),h.addMany(w,4,3,4),h.add(127,4,0,4),h.addMany(w,6,3,6),h.addMany(w,5,3,5),h.add(127,5,0,5),h.addMany(w,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(g,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(f(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(g,7,0,7),h.addMany(w,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(f(64,127),3,7,0),h.addMany(f(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(f(48,60),4,8,4),h.addMany(f(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(f(32,64),6,0,6),h.add(127,6,0,6),h.addMany(f(64,127),6,0,0),h.addMany(f(32,48),3,9,5),h.addMany(f(32,48),5,9,5),h.addMany(f(48,64),5,0,6),h.addMany(f(64,127),5,7,0),h.addMany(f(32,48),4,9,5),h.addMany(f(32,48),1,9,2),h.addMany(f(32,48),2,9,2),h.addMany(f(48,127),2,10,0),h.addMany(f(48,80),1,10,0),h.addMany(f(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(f(96,127),1,10,0),h.add(80,1,11,9),h.addMany(w,9,0,9),h.add(127,9,0,9),h.addMany(f(28,32),9,0,9),h.addMany(f(32,48),9,9,12),h.addMany(f(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(w,11,0,11),h.addMany(f(32,128),11,0,11),h.addMany(f(28,32),11,0,11),h.addMany(w,10,0,10),h.add(127,10,0,10),h.addMany(f(28,32),10,0,10),h.addMany(f(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(f(32,48),10,9,12),h.addMany(w,12,0,12),h.add(127,12,0,12),h.addMany(f(28,32),12,0,12),h.addMany(f(32,48),12,9,12),h.addMany(f(48,64),12,0,11),h.addMany(f(64,127),12,12,13),h.addMany(f(64,127),10,12,13),h.addMany(f(64,127),9,12,13),h.addMany(w,13,13,13),h.addMany(g,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(j,0,2,0),h.add(j,8,5,8),h.add(j,6,0,6),h.add(j,11,0,11),h.add(j,13,13,13),h})();class C extends m.Disposable{constructor(p=l.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(f,g,w)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,g)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(p,f=[64,126]){let g=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(g=p.prefix.charCodeAt(0),g&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let R=0;R<p.intermediates.length;++R){const A=p.intermediates.charCodeAt(R);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=A}}if(p.final.length!==1)throw new Error("final must be a single byte");const w=p.final.charCodeAt(0);if(f[0]>w||w>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return g<<=8,g|=w,g}identToString(p){const f=[];for(;p;)f.push(String.fromCharCode(255&p)),p>>=8;return f.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,f){const g=this._identifier(p,[48,126]);this._escHandlers[g]===void 0&&(this._escHandlers[g]=[]);const w=this._escHandlers[g];return w.push(f),{dispose:()=>{const R=w.indexOf(f);R!==-1&&w.splice(R,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,f){this._executeHandlers[p.charCodeAt(0)]=f}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,f){const g=this._identifier(p);this._csiHandlers[g]===void 0&&(this._csiHandlers[g]=[]);const w=this._csiHandlers[g];return w.push(f),{dispose:()=>{const R=w.indexOf(f);R!==-1&&w.splice(R,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,f){return this._dcsParser.registerHandler(this._identifier(p),f)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,f){return this._oscParser.registerHandler(p,f)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,f,g,w,R){this._parseStack.state=p,this._parseStack.handlers=f,this._parseStack.handlerPos=g,this._parseStack.transition=w,this._parseStack.chunkPos=R}parse(p,f,g){let w,R=0,A=0,z=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,z=this._parseStack.chunkPos+1;else{if(g===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const E=this._parseStack.handlers;let B=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(g===!1&&B>-1){for(;B>=0&&(w=E[B](this._params),w!==!0);B--)if(w instanceof Promise)return this._parseStack.handlerPos=B,w}this._parseStack.handlers=[];break;case 4:if(g===!1&&B>-1){for(;B>=0&&(w=E[B](),w!==!0);B--)if(w instanceof Promise)return this._parseStack.handlerPos=B,w}this._parseStack.handlers=[];break;case 6:if(R=p[this._parseStack.chunkPos],w=this._dcsParser.unhook(R!==24&&R!==26,g),w)return w;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(R=p[this._parseStack.chunkPos],w=this._oscParser.end(R!==24&&R!==26,g),w)return w;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,z=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let E=z;E<f;++E){switch(R=p[E],A=this._transitions.table[this.currentState<<8|(R<160?R:j)],A>>4){case 2:for(let U=E+1;;++U){if(U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}}break;case 3:this._executeHandlers[R]?this._executeHandlers[R]():this._executeHandlerFb(R),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:R,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const B=this._csiHandlers[this._collect<<8|R];let O=B?B.length-1:-1;for(;O>=0&&(w=B[O](this._params),w!==!0);O--)if(w instanceof Promise)return this._preserveStack(3,B,O,A,E),w;O<0&&this._csiHandlerFb(this._collect<<8|R,this._params),this.precedingJoinState=0;break;case 8:do switch(R){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(R-48)}while(++E<f&&(R=p[E])>47&&R<60);E--;break;case 9:this._collect<<=8,this._collect|=R;break;case 10:const H=this._escHandlers[this._collect<<8|R];let K=H?H.length-1:-1;for(;K>=0&&(w=H[K](),w!==!0);K--)if(w instanceof Promise)return this._preserveStack(4,H,K,A,E),w;K<0&&this._escHandlerFb(this._collect<<8|R),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|R,this._params);break;case 13:for(let U=E+1;;++U)if(U>=f||(R=p[U])===24||R===26||R===27||R>127&&R<j){this._dcsParser.put(p,E,U),E=U-1;break}break;case 14:if(w=this._dcsParser.unhook(R!==24&&R!==26),w)return this._preserveStack(6,[],0,A,E),w;R===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let U=E+1;;U++)if(U>=f||(R=p[U])<32||R>127&&R<j){this._oscParser.put(p,E,U),E=U-1;break}break;case 6:if(w=this._oscParser.end(R!==24&&R!==26),w)return this._preserveStack(5,[],0,A,E),w;R===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&A}}}l.EscapeSequenceParser=C},6242:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const m=c(5770),v=c(482),d=[];l.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,_){this._handlers[y]===void 0&&(this._handlers[y]=[]);const j=this._handlers[y];return j.push(_),{dispose:()=>{const C=j.indexOf(_);C!==-1&&j.splice(C,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,_,j){if(this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].put(y,_,j);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(y,_,j))}start(){this.reset(),this._state=1}put(y,_,j){if(this._state!==3){if(this._state===1)for(;_<j;){const C=y[_++];if(C===59){this._state=2,this._start();break}if(C<48||57<C)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+C-48}this._state===2&&j-_>0&&this._put(y,_,j)}}end(y,_=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let j=!1,C=this._active.length-1,h=!1;if(this._stack.paused&&(C=this._stack.loopPosition-1,j=_,h=this._stack.fallThrough,this._stack.paused=!1),!h&&j===!1){for(;C>=0&&(j=this._active[C].end(y),j!==!0);C--)if(j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!1,j;C--}for(;C>=0;C--)if(j=this._active[C].end(!1),j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!0,j}else this._handlerFb(this._id,"END",y);this._active=d,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,_,j){this._hitLimit||(this._data+=(0,v.utf32ToString)(y,_,j),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let _=!1;if(this._hitLimit)_=!1;else if(y&&(_=this._handler(this._data),_ instanceof Promise))return _.then((j=>(this._data="",this._hitLimit=!1,j)));return this._data="",this._hitLimit=!1,_}}},8742:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const c=2147483647;class m{static fromArray(d){const y=new m;if(!d.length)return y;for(let _=Array.isArray(d[0])?1:0;_<d.length;++_){const j=d[_];if(Array.isArray(j))for(let C=0;C<j.length;++C)y.addSubParam(j[C]);else y.addParam(j)}return y}constructor(d=32,y=32){if(this.maxLength=d,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new m(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let y=0;y<this.length;++y){d.push(this.params[y]);const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&d.push(Array.prototype.slice.call(this._subParams,_,j))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const y=this._subParamsIdx[d]>>8,_=255&this._subParamsIdx[d];return _-y>0?this._subParams.subarray(y,_):null}getSubParamsAll(){const d={};for(let y=0;y<this.length;++y){const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&(d[y]=this._subParams.slice(_,j))}return d}addDigit(d){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const _=this._digitIsSub?this._subParams:this.params,j=_[y-1];_[y-1]=~j?Math.min(10*j+d,c):d}}l.Params=m},5741:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,m){const v={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(v),m.dispose=()=>this._wrappedAddonDispose(v),m.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let m=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){m=v;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(m,1)}}},8771:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const m=c(3785),v=c(511);l.BufferApiView=class{constructor(d,y){this._buffer=d,this.type=y}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const y=this._buffer.lines.get(d);if(y)return new m.BufferLineApiView(y)}getNullCell(){return new v.CellData}}},3785:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const m=c(511);l.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new m.CellData)}translateToString(v,d,y){return this._line.translateToString(v,d,y)}}},8285:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const m=c(8771),v=c(8460),d=c(844);class y extends d.Disposable{constructor(j){super(),this._core=j,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=y},7975:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,m){return this._core.registerCsiHandler(c,(v=>m(v.toArray())))}addCsiHandler(c,m){return this.registerCsiHandler(c,m)}registerDcsHandler(c,m){return this._core.registerDcsHandler(c,((v,d)=>m(v,d.toArray())))}addDcsHandler(c,m){return this.registerDcsHandler(c,m)}registerEscHandler(c,m){return this._core.registerEscHandler(c,m)}addEscHandler(c,m){return this.registerEscHandler(c,m)}registerOscHandler(c,m){return this._core.registerOscHandler(c,m)}addOscHandler(c,m){return this.registerOscHandler(c,m)}}},7090:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(b,l,c){var m=this&&this.__decorate||function(h,p,f,g){var w,R=arguments.length,A=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(h,p,f,g);else for(var z=h.length-1;z>=0;z--)(w=h[z])&&(A=(R<3?w(A):R>3?w(p,f,A):w(p,f))||A);return R>3&&A&&Object.defineProperty(p,f,A),A},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const d=c(8460),y=c(844),_=c(5295),j=c(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let C=l.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new _.BufferSet(h,this))}resize(h,p){this.cols=h,this.rows=p,this.buffers.resize(h,p),this._onResize.fire({cols:h,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,p=!1){const f=this.buffer;let g;g=this._cachedBlankLine,g&&g.length===this.cols&&g.getFg(0)===h.fg&&g.getBg(0)===h.bg||(g=f.getBlankLine(h,p),this._cachedBlankLine=g),g.isWrapped=p;const w=f.ybase+f.scrollTop,R=f.ybase+f.scrollBottom;if(f.scrollTop===0){const A=f.lines.isFull;R===f.lines.length-1?A?f.lines.recycle().copyFrom(g):f.lines.push(g.clone()):f.lines.splice(R+1,0,g.clone()),A?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{const A=R-w+1;f.lines.shiftElements(w+1,A-1,-1),f.lines.set(R,g.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(h,p,f){const g=this.buffer;if(h<0){if(g.ydisp===0)return;this.isUserScrolling=!0}else h+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);const w=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+h,g.ybase),0),w!==g.ydisp&&(p||this._onScroll.fire(g.ydisp))}};l.BufferService=C=m([v(0,j.IOptionsService)],C)},7994:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,m){this._charsets[c]=m,this.glevel===c&&(this.charset=m)}}},1753:function(b,l,c){var m=this&&this.__decorate||function(g,w,R,A){var z,E=arguments.length,B=E<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,R):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,w,R,A);else for(var O=g.length-1;O>=0;O--)(z=g[O])&&(B=(E<3?z(B):E>3?z(w,R,B):z(w,R))||B);return E>3&&B&&Object.defineProperty(w,R,B),B},v=this&&this.__param||function(g,w){return function(R,A){w(R,A,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const d=c(2585),y=c(8460),_=c(844),j={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:g=>g.button!==4&&g.action===1&&(g.ctrl=!1,g.alt=!1,g.shift=!1,!0)},VT200:{events:19,restrict:g=>g.action!==32},DRAG:{events:23,restrict:g=>g.action!==32||g.button!==3},ANY:{events:31,restrict:g=>!0}};function C(g,w){let R=(g.ctrl?16:0)|(g.shift?4:0)|(g.alt?8:0);return g.button===4?(R|=64,R|=g.action):(R|=3&g.button,4&g.button&&(R|=64),8&g.button&&(R|=128),g.action===32?R|=32:g.action!==0||w||(R|=3)),R}const h=String.fromCharCode,p={DEFAULT:g=>{const w=[C(g,!1)+32,g.col+32,g.row+32];return w[0]>255||w[1]>255||w[2]>255?"":`\x1B[M${h(w[0])}${h(w[1])}${h(w[2])}`},SGR:g=>{const w=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${C(g,!0)};${g.col};${g.row}${w}`},SGR_PIXELS:g=>{const w=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${C(g,!0)};${g.x};${g.y}${w}`}};let f=l.CoreMouseService=class extends _.Disposable{constructor(g,w){super(),this._bufferService=g,this._coreService=w,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const R of Object.keys(j))this.addProtocol(R,j[R]);for(const R of Object.keys(p))this.addEncoding(R,p[R]);this.reset()}addProtocol(g,w){this._protocols[g]=w}addEncoding(g,w){this._encodings[g]=w}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(g){if(!this._protocols[g])throw new Error(`unknown protocol "${g}"`);this._activeProtocol=g,this._onProtocolChange.fire(this._protocols[g].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(g){if(!this._encodings[g])throw new Error(`unknown encoding "${g}"`);this._activeEncoding=g}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(g){if(g.col<0||g.col>=this._bufferService.cols||g.row<0||g.row>=this._bufferService.rows||g.button===4&&g.action===32||g.button===3&&g.action!==32||g.button!==4&&(g.action===2||g.action===3)||(g.col++,g.row++,g.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,g,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(g))return!1;const w=this._encodings[this._activeEncoding](g);return w&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(w):this._coreService.triggerDataEvent(w,!0)),this._lastEvent=g,!0}explainEvents(g){return{down:!!(1&g),up:!!(2&g),drag:!!(4&g),move:!!(8&g),wheel:!!(16&g)}}_equalEvents(g,w,R){if(R){if(g.x!==w.x||g.y!==w.y)return!1}else if(g.col!==w.col||g.row!==w.row)return!1;return g.button===w.button&&g.action===w.action&&g.ctrl===w.ctrl&&g.alt===w.alt&&g.shift===w.shift}};l.CoreMouseService=f=m([v(0,d.IBufferService),v(1,d.ICoreService)],f)},6975:function(b,l,c){var m=this&&this.__decorate||function(f,g,w,R){var A,z=arguments.length,E=z<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,w,R);else for(var B=f.length-1;B>=0;B--)(A=f[B])&&(E=(z<3?A(E):z>3?A(g,w,E):A(g,w))||E);return z>3&&E&&Object.defineProperty(g,w,E),E},v=this&&this.__param||function(f,g){return function(w,R){g(w,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const d=c(1439),y=c(8460),_=c(844),j=c(2585),C=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=l.CoreService=class extends _.Disposable{constructor(f,g,w){super(),this._bufferService=f,this._logService=g,this._optionsService=w,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(C),this.decPrivateModes=(0,d.clone)(h)}reset(){this.modes=(0,d.clone)(C),this.decPrivateModes=(0,d.clone)(h)}triggerDataEvent(f,g=!1){if(this._optionsService.rawOptions.disableStdin)return;const w=this._bufferService.buffer;g&&this._optionsService.rawOptions.scrollOnUserInput&&w.ybase!==w.ydisp&&this._onRequestScrollToBottom.fire(),g&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,(()=>f.split("").map((R=>R.charCodeAt(0))))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,(()=>f.split("").map((g=>g.charCodeAt(0))))),this._onBinary.fire(f))}};l.CoreService=p=m([v(0,j.IBufferService),v(1,j.ILogService),v(2,j.IOptionsService)],p)},9074:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const m=c(8055),v=c(8460),d=c(844),y=c(6106);let _=0,j=0;class C extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList((f=>f==null?void 0:f.marker.line)),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)((()=>this.reset())))}registerDecoration(f){if(f.marker.isDisposed)return;const g=new h(f);if(g){const w=g.marker.onDispose((()=>g.dispose()));g.onDispose((()=>{g&&(this._decorations.delete(g)&&this._onDecorationRemoved.fire(g),w.dispose())})),this._decorations.insert(g),this._onDecorationRegistered.fire(g)}return g}reset(){for(const f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,g,w){let R=0,A=0;for(const z of this._decorations.getKeyIterator(g))R=z.options.x??0,A=R+(z.options.width??1),f>=R&&f<A&&(!w||(z.options.layer??"bottom")===w)&&(yield z)}forEachDecorationAtCell(f,g,w,R){this._decorations.forEachByKey(g,(A=>{_=A.options.x??0,j=_+(A.options.width??1),f>=_&&f<j&&(!w||(A.options.layer??"bottom")===w)&&R(A)}))}}l.DecorationService=C;class h extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const m=c(2585),v=c(8343);class d{constructor(..._){this._entries=new Map;for(const[j,C]of _)this.set(j,C)}set(_,j){const C=this._entries.get(_);return this._entries.set(_,j),C}forEach(_){for(const[j,C]of this._entries.entries())_(j,C)}has(_){return this._entries.has(_)}get(_){return this._entries.get(_)}}l.ServiceCollection=d,l.InstantiationService=class{constructor(){this._services=new d,this._services.set(m.IInstantiationService,this)}setService(y,_){this._services.set(y,_)}getService(y){return this._services.get(y)}createInstance(y,..._){const j=(0,v.getServiceDependencies)(y).sort(((p,f)=>p.index-f.index)),C=[];for(const p of j){const f=this._services.get(p.id);if(!f)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${p.id}.`);C.push(f)}const h=j.length>0?j[0].index:_.length;if(_.length!==h)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${h+1} conflicts with ${_.length} static arguments`);return new y(..._,...C)}}},7866:function(b,l,c){var m=this&&this.__decorate||function(h,p,f,g){var w,R=arguments.length,A=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(h,p,f,g);else for(var z=h.length-1;z>=0;z--)(w=h[z])&&(A=(R<3?w(A):R>3?w(p,f,A):w(p,f))||A);return R>3&&A&&Object.defineProperty(p,f,A),A},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const d=c(844),y=c(2585),_={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let j,C=l.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),j=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let p=0;p<h.length;p++)typeof h[p]=="function"&&(h[p]=h[p]())}_log(h,p,f){this._evalLazyOptionalParams(f),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...f)}trace(h,...p){var f;this._logLevel<=y.LogLevelEnum.TRACE&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.trace.bind(this._optionsService.options.logger))??console.log,h,p)}debug(h,...p){var f;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.debug.bind(this._optionsService.options.logger))??console.log,h,p)}info(h,...p){var f;this._logLevel<=y.LogLevelEnum.INFO&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.info.bind(this._optionsService.options.logger))??console.info,h,p)}warn(h,...p){var f;this._logLevel<=y.LogLevelEnum.WARN&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.warn.bind(this._optionsService.options.logger))??console.warn,h,p)}error(h,...p){var f;this._logLevel<=y.LogLevelEnum.ERROR&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.error.bind(this._optionsService.options.logger))??console.error,h,p)}};l.LogService=C=m([v(0,y.IOptionsService)],C),l.setTraceLogger=function(h){j=h},l.traceCall=function(h,p,f){if(typeof f.value!="function")throw new Error("not supported");const g=f.value;f.value=function(...w){if(j.logLevel!==y.LogLevelEnum.TRACE)return g.apply(this,w);j.trace(`GlyphRenderer#${g.name}(${w.map((A=>JSON.stringify(A))).join(", ")})`);const R=g.apply(this,w);return j.trace(`GlyphRenderer#${g.name} return`,R),R}}},7302:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const m=c(8460),v=c(844),d=c(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class _ extends v.Disposable{constructor(C){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h={...l.DEFAULT_OPTIONS};for(const p in C)if(p in h)try{const f=C[p];h[p]=this._sanitizeAndValidateOption(p,f)}catch(f){console.error(f)}this.rawOptions=h,this.options={...h},this._setupOptions(),this.register((0,v.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(C,h){return this.onOptionChange((p=>{p===C&&h(this.rawOptions[C])}))}onMultipleOptionChange(C,h){return this.onOptionChange((p=>{C.indexOf(p)!==-1&&h()}))}_setupOptions(){const C=p=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},h=(p,f)=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);f=this._sanitizeAndValidateOption(p,f),this.rawOptions[p]!==f&&(this.rawOptions[p]=f,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const f={get:C.bind(this,p),set:h.bind(this,p)};Object.defineProperty(this.options,p,f)}}_sanitizeAndValidateOption(C,h){switch(C){case"cursorStyle":if(h||(h=l.DEFAULT_OPTIONS[C]),!(function(p){return p==="block"||p==="underline"||p==="bar"})(h))throw new Error(`"${h}" is not a valid value for ${C}`);break;case"wordSeparator":h||(h=l.DEFAULT_OPTIONS[C]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=y.includes(h)?h:l.DEFAULT_OPTIONS[C];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${C} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${C} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${C} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${C} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}l.OptionsService=_},2660:function(b,l,c){var m=this&&this.__decorate||function(_,j,C,h){var p,f=arguments.length,g=f<3?j:h===null?h=Object.getOwnPropertyDescriptor(j,C):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,j,C,h);else for(var w=_.length-1;w>=0;w--)(p=_[w])&&(g=(f<3?p(g):f>3?p(j,C,g):p(j,C))||g);return f>3&&g&&Object.defineProperty(j,C,g),g},v=this&&this.__param||function(_,j){return function(C,h){j(C,h,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const d=c(2585);let y=l.OscLinkService=class{constructor(_){this._bufferService=_,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(_){const j=this._bufferService.buffer;if(_.id===void 0){const w=j.addMarker(j.ybase+j.y),R={data:_,id:this._nextId++,lines:[w]};return w.onDispose((()=>this._removeMarkerFromLink(R,w))),this._dataByLinkId.set(R.id,R),R.id}const C=_,h=this._getEntryIdKey(C),p=this._entriesWithId.get(h);if(p)return this.addLineToLink(p.id,j.ybase+j.y),p.id;const f=j.addMarker(j.ybase+j.y),g={id:this._nextId++,key:this._getEntryIdKey(C),data:C,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(g,f))),this._entriesWithId.set(g.key,g),this._dataByLinkId.set(g.id,g),g.id}addLineToLink(_,j){const C=this._dataByLinkId.get(_);if(C&&C.lines.every((h=>h.line!==j))){const h=this._bufferService.buffer.addMarker(j);C.lines.push(h),h.onDispose((()=>this._removeMarkerFromLink(C,h)))}}getLinkData(_){var j;return(j=this._dataByLinkId.get(_))==null?void 0:j.data}_getEntryIdKey(_){return`${_.id};;${_.uri}`}_removeMarkerFromLink(_,j){const C=_.lines.indexOf(j);C!==-1&&(_.lines.splice(C,1),_.lines.length===0&&(_.data.id!==void 0&&this._entriesWithId.delete(_.key),this._dataByLinkId.delete(_.id)))}};l.OscLinkService=y=m([v(0,d.IBufferService)],y)},8343:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const c="di$target",m="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(v){return v[m]||[]},l.createDecorator=function(v){if(l.serviceRegistry.has(v))return l.serviceRegistry.get(v);const d=function(y,_,j){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,h,p){h[c]===h?h[m].push({id:C,index:p}):(h[m]=[{id:C,index:p}],h[c]=h)})(d,y,j)};return d.toString=()=>v,l.serviceRegistry.set(v,d),d}},2585:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const m=c(8343);var v;l.IBufferService=(0,m.createDecorator)("BufferService"),l.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),l.ICoreService=(0,m.createDecorator)("CoreService"),l.ICharsetService=(0,m.createDecorator)("CharsetService"),l.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"})(v||(l.LogLevelEnum=v={})),l.ILogService=(0,m.createDecorator)("LogService"),l.IOptionsService=(0,m.createDecorator)("OptionsService"),l.IOscLinkService=(0,m.createDecorator)("OscLinkService"),l.IUnicodeService=(0,m.createDecorator)("UnicodeService"),l.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const m=c(8460),v=c(225);class d{static extractShouldJoin(_){return(1&_)!=0}static extractWidth(_){return _>>1&3}static extractCharKind(_){return _>>3}static createPropertyValue(_,j,C=!1){return(16777215&_)<<3|(3&j)<<1|(C?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;const _=new v.UnicodeV6;this.register(_),this._active=_.version,this._activeProvider=_}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(_){if(!this._providers[_])throw new Error(`unknown Unicode version "${_}"`);this._active=_,this._activeProvider=this._providers[_],this._onChange.fire(_)}register(_){this._providers[_.version]=_}wcwidth(_){return this._activeProvider.wcwidth(_)}getStringCellWidth(_){let j=0,C=0;const h=_.length;for(let p=0;p<h;++p){let f=_.charCodeAt(p);if(55296<=f&&f<=56319){if(++p>=h)return j+this.wcwidth(f);const R=_.charCodeAt(p);56320<=R&&R<=57343?f=1024*(f-55296)+R-56320+65536:j+=this.wcwidth(R)}const g=this.charProperties(f,C);let w=d.extractWidth(g);d.extractShouldJoin(g)&&(w-=d.extractWidth(C)),j+=w,C=g}return j}charProperties(_,j){return this._activeProvider.charProperties(_,j)}}l.UnicodeService=d}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b].call(c.exports,c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const l=u(9042),c=u(3236),m=u(844),v=u(5741),d=u(8285),y=u(7975),_=u(7090),j=["cols","rows"];class C extends m.Disposable{constructor(p){super(),this._core=this.register(new c.Terminal(p)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const f=w=>this._core.options[w],g=(w,R)=>{this._checkReadonlyOptions(w),this._core.options[w]=R};for(const w in this._core.options){const R={get:f.bind(this,w),set:g.bind(this,w)};Object.defineProperty(this._publicOptions,w,R)}}_checkReadonlyOptions(p){if(j.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const f in p)this._publicOptions[f]=p[f]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,f=!0){this._core.input(p,f)}resize(p,f){this._verifyIntegers(p,f),this._core.resize(p,f)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,f,g){this._verifyIntegers(p,f,g),this._core.select(p,f,g)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,f){this._verifyIntegers(p,f),this._core.selectLines(p,f)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,f){this._core.write(p,f)}writeln(p,f){this._core.write(p),this._core.write(`\r
`,f)}paste(p){this._core.paste(p)}refresh(p,f){this._verifyIntegers(p,f),this._core.refresh(p,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return l}_verifyIntegers(...p){for(const f of p)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const f of p)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}b.Terminal=C})(),S})()))})(Hd)),Hd.exports}var k2=C2(),Ud={exports:{}},Zg;function j2(){return Zg||(Zg=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.FitAddon=void 0,o.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const S=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(S._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,S=u._renderService.dimensions;if(S.css.cell.width===0||S.css.cell.height===0)return;const b=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(l.getPropertyValue("height")),m=Math.max(0,parseInt(l.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),y=m-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(y/S.css.cell.width)),rows:Math.max(1,Math.floor(d/S.css.cell.height))}}}})(),s})()))})(Ud)),Ud.exports}var E2=j2(),Vd={exports:{}},ex;function R2(){return ex||(ex=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={6:(b,l)=>{function c(v){try{const d=new URL(v),y=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(y.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(v,d,y,_={}){this._terminal=v,this._regex=d,this._handler=y,this._options=_}provideLinks(v,d){const y=m.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(y))}_addCallbacks(v){return v.map((d=>(d.leave=this._options.leave,d.hover=(y,_)=>{if(this._options.hover){const{range:j}=d;this._options.hover(y,_,j)}},d)))}};class m{static computeLink(d,y,_,j){const C=new RegExp(y.source,(y.flags||"")+"g"),[h,p]=m._getWindowedLineStrings(d-1,_),f=h.join("");let g;const w=[];for(;g=C.exec(f);){const R=g[0];if(!c(R))continue;const[A,z]=m._mapStrIdx(_,p,0,g.index),[E,B]=m._mapStrIdx(_,A,z,R.length);if(A===-1||z===-1||E===-1||B===-1)continue;const O={start:{x:z+1,y:A+1},end:{x:B,y:E+1}};w.push({range:O,text:R,activate:j})}return w}static _getWindowedLineStrings(d,y){let _,j=d,C=d,h=0,p="";const f=[];if(_=y.buffer.active.getLine(d)){const g=_.translateToString(!0);if(_.isWrapped&&g[0]!==" "){for(h=0;(_=y.buffer.active.getLine(--j))&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),_.isWrapped&&p.indexOf(" ")===-1););f.reverse()}for(f.push(g),h=0;(_=y.buffer.active.getLine(++C))&&_.isWrapped&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),p.indexOf(" ")===-1););}return[f,j]}static _mapStrIdx(d,y,_,j){const C=d.buffer.active,h=C.getNullCell();let p=_;for(;j;){const f=C.getLine(y);if(!f)return[-1,-1];for(let g=p;g<f.length;++g){f.getCell(g,h);const w=h.getChars();if(h.getWidth()&&(j-=w.length||1,g===f.length-1&&w==="")){const R=C.getLine(y+1);R&&R.isWrapped&&(R.getCell(0,h),h.getWidth()===2&&(j+=1))}if(j<0)return[y,g]}y++,p=0}return[y,p]}}l.LinkComputer=m}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b](c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.WebLinksAddon=void 0;const l=u(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function m(v,d){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}b.WebLinksAddon=class{constructor(v=m,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,y=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,y,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),S})()))})(Vd)),Vd.exports}var T2=R2();const A2={background:"#0f0f0f",foreground:"#e4e4e7",cursor:"#8B5CF6",cursorAccent:"#0f0f0f",selectionBackground:"#3b3d5e80",black:"#1a1b2e",red:"#f87171",green:"#4ade80",yellow:"#facc15",blue:"#60a5fa",magenta:"#c084fc",cyan:"#22d3ee",white:"#e4e4e7",brightBlack:"#4b5563",brightRed:"#fca5a5",brightGreen:"#86efac",brightYellow:"#fde68a",brightBlue:"#93c5fd",brightMagenta:"#d8b4fe",brightCyan:"#67e8f9",brightWhite:"#f9fafb"};function L2(t,{sessionId:i,projectId:s,onSessionCreated:o}){const u=L.useRef(null),S=L.useRef(null),b=L.useRef(null),l=L.useRef(null),[c,m]=L.useState(!1);L.useEffect(()=>{if(!t.current)return;const d=new k2.Terminal({theme:A2,fontFamily:'"JetBrains Mono", "Fira Code", "Cascadia Code", monospace',fontSize:15,lineHeight:1.3,cursorBlink:!0,cursorStyle:"bar",allowProposedApi:!0}),y=new E2.FitAddon;d.loadAddon(y),d.loadAddon(new T2.WebLinksAddon),d.open(t.current),y.fit(),u.current=d,S.current=y;const _=Ko();if(!_)return;const j=Io("/terminal",{auth:{token:_},transports:["websocket"]});b.current=j,j.on("connect",()=>{m(!0),i?j.emit("attach-session",{id:i,cols:d.cols||120,rows:d.rows||30,replay:!0},p=>{p&&p.error?C():l.current=i}):C()});function C(){j.emit("create-session",{cols:d.cols||120,rows:d.rows||30,projectId:s||""},p=>{if(p.error){console.error(p.error),u.current&&(u.current.write(`\r
\x1B[31m  `+p.error+`\x1B[0m\r
`),u.current.write(`\x1B[90m  Terminal features require a local environment with node-pty.\x1B[0m\r
`));return}l.current=p.id,j.emit("attach-session",{id:p.id,cols:d.cols||120,rows:d.rows||30}),o&&o(p.id)})}j.on("output",p=>{u.current&&u.current.write(p)}),j.on("session-exited",()=>{u.current&&u.current.write(`\r
\x1B[33m[Session ended. Close this tab or create a new one.]\x1B[0m\r
`)}),j.on("disconnect",()=>m(!1)),d.onData(p=>{b.current&&l.current&&b.current.emit("input",p)}),d.onResize(({cols:p,rows:f})=>{b.current&&b.current.emit("resize",{cols:p,rows:f})});const h=new ResizeObserver(()=>{try{y.fit()}catch{}});return h.observe(t.current),()=>{h.disconnect(),b.current&&(b.current.emit("detach-session"),b.current.disconnect(),b.current=null),l.current=null,d.dispose(),u.current=null,S.current=null}},[t,i,s]);const v=L.useCallback(d=>{b.current&&l.current&&b.current.emit("input",d)},[]);return{connected:c,sendInput:v}}const Lu=L.forwardRef(function({sessionId:i,projectId:s,onSessionCreated:o},u){const S=L.useRef(null),{connected:b,sendInput:l}=L2(S,{sessionId:i,projectId:s,onSessionCreated:o});return L.useImperativeHandle(u,()=>({sendInput:l}),[l]),e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",background:"#050505"},children:[e.jsx("div",{ref:S,style:{width:"100%",height:"100%"}}),!b&&e.jsx("div",{style:{position:"absolute",bottom:"8px",right:"8px",fontSize:"10px",color:"#52525B",fontFamily:"monospace"},children:"Connecting..."})]})}),kr={bg:"#0f0f0f",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e"};function z2(){const[t,i]=L.useState(!1),[s,o]=L.useState(!1),[u,S]=L.useState(""),b=L.useRef(null),l=Ut(),c=async()=>{i(!0),S("");try{const m=await le("/api/claude-auth/verify",{method:"POST"});if(o(m.connected),m.connected){const v=qo();v&&ph({...v,claudeConnected:!0})}else S("Claude is not connected yet. Complete the OAuth flow in the terminal first.")}catch(m){S(m.message)}finally{i(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#050505",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("div",{style:{width:"680px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"32px 32px 0",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:s?kr.success:kr.violet},children:s?e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsx("h1",{style:{fontSize:"22px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"6px",color:kr.tp},children:s?"Claude Connected!":"Connect Claude"}),e.jsx("p",{style:{fontSize:"13px",color:kr.ts,lineHeight:1.5,maxWidth:"480px",margin:"0 auto"},children:s?"Your Claude account is connected and ready to use. You can now create projects and generate iterations.":"Authenticate with Claude to enable AI-powered agent testing. Follow the steps below."})]}),s?e.jsxs("div",{style:{padding:"24px 32px 32px"},children:[e.jsx("div",{style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"8px",padding:"16px",marginBottom:"20px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"13px",color:kr.success,fontWeight:"500"},children:"Claude OAuth authentication successful"})}),e.jsx("button",{onClick:()=>l("/"),style:{width:"100%",padding:"12px",background:kr.violet,color:"#fff",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Continue to Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"20px 32px"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{num:"1",text:"Type 'claude' in the terminal below and press Enter"},{num:"2",text:"A URL will appear  open it in your browser"},{num:"3",text:"Sign in and authorize the connection"},{num:"4",text:"Come back here and click 'Check Connection'"}].map(m=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",background:kr.violetM,color:kr.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"700",flexShrink:0},children:m.num}),e.jsx("span",{style:{fontSize:"12px",color:kr.ts},children:m.text})]},m.num))})}),e.jsx("div",{style:{margin:"0 16px",height:"280px",borderRadius:"8px",overflow:"hidden",border:`1px solid ${kr.borderS}`,background:kr.bg},children:e.jsx(Lu,{ref:b,projectId:"",onSessionCreated:()=>{}})}),e.jsxs("div",{style:{padding:"20px 32px 28px"},children:[u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"12px",borderRadius:"4px",background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.25)",color:"#f59e0b",fontSize:"12px"},children:u}),e.jsx("button",{onClick:c,disabled:t,style:{width:"100%",padding:"10px",background:kr.tp,color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:t?"default":"pointer",opacity:t?.7:1,marginBottom:"12px"},children:t?"Checking...":"Check Connection"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("span",{onClick:()=>l("/"),style:{fontSize:"12px",color:kr.tm,cursor:"pointer",textDecoration:"none"},onMouseEnter:m=>m.target.style.color=kr.ts,onMouseLeave:m=>m.target.style.color=kr.tm,children:"Skip for now"})})]})]})]})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=(...t)=>t.filter((i,s,o)=>!!i&&i.trim()!==""&&o.indexOf(i)===s).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,s,o)=>o?o.toUpperCase():s.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=t=>{const i=D2(t);return i.charAt(0).toUpperCase()+i.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=t=>{for(const i in t)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=L.forwardRef(({color:t="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:S,iconNode:b,...l},c)=>L.createElement("svg",{ref:c,...M2,width:i,height:i,stroke:t,strokeWidth:o?Number(s)*24/Number(i):s,className:y0("lucide",u),...!S&&!B2(l)&&{"aria-hidden":"true"},...l},[...b.map(([m,v])=>L.createElement(m,v)),...Array.isArray(S)?S:[S]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,i)=>{const s=L.forwardRef(({className:o,...u},S)=>L.createElement(P2,{ref:S,iconNode:i,className:y0(`lucide-${I2(tx(t))}`,`lucide-${t}`,o),...u}));return s.displayName=tx(t),s};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],v0=Le("activity",O2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],b0=Le("arrow-down",$2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vh=Le("arrow-left",F2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vn=Le("arrow-right",W2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],H2=Le("arrow-up-down",N2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],V2=Le("arrow-up-right",U2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],_0=Le("arrow-up",K2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],xn=Le("bot",q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rx=Le("calendar",G2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],X2=Le("camera",Y2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],bh=Le("chart-column",J2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Z2=Le("chart-pie",Q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sr=Le("check",eS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sn=Le("chevron-down",tS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Go=Le("chevron-left",rS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cr=Le("chevron-right",iS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_h=Le("chevron-up",nS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ei=Le("circle-alert",sS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cl=Le("circle-check-big",oS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lS=Le("circle-check",aS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dS=Le("circle-x",cS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yo=Le("clock",uS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ix=Le("cloud-upload",hS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Sh=Le("code",pS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wl=Le("copy",fS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Xn=Le("cpu",gS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mS=Le("database",xS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bn=Le("download",yS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Do=Le("external-link",vS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$s=Le("eye",bS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],zu=Le("file-code",_S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],wS=Le("file-plus",SS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],kS=Le("file-search",CS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ls=Le("file-text",jS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],RS=Le("file",ES);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],AS=Le("folder-plus",TS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],nx=Le("folder-tree",LS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],IS=Le("folder",zS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],MS=Le("funnel",DS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],wh=Le("git-branch",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Es=Le("globe",PS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$S=Le("grip-vertical",OS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],WS=Le("hash",FS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],sx=Le("history",NS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],US=Le("image",HS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],KS=Le("info",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ox=Le("key",qS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zs=Le("layers",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],S0=Le("layout-grid",YS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Kd=Le("lightbulb",XS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Iu=Le("link",JS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],ko=Le("linkedin",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Du=Le("list",ZS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kn=Le("loader-circle",ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],rw=Le("maximize-2",tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ax=Le("message-circle",iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],w0=Le("message-square",nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M5 12h14",key:"1ays0h"}]],ow=Le("minus",sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],C0=Le("monitor",aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Wi=Le("package",lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dw=Le("palette",cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],hw=Le("panel-right",uw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Il=Le("panels-top-left",pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],gw=Le("pause",fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xo=Le("pen-line",xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],qd=Le("pen-tool",mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Mu=Le("pen",yw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Gd=Le("pencil",vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ql=Le("play",bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],er=Le("plus",_w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],k0=Le("refresh-ccw",Sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fi=Le("refresh-cw",ww);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],kw=Le("repeat",Cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Yd=Le("rocket",jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Rw=Le("rotate-ccw",Ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gl=Le("save",Tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Is=Le("search",Aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ch=Le("send",Lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j0=Le("settings",zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],E0=Le("share-2",Iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Yl=Le("shield",Dw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],R0=Le("smartphone",Mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ht=Le("sparkles",Bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ow=Le("square-check-big",Pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_n=Le("star",$w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ww=Le("table",Fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],T0=Le("tablet",Nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Uw=Le("tag",Hw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],A0=Le("terminal",Vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Or=Le("trash-2",Kw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lx=Le("trash",qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Yw=Le("trending-up",Gw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cx=Le("triangle-alert",Xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Lo=Le("type",Jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],L0=Le("upload",Qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],dx=Le("user-plus",Zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jn=Le("user",eC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rs=Le("users",tC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Cl=Le("wand-sparkles",rC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],z0=Le("wrench",iC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],St=Le("x",nC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Vr=Le("zap",sC),kh=L.createContext({});function jh(t){const i=L.useRef(null);return i.current===null&&(i.current=t()),i.current}const I0=typeof window<"u",D0=I0?L.useLayoutEffect:L.useEffect,Xl=L.createContext(null);function Eh(t,i){t.indexOf(i)===-1&&t.push(i)}function Dl(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}const Ri=(t,i,s)=>s>i?i:s<t?t:s;let Rh=()=>{};const Ni={},M0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function B0(t){return typeof t=="object"&&t!==null}const P0=t=>/^0[^.\s]+$/u.test(t);function Th(t){let i;return()=>(i===void 0&&(i=t()),i)}const ri=t=>t,oC=(t,i)=>s=>i(t(s)),Jo=(...t)=>t.reduce(oC),Wo=(t,i,s)=>{const o=i-t;return o===0?1:(s-t)/o};class Ah{constructor(){this.subscriptions=[]}add(i){return Eh(this.subscriptions,i),()=>Dl(this.subscriptions,i)}notify(i,s,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](i,s,o);else for(let S=0;S<u;S++){const b=this.subscriptions[S];b&&b(i,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=t=>t*1e3,ti=t=>t/1e3;function O0(t,i){return i?t*(1e3/i):0}const $0=(t,i,s)=>(((1-3*s+3*i)*t+(3*s-6*i))*t+3*i)*t,aC=1e-7,lC=12;function cC(t,i,s,o,u){let S,b,l=0;do b=i+(s-i)/2,S=$0(b,o,u)-t,S>0?s=b:i=b;while(Math.abs(S)>aC&&++l<lC);return b}function Qo(t,i,s,o){if(t===i&&s===o)return ri;const u=S=>cC(S,0,1,t,s);return S=>S===0||S===1?S:$0(u(S),i,o)}const F0=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,W0=t=>i=>1-t(1-i),N0=Qo(.33,1.53,.69,.99),Lh=W0(N0),H0=F0(Lh),U0=t=>(t*=2)<1?.5*Lh(t):.5*(2-Math.pow(2,-10*(t-1))),zh=t=>1-Math.sin(Math.acos(t)),V0=W0(zh),K0=F0(zh),dC=Qo(.42,0,1,1),uC=Qo(0,0,.58,1),q0=Qo(.42,0,.58,1),hC=t=>Array.isArray(t)&&typeof t[0]!="number",G0=t=>Array.isArray(t)&&typeof t[0]=="number",pC={linear:ri,easeIn:dC,easeInOut:q0,easeOut:uC,circIn:zh,circInOut:K0,circOut:V0,backIn:Lh,backInOut:H0,backOut:N0,anticipate:U0},fC=t=>typeof t=="string",ux=t=>{if(G0(t)){Rh(t.length===4);const[i,s,o,u]=t;return Qo(i,s,o,u)}else if(fC(t))return pC[t];return t},dl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gC(t,i){let s=new Set,o=new Set,u=!1,S=!1;const b=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(v){b.has(v)&&(m.schedule(v),t()),v(l)}const m={schedule:(v,d=!1,y=!1)=>{const j=y&&u?s:o;return d&&b.add(v),j.has(v)||j.add(v),v},cancel:v=>{o.delete(v),b.delete(v)},process:v=>{if(l=v,u){S=!0;return}u=!0,[s,o]=[o,s],s.forEach(c),s.clear(),u=!1,S&&(S=!1,m.process(v))}};return m}const xC=40;function Y0(t,i){let s=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},S=()=>s=!0,b=dl.reduce((g,w)=>(g[w]=gC(S),g),{}),{setup:l,read:c,resolveKeyframes:m,preUpdate:v,update:d,preRender:y,render:_,postRender:j}=b,C=()=>{const g=Ni.useManualTiming?u.timestamp:performance.now();s=!1,Ni.useManualTiming||(u.delta=o?1e3/60:Math.max(Math.min(g-u.timestamp,xC),1)),u.timestamp=g,u.isProcessing=!0,l.process(u),c.process(u),m.process(u),v.process(u),d.process(u),y.process(u),_.process(u),j.process(u),u.isProcessing=!1,s&&i&&(o=!1,t(C))},h=()=>{s=!0,o=!0,u.isProcessing||t(C)};return{schedule:dl.reduce((g,w)=>{const R=b[w];return g[w]=(A,z=!1,E=!1)=>(s||h(),R.schedule(A,z,E)),g},{}),cancel:g=>{for(let w=0;w<dl.length;w++)b[dl[w]].cancel(g)},state:u,steps:b}}const{schedule:Rt,cancel:wn,state:hr,steps:Xd}=Y0(typeof requestAnimationFrame<"u"?requestAnimationFrame:ri,!0);let kl;function mC(){kl=void 0}const jr={now:()=>(kl===void 0&&jr.set(hr.isProcessing||Ni.useManualTiming?hr.timestamp:performance.now()),kl),set:t=>{kl=t,queueMicrotask(mC)}},X0=t=>i=>typeof i=="string"&&i.startsWith(t),J0=X0("--"),yC=X0("var(--"),Ih=t=>yC(t)?vC.test(t.split("/*")[0].trim()):!1,vC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function hx(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Fs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},No={...Fs,transform:t=>Ri(0,1,t)},ul={...Fs,default:1},Mo=t=>Math.round(t*1e5)/1e5,Dh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bC(t){return t==null}const _C=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Mh=(t,i)=>s=>!!(typeof s=="string"&&_C.test(s)&&s.startsWith(t)||i&&!bC(s)&&Object.prototype.hasOwnProperty.call(s,i)),Q0=(t,i,s)=>o=>{if(typeof o!="string")return o;const[u,S,b,l]=o.match(Dh);return{[t]:parseFloat(u),[i]:parseFloat(S),[s]:parseFloat(b),alpha:l!==void 0?parseFloat(l):1}},SC=t=>Ri(0,255,t),Jd={...Fs,transform:t=>Math.round(SC(t))},qn={test:Mh("rgb","red"),parse:Q0("red","green","blue"),transform:({red:t,green:i,blue:s,alpha:o=1})=>"rgba("+Jd.transform(t)+", "+Jd.transform(i)+", "+Jd.transform(s)+", "+Mo(No.transform(o))+")"};function wC(t){let i="",s="",o="",u="";return t.length>5?(i=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),u=t.substring(7,9)):(i=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),u=t.substring(4,5),i+=i,s+=s,o+=o,u+=u),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const Bu={test:Mh("#"),parse:wC,transform:qn.transform},Zo=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),pn=Zo("deg"),ki=Zo("%"),Ze=Zo("px"),CC=Zo("vh"),kC=Zo("vw"),px={...ki,parse:t=>ki.parse(t)/100,transform:t=>ki.transform(t*100)},Ss={test:Mh("hsl","hue"),parse:Q0("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+ki.transform(Mo(i))+", "+ki.transform(Mo(s))+", "+Mo(No.transform(o))+")"},Qt={test:t=>qn.test(t)||Bu.test(t)||Ss.test(t),parse:t=>qn.test(t)?qn.parse(t):Ss.test(t)?Ss.parse(t):Bu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?qn.transform(t):Ss.transform(t),getAnimatableNone:t=>{const i=Qt.parse(t);return i.alpha=0,Qt.transform(i)}},jC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EC(t){var i,s;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Dh))==null?void 0:i.length)||0)+(((s=t.match(jC))==null?void 0:s.length)||0)>0}const Z0="number",ey="color",RC="var",TC="var(",fx="${}",AC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ho(t){const i=t.toString(),s=[],o={color:[],number:[],var:[]},u=[];let S=0;const l=i.replace(AC,c=>(Qt.test(c)?(o.color.push(S),u.push(ey),s.push(Qt.parse(c))):c.startsWith(TC)?(o.var.push(S),u.push(RC),s.push(c)):(o.number.push(S),u.push(Z0),s.push(parseFloat(c))),++S,fx)).split(fx);return{values:s,split:l,indexes:o,types:u}}function ty(t){return Ho(t).values}function ry(t){const{split:i,types:s}=Ho(t),o=i.length;return u=>{let S="";for(let b=0;b<o;b++)if(S+=i[b],u[b]!==void 0){const l=s[b];l===Z0?S+=Mo(u[b]):l===ey?S+=Qt.transform(u[b]):S+=u[b]}return S}}const LC=t=>typeof t=="number"?0:Qt.test(t)?Qt.getAnimatableNone(t):t;function zC(t){const i=ty(t);return ry(t)(i.map(LC))}const Cn={test:EC,parse:ty,createTransformer:ry,getAnimatableNone:zC};function Qd(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(i-t)*6*s:s<1/2?i:s<2/3?t+(i-t)*(2/3-s)*6:t}function IC({hue:t,saturation:i,lightness:s,alpha:o}){t/=360,i/=100,s/=100;let u=0,S=0,b=0;if(!i)u=S=b=s;else{const l=s<.5?s*(1+i):s+i-s*i,c=2*s-l;u=Qd(c,l,t+1/3),S=Qd(c,l,t),b=Qd(c,l,t-1/3)}return{red:Math.round(u*255),green:Math.round(S*255),blue:Math.round(b*255),alpha:o}}function Ml(t,i){return s=>s>0?i:t}const Pt=(t,i,s)=>t+(i-t)*s,Zd=(t,i,s)=>{const o=t*t,u=s*(i*i-o)+o;return u<0?0:Math.sqrt(u)},DC=[Bu,qn,Ss],MC=t=>DC.find(i=>i.test(t));function gx(t){const i=MC(t);if(!i)return!1;let s=i.parse(t);return i===Ss&&(s=IC(s)),s}const xx=(t,i)=>{const s=gx(t),o=gx(i);if(!s||!o)return Ml(t,i);const u={...s};return S=>(u.red=Zd(s.red,o.red,S),u.green=Zd(s.green,o.green,S),u.blue=Zd(s.blue,o.blue,S),u.alpha=Pt(s.alpha,o.alpha,S),qn.transform(u))},Pu=new Set(["none","hidden"]);function BC(t,i){return Pu.has(t)?s=>s<=0?t:i:s=>s>=1?i:t}function PC(t,i){return s=>Pt(t,i,s)}function Bh(t){return typeof t=="number"?PC:typeof t=="string"?Ih(t)?Ml:Qt.test(t)?xx:FC:Array.isArray(t)?iy:typeof t=="object"?Qt.test(t)?xx:OC:Ml}function iy(t,i){const s=[...t],o=s.length,u=t.map((S,b)=>Bh(S)(S,i[b]));return S=>{for(let b=0;b<o;b++)s[b]=u[b](S);return s}}function OC(t,i){const s={...t,...i},o={};for(const u in s)t[u]!==void 0&&i[u]!==void 0&&(o[u]=Bh(t[u])(t[u],i[u]));return u=>{for(const S in o)s[S]=o[S](u);return s}}function $C(t,i){const s=[],o={color:0,var:0,number:0};for(let u=0;u<i.values.length;u++){const S=i.types[u],b=t.indexes[S][o[S]],l=t.values[b]??0;s[u]=l,o[S]++}return s}const FC=(t,i)=>{const s=Cn.createTransformer(i),o=Ho(t),u=Ho(i);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?Pu.has(t)&&!u.values.length||Pu.has(i)&&!o.values.length?BC(t,i):Jo(iy($C(o,u),u.values),s):Ml(t,i)};function ny(t,i,s){return typeof t=="number"&&typeof i=="number"&&typeof s=="number"?Pt(t,i,s):Bh(t)(t,i)}const WC=t=>{const i=({timestamp:s})=>t(s);return{start:(s=!0)=>Rt.update(i,s),stop:()=>wn(i),now:()=>hr.isProcessing?hr.timestamp:jr.now()}},sy=(t,i,s=10)=>{let o="";const u=Math.max(Math.round(i/s),2);for(let S=0;S<u;S++)o+=Math.round(t(S/(u-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Bl=2e4;function Ph(t){let i=0;const s=50;let o=t.next(i);for(;!o.done&&i<Bl;)i+=s,o=t.next(i);return i>=Bl?1/0:i}function NC(t,i=100,s){const o=s({...t,keyframes:[0,i]}),u=Math.min(Ph(o),Bl);return{type:"keyframes",ease:S=>o.next(u*S).value/i,duration:ti(u)}}const HC=5;function oy(t,i,s){const o=Math.max(i-HC,0);return O0(s-t(o),i-o)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},eu=.001;function UC({duration:t=Nt.duration,bounce:i=Nt.bounce,velocity:s=Nt.velocity,mass:o=Nt.mass}){let u,S,b=1-i;b=Ri(Nt.minDamping,Nt.maxDamping,b),t=Ri(Nt.minDuration,Nt.maxDuration,ti(t)),b<1?(u=m=>{const v=m*b,d=v*t,y=v-s,_=Ou(m,b),j=Math.exp(-d);return eu-y/_*j},S=m=>{const d=m*b*t,y=d*s+s,_=Math.pow(b,2)*Math.pow(m,2)*t,j=Math.exp(-d),C=Ou(Math.pow(m,2),b);return(-u(m)+eu>0?-1:1)*((y-_)*j)/C}):(u=m=>{const v=Math.exp(-m*t),d=(m-s)*t+1;return-eu+v*d},S=m=>{const v=Math.exp(-m*t),d=(s-m)*(t*t);return v*d});const l=5/t,c=KC(u,S,l);if(t=xi(t),isNaN(c))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:t};{const m=Math.pow(c,2)*o;return{stiffness:m,damping:b*2*Math.sqrt(o*m),duration:t}}}const VC=12;function KC(t,i,s){let o=s;for(let u=1;u<VC;u++)o=o-t(o)/i(o);return o}function Ou(t,i){return t*Math.sqrt(1-i*i)}const qC=["duration","bounce"],GC=["stiffness","damping","mass"];function mx(t,i){return i.some(s=>t[s]!==void 0)}function YC(t){let i={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...t};if(!mx(t,GC)&&mx(t,qC))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),u=o*o,S=2*Ri(.05,1,1-(t.bounce||0))*Math.sqrt(u);i={...i,mass:Nt.mass,stiffness:u,damping:S}}else{const s=UC(t);i={...i,...s,mass:Nt.mass},i.isResolvedFromDuration=!0}return i}function Pl(t=Nt.visualDuration,i=Nt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:o,restDelta:u}=s;const S=s.keyframes[0],b=s.keyframes[s.keyframes.length-1],l={done:!1,value:S},{stiffness:c,damping:m,mass:v,duration:d,velocity:y,isResolvedFromDuration:_}=YC({...s,velocity:-ti(s.velocity||0)}),j=y||0,C=m/(2*Math.sqrt(c*v)),h=b-S,p=ti(Math.sqrt(c/v)),f=Math.abs(h)<5;o||(o=f?Nt.restSpeed.granular:Nt.restSpeed.default),u||(u=f?Nt.restDelta.granular:Nt.restDelta.default);let g;if(C<1){const R=Ou(p,C);g=A=>{const z=Math.exp(-C*p*A);return b-z*((j+C*p*h)/R*Math.sin(R*A)+h*Math.cos(R*A))}}else if(C===1)g=R=>b-Math.exp(-p*R)*(h+(j+p*h)*R);else{const R=p*Math.sqrt(C*C-1);g=A=>{const z=Math.exp(-C*p*A),E=Math.min(R*A,300);return b-z*((j+C*p*h)*Math.sinh(E)+R*h*Math.cosh(E))/R}}const w={calculatedDuration:_&&d||null,next:R=>{const A=g(R);if(_)l.done=R>=d;else{let z=R===0?j:0;C<1&&(z=R===0?xi(j):oy(g,R,A));const E=Math.abs(z)<=o,B=Math.abs(b-A)<=u;l.done=E&&B}return l.value=l.done?b:A,l},toString:()=>{const R=Math.min(Ph(w),Bl),A=sy(z=>w.next(R*z).value,R,30);return R+"ms "+A},toTransition:()=>{}};return w}Pl.applyToOptions=t=>{const i=NC(t,100,Pl);return t.ease=i.ease,t.duration=xi(i.duration),t.type="keyframes",t};function $u({keyframes:t,velocity:i=0,power:s=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:S=500,modifyTarget:b,min:l,max:c,restDelta:m=.5,restSpeed:v}){const d=t[0],y={done:!1,value:d},_=E=>l!==void 0&&E<l||c!==void 0&&E>c,j=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let C=s*i;const h=d+C,p=b===void 0?h:b(h);p!==h&&(C=p-d);const f=E=>-C*Math.exp(-E/o),g=E=>p+f(E),w=E=>{const B=f(E),O=g(E);y.done=Math.abs(B)<=m,y.value=y.done?p:O};let R,A;const z=E=>{_(y.value)&&(R=E,A=Pl({keyframes:[y.value,j(y.value)],velocity:oy(g,E,y.value),damping:u,stiffness:S,restDelta:m,restSpeed:v}))};return z(0),{calculatedDuration:null,next:E=>{let B=!1;return!A&&R===void 0&&(B=!0,w(E),z(E)),R!==void 0&&E>=R?A.next(E-R):(!B&&w(E),y)}}}function XC(t,i,s){const o=[],u=s||Ni.mix||ny,S=t.length-1;for(let b=0;b<S;b++){let l=u(t[b],t[b+1]);if(i){const c=Array.isArray(i)?i[b]||ri:i;l=Jo(c,l)}o.push(l)}return o}function JC(t,i,{clamp:s=!0,ease:o,mixer:u}={}){const S=t.length;if(Rh(S===i.length),S===1)return()=>i[0];if(S===2&&i[0]===i[1])return()=>i[1];const b=t[0]===t[1];t[0]>t[S-1]&&(t=[...t].reverse(),i=[...i].reverse());const l=XC(i,o,u),c=l.length,m=v=>{if(b&&v<t[0])return i[0];let d=0;if(c>1)for(;d<t.length-2&&!(v<t[d+1]);d++);const y=Wo(t[d],t[d+1],v);return l[d](y)};return s?v=>m(Ri(t[0],t[S-1],v)):m}function QC(t,i){const s=t[t.length-1];for(let o=1;o<=i;o++){const u=Wo(0,i,o);t.push(Pt(s,1,u))}}function ZC(t){const i=[0];return QC(i,t.length-1),i}function ek(t,i){return t.map(s=>s*i)}function tk(t,i){return t.map(()=>i||q0).splice(0,t.length-1)}function Bo({duration:t=300,keyframes:i,times:s,ease:o="easeInOut"}){const u=hC(o)?o.map(ux):ux(o),S={done:!1,value:i[0]},b=ek(s&&s.length===i.length?s:ZC(i),t),l=JC(b,i,{ease:Array.isArray(u)?u:tk(i,u)});return{calculatedDuration:t,next:c=>(S.value=l(c),S.done=c>=t,S)}}const rk=t=>t!==null;function Oh(t,{repeat:i,repeatType:s="loop"},o,u=1){const S=t.filter(rk),l=u<0||i&&s!=="loop"&&i%2===1?0:S.length-1;return!l||o===void 0?S[l]:o}const ik={decay:$u,inertia:$u,tween:Bo,keyframes:Bo,spring:Pl};function ay(t){typeof t.type=="string"&&(t.type=ik[t.type])}class $h{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,s){return this.finished.then(i,s)}}const nk=t=>t/100;class Fh extends $h{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,u;const{motionValue:s}=this.options;s&&s.updatedAt!==jr.now()&&this.tick(jr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(o=this.options).onStop)==null||u.call(o))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;ay(i);const{type:s=Bo,repeat:o=0,repeatDelay:u=0,repeatType:S,velocity:b=0}=i;let{keyframes:l}=i;const c=s||Bo;c!==Bo&&typeof l[0]!="number"&&(this.mixKeyframes=Jo(nk,ny(l[0],l[1])),l=[0,100]);const m=c({...i,keyframes:l});S==="mirror"&&(this.mirroredGenerator=c({...i,keyframes:[...l].reverse(),velocity:-b})),m.calculatedDuration===null&&(m.calculatedDuration=Ph(m));const{calculatedDuration:v}=m;this.calculatedDuration=v,this.resolvedDuration=v+u,this.totalDuration=this.resolvedDuration*(o+1)-u,this.generator=m}updateTime(i){const s=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(i,s=!1){const{generator:o,totalDuration:u,mixKeyframes:S,mirroredGenerator:b,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return o.next(0);const{delay:m=0,keyframes:v,repeat:d,repeatType:y,repeatDelay:_,type:j,onUpdate:C,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-u/this.speed,this.startTime)),s?this.currentTime=i:this.updateTime(i);const p=this.currentTime-m*(this.playbackSpeed>=0?1:-1),f=this.playbackSpeed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let g=this.currentTime,w=o;if(d){const E=Math.min(this.currentTime,u)/l;let B=Math.floor(E),O=E%1;!O&&E>=1&&(O=1),O===1&&B--,B=Math.min(B,d+1),!!(B%2)&&(y==="reverse"?(O=1-O,_&&(O-=_/l)):y==="mirror"&&(w=b)),g=Ri(0,1,O)*l}const R=f?{done:!1,value:v[0]}:w.next(g);S&&(R.value=S(R.value));let{done:A}=R;!f&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return z&&j!==$u&&(R.value=Oh(v,this.options,h,this.speed)),C&&C(R.value),z&&this.finish(),R}then(i,s){return this.finished.then(i,s)}get duration(){return ti(this.calculatedDuration)}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+ti(i)}get time(){return ti(this.currentTime)}set time(i){var s;i=xi(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(jr.now());const s=this.playbackSpeed!==i;this.playbackSpeed=i,s&&(this.time=ti(this.currentTime))}play(){var u,S;if(this.isStopped)return;const{driver:i=WC,startTime:s}=this.options;this.driver||(this.driver=i(b=>this.tick(b))),(S=(u=this.options).onPlay)==null||S.call(u);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(i=this.options).onComplete)==null||s.call(i)}cancel(){var i,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(i=this.options).onCancel)==null||s.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),i.observe(this)}}function sk(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const Gn=t=>t*180/Math.PI,Fu=t=>{const i=Gn(Math.atan2(t[1],t[0]));return Wu(i)},ok={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Fu,rotateZ:Fu,skewX:t=>Gn(Math.atan(t[1])),skewY:t=>Gn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Wu=t=>(t=t%360,t<0&&(t+=360),t),yx=Fu,vx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),bx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ak={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vx,scaleY:bx,scale:t=>(vx(t)+bx(t))/2,rotateX:t=>Wu(Gn(Math.atan2(t[6],t[5]))),rotateY:t=>Wu(Gn(Math.atan2(-t[2],t[0]))),rotateZ:yx,rotate:yx,skewX:t=>Gn(Math.atan(t[4])),skewY:t=>Gn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nu(t){return t.includes("scale")?1:0}function Hu(t,i){if(!t||t==="none")return Nu(i);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,u;if(s)o=ak,u=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=ok,u=l}if(!u)return Nu(i);const S=o[i],b=u[1].split(",").map(ck);return typeof S=="function"?S(b):b[S]}const lk=(t,i)=>{const{transform:s="none"}=getComputedStyle(t);return Hu(s,i)};function ck(t){return parseFloat(t.trim())}const Ws=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ns=new Set(Ws),_x=t=>t===Fs||t===Ze,dk=new Set(["x","y","z"]),uk=Ws.filter(t=>!dk.has(t));function hk(t){const i=[];return uk.forEach(s=>{const o=t.getValue(s);o!==void 0&&(i.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),i}const mn={width:({x:t},{paddingLeft:i="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),height:({y:t},{paddingTop:i="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>Hu(i,"x"),y:(t,{transform:i})=>Hu(i,"y")};mn.translateX=mn.x;mn.translateY=mn.y;const Yn=new Set;let Uu=!1,Vu=!1,Ku=!1;function ly(){if(Vu){const t=Array.from(Yn).filter(o=>o.needsMeasurement),i=new Set(t.map(o=>o.element)),s=new Map;i.forEach(o=>{const u=hk(o);u.length&&(s.set(o,u),o.render())}),t.forEach(o=>o.measureInitialState()),i.forEach(o=>{o.render();const u=s.get(o);u&&u.forEach(([S,b])=>{var l;(l=o.getValue(S))==null||l.set(b)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}Vu=!1,Uu=!1,Yn.forEach(t=>t.complete(Ku)),Yn.clear()}function cy(){Yn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Vu=!0)})}function pk(){Ku=!0,cy(),ly(),Ku=!1}class Wh{constructor(i,s,o,u,S,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=s,this.name=o,this.motionValue=u,this.element=S,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(Yn.add(this),Uu||(Uu=!0,Rt.read(cy),Rt.resolveKeyframes(ly))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:s,element:o,motionValue:u}=this;if(i[0]===null){const S=u==null?void 0:u.get(),b=i[i.length-1];if(S!==void 0)i[0]=S;else if(o&&s){const l=o.readValue(s,b);l!=null&&(i[0]=l)}i[0]===void 0&&(i[0]=b),u&&S===void 0&&u.set(i[0])}sk(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),Yn.delete(this)}cancel(){this.state==="scheduled"&&(Yn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fk=t=>t.startsWith("--");function gk(t,i,s){fk(i)?t.style.setProperty(i,s):t.style[i]=s}const xk=Th(()=>window.ScrollTimeline!==void 0),mk={};function yk(t,i){const s=Th(t);return()=>mk[i]??s()}const dy=yk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zo=([t,i,s,o])=>`cubic-bezier(${t}, ${i}, ${s}, ${o})`,Sx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zo([0,.65,.55,1]),circOut:zo([.55,0,1,.45]),backIn:zo([.31,.01,.66,-.59]),backOut:zo([.33,1.53,.69,.99])};function uy(t,i){if(t)return typeof t=="function"?dy()?sy(t,i):"ease-out":G0(t)?zo(t):Array.isArray(t)?t.map(s=>uy(s,i)||Sx.easeOut):Sx[t]}function vk(t,i,s,{delay:o=0,duration:u=300,repeat:S=0,repeatType:b="loop",ease:l="easeOut",times:c}={},m=void 0){const v={[i]:s};c&&(v.offset=c);const d=uy(l,u);Array.isArray(d)&&(v.easing=d);const y={delay:o,duration:u,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:S+1,direction:b==="reverse"?"alternate":"normal"};return m&&(y.pseudoElement=m),t.animate(v,y)}function hy(t){return typeof t=="function"&&"applyToOptions"in t}function bk({type:t,...i}){return hy(t)&&dy()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class py extends $h{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!i)return;const{element:s,name:o,keyframes:u,pseudoElement:S,allowFlatten:b=!1,finalKeyframe:l,onComplete:c}=i;this.isPseudoElement=!!S,this.allowFlatten=b,this.options=i,Rh(typeof i.type!="string");const m=bk(i);this.animation=vk(s,o,u,m,S),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const v=Oh(u,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(v):gk(s,o,v),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,s;(s=(i=this.animation).finish)==null||s.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,o,u;const i=(s=this.options)==null?void 0:s.element;!this.isPseudoElement&&(i!=null&&i.isConnected)&&((u=(o=this.animation).commitStyles)==null||u.call(o))}get duration(){var s,o;const i=((o=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:o.call(s).duration)||0;return ti(Number(i))}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+ti(i)}get time(){return ti(Number(this.animation.currentTime)||0)}set time(i){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xi(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(i){this.manualStartTime=this.animation.startTime=i}attachTimeline({timeline:i,observe:s}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&xk()?(this.animation.timeline=i,ri):s(this)}}const fy={anticipate:U0,backInOut:H0,circInOut:K0};function _k(t){return t in fy}function Sk(t){typeof t.ease=="string"&&_k(t.ease)&&(t.ease=fy[t.ease])}const tu=10;class wk extends py{constructor(i){Sk(i),ay(i),super(i),i.startTime!==void 0&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:s,onUpdate:o,onComplete:u,element:S,...b}=this.options;if(!s)return;if(i!==void 0){s.set(i);return}const l=new Fh({...b,autoplay:!1}),c=Math.max(tu,jr.now()-this.startTime),m=Ri(0,tu,c-tu);s.setWithVelocity(l.sample(Math.max(0,c-m)).value,l.sample(c).value,m),l.stop()}}const wx=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cn.test(t)||t==="0")&&!t.startsWith("url("));function Ck(t){const i=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==i)return!0}function kk(t,i,s,o){const u=t[0];if(u===null)return!1;if(i==="display"||i==="visibility")return!0;const S=t[t.length-1],b=wx(u,i),l=wx(S,i);return!b||!l?!1:Ck(t)||(s==="spring"||hy(s))&&o}function qu(t){t.duration=0,t.type="keyframes"}const jk=new Set(["opacity","clipPath","filter","transform"]),Ek=Th(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rk(t){var v;const{motionValue:i,name:s,repeatDelay:o,repeatType:u,damping:S,type:b}=t;if(!(((v=i==null?void 0:i.owner)==null?void 0:v.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:m}=i.owner.getProps();return Ek()&&s&&jk.has(s)&&(s!=="transform"||!m)&&!c&&!o&&u!=="mirror"&&S!==0&&b!=="inertia"}const Tk=40;class Ak extends $h{constructor({autoplay:i=!0,delay:s=0,type:o="keyframes",repeat:u=0,repeatDelay:S=0,repeatType:b="loop",keyframes:l,name:c,motionValue:m,element:v,...d}){var j;super(),this.stop=()=>{var C,h;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(h=this.keyframeResolver)==null||h.cancel()},this.createdAt=jr.now();const y={autoplay:i,delay:s,type:o,repeat:u,repeatDelay:S,repeatType:b,name:c,motionValue:m,element:v,...d},_=(v==null?void 0:v.KeyframeResolver)||Wh;this.keyframeResolver=new _(l,(C,h,p)=>this.onKeyframesResolved(C,h,y,!p),c,m,v),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(i,s,o,u){var h,p;this.keyframeResolver=void 0;const{name:S,type:b,velocity:l,delay:c,isHandoff:m,onUpdate:v}=o;this.resolvedAt=jr.now(),kk(i,S,b,l)||((Ni.instantAnimations||!c)&&(v==null||v(Oh(i,o,s))),i[0]=i[i.length-1],qu(o),o.repeat=0);const y={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>Tk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:i},_=!m&&Rk(y),j=(p=(h=y.motionValue)==null?void 0:h.owner)==null?void 0:p.current,C=_?new wk({...y,element:j}):new Fh(y);C.finished.then(()=>{this.notifyFinished()}).catch(ri),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(i,s){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),pk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}function gy(t,i,s,o=0,u=1){const S=Array.from(t).sort((m,v)=>m.sortNodePosition(v)).indexOf(i),b=t.size,l=(b-1)*o;return typeof s=="function"?s(S,b):u===1?S*o:l-S*o}const Lk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zk(t){const i=Lk.exec(t);if(!i)return[,];const[,s,o,u]=i;return[`--${s??o}`,u]}function xy(t,i,s=1){const[o,u]=zk(t);if(!o)return;const S=window.getComputedStyle(i).getPropertyValue(o);if(S){const b=S.trim();return M0(b)?parseFloat(b):b}return Ih(u)?xy(u,i,s+1):u}const Ik={type:"spring",stiffness:500,damping:25,restSpeed:10},Dk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Mk={type:"keyframes",duration:.8},Bk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pk=(t,{keyframes:i})=>i.length>2?Mk:Ns.has(t)?t.startsWith("scale")?Dk(i[1]):Ik:Bk,Ok=t=>t!==null;function $k(t,{repeat:i,repeatType:s="loop"},o){const u=t.filter(Ok),S=i&&s!=="loop"&&i%2===1?0:u.length-1;return u[S]}function my(t,i){if(t!=null&&t.inherit&&i){const{inherit:s,...o}=t;return{...i,...o}}return t}function Nh(t,i){const s=(t==null?void 0:t[i])??(t==null?void 0:t.default)??t;return s!==t?my(s,t):s}function Fk({when:t,delay:i,delayChildren:s,staggerChildren:o,staggerDirection:u,repeat:S,repeatType:b,repeatDelay:l,from:c,elapsed:m,...v}){return!!Object.keys(v).length}const Hh=(t,i,s,o={},u,S)=>b=>{const l=Nh(o,t)||{},c=l.delay||o.delay||0;let{elapsed:m=0}=o;m=m-xi(c);const v={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:i.getVelocity(),...l,delay:-m,onUpdate:y=>{i.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{b(),l.onComplete&&l.onComplete()},name:t,motionValue:i,element:S?void 0:u};Fk(l)||Object.assign(v,Pk(t,v)),v.duration&&(v.duration=xi(v.duration)),v.repeatDelay&&(v.repeatDelay=xi(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let d=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(qu(v),v.delay===0&&(d=!0)),(Ni.instantAnimations||Ni.skipAnimations||u!=null&&u.shouldSkipAnimations)&&(d=!0,qu(v),v.delay=0),v.allowFlatten=!l.type&&!l.ease,d&&!S&&i.get()!==void 0){const y=$k(v.keyframes,l);if(y!==void 0){Rt.update(()=>{v.onUpdate(y),v.onComplete()});return}}return l.isSync?new Fh(v):new Ak(v)};function Cx(t){const i=[{},{}];return t==null||t.values.forEach((s,o)=>{i[0][o]=s.get(),i[1][o]=s.getVelocity()}),i}function Uh(t,i,s,o){if(typeof i=="function"){const[u,S]=Cx(o);i=i(s!==void 0?s:t.custom,u,S)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[u,S]=Cx(o);i=i(s!==void 0?s:t.custom,u,S)}return i}function Ts(t,i,s){const o=t.getProps();return Uh(o,i,s!==void 0?s:o.custom,t)}const yy=new Set(["width","height","top","left","right","bottom",...Ws]),kx=30,Wk=t=>!isNaN(parseFloat(t));class Nk{constructor(i,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var S;const u=jr.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((S=this.events.change)==null||S.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=s.owner}setCurrent(i){this.current=i,this.updatedAt=jr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=Wk(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new Ah);const o=this.events[i].add(s);return i==="change"?()=>{o(),Rt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-o}jump(i,s=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>kx)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,kx);return O0(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,s;(i=this.dependents)==null||i.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ds(t,i){return new Nk(t,i)}const Gu=t=>Array.isArray(t);function Hk(t,i,s){t.hasValue(i)?t.getValue(i).set(s):t.addValue(i,Ds(s))}function Uk(t){return Gu(t)?t[t.length-1]||0:t}function Vk(t,i){const s=Ts(t,i);let{transitionEnd:o={},transition:u={},...S}=s||{};S={...S,...o};for(const b in S){const l=Uk(S[b]);Hk(t,b,l)}}const Sr=t=>!!(t&&t.getVelocity);function Kk(t){return!!(Sr(t)&&t.add)}function Yu(t,i){const s=t.getValue("willChange");if(Kk(s))return s.add(i);if(!s&&Ni.WillChange){const o=new Ni.WillChange("auto");t.addValue("willChange",o),o.add(i)}}function Vh(t){return t.replace(/([A-Z])/g,i=>`-${i.toLowerCase()}`)}const qk="framerAppearId",vy="data-"+Vh(qk);function by(t){return t.props[vy]}function Gk({protectedKeys:t,needsAnimating:i},s){const o=t.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,o}function _y(t,i,{delay:s=0,transitionOverride:o,type:u}={}){let{transition:S,transitionEnd:b,...l}=i;const c=t.getDefaultTransition();S=S?my(S,c):c;const m=S==null?void 0:S.reduceMotion;o&&(S=o);const v=[],d=u&&t.animationState&&t.animationState.getState()[u];for(const y in l){const _=t.getValue(y,t.latestValues[y]??null),j=l[y];if(j===void 0||d&&Gk(d,y))continue;const C={delay:s,...Nh(S||{},y)},h=_.get();if(h!==void 0&&!_.isAnimating&&!Array.isArray(j)&&j===h&&!C.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const w=by(t);if(w){const R=window.MotionHandoffAnimation(w,y,Rt);R!==null&&(C.startTime=R,p=!0)}}Yu(t,y);const f=m??t.shouldReduceMotion;_.start(Hh(y,_,j,f&&yy.has(y)?{type:!1}:C,t,p));const g=_.animation;g&&v.push(g)}if(b){const y=()=>Rt.update(()=>{b&&Vk(t,b)});v.length?Promise.all(v).then(y):y()}return v}function Xu(t,i,s={}){var c;const o=Ts(t,i,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(u=s.transitionOverride);const S=o?()=>Promise.all(_y(t,o,s)):()=>Promise.resolve(),b=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:d,staggerDirection:y}=u;return Yk(t,i,m,v,d,y,s)}:()=>Promise.resolve(),{when:l}=u;if(l){const[m,v]=l==="beforeChildren"?[S,b]:[b,S];return m().then(()=>v())}else return Promise.all([S(),b(s.delay)])}function Yk(t,i,s=0,o=0,u=0,S=1,b){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",i),l.push(Xu(c,i,{...b,delay:s+(typeof o=="function"?0:o)+gy(t.variantChildren,c,o,u,S)}).then(()=>c.notify("AnimationComplete",i)));return Promise.all(l)}function Xk(t,i,s={}){t.notify("AnimationStart",i);let o;if(Array.isArray(i)){const u=i.map(S=>Xu(t,S,s));o=Promise.all(u)}else if(typeof i=="string")o=Xu(t,i,s);else{const u=typeof i=="function"?Ts(t,i,s.custom):i;o=Promise.all(_y(t,u,s))}return o.then(()=>{t.notify("AnimationComplete",i)})}const Jk={test:t=>t==="auto",parse:t=>t},Sy=t=>i=>i.test(t),wy=[Fs,Ze,ki,pn,kC,CC,Jk],jx=t=>wy.find(Sy(t));function Qk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||P0(t):!0}const Zk=new Set(["brightness","contrast","saturate","opacity"]);function ej(t){const[i,s]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[o]=s.match(Dh)||[];if(!o)return t;const u=s.replace(o,"");let S=Zk.has(i)?1:0;return o!==s&&(S*=100),i+"("+S+u+")"}const tj=/\b([a-z-]*)\(.*?\)/gu,Ju={...Cn,getAnimatableNone:t=>{const i=t.match(tj);return i?i.map(ej).join(" "):t}},Ex={...Fs,transform:Math.round},rj={rotate:pn,rotateX:pn,rotateY:pn,rotateZ:pn,scale:ul,scaleX:ul,scaleY:ul,scaleZ:ul,skew:pn,skewX:pn,skewY:pn,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:No,originX:px,originY:px,originZ:Ze},Kh={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,inset:Ze,insetBlock:Ze,insetBlockStart:Ze,insetBlockEnd:Ze,insetInline:Ze,insetInlineStart:Ze,insetInlineEnd:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,paddingBlock:Ze,paddingBlockStart:Ze,paddingBlockEnd:Ze,paddingInline:Ze,paddingInlineStart:Ze,paddingInlineEnd:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,marginBlock:Ze,marginBlockStart:Ze,marginBlockEnd:Ze,marginInline:Ze,marginInlineStart:Ze,marginInlineEnd:Ze,fontSize:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...rj,zIndex:Ex,fillOpacity:No,strokeOpacity:No,numOctaves:Ex},ij={...Kh,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Ju,WebkitFilter:Ju},Cy=t=>ij[t];function ky(t,i){let s=Cy(t);return s!==Ju&&(s=Cn),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const nj=new Set(["auto","none","0"]);function sj(t,i,s){let o=0,u;for(;o<t.length&&!u;){const S=t[o];typeof S=="string"&&!nj.has(S)&&Ho(S).values.length&&(u=t[o]),o++}if(u&&s)for(const S of i)t[S]=ky(s,u)}class oj extends Wh{constructor(i,s,o,u,S){super(i,s,o,u,S,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let d=i[v];if(typeof d=="string"&&(d=d.trim(),Ih(d))){const y=xy(d,s.current);y!==void 0&&(i[v]=y),v===i.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!yy.has(o)||i.length!==2)return;const[u,S]=i,b=jx(u),l=jx(S),c=hx(u),m=hx(S);if(c!==m&&mn[o]){this.needsMeasurement=!0;return}if(b!==l)if(_x(b)&&_x(l))for(let v=0;v<i.length;v++){const d=i[v];typeof d=="string"&&(i[v]=parseFloat(d))}else mn[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:s}=this,o=[];for(let u=0;u<i.length;u++)(i[u]===null||Qk(i[u]))&&o.push(u);o.length&&sj(i,o,s)}measureInitialState(){const{element:i,unresolvedKeyframes:s,name:o}=this;if(!i||!i.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mn[o](i.measureViewportBox(),window.getComputedStyle(i.current)),s[0]=this.measuredOrigin;const u=s[s.length-1];u!==void 0&&i.getValue(o,u).jump(u,!1)}measureEndState(){var l;const{element:i,name:s,unresolvedKeyframes:o}=this;if(!i||!i.current)return;const u=i.getValue(s);u&&u.jump(this.measuredOrigin,!1);const S=o.length-1,b=o[S];o[S]=mn[s](i.measureViewportBox(),window.getComputedStyle(i.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,m])=>{i.getValue(c).set(m)}),this.resolveNoneKeyframes()}}const aj=new Set(["opacity","clipPath","filter","transform"]);function jy(t,i,s){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const u=(s==null?void 0:s[t])??o.querySelectorAll(t);return u?Array.from(u):[]}return Array.from(t).filter(o=>o!=null)}const Ey=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function Qu(t){return B0(t)&&"offsetHeight"in t}const{schedule:qh}=Y0(queueMicrotask,!1),fi={x:!1,y:!1};function Ry(){return fi.x||fi.y}function lj(t){return t==="x"||t==="y"?fi[t]?null:(fi[t]=!0,()=>{fi[t]=!1}):fi.x||fi.y?null:(fi.x=fi.y=!0,()=>{fi.x=fi.y=!1})}function Ty(t,i){const s=jy(t),o=new AbortController,u={passive:!0,...i,signal:o.signal};return[s,u,()=>o.abort()]}function cj(t){return!(t.pointerType==="touch"||Ry())}function dj(t,i,s={}){const[o,u,S]=Ty(t,s);return o.forEach(b=>{let l=!1,c=!1,m;const v=()=>{b.removeEventListener("pointerleave",j)},d=h=>{m&&(m(h),m=void 0),v()},y=h=>{l=!1,window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",y),c&&(c=!1,d(h))},_=()=>{l=!0,window.addEventListener("pointerup",y,u),window.addEventListener("pointercancel",y,u)},j=h=>{if(h.pointerType!=="touch"){if(l){c=!0;return}d(h)}},C=h=>{if(!cj(h))return;c=!1;const p=i(b,h);typeof p=="function"&&(m=p,b.addEventListener("pointerleave",j,u))};b.addEventListener("pointerenter",C,u),b.addEventListener("pointerdown",_,u)}),S}const Ay=(t,i)=>i?t===i?!0:Ay(t,i.parentElement):!1,Gh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hj(t){return uj.has(t.tagName)||t.isContentEditable===!0}const pj=new Set(["INPUT","SELECT","TEXTAREA"]);function fj(t){return pj.has(t.tagName)||t.isContentEditable===!0}const jl=new WeakSet;function Rx(t){return i=>{i.key==="Enter"&&t(i)}}function ru(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const gj=(t,i)=>{const s=t.currentTarget;if(!s)return;const o=Rx(()=>{if(jl.has(s))return;ru(s,"down");const u=Rx(()=>{ru(s,"up")}),S=()=>ru(s,"cancel");s.addEventListener("keyup",u,i),s.addEventListener("blur",S,i)});s.addEventListener("keydown",o,i),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),i)};function Tx(t){return Gh(t)&&!Ry()}const Ax=new WeakSet;function xj(t,i,s={}){const[o,u,S]=Ty(t,s),b=l=>{const c=l.currentTarget;if(!Tx(l)||Ax.has(l))return;jl.add(c),s.stopPropagation&&Ax.add(l);const m=i(c,l),v=(_,j)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",y),jl.has(c)&&jl.delete(c),Tx(_)&&typeof m=="function"&&m(_,{success:j})},d=_=>{v(_,c===window||c===document||s.useGlobalTarget||Ay(c,_.target))},y=_=>{v(_,!1)};window.addEventListener("pointerup",d,u),window.addEventListener("pointercancel",y,u)};return o.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",b,u),Qu(l)&&(l.addEventListener("focus",m=>gj(m,u)),!hj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),S}function Yh(t){return B0(t)&&"ownerSVGElement"in t}const El=new WeakMap;let fn;const Ly=(t,i,s)=>(o,u)=>u&&u[0]?u[0][t+"Size"]:Yh(o)&&"getBBox"in o?o.getBBox()[i]:o[s],mj=Ly("inline","width","offsetWidth"),yj=Ly("block","height","offsetHeight");function vj({target:t,borderBoxSize:i}){var s;(s=El.get(t))==null||s.forEach(o=>{o(t,{get width(){return mj(t,i)},get height(){return yj(t,i)}})})}function bj(t){t.forEach(vj)}function _j(){typeof ResizeObserver>"u"||(fn=new ResizeObserver(bj))}function Sj(t,i){fn||_j();const s=jy(t);return s.forEach(o=>{let u=El.get(o);u||(u=new Set,El.set(o,u)),u.add(i),fn==null||fn.observe(o)}),()=>{s.forEach(o=>{const u=El.get(o);u==null||u.delete(i),u!=null&&u.size||fn==null||fn.unobserve(o)})}}const Rl=new Set;let ws;function wj(){ws=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Rl.forEach(i=>i(t))},window.addEventListener("resize",ws)}function Cj(t){return Rl.add(t),ws||wj(),()=>{Rl.delete(t),!Rl.size&&typeof ws=="function"&&(window.removeEventListener("resize",ws),ws=void 0)}}function Lx(t,i){return typeof t=="function"?Cj(t):Sj(t,i)}function kj(t){return Yh(t)&&t.tagName==="svg"}const jj=[...wy,Qt,Cn],Ej=t=>jj.find(Sy(t)),zx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cs=()=>({x:zx(),y:zx()}),Ix=()=>({min:0,max:0}),nr=()=>({x:Ix(),y:Ix()}),Rj=new WeakMap;function Jl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Uo(t){return typeof t=="string"||Array.isArray(t)}const Xh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jh=["initial",...Xh];function Ql(t){return Jl(t.animate)||Jh.some(i=>Uo(t[i]))}function zy(t){return!!(Ql(t)||t.variants)}function Tj(t,i,s){for(const o in i){const u=i[o],S=s[o];if(Sr(u))t.addValue(o,u);else if(Sr(S))t.addValue(o,Ds(u,{owner:t}));else if(S!==u)if(t.hasValue(o)){const b=t.getValue(o);b.liveStyle===!0?b.jump(u):b.hasAnimated||b.set(u)}else{const b=t.getStaticValue(o);t.addValue(o,Ds(b!==void 0?b:u,{owner:t}))}}for(const o in s)i[o]===void 0&&t.removeValue(o);return i}const Zu={current:null},Iy={current:!1},Aj=typeof window<"u";function Lj(){if(Iy.current=!0,!!Aj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>Zu.current=t.matches;t.addEventListener("change",i),i()}else Zu.current=!1}const Dx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ol={};function Dy(t){Ol=t}function zj(){return Ol}class Ij{scrapeMotionValuesFromProps(i,s,o){return{}}constructor({parent:i,props:s,presenceContext:o,reducedMotionConfig:u,skipAnimations:S,blockInitialAnimation:b,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Wh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=jr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Rt.render(this.render,!1,!0))};const{latestValues:m,renderState:v}=l;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=v,this.parent=i,this.props=s,this.presenceContext=o,this.depth=i?i.depth+1:0,this.reducedMotionConfig=u,this.skipAnimationsConfig=S,this.options=c,this.blockInitialAnimation=!!b,this.isControllingVariants=Ql(s),this.isVariantNode=zy(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:d,...y}=this.scrapeMotionValuesFromProps(s,{},this);for(const _ in y){const j=y[_];m[_]!==void 0&&Sr(j)&&j.set(m[_])}}mount(i){var s,o;if(this.hasBeenMounted)for(const u in this.initialValues)(s=this.values.get(u))==null||s.jump(this.initialValues[u]),this.latestValues[u]=this.initialValues[u];this.current=i,Rj.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,S)=>this.bindToMotionValue(S,u)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Iy.current||Lj(),this.shouldReduceMotion=Zu.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(o=this.parent)==null||o.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var i;this.projection&&this.projection.unmount(),wn(this.notifyUpdate),wn(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const o=this.features[s];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,s){if(this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)(),s.accelerate&&aj.has(i)&&this.current instanceof HTMLElement){const{factory:b,keyframes:l,times:c,ease:m,duration:v}=s.accelerate,d=new py({element:this.current,name:i,keyframes:l,times:c,ease:m,duration:xi(v)}),y=b(d);this.valueSubscriptions.set(i,()=>{y(),d.cancel()});return}const o=Ns.has(i);o&&this.onBindTransform&&this.onBindTransform();const u=s.on("change",b=>{this.latestValues[i]=b,this.props.onUpdate&&Rt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;typeof window<"u"&&window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,i,s)),this.valueSubscriptions.set(i,()=>{u(),S&&S(),s.owner&&s.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Ol){const s=Ol[i];if(!s)continue;const{isEnabled:o,Feature:u}=s;if(!this.features[i]&&u&&o(this.props)&&(this.features[i]=new u(this)),this.features[i]){const S=this.features[i];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nr()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<Dx.length;o++){const u=Dx[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const S="on"+u,b=i[S];b&&(this.propEventSubscriptions[u]=this.on(u,b))}this.prevMotionValues=Tj(this,this.scrapeMotionValuesFromProps(i,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){const o=this.values.get(i);s!==o&&(o&&this.removeValue(i),this.bindToMotionValue(i,s),this.values.set(i,s),this.latestValues[i]=s.get())}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let o=this.values.get(i);return o===void 0&&s!==void 0&&(o=Ds(s===null?void 0:s,{owner:this}),this.addValue(i,o)),o}readValue(i,s){let o=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return o!=null&&(typeof o=="string"&&(M0(o)||P0(o))?o=parseFloat(o):!Ej(o)&&Cn.test(s)&&(o=ky(i,s)),this.setBaseTarget(i,Sr(o)?o.get():o)),Sr(o)?o.get():o}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){var S;const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const b=Uh(this.props,s,(S=this.presenceContext)==null?void 0:S.custom);b&&(o=b[i])}if(s&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,i);return u!==void 0&&!Sr(u)?u:this.initialValues[i]!==void 0&&o===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new Ah),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}scheduleRenderMicrotask(){qh.render(this.render)}}class My extends Ij{constructor(){super(...arguments),this.KeyframeResolver=oj}sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){const o=i.style;return o?o[s]:void 0}removeValueFromRenderState(i,{vars:s,style:o}){delete s[i],delete o[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;Sr(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class En{constructor(i){this.isMounted=!1,this.node=i}update(){}}function By({top:t,left:i,right:s,bottom:o}){return{x:{min:i,max:s},y:{min:t,max:o}}}function Dj({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function Mj(t,i){if(!i)return t;const s=i({x:t.left,y:t.top}),o=i({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function iu(t){return t===void 0||t===1}function eh({scale:t,scaleX:i,scaleY:s}){return!iu(t)||!iu(i)||!iu(s)}function Un(t){return eh(t)||Py(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Py(t){return Mx(t.x)||Mx(t.y)}function Mx(t){return t&&t!=="0%"}function $l(t,i,s){const o=t-s,u=i*o;return s+u}function Bx(t,i,s,o,u){return u!==void 0&&(t=$l(t,u,o)),$l(t,s,o)+i}function th(t,i=0,s=1,o,u){t.min=Bx(t.min,i,s,o,u),t.max=Bx(t.max,i,s,o,u)}function Oy(t,{x:i,y:s}){th(t.x,i.translate,i.scale,i.originPoint),th(t.y,s.translate,s.scale,s.originPoint)}const Px=.999999999999,Ox=1.0000000000001;function Bj(t,i,s,o=!1){const u=s.length;if(!u)return;i.x=i.y=1;let S,b;for(let l=0;l<u;l++){S=s[l],b=S.projectionDelta;const{visualElement:c}=S.options;c&&c.props.style&&c.props.style.display==="contents"||(o&&S.options.layoutScroll&&S.scroll&&S!==S.root&&js(t,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),b&&(i.x*=b.x.scale,i.y*=b.y.scale,Oy(t,b)),o&&Un(S.latestValues)&&js(t,S.latestValues))}i.x<Ox&&i.x>Px&&(i.x=1),i.y<Ox&&i.y>Px&&(i.y=1)}function ks(t,i){t.min=t.min+i,t.max=t.max+i}function $x(t,i,s,o,u=.5){const S=Pt(t.min,t.max,u);th(t,i,s,S,o)}function js(t,i){$x(t.x,i.x,i.scaleX,i.scale,i.originX),$x(t.y,i.y,i.scaleY,i.scale,i.originY)}function $y(t,i){return By(Mj(t.getBoundingClientRect(),i))}function Pj(t,i,s){const o=$y(t,s),{scroll:u}=i;return u&&(ks(o.x,u.offset.x),ks(o.y,u.offset.y)),o}const Oj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$j=Ws.length;function Fj(t,i,s){let o="",u=!0;for(let S=0;S<$j;S++){const b=Ws[S],l=t[b];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(b.startsWith("scale")?1:0);else{const m=parseFloat(l);c=b.startsWith("scale")?m===1:m===0}if(!c||s){const m=Ey(l,Kh[b]);if(!c){u=!1;const v=Oj[b]||b;o+=`${v}(${m}) `}s&&(i[b]=m)}}return o=o.trim(),s?o=s(i,u?"":o):u&&(o="none"),o}function Qh(t,i,s){const{style:o,vars:u,transformOrigin:S}=t;let b=!1,l=!1;for(const c in i){const m=i[c];if(Ns.has(c)){b=!0;continue}else if(J0(c)){u[c]=m;continue}else{const v=Ey(m,Kh[c]);c.startsWith("origin")?(l=!0,S[c]=v):o[c]=v}}if(i.transform||(b||s?o.transform=Fj(i,t.transform,s):o.transform&&(o.transform="none")),l){const{originX:c="50%",originY:m="50%",originZ:v=0}=S;o.transformOrigin=`${c} ${m} ${v}`}}function Fy(t,{style:i,vars:s},o,u){const S=t.style;let b;for(b in i)S[b]=i[b];u==null||u.applyProjectionStyles(S,o);for(b in s)S.setProperty(b,s[b])}function Fx(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const jo={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const s=Fx(t,i.target.x),o=Fx(t,i.target.y);return`${s}% ${o}%`}},Wj={correct:(t,{treeScale:i,projectionDelta:s})=>{const o=t,u=Cn.parse(t);if(u.length>5)return o;const S=Cn.createTransformer(t),b=typeof u[0]!="number"?1:0,l=s.x.scale*i.x,c=s.y.scale*i.y;u[0+b]/=l,u[1+b]/=c;const m=Pt(l,c,.5);return typeof u[2+b]=="number"&&(u[2+b]/=m),typeof u[3+b]=="number"&&(u[3+b]/=m),S(u)}},rh={borderRadius:{...jo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jo,borderTopRightRadius:jo,borderBottomLeftRadius:jo,borderBottomRightRadius:jo,boxShadow:Wj};function Wy(t,{layout:i,layoutId:s}){return Ns.has(t)||t.startsWith("origin")||(i||s!==void 0)&&(!!rh[t]||t==="opacity")}function Zh(t,i,s){var b;const o=t.style,u=i==null?void 0:i.style,S={};if(!o)return S;for(const l in o)(Sr(o[l])||u&&Sr(u[l])||Wy(l,t)||((b=s==null?void 0:s.getValue(l))==null?void 0:b.liveStyle)!==void 0)&&(S[l]=o[l]);return S}function Nj(t){return window.getComputedStyle(t)}class Hj extends My{constructor(){super(...arguments),this.type="html",this.renderInstance=Fy}readValueFromInstance(i,s){var o;if(Ns.has(s))return(o=this.projection)!=null&&o.isProjecting?Nu(s):lk(i,s);{const u=Nj(i),S=(J0(s)?u.getPropertyValue(s):u[s])||0;return typeof S=="string"?S.trim():S}}measureInstanceViewportBox(i,{transformPagePoint:s}){return $y(i,s)}build(i,s,o){Qh(i,s,o.transformTemplate)}scrapeMotionValuesFromProps(i,s,o){return Zh(i,s,o)}}const Uj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vj={offset:"strokeDashoffset",array:"strokeDasharray"};function Kj(t,i,s=1,o=0,u=!0){t.pathLength=1;const S=u?Uj:Vj;t[S.offset]=`${-o}`,t[S.array]=`${i} ${s}`}const qj=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Ny(t,{attrX:i,attrY:s,attrScale:o,pathLength:u,pathSpacing:S=1,pathOffset:b=0,...l},c,m,v){if(Qh(t,l,m),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:y}=t;d.transform&&(y.transform=d.transform,delete d.transform),(y.transform||d.transformOrigin)&&(y.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),y.transform&&(y.transformBox=(v==null?void 0:v.transformBox)??"fill-box",delete d.transformBox);for(const _ of qj)d[_]!==void 0&&(y[_]=d[_],delete d[_]);i!==void 0&&(d.x=i),s!==void 0&&(d.y=s),o!==void 0&&(d.scale=o),u!==void 0&&Kj(d,u,S,b,!1)}const Hy=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Uy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gj(t,i,s,o){Fy(t,i,void 0,o);for(const u in i.attrs)t.setAttribute(Hy.has(u)?u:Vh(u),i.attrs[u])}function Vy(t,i,s){const o=Zh(t,i,s);for(const u in t)if(Sr(t[u])||Sr(i[u])){const S=Ws.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;o[S]=t[u]}return o}class Yj extends My{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nr}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(Ns.has(s)){const o=Cy(s);return o&&o.default||0}return s=Hy.has(s)?s:Vh(s),i.getAttribute(s)}scrapeMotionValuesFromProps(i,s,o){return Vy(i,s,o)}build(i,s,o){Ny(i,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(i,s,o,u){Gj(i,s,o,u)}mount(i){this.isSVGTag=Uy(i.tagName),super.mount(i)}}const Xj=Jh.length;function Ky(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Ky(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const i={};for(let s=0;s<Xj;s++){const o=Jh[s],u=t.props[o];(Uo(u)||u===!1)&&(i[o]=u)}return i}function qy(t,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(i[o]!==t[o])return!1;return!0}const Jj=[...Xh].reverse(),Qj=Xh.length;function Zj(t){return i=>Promise.all(i.map(({animation:s,options:o})=>Xk(t,s,o)))}function e5(t){let i=Zj(t),s=Wx(),o=!0;const u=c=>(m,v)=>{var y;const d=Ts(t,v,c==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(d){const{transition:_,transitionEnd:j,...C}=d;m={...m,...C,...j}}return m};function S(c){i=c(t)}function b(c){const{props:m}=t,v=Ky(t.parent)||{},d=[],y=new Set;let _={},j=1/0;for(let h=0;h<Qj;h++){const p=Jj[h],f=s[p],g=m[p]!==void 0?m[p]:v[p],w=Uo(g),R=p===c?f.isActive:null;R===!1&&(j=h);let A=g===v[p]&&g!==m[p]&&w;if(A&&o&&t.manuallyAnimateOnMount&&(A=!1),f.protectedKeys={..._},!f.isActive&&R===null||!g&&!f.prevProp||Jl(g)||typeof g=="boolean")continue;if(p==="exit"&&f.isActive&&R!==!0){f.prevResolvedValues&&(_={..._,...f.prevResolvedValues});continue}const z=t5(f.prevProp,g);let E=z||p===c&&f.isActive&&!A&&w||h>j&&w,B=!1;const O=Array.isArray(g)?g:[g];let H=O.reduce(u(p),{});R===!1&&(H={});const{prevResolvedValues:K={}}=f,U={...K,...H},ee=Q=>{E=!0,y.has(Q)&&(B=!0,y.delete(Q)),f.needsAnimating[Q]=!0;const G=t.getValue(Q);G&&(G.liveStyle=!1)};for(const Q in U){const G=H[Q],M=K[Q];if(_.hasOwnProperty(Q))continue;let I=!1;Gu(G)&&Gu(M)?I=!qy(G,M):I=G!==M,I?G!=null?ee(Q):y.add(Q):G!==void 0&&y.has(Q)?ee(Q):f.protectedKeys[Q]=!0}f.prevProp=g,f.prevResolvedValues=H,f.isActive&&(_={..._,...H}),o&&t.blockInitialAnimation&&(E=!1);const V=A&&z;E&&(!V||B)&&d.push(...O.map(Q=>{const G={type:p};if(typeof Q=="string"&&o&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:M}=t,I=Ts(M,Q);if(M.enteringChildren&&I){const{delayChildren:D}=I.transition||{};G.delay=gy(M.enteringChildren,t,D)}}return{animation:Q,options:G}}))}if(y.size){const h={};if(typeof m.initial!="boolean"){const p=Ts(t,Array.isArray(m.initial)?m.initial[0]:m.initial);p&&p.transition&&(h.transition=p.transition)}y.forEach(p=>{const f=t.getBaseTarget(p),g=t.getValue(p);g&&(g.liveStyle=!0),h[p]=f??null}),d.push({animation:h})}let C=!!d.length;return o&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(C=!1),o=!1,C?i(d):Promise.resolve()}function l(c,m){var d;if(s[c].isActive===m)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(y=>{var _;return(_=y.animationState)==null?void 0:_.setActive(c,m)}),s[c].isActive=m;const v=b(c);for(const y in s)s[y].protectedKeys={};return v}return{animateChanges:b,setActive:l,setAnimateFunction:S,getState:()=>s,reset:()=>{s=Wx()}}}function t5(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!qy(i,t):!1}function Fn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wx(){return{animate:Fn(!0),whileInView:Fn(),whileHover:Fn(),whileTap:Fn(),whileDrag:Fn(),whileFocus:Fn(),exit:Fn()}}function Nx(t,i){t.min=i.min,t.max=i.max}function pi(t,i){Nx(t.x,i.x),Nx(t.y,i.y)}function Hx(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}const Gy=1e-4,r5=1-Gy,i5=1+Gy,Yy=.01,n5=0-Yy,s5=0+Yy;function Er(t){return t.max-t.min}function o5(t,i,s){return Math.abs(t-i)<=s}function Ux(t,i,s,o=.5){t.origin=o,t.originPoint=Pt(i.min,i.max,t.origin),t.scale=Er(s)/Er(i),t.translate=Pt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=r5&&t.scale<=i5||isNaN(t.scale))&&(t.scale=1),(t.translate>=n5&&t.translate<=s5||isNaN(t.translate))&&(t.translate=0)}function Po(t,i,s,o){Ux(t.x,i.x,s.x,o?o.originX:void 0),Ux(t.y,i.y,s.y,o?o.originY:void 0)}function Vx(t,i,s){t.min=s.min+i.min,t.max=t.min+Er(i)}function a5(t,i,s){Vx(t.x,i.x,s.x),Vx(t.y,i.y,s.y)}function Kx(t,i,s){t.min=i.min-s.min,t.max=t.min+Er(i)}function Fl(t,i,s){Kx(t.x,i.x,s.x),Kx(t.y,i.y,s.y)}function qx(t,i,s,o,u){return t-=i,t=$l(t,1/s,o),u!==void 0&&(t=$l(t,1/u,o)),t}function l5(t,i=0,s=1,o=.5,u,S=t,b=t){if(ki.test(i)&&(i=parseFloat(i),i=Pt(b.min,b.max,i/100)-b.min),typeof i!="number")return;let l=Pt(S.min,S.max,o);t===S&&(l-=i),t.min=qx(t.min,i,s,l,u),t.max=qx(t.max,i,s,l,u)}function Gx(t,i,[s,o,u],S,b){l5(t,i[s],i[o],i[u],i.scale,S,b)}const c5=["x","scaleX","originX"],d5=["y","scaleY","originY"];function Yx(t,i,s,o){Gx(t.x,i,c5,s?s.x:void 0,o?o.x:void 0),Gx(t.y,i,d5,s?s.y:void 0,o?o.y:void 0)}function Xx(t){return t.translate===0&&t.scale===1}function Xy(t){return Xx(t.x)&&Xx(t.y)}function Jx(t,i){return t.min===i.min&&t.max===i.max}function u5(t,i){return Jx(t.x,i.x)&&Jx(t.y,i.y)}function Qx(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function Jy(t,i){return Qx(t.x,i.x)&&Qx(t.y,i.y)}function Zx(t){return Er(t.x)/Er(t.y)}function em(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}function wi(t){return[t("x"),t("y")]}function h5(t,i,s){let o="";const u=t.x.translate/i.x,S=t.y.translate/i.y,b=(s==null?void 0:s.z)||0;if((u||S||b)&&(o=`translate3d(${u}px, ${S}px, ${b}px) `),(i.x!==1||i.y!==1)&&(o+=`scale(${1/i.x}, ${1/i.y}) `),s){const{transformPerspective:m,rotate:v,rotateX:d,rotateY:y,skewX:_,skewY:j}=s;m&&(o=`perspective(${m}px) ${o}`),v&&(o+=`rotate(${v}deg) `),d&&(o+=`rotateX(${d}deg) `),y&&(o+=`rotateY(${y}deg) `),_&&(o+=`skewX(${_}deg) `),j&&(o+=`skewY(${j}deg) `)}const l=t.x.scale*i.x,c=t.y.scale*i.y;return(l!==1||c!==1)&&(o+=`scale(${l}, ${c})`),o||"none"}const Qy=["TopLeft","TopRight","BottomLeft","BottomRight"],p5=Qy.length,tm=t=>typeof t=="string"?parseFloat(t):t,rm=t=>typeof t=="number"||Ze.test(t);function f5(t,i,s,o,u,S){u?(t.opacity=Pt(0,s.opacity??1,g5(o)),t.opacityExit=Pt(i.opacity??1,0,x5(o))):S&&(t.opacity=Pt(i.opacity??1,s.opacity??1,o));for(let b=0;b<p5;b++){const l=`border${Qy[b]}Radius`;let c=im(i,l),m=im(s,l);if(c===void 0&&m===void 0)continue;c||(c=0),m||(m=0),c===0||m===0||rm(c)===rm(m)?(t[l]=Math.max(Pt(tm(c),tm(m),o),0),(ki.test(m)||ki.test(c))&&(t[l]+="%")):t[l]=m}(i.rotate||s.rotate)&&(t.rotate=Pt(i.rotate||0,s.rotate||0,o))}function im(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const g5=Zy(0,.5,V0),x5=Zy(.5,.95,ri);function Zy(t,i,s){return o=>o<t?0:o>i?1:s(Wo(t,i,o))}function m5(t,i,s){const o=Sr(t)?t:Ds(t);return o.start(Hh("",o,i,s)),o.animation}function Vo(t,i,s,o={passive:!0}){return t.addEventListener(i,s,o),()=>t.removeEventListener(i,s)}const y5=(t,i)=>t.depth-i.depth;class v5{constructor(){this.children=[],this.isDirty=!1}add(i){Eh(this.children,i),this.isDirty=!0}remove(i){Dl(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(y5),this.isDirty=!1,this.children.forEach(i)}}function b5(t,i){const s=jr.now(),o=({timestamp:u})=>{const S=u-s;S>=i&&(wn(o),t(S-i))};return Rt.setup(o,!0),()=>wn(o)}function Tl(t){return Sr(t)?t.get():t}class _5{constructor(){this.members=[]}add(i){Eh(this.members,i);for(let s=this.members.length-1;s>=0;s--){const o=this.members[s];if(o===i||o===this.lead||o===this.prevLead)continue;const u=o.instance;u&&u.isConnected===!1&&o.isPresent!==!1&&!o.snapshot&&Dl(this.members,o)}i.scheduleRender()}remove(i){if(Dl(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(u=>i===u);if(s===0)return!1;let o;for(let u=s;u>=0;u--){const S=this.members[u],b=S.instance;if(S.isPresent!==!1&&(!b||b.isConnected!==!1)){o=S;break}}return o?(this.promote(o),!0):!1}promote(i,s){const o=this.lead;if(i!==o&&(this.prevLead=o,this.lead=i,i.show(),o)){o.instance&&o.scheduleRender(),i.scheduleRender();const u=o.options.layoutDependency,S=i.options.layoutDependency;if(!(u!==void 0&&S!==void 0&&u===S)){const c=o.instance;c&&c.isConnected===!1&&!o.snapshot||(i.resumeFrom=o,s&&(i.resumeFrom.preserveOpacity=!0),o.snapshot&&(i.snapshot=o.snapshot,i.snapshot.latestValues=o.animationValues||o.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0))}const{crossfade:l}=i.options;l===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:o}=i;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Al={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nu=["","X","Y","Z"],S5=1e3;let w5=0;function su(t,i,s,o){const{latestValues:u}=i;u[t]&&(s[t]=u[t],i.setStaticValue(t,0),o&&(o[t]=0))}function e1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const s=by(i);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:u,layoutId:S}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Rt,!(u||S))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&e1(o)}function t1({attachResizeListener:t,defaultParent:i,measureScroll:s,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(b={},l=i==null?void 0:i()){this.id=w5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(j5),this.nodes.forEach(A5),this.nodes.forEach(L5),this.nodes.forEach(E5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new v5)}addEventListener(b,l){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new Ah),this.eventHandlers.get(b).add(l)}notifyListeners(b,...l){const c=this.eventHandlers.get(b);c&&c.notify(...l)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=Yh(b)&&!kj(b),this.instance=b;const{layoutId:l,layout:c,visualElement:m}=this.options;if(m&&!m.current&&m.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let v,d=0;const y=()=>this.root.updateBlockedByResize=!1;Rt.read(()=>{d=window.innerWidth}),t(b,()=>{const _=window.innerWidth;_!==d&&(d=_,this.root.updateBlockedByResize=!0,v&&v(),v=b5(y,250),Al.hasAnimatedSinceResize&&(Al.hasAnimatedSinceResize=!1,this.nodes.forEach(om)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&m&&(l||c)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:d,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||m.getDefaultTransition()||B5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:h}=m.getProps(),p=!this.targetLayout||!Jy(this.targetLayout,_),f=!d&&y;if(this.options.layoutRoot||this.resumeFrom||f||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...Nh(j,"layout"),onPlay:C,onComplete:h};(m.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(v,f)}else d||om(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(z5),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&e1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const d=this.path[v];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T5),this.nodes.forEach(C5),this.nodes.forEach(k5)):this.nodes.forEach(sm),this.clearAllSnapshots();const l=jr.now();hr.delta=Ri(0,1e3/60,l-hr.timestamp),hr.timestamp=l,hr.isProcessing=!0,Xd.update.process(hr),Xd.preRender.process(hr),Xd.render.process(hr),hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(R5),this.sharedNodes.forEach(I5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Er(this.snapshot.measuredBox.x)&&!Er(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(l=!1),l&&this.instance){const c=o(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!u)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Xy(this.projectionDelta),c=this.getTransformTemplate(),m=c?c(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;b&&this.instance&&(l||Un(this.latestValues)||v)&&(u(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return b&&(c=this.removeTransform(c)),P5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:b}=this.options;if(!b)return nr();const l=b.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(O5))){const{scroll:v}=this.root;v&&(ks(l.x,v.offset.x),ks(l.y,v.offset.y))}return l}removeElementScroll(b){var c;const l=nr();if(pi(l,b),(c=this.scroll)!=null&&c.wasRoot)return l;for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:d,options:y}=v;v!==this.root&&d&&y.layoutScroll&&(d.wasRoot&&pi(l,b),ks(l.x,d.offset.x),ks(l.y,d.offset.y))}return l}applyTransform(b,l=!1){const c=nr();pi(c,b);for(let m=0;m<this.path.length;m++){const v=this.path[m];!l&&v.options.layoutScroll&&v.scroll&&v!==v.root&&js(c,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Un(v.latestValues)&&js(c,v.latestValues)}return Un(this.latestValues)&&js(c,this.latestValues),c}removeTransform(b){const l=nr();pi(l,b);for(let c=0;c<this.path.length;c++){const m=this.path[c];if(!m.instance||!Un(m.latestValues))continue;eh(m.latestValues)&&m.updateSnapshot();const v=nr(),d=m.measurePageBox();pi(v,d),Yx(l,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return Un(this.latestValues)&&Yx(l,this.latestValues),l}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var _;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(b||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:d}=this.options;if(!this.layout||!(v||d))return;this.resolvedRelativeTargetAt=hr.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nr(),this.targetWithTransforms=nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),Oy(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||eh(this.parent.latestValues)||Py(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(b,l,c){this.relativeParent=b,this.linkedParentVersion=b.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Fl(this.relativeTargetOrigin,l,c),pi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var j;const b=this.getLead(),l=!!this.resumingFrom||this!==b;let c=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===hr.timestamp&&(c=!1),c)return;const{layout:m,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||v))return;pi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,y=this.treeScale.y;Bj(this.layoutCorrected,this.treeScale,this.path,l),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=nr());const{target:_}=b;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hx(this.prevProjectionDelta.x,this.projectionDelta.x),Hx(this.prevProjectionDelta.y,this.projectionDelta.y)),Po(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==y||!em(this.projectionDelta.x,this.prevProjectionDelta.x)||!em(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),b){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Cs(),this.projectionDelta=Cs(),this.projectionDeltaWithTransform=Cs()}setAnimationOrigin(b,l=!1){const c=this.snapshot,m=c?c.latestValues:{},v={...this.latestValues},d=Cs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=nr(),_=c?c.source:void 0,j=this.layout?this.layout.source:void 0,C=_!==j,h=this.getStack(),p=!h||h.members.length<=1,f=!!(C&&!p&&this.options.crossfade===!0&&!this.path.some(M5));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const R=w/1e3;am(d.x,b.x,R),am(d.y,b.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),D5(this.relativeTarget,this.relativeTargetOrigin,y,R),g&&u5(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=nr()),pi(g,this.relativeTarget)),C&&(this.animationValues=v,f5(v,m,this.latestValues,R,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var l,c,m;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(m=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||m.stop(),this.pendingAnimation&&(wn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rt.update(()=>{Al.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ds(0)),this.currentAnimation=m5(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),b.onUpdate&&b.onUpdate(v)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:l,target:c,layout:m,latestValues:v}=b;if(!(!l||!c||!m)){if(this!==b&&this.layout&&m&&r1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){c=this.target||nr();const d=Er(this.layout.layoutBox.x);c.x.min=b.target.x.min,c.x.max=c.x.min+d;const y=Er(this.layout.layoutBox.y);c.y.min=b.target.y.min,c.y.max=c.y.min+y}pi(l,c),js(l,v),Po(this.projectionDeltaWithTransform,this.layoutCorrected,l,v)}}registerSharedNode(b,l){this.sharedNodes.has(b)||this.sharedNodes.set(b,new _5),this.sharedNodes.get(b).add(l);const m=l.options.initialPromotionConfig;l.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(l):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var l;const{layoutId:b}=this.options;return b?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:b}=this.options;return b?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:l,preserveFollowOpacity:c}={}){const m=this.getStack();m&&m.promote(this,c),b&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let l=!1;const{latestValues:c}=b;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const m={};c.z&&su("z",b,m,this.animationValues);for(let v=0;v<nu.length;v++)su(`rotate${nu[v]}`,b,m,this.animationValues),su(`skew${nu[v]}`,b,m,this.animationValues);b.render();for(const v in m)b.setStaticValue(v,m[v]),this.animationValues&&(this.animationValues[v]=m[v]);b.scheduleRender()}applyProjectionStyles(b,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=Tl(l==null?void 0:l.pointerEvents)||"",b.transform=c?c(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Tl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Un(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1);return}b.visibility="";const v=m.animationValues||m.latestValues;this.applyTransformsToTarget();let d=h5(this.projectionDeltaWithTransform,this.treeScale,v);c&&(d=c(v,d)),b.transform=d;const{x:y,y:_}=this.projectionDelta;b.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,m.animationValues?b.opacity=m===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:b.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const j in rh){if(v[j]===void 0)continue;const{correct:C,applyTo:h,isCSSVariable:p}=rh[j],f=d==="none"?v[j]:C(v[j],m);if(h){const g=h.length;for(let w=0;w<g;w++)b[h[w]]=f}else p?this.options.visualElement.renderState.vars[j]=f:b[j]=f}this.options.layoutId&&(b.pointerEvents=m===this?Tl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var l;return(l=b.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(nm),this.root.sharedNodes.clear()}}}function C5(t){t.updateLayout()}function k5(t){var s;const i=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:u}=t.layout,{animationType:S}=t.options,b=i.source!==t.layout.source;S==="size"?wi(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=Er(y);y.min=o[d].min,y.max=y.min+_}):r1(S,i.layoutBox,o)&&wi(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=Er(o[d]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+_)});const l=Cs();Po(l,o,i.layoutBox);const c=Cs();b?Po(c,t.applyTransform(u,!0),i.measuredBox):Po(c,o,i.layoutBox);const m=!Xy(l);let v=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:y,layout:_}=d;if(y&&_){const j=nr();Fl(j,i.layoutBox,y.layoutBox);const C=nr();Fl(C,o,_.layoutBox),Jy(j,C)||(v=!0),d.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:c,layoutDelta:l,hasLayoutChanged:m,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function j5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function R5(t){t.clearSnapshot()}function nm(t){t.clearMeasurements()}function sm(t){t.isLayoutDirty=!1}function T5(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function om(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function A5(t){t.resolveTargetDelta()}function L5(t){t.calcProjection()}function z5(t){t.resetSkewAndRotation()}function I5(t){t.removeLeadSnapshot()}function am(t,i,s){t.translate=Pt(i.translate,0,s),t.scale=Pt(i.scale,1,s),t.origin=i.origin,t.originPoint=i.originPoint}function lm(t,i,s,o){t.min=Pt(i.min,s.min,o),t.max=Pt(i.max,s.max,o)}function D5(t,i,s,o){lm(t.x,i.x,s.x,o),lm(t.y,i.y,s.y,o)}function M5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B5={duration:.45,ease:[.4,0,.1,1]},cm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),dm=cm("applewebkit/")&&!cm("chrome/")?Math.round:ri;function um(t){t.min=dm(t.min),t.max=dm(t.max)}function P5(t){um(t.x),um(t.y)}function r1(t,i,s){return t==="position"||t==="preserve-aspect"&&!o5(Zx(i),Zx(s),.2)}function O5(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const $5=t1({attachResizeListener:(t,i)=>Vo(t,"resize",i),measureScroll:()=>{var t,i;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((i=document.body)==null?void 0:i.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ou={current:void 0},i1=t1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ou.current){const t=new $5({});t.mount(window),t.setOptions({layoutScroll:!0}),ou.current=t}return ou.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ep=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function hm(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function F5(...t){return i=>{let s=!1;const o=t.map(u=>{const S=hm(u,i);return!s&&typeof S=="function"&&(s=!0),S});if(s)return()=>{for(let u=0;u<o.length;u++){const S=o[u];typeof S=="function"?S():hm(t[u],null)}}}}function W5(...t){return L.useCallback(F5(...t),t)}class N5 extends L.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const o=s.offsetParent,u=Qu(o)&&o.offsetWidth||0,S=Qu(o)&&o.offsetHeight||0,b=this.props.sizeRef.current;b.height=s.offsetHeight||0,b.width=s.offsetWidth||0,b.top=s.offsetTop,b.left=s.offsetLeft,b.right=u-b.width-b.left,b.bottom=S-b.height-b.top}return null}componentDidUpdate(){}render(){return this.props.children}}function H5({children:t,isPresent:i,anchorX:s,anchorY:o,root:u,pop:S}){var y;const b=L.useId(),l=L.useRef(null),c=L.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=L.useContext(ep),v=((y=t.props)==null?void 0:y.ref)??(t==null?void 0:t.ref),d=W5(l,v);return L.useInsertionEffect(()=>{const{width:_,height:j,top:C,left:h,right:p,bottom:f}=c.current;if(i||S===!1||!l.current||!_||!j)return;const g=s==="left"?`left: ${h}`:`right: ${p}`,w=o==="bottom"?`bottom: ${f}`:`top: ${C}`;l.current.dataset.motionPopId=b;const R=document.createElement("style");m&&(R.nonce=m);const A=u??document.head;return A.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${b}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${j}px !important;
            ${g}px !important;
            ${w}px !important;
          }
        `),()=>{A.contains(R)&&A.removeChild(R)}},[i]),e.jsx(N5,{isPresent:i,childRef:l,sizeRef:c,pop:S,children:S===!1?t:L.cloneElement(t,{ref:d})})}const U5=({children:t,initial:i,isPresent:s,onExitComplete:o,custom:u,presenceAffectsLayout:S,mode:b,anchorX:l,anchorY:c,root:m})=>{const v=jh(V5),d=L.useId();let y=!0,_=L.useMemo(()=>(y=!1,{id:d,initial:i,isPresent:s,custom:u,onExitComplete:j=>{v.set(j,!0);for(const C of v.values())if(!C)return;o&&o()},register:j=>(v.set(j,!1),()=>v.delete(j))}),[s,v,o]);return S&&y&&(_={..._}),L.useMemo(()=>{v.forEach((j,C)=>v.set(C,!1))},[s]),L.useEffect(()=>{!s&&!v.size&&o&&o()},[s]),t=e.jsx(H5,{pop:b==="popLayout",isPresent:s,anchorX:l,anchorY:c,root:m,children:t}),e.jsx(Xl.Provider,{value:_,children:t})};function V5(){return new Map}function n1(t=!0){const i=L.useContext(Xl);if(i===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:u}=i,S=L.useId();L.useEffect(()=>{if(t)return u(S)},[t]);const b=L.useCallback(()=>t&&o&&o(S),[S,o,t]);return!s&&o?[!1,b]:[!0]}const hl=t=>t.key||"";function pm(t){const i=[];return L.Children.forEach(t,s=>{L.isValidElement(s)&&i.push(s)}),i}const au=({children:t,custom:i,initial:s=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:S="sync",propagate:b=!1,anchorX:l="left",anchorY:c="top",root:m})=>{const[v,d]=n1(b),y=L.useMemo(()=>pm(t),[t]),_=b&&!v?[]:y.map(hl),j=L.useRef(!0),C=L.useRef(y),h=jh(()=>new Map),p=L.useRef(new Set),[f,g]=L.useState(y),[w,R]=L.useState(y);D0(()=>{j.current=!1,C.current=y;for(let E=0;E<w.length;E++){const B=hl(w[E]);_.includes(B)?(h.delete(B),p.current.delete(B)):h.get(B)!==!0&&h.set(B,!1)}},[w,_.length,_.join("-")]);const A=[];if(y!==f){let E=[...y];for(let B=0;B<w.length;B++){const O=w[B],H=hl(O);_.includes(H)||(E.splice(B,0,O),A.push(O))}return S==="wait"&&A.length&&(E=A),R(pm(E)),g(y),null}const{forceRender:z}=L.useContext(kh);return e.jsx(e.Fragment,{children:w.map(E=>{const B=hl(E),O=b&&!v?!1:y===w||_.includes(B),H=()=>{if(p.current.has(B))return;if(p.current.add(B),h.has(B))h.set(B,!0);else return;let K=!0;h.forEach(U=>{U||(K=!1)}),K&&(z==null||z(),R(C.current),b&&(d==null||d()),o&&o())};return e.jsx(U5,{isPresent:O,initial:!j.current||s?void 0:!1,custom:i,presenceAffectsLayout:u,mode:S,root:m,onExitComplete:O?void 0:H,anchorX:l,anchorY:c,children:E},B)})})},s1=L.createContext({strict:!1}),fm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let gm=!1;function K5(){if(gm)return;const t={};for(const i in fm)t[i]={isEnabled:s=>fm[i].some(o=>!!s[o])};Dy(t),gm=!0}function o1(){return K5(),zj()}function q5(t){const i=o1();for(const s in t)i[s]={...i[s],...t[s]};Dy(i)}const G5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Wl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G5.has(t)}let a1=t=>!Wl(t);function Y5(t){typeof t=="function"&&(a1=i=>i.startsWith("on")?!Wl(i):t(i))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function X5(t,i,s){const o={};for(const u in t)u==="values"&&typeof t.values=="object"||(a1(u)||s===!0&&Wl(u)||!i&&!Wl(u)||t.draggable&&u.startsWith("onDrag"))&&(o[u]=t[u]);return o}const Zl=L.createContext({});function J5(t,i){if(Ql(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Uo(s)?s:void 0,animate:Uo(o)?o:void 0}}return t.inherit!==!1?i:{}}function Q5(t){const{initial:i,animate:s}=J5(t,L.useContext(Zl));return L.useMemo(()=>({initial:i,animate:s}),[xm(i),xm(s)])}function xm(t){return Array.isArray(t)?t.join(" "):t}const tp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function l1(t,i,s){for(const o in i)!Sr(i[o])&&!Wy(o,s)&&(t[o]=i[o])}function Z5({transformTemplate:t},i){return L.useMemo(()=>{const s=tp();return Qh(s,i,t),Object.assign({},s.vars,s.style)},[i])}function e4(t,i){const s=t.style||{},o={};return l1(o,s,t),Object.assign(o,Z5(t,i)),o}function t4(t,i){const s={},o=e4(t,i);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const c1=()=>({...tp(),attrs:{}});function r4(t,i,s,o){const u=L.useMemo(()=>{const S=c1();return Ny(S,i,Uy(o),t.transformTemplate,t.style),{...S.attrs,style:{...S.style}}},[i]);if(t.style){const S={};l1(S,t.style,t),u.style={...S,...u.style}}return u}const i4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rp(t){return typeof t!="string"||t.includes("-")?!1:!!(i4.indexOf(t)>-1||/[A-Z]/u.test(t))}function n4(t,i,s,{latestValues:o},u,S=!1,b){const c=(b??rp(t)?r4:t4)(i,o,u,t),m=X5(i,typeof t=="string",S),v=t!==L.Fragment?{...m,...c,ref:s}:{},{children:d}=i,y=L.useMemo(()=>Sr(d)?d.get():d,[d]);return L.createElement(t,{...v,children:y})}function s4({scrapeMotionValuesFromProps:t,createRenderState:i},s,o,u){return{latestValues:o4(s,o,u,t),renderState:i()}}function o4(t,i,s,o){const u={},S=o(t,{});for(const y in S)u[y]=Tl(S[y]);let{initial:b,animate:l}=t;const c=Ql(t),m=zy(t);i&&m&&!c&&t.inherit!==!1&&(b===void 0&&(b=i.initial),l===void 0&&(l=i.animate));let v=s?s.initial===!1:!1;v=v||b===!1;const d=v?l:b;if(d&&typeof d!="boolean"&&!Jl(d)){const y=Array.isArray(d)?d:[d];for(let _=0;_<y.length;_++){const j=Uh(t,y[_]);if(j){const{transitionEnd:C,transition:h,...p}=j;for(const f in p){let g=p[f];if(Array.isArray(g)){const w=v?g.length-1:0;g=g[w]}g!==null&&(u[f]=g)}for(const f in C)u[f]=C[f]}}}return u}const d1=t=>(i,s)=>{const o=L.useContext(Zl),u=L.useContext(Xl),S=()=>s4(t,i,o,u);return s?S():jh(S)},a4=d1({scrapeMotionValuesFromProps:Zh,createRenderState:tp}),l4=d1({scrapeMotionValuesFromProps:Vy,createRenderState:c1}),c4=Symbol.for("motionComponentSymbol");function d4(t,i,s){const o=L.useRef(s);L.useInsertionEffect(()=>{o.current=s});const u=L.useRef(null);return L.useCallback(S=>{var l;S&&((l=t.onMount)==null||l.call(t,S)),i&&(S?i.mount(S):i.unmount());const b=o.current;if(typeof b=="function")if(S){const c=b(S);typeof c=="function"&&(u.current=c)}else u.current?(u.current(),u.current=null):b(S);else b&&(b.current=S)},[i])}const u1=L.createContext({});function _s(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function u4(t,i,s,o,u,S){var g,w;const{visualElement:b}=L.useContext(Zl),l=L.useContext(s1),c=L.useContext(Xl),m=L.useContext(ep),v=m.reducedMotion,d=m.skipAnimations,y=L.useRef(null),_=L.useRef(!1);o=o||l.renderer,!y.current&&o&&(y.current=o(t,{visualState:i,parent:b,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:v,skipAnimations:d,isSVG:S}),_.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const j=y.current,C=L.useContext(u1);j&&!j.projection&&u&&(j.type==="html"||j.type==="svg")&&h4(y.current,s,u,C);const h=L.useRef(!1);L.useInsertionEffect(()=>{j&&h.current&&j.update(s,c)});const p=s[vy],f=L.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return D0(()=>{_.current=!0,j&&(h.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),f.current&&j.animationState&&j.animationState.animateChanges())}),L.useEffect(()=>{j&&(!f.current&&j.animationState&&j.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,p)}),f.current=!1),j.enteringChildren=void 0)}),j}function h4(t,i,s,o){const{layoutId:u,layout:S,drag:b,dragConstraints:l,layoutScroll:c,layoutRoot:m,layoutCrossfade:v}=i;t.projection=new s(t.latestValues,i["data-framer-portal-id"]?void 0:h1(t.parent)),t.projection.setOptions({layoutId:u,layout:S,alwaysMeasureLayout:!!b||l&&_s(l),visualElement:t,animationType:typeof S=="string"?S:"both",initialPromotionConfig:o,crossfade:v,layoutScroll:c,layoutRoot:m})}function h1(t){if(t)return t.options.allowProjection!==!1?t.projection:h1(t.parent)}function lu(t,{forwardMotionProps:i=!1,type:s}={},o,u){o&&q5(o);const S=s?s==="svg":rp(t),b=S?l4:a4;function l(m,v){let d;const y={...L.useContext(ep),...m,layoutId:p4(m)},{isStatic:_}=y,j=Q5(m),C=b(m,_);if(!_&&I0){f4();const h=g4(y);d=h.MeasureLayout,j.visualElement=u4(t,C,y,u,h.ProjectionNode,S)}return e.jsxs(Zl.Provider,{value:j,children:[d&&j.visualElement?e.jsx(d,{visualElement:j.visualElement,...y}):null,n4(t,m,d4(C,j.visualElement,v),C,_,i,S)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=L.forwardRef(l);return c[c4]=t,c}function p4({layoutId:t}){const i=L.useContext(kh).id;return i&&t!==void 0?i+"-"+t:t}function f4(t,i){L.useContext(s1).strict}function g4(t){const i=o1(),{drag:s,layout:o}=i;if(!s&&!o)return{};const u={...s,...o};return{MeasureLayout:s!=null&&s.isEnabled(t)||o!=null&&o.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function x4(t,i){if(typeof Proxy>"u")return lu;const s=new Map,o=(S,b)=>lu(S,b,t,i),u=(S,b)=>o(S,b);return new Proxy(u,{get:(S,b)=>b==="create"?o:(s.has(b)||s.set(b,lu(b,void 0,t,i)),s.get(b))})}const m4=(t,i)=>i.isSVG??rp(t)?new Yj(i):new Hj(i,{allowProjection:t!==L.Fragment});class y4 extends En{constructor(i){super(i),i.animationState||(i.animationState=e5(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();Jl(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let v4=0;class b4 extends En{constructor(){super(...arguments),this.id=v4++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===o)return;const u=this.node.animationState.setActive("exit",!i);s&&!i&&u.then(()=>{s(this.id)})}mount(){const{register:i,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const _4={animation:{Feature:y4},exit:{Feature:b4}};function ea(t){return{point:{x:t.pageX,y:t.pageY}}}const S4=t=>i=>Gh(i)&&t(i,ea(i));function Oo(t,i,s,o){return Vo(t,i,S4(s),o)}const p1=({current:t})=>t?t.ownerDocument.defaultView:null,mm=(t,i)=>Math.abs(t-i);function w4(t,i){const s=mm(t.x,i.x),o=mm(t.y,i.y);return Math.sqrt(s**2+o**2)}const ym=new Set(["auto","scroll"]);class f1{constructor(i,s,{transformPagePoint:o,contextWindow:u=window,dragSnapToOrigin:S=!1,distanceThreshold:b=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=du(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,C=w4(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!C)return;const{point:h}=_,{timestamp:p}=hr;this.history.push({...h,timestamp:p});const{onStart:f,onMove:g}=this.handlers;j||(f&&f(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,_)},this.handlePointerMove=(_,j)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=cu(j,this.transformPagePoint),Rt.update(this.updatePoint,!0)},this.handlePointerUp=(_,j)=>{this.end();const{onEnd:C,onSessionEnd:h,resumeAnimation:p}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=du(_.type==="pointercancel"?this.lastMoveEventInfo:cu(j,this.transformPagePoint),this.history);this.startEvent&&C&&C(_,f),h&&h(_,f)},!Gh(i))return;this.dragSnapToOrigin=S,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=b,this.contextWindow=u||window;const c=ea(i),m=cu(c,this.transformPagePoint),{point:v}=m,{timestamp:d}=hr;this.history=[{...v,timestamp:d}];const{onSessionStart:y}=s;y&&y(i,du(m,this.history)),this.removeListeners=Jo(Oo(this.contextWindow,"pointermove",this.handlePointerMove),Oo(this.contextWindow,"pointerup",this.handlePointerUp),Oo(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(i){let s=i.parentElement;for(;s;){const o=getComputedStyle(s);(ym.has(o.overflowX)||ym.has(o.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(i){const s=this.scrollPositions.get(i);if(!s)return;const o=i===window,u=o?{x:window.scrollX,y:window.scrollY}:{x:i.scrollLeft,y:i.scrollTop},S={x:u.x-s.x,y:u.y-s.y};S.x===0&&S.y===0||(o?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=S.x,this.lastMoveEventInfo.point.y+=S.y):this.history.length>0&&(this.history[0].x-=S.x,this.history[0].y-=S.y),this.scrollPositions.set(i,u),Rt.update(this.updatePoint,!0))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),wn(this.updatePoint)}}function cu(t,i){return i?{point:i(t.point)}:t}function vm(t,i){return{x:t.x-i.x,y:t.y-i.y}}function du({point:t},i){return{point:t,delta:vm(t,g1(i)),offset:vm(t,C4(i)),velocity:k4(i,.1)}}function C4(t){return t[0]}function g1(t){return t[t.length-1]}function k4(t,i){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const u=g1(t);for(;s>=0&&(o=t[s],!(u.timestamp-o.timestamp>xi(i)));)s--;if(!o)return{x:0,y:0};o===t[0]&&t.length>2&&u.timestamp-o.timestamp>xi(i)*2&&(o=t[1]);const S=ti(u.timestamp-o.timestamp);if(S===0)return{x:0,y:0};const b={x:(u.x-o.x)/S,y:(u.y-o.y)/S};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function j4(t,{min:i,max:s},o){return i!==void 0&&t<i?t=o?Pt(i,t,o.min):Math.max(t,i):s!==void 0&&t>s&&(t=o?Pt(s,t,o.max):Math.min(t,s)),t}function bm(t,i,s){return{min:i!==void 0?t.min+i:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function E4(t,{top:i,left:s,bottom:o,right:u}){return{x:bm(t.x,s,u),y:bm(t.y,i,o)}}function _m(t,i){let s=i.min-t.min,o=i.max-t.max;return i.max-i.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function R4(t,i){return{x:_m(t.x,i.x),y:_m(t.y,i.y)}}function T4(t,i){let s=.5;const o=Er(t),u=Er(i);return u>o?s=Wo(i.min,i.max-o,t.min):o>u&&(s=Wo(t.min,t.max-u,i.min)),Ri(0,1,s)}function A4(t,i){const s={};return i.min!==void 0&&(s.min=i.min-t.min),i.max!==void 0&&(s.max=i.max-t.min),s}const ih=.35;function L4(t=ih){return t===!1?t=0:t===!0&&(t=ih),{x:Sm(t,"left","right"),y:Sm(t,"top","bottom")}}function Sm(t,i,s){return{min:wm(t,i),max:wm(t,s)}}function wm(t,i){return typeof t=="number"?t:t[i]||0}const z4=new WeakMap;class I4{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const S=d=>{s&&this.snapToCursor(ea(d).point),this.stopAnimation()},b=(d,y)=>{const{drag:_,dragPropagation:j,onDragStart:C}=this.getProps();if(_&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lj(_),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wi(p=>{let f=this.getAxisMotionValue(p).get()||0;if(ki.test(f)){const{projection:g}=this.visualElement;if(g&&g.layout){const w=g.layout.layoutBox[p];w&&(f=Er(w)*(parseFloat(f)/100))}}this.originPoint[p]=f}),C&&Rt.update(()=>C(d,y),!1,!0),Yu(this.visualElement,"transform");const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},l=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:j,onDirectionLock:C,onDrag:h}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:p}=y;if(j&&this.currentDirection===null){this.currentDirection=M4(p),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,p),this.updateAxis("y",y.point,p),this.visualElement.render(),h&&Rt.update(()=>h(d,y),!1,!0)},c=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y,this.stop(d,y),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:v}=this.getProps();this.panSession=new f1(i,{onSessionStart:S,onStart:b,onMove:l,onSessionEnd:c,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:o,contextWindow:p1(this.visualElement),element:this.visualElement.current})}stop(i,s){const o=i||this.latestPointerEvent,u=s||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!u||!o)return;const{velocity:b}=u;this.startAnimation(b);const{onDragEnd:l}=this.getProps();l&&Rt.postRender(()=>l(o,u))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(i,s,o){const{drag:u}=this.getProps();if(!o||!pl(i,u,this.currentDirection))return;const S=this.getAxisMotionValue(i);let b=this.originPoint[i]+o[i];this.constraints&&this.constraints[i]&&(b=j4(b,this.constraints[i],this.elastic[i])),S.set(b)}resolveConstraints(){var S;const{dragConstraints:i,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,u=this.constraints;i&&_s(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&o?this.constraints=E4(o.layoutBox,i):this.constraints=!1,this.elastic=L4(s),u!==this.constraints&&!_s(i)&&o&&this.constraints&&!this.hasMutatedConstraints&&wi(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=A4(o.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!_s(i))return!1;const o=i.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const S=Pj(o,u.root,this.visualElement.getTransformPagePoint());let b=R4(u.layout.layoutBox,S);if(s){const l=s(Dj(b));this.hasMutatedConstraints=!!l,l&&(b=By(l))}return b}startAnimation(i){const{drag:s,dragMomentum:o,dragElastic:u,dragTransition:S,dragSnapToOrigin:b,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},m=wi(v=>{if(!pl(v,s,this.currentDirection))return;let d=c&&c[v]||{};b&&(d={min:0,max:0});const y=u?200:1e6,_=u?40:1e7,j={type:"inertia",velocity:o?i[v]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...S,...d};return this.startAxisValueAnimation(v,j)});return Promise.all(m).then(l)}startAxisValueAnimation(i,s){const o=this.getAxisMotionValue(i);return Yu(this.visualElement,i),o.start(Hh(i,o,0,s,this.visualElement,!1))}stopAnimation(){wi(i=>this.getAxisMotionValue(i).stop())}getAxisMotionValue(i){const s=`_drag${i.toUpperCase()}`,o=this.visualElement.getProps(),u=o[s];return u||this.visualElement.getValue(i,(o.initial?o.initial[i]:void 0)||0)}snapToCursor(i){wi(s=>{const{drag:o}=this.getProps();if(!pl(s,o,this.currentDirection))return;const{projection:u}=this.visualElement,S=this.getAxisMotionValue(s);if(u&&u.layout){const{min:b,max:l}=u.layout.layoutBox[s],c=S.get()||0;S.set(i[s]-Pt(b,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!_s(s)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};wi(b=>{const l=this.getAxisMotionValue(b);if(l&&this.constraints!==!1){const c=l.get();u[b]=T4({min:c,max:c},this.constraints[b])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.constraints=!1,this.resolveConstraints(),wi(b=>{if(!pl(b,i,null))return;const l=this.getAxisMotionValue(b),{min:c,max:m}=this.constraints[b];l.set(Pt(c,m,u[b]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;z4.set(this.visualElement,this);const i=this.visualElement.current,s=Oo(i,"pointerdown",m=>{const{drag:v,dragListener:d=!0}=this.getProps(),y=m.target,_=y!==i&&fj(y);v&&d&&!_&&this.start(m)});let o;const u=()=>{const{dragConstraints:m}=this.getProps();_s(m)&&m.current&&(this.constraints=this.resolveRefConstraints(),o||(o=D4(i,m.current,()=>this.scalePositionWithinConstraints())))},{projection:S}=this.visualElement,b=S.addEventListener("measure",u);S&&!S.layout&&(S.root&&S.root.updateScroll(),S.updateLayout()),Rt.read(u);const l=Vo(window,"resize",()=>this.scalePositionWithinConstraints()),c=S.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:v})=>{this.isDragging&&v&&(wi(d=>{const y=this.getAxisMotionValue(d);y&&(this.originPoint[d]+=m[d].translate,y.set(y.get()+m[d].translate))}),this.visualElement.render())}));return()=>{l(),s(),b(),c&&c(),o&&o()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:S=!1,dragElastic:b=ih,dragMomentum:l=!0}=i;return{...i,drag:s,dragDirectionLock:o,dragPropagation:u,dragConstraints:S,dragElastic:b,dragMomentum:l}}}function Cm(t){let i=!0;return()=>{if(i){i=!1;return}t()}}function D4(t,i,s){const o=Lx(t,Cm(s)),u=Lx(i,Cm(s));return()=>{o(),u()}}function pl(t,i,s){return(i===!0||i===t)&&(s===null||s===t)}function M4(t,i=10){let s=null;return Math.abs(t.y)>i?s="y":Math.abs(t.x)>i&&(s="x"),s}class B4 extends En{constructor(i){super(i),this.removeGroupControls=ri,this.removeListeners=ri,this.controls=new I4(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ri}update(){const{dragControls:i}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};i!==s&&(this.removeGroupControls(),i&&(this.removeGroupControls=i.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const uu=t=>(i,s)=>{t&&Rt.update(()=>t(i,s),!1,!0)};class P4 extends En{constructor(){super(...arguments),this.removePointerDownListener=ri}onPointerDown(i){this.session=new f1(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:p1(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:uu(i),onStart:uu(s),onMove:uu(o),onEnd:(S,b)=>{delete this.session,u&&Rt.postRender(()=>u(S,b))}}}mount(){this.removePointerDownListener=Oo(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hu=!1;class O4 extends L.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o,layoutId:u}=this.props,{projection:S}=i;S&&(s.group&&s.group.add(S),o&&o.register&&u&&o.register(S),hu&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Al.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:o,drag:u,isPresent:S}=this.props,{projection:b}=o;return b&&(b.isPresent=S,i.layoutDependency!==s&&b.setOptions({...b.options,layoutDependency:s}),hu=!0,u||i.layoutDependency!==s||s===void 0||i.isPresent!==S?b.willUpdate():this.safeToRemove(),i.isPresent!==S&&(S?b.promote():b.relegate()||Rt.postRender(()=>{const l=b.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),qh.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:u}=i;hu=!0,u&&(u.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function x1(t){const[i,s]=n1(),o=L.useContext(kh);return e.jsx(O4,{...t,layoutGroup:o,switchLayoutGroup:L.useContext(u1),isPresent:i,safeToRemove:s})}const $4={pan:{Feature:P4},drag:{Feature:B4,ProjectionNode:i1,MeasureLayout:x1}};function km(t,i,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const u="onHover"+s,S=o[u];S&&Rt.postRender(()=>S(i,ea(i)))}class F4 extends En{mount(){const{current:i}=this.node;i&&(this.unmount=dj(i,(s,o)=>(km(this.node,o,"Start"),u=>km(this.node,u,"End"))))}unmount(){}}class W4 extends En{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jo(Vo(this.node.current,"focus",()=>this.onFocus()),Vo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jm(t,i,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const u="onTap"+(s==="End"?"":s),S=o[u];S&&Rt.postRender(()=>S(i,ea(i)))}class N4 extends En{mount(){const{current:i}=this.node;if(!i)return;const{globalTapTarget:s,propagate:o}=this.node.props;this.unmount=xj(i,(u,S)=>(jm(this.node,S,"Start"),(b,{success:l})=>jm(this.node,b,l?"End":"Cancel")),{useGlobalTarget:s,stopPropagation:(o==null?void 0:o.tap)===!1})}unmount(){}}const nh=new WeakMap,pu=new WeakMap,H4=t=>{const i=nh.get(t.target);i&&i(t)},U4=t=>{t.forEach(H4)};function V4({root:t,...i}){const s=t||document;pu.has(s)||pu.set(s,{});const o=pu.get(s),u=JSON.stringify(i);return o[u]||(o[u]=new IntersectionObserver(U4,{root:t,...i})),o[u]}function K4(t,i,s){const o=V4(i);return nh.set(t,s),o.observe(t),()=>{nh.delete(t),o.unobserve(t)}}const q4={some:0,all:1};class G4 extends En{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:o,amount:u="some",once:S}=i,b={root:s?s.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:q4[u]},l=c=>{const{isIntersecting:m}=c;if(this.isInView===m||(this.isInView=m,S&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:d}=this.node.getProps(),y=m?v:d;y&&y(c)};return K4(this.node.current,b,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(Y4(i,s))&&this.startObserver()}unmount(){}}function Y4({viewport:t={}},{viewport:i={}}={}){return s=>t[s]!==i[s]}const X4={inView:{Feature:G4},tap:{Feature:N4},focus:{Feature:W4},hover:{Feature:F4}},J4={layout:{ProjectionNode:i1,MeasureLayout:x1}},Q4={..._4,...X4,...$4,...J4},qt=x4(Q4,m4),xe={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",cyan:"#06b6d4",mono:'"JetBrains Mono","Fira Code",monospace'},Em={id:"welcome",role:"assistant",content:`I'm your AI agent architect. I can see your uploaded screenshots directly  upload references and let's discuss the design.

Start by uploading screenshots, adding URLs, or describing the style you want.`},Rm=t=>({id:"welcome",role:"assistant",content:`I've loaded the current prompt for **${t.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase())}**. I'm ready to help you enhance it.

Tell me what you'd like to improve  capabilities, style, structure, new sections, or anything else.`}),ip=({onClose:t,initialAgent:i})=>{var fr,Tr,gr;const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(""),[c,m]=L.useState(!1),[v,d]=L.useState(""),[y,_]=L.useState([]),[j,C]=L.useState(""),[h,p]=L.useState([]),[f,g]=L.useState(""),[w,R]=L.useState(!1),[A,z]=L.useState(""),[E,B]=L.useState(!1),[O,H]=L.useState(!1),[K,U]=L.useState(!1),[ee,V]=L.useState(!1),[ue,Q]=L.useState(!1),[G,M]=L.useState(null),[I,D]=L.useState(null),[W,fe]=L.useState(!1),[ye,we]=L.useState(null),[Re,Y]=L.useState(""),[F,be]=L.useState(!1),[oe,Ie]=L.useState(null),[Z,je]=L.useState(!1),[pe,De]=L.useState(!1),[$e,Pe]=L.useState(""),Ee=L.useRef(null),He=L.useRef(null);L.useEffect(()=>{J().then(async ae=>{var ut;if(i)try{const _t=i.name.replace(/-/g," ").replace(/\b\w/g,Xt=>Xt.toUpperCase()),mt=(await le("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:`Enhance: ${_t}`})})).conversation;if(o(Xt=>[mt,...Xt]),S(mt.id),l(mt.name),localStorage.setItem("atp-agent-creator-conv",mt.id),Pe(i.name),i.prompt&&(z(i.prompt),R(!0)),p([Rm(i.name)]),_([]),i.prompt)try{const Xt=`I want to enhance this existing agent "${_t}". Here is its current prompt:

\`\`\`
${i.prompt.slice(0,8e3)}
\`\`\`

Please analyze it and wait for my instructions on what to improve.`,$r=await le(`/api/agent-creator/conversations/${mt.id}/messages`,{method:"POST",body:JSON.stringify({message:Xt})}),Kr={id:`init-${Date.now()}`,role:"user",content:Xt},ni=((ut=$r.message)==null?void 0:ut.content)||$r.response||"",Ar={id:`resp-${Date.now()}`,role:"assistant",content:ni};p(Fr=>[...Fr,Kr,Ar])}catch(Xt){console.error("Failed to send initial context:",Xt)}return}catch(_t){console.error("Failed to create enhance conversation:",_t)}if(!ae||ae.length===0)return;const We=localStorage.getItem("atp-agent-creator-conv"),Ge=We?ae.find(_t=>_t.id===We):null;Ne(Ge||ae[0])})},[]),L.useEffect(()=>{var ae;(ae=Ee.current)==null||ae.scrollIntoView({behavior:"smooth"})},[h]),L.useEffect(()=>{c&&He.current&&He.current.focus()},[c]);const J=async()=>{try{const We=(await le("/api/agent-creator/conversations")).conversations||[];return o(We),We}catch(ae){return console.error("Failed to load conversations:",ae),[]}},ce=async ae=>{try{const Ge=(await le("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:ae||"New Agent"})})).conversation;o(ut=>[Ge,...ut]),Ne(Ge)}catch(We){console.error("Failed to create conversation:",We)}},Ne=async ae=>{S(ae.id),l(ae.name),localStorage.setItem("atp-agent-creator-conv",ae.id),m(!1),M(null),z(""),D(null),R(!1),we(null),Pe(""),Ie(null),De(!1);try{const Ge=(await le(`/api/agent-creator/conversations/${ae.id}`)).conversation,ut=(Ge.messages||[]).map(mt=>({id:mt.id,role:mt.role,content:mt.content})),_t=ae.name.startsWith("Enhance:")?Rm(ae.name.replace("Enhance: ","")):Em;if(p(ut.length>0?ut:[_t]),_(Ge.references||[]),Ge.design_brief&&M(Ge.design_brief),Ge.generated_agent){z(Ge.generated_agent),R(!0);const mt=Ge.generated_agent.match(/^name:\s*(.+)$/m);mt&&Pe(mt[1].trim())}const Yt=`/uploads/agent-creator/preview-${ae.id}.png`;fetch(Yt,{method:"HEAD"}).then(mt=>{mt.ok&&Ie(Yt+"?t="+Date.now())}).catch(()=>{})}catch(We){console.error("Failed to load conversation:",We),p([Em]),_([])}},et=async()=>{if(!(!u||!v.trim()))try{await le(`/api/agent-creator/conversations/${u}`,{method:"PUT",body:JSON.stringify({name:v.trim()})}),l(v.trim()),o(ae=>ae.map(We=>We.id===u?{...We,name:v.trim()}:We)),m(!1)}catch(ae){console.error("Failed to rename:",ae)}},Je=async ae=>{try{await le(`/api/agent-creator/conversations/${ae}`,{method:"DELETE"}),o(We=>We.filter(Ge=>Ge.id!==ae)),u===ae&&(S(null),p([]),_([]),M(null),z(""),localStorage.removeItem("atp-agent-creator-conv"))}catch(We){console.error("Failed to delete conversation:",We)}},pt=async()=>{var ae;if(!(!j.trim()||!u||W)){fe(!0);try{const We=await le(`/api/agent-creator/conversations/${u}/urls`,{method:"POST",body:JSON.stringify({url:j})});_(ut=>[...ut,We.reference]);const Ge=We.reference.profile_image_url||((ae=We.reference.structured_analysis)==null?void 0:ae.profile_image_url);if(Ge&&(p(ut=>[...ut,{id:`profile-${Date.now()}`,role:"assistant",content:`![Profile Picture](${Ge})

I found and saved the profile picture from this URL. It will be used as the agent's avatar.`}]),i))try{await le(`/api/agents/${i.name}/screenshot`,{method:"PATCH",body:JSON.stringify({screenshot_path:Ge})})}catch(ut){console.warn("Failed to update agent screenshot:",ut)}C("")}catch(We){console.error("Failed to add URL:",We)}finally{fe(!1)}}},Gt=async ae=>{const We=ae.target.files;if(!(!We||We.length===0||!u)){B(!0);try{for(let Ge=0;Ge<We.length;Ge++){const ut=new FormData;ut.append("image",We[Ge]);const _t=await fetch(`/api/agent-creator/conversations/${u}/images`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("atp-token")}`},body:ut});if(!_t.ok){const mt=await _t.json().catch(()=>({error:_t.statusText}));throw new Error(mt.error||"Upload failed")}const Yt=await _t.json();_(mt=>[...mt,Yt.reference])}}catch(Ge){console.error("Failed to upload image:",Ge)}finally{B(!1),ae.target&&(ae.target.value="")}}},Ct=async ae=>{if(u)try{await le(`/api/agent-creator/conversations/${u}/references/${ae}`,{method:"DELETE"}),_(We=>We.filter(Ge=>Ge.id!==ae))}catch(We){console.error("Failed to remove reference:",We)}},kt=async()=>{if(!f.trim()||!u||O)return;const ae={id:Date.now().toString(),role:"user",content:f};p(We=>[...We.filter(Ge=>Ge.id!=="welcome"),ae]),g(""),H(!0);try{const We=await le(`/api/agent-creator/conversations/${u}/messages`,{method:"POST",body:JSON.stringify({message:f})});p(Ge=>[...Ge,{id:We.message.id,role:"assistant",content:We.message.content}])}catch(We){p(Ge=>[...Ge,{id:(Date.now()+1).toString(),role:"assistant",content:`Error: ${We.message||"Failed"}`}])}finally{H(!1)}},Lt=async()=>{if(!(!u||ue)){Q(!0);try{const ae=await le(`/api/agent-creator/conversations/${u}/analyze`,{method:"POST"});M(ae.brief),p(We=>{var Ge,ut,_t,Yt;return[...We,{id:`brief-${Date.now()}`,role:"assistant",content:`Design Brief synthesized from ${y.length} reference(s):

**Aesthetic**: ${((Ge=ae.brief.agentIdentity)==null?void 0:Ge.aesthetic)||"custom"}
**Colors**: ${Object.keys(((ut=ae.brief.colorSystem)==null?void 0:ut.cssVariables)||{}).length} CSS variables
**Fonts**: ${((_t=ae.brief.typographySystem)==null?void 0:_t.displayFont)||"?"} + ${((Yt=ae.brief.typographySystem)==null?void 0:Yt.bodyFont)||"?"}
**Components**: ${(ae.brief.componentInventory||[]).map(mt=>mt.name).join(", ")}

Ready to generate. Click **Generate Agent**.`}]})}catch(ae){console.error("Failed to analyze:",ae)}finally{Q(!1)}}},bt=async()=>{if(!(!u||K)){U(!0),R(!0),z(""),D(null);try{const ae=await le(`/api/agent-creator/conversations/${u}/generate`,{method:"POST"});z(ae.agentFile),D(ae.validation);const We=ae.agentFile.match(/^name:\s*(.+)$/m);We&&Pe(We[1].trim())}catch(ae){console.error("Failed to generate:",ae),z(`# Error generating agent

${ae.message||"Unknown error"}`)}finally{U(!1)}}},It=async()=>{if(!(!u||!ye||!Re.trim()||F)){be(!0);try{const ae=await le(`/api/agent-creator/conversations/${u}/refine`,{method:"POST",body:JSON.stringify({section:ye,feedback:Re})});z(ae.agentFile),D(ae.validation),we(null),Y("")}catch(ae){console.error("Failed to refine:",ae)}finally{be(!1)}}},gt=async()=>{if(!(!u||Z)){je(!0);try{const ae=await le(`/api/agent-creator/conversations/${u}/preview-image`,{method:"POST"});Ie(ae.previewUrl+"?t="+Date.now())}catch(ae){console.error("Failed to generate preview:",ae),alert(`Preview failed: ${ae.message||"Unknown error"}`)}finally{je(!1)}}},Rr=async()=>{if(!(!u||!A||ee)){V(!0);try{let ae=A;$e.trim()&&(ae=ae.replace(/^name:\s*.+$/m,`name: ${$e.trim()}`));const We=await le(`/api/agent-creator/conversations/${u}/save`,{method:"POST",body:JSON.stringify({agentContent:ae})});We.success&&(alert(`Agent "${We.agent.name}" saved to library!`),t())}catch(ae){alert(`Failed: ${ae.message||"Unknown error"}`)}finally{V(!1)}}},pr=A?(A.match(/^## .+$/gm)||[]).map(ae=>ae.replace("## ","")):[],ii=ae=>{const We=Date.now()-new Date(ae).getTime(),Ge=Math.floor(We/6e4);if(Ge<1)return"now";if(Ge<60)return`${Ge}m`;const ut=Math.floor(Ge/60);return ut<24?`${ut}h`:`${Math.floor(ut/24)}d`};return e.jsxs("div",{style:{backgroundColor:xe.bg,color:xe.tp,position:"fixed",inset:0,zIndex:1e3,display:"flex",flexDirection:"column",fontFamily:"Inter, system-ui, sans-serif"},children:[e.jsxs("header",{style:{padding:"10px 20px",borderBottom:`1px solid ${xe.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:xe.surface,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:xe.violetG,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${xe.violetM}`},children:e.jsx(xn,{size:18,color:xe.violet})}),e.jsxs("div",{children:[u&&!c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:b}),e.jsx("button",{onClick:()=>{m(!0),d(b)},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px"},children:e.jsx(Xo,{size:12})})]}):u&&c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("input",{ref:He,type:"text",value:v,onChange:ae=>d(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&et(),ae.key==="Escape"&&m(!1)},style:{background:xe.bg,border:`1px solid ${xe.violet}`,borderRadius:"4px",padding:"2px 8px",color:xe.tp,fontSize:"14px",fontWeight:600,outline:"none",width:"200px"}}),e.jsx("button",{onClick:et,style:{background:"none",border:"none",color:xe.success,cursor:"pointer",padding:"2px"},children:e.jsx(sr,{size:14})}),e.jsx("button",{onClick:()=>m(!1),style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px"},children:e.jsx(St,{size:14})})]}):e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:"Agent Architect"}),e.jsx("span",{style:{fontSize:"11px",color:xe.tm},children:u?`${y.length} refs | ${h.filter(ae=>ae.id!=="welcome").length} msgs`:"Select or create a conversation"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[I&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"6px",background:I.score>=7?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${I.score>=7?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[I.score>=7?e.jsx(cl,{size:14,color:xe.success}):e.jsx(cx,{size:14,color:xe.warning}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:I.score>=7?xe.success:xe.warning},children:[I.score,"/10 | ",I.totalLines," lines"]})]}),e.jsx("button",{onClick:t,style:{background:"none",border:"none",color:xe.ts,cursor:"pointer",padding:"6px",borderRadius:"50%"},children:e.jsx(St,{size:18})})]})]}),e.jsxs("main",{style:{flex:1,display:"grid",gridTemplateColumns:w?"220px 260px 1fr 420px":"220px 260px 1fr",overflow:"hidden",minHeight:0},children:[e.jsxs("aside",{style:{borderRight:`1px solid ${xe.border}`,background:xe.bg,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px",borderBottom:`1px solid ${xe.border}`},children:e.jsxs("button",{onClick:()=>ce(),style:{width:"100%",padding:"8px",borderRadius:"8px",fontWeight:600,fontSize:"12px",cursor:"pointer",background:xe.violetG,color:xe.violet,border:`1px solid ${xe.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(er,{size:14})," New Conversation"]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[s.length===0&&e.jsxs("div",{style:{padding:"24px 16px",textAlign:"center",color:xe.tm,fontSize:"12px"},children:["No conversations yet.",e.jsx("br",{}),'Click "New" to start.']}),s.map(ae=>e.jsx("div",{onClick:()=>Ne(ae),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${xe.border}`,background:ae.id===u?xe.surfaceEl:"transparent",borderLeft:ae.id===u?`2px solid ${xe.violet}`:"2px solid transparent",transition:"all 0.15s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"12px",fontWeight:600,color:ae.id===u?xe.tp:xe.ts,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:ae.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"3px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:xe.tm,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Yo,{size:9})," ",ii(ae.updated_at||ae.created_at)]}),ae.generation_status==="complete"&&e.jsx("span",{style:{fontSize:"9px",color:xe.success,padding:"0 4px",background:"rgba(34,197,94,0.1)",borderRadius:"3px"},children:"generated"}),ae.generation_status==="analyzing"&&e.jsx("span",{style:{fontSize:"9px",color:xe.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"analyzing"}),ae.generation_status==="briefing"&&e.jsx("span",{style:{fontSize:"9px",color:xe.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"briefing"}),ae.generation_status==="generating"&&e.jsx("span",{style:{fontSize:"9px",color:xe.warning,padding:"0 4px",background:"rgba(245,158,11,0.1)",borderRadius:"3px"},children:"generating"}),ae.generation_status==="error"&&e.jsx("span",{style:{fontSize:"9px",color:xe.danger,padding:"0 4px",background:"rgba(239,68,68,0.1)",borderRadius:"3px"},children:"error"})]})]}),e.jsx("button",{onClick:We=>{We.stopPropagation(),Je(ae.id)},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",opacity:.5,flexShrink:0},children:e.jsx(Or,{size:11})})]})},ae.id))]})]}),e.jsx("aside",{style:{borderRight:`1px solid ${xe.border}`,background:xe.surface,display:"flex",flexDirection:"column",padding:"12px",gap:"12px",overflowY:"auto",minHeight:0},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"11px",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",fontWeight:700},children:"References"}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"16px 10px",border:`1px dashed ${xe.borderS}`,borderRadius:"8px",cursor:"pointer",backgroundColor:xe.bg},children:[e.jsx(ix,{size:18,color:E?xe.violet:xe.ts}),e.jsx("span",{style:{fontSize:"11px",color:xe.ts},children:E?"Analyzing...":"Upload screenshots"}),e.jsx("input",{type:"file",hidden:!0,onChange:Gt,accept:"image/*",multiple:!0,disabled:E})]}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx(Iu,{size:11,color:xe.tm,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{type:"text",placeholder:"URL...",value:j,onChange:ae=>C(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&pt(),style:{width:"100%",background:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"7px 8px 7px 26px",color:xe.tp,fontSize:"11px",outline:"none"}})]}),e.jsx("button",{onClick:pt,disabled:W,style:{padding:"7px",borderRadius:"6px",background:xe.violet,border:"none",color:"white",cursor:"pointer"},children:W?e.jsx(Fi,{size:12,className:"animate-spin"}):e.jsx(er,{size:12})})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{fontSize:"10px",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",fontWeight:700},children:["Context (",y.length,")"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[y.length===0&&e.jsx("div",{style:{padding:"12px",textAlign:"center",color:xe.tm,fontSize:"11px"},children:"No references yet"}),e.jsx(au,{initial:!1,children:y.map(ae=>{var We,Ge,ut,_t,Yt,mt;return e.jsxs(qt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},style:{padding:"6px",background:xe.surfaceEl,borderRadius:"6px",border:`1px solid ${ae.structured_analysis?"rgba(34,197,94,0.15)":xe.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[ae.type==="image"||ae.profile_image_url||(We=ae.structured_analysis)!=null&&We.profile_image_url?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:ae.profile_image_url||(Ge=ae.structured_analysis)!=null&&Ge.profile_image_url?"50%":"3px",overflow:"hidden",background:xe.bg,flexShrink:0},children:e.jsx("img",{src:ae.type==="image"?ae.url:ae.profile_image_url||((ut=ae.structured_analysis)==null?void 0:ut.profile_image_url),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"3px",background:xe.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Iu,{size:10,color:xe.ts})}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"10px",color:xe.tp,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0},children:ae.filename||ae.url}),ae.structured_analysis&&e.jsxs("span",{style:{fontSize:"9px",color:xe.success,display:"flex",alignItems:"center",gap:"2px",marginTop:"1px"},children:[e.jsx(cl,{size:8})," Analyzed"]})]}),e.jsx("button",{onClick:()=>Ct(ae.id),style:{background:"none",border:"none",cursor:"pointer",color:xe.tm,padding:"2px"},children:e.jsx(Or,{size:10})})]}),ae.type==="url"&&(ae.profile_image_url||((_t=ae.structured_analysis)==null?void 0:_t.profile_image_url))&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("img",{src:ae.profile_image_url||((Yt=ae.structured_analysis)==null?void 0:Yt.profile_image_url),alt:"Profile",style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${xe.violet}`}}),e.jsxs("span",{style:{fontSize:"9px",color:xe.success,display:"flex",alignItems:"center",gap:"2px"},children:[e.jsx(cl,{size:8})," Profile pic saved"]})]}),ae.structured_analysis&&ae.type==="image"&&ae.structured_analysis.colors&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",gap:"2px",flexWrap:"wrap"},children:[[ae.structured_analysis.colors.dominantBackground,ae.structured_analysis.colors.primaryAccent,ae.structured_analysis.colors.secondaryAccent].filter(Boolean).map((Xt,$r)=>e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"2px",background:Xt,border:"1px solid rgba(255,255,255,0.1)"},title:Xt},$r)),((mt=ae.structured_analysis.components)==null?void 0:mt.overallAesthetic)&&e.jsx("span",{style:{fontSize:"8px",color:xe.tm,padding:"1px 4px",background:xe.bg,borderRadius:"2px",marginLeft:"2px"},children:ae.structured_analysis.components.overallAesthetic})]})]},ae.id)})})]})]}),y.length>0&&e.jsx("button",{onClick:Lt,disabled:ue,style:{width:"100%",padding:"8px",borderRadius:"6px",fontWeight:600,fontSize:"11px",cursor:ue?"not-allowed":"pointer",background:G?"rgba(34,197,94,0.1)":xe.violetG,color:G?xe.success:xe.violet,border:`1px solid ${G?"rgba(34,197,94,0.2)":xe.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:ue?e.jsxs(e.Fragment,{children:[e.jsx(Fi,{size:12})," Synthesizing..."]}):G?e.jsxs(e.Fragment,{children:[e.jsx(cl,{size:12})," Brief ready"]}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{size:12})," Analyze & Brief"]})}),G&&e.jsxs("div",{style:{padding:"8px",borderRadius:"6px",background:xe.bg,border:`1px solid ${xe.border}`,fontSize:"10px"},children:[e.jsx("div",{style:{color:xe.tm,fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px",fontSize:"9px"},children:"Brief"}),e.jsxs("div",{style:{color:xe.ts,lineHeight:"1.5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(dw,{size:9,color:xe.cyan}),Object.keys(((fr=G.colorSystem)==null?void 0:fr.cssVariables)||{}).length," CSS vars"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Lo,{size:9,color:xe.cyan}),((Tr=G.typographySystem)==null?void 0:Tr.displayFont)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Il,{size:9,color:xe.cyan}),((gr=G.layoutArchitecture)==null?void 0:gr.primaryLayout)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(zs,{size:9,color:xe.cyan}),(G.componentInventory||[]).length," comps"]})]})]})]}):e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:xe.tm,fontSize:"12px",textAlign:"center",padding:"20px"},children:"Select or create a conversation to start"})}),e.jsx("section",{style:{display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 6%",display:"flex",flexDirection:"column",gap:"14px"},children:[h.map(ae=>e.jsxs(qt.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:ae.role==="user"?"flex-end":"flex-start",flexDirection:ae.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:ae.role==="user"?xe.surfaceEl:xe.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:`1px solid ${ae.role==="user"?xe.border:xe.violetM}`},children:ae.role==="user"?e.jsx(jn,{size:12,color:xe.ts}):e.jsx(Ht,{size:12,color:xe.violet})}),e.jsx("div",{style:{background:ae.role==="user"?xe.violet:xe.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopRightRadius:ae.role==="user"?"3px":"12px",borderTopLeftRadius:ae.role==="assistant"?"3px":"12px",color:ae.role==="user"?"white":xe.tp,fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:ae.content.split(/(\!\[.*?\]\(.*?\))/).map((We,Ge)=>{const ut=We.match(/^\!\[(.*?)\]\((.*?)\)$/);return ut?e.jsx("img",{src:ut[2],alt:ut[1],style:{maxWidth:"120px",borderRadius:"12px",display:"block",margin:"4px 0",border:`2px solid ${xe.violet}40`}},Ge):e.jsx("span",{children:We},Ge)})})]},ae.id)),O&&e.jsxs(qt.div,{initial:{opacity:0},animate:{opacity:1},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:"flex-start"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:xe.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ht,{size:12,color:xe.violet})}),e.jsx("div",{style:{background:xe.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopLeftRadius:"3px",color:xe.ts,fontSize:"13px"},children:"Analyzing images & thinking..."})]}),e.jsx("div",{ref:Ee})]}),e.jsx("div",{style:{padding:"12px 20px",borderTop:`1px solid ${xe.border}`,background:xe.bg},children:e.jsxs("div",{style:{maxWidth:"680px",margin:"0 auto",background:xe.surface,borderRadius:"10px",border:`1px solid ${xe.borderS}`,padding:"3px"},children:[e.jsx("textarea",{value:f,onChange:ae=>g(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),kt()),placeholder:"Describe the design, ask about your screenshots...",disabled:O,style:{width:"100%",background:"transparent",border:"none",color:xe.tp,padding:"8px 10px",height:"48px",resize:"none",outline:"none",fontSize:"13px",fontFamily:"inherit"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 6px"},children:[e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[y.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:xe.tm,display:"flex",alignItems:"center",gap:"3px",padding:"4px 8px",background:xe.bg,borderRadius:"4px"},children:[e.jsx(ix,{size:10})," ",y.filter(ae=>ae.type==="image").length," images in vision"]}),e.jsx("button",{onClick:bt,disabled:K||h.filter(ae=>ae.id!=="welcome").length<2,style:{background:K?xe.surfaceEl:xe.violetG,color:K?xe.tm:xe.violet,border:`1px solid ${K?xe.border:xe.violetM}`,borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:K?"not-allowed":"pointer"},children:K?e.jsxs(e.Fragment,{children:[e.jsx(Fi,{size:11})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zu,{size:11})," ",w?"Regenerate":"Generate"]})})]}),e.jsxs("button",{onClick:kt,disabled:!f.trim()||O,style:{background:f.trim()&&!O?xe.violet:xe.surfaceEl,color:f.trim()&&!O?"white":xe.tm,border:"none",borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:f.trim()&&!O?"pointer":"not-allowed"},children:[e.jsx(Ch,{size:11})," Send"]})]})]})})]}):e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",color:xe.tm},children:[e.jsx(xn,{size:40,color:xe.tm}),e.jsx("span",{style:{fontSize:"14px"},children:"Create or select a conversation"}),e.jsxs("button",{onClick:()=>ce(),style:{padding:"10px 20px",borderRadius:"8px",background:xe.violet,color:"white",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:14})," New Conversation"]})]})}),e.jsx(au,{children:w&&e.jsxs(qt.aside,{initial:{width:0,opacity:0},animate:{width:420,opacity:1},exit:{width:0,opacity:0},style:{borderLeft:`1px solid ${xe.border}`,background:xe.surface,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${xe.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(zu,{size:13,color:xe.ts}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:xe.ts},children:"agent.md"})]}),I&&e.jsxs("div",{style:{display:"flex",gap:"6px",fontSize:"10px",color:xe.tm},children:[e.jsxs("span",{children:[I.totalLines,"L"]}),e.jsxs("span",{children:[I.stats.cssVariables,"vars"]}),e.jsxs("span",{children:[I.sections.filter(ae=>ae.found).length,"/",I.sections.length,"sec"]})]})]}),A&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",color:xe.tm,flexShrink:0},children:"Name:"}),e.jsx("input",{type:"text",value:$e,onChange:ae=>Pe(ae.target.value),placeholder:"agent-name",style:{flex:1,background:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"4px",padding:"3px 8px",color:xe.tp,fontSize:"12px",fontWeight:600,fontFamily:xe.mono,outline:"none"}}),e.jsxs("button",{onClick:gt,disabled:Z,title:oe?"Regenerate Preview":"Generate Preview",style:{padding:"4px 10px",borderRadius:"5px",fontSize:"10px",fontWeight:600,cursor:Z?"not-allowed":"pointer",background:Z?xe.surfaceEl:"rgba(6,182,212,0.12)",color:Z?xe.tm:xe.cyan,border:`1px solid ${Z?xe.border:"rgba(6,182,212,0.25)"}`,display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap",flexShrink:0},children:[Z?e.jsx(Fi,{size:10,style:{animation:"spin 1s linear infinite"}}):e.jsx(US,{size:10}),Z?"Generating...":oe?"Regen":"Preview"]})]})]}),pr.length>0&&e.jsx("div",{style:{padding:"6px 14px",borderBottom:`1px solid ${xe.border}`,display:"flex",flexWrap:"wrap",gap:"3px"},children:pr.map((ae,We)=>{const Ge=I==null?void 0:I.sections.find(ut=>ae.toLowerCase().includes(ut.name.toLowerCase().split(" ")[0]));return e.jsx("button",{onClick:()=>we(ye===ae?null:ae),style:{padding:"1px 6px",borderRadius:"3px",fontSize:"9px",fontWeight:500,cursor:"pointer",border:"none",background:ye===ae?xe.violetM:Ge!=null&&Ge.found?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",color:ye===ae?xe.violet:Ge!=null&&Ge.found?xe.success:xe.warning},children:ae.slice(0,18)},We)})}),ye&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${xe.border}`,background:xe.bg},children:[e.jsxs("div",{style:{fontSize:"10px",color:xe.violet,fontWeight:600,marginBottom:"4px"},children:["Refine: ",ye]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"text",value:Re,onChange:ae=>Y(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&It(),placeholder:"What to improve...",style:{flex:1,background:xe.surface,border:`1px solid ${xe.border}`,borderRadius:"4px",padding:"5px 8px",color:xe.tp,fontSize:"11px",outline:"none"}}),e.jsx("button",{onClick:It,disabled:F||!Re.trim(),style:{padding:"5px 10px",borderRadius:"4px",background:xe.violet,border:"none",color:"white",fontSize:"10px",fontWeight:600,cursor:"pointer"},children:F?"...":"Refine"})]})]}),oe&&e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${xe.border}`,background:xe.bg},children:e.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:`1px solid ${xe.border}`,cursor:"pointer"},onClick:()=>De(!0),children:[e.jsx("img",{src:oe,alt:"Preview mockup",style:{width:"100%",height:"auto",display:"block"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",background:"rgba(0,0,0,0.7)",borderRadius:"4px",padding:"3px 6px",display:"flex",alignItems:"center",gap:"3px",color:"white",fontSize:"9px"},children:[e.jsx(rw,{size:9})," Fullscreen"]})]})}),e.jsx("div",{style:{flex:1,padding:"14px",fontFamily:xe.mono,fontSize:"10px",lineHeight:"1.6",color:xe.ts,backgroundColor:xe.bg,overflowY:"auto",whiteSpace:"pre-wrap"},children:K?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"14px"},children:[e.jsx(Fi,{size:22,color:xe.violet,style:{animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{color:xe.ts,fontSize:"12px",fontFamily:"Inter, sans-serif"},children:"Generating 600-900 line agent..."}),e.jsx("div",{style:{color:xe.tm,fontSize:"10px",fontFamily:"Inter, sans-serif"},children:"30-60 seconds"})]}):A||"Generate your agent to preview it here..."}),I&&I.issues.length>0&&e.jsx("div",{style:{padding:"8px 14px",borderTop:`1px solid ${xe.border}`,background:"rgba(245,158,11,0.05)",maxHeight:"70px",overflowY:"auto"},children:I.issues.map((ae,We)=>e.jsxs("div",{style:{fontSize:"9px",color:xe.warning,display:"flex",alignItems:"center",gap:"3px",marginBottom:"1px"},children:[e.jsx(cx,{size:8})," ",ae]},We))}),e.jsx("div",{style:{padding:"10px 14px",background:xe.surface,borderTop:`1px solid ${xe.border}`},children:e.jsxs("button",{onClick:Rr,disabled:!A||ee||K,style:{width:"100%",background:A&&!ee&&!K?xe.violet:xe.surfaceEl,color:A&&!ee&&!K?"white":xe.tm,border:"none",padding:"9px",borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:A&&!ee&&!K?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Gl,{size:13})," ",ee?"Saving...":`Save${$e?` "${$e}"`:""} to Library`]})})]})})]}),e.jsx(au,{children:pe&&oe&&e.jsxs(qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>De(!1),style:{position:"fixed",inset:0,zIndex:2e3,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[e.jsx("button",{onClick:()=>De(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(St,{size:18,color:"white"})}),e.jsx("img",{src:oe,alt:"Preview fullscreen",onClick:ae=>ae.stopPropagation(),style:{maxWidth:"95vw",maxHeight:"95vh",objectFit:"contain",borderRadius:"8px",cursor:"default"}})]})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})},se={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'},Z4=({value:t})=>{const[i,s]=L.useState(0);return L.useEffect(()=>{let o=0;const u=parseInt(t)||0;if(o===u)return;const b=u/(1e3/30);let l=setInterval(()=>{o+=b,o>=u?(s(u),clearInterval(l)):s(Math.floor(o))},30);return()=>clearInterval(l)},[t]),e.jsx("span",{children:i.toLocaleString()})},sh=({children:t,color:i=se.violet})=>e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",background:`${i}15`,border:`1px solid ${i}44`,color:i,fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em"},children:t}),e6=({project:t,navigate:i,onDelete:s,t:o})=>{const[u,S]=Ms.useState(!1);return e.jsxs("div",{onClick:()=>i(`/project/${t.id}`),onMouseEnter:b=>{b.currentTarget.style.borderColor=`${o.violet}44`,b.currentTarget.style.boxShadow=`0 8px 24px -8px ${o.violet}22`,b.currentTarget.style.transform="translateY(-2px)",S(!0)},onMouseLeave:b=>{b.currentTarget.style.borderColor=o.border,b.currentTarget.style.boxShadow="none",b.currentTarget.style.transform="translateY(0)",S(!1)},style:{background:o.surface,borderRadius:"12px",border:`1px solid ${o.border}`,padding:"18px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"14px",transition:"all 0.2s",position:"relative"},children:[u&&e.jsx(qt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:b=>s(t.id,t.name,b),style:{position:"absolute",top:"12px",right:"12px",zIndex:10,width:"32px",height:"32px",borderRadius:"6px",backgroundColor:"rgba(239, 68, 68, 0.9)",border:"1px solid rgba(239, 68, 68, 1)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseEnter:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 1)",b.currentTarget.style.transform="scale(1.05)"},onMouseLeave:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.9)",b.currentTarget.style.transform="scale(1)"},children:e.jsx(Or,{size:16})}),t.latest_iteration_id&&e.jsx("div",{style:{width:"100%",height:"140px",borderRadius:"8px",overflow:"hidden",background:o.surfaceEl,border:`1px solid ${o.border}`,position:"relative"},children:e.jsx("iframe",{src:`/api/preview/${t.id}/${t.latest_iteration_id}`,title:`Preview ${t.name}`,style:{width:"1280px",height:"800px",border:"none",transform:"scale(0.22)",transformOrigin:"top left",pointerEvents:"none"},sandbox:"allow-same-origin",loading:"lazy"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:o.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${o.borderS}`},children:e.jsx(Yl,{size:18,color:o.violet})}),e.jsx(sh,{color:t.status==="active"?o.success:o.ts,children:t.status||"Idle"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",marginBottom:"4px"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",color:o.ts,lineHeight:"1.4",height:"32px",overflow:"hidden"},children:t.description||"No description provided."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",borderTop:`1px solid ${o.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Agent"}),e.jsxs("div",{style:{fontSize:"11px",color:o.tp,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Xn,{size:10,color:o.ts})," ",t.agent_name||"None"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Iters"}),e.jsx("div",{style:{fontSize:"11px",color:o.tp},children:t.iteration_count||0})]})]})]})};function t6(){const t=Ut(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[m,v]=L.useState(""),[d,y]=L.useState(""),[_,j]=L.useState(!1),[C,h]=L.useState(!1),[p,f]=L.useState(null),[g,w]=L.useState(!1),R=Ms.useRef(null),A=async()=>{try{b(!0);const[V,ue]=await Promise.all([le("/api/projects"),le("/api/agents")]);s(V||[]),u(ue||[])}catch(V){console.error(V)}finally{b(!1)}};L.useEffect(()=>{A()},[]);const z=async()=>{c(!0);try{await le("/api/seed",{method:"POST"}),await A()}catch(V){console.error(V)}finally{c(!1)}},E=async()=>{if(!(!m.trim()||_)){j(!0),y("");try{const V=await le("/api/orchestrator/command",{method:"POST",body:JSON.stringify({prompt:m})});y(V.response)}catch(V){y(`Error: ${V.message}`)}finally{j(!1)}}},B=async(V,ue,Q)=>{if(Q.stopPropagation(),!!window.confirm(`Are you sure you want to delete "${ue}"? This action cannot be undone.`))try{await le(`/api/projects/${V}`,{method:"DELETE"}),await A()}catch(G){console.error("Failed to delete project:",G),alert("Failed to delete project. Please try again.")}},O=i.reduce((V,ue)=>V+(ue.iteration_count||0),0),H=V=>{if(R.current){const{scrollLeft:ue,clientWidth:Q}=R.current,G=V==="left"?ue-Q*.5:ue+Q*.5;R.current.scrollTo({left:G,behavior:"smooth"})}},K=[{id:"commit",name:"/commit",description:"Analyze staged changes and generate semantic commit messages.",icon:wh,usage:142,status:"Available",accent:se.success,isNew:!1},{id:"review",name:"/review-pr",description:"Perform an automated security and logic audit on pull requests.",icon:kS,usage:89,status:"Available",accent:se.violet,isNew:!1},{id:"refactor",name:"/refactor",description:"Suggest structural improvements for complex functions or components.",icon:Sh,usage:56,status:"Available",accent:se.violet,isNew:!0},{id:"optimize",name:"/optimize",description:"Identify performance bottlenecks and suggest faster alternatives.",icon:Vr,usage:0,status:"Coming Soon",accent:se.warning,isNew:!1}],U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},ee={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return S?e.jsxs("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:se.violet,fontFamily:se.mono,fontSize:"13px"},children:[e.jsx(Fi,{size:20,style:{animation:"spin 2s linear infinite",marginRight:"8px"}}),"INITIALIZING_DASHBOARD..."]}):e.jsxs(qt.div,{variants:U,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:"32px"},children:[e.jsxs(qt.header,{variants:ee,className:"dash-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"6px",letterSpacing:"-0.02em"},children:["Dashboard ",e.jsx("span",{style:{fontSize:"24px"},children:""})]}),e.jsxs("p",{style:{color:se.ts,fontSize:"14px",margin:0},children:["Managing ",i.length," projects across ",o.length," specialized agents."]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"8px",backgroundColor:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:se.success,boxShadow:`0 0 10px ${se.success}`}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:se.ts},children:"All Systems Operational"})]})})]}),e.jsxs(qt.div,{variants:ee,className:"dash-actions",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[e.jsxs("button",{onClick:()=>t("/project/new"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.violet}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:`0 0 20px ${se.violet}15`},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=se.violet,V.currentTarget.style.boxShadow=`0 10px 30px ${se.violet}25`},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${se.violet}66`,V.currentTarget.style.boxShadow=`0 0 20px ${se.violet}15`},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.violet,color:"#fff",boxShadow:`0 0 15px ${se.violet}88`},children:e.jsx(er,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"New Project"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Initialize testing environment"})]})]}),e.jsxs("button",{onClick:()=>w(!0),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.success}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:"0 0 20px rgba(34, 197, 94, 0.08)"},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=se.success,V.currentTarget.style.boxShadow="0 10px 30px rgba(34, 197, 94, 0.15)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${se.success}66`,V.currentTarget.style.boxShadow="0 0 20px rgba(34, 197, 94, 0.08)"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",color:se.success,boxShadow:"0 0 15px rgba(34, 197, 94, 0.2)"},children:e.jsx(Ht,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Design with GPT-5"})]})]}),e.jsxs("button",{onClick:()=>t("/agents"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=se.surfaceEl,V.currentTarget.style.borderColor=se.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=se.surface,V.currentTarget.style.borderColor=se.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`},children:e.jsx(Es,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Browse Agents"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Explore pretrained models"})]})]}),e.jsxs("button",{onClick:()=>t("/marketplace"),style:{padding:"20px",borderRadius:"12px",background:se.surface,border:`1px solid ${se.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=se.surfaceEl,V.currentTarget.style.borderColor=se.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=se.surface,V.currentTarget.style.borderColor=se.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`},children:e.jsx(Vr,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:se.tp,marginBottom:"2px"},children:"Marketplace"}),e.jsx("div",{style:{fontSize:"12px",color:se.ts},children:"Discover & share agents"})]})]})]}),e.jsx(qt.div,{variants:ee,children:e.jsxs("div",{onClick:()=>t("/personaboarding"),style:{position:"relative",overflow:"hidden",cursor:"pointer",borderRadius:"16px",padding:"32px 36px",background:`linear-gradient(135deg, ${se.surface} 0%, #1e1233 50%, ${se.surface} 100%)`,border:`1px solid ${se.violet}33`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"32px",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.borderColor=se.violet,V.currentTarget.style.boxShadow=`0 12px 40px ${se.violet}20`,V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.borderColor=`${se.violet}33`,V.currentTarget.style.boxShadow="none",V.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"absolute",top:"-40px",right:"120px",width:"200px",height:"200px",borderRadius:"50%",background:`radial-gradient(circle, ${se.violet}18 0%, transparent 70%)`,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-60px",left:"30%",width:"160px",height:"160px",borderRadius:"50%",background:"radial-gradient(circle, rgba(236,72,153,0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",zIndex:1},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:`linear-gradient(135deg, ${se.violet}, #a855f7)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 24px ${se.violet}44`,flexShrink:0},children:e.jsx(jn,{size:28,color:"#fff"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:se.tp,letterSpacing:"-0.01em"},children:"Persona Onboarding"}),e.jsx("span",{style:{padding:"2px 10px",borderRadius:"100px",background:"linear-gradient(135deg, #ec4899, #8b5cf6)",color:"#fff",fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.08em"},children:"New"})]}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:se.ts,lineHeight:"1.5",maxWidth:"420px"},children:"Crez un agent personnalis qui comprend votre faon de travailler. Chaque choix construit une histoire narrative unique."})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",zIndex:1,flexShrink:0},children:[e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",maxWidth:"180px"},children:["Role","Skills","Style","Workflow"].map(V=>e.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",backgroundColor:`${se.violet}15`,border:`1px solid ${se.violet}30`,color:se.violet,fontSize:"10px",fontWeight:600},children:V},V))}),e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:se.tp,color:se.bg,display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s"},children:e.jsx(V2,{size:20})})]})]})}),e.jsx(qt.div,{variants:ee,className:"dash-metrics",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[{label:"Total Agents",value:o.length,icon:Xn,trend:"Active",color:se.violet},{label:"Active Projects",value:i.length,icon:bh,trend:"Running",color:se.success},{label:"Total Iterations",value:O,icon:kw,trend:"Completed",color:se.warning}].map((V,ue)=>e.jsxs("div",{style:{background:se.surface,padding:"20px",borderRadius:"12px",border:`1px solid ${se.border}`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"14px"},children:[e.jsx("div",{style:{color:se.ts,fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:V.label}),e.jsx(V.icon,{size:18,color:V.color})]}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,marginBottom:"6px",color:se.tp},children:e.jsx(Z4,{value:V.value})}),e.jsxs("div",{style:{fontSize:"11px",color:se.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(v0,{size:10})," ",V.trend]}),e.jsx("div",{style:{position:"absolute",right:"-20px",bottom:"-20px",width:"100px",height:"100px",background:`radial-gradient(circle, ${V.color}11 0%, transparent 70%)`,borderRadius:"50%"}})]},ue))}),e.jsxs(qt.div,{variants:ee,style:{position:"relative"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:se.tp,fontSize:"18px",fontWeight:"700",marginBottom:"4px",margin:0},children:"My Agents"}),e.jsx("p",{style:{color:se.ts,fontSize:"13px",margin:0},children:"Your active collection of AI specialized tools"})]}),e.jsxs("span",{style:{color:se.tm,fontSize:"12px",fontWeight:"500"},children:[o.length," Available"]})]}),C&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(qt.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>H("left"),style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:se.surfaceEl,border:`1px solid ${se.borderS}`,color:se.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:20})}),e.jsx(qt.button,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},onClick:()=>H("right"),style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:se.surfaceEl,border:`1px solid ${se.borderS}`,color:se.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(cr,{size:20})})]}),e.jsx("div",{ref:R,style:{display:"flex",gap:"16px",overflowX:"auto",padding:"8px 4px 24px 4px",msOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth"},children:o.length===0?e.jsxs("div",{style:{width:"100%",padding:"40px",textAlign:"center",color:se.tm,background:se.surface,border:`1px dashed ${se.border}`,borderRadius:"12px"},children:[e.jsx(xn,{size:32,style:{margin:"0 auto 12px",opacity:.5}}),e.jsx("p",{style:{fontSize:"13px",margin:0},children:"No agents available yet"})]}):e.jsxs(e.Fragment,{children:[o.map((V,ue)=>e.jsxs(qt.div,{whileHover:{y:-5,borderColor:se.violet,boxShadow:`0 8px 30px ${se.violetG}`},style:{flex:"0 0 300px",backgroundColor:se.surface,border:`1px solid ${se.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",cursor:"pointer",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},onClick:()=>t(`/agents/${V.name}`),children:[V.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"8px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${se.border}`},children:e.jsx("img",{src:V.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:ue%2===0?se.violetM:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:ue%2===0?se.violet:se.ts,border:`1px solid ${ue%2===0?se.violet:se.border}`},children:ue%2===0?e.jsx(xn,{size:22}):e.jsx(Xn,{size:22})}),V.rating&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:se.warning},children:[e.jsx(_n,{size:12,fill:se.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:V.rating})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("h3",{style:{color:se.tp,fontSize:"15px",fontWeight:"600",margin:0},children:V.name}),V.category&&e.jsx(sh,{color:se.violet,children:V.category})]}),e.jsx("p",{style:{color:se.ts,fontSize:"12px",lineHeight:"1.5",margin:0,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"36px"},children:V.description||"No description available"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"auto",paddingTop:"8px"},children:[e.jsxs(qt.button,{whileTap:{scale:.96},style:{backgroundColor:se.tp,color:se.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:2},onClick:Q=>{Q.stopPropagation(),t(`/project/new?agent=${V.name}`)},children:[e.jsx(ql,{size:14,fill:"currentColor"}),"Use"]}),e.jsxs("button",{style:{backgroundColor:se.surfaceEl,color:se.ts,border:`1px solid ${se.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:1.5},onClick:Q=>{Q.stopPropagation(),t(`/agents/${V.name}`)},children:[e.jsx($s,{size:14}),"View"]}),e.jsx("button",{style:{backgroundColor:se.surfaceEl,color:se.ts,border:`1px solid ${se.borderS}`,borderRadius:"4px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:Q=>{Q.stopPropagation(),t(`/agents/${V.name}/edit`)},children:e.jsx(Mu,{size:14})})]})]},V.name||ue)),e.jsx("div",{style:{minWidth:"10px"}})]})})]}),e.jsxs(qt.div,{variants:ee,style:{width:"100%"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px",padding:"0 4px"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",color:se.tp,margin:"0 0 4px 0",letterSpacing:"-0.01em"},children:"Platform Capabilities"}),e.jsx("p",{style:{fontSize:"13px",color:se.ts,margin:0},children:"Slash commands and specialized agent skills available for your projects."})]})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"16px"},children:K.map(V=>e.jsxs(qt.div,{whileHover:{y:-2},onMouseEnter:()=>f(V.id),onMouseLeave:()=>f(null),style:{backgroundColor:se.surface,border:`1px solid ${p===V.id?se.violet:se.border}`,borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",transition:"border-color 0.2s ease, box-shadow 0.2s ease",boxShadow:p===V.id?`0 0 20px ${se.violetG}`:"none",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"60px",height:"60px",background:V.accent,filter:"blur(40px)",opacity:p===V.id?.15:.05,borderRadius:"50%",transition:"opacity 0.3s ease"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:`${V.accent}15`,border:`1px solid ${V.accent}30`,display:"flex",alignItems:"center",justifyContent:"center",color:V.accent},children:e.jsx(V.icon,{size:18})}),V.isNew?e.jsx("span",{style:{padding:"2px 8px",borderRadius:"100px",backgroundColor:se.violetM,border:`1px solid ${se.violet}`,color:se.violet,fontSize:"10px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em"},children:"New"}):e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:se.tm,textTransform:"uppercase",fontWeight:"600"},children:"Uses"}),e.jsx("div",{style:{fontSize:"13px",color:se.ts,fontWeight:"500",fontFamily:se.mono},children:V.usage})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 6px 0",fontSize:"15px",color:se.tp,fontFamily:se.mono,fontWeight:"600"},children:V.name}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:se.ts,lineHeight:"1.5",height:"40px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:V.description})]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:`1px solid ${se.border}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:V.status==="Available"?se.success:se.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:V.status==="Available"?se.success:se.tm}}),V.status]}),e.jsxs(qt.div,{animate:{x:p===V.id?4:0},style:{display:"flex",alignItems:"center",color:se.violet,fontSize:"12px",fontWeight:"600"},children:["Use skill ",e.jsx(cr,{size:14})]})]})]},V.id))})]}),e.jsxs("div",{className:"dash-main-grid",style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"28px",alignItems:"start"},children:[e.jsxs(qt.div,{variants:ee,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("h2",{style:{fontSize:"18px",fontWeight:700,display:"flex",alignItems:"center",gap:"8px",margin:0},children:["Projects ",e.jsx(sh,{color:se.ts,children:i.length})]})}),i.length===0?e.jsxs("div",{style:{padding:"50px 40px",borderRadius:"16px",border:`2px dashed ${se.border}`,textAlign:"center",backgroundColor:`${se.surface}44`},children:[e.jsx("div",{style:{marginBottom:"16px",color:se.tm},children:e.jsx(Es,{size:40,strokeWidth:1,style:{margin:"0 auto"}})}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:700,marginBottom:"6px"},children:"Your workspace is empty"}),e.jsx("p",{style:{color:se.ts,fontSize:"13px",maxWidth:"300px",margin:"0 auto 20px",lineHeight:"1.5"},children:"Start by creating a new project or initialize with our sample test suite."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{onClick:z,disabled:l,style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:se.surfaceEl,color:se.tp,border:`1px solid ${se.borderS}`,fontWeight:600,fontSize:"13px",cursor:"pointer"},children:l?"Generating...":"Seed Sample Data"}),e.jsx("button",{onClick:()=>t("/project/new"),style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:se.violet,color:"#fff",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer"},children:"Create Project"})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:i.map(V=>e.jsx(e6,{project:V,navigate:t,onDelete:B,t:se},V.id))})]}),e.jsxs(qt.div,{variants:ee,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${se.surface}, ${se.bg})`,borderRadius:"14px",border:`1px solid ${se.violet}33`,padding:"20px",boxShadow:`0 10px 40px -10px ${se.violet}15`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",background:se.violetG,color:se.violet},children:e.jsx(Ht,{size:16})}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:700,margin:0},children:"Ask Guru AI"})]}),e.jsx("p",{style:{fontSize:"12px",color:se.ts,marginBottom:"16px",lineHeight:"1.5"},children:"Get recommendations for agent selection, optimization tips, and platform guidance."}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{value:m,onChange:V=>v(V.target.value),onKeyDown:V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),E())},placeholder:"Ask anything...",style:{width:"100%",height:"70px",backgroundColor:se.bg,border:`1px solid ${se.border}`,borderRadius:"10px",padding:"10px",color:se.tp,fontSize:"13px",resize:"none",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit",boxSizing:"border-box"},onFocus:V=>V.target.style.borderColor=se.violet,onBlur:V=>V.target.style.borderColor=se.border}),e.jsx("button",{onClick:E,disabled:_||!m.trim(),style:{position:"absolute",bottom:"8px",right:"8px",padding:"5px 10px",backgroundColor:se.violet,color:"#fff",border:"none",borderRadius:"5px",fontSize:"11px",fontWeight:700,cursor:"pointer",opacity:!m.trim()||_?.5:1,transition:"opacity 0.2s"},children:_?"Thinking...":"Send"})]}),d&&e.jsx("div",{style:{marginTop:"12px",padding:"10px",borderRadius:"8px",backgroundColor:`${se.violet}08`,borderLeft:`3px solid ${se.violet}`,fontSize:"12px",color:se.tp,lineHeight:"1.5",fontFamily:se.mono,maxHeight:"200px",overflowY:"auto"},children:d})]}),e.jsxs("div",{style:{background:se.surface,borderRadius:"14px",border:`1px solid ${se.border}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${se.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",margin:0},children:[e.jsx(A0,{size:13,color:se.ts})," Activity Log"]}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:se.success,animation:"pulse 2s infinite"}})]}),e.jsxs("div",{style:{height:"220px",overflowY:"auto",padding:"12px",fontFamily:se.mono,fontSize:"11px",display:"flex",flexDirection:"column",gap:"8px"},children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:1},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date().toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:se.success},children:"System initialized"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.8},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-12e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsxs("span",{style:{color:se.ts},children:["Projects loaded (",i.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.6},children:[e.jsxs("span",{style:{color:se.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-24e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:se.ts},children:"Agent registry synced"})]})]}),i.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:se.tm},children:"No activity yet"})]})]}),e.jsxs("div",{style:{background:se.surface,borderRadius:"14px",border:`1px solid ${se.border}`,padding:"16px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,marginBottom:"14px"},children:"Platform Status"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:se.ts},children:"Project Capacity"}),e.jsxs("span",{style:{color:se.tp,fontWeight:600},children:[i.length,"/20"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:se.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${i.length/20*100}%`,height:"100%",backgroundColor:se.violet,borderRadius:"10px",transition:"width 0.5s ease-out"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:se.ts},children:"Agent Registry"}),e.jsxs("span",{style:{color:se.tp,fontWeight:600},children:[o.length," loaded"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:se.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:se.success,borderRadius:"10px"}})})]})]})]})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: ${se.borderS}; borderRadius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: ${se.tm}; }

        @media (max-width: 1024px) {
          .dash-main-grid { grid-template-columns: 1fr !important; }
        }
        @media (max-width: 768px) {
          .dash-actions { grid-template-columns: repeat(2, 1fr) !important; gap: 10px !important; }
          .dash-metrics { grid-template-columns: 1fr !important; gap: 12px !important; }
          .dash-main-grid { grid-template-columns: 1fr !important; }
          .dash-header { flex-direction: column; align-items: flex-start !important; }
        }
        @media (max-width: 480px) {
          .dash-actions { grid-template-columns: 1fr !important; }
        }
      `}}),g&&e.jsx(ip,{onClose:()=>w(!1)})]})}const Eo={violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"},oh={folder:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),code:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"16 18 22 12 16 6"}),e.jsx("polyline",{points:"8 6 2 12 8 18"})]}),globe:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]}),database:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),rocket:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 00-2.91-.09z"}),e.jsx("path",{d:"M12 15l-3-3a22 22 0 012-3.95A12.88 12.88 0 0122 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 01-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),star:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),heart:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})}),lightning:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),brain:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.5 2A2.5 2.5 0 0112 4.5v15a2.5 2.5 0 01-4.96.44 2.5 2.5 0 01-2.96-3.08 3 3 0 01-.34-5.58 2.5 2.5 0 011.32-4.24 2.5 2.5 0 011.98-3A2.5 2.5 0 019.5 2z"}),e.jsx("path",{d:"M14.5 2A2.5 2.5 0 0012 4.5v15a2.5 2.5 0 004.96.44 2.5 2.5 0 002.96-3.08 3 3 0 00.34-5.58 2.5 2.5 0 00-1.32-4.24 2.5 2.5 0 00-1.98-3A2.5 2.5 0 0014.5 2z"})]}),terminal:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),cloud:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z"})}),shield:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),bug:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"8",y:"6",width:"8",height:"14",rx:"4"}),e.jsx("path",{d:"M19 12h2"}),e.jsx("path",{d:"M3 12h2"}),e.jsx("path",{d:"M19 8h2"}),e.jsx("path",{d:"M3 8h2"}),e.jsx("path",{d:"M19 16h2"}),e.jsx("path",{d:"M3 16h2"}),e.jsx("path",{d:"M12 6V2"})]}),palette:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"13.5",cy:"6.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"17.5",cy:"10.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"8.5",cy:"7.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"12.5",r:"0.5",fill:"currentColor"}),e.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.93 0 1.5-.75 1.5-1.5 0-.39-.15-.74-.39-1.04-.24-.3-.39-.65-.39-1.04 0-.83.67-1.5 1.5-1.5H16c3.31 0 6-2.69 6-6 0-5.5-4.5-9.92-10-9.92z"})]}),cpu:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),wand:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 4V2"}),e.jsx("path",{d:"M15 16v-2"}),e.jsx("path",{d:"M8 9h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M17.8 11.8L19 13"}),e.jsx("path",{d:"M15 9h0"}),e.jsx("path",{d:"M17.8 6.2L19 5"}),e.jsx("path",{d:"M11 6.2L9.7 5"}),e.jsx("path",{d:"M2 22l10-10"})]}),hammer:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 12l-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 010-3L12 9"}),e.jsx("path",{d:"M17.64 15L22 10.64"}),e.jsx("path",{d:"M20.91 11.7l-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V6.5a.5.5 0 00-.5-.5H16.5c-.85 0-1.65-.33-2.25-.93l-1.25-1.25"}),e.jsx("path",{d:"M13.09 7.91l3 3"})]}),search:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),sparkles:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"})}),brush:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.06 11.9l8.07-8.06a2.85 2.85 0 114.03 4.03l-8.06 8.08"}),e.jsx("path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 00-3-3.02z"})]})};function r6(t,i=16){const s=oh[t];return s?s(i):null}function i6({value:t,onChange:i}){const[s,o]=L.useState(null),u=Object.keys(oh);return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"4px"},children:u.map(S=>e.jsx("button",{onClick:()=>i(S),onMouseEnter:()=>o(S),onMouseLeave:()=>o(null),title:S,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t===S?Eo.violetM:s===S?"rgba(255,255,255,0.04)":"transparent",border:t===S?`1px solid ${Eo.violet}`:"1px solid transparent",borderRadius:"6px",cursor:"pointer",padding:0,color:t===S?Eo.violet:s===S?Eo.ts:Eo.tm,transition:"all 0.15s ease"},children:oh[S](16)},S))})}const jt={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444"},n6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316","#22c55e","#a855f7"],Tm={backgroundColor:jt.bg,border:`1px solid ${jt.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},fl={fontSize:"11px",fontWeight:"600",color:jt.tm,textTransform:"uppercase",letterSpacing:"0.05em"};function s6({isOpen:t,onClose:i,categories:s,agentCounts:o,onSave:u,onDelete:S,onReorder:b}){const[l,c]=L.useState({name:"",color:"#8B5CF6",icon:"",description:""}),[m,v]=L.useState(null),[d,y]=L.useState(null),[_,j]=L.useState(null);if(L.useEffect(()=>{t||(c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null),y(null))},[t]),!t)return null;const C=g=>{v(g.id),c({name:g.name,color:g.color||"#8B5CF6",icon:g.icon||"",description:g.description||""})},h=()=>{var g;(g=l.name)!=null&&g.trim()&&(u({...l,id:m||void 0}),c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null))},p=()=>{c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null)},f=(g,w)=>{const R=[...s],A=g+w;A<0||A>=R.length||([R[g],R[A]]=[R[A],R[g]],b(R.map(z=>z.id)))};return e.jsx("div",{onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{onClick:g=>g.stopPropagation(),style:{width:"720px",maxHeight:"80vh",backgroundColor:jt.surface,border:`1px solid ${jt.borderS}`,borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${jt.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Manage Categories"}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:jt.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"55%",padding:"20px 24px",borderRight:`1px solid ${jt.border}`,overflowY:"auto",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h3",{style:{fontSize:"13px",fontWeight:"600",margin:0,color:jt.ts},children:m?"Edit Category":"New Category"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Name"}),e.jsx("input",{style:Tm,value:l.name,placeholder:"Category name...",onChange:g=>c(w=>({...w,name:g.target.value})),onKeyDown:g=>{g.key==="Enter"&&h()}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:n6.map(g=>e.jsx("button",{onClick:()=>c(w=>({...w,color:g})),style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:g,padding:0,cursor:"pointer",border:l.color===g?"2px solid #fff":"2px solid transparent",transition:"border 0.15s"}},g))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Icon"}),e.jsx(i6,{value:l.icon,onChange:g=>c(w=>({...w,icon:g}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:fl,children:"Description"}),e.jsx("input",{style:Tm,value:l.description,placeholder:"Optional description...",onChange:g=>c(w=>({...w,description:g.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[m&&e.jsx("button",{onClick:p,style:{backgroundColor:jt.surfaceEl,color:jt.ts,border:`1px solid ${jt.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:h,style:{backgroundColor:jt.tp,color:jt.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:12}),m?"Update":"Add Category"]})]})]}),e.jsxs("div",{style:{width:"45%",padding:"20px 16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:"600",margin:"0 0 8px 0",color:jt.ts},children:["Existing (",s.length,")"]}),s.map((g,w)=>e.jsxs("div",{onMouseEnter:()=>j(g.id),onMouseLeave:()=>j(null),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",borderRadius:"6px",fontSize:"13px",backgroundColor:m===g.id?jt.violetM:_===g.id?"rgba(255,255,255,0.02)":"transparent",border:m===g.id?`1px solid ${jt.violet}`:"1px solid transparent",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:g.color||jt.violet,flexShrink:0}}),e.jsx("span",{style:{color:jt.tm,flexShrink:0,display:"flex"},children:r6(g.icon,14)}),e.jsx("span",{style:{flex:1,color:jt.tp,textTransform:"capitalize",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.name}),e.jsx("span",{style:{fontSize:"10px",color:jt.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px",flexShrink:0},children:o[g.name]||0}),_===g.id&&e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>f(w,-1),disabled:w===0,style:{background:"none",border:"none",color:w===0?"rgba(255,255,255,0.1)":jt.tm,cursor:w===0?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(_h,{size:12})}),e.jsx("button",{onClick:()=>f(w,1),disabled:w===s.length-1,style:{background:"none",border:"none",color:w===s.length-1?"rgba(255,255,255,0.1)":jt.tm,cursor:w===s.length-1?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(Sn,{size:12})}),e.jsx("button",{onClick:()=>C(g),style:{background:"none",border:"none",color:jt.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Xo,{size:12})}),d===g.id?e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:()=>{S(g.id),y(null)},style:{background:"none",border:"none",color:jt.danger,cursor:"pointer",padding:"2px",fontSize:"10px",fontWeight:"700"},children:"Yes"}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:jt.tm,cursor:"pointer",padding:"2px",fontSize:"10px"},children:"No"})]}):e.jsx("button",{onClick:()=>y(g.id),style:{background:"none",border:"none",color:jt.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Or,{size:12})})]})]},g.id)),s.length===0&&e.jsx("p",{style:{color:jt.tm,fontSize:"12px",textAlign:"center",padding:"20px 0"},children:"No categories yet"})]})]})]})})}const me={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},o6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316"];function Am({initial:t,onCancel:i,onSave:s,onChange:o}){return e.jsxs("div",{style:{padding:"10px",backgroundColor:me.surfaceEl,borderRadius:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("input",{style:{background:me.bg,border:`1px solid ${me.border}`,color:"#fff",fontSize:"12px",padding:"6px 8px",borderRadius:"4px",outline:"none"},value:t.name,placeholder:"Category name...",onChange:u=>o({name:u.target.value}),onKeyDown:u=>{u.key==="Enter"&&s(),u.key==="Escape"&&i()},autoFocus:!0}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:o6.map(u=>e.jsx("button",{onClick:()=>o({color:u}),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:u,padding:0,cursor:"pointer",border:t.color===u?"2px solid #fff":"2px solid transparent"}},u))}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"4px"},children:[e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(St,{size:14})}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:me.success,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(sr,{size:14})})]})]})}function a6({cat:t,isActive:i,count:s,onClick:o,onEdit:u,onDelete:S}){const[b,l]=L.useState(!1);return e.jsxs("div",{onClick:o,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",fontSize:"13px",gap:"10px",backgroundColor:i?me.surfaceEl:b?"rgba(255,255,255,0.02)":"transparent",color:i?me.tp:me.ts,border:i?`1px solid ${me.borderS}`:"1px solid transparent"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:t.color||me.violet,flexShrink:0}}),e.jsx("span",{style:{flex:1,textTransform:"capitalize"},children:t.name}),b&&e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),u()},style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Xo,{size:11})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),S()},style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Or,{size:11})})]}),e.jsx("span",{style:{fontSize:"11px",color:me.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:s})]})}function l6({agent:t,viewType:i,categories:s,onEdit:o,onDelete:u,onRate:S,onTest:b,onClick:l,canEdit:c,canDelete:m}){const[v,d]=L.useState(!1),y=s.find(j=>j.name===t.category),_=i==="grid";return e.jsxs("div",{onClick:l,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{cursor:"pointer",backgroundColor:me.surface,borderRadius:_?"8px":"4px",border:`1px solid ${v?me.violet:me.border}`,padding:_?"16px":"10px 16px",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:v?`0 0 20px ${me.violetG}`:"none",display:"flex",flexDirection:_?"column":"row",alignItems:_?"stretch":"center",gap:_?"0":"16px"},children:[_&&t.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"6px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${me.border}`},children:e.jsx("img",{src:t.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:0,color:me.tp},children:t.name.replace(/-/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",width:"fit-content",backgroundColor:y!=null&&y.color?`${y.color}15`:me.violetM,color:(y==null?void 0:y.color)||me.violet},children:t.category||"uncategorized"})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(j=>e.jsx(_n,{size:12,fill:j<=(t.rating||0)?me.warning:"none",color:j<=(t.rating||0)?me.warning:me.tm,style:{cursor:"pointer"},onClick:C=>{C.stopPropagation(),S(j)}},j))})]}),_&&e.jsx("p",{style:{fontSize:"12px",color:me.ts,lineHeight:"1.5",margin:"0 0 12px 0",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:_?"12px":"0",borderTop:_?`1px solid ${me.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:me.mono,color:me.tm},children:t.model||"unknown"}),t.project_count>0&&e.jsxs("span",{style:{fontSize:"10px",color:me.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:[t.project_count," project",t.project_count!==1?"s":""]}),c?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:me.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:j=>{j.stopPropagation(),b()},style:{backgroundColor:me.violetM,color:me.violet,border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(Do,{size:10,style:{marginRight:4}}),"TEST"]}),c&&e.jsx("button",{onClick:j=>{j.stopPropagation(),o()},style:{background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Xo,{size:13})}),m&&e.jsx("button",{onClick:j=>{j.stopPropagation(),u()},style:{background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Or,{size:13})})]})]})]})]})}function c6({agent:t,categories:i,onClose:s,onSave:o}){const[u,S]=L.useState({...t}),[b,l]=L.useState(!1),c=async()=>{l(!0);try{await o(u)}finally{l(!1)}},m={backgroundColor:me.bg,border:`1px solid ${me.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"};return e.jsx("div",{onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"flex-end",zIndex:1e3},children:e.jsxs("div",{onClick:v=>v.stopPropagation(),style:{width:"450px",height:"100%",backgroundColor:me.surface,borderLeft:`1px solid ${me.borderS}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${me.border}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 4px 0"},children:"Edit Agent"}),e.jsx("p",{style:{fontSize:"12px",fontFamily:me.mono,color:me.tm,margin:0},children:t.name})]}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:me.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Description"}),e.jsx("textarea",{style:{...m,resize:"vertical",fontFamily:"inherit",minHeight:"80px"},value:u.description||"",rows:4,onChange:v=>S({...u,description:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:me.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Model"}),e.jsx("input",{style:m,value:u.model||"",onChange:v=>S({...u,model:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:me.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Category"}),e.jsxs("select",{style:m,value:u.category||"",onChange:v=>S({...u,category:v.target.value}),children:[e.jsx("option",{value:"",children:"uncategorized"}),i.map(v=>e.jsx("option",{value:v.name,children:v.name},v.id))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:me.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Prompt Preview"}),e.jsx("div",{style:{backgroundColor:me.bg,border:`1px solid ${me.border}`,borderRadius:"6px",padding:"12px",fontSize:"11px",color:me.ts,fontFamily:me.mono,whiteSpace:"pre-wrap",maxHeight:"200px",overflowY:"auto",lineHeight:"1.6"},children:t.prompt_preview||"[No prompt content]"})]})]}),e.jsxs("div",{style:{padding:"20px 24px",borderTop:`1px solid ${me.border}`,display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:s,style:{backgroundColor:me.surfaceEl,color:me.ts,border:`1px solid ${me.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:c,disabled:b,style:{backgroundColor:me.tp,color:me.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",opacity:b?.6:1},children:[e.jsx(Gl,{size:14,style:{marginRight:6}}),b?"Saving...":"Save Changes"]})]})]})})}function d6(){const t=Ut(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(null),[m,v]=L.useState(""),[d,y]=L.useState("rating"),[_,j]=L.useState("mine"),[C,h]=L.useState("grid"),p=qo(),[f,g]=L.useState(!1),[w,R]=L.useState(null),[A,z]=L.useState(null),[E,B]=L.useState(null),[O,H]=L.useState(!1),[K,U]=L.useState(!1),[ee,V]=L.useState(new Set),[ue,Q]=L.useState(null),[G,M]=L.useState(!1),[I,D]=L.useState(!1),W=L.useCallback(async()=>{try{b(!0);const[J,ce]=await Promise.all([le("/api/agents"),le("/api/categories")]);s(J||[]),u(ce||[])}catch(J){console.error(J)}finally{b(!1)}},[]);L.useEffect(()=>{W()},[W]);const fe=()=>{const J=document.createElement("input");J.type="file",J.accept=".md",J.onchange=async ce=>{var Je;const Ne=(Je=ce.target.files)==null?void 0:Je[0];if(!Ne)return;const et=await Ne.text();try{await le("/api/agents/import",{method:"POST",body:JSON.stringify({filename:Ne.name,content:et})}),await W()}catch(pt){console.error("Import failed:",pt),alert(pt.message||"Import failed")}},J.click()},ye=async()=>{g(!0);try{await le("/api/agents/sync",{method:"POST"}),await W()}catch(J){console.error(J)}finally{g(!1)}},we=async(J,ce)=>{try{await le(`/api/agents/${J}/rating`,{method:"PATCH",body:JSON.stringify({rating:ce})}),s(Ne=>Ne.map(et=>et.name===J?{...et,rating:ce}:et))}catch(Ne){console.error(Ne)}},Re=async J=>{try{await le(`/api/agents/${J}`,{method:"DELETE"}),s(ce=>ce.filter(Ne=>Ne.name!==J)),B(null)}catch(ce){console.error(ce)}},Y=async J=>{try{const ce=await le(`/api/agents/${J.name}`,{method:"PUT",body:JSON.stringify(J)});s(Ne=>Ne.map(et=>et.name===J.name?{...et,...ce}:et)),R(null)}catch(ce){console.error(ce)}},F=async J=>{var ce;if((ce=J.name)!=null&&ce.trim())try{J.id?await le(`/api/categories/${J.id}`,{method:"PUT",body:JSON.stringify(J)}):await le("/api/categories",{method:"POST",body:JSON.stringify(J)}),z(null),W()}catch(Ne){console.error(Ne)}},be=async J=>{var ce;try{await le(`/api/categories/${J}`,{method:"DELETE"}),((ce=o.find(Ne=>Ne.id===J))==null?void 0:ce.name)===l&&c(null),W()}catch(Ne){console.error(Ne)}},oe=async J=>{try{await le("/api/categories/reorder",{method:"PUT",body:JSON.stringify({ids:J})}),W()}catch(ce){console.error(ce)}},Ie=async J=>{var ce;if((ce=J.name)!=null&&ce.trim())try{J.id?await le(`/api/categories/${J.id}`,{method:"PUT",body:JSON.stringify(J)}):await le("/api/categories",{method:"POST",body:JSON.stringify(J)}),W()}catch(Ne){console.error(Ne)}},Z=J=>{V(ce=>{const Ne=new Set(ce);return Ne.has(J)?Ne.delete(J):Ne.add(J),Ne})},je=()=>{ee.size===Ee.length?V(new Set):V(new Set(Ee.map(J=>J.name)))},pe=async()=>{if(ee.size&&window.confirm(`Delete ${ee.size} agents?`))try{await le("/api/agents/bulk/delete",{method:"POST",body:JSON.stringify({names:[...ee]})}),V(new Set),U(!1),W()}catch(J){console.error(J)}},De=async J=>{if(ee.size)try{await le("/api/agents/bulk/categorize",{method:"POST",body:JSON.stringify({names:[...ee],category:J})}),Q(null),V(new Set),U(!1),W()}catch(ce){console.error(ce)}},$e=async()=>{if(ee.size)try{const J=await le("/api/agents/bulk/export",{method:"POST",body:JSON.stringify({names:[...ee]})}),ce=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),Ne=URL.createObjectURL(ce),et=document.createElement("a");et.href=Ne,et.download=`agents-export-${ee.size}.json`,et.click(),URL.revokeObjectURL(Ne)}catch(J){console.error(J)}},Pe=L.useMemo(()=>{const J={};return i.forEach(ce=>{J[ce.category]=(J[ce.category]||0)+1}),J},[i]),Ee=L.useMemo(()=>i.filter(J=>{const ce=!l||J.category===l,Ne=m.toLowerCase(),et=!Ne||J.name.toLowerCase().includes(Ne)||(J.description||"").toLowerCase().includes(Ne);let Je=!0;return _==="mine"?Je=J.source==="manual"&&(!J.created_by||J.created_by===(p==null?void 0:p.userId)):_==="platform"&&(Je=J.source==="filesystem"||J.source==="manual"&&J.created_by&&J.created_by!==(p==null?void 0:p.userId)),ce&&et&&Je}).sort((J,ce)=>d==="rating"?(ce.rating||0)-(J.rating||0):d==="name"?J.name.localeCompare(ce.name):d==="projects"?(ce.project_count||0)-(J.project_count||0):(ce.updated_at||0)-(J.updated_at||0)),[i,l,m,d,_,p==null?void 0:p.userId]),He=J=>i.filter(ce=>ce.category===J).length;return e.jsxs("div",{className:"ab-root",style:{display:"flex",height:"calc(100vh - 53px)",width:"100%",backgroundColor:me.bg,color:me.tp,overflow:"hidden"},children:[e.jsxs("aside",{className:"ab-sidebar",style:{width:"260px",borderRight:`1px solid ${me.border}`,display:"flex",flexDirection:"column",backgroundColor:"#0a0a0b",flexShrink:0},children:[e.jsx("button",{className:"ab-sidebar-close",onClick:()=>M(!1),style:{display:"none",background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"8px",position:"absolute",top:"8px",right:"8px",zIndex:10},children:e.jsx(St,{size:18})}),e.jsxs("div",{style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${me.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:me.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Categories"}),e.jsx("button",{onClick:()=>H(!0),title:"Manage categories",style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(j0,{size:14})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[e.jsxs("div",{onClick:()=>c(null),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"13px",gap:"10px",marginBottom:"2px",backgroundColor:l===null?me.surfaceEl:"transparent",color:l===null?me.tp:me.ts,border:l===null?`1px solid ${me.borderS}`:"1px solid transparent"},children:[e.jsx(zs,{size:12,color:me.tm}),e.jsx("span",{style:{flex:1},children:"All Agents"}),e.jsx("span",{style:{fontSize:"11px",color:me.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:i.length})]}),o.map(J=>e.jsx("div",{style:{marginBottom:"2px"},children:(A==null?void 0:A.id)===J.id?e.jsx(Am,{initial:A,onCancel:()=>z(null),onSave:()=>F(A),onChange:ce=>z(Ne=>({...Ne,...ce}))}):e.jsx(a6,{cat:J,isActive:l===J.name,count:He(J.name),onClick:()=>c(J.name),onEdit:()=>z({...J}),onDelete:()=>be(J.id)})},J.id)),A&&!A.id&&e.jsx(Am,{initial:A,onCancel:()=>z(null),onSave:()=>F(A),onChange:J=>z(ce=>({...ce,...J}))})]})]}),e.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("header",{className:"ab-toolbar",style:{minHeight:"52px",padding:"8px 24px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${me.border}`,flexShrink:0,flexWrap:"wrap",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("button",{className:"ab-sidebar-toggle",onClick:()=>M(!G),style:{display:"none",background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"6px",borderRadius:"4px",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:e.jsx(zs,{size:14})})}),e.jsxs("div",{className:"ab-search",style:{display:"flex",alignItems:"center",backgroundColor:me.surface,border:`1px solid ${me.border}`,borderRadius:"6px",padding:"0 12px",width:"300px",maxWidth:"100%"},children:[e.jsx(Is,{size:14,color:me.tm}),e.jsx("input",{value:m,onChange:J=>v(J.target.value),placeholder:"Search agents...",style:{background:"none",border:"none",color:"#fff",padding:"8px 10px",fontSize:"13px",width:"100%",outline:"none"}})]}),e.jsxs("div",{className:"ab-toolbar-right",style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("select",{value:d,onChange:J=>y(J.target.value),style:{backgroundColor:me.surface,border:`1px solid ${me.border}`,color:me.ts,fontSize:"12px",padding:"6px 10px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"name",children:"Alphabetical"}),e.jsx("option",{value:"recent",children:"Recent"}),e.jsx("option",{value:"projects",children:"Most Used"})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:me.surface,padding:"3px",borderRadius:"6px",border:`1px solid ${me.border}`},children:[e.jsx("button",{onClick:()=>h("grid"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:C==="grid"?me.surfaceEl:"transparent",color:C==="grid"?me.violet:me.tm,display:"flex",alignItems:"center"},children:e.jsx(S0,{size:14})}),e.jsx("button",{onClick:()=>h("compact"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:C==="compact"?me.surfaceEl:"transparent",color:C==="compact"?me.violet:me.tm,display:"flex",alignItems:"center"},children:e.jsx(Du,{size:14})})]}),e.jsxs("button",{onClick:()=>{U(!K),V(new Set)},style:{backgroundColor:K?me.violetM:me.surfaceEl,color:K?me.violet:me.ts,border:`1px solid ${K?me.violet:me.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ow,{size:14}),K?"Cancel":"Select"]}),e.jsxs("button",{onClick:ye,disabled:f,style:{backgroundColor:me.surfaceEl,color:me.ts,border:`1px solid ${me.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Fi,{size:14,style:f?{animation:"spin 1s linear infinite"}:{}}),"Sync"]}),e.jsxs("button",{onClick:fe,style:{backgroundColor:me.surfaceEl,color:me.ts,border:`1px solid ${me.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(L0,{size:14}),"Import .md"]}),e.jsxs("button",{onClick:()=>t("/agents/new"),style:{backgroundColor:me.violet,color:"#fff",border:"none",padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:14}),"Create Agent"]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${me.border}`,padding:"0 24px"},children:[{key:"all",label:"All Agents",count:i.length},{key:"mine",label:"My Agents",count:i.filter(J=>J.source==="manual"&&(!J.created_by||J.created_by===(p==null?void 0:p.userId))).length},{key:"platform",label:"Platform",count:i.filter(J=>J.source==="filesystem"||J.source==="manual"&&J.created_by&&J.created_by!==(p==null?void 0:p.userId)).length}].map(J=>e.jsxs("button",{onClick:()=>j(J.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:_===J.key?me.violet:me.ts,borderBottom:_===J.key?`2px solid ${me.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[J.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:_===J.key?me.violetM:"rgba(255,255,255,0.04)",color:_===J.key?me.violet:me.tm},children:J.count})]},J.key))}),e.jsxs("div",{style:{padding:"20px 24px 0 24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"12px",textTransform:"capitalize"},children:[l||"All Agents",e.jsx("span",{style:{fontSize:"12px",fontWeight:"400",color:me.tm,backgroundColor:me.border,padding:"2px 8px",borderRadius:"100px"},children:Ee.length})]}),K&&ee.size>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"12px",color:me.violet,fontWeight:600},children:[ee.size," selected"]}),e.jsx("button",{onClick:je,style:{background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer"},children:ee.size===Ee.length?"Deselect All":"Select All"}),ue?e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsxs("select",{autoFocus:!0,onChange:J=>{J.target.value&&De(J.target.value)},style:{backgroundColor:me.surfaceEl,border:`1px solid ${me.borderS}`,color:me.tp,fontSize:"11px",padding:"4px 8px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"",children:"Pick category..."}),o.map(J=>e.jsx("option",{value:J.name,children:J.name},J.id))]}),e.jsx("button",{onClick:()=>Q(null),style:{background:"none",border:"none",color:me.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(St,{size:14})})]}):e.jsxs("button",{onClick:()=>Q("picking"),style:{background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Uw,{size:12})," Categorize"]}),e.jsxs("button",{onClick:$e,style:{background:"none",border:`1px solid ${me.border}`,color:me.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(bn,{size:12})," Export"]}),e.jsxs("button",{onClick:pe,style:{background:"none",border:"1px solid rgba(239,68,68,0.3)",color:me.danger,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Or,{size:12})," Delete"]})]})]}),K&&ee.size===0&&e.jsx("p",{style:{fontSize:"12px",color:me.tm,margin:"8px 0 0 0"},children:"Click agents to select them for bulk actions."})]}),e.jsxs("div",{className:"ab-cta-row",style:{padding:"16px 24px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>t("/agents/new"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:J=>{J.currentTarget.style.borderColor=me.violet,J.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",J.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:J=>{J.currentTarget.style.borderColor="rgba(139,92,246,0.25)",J.currentTarget.style.boxShadow="none",J.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(er,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:me.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"11px",color:me.ts},children:"Build a new agent from scratch"})]}),e.jsx(cr,{size:16,style:{color:me.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>t("/skills/create"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:J=>{J.currentTarget.style.borderColor="#06b6d4",J.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",J.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:J=>{J.currentTarget.style.borderColor="rgba(6,182,212,0.25)",J.currentTarget.style.boxShadow="none",J.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Vr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:me.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:me.ts},children:"Create reusable skill modules"})]}),e.jsx(cr,{size:16,style:{color:me.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>D(!0),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:J=>{J.currentTarget.style.borderColor="#f59e0b",J.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",J.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:J=>{J.currentTarget.style.borderColor="rgba(245,158,11,0.25)",J.currentTarget.style.boxShadow="none",J.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ht,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:me.tp,marginBottom:"2px"},children:"Craft with AI"}),e.jsx("div",{style:{fontSize:"11px",color:me.ts},children:"Design an agent via GPT conversation"})]}),e.jsx(cr,{size:16,style:{color:me.tm,marginLeft:"auto",flexShrink:0}})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 24px",display:C==="grid"?"grid":"flex",gridTemplateColumns:C==="grid"?"repeat(auto-fill, minmax(320px, 1fr))":void 0,flexDirection:C==="compact"?"column":void 0,gap:"12px",opacity:S?.5:1,transition:"opacity 0.3s"},children:[Ee.map(J=>e.jsxs("div",{style:{position:"relative"},children:[K&&e.jsx("div",{onClick:ce=>{ce.stopPropagation(),Z(J.name)},style:{position:"absolute",top:"8px",left:"8px",zIndex:10,width:"20px",height:"20px",borderRadius:"4px",cursor:"pointer",backgroundColor:ee.has(J.name)?me.violet:me.surfaceEl,border:`1px solid ${ee.has(J.name)?me.violet:me.borderS}`,display:"flex",alignItems:"center",justifyContent:"center"},children:ee.has(J.name)&&e.jsx(sr,{size:12,color:"#fff"})}),e.jsx(l6,{agent:J,viewType:C,categories:o,canEdit:J.source==="manual"&&(!J.created_by||J.created_by===(p==null?void 0:p.userId)),canDelete:J.source==="manual"&&(!J.created_by||J.created_by===(p==null?void 0:p.userId)),onClick:()=>K?Z(J.name):t(`/agents/${J.name}`),onEdit:()=>{K||R(J)},onDelete:()=>{K||B(J.name)},onRate:ce=>{K||we(J.name,ce)},onTest:()=>{K||t(`/project/new?agent=${J.name}`)}})]},J.name)),Ee.length===0&&!S&&e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",padding:"60px",border:`1px dashed ${me.borderS}`,borderRadius:"12px"},children:[e.jsx("h3",{style:{fontSize:"14px",color:me.ts,margin:"0 0 8px 0"},children:"No agents found"}),e.jsx("p",{style:{fontSize:"12px",color:me.tm,margin:"0 0 16px 0"},children:"Try adjusting your search or category filters."}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await le("/api/seed/demo",{method:"POST"}),await W()}catch(J){console.error(J)}},style:{backgroundColor:me.violetM,color:me.violet,border:"1px solid rgba(139,92,246,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Vr,{size:14})," Load Demo Data"]})]})]})]}),w&&e.jsx(c6,{agent:w,categories:o,onClose:()=>R(null),onSave:Y}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{style:{backgroundColor:me.surface,border:`1px solid ${me.borderS}`,borderRadius:"12px",padding:"32px",width:"400px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ei,{size:32,color:me.danger,style:{marginBottom:16}}),e.jsx("h3",{style:{fontSize:"16px",margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{color:me.ts,fontSize:"13px",textAlign:"center",margin:"0 0 24px 0"},children:["Are you sure you want to delete ",e.jsx("strong",{style:{color:"#fff"},children:E}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>B(null),style:{backgroundColor:me.surfaceEl,color:me.ts,border:`1px solid ${me.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:()=>Re(E),style:{backgroundColor:me.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})}),e.jsx(s6,{isOpen:O,onClose:()=>H(!1),categories:o,agentCounts:Pe,onSave:async J=>{await Ie(J)},onDelete:async J=>{await be(J)},onReorder:oe}),I&&e.jsx(ip,{onClose:()=>D(!1)}),e.jsx("style",{children:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
          .ab-sidebar {
            position: fixed !important;
            top: 53px;
            left: ${G?"0":"-280px"};
            width: 260px !important;
            height: calc(100vh - 53px) !important;
            z-index: 100;
            transition: left 0.3s ease;
          }
          .ab-sidebar-close { display: flex !important; }
          .ab-sidebar-toggle { display: flex !important; }
          .ab-toolbar { padding: 8px 12px !important; }
          .ab-search { width: 100% !important; flex: 1; min-width: 0; }
          .ab-toolbar-right { width: 100%; overflow-x: auto; scrollbar-width: none; }
          .ab-toolbar-right::-webkit-scrollbar { display: none; }
          .ab-cta-row { padding: 12px 12px 0 !important; gap: 8px !important; }
          .ab-cta-card { flex: 1 1 100% !important; padding: 12px 14px !important; }
        }
      `}),G&&e.jsx("div",{onClick:()=>M(!1),className:"ab-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99,display:"none"}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .ab-overlay { display: block !important; }
        }
      `})]})}const Ue={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},u6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],h6=["sonnet","opus","haiku"],p6=["","default","plan","bypassPermissions"],Oi={backgroundColor:Ue.bg,border:`1px solid ${Ue.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},$i={fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",display:"block"};function f6(){const t=Ut(),[i,s]=L.useState([]),[o,u]=L.useState(!1),[S,b]=L.useState(""),[l,c]=L.useState(!1),[m,v]=L.useState(""),[d,y]=L.useState(!1),[_,j]=L.useState(null),[C,h]=L.useState(""),[p,f]=L.useState({name:"",description:"",model:"sonnet",category:"uncategorized",tools:[],max_turns:0,memory:"",permission_mode:"",prompt:""}),g=async()=>{if(m.trim()){y(!0),h(""),j(null);try{const O=await le("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:m,style:p.category!=="uncategorized"?p.category:"",tools_needed:"",category:p.category!=="uncategorized"?p.category:""})});j(O)}catch(O){h(O.message||"AI generation failed")}finally{y(!1)}}},w=()=>{_&&(f(O=>({...O,name:_.name||O.name,description:_.description||O.description,model:_.model||O.model,tools:_.tools||O.tools,max_turns:_.max_turns||O.max_turns,permission_mode:_.permission_mode||O.permission_mode,prompt:_.prompt||O.prompt})),j(null),c(!1))};L.useEffect(()=>{le("/api/categories").then(s).catch(()=>{})},[]);const R=p.name.length===0?null:/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(p.name),A=O=>{f(H=>({...H,tools:H.tools.includes(O)?H.tools.filter(K=>K!==O):[...H.tools,O]}))},z=L.useMemo(()=>{const O=[];return p.description&&O.push(`description: "${p.description.replace(/"/g,'\\"')}"`),p.model&&O.push(`model: ${p.model}`),p.tools.length>0&&O.push(`tools: [${p.tools.join(", ")}]`),p.max_turns>0&&O.push(`max_turns: ${p.max_turns}`),p.memory&&O.push(`memory: "${p.memory.replace(/"/g,'\\"')}"`),p.permission_mode&&O.push(`permission_mode: ${p.permission_mode}`),(O.length>0?`---
${O.join(`
`)}
---

`:"")+(p.prompt||"")},[p]),E=async()=>{if(!(!p.name||!R)){u(!0),b("");try{await le("/api/agents",{method:"POST",body:JSON.stringify({name:p.name,description:p.description,model:p.model,category:p.category,tools:p.tools.join(", "),max_turns:p.max_turns,memory:p.memory,permission_mode:p.permission_mode,prompt:p.prompt})}),t(`/agents/${p.name}`)}catch(O){b(O.message||"Failed to create agent")}finally{u(!1)}}},B=i.find(O=>O.name===p.category);return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ue.bg,color:Ue.tp,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${Ue.border}`,display:"flex",alignItems:"center",gap:"16px",flexShrink:0},children:[e.jsx(mi,{to:"/agents",style:{color:Ue.tm,display:"flex",textDecoration:"none"},children:e.jsx(vh,{size:18})}),e.jsx("h1",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Create New Agent"})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsxs("div",{style:{width:"60%",overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"10px",border:`1px solid ${l?Ue.violet:Ue.border}`,overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("button",{onClick:()=>c(!l),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",backgroundColor:"transparent",border:"none",color:Ue.tp,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ht,{size:16,color:Ue.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600},children:"AI Assistant"}),e.jsx("span",{style:{fontSize:"11px",color:Ue.tm},children:"Describe your agent and let AI generate the config"})]}),e.jsx("span",{style:{fontSize:"12px",color:Ue.violet},children:l?"Close":"Open"})]}),l&&e.jsxs("div",{style:{padding:"0 16px 16px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("textarea",{value:m,onChange:O=>v(O.target.value),placeholder:"Describe what you want your agent to do... e.g. 'A code reviewer that focuses on React best practices and security vulnerabilities'",style:{...Oi,minHeight:"80px",resize:"vertical",fontFamily:"inherit",border:`1px solid ${Ue.borderS}`}}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsxs("button",{onClick:g,disabled:d||!m.trim(),style:{backgroundColor:Ue.violetM,color:Ue.violet,border:`1px solid ${Ue.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:d||!m.trim()?.5:1},children:[e.jsx(Cl,{size:14}),d?"Generating...":"Generate with AI"]}),C&&e.jsxs("span",{style:{fontSize:"12px",color:Ue.danger,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ei,{size:12}),C]})]}),_&&e.jsxs("div",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.success}`,borderRadius:"8px",padding:"14px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ue.success,textTransform:"uppercase"},children:"AI Suggestion"}),e.jsxs("button",{onClick:w,style:{backgroundColor:Ue.success,color:"#fff",border:"none",padding:"5px 12px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(sr,{size:12}),"Apply"]})]}),_.name&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Name:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.name})]}),_.description&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Description:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.description})]}),_.model&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Model:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.model})]}),_.tools&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Tools:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.tools.join(", ")})]}),_.prompt&&e.jsxs("pre",{style:{fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,backgroundColor:"rgba(255,255,255,0.02)",padding:"10px",borderRadius:"6px",maxHeight:"150px",overflowY:"auto",whiteSpace:"pre-wrap",margin:0,lineHeight:"1.5"},children:[_.prompt.substring(0,500),_.prompt.length>500?"...":""]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$i,children:"Name"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...Oi,paddingRight:"36px"},value:p.name,placeholder:"my-custom-agent",onChange:O=>f(H=>({...H,name:O.target.value.toLowerCase().replace(/\s/g,"-")}))}),R!==null&&e.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex"},children:R?e.jsx(sr,{size:14,color:Ue.success}):e.jsx(St,{size:14,color:Ue.danger})})]}),e.jsx("p",{style:{fontSize:"11px",color:R===!1?Ue.danger:Ue.tm,margin:"4px 0 0 0"},children:R===!1?"Must be kebab-case (e.g. my-agent-name)":"Lowercase, hyphens only"})]}),e.jsxs("div",{children:[e.jsx("label",{style:$i,children:"Description"}),e.jsx("textarea",{style:{...Oi,resize:"vertical",minHeight:"60px",fontFamily:"inherit"},value:p.description,rows:3,placeholder:"What does this agent do?",onChange:O=>f(H=>({...H,description:O.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:$i,children:"Model"}),e.jsx("select",{style:Oi,value:p.model,onChange:O=>f(H=>({...H,model:O.target.value})),children:h6.map(O=>e.jsx("option",{value:O,children:O},O))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:$i,children:"Category"}),e.jsxs("select",{style:Oi,value:p.category,onChange:O=>f(H=>({...H,category:O.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),i.map(O=>e.jsx("option",{value:O.name,children:O.name},O.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$i,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:u6.map(O=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:p.tools.includes(O)?Ue.violetM:Ue.bg,border:`1px solid ${p.tools.includes(O)?Ue.violet:Ue.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:p.tools.includes(O)?Ue.violet:Ue.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:p.tools.includes(O),onChange:()=>A(O),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${p.tools.includes(O)?Ue.violet:Ue.tm}`,backgroundColor:p.tools.includes(O)?Ue.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:p.tools.includes(O)&&e.jsx(sr,{size:10,color:"#fff"})}),O]},O))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:$i,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:Oi,value:p.max_turns,onChange:O=>f(H=>({...H,max_turns:parseInt(O.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:$i,children:"Permission Mode"}),e.jsx("select",{style:Oi,value:p.permission_mode,onChange:O=>f(H=>({...H,permission_mode:O.target.value})),children:p6.map(O=>e.jsx("option",{value:O,children:O||"(none)"},O))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:$i,children:"Memory"}),e.jsx("input",{style:Oi,value:p.memory,placeholder:"Optional...",onChange:O=>f(H=>({...H,memory:O.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:$i,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...Oi,resize:"vertical",minHeight:"280px",fontFamily:Ue.mono,fontSize:"12px",lineHeight:"1.7",whiteSpace:"pre"},value:p.prompt,rows:20,placeholder:"Write the agent instructions here...",onChange:O=>f(H=>({...H,prompt:O.target.value}))})]}),S&&e.jsx("div",{style:{color:Ue.danger,fontSize:"12px",padding:"8px 12px",backgroundColor:"rgba(239,68,68,0.1)",borderRadius:"6px",border:"1px solid rgba(239,68,68,0.2)"},children:S}),e.jsxs("div",{style:{display:"flex",gap:"12px",paddingBottom:"24px"},children:[e.jsx(mi,{to:"/agents",style:{backgroundColor:Ue.surfaceEl,color:Ue.ts,border:`1px solid ${Ue.borderS}`,padding:"10px 20px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:o||!R,style:{backgroundColor:Ue.tp,color:Ue.bg,border:"none",padding:"10px 24px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",opacity:o||!R?.5:1,display:"flex",alignItems:"center",gap:"8px"},children:o?"Creating...":"Create Agent"})]})]}),e.jsxs("div",{style:{width:"40%",borderLeft:`1px solid ${Ue.border}`,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx($s,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Card Preview"})]}),e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"8px",border:`1px solid ${Ue.border}`,padding:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0",color:Ue.tp},children:p.name?p.name.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase()):"Agent Name"}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:B!=null&&B.color?`${B.color}15`:Ue.violetM,color:(B==null?void 0:B.color)||Ue.violet},children:p.category||"uncategorized"})]})}),e.jsx("p",{style:{fontSize:"12px",color:Ue.ts,lineHeight:"1.5",margin:0},children:p.description||"[No description]"}),e.jsxs("div",{style:{borderTop:`1px solid ${Ue.border}`,paddingTop:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:Ue.mono,color:Ue.tm},children:p.model||"unknown"}),p.tools.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:Ue.tm},children:[p.tools.length," tools"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ls,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:z||"# Empty agent file"})]})]})]})]})}const nt={surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},g6=t=>t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--";function x6({agentName:t,onRevert:i}){const[s,o]=L.useState([]),[u,S]=L.useState(!0),[b,l]=L.useState(null),[c,m]=L.useState(null),[v,d]=L.useState(null);L.useEffect(()=>{y()},[t]);const y=async()=>{S(!0);try{const C=(await le(`/api/agents/${t}/versions`)||[]).sort((h,p)=>p.version_number-h.version_number);o(C)}catch{l("Failed to load version history")}finally{S(!1)}},_=async j=>{try{await le(`/api/agents/${t}/versions/${j}/revert`,{method:"POST"}),m(null),i&&i(),y()}catch{alert("Failed to revert version")}};return u?e.jsxs("div",{style:{padding:"24px",color:nt.ts,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(sx,{size:14}),"Loading history..."]}):b?e.jsxs("div",{style:{padding:"24px",color:nt.danger,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ei,{size:14}),b]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:nt.violetG,display:"flex",alignItems:"center",justifyContent:"center",color:nt.violet},children:e.jsx(sx,{size:14})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600,color:nt.tp},children:"Version History"}),e.jsxs("span",{style:{fontSize:"10px",color:nt.tm},children:[s.length," versions"]})]})]}),e.jsxs("div",{style:{position:"relative",paddingLeft:"24px"},children:[s.length>0&&e.jsx("div",{style:{position:"absolute",left:"7px",top:"8px",bottom:"8px",width:"1px",background:nt.borderS}}),s.map((j,C)=>{const h=C===0,p=v===j.id,f=c===j.id,g=s[C+1],w=g&&j.model!==g.model,R=g&&j.tools!==g.tools;return e.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"-21px",top:"12px",width:"9px",height:"9px",borderRadius:"50%",background:h?nt.violet:nt.surfaceEl,border:`2px solid ${h?nt.violetM:nt.borderS}`,zIndex:2}}),e.jsxs("div",{style:{background:nt.surface,border:`1px solid ${nt.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>d(p?null:j.id),style:{padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:"11px",fontFamily:nt.mono,color:h?nt.violet:nt.ts,background:h?nt.violetG:"transparent",padding:"2px 6px",borderRadius:"4px",border:`1px solid ${h?nt.violetM:nt.border}`,flexShrink:0},children:["v",j.version_number]}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("span",{style:{fontSize:"13px",color:nt.tp,fontWeight:500},children:j.change_summary||"[No summary]"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"2px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:nt.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Yo,{size:10})," ",g6(j.created_at)]}),h&&e.jsx("span",{style:{fontSize:"10px",color:nt.violet,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Current"})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[!h&&!f&&e.jsxs("button",{onClick:A=>{A.stopPropagation(),m(j.id)},style:{background:"transparent",border:`1px solid ${nt.border}`,borderRadius:"6px",color:nt.ts,padding:"4px 8px",fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",transition:"border-color 0.2s"},children:[e.jsx(Rw,{size:12})," Revert"]}),p?e.jsx(Sn,{size:14,color:nt.tm}):e.jsx(cr,{size:14,color:nt.tm})]})]}),f&&e.jsxs("div",{style:{padding:"12px 16px",background:"rgba(139,92,246,0.05)",borderTop:`1px solid ${nt.violetM}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontSize:"12px",color:nt.tp},children:["Revert to ",e.jsxs("strong",{children:["v",j.version_number]}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>m(null),style:{background:"transparent",border:"none",color:nt.ts,fontSize:"11px",cursor:"pointer",padding:"4px 8px"},children:"Cancel"}),e.jsx("button",{onClick:()=>_(j.id),style:{background:nt.violet,border:"none",color:"#fff",fontSize:"11px",fontWeight:600,padding:"4px 12px",borderRadius:"4px",cursor:"pointer"},children:"Revert Now"})]})]}),p&&e.jsxs("div",{style:{padding:"16px",borderTop:`1px solid ${nt.border}`,background:"rgba(0,0,0,0.1)"},children:[e.jsx("p",{style:{fontSize:"12px",color:nt.ts,margin:"0 0 12px 0",lineHeight:1.5},children:j.description||"[No description]"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{padding:"8px",background:nt.surfaceEl,borderRadius:"6px",border:`1px solid ${w?nt.violetM:nt.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:nt.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(Xn,{size:10})," Model"]}),e.jsx("div",{style:{fontSize:"12px",color:w?nt.violet:nt.tp,fontFamily:nt.mono},children:j.model||"unknown"})]}),e.jsxs("div",{style:{padding:"8px",background:nt.surfaceEl,borderRadius:"6px",border:`1px solid ${R?nt.violetM:nt.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:nt.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(z0,{size:10})," Tools"]}),e.jsxs("div",{style:{fontSize:"12px",color:R?nt.violet:nt.tp},children:[j.tools?j.tools.split(",").filter(Boolean).length:0," defined"]})]}),e.jsxs("div",{style:{padding:"8px",background:nt.surfaceEl,borderRadius:"6px",border:`1px solid ${nt.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:nt.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(wh,{size:10})," Memory"]}),e.jsx("div",{style:{fontSize:"12px",color:nt.tp},children:j.memory||"None"})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:nt.tm,marginBottom:"6px",textTransform:"uppercase"},children:[e.jsx(Ls,{size:10})," Prompt Snippet"]}),e.jsxs("div",{style:{fontSize:"11px",color:nt.ts,fontFamily:nt.mono,background:"#000",padding:"10px",borderRadius:"6px",border:`1px solid ${nt.border}`,maxHeight:"100px",overflowY:"auto",whiteSpace:"pre-wrap",lineHeight:1.4},children:[(j.full_prompt||"[Empty]").substring(0,500),j.full_prompt&&j.full_prompt.length>500?"...":""]})]})]})]})]},j.id)})]}),s.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",border:`1px dashed ${nt.border}`,borderRadius:"12px",color:nt.tm,fontSize:"12px"},children:"No version history available yet."})]})}const N={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function fu(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function Ro(t){return t?t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString():"0"}function m6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=N.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${N.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=N.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})})}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:N.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:N.ts},children:t.project_name}),e.jsx("span",{style:{color:N.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:["v",t.iteration_version]})]})]})]})}function y6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Wi,{size:14,style:{color:N.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:N.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:N.surfaceEl,border:`1px solid ${N.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:N.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:16})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${N.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=N.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=N.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:N.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:N.surfaceEl,border:`1px solid ${N.border}`,color:N.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:N.surfaceEl,border:`1px solid ${N.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:N.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(cr,{size:16})})]})]})}function v6(){const{name:t}=Jn(),i=Ut(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState([]),[c,m]=L.useState(!0),[v,d]=L.useState(!1),[y,_]=L.useState([]),[j,C]=L.useState([]),[h,p]=L.useState(!1),[f,g]=L.useState([]),[w,R]=L.useState(!1),[A,z]=L.useState(!1),[E,B]=L.useState(new Set),[O,H]=L.useState([]),[K,U]=L.useState({}),[ee,V]=L.useState(!1),[ue,Q]=L.useState(!1),[G,M]=L.useState(null),[I,D]=L.useState(!1),[W,fe]=L.useState([]),[ye,we]=L.useState(!0),[Re,Y]=L.useState(null),[F,be]=L.useState({}),[oe,Ie]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[Z,je]=L.useState(!1),pe=qo(),De=s&&s.source==="manual"&&(!s.created_by||s.created_by===(pe==null?void 0:pe.userId)),[$e,Pe]=L.useState(null),[Ee,He]=L.useState(!1),[J,ce]=L.useState(null),[Ne,et]=L.useState(!1),[Je,pt]=L.useState(null),[Gt,Ct]=L.useState(null),[kt,Lt]=L.useState([]),[bt,It]=L.useState(""),[gt,Rr]=L.useState(!1),[pr,ii]=L.useState(!1),[fr,Tr]=L.useState(null),gr=L.useRef(null);L.useEffect(()=>{var P;(P=gr.current)==null||P.scrollIntoView({behavior:"smooth"})},[kt]);const ae=async()=>{if(!bt.trim()||gt)return;const P=bt.trim();It("");const re=[...kt,{role:"user",content:P}];Lt(re),Rr(!0);try{const Se=await le(`/api/agents/${t}/test-chat`,{method:"POST",body:JSON.stringify({messages:re})});Lt(ie=>[...ie,{role:"assistant",content:Se.content}]),Se.context&&Tr(Se.context)}catch(Se){Lt(ie=>[...ie,{role:"assistant",content:"Error: "+(Se.message||"Failed to get response")}])}finally{Rr(!1)}};L.useEffect(()=>{try{const P=localStorage.getItem(`mcp_key_${t}`);P&&Ct(P)}catch{}},[t]);const We=(P,re)=>{navigator.clipboard.writeText(P),pt(re),setTimeout(()=>pt(null),2e3)};L.useEffect(()=>{m(!0),Promise.all([le(`/api/agents/${t}`),le(`/api/agents/${t}/projects`),le("/api/categories"),le(`/api/marketplace/${t}`)]).then(async([P,re,Se,ie])=>{o(P),S(re||[]),l(Se||[]),H(ie.showcases||[]);try{const ot=await le(`/api/skills/agent/${t}`);_(ot||[])}catch(ot){console.error("Failed to load agent skills:",ot)}try{const ot=await le(`/api/agent-deploy/${t}/deployment`);Pe(ot)}catch{}const Oe=(re||[]).slice(0,20),Ve={};await Promise.all(Oe.map(async ot=>{try{const Ce=await le(`/api/iterations/${ot.id}`);Ce&&Ce.length>0&&(Ve[ot.id]=Ce)}catch(Ce){console.error(`Failed to load iterations for project ${ot.id}:`,Ce)}})),U(Ve)}).catch(P=>{console.error(P)}).finally(()=>m(!1))},[t]);const Ge=async P=>{try{await le(`/api/agents/${t}/rating`,{method:"PATCH",body:JSON.stringify({rating:P})}),o(re=>({...re,rating:P}))}catch(re){console.error(re)}},ut=async()=>{try{await le(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch(P){console.error(P)}},_t=()=>{if(!(s!=null&&s.full_prompt))return;const P=new Blob([s.full_prompt],{type:"text/markdown"}),re=URL.createObjectURL(P),Se=document.createElement("a");Se.href=re,Se.download=`${s.name}.md`,Se.click(),URL.revokeObjectURL(re)},Yt=async()=>{const P=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(P)try{await le(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:P})}),i(`/agents/${P}`)}catch(re){console.error(re)}},mt=async P=>{if(P.preventDefault(),Q(!1),O.length>=6){alert("Maximum 6 showcases per agent");return}try{const re=JSON.parse(P.dataTransfer.getData("application/json"));await le(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(re)});const Se=await le(`/api/marketplace/${t}`);H(Se.showcases||[])}catch(re){console.error("Drop error:",re),alert(re.message||"Failed to add showcase")}},Xt=P=>{P.preventDefault(),P.dataTransfer.dropEffect="copy",Q(!0)},$r=()=>{Q(!1)},Kr=async()=>{He(!0);try{const P=await le(`/api/agent-deploy/${t}/deploy`,{method:"POST",body:JSON.stringify({tier:"starter"})});Pe(P.deployment),ce(P.apiKey),Ct(P.apiKey),et(!0);try{localStorage.setItem(`mcp_key_${t}`,P.apiKey)}catch{}}catch(P){alert(P.message||"Deploy failed")}finally{He(!1)}},ni=async()=>{if(window.confirm("Undeploy this MCP server? API keys will be revoked.")){He(!0);try{await le(`/api/agent-deploy/${t}/deployment`,{method:"DELETE"}),Pe(null),ce(null)}catch(P){alert(P.message||"Undeploy failed")}finally{He(!1)}}},Ar=async()=>{if(!$e)return;const P=$e.status==="active"?"paused":"active";try{await le(`/api/agent-deploy/${t}/deployment`,{method:"PUT",body:JSON.stringify({status:P})}),Pe(re=>({...re,status:P}))}catch(re){alert(re.message||"Status update failed")}},Fr=async(P,re)=>{const Se=O.findIndex(Ve=>Ve.id===P);if(re==="up"&&Se===0||re==="down"&&Se===O.length-1)return;const ie=[...O],Oe=re==="up"?Se-1:Se+1;[ie[Se],ie[Oe]]=[ie[Oe],ie[Se]],H(ie),await le(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:ie.map(Ve=>Ve.id)})})},si=async P=>{window.confirm("Remove this showcase?")&&(await le(`/api/marketplace/${t}/showcases/${P}`,{method:"DELETE"}),H(O.filter(re=>re.id!==P)))},Ui=async()=>{try{const P=await le("/api/projects");fe(P||[]);const re={};await Promise.all((P||[]).map(async Se=>{try{const ie=await le(`/api/iterations/${Se.id}`);ie&&ie.length>0&&(re[Se.id]=ie)}catch(ie){console.error(`Failed to load iterations for project ${Se.id}:`,ie)}})),be(re)}catch(P){console.error(P)}we(!0),Y(null),D(!0)},xr=async()=>{if(!(!oe.project_id||!oe.iteration_id||!oe.title))try{await le(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(oe)});const P=await le(`/api/marketplace/${t}`);H(P.showcases||[]),D(!1),Y(null),Ie({project_id:"",iteration_id:"",title:"",description:""})}catch(P){console.error(P),alert(P.message||"Failed to add showcase")}};if(c)return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:N.bg,color:N.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:N.tm,fontSize:"13px"},children:"Loading..."})});if(!s)return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:N.bg,color:N.tp,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px"},children:[e.jsx("span",{style:{color:N.ts,fontSize:"14px"},children:"Agent not found"}),e.jsx(mi,{to:"/agents",style:{color:N.violet,fontSize:"13px"},children:"Back to agents"})]});const mr=b.find(P=>P.name===s.category),qr=s.tools?s.tools.split(",").map(P=>P.trim()).filter(Boolean):[];return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:N.bg,color:N.tp,overflowY:"auto"},children:[e.jsxs("div",{className:"agent-detail-breadcrumb",style:{padding:"16px 32px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${N.border}`},children:[e.jsx(mi,{to:"/agents",style:{color:N.tm,display:"flex",textDecoration:"none"},children:e.jsx(vh,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:N.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:N.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:N.ts},children:t})]}),e.jsxs("div",{className:"agent-detail-header",style:{margin:"0",padding:"32px",borderRadius:"0",border:"none",borderBottom:`1px solid ${N.border}`,background:"rgba(26,26,27,0.8)",backdropFilter:"blur(20px)",boxShadow:`0 0 40px ${N.violetG}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[s.screenshot_path?e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",overflow:"hidden",border:`2px solid ${N.violet}40`,flexShrink:0,background:N.surfaceEl,boxShadow:`0 4px 16px ${N.violetG}`},children:e.jsx("img",{src:s.screenshot_path+"?t="+Date.now(),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",flexShrink:0,background:`linear-gradient(135deg, ${N.violetM} 0%, ${N.surfaceEl} 100%)`,border:`2px solid ${N.violet}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",color:N.violet},children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 10px 0",letterSpacing:"-0.01em"},children:s.name.replace(/-/g," ").replace(/\b\w/g,P=>P.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:mr!=null&&mr.color?`${mr.color}15`:N.violetM,color:(mr==null?void 0:mr.color)||N.violet},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:"rgba(255,255,255,0.05)",color:N.ts,fontFamily:N.mono},children:s.model||"unknown"}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:s.source==="manual"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:s.source==="manual"?N.success:N.ts},children:s.source||"filesystem"}),qr.map(P=>e.jsx("span",{style:{display:"inline-flex",padding:"3px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"500",backgroundColor:"rgba(255,255,255,0.04)",color:N.tm},children:P},P))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"3px",flexShrink:0},children:[1,2,3,4,5].map(P=>e.jsx(_n,{size:16,fill:P<=(s.rating||0)?N.warning:"none",color:P<=(s.rating||0)?N.warning:N.tm,style:{cursor:"pointer"},onClick:()=>Ge(P)},P))})]}),e.jsx("p",{style:{fontSize:"13px",color:N.ts,lineHeight:"1.6",margin:"0 0 16px 0",maxWidth:"700px"},children:s.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",marginBottom:"20px"},children:[s.memory&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Memory:"})," ",s.memory]}),s.permission_mode&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Permission:"})," ",s.permission_mode]}),s.max_turns>0&&e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[e.jsx("span",{style:{color:N.ts,fontWeight:"600"},children:"Max Turns:"})," ",s.max_turns]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(rx,{size:10})," ",fu(s.created_at)]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Yo,{size:10})," ",fu(s.updated_at)]})]}),e.jsxs("div",{className:"agent-detail-actions",style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[De&&e.jsxs("button",{onClick:()=>i(`/agents/${t}/edit`),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xo,{size:13}),"Edit"]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Do,{size:13}),"Test"]}),e.jsxs("button",{onClick:Yt,style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(wl,{size:13}),"Duplicate"]}),e.jsxs("button",{onClick:_t,style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(bn,{size:13}),"Export .md"]}),$e?e.jsxs("a",{href:`/mcp/${$e.slug}`,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"rgba(34,197,94,0.1)",color:N.success,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",textDecoration:"none"},children:[e.jsx(Es,{size:13}),"View MCP"]}):e.jsxs("button",{onClick:Kr,disabled:Ee,style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:Ee?"wait":"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Yd,{size:13}),Ee?"Deploying...":"Deploy MCP"]}),e.jsxs("button",{onClick:()=>V(!ee),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Wi,{size:13}),ee?"Hide Showcases":"Manage Showcases"]}),De&&(v?e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"12px",color:N.danger},children:"Confirm?"}),e.jsx("button",{onClick:ut,style:{backgroundColor:N.danger,color:"#fff",border:"none",padding:"6px 12px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer"},children:"Yes"}),e.jsx("button",{onClick:()=>d(!1),style:{backgroundColor:N.surfaceEl,color:N.ts,border:`1px solid ${N.borderS}`,padding:"6px 12px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"No"})]}):e.jsxs("button",{onClick:()=>d(!0),style:{backgroundColor:"transparent",color:N.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Or,{size:13}),"Delete"]}))]})]}),De&&e.jsxs("div",{style:{padding:"20px 32px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>i(`/skills/create?agent=${t}`),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:P=>{P.currentTarget.style.borderColor="#06b6d4",P.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.borderColor="rgba(6,182,212,0.25)",P.currentTarget.style.boxShadow="none",P.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Vr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Create Skill"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"New skill auto-linked to this agent"})]}),e.jsx(cr,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:async()=>{try{const P=await le("/api/skills");C(P||[]),p(!0)}catch(P){console.error(P)}},style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:P=>{P.currentTarget.style.borderColor=N.violet,P.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.borderColor="rgba(139,92,246,0.25)",P.currentTarget.style.boxShadow="none",P.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(er,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Assign existing skills to this agent"})]}),e.jsx(cr,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>je(!0),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:P=>{P.currentTarget.style.borderColor="#f59e0b",P.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.borderColor="rgba(245,158,11,0.25)",P.currentTarget.style.boxShadow="none",P.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ht,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:N.tp,marginBottom:"2px"},children:"Enhance with AI"}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Improve this agent via AI conversation"})]}),e.jsx(cr,{size:16,style:{color:N.tm,marginLeft:"auto",flexShrink:0}})]})]}),ee&&e.jsxs("div",{style:{margin:"0 24px 24px",padding:"24px",borderRadius:"12px",border:`1px solid ${N.violet}40`,background:N.surface},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:N.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:N.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:N.ts},children:[O.length," / 6 showcases"]}),O.length<6&&e.jsxs("button",{onClick:Ui,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:N.tp,color:N.bg,border:"none"},children:[e.jsx(er,{size:14})," Add Showcase"]})]})]}),e.jsxs("div",{onDrop:mt,onDragOver:Xt,onDragLeave:$r,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:O.length===0?"120px":"auto",border:ue?`2px dashed ${N.violet}`:"none",borderRadius:"8px",padding:ue?"8px":"0",background:ue?`${N.violet}10`:"transparent",transition:"all 0.2s"},children:[O.map((P,re)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:N.surfaceEl,borderRadius:"8px",border:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>Fr(P.id,"up"),disabled:re===0,style:{background:"none",border:"none",color:re===0?N.tm:N.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(_0,{size:14})}),e.jsx("button",{onClick:()=>Fr(P.id,"down"),disabled:re===O.length-1,style:{background:"none",border:"none",color:re===O.length-1?N.tm:N.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(b0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:P.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm},children:[P.project_name,"  v",P.iteration_version]})]}),e.jsxs("button",{onClick:()=>si(P.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${N.danger}20`,color:N.danger,border:"none"},children:[e.jsx(Or,{size:14})," Remove"]})]},P.id)),O.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${ue?N.violet:N.border}`,borderRadius:"8px",color:ue?N.violet:N.tm,background:ue?`${N.violet}10`:"transparent",transition:"all 0.2s"},children:ue?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations below!"})]})]}),O.length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx($s,{size:16,style:{color:N.violet}})," Showcase Gallery"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:O.map(P=>e.jsx(m6,{showcase:P,onClick:M},P.id))})]}),Object.keys(K).length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Wi,{size:16,style:{color:N.violet}})," Iteration Browser"]}),u.filter(P=>K[P.id]&&K[P.id].length>0).map(P=>e.jsx(y6,{iterations:K[P.id],projectId:P.id,projectName:P.name,onSelectIteration:(re,Se,ie)=>{M({project_id:Se,iteration_id:re.id,title:re.title||`V${re.version}`,project_name:ie,iteration_version:re.version})}},P.id))]}),e.jsxs("div",{className:"agent-detail-content",style:{display:"flex",padding:"0 24px 24px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{className:"agent-detail-left",style:{width:"65%",minWidth:"300px",flex:"1 1 400px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:["Prompt",s.full_prompt&&e.jsxs("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",fontFamily:N.mono},children:[s.full_prompt.split(`
`).length," lines"]})]}),e.jsx("div",{style:{backgroundColor:N.bg,border:`1px solid ${N.borderS}`,borderRadius:"8px",maxHeight:"600px",overflowY:"auto"},children:s.full_prompt?e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{padding:"16px 12px 16px 16px",borderRight:`1px solid ${N.border}`,userSelect:"none",flexShrink:0},children:s.full_prompt.split(`
`).map((P,re)=>e.jsx("div",{style:{fontSize:"11px",fontFamily:N.mono,color:"rgba(255,255,255,0.15)",lineHeight:"1.7",textAlign:"right"},children:re+1},re))}),e.jsx("pre",{style:{padding:"16px",margin:0,fontSize:"11px",fontFamily:N.mono,color:N.ts,lineHeight:"1.7",whiteSpace:"pre-wrap",wordBreak:"break-word",flex:1,overflow:"hidden"},children:s.full_prompt})]}):e.jsx("div",{style:{padding:"40px",textAlign:"center",color:N.tm,fontSize:"13px"},children:"[No prompt content]"})}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx(x6,{agentName:t,onRevert:()=>{le(`/api/agents/${t}`).then(o).catch(console.error)}})})]}),e.jsxs("div",{className:"agent-detail-right",style:{width:"35%",minWidth:"280px",flex:"1 1 280px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:["Projects",e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:u.length})]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(er,{size:12}),"New"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[u.map(P=>e.jsxs("div",{onClick:()=>i(`/project/${P.id}`),style:{backgroundColor:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"14px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:re=>re.currentTarget.style.borderColor=N.violet,onMouseLeave:re=>re.currentTarget.style.borderColor=N.border,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"500"},children:P.name}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:P.status==="active"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:P.status==="active"?N.success:N.tm},children:P.status})]}),e.jsxs("div",{style:{fontSize:"11px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(rx,{size:10})," ",fu(P.created_at)]})]},P.id)),u.length===0&&e.jsx("div",{style:{padding:"40px 20px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${N.borderS}`,color:N.tm,fontSize:"12px"},children:"No projects yet"})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Vr,{size:14,style:{color:N.violet}}),"Skills",e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:y.length})]}),De&&e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:async()=>{R(!0),z(!0),B(new Set);try{const P=await le(`/api/skills/agent/${t}/ai-generate`,{method:"POST"});g(P.skills||[]),B(new Set((P.skills||[]).map((re,Se)=>Se)))}catch(P){console.error(P),g([])}R(!1)},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.25)",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ht,{size:12}),"AI Enhance"]}),e.jsxs("button",{onClick:async()=>{try{const P=await le("/api/skills");C(P||[]),p(!0)}catch(P){console.error(P)}},style:{backgroundColor:N.violetM,color:N.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(er,{size:12}),"Add"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[y.map(P=>e.jsxs("div",{style:{backgroundColor:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:re=>{re.currentTarget.style.borderColor=P.color||N.violet,re.currentTarget.style.transform="translateX(4px)"},onMouseLeave:re=>{re.currentTarget.style.borderColor=N.border,re.currentTarget.style.transform="translateX(0)"},onClick:()=>i(`/skills/${P.id}/edit`),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:P.color||N.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:P.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:P.category||"general"}),e.jsx(Do,{size:10,style:{color:N.tm,opacity:.5}})]}),De&&e.jsx("button",{onClick:async re=>{re.stopPropagation();try{await le(`/api/skills/${P.id}/unassign/${t}`,{method:"DELETE"}),_(Se=>Se.filter(ie=>ie.id!==P.id))}catch(Se){console.error(Se)}},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Remove skill",children:e.jsx(St,{size:13})})]},P.id)),y.length===0&&!A&&e.jsx("div",{style:{padding:"24px 14px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${N.borderS}`,color:N.tm,fontSize:"11px"},children:"No skills assigned"})]}),A&&e.jsxs("div",{style:{marginTop:"12px",borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(245,158,11,0.3)",background:"linear-gradient(135deg, rgba(245,158,11,0.06) 0%, rgba(245,158,11,0.02) 100%)"},children:[e.jsxs("div",{style:{padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(245,158,11,0.15)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ht,{size:14,style:{color:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:N.tp},children:"AI-Suggested Skills"}),!w&&f.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:N.tm},children:[E.size,"/",f.length," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[!w&&f.length>0&&e.jsxs("button",{onClick:async()=>{if(E.size===0)return;const P=f.filter((re,Se)=>E.has(Se));try{const re=await le("/api/skills/bulk",{method:"POST",body:JSON.stringify({skills:P})});if(re.skills&&re.skills.length>0){const Se=re.skills.map(Oe=>Oe.id);await le(`/api/skills/agent/${t}/bulk`,{method:"POST",body:JSON.stringify({skill_ids:Se})});const ie=await le(`/api/skills/agent/${t}`);_(ie||[])}z(!1),g([])}catch(re){console.error(re)}},style:{backgroundColor:"rgba(34,197,94,0.15)",color:"#22c55e",border:"1px solid rgba(34,197,94,0.3)",padding:"4px 12px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:["Add ",E.size," Skills"]}),e.jsx("button",{onClick:()=>{z(!1),g([])},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex",padding:"4px"},children:e.jsx(St,{size:14})})]})]}),e.jsx("div",{style:{padding:"8px",maxHeight:"320px",overflowY:"auto"},children:w?e.jsxs("div",{style:{padding:"30px",textAlign:"center"},children:[e.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid rgba(245,158,11,0.3)",borderTopColor:"#f59e0b",borderRadius:"50%",margin:"0 auto 10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"11px",color:N.ts},children:"Analyzing agent context..."}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg) } }"})]}):f.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:N.tm,fontSize:"11px"},children:"No suggestions generated. Try again."}):f.map((P,re)=>{const Se=E.has(re);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",padding:"10px 12px",borderRadius:"6px",marginBottom:"4px",backgroundColor:Se?"rgba(245,158,11,0.08)":"transparent",border:`1px solid ${Se?"rgba(245,158,11,0.2)":"transparent"}`,cursor:"pointer",transition:"all 0.15s"},onClick:()=>{B(ie=>{const Oe=new Set(ie);return Oe.has(re)?Oe.delete(re):Oe.add(re),Oe})},children:[e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",flexShrink:0,marginTop:"1px",border:`2px solid ${Se?"#f59e0b":N.borderS}`,backgroundColor:Se?"#f59e0b":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},children:Se&&e.jsx("span",{style:{color:"#000",fontSize:"11px",fontWeight:"700"},children:""})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"3px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:P.color||"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:N.tp},children:P.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:P.category})]}),e.jsx("div",{style:{fontSize:"11px",color:N.ts,lineHeight:"1.4"},children:P.description})]})]},re)})})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Yd,{size:14,style:{color:N.violet}}),"MCP Deploy",$e&&e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:$e.status==="active"?"rgba(34,197,94,0.15)":"rgba(245,158,11,0.15)",color:$e.status==="active"?N.success:N.warning},children:$e.status})]})}),$e?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("a",{href:`/mcp/${$e.slug}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 14px",borderBottom:`1px solid ${N.border}`,textDecoration:"none",color:N.tp,fontSize:"12px",transition:"background 0.15s"},onMouseEnter:P=>P.currentTarget.style.backgroundColor=N.surfaceEl,onMouseLeave:P=>P.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Es,{size:13,style:{color:N.violet}}),e.jsxs("span",{style:{fontFamily:N.mono,fontSize:"11px",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["/mcp/",$e.slug]}),e.jsx(Do,{size:11,style:{color:N.tm}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",borderBottom:`1px solid ${N.border}`,fontSize:"11px"},children:[e.jsx(ox,{size:12,style:{color:N.violet}}),e.jsxs("span",{style:{fontFamily:N.mono,color:N.ts,flex:1},children:["/mcp/",$e.slug,"/api/chat"]})]}),Ne&&J&&e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,background:"rgba(139,92,246,0.05)"},children:[e.jsxs("div",{style:{fontSize:"10px",color:N.warning,fontWeight:"600",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ox,{size:10})," Save your API key (shown only once)"]}),e.jsxs("div",{style:{fontFamily:N.mono,fontSize:"10px",color:N.tp,background:"rgba(0,0,0,0.3)",padding:"6px 8px",borderRadius:"4px",wordBreak:"break-all",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{flex:1},children:J}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(J)},style:{background:"none",border:"none",color:N.violet,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(wl,{size:12})})]})]}),$e.monthlyUsage!==void 0&&e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:N.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(bh,{size:10})," Monthly Tokens"]}),e.jsxs("span",{style:{fontSize:"10px",fontFamily:N.mono,color:N.ts},children:[Ro($e.monthlyUsage)," / ",Ro($e.monthly_token_limit)]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.06)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:"3px",width:`${Math.min(($e.monthlyUsage||0)/($e.monthly_token_limit||1)*100,100)}%`,background:`linear-gradient(90deg, ${N.violet}, ${N.violet}cc)`,transition:"width 0.5s ease"}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",borderBottom:`1px solid ${N.border}`},children:[e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${N.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:$e.total_requests||0}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Requests"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${N.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:Ro($e.total_input_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Input"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:N.mono},children:Ro($e.total_output_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:N.tm,marginTop:"2px"},children:"Output"})]})]}),e.jsxs("div",{style:{padding:"10px 14px",display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:Ar,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:$e.status==="active"?"rgba(245,158,11,0.1)":"rgba(34,197,94,0.1)",color:$e.status==="active"?N.warning:N.success,border:"none",cursor:"pointer"},children:$e.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(gw,{size:10}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(ql,{size:10}),"Resume"]})}),e.jsxs("button",{onClick:ni,disabled:Ee,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:"rgba(239,68,68,0.1)",color:N.danger,border:"none",cursor:Ee?"wait":"pointer"},children:[e.jsx(lx,{size:10}),"Undeploy"]})]})]}),(()=>{const P=Gt||J||"YOUR_API_KEY",Se=`${window.location.origin}/mcp/${$e.slug}/api/chat`,ie=s.name.replace(/-/g," ").replace(/\b\w/g,ht=>ht.toUpperCase()),Oe=`curl -X POST ${Se} \\
  -H "Authorization: Bearer ${P}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"Hello!"}]}'`,Ve=`You have access to an AI agent "${ie}" via HTTP API.

Endpoint: ${Se}
API Key: ${P}

To interact with this agent, make HTTP POST requests:

curl -X POST ${Se} \\
  -H "Authorization: Bearer ${P}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}'

The response will contain the agent's reply in: response.choices[0].message.content

Use this agent when you need help with: ${s.description||"specialized tasks"}.`,ot=`You are connected to an external AI agent "${ie}".

To call this agent, use the following HTTP API:
- Method: POST
- URL: ${Se}
- Headers: Authorization: Bearer ${P}, Content-Type: application/json
- Body: {"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}

The agent responds with: {"choices":[{"message":{"content":"RESPONSE"}}]}

Agent description: ${s.description||"Specialized AI agent"}.
Use this agent to delegate tasks matching its expertise.`,Ce=({label:ht,value:it,fieldKey:Dt})=>e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"10px",color:N.tm,fontWeight:"600",textTransform:"uppercase"},children:ht}),e.jsxs("button",{onClick:()=>We(it,Dt),style:{background:Je===Dt?"rgba(34,197,94,0.15)":N.surfaceEl,border:`1px solid ${Je===Dt?"rgba(34,197,94,0.3)":N.border}`,color:Je===Dt?N.success:N.ts,padding:"3px 8px",fontSize:"9px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s"},children:[e.jsx(wl,{size:9}),Je===Dt?"Copied!":"Copy"]})]}),e.jsx("div",{onClick:()=>We(it,Dt),style:{fontFamily:N.mono,fontSize:"10px",color:N.ts,background:"rgba(0,0,0,0.3)",padding:"8px 10px",borderRadius:"6px",whiteSpace:"pre-wrap",wordBreak:"break-all",lineHeight:"1.5",cursor:"pointer",border:`1px solid ${N.border}`,maxHeight:"120px",overflowY:"auto",transition:"border-color 0.2s"},onMouseEnter:Vi=>Vi.currentTarget.style.borderColor=N.violet,onMouseLeave:Vi=>Vi.currentTarget.style.borderColor=N.border,children:it})]});return e.jsxs("div",{style:{marginTop:"12px",background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Vr,{size:12,style:{color:N.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:"Test in your LLM"})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx(Ce,{label:"API Token",value:P,fieldKey:"token"}),e.jsx(Ce,{label:"Curl Command",value:Oe,fieldKey:"curl"}),e.jsx(Ce,{label:"Prompt for Claude",value:Ve,fieldKey:"claude"}),e.jsx(Ce,{label:"Prompt for ChatGPT",value:ot,fieldKey:"gpt"})]})]})})()]}):e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",padding:"20px",textAlign:"center"},children:[e.jsx(Es,{size:24,style:{color:N.tm,marginBottom:"8px"}}),e.jsx("p",{style:{fontSize:"12px",color:N.tm,marginBottom:"14px"},children:"Deploy this agent as an MCP server with its own landing page & API"}),e.jsxs("button",{onClick:Kr,disabled:Ee,style:{backgroundColor:N.violet,color:"#fff",border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:"600",borderRadius:"6px",cursor:Ee?"wait":"pointer",display:"inline-flex",alignItems:"center",gap:"6px",opacity:Ee?.6:1},children:[e.jsx(Yd,{size:13}),Ee?"Deploying...":"Deploy as MCP"]})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ax,{size:14,style:{color:N.violet}}),"Test Agent"]}),e.jsxs("button",{onClick:()=>ii(!pr),style:{background:pr?N.violetG:N.surfaceEl,border:`1px solid ${pr?N.violet:N.border}`,color:pr?N.violet:N.ts,padding:"4px 10px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ax,{size:10})," ",pr?"Close":"Open Chat"]})]}),pr&&e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.border}`,borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",height:"420px"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(139,92,246,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(xn,{size:13,style:{color:N.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:s.name.replace(/-/g," ").replace(/\b\w/g,P=>P.toUpperCase())}),fr&&e.jsxs("span",{style:{fontSize:"9px",color:N.tm,fontFamily:N.mono,padding:"1px 6px",borderRadius:"100px",background:"rgba(255,255,255,0.05)"},children:[Ro(fr.systemPromptTokens)," tokens context"]})]}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:kt.length>0&&e.jsxs("button",{onClick:()=>{Lt([]),Tr(null)},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",fontSize:"9px",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(lx,{size:9})," Clear"]})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:kt.length===0?e.jsxs("div",{style:{padding:"30px 12px",textAlign:"center"},children:[e.jsx(xn,{size:28,style:{color:N.tm,marginBottom:"10px",opacity:.2}}),e.jsx("div",{style:{fontSize:"12px",color:N.ts,marginBottom:"6px"},children:"Chat with this agent to test it"}),e.jsxs("div",{style:{fontSize:"10px",color:N.tm,lineHeight:"1.5"},children:["Full system prompt + all skills are injected.",y.length>0&&e.jsxs("span",{children:[" ",y.length," skill",y.length>1?"s":""," loaded."]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",justifyContent:"center",marginTop:"14px"},children:["What can you do?","List your skills","Help me get started"].map(P=>e.jsx("button",{onClick:()=>{It(P)},style:{padding:"4px 10px",fontSize:"10px",borderRadius:"100px",background:N.surfaceEl,border:`1px solid ${N.border}`,color:N.ts,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:re=>{re.currentTarget.style.borderColor=N.violet,re.currentTarget.style.color=N.violet},onMouseLeave:re=>{re.currentTarget.style.borderColor=N.border,re.currentTarget.style.color=N.ts},children:P},P))})]}):e.jsxs(e.Fragment,{children:[kt.map((P,re)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexDirection:P.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:P.role==="user"?"rgba(255,255,255,0.08)":N.violetG},children:P.role==="user"?e.jsx(jn,{size:11,style:{color:N.ts}}):e.jsx(xn,{size:11,style:{color:N.violet}})}),e.jsx("div",{style:{maxWidth:"85%",padding:"8px 12px",borderRadius:P.role==="user"?"10px 10px 2px 10px":"10px 10px 10px 2px",background:P.role==="user"?"rgba(139,92,246,0.12)":N.surfaceEl,border:`1px solid ${P.role==="user"?"rgba(139,92,246,0.2)":N.border}`,fontSize:"12px",lineHeight:"1.6",color:N.tp,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:P.content})]},re)),gt&&e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:N.violetG},children:e.jsx(xn,{size:11,style:{color:N.violet}})}),e.jsx("div",{style:{padding:"8px 12px",borderRadius:"10px 10px 10px 2px",background:N.surfaceEl,border:`1px solid ${N.border}`,fontSize:"11px",color:N.tm,fontStyle:"italic"},children:"Thinking..."})]}),e.jsx("div",{ref:gr})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${N.border}`,display:"flex",gap:"6px"},children:[e.jsx("input",{value:bt,onChange:P=>It(P.target.value),onKeyDown:P=>P.key==="Enter"&&!P.shiftKey&&ae(),placeholder:"Test a message...",disabled:gt,style:{flex:1,backgroundColor:N.bg,border:`1px solid ${N.border}`,borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"12px",outline:"none",fontFamily:"inherit"}}),e.jsx("button",{onClick:ae,disabled:gt||!bt.trim(),style:{backgroundColor:bt.trim()?N.violet:N.surfaceEl,border:"none",borderRadius:"6px",padding:"8px 12px",color:bt.trim()?"#fff":N.tm,cursor:bt.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:"600",transition:"all 0.15s"},children:e.jsx(Ch,{size:12})})]})]})]}),h&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>p(!1),children:e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.borderS}`,borderRadius:"8px",width:"400px",maxHeight:"500px",overflow:"hidden"},onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${N.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",margin:0},children:"Add Skills"}),e.jsx("button",{onClick:()=>p(!1),style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:16})})]}),e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"8px"},children:[j.filter(P=>!y.find(re=>re.id===P.id)).map(P=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.15s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor=N.surfaceEl,onMouseLeave:re=>re.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:P.color||N.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:P.name}),e.jsx("span",{style:{fontSize:"9px",color:N.tm},children:P.category})]}),e.jsx("button",{onClick:async()=>{try{await le(`/api/skills/${P.id}/assign/${t}`,{method:"POST"}),_(re=>[...re,P]),C(re=>re.filter(Se=>Se.id!==P.id))}catch(re){console.error(re)}},style:{backgroundColor:N.violetM,color:N.violet,border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Add"})]},P.id)),j.filter(P=>!y.find(re=>re.id===P.id)).length===0&&e.jsx("div",{style:{padding:"30px",textAlign:"center",color:N.tm,fontSize:"12px"},children:"No more skills available"})]})]})})]})]}),I&&(()=>{const P=ye?W.filter(ie=>ie.agent===t):W,re=(ie,Oe)=>{const Ve=Oe.title||`${ie.name} v${Oe.version}`;Ie({project_id:ie.id,iteration_id:Oe.id,title:Ve,description:""}),Y({project:ie,iteration:Oe,title:Ve})},Se=async()=>{!oe.project_id||!oe.iteration_id||await xr()};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:N.surface,border:`1px solid ${N.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:N.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{D(!1),Y(null)},style:{background:"none",border:"none",color:N.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:N.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>we(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ye?N.violet:"transparent",color:ye?"#fff":N.ts},children:["This Agent (",u.length,")"]}),e.jsxs("button",{onClick:()=>we(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ye?"transparent":N.violet,color:ye?N.ts:"#fff"},children:["All Projects (",W.length,")"]})]}),P.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:N.tm,fontSize:"14px"},children:["No projects found",ye?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:P.map(ie=>{const Oe=F[ie.id]||[];return Oe.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Wi,{size:14,style:{color:N.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:N.tp},children:ie.name}),e.jsxs("span",{style:{fontSize:"11px",color:N.tm},children:[Oe.length," version",Oe.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:Oe.map(Ve=>{const ot=(Re==null?void 0:Re.iteration.id)===Ve.id;return e.jsxs("div",{onClick:()=>re(ie,Ve),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:ot?`2px solid ${N.violet}`:`1px solid ${N.border}`,background:N.surfaceEl,transition:"all 0.2s",boxShadow:ot?`0 0 20px ${N.violet}40`:"none"},onMouseEnter:Ce=>{ot||(Ce.currentTarget.style.borderColor=N.violet)},onMouseLeave:Ce=>{ot||(Ce.currentTarget.style.borderColor=N.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${ie.id}/${Ve.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${Ve.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),ot&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:N.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:N.tp,marginBottom:"2px"},children:Ve.title||`Version ${Ve.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:N.tm},children:["v",Ve.version]})]})]},Ve.id)})})]},ie.id)})}),Re&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:N.surfaceEl,border:`1px solid ${N.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:N.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:oe.title,onChange:ie=>Ie({...oe,title:ie.target.value}),style:{width:"100%",background:N.surface,border:`1px solid ${N.border}`,borderRadius:"6px",padding:"10px",color:N.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>Y(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:N.ts,border:`1px solid ${N.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:Se,disabled:!oe.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:N.violet,color:"#fff",border:"none",opacity:oe.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),G&&e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.95)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"60px",borderBottom:`1px solid ${N.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:G.title}),e.jsxs("span",{style:{fontSize:"12px",color:N.tm,whiteSpace:"nowrap"},children:[G.project_name," v",G.iteration_version]})]}),e.jsx("button",{onClick:()=>M(null),style:{background:N.surfaceEl,border:"none",color:N.tp,width:"32px",height:"32px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(St,{size:18})})]}),e.jsx("div",{style:{flex:1},children:e.jsx("iframe",{src:`/api/preview/${G.project_id}/${G.iteration_id}`,style:{width:"100%",height:"100%",border:"none"}})})]}),Z&&e.jsx(ip,{onClose:()=>{je(!1),le(`/api/agents/${t}`).then(o).catch(console.error)},initialAgent:{name:s.name,prompt:s.full_prompt||""}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .agent-detail-breadcrumb { padding: 12px 16px !important; }
          .agent-detail-header { padding: 20px 16px !important; }
          .agent-detail-content { padding: 0 16px 16px !important; flex-direction: column; }
          .agent-detail-left, .agent-detail-right { width: 100% !important; min-width: 0 !important; }
          .agent-detail-actions button { padding: 6px 10px !important; font-size: 11px !important; }
        }
      `})]})}const ke={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},b6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],_6=["sonnet","opus","haiku"],S6=["","default","plan","bypassPermissions"],hn={display:"block",fontSize:"11px",fontWeight:600,color:ke.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},Wn={width:"100%",backgroundColor:ke.bg,border:`1px solid ${ke.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function Lm(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"}function w6(){const{name:t}=Jn(),i=Ut(),s=L.useRef(null),[o,u]=L.useState(!0),[S,b]=L.useState(!1),[l,c]=L.useState(!1),[m,v]=L.useState([]),[d,y]=L.useState(!1),[_,j]=L.useState(null),[C,h]=L.useState([]),[p,f]=L.useState([]),[g,w]=L.useState(!1),[R,A]=L.useState(""),[z,E]=L.useState({description:"",model:"sonnet",category:"uncategorized",full_prompt:"",tools:[],max_turns:0,memory:"",permission_mode:"",created_at:null,updated_at:null,project_count:0});L.useEffect(()=>{Promise.all([le(`/api/agents/${t}`),le("/api/categories"),le(`/api/skills/agent/${t}`)]).then(([I,D,W])=>{const fe=I.tools?I.tools.split(",").map(ye=>ye.trim()).filter(Boolean):[];E({description:I.description||"",model:I.model||"sonnet",category:I.category||"uncategorized",full_prompt:I.full_prompt||"",tools:fe,max_turns:I.max_turns||0,memory:I.memory||"",permission_mode:I.permission_mode||"",created_at:I.created_at,updated_at:I.updated_at,project_count:I.project_count||0}),v(D||[]),h(W||[])}).catch(I=>{B("Error loading agent","danger")}).finally(()=>u(!1))},[t]);const B=(I,D="success")=>{j({message:I,type:D}),setTimeout(()=>j(null),3e3)},O=I=>{E(D=>({...D,tools:D.tools.includes(I)?D.tools.filter(W=>W!==I):[...D.tools,I]}))},H=L.useMemo(()=>{const I=(z.full_prompt||"").split(`
`).length;return Array.from({length:Math.max(I,1)},(D,W)=>W+1)},[z.full_prompt]),K=L.useMemo(()=>{const I=[];return z.description&&I.push(`description: "${z.description.replace(/"/g,'\\"')}"`),z.model&&I.push(`model: ${z.model}`),z.tools.length>0&&I.push(`tools: [${z.tools.join(", ")}]`),z.max_turns>0&&I.push(`max_turns: ${z.max_turns}`),z.memory&&I.push(`memory: "${z.memory.replace(/"/g,'\\"')}"`),z.permission_mode&&I.push(`permission_mode: ${z.permission_mode}`),(I.length>0?`---
${I.join(`
`)}
---

`:"")+(z.full_prompt||"")},[z]),U=async()=>{b(!0);try{await le(`/api/agents/${t}`,{method:"PUT",body:JSON.stringify({description:z.description,model:z.model,category:z.category,full_prompt:z.full_prompt,tools:z.tools.join(", "),max_turns:z.max_turns,memory:z.memory,permission_mode:z.permission_mode})}),B("Agent saved successfully"),setTimeout(()=>i(`/agents/${t}`),800)}catch(I){B(I.message||"Failed to save","danger")}finally{b(!1)}},ee=async()=>{const I=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(I)try{await le(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:I})}),B("Agent duplicated"),i(`/agents/${I}/edit`)}catch(D){B(D.message||"Duplicate failed","danger")}},V=async()=>{c(!0);try{const I=await le("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:z.description||"Improve this agent prompt",style:z.category,tools_needed:z.tools.join(", "),category:z.category,existing_prompt:z.full_prompt})});I.prompt&&(E(D=>({...D,full_prompt:I.prompt})),B("Prompt enhanced by AI"))}catch(I){B(I.message||"AI enhancement failed","danger")}finally{c(!1)}},ue=async()=>{try{await le(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch{B("Delete failed","danger"),y(!1)}},Q=async()=>{try{const I=await le("/api/skills");f(I||[]),A(""),w(!0)}catch{B("Failed to load skills","danger")}},G=async I=>{try{await le(`/api/skills/${I.id}/assign/${t}`,{method:"POST"}),h(D=>[...D,I]),B(`Skill "${I.name}" assigned`)}catch(D){B(D.message||"Assign failed","danger")}},M=async I=>{try{await le(`/api/skills/${I.id}/unassign/${t}`,{method:"DELETE"}),h(D=>D.filter(W=>W.id!==I.id)),B(`Skill "${I.name}" removed`)}catch(D){B(D.message||"Unassign failed","danger")}};return o?e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:ke.bg,color:ke.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:ke.tm,fontSize:"13px"},children:"Loading agent..."})}):e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:ke.bg,color:ke.tp,paddingBottom:"80px"},children:[e.jsxs("div",{style:{padding:"16px 24px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${ke.border}`},children:[e.jsx(mi,{to:`/agents/${t}`,style:{color:ke.tm,display:"flex",textDecoration:"none"},children:e.jsx(Go,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:ke.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:ke.tm},children:"/"}),e.jsx(mi,{to:`/agents/${t}`,style:{fontSize:"12px",color:ke.ts,textDecoration:"none"},children:t}),e.jsx("span",{style:{fontSize:"12px",color:ke.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:ke.tp,fontWeight:600},children:"Edit"})]}),e.jsxs("div",{style:{display:"flex",padding:"24px",gap:"24px"},children:[e.jsxs("div",{style:{flex:"1 1 60%",display:"flex",flexDirection:"column",gap:"20px",minWidth:0},children:[e.jsxs("div",{children:[e.jsx("label",{style:hn,children:"Description"}),e.jsx("textarea",{style:{...Wn,resize:"vertical",minHeight:"70px"},value:z.description,placeholder:"What does this agent do?",onChange:I=>E(D=>({...D,description:I.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:hn,children:"Model"}),e.jsx("select",{style:Wn,value:z.model,onChange:I=>E(D=>({...D,model:I.target.value})),children:_6.map(I=>e.jsx("option",{value:I,children:I},I))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:hn,children:"Category"}),e.jsxs("select",{style:Wn,value:z.category,onChange:I=>E(D=>({...D,category:I.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),m.map(I=>e.jsx("option",{value:I.name,children:I.name},I.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:hn,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:b6.map(I=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:z.tools.includes(I)?ke.violetM:ke.bg,border:`1px solid ${z.tools.includes(I)?ke.violet:ke.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:z.tools.includes(I)?ke.violet:ke.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:z.tools.includes(I),onChange:()=>O(I),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${z.tools.includes(I)?ke.violet:ke.tm}`,backgroundColor:z.tools.includes(I)?ke.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:z.tools.includes(I)&&e.jsx(sr,{size:10,color:"#fff"})}),I]},I))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:hn,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:Wn,value:z.max_turns,onChange:I=>E(D=>({...D,max_turns:parseInt(I.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:hn,children:"Permission Mode"}),e.jsx("select",{style:Wn,value:z.permission_mode,onChange:I=>E(D=>({...D,permission_mode:I.target.value})),children:S6.map(I=>e.jsx("option",{value:I,children:I||"(none)"},I))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:hn,children:"Memory"}),e.jsx("input",{style:Wn,value:z.memory,placeholder:"Optional...",onChange:I=>E(D=>({...D,memory:I.target.value}))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"6px"},children:[e.jsx("label",{style:{...hn,marginBottom:0},children:"System Prompt"}),e.jsxs("span",{style:{fontSize:"11px",color:ke.tm,fontFamily:ke.mono},children:[z.full_prompt.length," chars / ",H.length," lines"]})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:ke.bg,border:`1px solid ${ke.borderS}`,borderRadius:"8px",minHeight:"500px",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px 8px 16px 12px",borderRight:`1px solid ${ke.border}`,userSelect:"none",flexShrink:0,backgroundColor:ke.surface},children:H.map(I=>e.jsx("div",{style:{fontSize:"11px",fontFamily:ke.mono,color:"rgba(255,255,255,0.15)",lineHeight:"20px",textAlign:"right"},children:I},I))}),e.jsx("textarea",{ref:s,value:z.full_prompt,onChange:I=>E(D=>({...D,full_prompt:I.target.value})),spellCheck:"false",style:{flex:1,background:"transparent",border:"none",outline:"none",color:ke.tp,fontSize:"13px",lineHeight:"20px",padding:"16px",resize:"none",fontFamily:ke.mono,width:"100%"},placeholder:"Write the agent instructions here..."})]})]})]}),e.jsxs("div",{style:{flex:"0 0 380px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:ke.bg,border:`1px solid ${ke.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Il,{size:14,color:ke.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:ke.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Live Preview"})]}),e.jsxs("div",{style:{backgroundColor:ke.surface,borderRadius:"8px",border:`1px solid ${ke.borderS}`,padding:"16px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:`radial-gradient(circle at top right, ${ke.violetG}, transparent)`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:600,textTransform:"uppercase",backgroundColor:ke.violetM,color:ke.violet},children:z.category}),e.jsx("span",{style:{fontSize:"10px",color:ke.tm,fontFamily:ke.mono,fontWeight:600},children:z.model})]}),e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,margin:"0 0 6px 0"},children:t.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),e.jsx("p",{style:{fontSize:"12px",color:ke.ts,lineHeight:"1.5",margin:"0 0 10px 0"},children:z.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[z.tools.slice(0,5).map(I=>e.jsx("span",{style:{fontSize:"10px",backgroundColor:ke.surfaceEl,padding:"2px 6px",borderRadius:"4px",border:`1px solid ${ke.border}`,color:ke.tm},children:I},I)),z.tools.length>5&&e.jsxs("span",{style:{fontSize:"10px",color:ke.tm},children:["+",z.tools.length-5]})]})]})]}),e.jsxs("div",{style:{backgroundColor:ke.bg,border:`1px solid ${ke.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(KS,{size:14,color:ke.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:ke.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Stats"})]}),[{icon:e.jsx(Yo,{size:12,color:ke.tm}),label:"Created",value:Lm(z.created_at)},{icon:e.jsx(Xn,{size:12,color:ke.tm}),label:"Updated",value:Lm(z.updated_at)},{icon:e.jsx(Il,{size:12,color:ke.tm}),label:"Projects",value:`${z.project_count}`}].map((I,D)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:D<2?`1px solid ${ke.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[I.icon,e.jsx("span",{style:{fontSize:"12px",color:ke.ts},children:I.label})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:ke.mono,color:ke.tp},children:I.value})]},D))]}),e.jsxs("div",{style:{backgroundColor:ke.bg,border:`1px solid ${ke.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Vr,{size:14,color:ke.violet}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:ke.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Skills (",C.length,")"]})]}),e.jsxs("button",{onClick:Q,style:{background:"none",border:"none",color:ke.violet,cursor:"pointer",fontSize:"11px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(er,{size:12})," Add"]})]}),C.length===0?e.jsx("div",{style:{padding:"16px",textAlign:"center",color:ke.tm,fontSize:"11px",border:`1px dashed ${ke.border}`,borderRadius:"6px"},children:"No skills assigned. Skills inject context into workspace CLAUDE.md when running projects."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:C.map(I=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:ke.surface,borderRadius:"6px",border:`1px solid ${ke.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:I.color||ke.violet,flexShrink:0}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.name}),I.total_files>0&&e.jsxs("span",{style:{fontSize:"9px",color:ke.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 5px",borderRadius:"100px"},children:[I.total_files," files"]})]}),e.jsx("button",{onClick:()=>M(I),style:{background:"none",border:"none",color:ke.tm,cursor:"pointer",padding:"2px",display:"flex"},title:"Remove skill",children:e.jsx(St,{size:12})})]},I.id))})]}),e.jsxs("div",{style:{backgroundColor:ke.bg,border:`1px solid ${ke.border}`,borderRadius:"12px",padding:"20px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx($s,{size:14,color:ke.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:ke.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:"#0a0a0a",border:`1px solid ${ke.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:ke.ts,fontFamily:ke.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:K||"# Empty agent file"})]})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:100,backgroundColor:ke.bg,borderTop:`1px solid ${ke.borderS}`,padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>y(!0),style:{backgroundColor:"transparent",color:ke.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Or,{size:14}),"Delete"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:V,disabled:l,style:{backgroundColor:ke.violetM,color:ke.violet,border:`1px solid ${ke.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:l?.6:1},children:[e.jsx(Ht,{size:14}),l?"Enhancing...":"AI Enhance"]}),e.jsxs("button",{onClick:ee,style:{backgroundColor:ke.surfaceEl,color:ke.ts,border:`1px solid ${ke.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(wl,{size:14}),"Duplicate"]}),e.jsxs("button",{onClick:U,disabled:S,style:{backgroundColor:ke.tp,color:ke.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:S?.6:1},children:[e.jsx(Gl,{size:14}),S?"Saving...":"Save Changes"]})]})]}),_&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:_.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${_.type==="danger"?ke.danger:ke.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[_.type==="danger"?e.jsx(Ei,{size:14,color:ke.danger}):e.jsx(sr,{size:14,color:ke.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:ke.tp},children:_.message})]}),g&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:()=>w(!1),children:e.jsxs("div",{style:{width:"420px",backgroundColor:ke.surface,border:`1px solid ${ke.borderS}`,borderRadius:"12px",overflow:"hidden"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 20px",borderBottom:`1px solid ${ke.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:["Add Skills to ",t]}),e.jsx("button",{onClick:()=>w(!1),style:{background:"none",border:"none",color:ke.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:16})})]}),e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ke.border}`},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Is,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:ke.tm}}),e.jsx("input",{style:{...Wn,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search skills...",value:R,onChange:I=>A(I.target.value),autoFocus:!0})]})}),e.jsxs("div",{style:{maxHeight:"320px",overflowY:"auto"},children:[p.filter(I=>!C.find(D=>D.id===I.id)).filter(I=>!R||I.name.toLowerCase().includes(R.toLowerCase())||(I.category||"").toLowerCase().includes(R.toLowerCase())).map(I=>e.jsxs("div",{onClick:()=>G(I),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",borderBottom:`1px solid ${ke.border}`,cursor:"pointer",transition:"background 0.1s"},onMouseEnter:D=>D.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)",onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:I.color||ke.violet,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500},children:I.name}),I.description&&e.jsx("div",{style:{fontSize:"10px",color:ke.tm,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.description})]}),I.category&&e.jsx("span",{style:{fontSize:"9px",color:I.color||ke.violet,backgroundColor:`${I.color||ke.violet}15`,padding:"2px 6px",borderRadius:"100px",flexShrink:0},children:I.category})]},I.id)),p.filter(I=>!C.find(D=>D.id===I.id)).length===0&&e.jsx("div",{style:{padding:"24px",textAlign:"center",color:ke.tm,fontSize:"12px"},children:"No more skills available"})]})]})}),d&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"400px",backgroundColor:ke.surface,border:`1px solid ${ke.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{fontSize:"13px",color:ke.ts,lineHeight:"1.5",margin:"0 0 20px 0"},children:["This will permanently delete ",e.jsx("strong",{style:{color:ke.tp},children:t})," and cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>y(!1),style:{backgroundColor:ke.surfaceEl,color:ke.ts,border:`1px solid ${ke.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:ue,style:{backgroundColor:ke.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})})]})}const Ft={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",tm:"#52525B",mono:'"JetBrains Mono","Fira Code",monospace'},zm={completed:{color:"#22c55e",bg:"rgba(34,197,94,0.1)"},failed:{color:"#ef4444",bg:"rgba(239,68,68,0.1)"},running:{color:"#8B5CF6",bg:"rgba(139,92,246,0.2)"},pending:{color:"#A1A1AA",bg:"rgba(255,255,255,0.05)"}},Im={info:"#A1A1AA",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"};function C6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--"}function k6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--"}function j6({teamId:t,members:i}){const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState({}),[c,m]=L.useState(!1),[v,d]=L.useState(!0),y=L.useRef(null),_=async()=>{try{const h=await le(`/api/agent-teams/${t}/runs`);o(h.runs||[])}catch(h){console.error("Failed to fetch runs",h)}finally{d(!1)}},j=async h=>{try{const p=await le(`/api/agent-teams/${t}/runs/${h}`);l(f=>({...f,[h]:p.logs||[]}))}catch(p){console.error("Failed to fetch logs",p)}},C=async()=>{m(!0);try{const h=await le(`/api/agent-teams/${t}/runs`,{method:"POST",body:JSON.stringify({config:{initiated_by:"user_ui"}})});await le(`/api/agent-teams/${t}/runs/${h.id}/start`,{method:"POST"}),await _(),S(h.id)}catch(h){console.error("Failed to start run",h)}finally{m(!1)}};return L.useEffect(()=>{_();const h=setInterval(_,5e3);return()=>clearInterval(h)},[t]),L.useEffect(()=>{let h;return u&&(j(u),h=setInterval(()=>j(u),2e3)),()=>{h&&clearInterval(h)}},[u]),L.useEffect(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})},[b,u]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",borderBottom:`1px solid ${Ft.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(A0,{size:16,color:Ft.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Ft.tp},children:"Team Runs"}),e.jsx("span",{style:{fontSize:"11px",color:Ft.tm,backgroundColor:Ft.surfaceEl,padding:"2px 6px",borderRadius:"4px"},children:s.length})]}),e.jsxs("button",{onClick:C,disabled:c,style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:Ft.violet,color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:c?"not-allowed":"pointer",opacity:c?.7:1},children:[c?e.jsx(Kn,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx(ql,{size:14,fill:"currentColor"}),"New Run"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.length===0&&!v?e.jsx("div",{style:{padding:"32px",textAlign:"center",border:`1px dashed ${Ft.border}`,borderRadius:"8px",color:Ft.tm,fontSize:"12px"},children:'No runs yet. Click "New Run" to start.'}):s.map(h=>{const p=u===h.id,f=zm[h.status]||zm.pending;return e.jsxs("div",{style:{backgroundColor:Ft.surface,border:`1px solid ${p?Ft.violetM:Ft.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>S(p?null:h.id),style:{padding:"10px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[p?e.jsx(Sn,{size:14,color:Ft.tm}):e.jsx(cr,{size:14,color:Ft.tm}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{fontSize:"12px",fontWeight:500,color:Ft.tp,fontFamily:Ft.mono},children:["run_",h.id.split("-")[0]]}),e.jsx("span",{style:{fontSize:"10px",color:Ft.tm},children:k6(h.created_at)})]})]}),e.jsxs("div",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:f.bg,color:f.color,display:"flex",alignItems:"center",gap:"4px"},children:[h.status==="running"&&e.jsx(Kn,{size:10,style:{animation:"spin 1s linear infinite"}}),h.status==="completed"&&e.jsx(lS,{size:10}),h.status==="failed"&&e.jsx(dS,{size:10}),h.status==="pending"&&e.jsx(Yo,{size:10}),h.status]})]}),p&&e.jsx("div",{style:{backgroundColor:Ft.bg,borderTop:`1px solid ${Ft.border}`,maxHeight:"400px",overflowY:"auto",padding:"12px",fontFamily:Ft.mono,fontSize:"11px",lineHeight:"1.6"},children:!b[h.id]||b[h.id].length===0?e.jsx("div",{style:{color:Ft.tm,fontStyle:"italic",padding:"8px"},children:"Waiting for logs..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[b[h.id].map((g,w)=>e.jsxs("div",{style:{display:"flex",gap:"12px",whiteSpace:"pre-wrap"},children:[e.jsxs("span",{style:{color:Ft.tm,flexShrink:0,width:"70px"},children:["[",C6(g.created_at),"]"]}),e.jsx("span",{style:{color:Ft.violet,fontWeight:600,flexShrink:0,minWidth:"80px"},children:g.agent_name||"system"}),e.jsx("span",{style:{color:Im[g.log_type]||Im.info},children:g.message})]},g.id||w)),e.jsx("div",{ref:y})]})})]},h.id)})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})}const Ke={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},gu={width:"100%",backgroundColor:Ke.bg,border:`1px solid ${Ke.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"},Dm={leader:{bg:"rgba(245,158,11,0.1)",color:Ke.warning,icon:Yl},member:{bg:"rgba(255,255,255,0.04)",color:Ke.tm,icon:jn}};function E6(){var ue;Ut();const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(!1),[b,l]=L.useState(null),[c,m]=L.useState(null),[v,d]=L.useState([]),[y,_]=L.useState(""),[j,C]=L.useState(null),[h,p]=L.useState({name:"",description:""}),[f,g]=L.useState(!1),[w,R]=L.useState(null),A=(Q,G="success")=>{C({message:Q,type:G}),setTimeout(()=>C(null),3e3)},z=L.useCallback(async()=>{try{const Q=await le("/api/agent-teams");i(Q)}catch{A("Failed to load teams","danger")}finally{o(!1)}},[]);L.useEffect(()=>{z(),le("/api/agents").then(d).catch(()=>{})},[z]);const E=async()=>{if(h.name.trim()){g(!0);try{await le("/api/agent-teams",{method:"POST",body:JSON.stringify(h)}),S(!1),p({name:"",description:""}),A("Team created"),z()}catch(Q){A(Q.message||"Failed to create team","danger")}finally{g(!1)}}},B=async Q=>{try{await le(`/api/agent-teams/${Q}`,{method:"DELETE"}),A("Team deleted"),R(null),b===Q&&(l(null),m(null)),z()}catch{A("Failed to delete team","danger")}},O=async Q=>{if(b===Q){l(null),m(null);return}l(Q);try{const G=await le(`/api/agent-teams/${Q}`);m(G)}catch{A("Failed to load team details","danger")}},H=async Q=>{if(b)try{await le(`/api/agent-teams/${b}/members`,{method:"POST",body:JSON.stringify({agent_name:Q,role:"member"})}),_("");const G=await le(`/api/agent-teams/${b}`);m(G),z()}catch(G){A(G.message||"Failed to add member","danger")}},K=async Q=>{if(b)try{await le(`/api/agent-teams/${b}/members/${Q}`,{method:"DELETE"});const G=await le(`/api/agent-teams/${b}`);m(G),z()}catch{A("Failed to remove member","danger")}},U=async(Q,G)=>{if(!b)return;const M=G==="leader"?"member":"leader";try{await le(`/api/agent-teams/${b}/members/${Q}`,{method:"PUT",body:JSON.stringify({role:M})});const I=await le(`/api/agent-teams/${b}`);m(I)}catch{A("Failed to update role","danger")}},ee=((ue=c==null?void 0:c.members)==null?void 0:ue.map(Q=>Q.agent_name))||[],V=v.filter(Q=>!ee.includes(Q.name)&&(Q.name.includes(y.toLowerCase())||(Q.description||"").toLowerCase().includes(y.toLowerCase())));return e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:Ke.bg,color:Ke.tp},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${Ke.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Rs,{size:20,color:Ke.violet}),"Agent Teams"]}),e.jsx("p",{style:{fontSize:"13px",color:Ke.ts,margin:0},children:"Compose teams of agents for complex tasks"})]}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ke.tp,color:Ke.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:14}),"Create Team"]})]}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px"},children:s?e.jsx("div",{style:{textAlign:"center",padding:"60px",color:Ke.tm},children:"Loading teams..."}):t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",border:`1px dashed ${Ke.borderS}`,borderRadius:"12px",color:Ke.tm},children:[e.jsx(Rs,{size:40,color:Ke.tm,style:{marginBottom:"12px"}}),e.jsx("p",{style:{fontSize:"14px",margin:"0 0 4px 0"},children:"No teams yet"}),e.jsx("p",{style:{fontSize:"12px",margin:"0 0 16px 0"},children:"Create your first agent team to compose powerful workflows"}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ke.violetM,color:Ke.violet,border:`1px solid ${Ke.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:[e.jsx(er,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),"Create Team"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(Q=>{var G;return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:Ke.surface,border:`1px solid ${b===Q.id?Ke.violet:Ke.border}`,borderRadius:b===Q.id?"12px 12px 0 0":"12px",padding:"16px 20px",cursor:"pointer",transition:"border-color 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>O(Q.id),onMouseEnter:M=>{b!==Q.id&&(M.currentTarget.style.borderColor=Ke.borderS)},onMouseLeave:M=>{b!==Q.id&&(M.currentTarget.style.borderColor=Ke.border)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b===Q.id?e.jsx(Sn,{size:16,color:Ke.violet}):e.jsx(cr,{size:16,color:Ke.tm}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:Q.name}),e.jsxs("span",{style:{fontSize:"10px",fontWeight:600,backgroundColor:Ke.violetM,color:Ke.violet,padding:"2px 8px",borderRadius:"100px"},children:[Q.member_count||0," agents"]})]}),Q.description&&e.jsx("p",{style:{fontSize:"12px",color:Ke.ts,margin:"4px 0 0 0"},children:Q.description})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},onClick:M=>M.stopPropagation(),children:[e.jsx("div",{style:{display:"flex",marginRight:"8px"},children:(Q.member_names||"").split(",").filter(Boolean).slice(0,4).map((M,I)=>e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:`hsl(${M.charCodeAt(0)*7%360}, 50%, 35%)`,border:`2px solid ${Ke.surface}`,marginLeft:I>0?"-6px":"0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:700,color:"#fff"},children:M.charAt(0).toUpperCase()},I))}),w===Q.id?e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>B(Q.id),style:{backgroundColor:Ke.danger,color:"#fff",border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"}),e.jsx("button",{onClick:()=>R(null),style:{backgroundColor:Ke.surfaceEl,color:Ke.ts,border:`1px solid ${Ke.borderS}`,padding:"4px 10px",fontSize:"11px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]}):e.jsx("button",{onClick:()=>R(Q.id),style:{backgroundColor:"transparent",color:Ke.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(Or,{size:14})})]})]}),b===Q.id&&c&&e.jsxs("div",{style:{backgroundColor:Ke.bg,border:`1px solid ${Ke.violet}`,borderTop:"none",borderRadius:"0 0 12px 12px",padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"11px",fontWeight:600,color:Ke.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 10px 0"},children:["Members (",((G=c.members)==null?void 0:G.length)||0,")"]}),c.members&&c.members.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:c.members.map(M=>{const I=Dm[M.role]||Dm.member,D=I.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",backgroundColor:Ke.surface,borderRadius:"8px",border:`1px solid ${Ke.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx($S,{size:14,color:Ke.tm,style:{cursor:"grab"}}),e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:`hsl(${M.agent_name.charCodeAt(0)*7%360}, 50%, 35%)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:700,color:"#fff"},children:M.agent_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:M.agent_name.replace(/-/g," ").replace(/\b\w/g,W=>W.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"2px"},children:[M.category&&e.jsx("span",{style:{fontSize:"10px",color:Ke.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"4px"},children:M.category}),M.model&&e.jsx("span",{style:{fontSize:"10px",color:Ke.tm,fontFamily:Ke.mono},children:M.model})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("button",{onClick:()=>U(M.agent_name,M.role),style:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:I.bg,color:I.color,border:"none",padding:"4px 10px",fontSize:"10px",fontWeight:600,borderRadius:"100px",cursor:"pointer",textTransform:"uppercase"},children:[e.jsx(D,{size:10}),M.role]}),e.jsx("button",{onClick:()=>K(M.agent_name),style:{backgroundColor:"transparent",color:Ke.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(St,{size:14})})]})]},M.agent_name)})}):e.jsx("p",{style:{fontSize:"12px",color:Ke.tm,padding:"12px",textAlign:"center",border:`1px dashed ${Ke.border}`,borderRadius:"8px"},children:"No members yet. Add agents below."})]}),e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(j6,{teamId:Q.id,members:c.members||[]})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"11px",fontWeight:600,color:Ke.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px 0"},children:"Add Agent"}),e.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[e.jsx(Is,{size:14,color:Ke.tm,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{value:y,onChange:M=>_(M.target.value),placeholder:"Search agents...",style:{...gu,paddingLeft:"34px"}})]}),y&&e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",backgroundColor:Ke.surface,border:`1px solid ${Ke.border}`,borderRadius:"8px"},children:V.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:Ke.tm,fontSize:"12px"},children:"No matching agents"}):V.slice(0,10).map(M=>e.jsxs("div",{onClick:()=>H(M.name),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${Ke.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background 0.15s"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=Ke.surfaceEl,onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ke.tp},children:M.name.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),e.jsx("p",{style:{fontSize:"11px",color:Ke.tm,margin:"2px 0 0 0"},children:(M.description||"").substring(0,80)})]}),e.jsx(er,{size:14,color:Ke.violet})]},M.name))})]})]})]},Q.id)})})}),u&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"440px",backgroundColor:Ke.surface,border:`1px solid ${Ke.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:0},children:"Create Team"}),e.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",color:Ke.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ke.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Team Name"}),e.jsx("input",{style:gu,value:h.name,placeholder:"e.g. Landing Page Team",onChange:Q=>p(G=>({...G,name:Q.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ke.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Description"}),e.jsx("textarea",{style:{...gu,minHeight:"80px",resize:"vertical"},value:h.description,placeholder:"What is this team for?",onChange:Q=>p(G=>({...G,description:Q.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"6px"},children:[e.jsx("button",{onClick:()=>S(!1),style:{backgroundColor:Ke.surfaceEl,color:Ke.ts,border:`1px solid ${Ke.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f||!h.name.trim(),style:{backgroundColor:Ke.tp,color:Ke.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",opacity:f||!h.name.trim()?.5:1},children:f?"Creating...":"Create Team"})]})]})]})}),j&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:j.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${j.type==="danger"?Ke.danger:Ke.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[j.type==="danger"?e.jsx(Ei,{size:14,color:Ke.danger}):e.jsx(sr,{size:14,color:Ke.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ke.tp},children:j.message})]})]})}const Xe={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'};function gl({icon:t,label:i,value:s,subtext:o,color:u=Xe.violet}){return e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"8px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10px",right:"-10px",opacity:.05},children:e.jsx(t,{size:80,color:u})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:`${u}15`,color:u,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(t,{size:14})}),e.jsx("span",{style:{color:Xe.ts,fontSize:"12px",fontWeight:500},children:i})]}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"6px"},children:[e.jsx("span",{style:{color:Xe.tp,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:s}),o&&e.jsx("span",{style:{color:Xe.tm,fontSize:"11px"},children:o})]})]})}function xl({children:t,icon:i}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[i&&e.jsx(i,{size:14,style:{color:Xe.violet}}),e.jsx("h2",{style:{color:Xe.tp,fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:t})]})}function R6(){var v,d,y,_,j,C,h;const[t,i]=L.useState(null),[s,o]=L.useState([]),[u,S]=L.useState(!0),b=Ut();if(L.useEffect(()=>{(async()=>{try{const[f,g]=await Promise.all([le("/api/agents/stats"),le("/api/agents")]);i(f);const w=[...g||[]].sort((R,A)=>(A.rating||0)-(R.rating||0)).slice(0,5);o(w)}catch(f){console.error("Error fetching dashboard data",f)}finally{S(!1)}})()},[]),u)return e.jsx("div",{style:{height:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Xe.bg,color:Xe.ts},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx(v0,{size:24,style:{color:Xe.violet}}),e.jsx("span",{style:{fontSize:"13px",letterSpacing:"0.05em"},children:"ANALYZING AGENT DATA..."})]})});const l=((v=t==null?void 0:t.bySource)==null?void 0:v.reduce((p,f)=>p+f.count,0))||1,c=((y=(d=t==null?void 0:t.bySource)==null?void 0:d.find(p=>p.source==="filesystem"))==null?void 0:y.count)||0,m=Math.round(c/l*100);return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Xe.bg,padding:"24px",overflowY:"auto"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:Xe.tp,fontSize:"20px",fontWeight:600,margin:"0 0 4px 0"},children:"Agent Statistics"}),e.jsx("p",{style:{color:Xe.ts,fontSize:"13px",margin:0},children:"System-wide metrics and distribution for all agents."})]}),e.jsxs("div",{style:{padding:"6px 12px",borderRadius:"4px",border:`1px solid ${Xe.border}`,color:Xe.ts,fontSize:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Xe.success}}),"Live"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"16px",marginBottom:"32px"},children:[e.jsx(gl,{icon:Rs,label:"Total Agents",value:(t==null?void 0:t.total)||0,subtext:"deployed"}),e.jsx(gl,{icon:_n,label:"Avg Rating",value:`${((t==null?void 0:t.avgRating)||0).toFixed(1)}/5.0`,color:Xe.warning,subtext:"user feedback"}),e.jsx(gl,{icon:zs,label:"Total Projects",value:(t==null?void 0:t.totalProjects)||0,subtext:"active"}),e.jsx(gl,{icon:Yw,label:"Categories",value:((_=t==null?void 0:t.byCategory)==null?void 0:_.length)||0,color:Xe.success,subtext:"organized"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:bh,children:"Agent Distribution by Category"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(j=t==null?void 0:t.byCategory)==null?void 0:j.map((p,f)=>{const g=t.total>0?p.count/t.total*100:0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[e.jsx("span",{style:{color:Xe.ts,textTransform:"capitalize"},children:p.category}),e.jsxs("span",{style:{color:Xe.tp,fontWeight:500},children:[p.count," ",e.jsxs("span",{style:{color:Xe.tm,fontSize:"10px"},children:["(",g.toFixed(0),"%)"]})]})]}),e.jsx("div",{style:{height:"6px",width:"100%",backgroundColor:Xe.surfaceEl,borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${g}%`,backgroundColor:Xe.violet,boxShadow:`0 0 10px ${Xe.violetG}`,borderRadius:"3px"}})})]},f)})})]}),e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsx(xl,{icon:Z2,children:"Source Analysis"}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 0"},children:e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${Xe.violet} 0% ${m}%, ${Xe.surfaceEl} ${m}% 100%)`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:Xe.surface,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(mS,{size:16,style:{color:Xe.tm,marginBottom:"2px"}}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:Xe.tp},children:(t==null?void 0:t.total)||0})]})})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"16px"},children:(C=t==null?void 0:t.bySource)==null?void 0:C.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",borderRadius:"6px",backgroundColor:Xe.surfaceEl},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.source==="filesystem"?e.jsx(zu,{size:12,color:Xe.violet}):e.jsx(Es,{size:12,color:Xe.ts}),e.jsx("span",{style:{fontSize:"11px",color:Xe.ts,textTransform:"capitalize"},children:p.source})]}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:Xe.tp},children:[p.count," agents"]})]},f))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px"},children:[e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:Xn,children:"Model Usage"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:(h=t==null?void 0:t.byModel)==null?void 0:h.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",borderBottom:f!==t.byModel.length-1?`1px solid ${Xe.border}`:"none"},children:[e.jsx("span",{style:{fontSize:"12px",color:Xe.tp,fontFamily:Xe.mono},children:p.model}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Xe.violet},children:p.count})]},f))})]}),e.jsxs("div",{style:{backgroundColor:Xe.surface,border:`1px solid ${Xe.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(xl,{icon:_n,children:"Top Rated Agents"}),e.jsx("div",{style:{width:"100%",overflow:"hidden"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",padding:"12px 8px",borderBottom:`1px solid ${Xe.border}`},children:[e.jsx("span",{style:{flex:2,fontSize:"11px",color:Xe.tm,textTransform:"uppercase"},children:"Agent"}),e.jsx("span",{style:{flex:1,fontSize:"11px",color:Xe.tm,textTransform:"uppercase"},children:"Category"}),e.jsx("span",{style:{width:"80px",fontSize:"11px",color:Xe.tm,textTransform:"uppercase",textAlign:"right"},children:"Rating"}),e.jsx("span",{style:{width:"30px"}})]}),s.map((p,f)=>e.jsxs("div",{onClick:()=>b(`/agents/${p.name}`),style:{display:"flex",alignItems:"center",padding:"12px 8px",cursor:"pointer",borderBottom:f!==s.length-1?`1px solid ${Xe.border}`:"none",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:g=>g.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{flex:2,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",backgroundColor:Xe.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",color:Xe.violet,fontSize:"12px",fontWeight:"bold"},children:p.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:Xe.tp},children:p.name.replace(/-/g," ").replace(/\b\w/g,g=>g.toUpperCase())}),e.jsx("div",{style:{fontSize:"10px",color:Xe.tm,fontFamily:Xe.mono},children:p.model||"unknown"})]})]}),e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",backgroundColor:Xe.violetM,color:Xe.violet},children:p.category})}),e.jsxs("div",{style:{width:"80px",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px"},children:[e.jsx(_n,{size:10,fill:Xe.warning,color:Xe.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Xe.tp},children:p.rating||0})]}),e.jsx("div",{style:{width:"30px",textAlign:"right"},children:e.jsx(cr,{size:14,color:Xe.tm})})]},p.name))]})}),e.jsx(mi,{to:"/agents",style:{display:"block",textAlign:"center",marginTop:"16px",fontSize:"11px",color:Xe.ts,textDecoration:"none",padding:"8px",borderRadius:"6px",border:`1px dashed ${Xe.border}`},children:"View all agents"})]})]})]})})}const Ae={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B"};function m1({node:t,level:i=0,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:b=!1}){const l=(s==null?void 0:s.id)===t.id,[c,m]=L.useState(!1),[v,d]=L.useState(!1),y=t.children&&t.children.length>0,_=i===0;return e.jsxs("div",{style:{position:"relative"},children:[!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:0,width:"1px",height:b?"16px":"100%",background:"rgba(139,92,246,0.15)"}}),!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:"16px",width:"11px",height:"1px",background:"rgba(139,92,246,0.15)"}}),e.jsx("div",{style:{marginLeft:`${i*20}px`},children:e.jsxs("div",{onClick:()=>o(t),onContextMenu:j=>{j.preventDefault(),u({x:j.clientX,y:j.clientY,node:t})},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),style:{padding:"4px 8px",margin:"1px 0",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",background:l?"rgba(139,92,246,0.12)":c?"rgba(255,255,255,0.03)":"transparent",border:l?"1px solid rgba(139,92,246,0.3)":"1px solid transparent",transition:"all 0.15s"},children:[y?e.jsx("span",{onClick:j=>{j.stopPropagation(),d(!v)},style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",borderRadius:"3px",background:c?"rgba(255,255,255,0.06)":"transparent"},children:e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:Ae.tm,strokeWidth:"1.5",children:v?e.jsx("polyline",{points:"3,1 7,5 3,9"}):e.jsx("polyline",{points:"1,3 5,7 9,3"})})}):e.jsx("span",{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{width:"5px",height:"5px",borderRadius:"50%",background:l?Ae.violet:"rgba(255,255,255,0.15)"}})}),e.jsx("span",{style:{color:l?Ae.tp:Ae.ts,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:_?"500":"400"},children:t.title||`V${t.version}`}),c&&e.jsx("span",{onClick:j=>{j.stopPropagation(),S(t)},title:`Branch from ${t.title||"V"+t.version}`,style:{width:"16px",height:"16px",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"rgba(139,92,246,0.15)",color:Ae.violet,fontSize:"12px",fontWeight:"700",lineHeight:1,flexShrink:0},children:"+"}),e.jsx("span",{style:{background:_?Ae.violetM:"rgba(255,255,255,0.05)",color:_?Ae.violet:Ae.tm,padding:"1px 5px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",whiteSpace:"nowrap",maxWidth:"70px",overflow:"hidden",textOverflow:"ellipsis"},children:(t.agent_name||"").split("-").slice(0,2).join("-")}),y&&v&&e.jsx("span",{style:{background:"rgba(255,255,255,0.06)",color:Ae.tm,padding:"0 4px",borderRadius:"3px",fontSize:"9px",fontWeight:"600"},children:t.children.length})]})}),y&&!v&&e.jsx("div",{children:t.children.map((j,C)=>e.jsx(m1,{node:j,level:i+1,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:C===t.children.length-1},j.id))})]})}function T6({allIterations:t,selected:i,onSelect:s,projectId:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:d,scrollWidth:y,clientWidth:_}=u.current;b(d>10),c(d<y-_-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=d=>{u.current&&u.current.scrollBy({left:d==="left"?-400:400,behavior:"smooth"})};return!t||t.length===0?null:e.jsxs("div",{style:{position:"relative",height:"140px",width:"100%",backgroundColor:Ae.bg,borderTop:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",boxSizing:"border-box",flexShrink:0},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(Go,{size:18})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"16px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"8px 0",height:"100%",alignItems:"center",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",flex:1},children:t.map(d=>{const y=(i==null?void 0:i.id)===d.id;return e.jsxs("div",{onClick:()=>s(d),style:{flex:"0 0 160px",display:"flex",flexDirection:"column",gap:"4px",cursor:"pointer",transition:"transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{width:"160px",height:"90px",borderRadius:"8px",backgroundColor:Ae.surface,border:y?`2px solid ${Ae.violet}`:`1px solid ${Ae.border}`,boxShadow:y?`0 0 12px ${Ae.violetG}`:"none",overflow:"hidden",position:"relative",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},children:[e.jsx("div",{style:{width:"1280px",height:"720px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none",backgroundColor:Ae.surface},children:e.jsx("iframe",{src:`/api/preview/${o}/${d.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${d.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),y&&e.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Ae.violet}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:y?Ae.tp:Ae.ts},children:d.title||`V${d.version}`}),e.jsx("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",backgroundColor:Ae.surfaceEl,border:`1px solid ${Ae.border}`,color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.02em",maxWidth:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d.agent_name||"").split("-").slice(0,2).join("-")})]})]},d.id)})}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(cr,{size:18})})]})}function A6(){const{id:t}=Jn(),i=Ut(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState(null),[c,m]=L.useState(250),[v,d]=L.useState(600),[y,_]=L.useState(null),[j,C]=L.useState(null),[h,p]=L.useState(""),[f,g]=L.useState([]),[w,R]=L.useState(null),[A,z]=L.useState(!1),[E,B]=L.useState(void 0),[O,H]=L.useState(null),[K,U]=L.useState(null),[ee,V]=L.useState("preview"),[ue,Q]=L.useState([]),G=L.useRef(null),M=L.useRef(null),I=L.useRef(null),[D,W]=L.useState(typeof window<"u"&&window.innerWidth<900);L.useEffect(()=>{const pe=()=>W(window.innerWidth<900);return window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)},[]);const fe=Ms.useMemo(()=>{const pe=[],De=$e=>{for(const Pe of $e)pe.push(Pe),Pe.children&&De(Pe.children)};return De(u),pe},[u]);L.useEffect(()=>{le("/api/claude-status").then(pe=>H(pe)).catch(()=>H({installed:!1,version:null})),le("/api/claude-auth/status").then(pe=>U(pe.connected)).catch(()=>U(!1))},[]),L.useEffect(()=>{t&&t!=="new"&&(async()=>{try{const[De,$e,Pe,Ee]=await Promise.all([le(`/api/projects/${t}`),le(`/api/iterations/${t}/tree`),le(`/api/terminal-tabs/${t}`),le(`/api/projects/${t}/skills`).catch(()=>[])]);if(o(De),Q(Ee||[]),S($e||[]),$e&&$e.length>0){const He=[],J=ce=>{for(const Ne of ce)He.push(Ne),Ne.children&&J(Ne.children)};J($e),l(He[He.length-1]||$e[0])}if(Pe&&Pe.length>0){const He=Pe.map(J=>({id:J.id,name:J.name||"claude-1",sessionId:J.alive?J.session_id:null}));g(He),R(He[0].id)}else{const He={id:`tab-${Date.now()}`,name:"claude-1",sessionId:null};g([He]),R(He.id),le("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:He.id,project_id:t,name:He.name})}).catch(()=>{})}z(!0)}catch(De){console.error(De)}})()},[t]),L.useEffect(()=>{if(!t||t==="new")return;const pe=Io({transports:["websocket"]});return pe.on("iteration-created",De=>{De.projectId===t&&le(`/api/iterations/${t}/tree`).then($e=>{S($e||[]),De.iteration&&l(De.iteration)}).catch(()=>{})}),()=>pe.disconnect()},[t]);const ye=L.useCallback(pe=>{y==="left"&&m(Math.max(150,Math.min(500,pe.clientX))),y==="right"&&d(Math.max(200,Math.min(700,window.innerWidth-pe.clientX)))},[y]),we=L.useCallback(()=>_(null),[]);L.useEffect(()=>{if(y)return window.addEventListener("mousemove",ye),window.addEventListener("mouseup",we),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",we)}},[y,ye,we]);const Re=()=>{const pe=`tab-${Date.now()}`,De=`claude-${f.length+1}`;g($e=>[...$e,{id:pe,name:De,sessionId:null}]),R(pe),le("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:pe,project_id:t,name:De})}).catch(()=>{})},Y=pe=>{f.find($e=>$e.id===pe)&&(g($e=>{const Pe=$e.filter(Ee=>Ee.id!==pe);return w===pe&&Pe.length>0&&R(Pe[0].id),Pe}),le(`/api/terminal-tabs/${pe}`,{method:"DELETE"}).catch(()=>{}))},F=L.useCallback(pe=>{t&&le(`/api/terminal-tabs/${t}/branch-context`,{method:"POST",body:JSON.stringify({parentId:pe})}).catch(De=>console.error("[BranchContext]",De))},[t]),be=L.useCallback(()=>{B(null),F(null),setTimeout(()=>{var pe;return(pe=I.current)==null?void 0:pe.focus()},100)},[F]),oe=L.useCallback(pe=>{B(pe),F(pe.id),l(pe),setTimeout(()=>{var De;return(De=I.current)==null?void 0:De.focus()},100)},[F]),Ie=L.useCallback(pe=>{l(pe),B(pe),F(pe.id)},[F]),Z=L.useCallback(()=>{if(!h.trim()||!G.current)return;const pe=h.replace(/'/g,"'\\''");G.current.sendInput(`claude -p '${pe}'
`),p("")},[h]),je=(pe,De)=>{g($e=>$e.map(Pe=>Pe.id===pe?{...Pe,sessionId:De}:Pe)),le(`/api/terminal-tabs/${pe}/session`,{method:"PUT",body:JSON.stringify({session_id:De})}).catch(()=>{})};return t==="new"?e.jsxs("div",{style:{padding:"24px",maxWidth:"500px",width:"100%",boxSizing:"border-box"},children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"24px"},children:"New Project"}),e.jsx(L6,{onCreated:pe=>i(`/project/${pe}`)})]}):e.jsxs("div",{style:{display:"flex",flexDirection:D?"column":"row",height:"calc(100vh - 53px)",background:Ae.bg,overflow:"hidden"},onClick:()=>C(null),children:[D&&e.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[{id:"tree",label:"Worktree"},{id:"preview",label:"Preview"},{id:"terminal",label:"Terminal"}].map(pe=>e.jsx("button",{onClick:()=>V(pe.id),style:{flex:1,padding:"10px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ee===pe.id?Ae.surfaceEl:"transparent",color:ee===pe.id?Ae.tp:Ae.tm,border:"none",borderBottom:ee===pe.id?`2px solid ${Ae.violet}`:"2px solid transparent"},children:pe.label},pe.id))}),e.jsxs("aside",{style:{width:D?"100%":`${c}px`,background:Ae.surface,borderRight:D?"none":`1px solid ${Ae.border}`,display:D&&ee!=="tree"?"none":"flex",flexDirection:"column",flexShrink:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Worktree"}),e.jsxs("button",{onClick:be,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New"]})]}),E!==void 0&&e.jsxs("div",{style:{padding:"6px 12px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",background:"rgba(139,92,246,0.06)"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:Ae.violet,strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),e.jsx("span",{style:{color:Ae.violet,flex:1},children:E===null?"New root worktree":`From ${E.title||"V"+E.version}`}),e.jsx("span",{onClick:()=>B(void 0),style:{color:Ae.tm,cursor:"pointer",fontSize:"13px"},children:"x"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[u.map(pe=>e.jsx(m1,{node:pe,selected:b,onSelect:Ie,onContext:C,onBranch:oe},pe.id)),u.length===0&&e.jsx("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:Ae.tm},children:"No iterations yet"})]})]}),!D&&e.jsx("div",{onMouseDown:()=>_("left"),style:{width:"4px",cursor:"col-resize",background:y==="left"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsxs("main",{style:{flex:1,display:D&&ee!=="preview"?"none":"flex",flexDirection:"column",minWidth:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"40px",background:Ae.surface,borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",gap:"12px",fontSize:"12px",color:Ae.ts,flexShrink:0,overflow:"hidden"},children:[e.jsx("span",{style:{color:Ae.tp,fontWeight:"500"},children:(s==null?void 0:s.name)||"Loading..."}),b&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:Ae.tm},children:"/"}),e.jsx("span",{children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:Ae.violetM,color:Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"10px",fontWeight:"600"},children:b.agent_name})]}),ue.length>0&&e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"hidden",flexShrink:1,minWidth:0},children:[e.jsx("span",{style:{color:Ae.tm,fontSize:"10px",flexShrink:0},children:"Skills:"}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"auto",maxWidth:"100%"},children:ue.map(pe=>e.jsx("span",{style:{background:pe.color?`${pe.color}20`:"rgba(139,92,246,0.12)",color:pe.color||Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",border:`1px solid ${pe.color?`${pe.color}40`:"rgba(139,92,246,0.2)"}`,whiteSpace:"nowrap",flexShrink:0},children:pe.name},pe.id))})]}),e.jsx("div",{style:{flex:1}}),e.jsxs("a",{href:`/preview/${t}`,target:"_blank",rel:"noreferrer",style:{color:"#fff",fontSize:"11px",display:"flex",alignItems:"center",gap:"5px",background:Ae.violet,padding:"4px 10px",borderRadius:"6px",textDecoration:"none",fontWeight:"600",boxShadow:`0 0 8px ${Ae.violetG}`,flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Client Preview"]}),b&&e.jsxs("a",{href:`/api/preview/${t}/${b.id}`,target:"_blank",rel:"noreferrer",style:{color:Ae.ts,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),"Open"]})]}),e.jsx("div",{style:{flex:1,background:"#fff",margin:"8px",borderRadius:"8px",border:`1px solid ${Ae.border}`,overflow:"hidden",position:"relative"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Preview"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tm,background:Ae.bg},children:"Select an iteration to preview"})}),e.jsx(T6,{allIterations:fe,selected:b,onSelect:Ie,projectId:t}),e.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[E!==void 0&&e.jsxs("div",{style:{fontSize:"10px",color:Ae.violet,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),E===null?"Creating new root iteration":`Branching from ${E.title||"V"+E.version}`]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{ref:I,value:h,onChange:pe=>p(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&h.trim()&&Z()},placeholder:E!==void 0?E===null?"Describe the landing page to create from scratch...":`Describe changes to apply from ${E.title||"V"+E.version}...`:"Describe adjustments for the next iteration...",style:{width:"100%",padding:"10px 100px 10px 14px",background:Ae.surfaceEl,border:`1px solid ${E!==void 0?"rgba(139,92,246,0.4)":Ae.borderS}`,borderRadius:"8px",color:Ae.tp,fontSize:"13px",outline:"none"}}),e.jsxs("button",{onClick:Z,disabled:!h.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:h.trim()?Ae.violet:Ae.tm,color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:h.trim()?"pointer":"default",opacity:h.trim()?1:.5},children:[e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Generate"]})]})]})]}),!D&&e.jsx("div",{onMouseDown:()=>_("right"),style:{width:"4px",cursor:"col-resize",background:y==="right"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsx("aside",{style:{width:D?"100%":`${v}px`,background:Ae.surface,borderLeft:D?"none":`1px solid ${Ae.border}`,display:D&&ee!=="terminal"?"none":"flex",flexDirection:"column",flexShrink:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:O&&!O.installed?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",padding:"0 14px",borderBottom:`1px solid ${Ae.border}`,gap:"8px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#f59e0b"},children:"Claude CLI Setup Required"})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 16px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("p",{style:{fontSize:"13px",color:Ae.ts,margin:"0 0 12px 0",lineHeight:1.5},children:"Claude Code CLI is not installed on this server. Install it to enable AI-powered iterations."}),e.jsxs("button",{onClick:()=>{M.current&&M.current.sendInput(`npm install -g @anthropic-ai/claude-code
`)},style:{background:Ae.violet,color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",width:"100%",justifyContent:"center"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),"Install Claude Code CLI"]}),e.jsxs("p",{style:{fontSize:"10px",color:Ae.tm,margin:"8px 0 0 0",textAlign:"center"},children:["Runs: ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"2px 4px",borderRadius:"3px"},children:"npm install -g @anthropic-ai/claude-code"})]})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx(Lu,{ref:M,projectId:t,onSessionCreated:()=>{}})}),e.jsx("div",{style:{padding:"8px 16px",borderTop:`1px solid ${Ae.border}`,display:"flex",justifyContent:"center"},children:e.jsx("button",{onClick:()=>{le("/api/claude-status").then(pe=>H(pe)).catch(()=>{})},style:{background:"transparent",color:Ae.ts,border:`1px solid ${Ae.border}`,borderRadius:"4px",padding:"6px 12px",fontSize:"11px",cursor:"pointer"},children:"Check again"})})]})]}):e.jsxs(e.Fragment,{children:[K===!1&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"8px",background:"rgba(245,158,11,0.06)",fontSize:"11px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsxs("span",{style:{color:"#f59e0b",flex:1},children:["Claude not authenticated. Run ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"1px 4px",borderRadius:"3px"},children:"claude"})," in the terminal to connect."]}),e.jsx("span",{onClick:()=>i("/setup-claude"),style:{color:Ae.violet,cursor:"pointer",fontWeight:"500",fontSize:"11px"},children:"Setup"})]}),e.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,height:"44px",flexShrink:0},children:[f.map(pe=>e.jsxs("div",{onClick:()=>R(pe.id),style:{padding:"0 14px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:w===pe.id?Ae.tp:Ae.ts,background:w===pe.id?Ae.surface:Ae.bg,borderBottom:w===pe.id?`2px solid ${Ae.violet}`:"2px solid transparent",borderRight:`1px solid ${Ae.border}`},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),pe.name,f.length>1&&e.jsx("span",{onClick:De=>{De.stopPropagation(),Y(pe.id)},style:{marginLeft:"4px",opacity:.4,fontSize:"14px",lineHeight:1},onMouseEnter:De=>De.currentTarget.style.opacity=1,onMouseLeave:De=>De.currentTarget.style.opacity=.4,children:"x"})]},pe.id)),e.jsx("div",{onClick:Re,style:{padding:"0 12px",display:"flex",alignItems:"center",cursor:"pointer",color:Ae.tm},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:A&&w&&(()=>{const pe=f.find(De=>De.id===w);return pe?e.jsx(Lu,{ref:G,sessionId:pe.sessionId,projectId:t,onSessionCreated:De=>je(pe.id,De)},pe.id):null})()})]})}),j&&e.jsxs("div",{style:{position:"fixed",left:j.x,top:j.y,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"8px",padding:"4px",zIndex:1e3,boxShadow:"0 10px 25px rgba(0,0,0,0.5)",minWidth:"160px"},children:[e.jsxs("div",{onClick:()=>{oe(j.node),C(null)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:pe=>pe.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:pe=>pe.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),"Branch from here"]}),e.jsxs("div",{onClick:async()=>{var Pe;const pe=j.node;C(null);const De=h(`New project name (from ${pe.title||"V"+pe.version}):`,`${(s==null?void 0:s.name)||"Project"} - Fork`);if(!De)return;const $e=h(`Agent name (leave empty to keep "${pe.agent_name}"):`,pe.agent_name||"");try{const Ee=await le("/api/projects/fork",{method:"POST",body:JSON.stringify({name:De,agent_name:$e||pe.agent_name,source_project_id:t,source_iteration_id:pe.id})});(Pe=Ee==null?void 0:Ee.project)!=null&&Pe.id&&i(`/project/${Ee.project.id}`)}catch(Ee){console.error("Fork error:",Ee)}},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:pe=>pe.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:pe=>pe.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"}),e.jsx("path",{d:"M3 6v12"})]}),"New project from here"]}),e.jsxs("div",{onClick:()=>{const pe=j.node;C(null),confirm(`Delete ${pe.title||"V"+pe.version}?`)&&le(`/api/iterations/detail/${pe.id}`,{method:"DELETE"}).then(()=>{le(`/api/iterations/${t}/tree`).then(De=>{S(De||[]),(b==null?void 0:b.id)===pe.id&&l(null)}).catch(()=>{})}).catch(De=>console.error(De))},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:"#ef4444",cursor:"pointer",borderRadius:"4px"},onMouseEnter:pe=>pe.currentTarget.style.background="rgba(239,68,68,0.1)",onMouseLeave:pe=>pe.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete"]})]})]})}function L6({onCreated:t}){const[i,s]=L.useState(""),[o,u]=L.useState(""),[S,b]=L.useState(""),[l,c]=L.useState([]),[m,v]=L.useState(!1);L.useEffect(()=>{le("/api/agents").then(_=>c(_||[])).catch(()=>{});const y=new URLSearchParams(window.location.search);y.get("agent")&&b(y.get("agent"))},[]);const d=async y=>{if(y.preventDefault(),!!i){v(!0);try{const _=await le("/api/projects",{method:"POST",body:JSON.stringify({name:i,description:o,agent_name:S})});t(_.id)}catch(_){console.error(_)}finally{v(!1)}}};return e.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Project Name"}),e.jsx("input",{value:i,onChange:y=>s(y.target.value),required:!0,style:{width:"100%"},placeholder:"My Landing Page Test"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Description"}),e.jsx("input",{value:o,onChange:y=>u(y.target.value),style:{width:"100%"},placeholder:"Optional description"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Agent"}),e.jsxs("select",{value:S,onChange:y=>b(y.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select agent..."}),l.map(y=>e.jsx("option",{value:y.name,children:y.name},y.name))]})]}),e.jsx("button",{type:"submit",disabled:m,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"10px",fontSize:"13px",fontWeight:"600",opacity:m?.7:1},children:m?"Creating...":"Create Project"})]})}const ir={surface:"#0A0A0B",border:"rgba(255,255,255,0.06)",borderS:"rgba(255,255,255,0.12)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"};function z6(){const{id:t}=Jn(),i=Ut(),[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(null),[c,m]=L.useState(null);return L.useEffect(()=>{(async()=>{try{const[d,y]=await Promise.all([le(`/api/projects/${t}`),le(`/api/iterations/${t}`)]);m(d),o(y||[]),y&&y.length>=2?(S(y[0]),l(y[y.length-1])):y&&y.length===1&&S(y[0])}catch(d){console.error(d)}})()},[t]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",letterSpacing:"-0.02em",margin:0},children:"Compare Iterations"}),e.jsx("span",{style:{fontSize:"13px",color:ir.tm},children:c==null?void 0:c.name})]}),e.jsx("button",{onClick:()=>i(`/project/${t}`),style:{background:"transparent",border:`1px solid ${ir.borderS}`,color:ir.ts,borderRadius:"4px",padding:"6px 14px",fontSize:"12px",fontWeight:"500"},children:"Back to Project"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:ir.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Left"}),e.jsxs("select",{value:(u==null?void 0:u.id)||"",onChange:v=>S(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:ir.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Right"}),e.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:v=>l(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",height:"calc(100vh - 260px)"},children:[e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${ir.border}`,overflow:"hidden"},children:u?e.jsx("iframe",{src:`/api/preview/${t}/${u.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Left"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:ir.tm,background:"#050505"},children:"Select left iteration"})}),e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${ir.border}`,overflow:"hidden"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Right"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:ir.tm,background:"#050505"},children:"Select right iteration"})})]}),u&&b&&e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1,background:ir.surface,border:`1px solid ${ir.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:u.title||`V${u.version}`}),e.jsx("span",{style:{background:ir.violetM,color:ir.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:u.agent_name}),u.prompt&&e.jsx("p",{style:{fontSize:"12px",color:ir.ts,marginTop:"8px",lineHeight:"1.5"},children:u.prompt})]}),e.jsxs("div",{style:{flex:1,background:ir.surface,border:`1px solid ${ir.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:ir.violetM,color:ir.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:b.agent_name}),b.prompt&&e.jsx("p",{style:{fontSize:"12px",color:ir.ts,marginTop:"8px",lineHeight:"1.5"},children:b.prompt})]})]})]})}function I6(){const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(null),b=Ut(),l=L.useCallback(()=>{le("/api/sessions").then(_=>{i(_||[]),o(!1)}).catch(()=>o(!1))},[]);L.useEffect(()=>{l();const _=setInterval(l,3e3);return()=>clearInterval(_)},[l]);const c=async _=>{S(_);try{await le(`/api/sessions/${_}`,{method:"DELETE"}),i(j=>j.filter(C=>C.id!==_))}catch(j){console.error("Kill failed:",j)}S(null)},m=async()=>{if(t.length){S("all");try{await le("/api/sessions/all",{method:"DELETE"}),i([])}catch(_){console.error("Kill all failed:",_)}S(null)}},v=_=>{const j=Date.now()-_,C=Math.floor(j/6e4);if(C<1)return"just now";if(C<60)return`${C}m ago`;const h=Math.floor(C/60);return h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`},d=t.filter(_=>!_.exited),y=t.filter(_=>_.exited);return e.jsxs("div",{style:{padding:"32px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#F4F4F5",fontSize:"20px",fontWeight:"600",margin:0},children:"Sessions"}),e.jsxs("p",{style:{color:"#71717A",fontSize:"13px",margin:"4px 0 0"},children:[d.length," active instance",d.length!==1?"s":"",y.length>0&&`  ${y.length} exited`]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:l,style:{background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#A1A1AA",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:_=>{_.target.style.borderColor="rgba(255,255,255,0.2)",_.target.style.color="#F4F4F5"},onMouseLeave:_=>{_.target.style.borderColor="rgba(255,255,255,0.1)",_.target.style.color="#A1A1AA"},children:"Refresh"}),d.length>0&&e.jsx("button",{onClick:m,disabled:u==="all",style:{background:u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:u==="all"?"wait":"pointer",transition:"all 0.15s",opacity:u==="all"?.6:1},onMouseEnter:_=>{u!=="all"&&(_.target.style.background="rgba(239,68,68,0.25)")},onMouseLeave:_=>{_.target.style.background=u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)"},children:u==="all"?"Killing...":`Kill all (${d.length})`})]})]}),s&&e.jsx("div",{style:{textAlign:"center",padding:"60px 0",color:"#52525B"},children:"Loading sessions..."}),!s&&t.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"80px 24px",background:"#1a1a1b",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px",opacity:.4},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#52525B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),e.jsx("path",{d:"m8 21 4-4 4 4"}),e.jsx("path",{d:"M7 8h.01M12 8h.01"})]})}),e.jsx("p",{style:{color:"#71717A",fontSize:"14px",margin:0},children:"No active terminal sessions"}),e.jsx("p",{style:{color:"#52525B",fontSize:"12px",margin:"4px 0 0"},children:"Sessions appear when you open terminals in projects"})]}),d.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{color:"#A1A1AA",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Active"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.04)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.06)"},children:d.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"#1a1a1b",transition:"background 0.15s"},onMouseEnter:j=>j.currentTarget.style.background="#1f1f21",onMouseLeave:j=>j.currentTarget.style.background="#1a1a1b",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#22c55e",boxShadow:"0 0 6px rgba(34,197,94,0.4)"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#F4F4F5",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#8B5CF6",background:"rgba(139,92,246,0.12)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA",cursor:"pointer",transition:"color 0.15s"},onClick:()=>b(`/project/${_.projectId}`),onMouseEnter:j=>j.target.style.color="#8B5CF6",onMouseLeave:j=>j.target.style.color="#A1A1AA",children:_.projectName}),!_.projectName&&_.projectId&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B",fontFamily:'"JetBrains Mono", monospace'},children:_.projectId.slice(0,8)}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Started ",v(_.createdAt)]}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Active ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),disabled:u===_.id,style:{background:"transparent",border:"1px solid rgba(239,68,68,0.2)",color:"#ef4444",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",fontWeight:"500",cursor:u===_.id?"wait":"pointer",transition:"all 0.15s",opacity:u===_.id?.5:1,flexShrink:0},onMouseEnter:j=>{u!==_.id&&(j.target.style.background="rgba(239,68,68,0.1)",j.target.style.borderColor="rgba(239,68,68,0.4)")},onMouseLeave:j=>{j.target.style.background="transparent",j.target.style.borderColor="rgba(239,68,68,0.2)"},children:u===_.id?"...":"Kill"})]},_.id))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#52525B",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Exited"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.04)"},children:y.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(26,26,27,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#52525B"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#71717A",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#52525B",background:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B"},children:_.projectName}),e.jsxs("span",{style:{fontSize:"11px",color:"#3F3F46"},children:["Exited ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.06)",color:"#52525B",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",transition:"all 0.15s",flexShrink:0},onMouseEnter:j=>{j.target.style.borderColor="rgba(255,255,255,0.15)",j.target.style.color="#71717A"},onMouseLeave:j=>{j.target.style.borderColor="rgba(255,255,255,0.06)",j.target.style.color="#52525B"},children:"Remove"})]},_.id))})]})]})}const ct={bg:"#0f0f0f",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function D6(){const{projectId:t}=Jn(),[i,s]=L.useState(!0),[o,u]=L.useState(null),[S,b]=L.useState(null),[l,c]=L.useState("desktop"),[m,v]=L.useState(!1),[d,y]=L.useState(!1);L.useEffect(()=>{(async()=>{var f;try{s(!0);const w=await(await fetch(`/api/preview/showcase/${t}`)).json();if(u(w),((f=w.iterations)==null?void 0:f.length)>0){const R=[...w.iterations].sort((A,z)=>z.version-A.version);b(R[0].id)}}catch(g){console.error("Failed to fetch showcase data",g)}finally{s(!1)}})()},[t]);const _=L.useMemo(()=>{var f;return(f=o==null?void 0:o.iterations)==null?void 0:f.find(g=>g.id===S)},[o,S]),j=()=>{v(!0),setTimeout(()=>v(!1),800)},C=async()=>{try{await navigator.clipboard.writeText(window.location.href)}catch{}};if(i)return e.jsxs("div",{style:{height:"100vh",backgroundColor:ct.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`2px solid ${ct.violetM}`,borderTopColor:ct.violet,borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("span",{style:{color:ct.ts,fontFamily:ct.mono,fontSize:"12px"},children:"Loading preview..."})]});if(!(o!=null&&o.project))return e.jsxs("div",{style:{height:"100vh",backgroundColor:ct.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px",color:ct.tm},children:[e.jsx(Ei,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"Project not found"})]});const h={desktop:"100%",tablet:"768px",mobile:"390px"},p=[...o.iterations].sort((f,g)=>f.version-g.version);return e.jsxs("div",{style:{height:"100vh",width:"100vw",backgroundColor:ct.bg,color:ct.tp,fontFamily:"Inter, sans-serif",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#050505",position:"relative",overflow:"hidden"},children:[l!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${ct.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:h[l],height:l==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:l==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:l==="desktop"?"0":"12px",overflow:"hidden",border:l==="desktop"?"none":`1px solid ${ct.borderS}`},children:_?e.jsx("iframe",{src:`/api/preview/${t}/${S}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:m?.5:1,transition:"opacity 0.2s"},title:`Iteration v${_.version}`},`${S}-${m}`):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:ct.tm,flexDirection:"column",gap:"12px"},children:[e.jsx(Ei,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"No iteration selected"})]})})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:d?"auto":"calc(100% - 40px)",maxWidth:d?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${ct.borderS}`,borderRadius:"16px",zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:d?e.jsxs("button",{onClick:()=>y(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:ct.ts},children:[e.jsx(_h,{size:14}),e.jsxs("span",{style:{fontFamily:ct.mono,fontSize:"11px",fontWeight:600},children:["v",(_==null?void 0:_.version)||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:ct.border}}),e.jsx("span",{style:{fontSize:"10px",color:ct.tm},children:o.project.name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:ct.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:ct.mono,fontWeight:800,fontSize:"14px",color:ct.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:ct.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ct.tp},children:o.project.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:(_==null?void 0:_.status)==="completed"?ct.success:ct.warning}}),e.jsx("span",{style:{fontSize:"10px",color:(_==null?void 0:_.status)==="completed"?ct.success:ct.warning,fontWeight:500},children:(_==null?void 0:_.status)==="completed"?"Live":"Draft"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${ct.border}`},children:[{id:"mobile",icon:e.jsx(R0,{size:13})},{id:"tablet",icon:e.jsx(T0,{size:13})},{id:"desktop",icon:e.jsx(C0,{size:13})}].map(f=>e.jsx("button",{onClick:()=>c(f.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:l===f.id?ct.surfaceEl:"transparent",color:l===f.id?ct.violet:ct.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:f.icon},f.id))}),e.jsx("button",{onClick:j,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ct.border}`,backgroundColor:"transparent",color:ct.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k0,{size:14,style:m?{animation:"spin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:S?`/api/preview/download/${t}/${S}`:"#",style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${ct.border}`,color:ct.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(bn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:C,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:ct.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${ct.violetG}`},children:[e.jsx(E0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>y(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ct.border}`,backgroundColor:"transparent",color:ct.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Sn,{size:14})})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:p.map(f=>{const g=S===f.id;return e.jsxs("button",{onClick:()=>b(f.id),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:g?ct.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${g?ct.violet:ct.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:f.status==="completed"?ct.success:f.status==="error"?ct.danger:ct.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:g?ct.tp:ct.ts,fontFamily:ct.mono},children:["v",f.version]}),f.title&&e.jsx("span",{style:{fontSize:"11px",color:g?ct.ts:ct.tm,maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:f.title})]},f.id)})})]})}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})}const st={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",warning:"#f59e0b"};function M6({agent:t,onDownload:i,navigate:s}){var b;const[o,u]=L.useState(!1),S=l=>l.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("div",{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{backgroundColor:st.surface,border:`1px solid ${o?st.violet:st.border}`,borderRadius:"10px",overflow:"hidden",display:"flex",flexDirection:"column",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",transform:o?"translateY(-2px)":"none",boxShadow:o?`0 8px 24px rgba(0,0,0,0.5), 0 0 20px ${st.violetG}`:"none"},children:[e.jsx("div",{style:{aspectRatio:"16/10",backgroundColor:"#141415",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${st.border}`,overflow:"hidden",position:"relative"},children:t.screenshot_path?e.jsx("img",{src:t.screenshot_path+"?t=1",alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):t.featured_project_id&&t.featured_iteration_id?e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${t.featured_project_id}/${t.featured_iteration_id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview ${t.name}`,loading:"lazy",sandbox:"allow-same-origin"})}):e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"10px",backgroundColor:st.violetM,color:st.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"700",border:`1px solid ${st.violet}30`},children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{style:{padding:"14px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${st.violet}15`,color:st.violet,border:`1px solid ${st.violet}25`,marginRight:"4px"},children:t.category||"General"}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${st.ts}15`,color:st.ts,border:`1px solid ${st.ts}25`},children:t.model||"unknown"})]}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",color:st.tp,marginBottom:"4px",margin:"0 0 4px 0"},children:S(t.name)}),e.jsx("p",{style:{fontSize:"12px",color:st.ts,lineHeight:"1.4",marginBottom:"12px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"34px",margin:"0 0 12px 0"},children:t.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",color:st.tm,marginBottom:"12px"},children:[e.jsx(jn,{size:12}),e.jsx("span",{children:((b=t.creator)==null?void 0:b.display_name)||"Platform"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:`1px solid ${st.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:st.ts},children:[e.jsx(bn,{size:12,color:st.tm}),e.jsx("span",{children:t.download_count||0})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:st.ts},children:[e.jsx(Wi,{size:12,color:st.tm}),e.jsx("span",{children:t.project_count||0})]})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(l=>e.jsx(_n,{size:10,fill:l<=(t.rating||0)?st.warning:"transparent",color:l<=(t.rating||0)?st.warning:st.tm},l))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"14px"},children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(t.name)},style:{backgroundColor:st.surfaceEl,color:st.ts,border:`1px solid ${st.borderS}`,borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(bn,{size:13})," Download"]}),e.jsxs("button",{onClick:()=>s(`/marketplace/${t.name}`),style:{backgroundColor:st.tp,color:st.bg,border:"none",borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx($s,{size:13})," Details"]})]})]})]})}function B6(){const t=Ut(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(""),[m,v]=L.useState("all"),[d,y]=L.useState("popular"),_=async()=>{b(!0);try{const h=new URLSearchParams({sort:d});l&&h.set("search",l),m!=="all"&&h.set("category",m);const[p,f]=await Promise.all([le(`/api/marketplace?${h.toString()}`),le("/api/categories")]);s(p||[]),u(f||[])}catch(h){console.error("Marketplace fetch error:",h)}finally{b(!1)}};L.useEffect(()=>{const h=setTimeout(_,300);return()=>clearTimeout(h)},[l,m,d]);const j=async h=>{try{const p=Ko(),f=await fetch(`/api/marketplace/${encodeURIComponent(h)}/download`,{headers:{Authorization:`Bearer ${p}`}});if(!f.ok)throw new Error("Download failed");const g=await f.blob(),w=URL.createObjectURL(g),R=document.createElement("a");R.href=w,R.download=`${h}.md`,R.click(),URL.revokeObjectURL(w),_()}catch(p){console.error("Download error:",p)}},C=h=>h.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return e.jsx("div",{className:"mp-root",style:{backgroundColor:st.bg,minHeight:"calc(100vh - 53px)",color:st.tp,padding:"40px 24px"},children:e.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"48px"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"12px"},children:"Agent Marketplace"}),e.jsx("p",{style:{fontSize:"14px",color:st.ts,marginBottom:"24px"},children:"Browse, download, and explore AI agents for your projects"}),e.jsxs("div",{style:{position:"relative",maxWidth:"500px",margin:"0 auto"},children:[e.jsx(Is,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:st.tm}}),e.jsx("input",{style:{width:"100%",backgroundColor:st.surface,border:`1px solid ${st.border}`,borderRadius:"8px",padding:"10px 16px 10px 40px",color:st.tp,fontSize:"14px",outline:"none",boxSizing:"border-box"},placeholder:"Search agents, capabilities, models...",value:l,onChange:h=>c(h.target.value)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"32px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:[e.jsx("div",{onClick:()=>v("all"),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m==="all"?st.violetM:st.surface,color:m==="all"?st.violet:st.ts,border:`1px solid ${m==="all"?st.violet:st.border}`},children:"All Agents"}),o.map(h=>e.jsx("div",{onClick:()=>v(h.name),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m===h.name?st.violetM:st.surface,color:m===h.name?st.violet:st.ts,border:`1px solid ${m===h.name?st.violet:st.border}`},children:C(h.name)},h.id||h.name))]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(H2,{size:14,style:{color:st.tm}}),e.jsxs("select",{style:{backgroundColor:st.surface,border:`1px solid ${st.border}`,color:st.ts,padding:"6px 12px",borderRadius:"6px",fontSize:"12px",outline:"none",cursor:"pointer"},value:d,onChange:h=>y(h.target.value),children:[e.jsx("option",{value:"popular",children:"Popular"}),e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"recent",children:"Recently Added"}),e.jsx("option",{value:"name",children:"Name A-Z"})]})]})]}),i.length===0&&!S?e.jsxs("div",{style:{textAlign:"center",padding:"80px 0",color:st.tm},children:[e.jsx(S0,{size:48,strokeWidth:1,style:{marginBottom:"16px",opacity:.5}}),e.jsx("p",{style:{margin:0},children:"No agents found matching your criteria."})]}):e.jsx("div",{className:"mp-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px",opacity:S&&i.length===0?.5:1,transition:"opacity 0.2s ease"},children:i.map(h=>e.jsx(M6,{agent:h,onDownload:j,navigate:t},h.name))}),e.jsx("style",{children:`
          @media (max-width: 768px) {
            .mp-root { padding: 20px 12px !important; }
            .mp-grid { grid-template-columns: 1fr !important; gap: 16px !important; }
          }
          @media (max-width: 480px) {
            .mp-grid { grid-template-columns: 1fr !important; }
          }
        `})]})})}const de={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function P6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:de.surface,border:`1px solid ${de.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=de.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${de.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=de.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})}),e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.8))",display:"flex",alignItems:"flex-end",padding:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fff"},children:[e.jsx(ql,{size:12,fill:"currentColor"}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Preview"})]})})]}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:de.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:de.ts},children:t.project_name}),e.jsx("span",{style:{color:de.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:de.tm},children:["v",t.iteration_version]})]})]})]})}function O6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Wi,{size:14,style:{color:de.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:de.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:de.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:de.surfaceEl,border:`1px solid ${de.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:de.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Go,{size:16})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${de.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=de.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=de.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:de.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:de.surfaceEl,border:`1px solid ${de.border}`,color:de.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:de.surfaceEl,border:`1px solid ${de.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:de.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(cr,{size:16})})]})]})}function $6(){var Pe;const{name:t}=Jn(),i=Ut(),[s,o]=L.useState(null),[u,S]=L.useState(null),[b,l]=L.useState([]),[c,m]=L.useState([]),[v,d]=L.useState({}),[y,_]=L.useState(!0),[j,C]=L.useState(!1),[h,p]=L.useState(null),[f,g]=L.useState(!1),[w,R]=L.useState(!1),[A,z]=L.useState([]),[E,B]=L.useState([]),[O,H]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[K,U]=L.useState(!1),[ee,V]=L.useState(!0),[ue,Q]=L.useState(null),[G,M]=L.useState({}),[I,D]=L.useState("desktop"),[W,fe]=L.useState(!1),[ye,we]=L.useState(!1);L.useEffect(()=>{Re()},[t]);const Re=async()=>{try{_(!0);const[Ee,He]=await Promise.all([le(`/api/marketplace/${t}`),le("/api/user/me")]);o(Ee),l(Ee.showcases||[]),m(Ee.projects||[]),d(Ee.iterations_by_project||{}),S(He)}catch(Ee){console.error(Ee)}finally{_(!1)}},Y=s&&u&&(s.created_by===u.id||u.role==="admin"),F=async()=>{try{const Ee=Ko(),He=await fetch(`/api/marketplace/${encodeURIComponent(t)}/download`,{headers:{Authorization:`Bearer ${Ee}`}});if(!He.ok)throw new Error("Download failed");const J=await He.blob(),ce=URL.createObjectURL(J),Ne=document.createElement("a");Ne.href=ce,Ne.download=`${t}.md`,Ne.click(),URL.revokeObjectURL(ce)}catch(Ee){console.error("Download error:",Ee)}},be=async(Ee,He)=>{const J=b.findIndex(et=>et.id===Ee);if(He==="up"&&J===0||He==="down"&&J===b.length-1)return;const ce=[...b],Ne=He==="up"?J-1:J+1;[ce[J],ce[Ne]]=[ce[Ne],ce[J]],l(ce),await le(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:ce.map(et=>et.id)})})},oe=async Ee=>{window.confirm("Remove this showcase?")&&(await le(`/api/marketplace/${t}/showcases/${Ee}`,{method:"DELETE"}),l(b.filter(He=>He.id!==Ee)))},Ie=async()=>{try{const Ee=await le("/api/projects");z(Ee||[]);const He={};await Promise.all((Ee||[]).map(async J=>{try{const ce=await le(`/api/iterations/${J.id}`);ce&&ce.length>0&&(He[J.id]=ce)}catch(ce){console.error(`Failed to load iterations for project ${J.id}:`,ce)}})),M(He)}catch(Ee){console.error(Ee)}V(!0),Q(null),R(!0)},Z=async()=>{if(!(!O.project_id||!O.iteration_id||!O.title))try{const Ee=await le(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(O)});await Re(),R(!1),H({project_id:"",iteration_id:"",title:"",description:""})}catch(Ee){console.error(Ee),alert(Ee.message||"Failed to add showcase")}},je=async Ee=>{if(Ee.preventDefault(),U(!1),b.length>=6){alert("Maximum 6 showcases per agent");return}try{const He=JSON.parse(Ee.dataTransfer.getData("application/json"));await le(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(He)}),await Re()}catch(He){console.error("Drop error:",He),alert(He.message||"Failed to add showcase")}},pe=Ee=>{Ee.preventDefault(),Ee.dataTransfer.dropEffect="copy",U(!0)},De=()=>{U(!1)};if(y)return e.jsx("div",{style:{background:de.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{color:de.tm,fontSize:"14px"},children:"Loading..."})});if(!s)return e.jsx("div",{style:{background:de.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",color:de.ts},children:"Agent not found."});const $e=Ee=>Ee.split("-").map(He=>He.charAt(0).toUpperCase()+He.slice(1)).join(" ");return e.jsxs("div",{className:"mp-detail",style:{background:de.bg,minHeight:"calc(100vh - 53px)",color:de.tp,padding:"40px 20px"},children:[e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(mi,{to:"/marketplace",style:{fontSize:"12px",color:de.tm,textDecoration:"none"},children:"Marketplace"}),e.jsx(cr,{size:14,style:{color:de.tm}}),e.jsx("span",{style:{fontSize:"12px",color:de.ts},children:$e(s.name)})]}),e.jsxs("div",{className:"mp-detail-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"40px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",letterSpacing:"-0.02em",margin:0},children:$e(s.name)}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:de.violetM,color:de.violet,border:`1px solid ${de.violet}40`},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:`${de.ts}20`,color:de.ts,border:`1px solid ${de.ts}40`},children:s.model||"unknown"})]}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:de.ts,marginBottom:"24px",maxWidth:"700px"},children:s.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:de.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${de.border}`},children:e.jsx(jn,{size:16,style:{color:de.ts}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:de.tm,textTransform:"uppercase"},children:"Created By"}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:de.tp},children:((Pe=s.creator)==null?void 0:Pe.display_name)||"Platform"})]})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:de.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(Ee=>e.jsx(_n,{size:14,fill:Ee<=(s.rating||0)?de.warning:"none",stroke:Ee<=(s.rating||0)?de.warning:de.tm},Ee))}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:de.tp},children:(s.rating||0).toFixed(1)})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:de.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(bn,{size:14,style:{color:de.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:de.tp},children:s.download_count||0}),e.jsx("span",{style:{fontSize:"12px",color:de.tm},children:"Downloads"})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:F,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"14px",fontWeight:"600",cursor:"pointer",background:de.tp,color:de.bg,border:"none"},children:[e.jsx(bn,{size:16})," Download Agent"]}),Y&&e.jsxs("button",{onClick:()=>g(!f),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:de.surfaceEl,color:de.ts,border:`1px solid ${de.borderS}`},children:[e.jsx(Wi,{size:14})," ",f?"Hide Management":"Manage Showcases"]})]})]}),f&&e.jsxs("div",{style:{background:de.surface,border:`1px solid ${de.violet}40`,borderRadius:"12px",padding:"24px",marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:de.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:de.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),b.length<6&&e.jsxs("button",{onClick:Ie,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:de.tp,color:de.bg,border:"none"},children:[e.jsx(er,{size:14})," Add Showcase"]})]}),e.jsxs("div",{onDrop:je,onDragOver:pe,onDragLeave:De,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:b.length===0?"120px":"auto",border:K?`2px dashed ${de.violet}`:"none",borderRadius:"8px",padding:K?"8px":"0",background:K?`${de.violet}10`:"transparent",transition:"all 0.2s"},children:[b.map((Ee,He)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:de.surfaceEl,borderRadius:"8px",border:`1px solid ${de.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>be(Ee.id,"up"),disabled:He===0,style:{background:"none",border:"none",color:He===0?de.tm:de.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(_0,{size:14})}),e.jsx("button",{onClick:()=>be(Ee.id,"down"),disabled:He===b.length-1,style:{background:"none",border:"none",color:He===b.length-1?de.tm:de.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(b0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:Ee.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:de.tm},children:[Ee.project_name,"  v",Ee.iteration_version]})]}),e.jsxs("button",{onClick:()=>oe(Ee.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${de.danger}20`,color:de.danger,border:"none"},children:[e.jsx(Or,{size:14})," Remove"]})]},Ee.id)),b.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${K?de.violet:de.border}`,borderRadius:"8px",color:K?de.violet:de.tm,background:K?`${de.violet}10`:"transparent",transition:"all 0.2s"},children:K?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations here!"})]})]}),b.length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Showcase Gallery"}),e.jsx("div",{style:{height:"1px",flex:1,background:de.border}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:b.map(Ee=>e.jsx(P6,{showcase:Ee,onClick:p},Ee.id))})]}),c.length>0&&Object.keys(v).length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx($s,{size:18,style:{color:de.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Iteration Browser"}),e.jsx("div",{style:{height:"1px",flex:1,background:de.border}})]}),c.filter(Ee=>v[Ee.id]&&v[Ee.id].length>0).map(Ee=>e.jsx(O6,{iterations:v[Ee.id],projectId:Ee.id,projectName:Ee.name,onSelectIteration:(He,J,ce)=>{p({project_id:J,iteration_id:He.id,title:He.title||`V${He.version}`,project_name:ce,iteration_version:He.version})}},Ee.id))]}),e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{onClick:()=>C(!j),style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"16px"},children:[e.jsx(Sh,{size:18,style:{color:de.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Agent Prompt"}),e.jsx(Sn,{size:18,style:{color:de.tm,transform:j?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),j&&e.jsx("div",{style:{background:"#0a0a0a",border:`1px solid ${de.border}`,borderRadius:"8px",padding:"20px",fontFamily:de.mono,fontSize:"13px",lineHeight:"1.6",color:de.ts,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto"},children:s.full_prompt||"[No prompt content]"})]}),e.jsxs("section",{style:{marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Projects using this Agent"}),e.jsx("div",{style:{height:"1px",flex:1,background:de.border}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:[c.map(Ee=>e.jsxs("div",{onClick:()=>i(`/project/${Ee.id}`),style:{padding:"8px 16px",background:de.surface,border:`1px solid ${de.border}`,borderRadius:"6px",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:He=>He.currentTarget.style.borderColor=de.violet,onMouseLeave:He=>He.currentTarget.style.borderColor=de.border,children:[e.jsx(Wi,{size:14,style:{color:de.tm}}),Ee.name]},Ee.id)),c.length===0&&e.jsx("div",{style:{fontSize:"14px",color:de.tm},children:"No projects recorded yet."})]})]})]}),h&&(()=>{const Ee={desktop:"100%",tablet:"768px",mobile:"390px"},J=[...v[h.project_id]||[]].sort((Je,pt)=>Je.version-pt.version),ce=()=>{fe(!0),setTimeout(()=>fe(!1),800)},Ne=async()=>{try{const Je=`${window.location.origin}/preview/${h.project_id}`;await navigator.clipboard.writeText(Je)}catch{}},et=Je=>{p({...h,iteration_id:Je.id,title:Je.title||`V${Je.version}`,iteration_version:Je.version})};return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,backgroundColor:"#050505",display:"flex",flexDirection:"column",color:de.tp,fontFamily:"Inter, sans-serif"},children:[e.jsx("button",{onClick:()=>{p(null),D("desktop"),we(!1)},style:{position:"absolute",top:"16px",right:"16px",zIndex:1100,background:"rgba(15,15,15,0.85)",backdropFilter:"blur(12px)",border:`1px solid ${de.borderS}`,borderRadius:"10px",width:"36px",height:"36px",cursor:"pointer",color:de.ts,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(St,{size:16})}),e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[I!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${de.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:Ee[I],height:I==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:I==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:I==="desktop"?"0":"12px",overflow:"hidden",border:I==="desktop"?"none":`1px solid ${de.borderS}`},children:e.jsx("iframe",{src:`/api/preview/${h.project_id}/${h.iteration_id}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:W?.5:1,transition:"opacity 0.2s"},title:h.title},`${h.iteration_id}-${W}`)})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:ye?"auto":"calc(100% - 40px)",maxWidth:ye?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${de.borderS}`,borderRadius:"16px",zIndex:1100,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:ye?e.jsxs("button",{onClick:()=>we(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:de.ts},children:[e.jsx(_h,{size:14}),e.jsxs("span",{style:{fontFamily:de.mono,fontSize:"11px",fontWeight:600},children:["v",h.iteration_version||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:de.border}}),e.jsx("span",{style:{fontSize:"10px",color:de.tm},children:h.project_name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:de.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:de.mono,fontWeight:800,fontSize:"14px",color:de.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:de.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:de.tp},children:h.project_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:"rgba(34,197,94,0.1)",border:"1px solid rgba(34,197,94,0.2)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:de.success}}),e.jsx("span",{style:{fontSize:"10px",color:de.success,fontWeight:500},children:"Live"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${de.border}`},children:[{id:"mobile",icon:e.jsx(R0,{size:13})},{id:"tablet",icon:e.jsx(T0,{size:13})},{id:"desktop",icon:e.jsx(C0,{size:13})}].map(Je=>e.jsx("button",{onClick:()=>D(Je.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:I===Je.id?de.surfaceEl:"transparent",color:I===Je.id?de.violet:de.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:Je.icon},Je.id))}),e.jsx("button",{onClick:ce,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${de.border}`,backgroundColor:"transparent",color:de.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k0,{size:14,style:W?{animation:"mpSpin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:`/api/preview/download/${h.project_id}/${h.iteration_id}`,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${de.border}`,color:de.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(bn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:Ne,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:de.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${de.violetG}`},children:[e.jsx(E0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>we(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${de.border}`,backgroundColor:"transparent",color:de.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Sn,{size:14})})]})]}),J.length>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:J.map(Je=>{const pt=h.iteration_id===Je.id;return e.jsxs("button",{onClick:()=>et(Je),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:pt?de.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${pt?de.violet:de.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0,color:pt?de.tp:de.ts},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Je.status==="completed"?de.success:Je.status==="error"?de.danger:de.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:de.mono},children:["v",Je.version]}),Je.title&&e.jsx("span",{style:{fontSize:"11px",color:pt?de.ts:de.tm,maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis"},children:Je.title})]},Je.id)})})]})}),e.jsx("style",{children:"@keyframes mpSpin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})})(),w&&(()=>{const Ee=ee?A.filter(ce=>ce.agent===t):A,He=(ce,Ne)=>{const et=Ne.title||`${ce.name} v${Ne.version}`;H({project_id:ce.id,iteration_id:Ne.id,title:et,description:""}),Q({project:ce,iteration:Ne,title:et})},J=async()=>{!O.project_id||!O.iteration_id||(await Z(),Q(null))};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:de.surface,border:`1px solid ${de.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:de.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{R(!1),Q(null)},style:{background:"none",border:"none",color:de.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:de.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>V(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ee?de.violet:"transparent",color:ee?"#fff":de.ts},children:["This Agent (",c.length,")"]}),e.jsxs("button",{onClick:()=>V(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ee?"transparent":de.violet,color:ee?de.ts:"#fff"},children:["All Projects (",A.length,")"]})]}),Ee.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:de.tm,fontSize:"14px"},children:["No projects found",ee?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Ee.map(ce=>{const Ne=G[ce.id]||[];return Ne.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Wi,{size:14,style:{color:de.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:de.tp},children:ce.name}),e.jsxs("span",{style:{fontSize:"11px",color:de.tm},children:[Ne.length," version",Ne.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:Ne.map(et=>{const Je=(ue==null?void 0:ue.iteration.id)===et.id;return e.jsxs("div",{onClick:()=>He(ce,et),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:Je?`2px solid ${de.violet}`:`1px solid ${de.border}`,background:de.surfaceEl,transition:"all 0.2s",boxShadow:Je?`0 0 20px ${de.violet}40`:"none"},onMouseEnter:pt=>{Je||(pt.currentTarget.style.borderColor=de.violet)},onMouseLeave:pt=>{Je||(pt.currentTarget.style.borderColor=de.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${ce.id}/${et.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${et.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),Je&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:de.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:de.tp,marginBottom:"2px"},children:et.title||`Version ${et.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:de.tm},children:["v",et.version]})]})]},et.id)})})]},ce.id)})}),ue&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:de.surfaceEl,border:`1px solid ${de.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:de.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:O.title,onChange:ce=>H({...O,title:ce.target.value}),style:{width:"100%",background:de.surface,border:`1px solid ${de.border}`,borderRadius:"6px",padding:"10px",color:de.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>Q(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:de.ts,border:`1px solid ${de.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:J,disabled:!O.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:de.violet,color:"#fff",border:"none",opacity:O.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),e.jsx("style",{children:`
        select option { background: ${de.surface}; color: ${de.tp}; }
        @media (max-width: 768px) {
          .mp-detail { padding: 20px 12px !important; }
          .mp-detail-header { flex-direction: column; gap: 16px !important; }
          .mp-detail-header > div:last-child { flex-direction: row; width: 100%; }
          .mp-detail-header > div:last-child button,
          .mp-detail-header > div:last-child a { flex: 1; }
        }
      `})]})}const Me={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},Nn={width:"100%",backgroundColor:Me.bg,border:`1px solid ${Me.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s ease"},F6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#14B8A6","#F97316"];function W6(){const t=Ut(),[i,s]=L.useState([]),[o,u]=L.useState(null),[S,b]=L.useState([]),[l,c]=L.useState([]),[m,v]=L.useState(!0),[d,y]=L.useState(null),[_,j]=L.useState(""),[C,h]=L.useState(""),[p,f]=L.useState("all"),g=qo(),[w,R]=L.useState(!1),[A,z]=L.useState(!1),[E,B]=L.useState(!1),[O,H]=L.useState(null),[K,U]=L.useState(!1),[ee,V]=L.useState(!1),[ue,Q]=L.useState({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),[G,M]=L.useState(""),[I,D]=L.useState([]);L.useEffect(()=>{if(d){const Z=setTimeout(()=>y(null),4e3);return()=>clearTimeout(Z)}},[d]);const W=L.useCallback(async()=>{try{v(!0);const Z=new URLSearchParams;_&&Z.set("search",_),C&&Z.set("category",C);const je=Z.toString(),[pe,De,$e]=await Promise.all([le(`/api/skills${je?`?${je}`:""}`),le("/api/skills/stats"),le("/api/skills/categories")]);s(pe),u(De),b($e)}catch{y("Failed to load skills data")}finally{v(!1)}},[_,C]);L.useEffect(()=>{W()},[W]);const fe=async()=>{try{const Z=await le("/api/agents");c(Z)}catch{y("Failed to load agents list")}},ye=()=>{U(!1),Q({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),R(!0)},we=Z=>{U(!0),H(Z),Q({name:Z.name||"",description:Z.description||"",prompt:Z.prompt||"",category:Z.category||"",icon:Z.icon||"",color:Z.color||"#8B5CF6"}),R(!0)},Re=async Z=>{H(Z),D([]),M(""),await fe();try{const je=await le(`/api/skills/${Z.id}`);D((je.agents||[]).map(pe=>pe.name))}catch{}z(!0)},Y=async Z=>{try{const je=await le(`/api/skills/${Z.id}`);H(je),B(!0)}catch{y("Could not load skill details")}},F=async()=>{if(!ue.name.trim()){y("Skill name is required");return}try{V(!0),K&&O?await le(`/api/skills/${O.id}`,{method:"PUT",body:JSON.stringify(ue)}):await le("/api/skills",{method:"POST",body:JSON.stringify(ue)}),R(!1),W()}catch(Z){y(Z.message||"Save failed")}finally{V(!1)}},be=async Z=>{if(window.confirm("Delete this skill? This will unassign it from all agents."))try{await le(`/api/skills/${Z}`,{method:"DELETE"}),W(),E&&(O==null?void 0:O.id)===Z&&B(!1)}catch(je){y(je.message||"Delete failed")}},oe=async()=>{try{if(await le(`/api/skills/${O.id}/bulk-assign`,{method:"POST",body:JSON.stringify({agent_names:I})}),z(!1),W(),E&&O){const Z=await le(`/api/skills/${O.id}`);H(Z)}}catch(Z){y(Z.message||"Assignment failed")}},Ie=async Z=>{try{await le(`/api/skills/${O.id}/unassign/${Z}`,{method:"DELETE"});const je=await le(`/api/skills/${O.id}`);H(je),W()}catch(je){y(je.message||"Unassign failed")}};return e.jsxs("div",{style:{color:Me.tp},children:[e.jsxs("div",{className:"skills-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"28px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 6px 0",letterSpacing:"-0.02em"},children:"Skills"}),e.jsx("p",{style:{color:Me.ts,fontSize:"13px",margin:0},children:"Create and manage reusable skills for your agents"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>t("/skills/create"),style:{backgroundColor:Me.violetM,color:Me.violet,border:"1px solid rgba(139,92,246,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ht,{size:14})," Create with AI"]}),e.jsxs("button",{onClick:ye,style:{backgroundColor:Me.tp,color:Me.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:14})," New Skill"]})]})]}),e.jsx("div",{className:"skills-stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"24px"},children:[{label:"Total Skills",val:(o==null?void 0:o.total)||0,icon:e.jsx(zs,{size:13})},{label:"Assignments",val:(o==null?void 0:o.totalAssignments)||0,icon:e.jsx(dx,{size:13})},{label:"Unique Agents",val:(o==null?void 0:o.uniqueAgents)||0,icon:e.jsx(Rs,{size:13})},{label:"Categories",val:(S==null?void 0:S.length)||0,icon:e.jsx(WS,{size:13})}].map((Z,je)=>e.jsxs("div",{style:{backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:Me.tm,fontSize:"10px",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:[Z.icon," ",Z.label]}),e.jsx("div",{style:{fontSize:"22px",fontWeight:"700"},children:Z.val})]},je))}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Is,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Me.tm}}),e.jsx("input",{placeholder:"Search skills...",value:_,onChange:Z=>j(Z.target.value),style:{...Nn,paddingLeft:"34px"}})]}),e.jsxs("div",{style:{position:"relative",minWidth:"170px"},children:[e.jsx(MS,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Me.tm,pointerEvents:"none"}}),e.jsxs("select",{value:C,onChange:Z=>h(Z.target.value),style:{...Nn,paddingLeft:"34px",appearance:"none",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"All Categories"}),S.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${Me.border}`,marginBottom:"20px"},children:[{key:"all",label:"All Skills",count:i.length},{key:"mine",label:"My Skills",count:i.filter(Z=>Z.created_by===(g==null?void 0:g.userId)).length},{key:"platform",label:"Platform",count:i.filter(Z=>!Z.created_by||Z.created_by!==(g==null?void 0:g.userId)).length}].map(Z=>e.jsxs("button",{onClick:()=>f(Z.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:p===Z.key?Me.violet:Me.ts,borderBottom:p===Z.key?`2px solid ${Me.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[Z.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:p===Z.key?"rgba(139,92,246,0.2)":"rgba(255,255,255,0.04)",color:p===Z.key?Me.violet:Me.tm},children:Z.count})]},Z.key))}),m?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:Me.tm,fontSize:"13px"},children:"Loading..."}):(()=>{const Z=i.filter(je=>p==="mine"?je.created_by===(g==null?void 0:g.userId):p==="platform"?!je.created_by||je.created_by!==(g==null?void 0:g.userId):!0);return Z.length===0?e.jsxs("div",{style:{border:`1px dashed ${Me.borderS}`,borderRadius:"12px",padding:"60px 20px",textAlign:"center"},children:[e.jsx(zs,{size:32,style:{color:Me.tm,marginBottom:"12px"}}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 6px 0"},children:"No skills found"}),e.jsx("p",{style:{color:Me.tm,fontSize:"12px",margin:"0 0 16px 0"},children:_||C?"Try adjusting your filters.":"Create your first skill to get started."}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[!_&&!C&&e.jsxs("button",{onClick:ye,style:{backgroundColor:Me.violetM,color:Me.violet,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(er,{size:14})," Create Skill"]}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await le("/api/seed/demo",{method:"POST"}),await W()}catch(je){y(je.message||"Failed to load demo data")}},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(Vr,{size:14})," Load Demo Data"]})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px"},children:Z.map(je=>{const pe=!je.created_by||je.created_by===(g==null?void 0:g.userId),De=pe;return e.jsxs("div",{style:{backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",padding:"16px",transition:"all 0.2s",cursor:"pointer",position:"relative"},onMouseEnter:$e=>{$e.currentTarget.style.borderColor=je.color||Me.violet,$e.currentTarget.style.boxShadow=`0 4px 20px ${je.color||Me.violet}15`},onMouseLeave:$e=>{$e.currentTarget.style.borderColor=Me.border,$e.currentTarget.style.boxShadow="none"},onClick:()=>Y(je),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:je.color||Me.violet,flexShrink:0}}),e.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:je.name}),pe?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:Me.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsx("span",{style:{backgroundColor:`${je.color||Me.violet}20`,color:je.color||Me.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",flexShrink:0},children:je.category||"general"})]}),e.jsx("p",{style:{color:Me.ts,fontSize:"12px",lineHeight:"1.5",margin:"0 0 14px 0",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"36px"},children:je.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",color:Me.tm,fontSize:"11px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Rs,{size:11}),e.jsxs("span",{children:[je.agent_count||0," agent",(je.agent_count||0)!==1?"s":""]})]}),je.total_files>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Me.violet},children:[e.jsx(Ls,{size:11}),e.jsxs("span",{children:[je.total_files," file",je.total_files!==1?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px"},onClick:$e=>$e.stopPropagation(),children:[je.total_files>0&&e.jsx("button",{onClick:()=>t(`/skills/${je.id}/edit`),style:{...yl,color:Me.violet},title:"Edit in Editor",children:e.jsx(Ls,{size:13})}),e.jsx("button",{onClick:()=>Re(je),style:yl,title:"Assign to Agents",children:e.jsx(dx,{size:13})}),pe&&e.jsx("button",{onClick:()=>we(je),style:yl,title:"Edit",children:e.jsx(Mu,{size:13})}),De&&e.jsx("button",{onClick:()=>be(je.id),style:{...yl,color:Me.danger},title:"Delete",children:e.jsx(Or,{size:13})})]})]})]},je.id)})})})(),w&&e.jsx("div",{style:Mm,onClick:()=>R(!1),children:e.jsxs("div",{style:{...Bm,width:"500px"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{style:xu,children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:0},children:K?"Edit Skill":"Create New Skill"}),e.jsx("button",{onClick:()=>R(!1),style:yu,children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:To,children:"Name"}),e.jsx("input",{style:Nn,placeholder:"e.g. Code Reviewer",value:ue.name,onChange:Z=>Q({...ue,name:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Me.violet,onBlur:Z=>Z.target.style.borderColor=Me.border})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:To,children:"Category"}),e.jsx("input",{style:Nn,placeholder:"general",value:ue.category,onChange:Z=>Q({...ue,category:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Me.violet,onBlur:Z=>Z.target.style.borderColor=Me.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:To,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",paddingTop:"2px"},children:F6.map(Z=>e.jsx("div",{onClick:()=>Q({...ue,color:Z}),style:{width:"22px",height:"22px",borderRadius:"4px",cursor:"pointer",backgroundColor:Z,border:ue.color===Z?"2px solid #fff":"2px solid transparent",transition:"border-color 0.15s"}},Z))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:To,children:"Description"}),e.jsx("textarea",{style:{...Nn,minHeight:"50px",resize:"vertical"},placeholder:"Briefly describe what this skill does...",value:ue.description,onChange:Z=>Q({...ue,description:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Me.violet,onBlur:Z=>Z.target.style.borderColor=Me.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:To,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...Nn,minHeight:"120px",fontFamily:Me.mono,fontSize:"12px",resize:"vertical"},placeholder:"The actual instructions or prompt snippet for this skill...",value:ue.prompt,onChange:Z=>Q({...ue,prompt:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Me.violet,onBlur:Z=>Z.target.style.borderColor=Me.border})]})]}),e.jsxs("div",{style:Pm,children:[e.jsx("button",{onClick:()=>R(!1),style:ml,children:"Cancel"}),e.jsx("button",{onClick:F,disabled:ee,style:{...Om,opacity:ee?.6:1},children:ee?"Saving...":K?"Save Changes":"Create Skill"})]})]})}),A&&O&&e.jsx("div",{style:Mm,onClick:()=>z(!1),children:e.jsxs("div",{style:{...Bm,width:"420px"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{style:xu,children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 2px 0"},children:"Assign to Agents"}),e.jsx("span",{style:{fontSize:"11px",color:Me.tm},children:O.name})]}),e.jsx("button",{onClick:()=>z(!1),style:yu,children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{padding:"14px"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[e.jsx(Is,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:Me.tm}}),e.jsx("input",{style:{...Nn,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search agents...",value:G,onChange:Z=>M(Z.target.value)})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:`1px solid ${Me.border}`,borderRadius:"6px"},children:l.filter(Z=>Z.name.toLowerCase().includes(G.toLowerCase())).map(Z=>{const je=I.includes(Z.name);return e.jsxs("div",{onClick:()=>{D(pe=>je?pe.filter(De=>De!==Z.name):[...pe,Z.name])},style:{display:"flex",alignItems:"center",gap:"10px",padding:"9px 12px",cursor:"pointer",borderBottom:`1px solid ${Me.border}`,backgroundColor:je?Me.violetG:"transparent",transition:"background-color 0.15s"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",border:`1.5px solid ${je?Me.violet:Me.tm}`,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:je?Me.violet:"transparent",transition:"all 0.15s",flexShrink:0},children:je&&e.jsx(sr,{size:10,color:"#fff"})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"500"},children:Z.name}),Z.category&&e.jsx("div",{style:{fontSize:"10px",color:Me.tm},children:Z.category})]})]},Z.name)})}),e.jsxs("div",{style:{fontSize:"11px",color:Me.tm,marginTop:"8px"},children:[I.length," agent",I.length!==1?"s":""," selected"]})]}),e.jsxs("div",{style:Pm,children:[e.jsx("button",{onClick:()=>z(!1),style:ml,children:"Cancel"}),e.jsxs("button",{onClick:oe,disabled:I.length===0,style:{...Om,opacity:I.length===0?.5:1},children:["Assign ",I.length," Agent",I.length!==1?"s":""]})]})]})}),E&&O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99},onClick:()=>B(!1)}),e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"450px",height:"100vh",backgroundColor:Me.surface,borderLeft:`1px solid ${Me.border}`,zIndex:100,display:"flex",flexDirection:"column",boxShadow:"-10px 0 30px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{...xu,borderBottom:`1px solid ${Me.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:O.color||Me.violet}}),e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:O.name})]}),e.jsx("button",{onClick:()=>B(!1),style:yu,children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",flex:1,overflowY:"auto"},children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:e.jsx("span",{style:{backgroundColor:`${O.color||Me.violet}20`,color:O.color||Me.violet,padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:O.category||"general"})}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:mu,children:"Description"}),e.jsx("p",{style:{color:Me.ts,fontSize:"13px",lineHeight:"1.6",margin:0},children:O.description||"No description."})]}),O.prompt&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:mu,children:"Prompt / Instructions"}),e.jsx("div",{style:{backgroundColor:Me.bg,border:`1px solid ${Me.border}`,borderRadius:"6px",padding:"12px",fontFamily:Me.mono,fontSize:"11px",color:Me.ts,whiteSpace:"pre-wrap",lineHeight:"1.6",maxHeight:"250px",overflowY:"auto"},children:O.prompt})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("h3",{style:{...mu,margin:0},children:["Assigned Agents (",(O.agents||[]).length,")"]}),e.jsxs("button",{onClick:()=>Re(O),style:{background:"none",border:"none",color:Me.violet,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",fontWeight:"500"},children:[e.jsx(er,{size:12})," Add"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(O.agents||[]).length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:Me.tm,fontSize:"12px",border:`1px dashed ${Me.border}`,borderRadius:"6px"},children:"No agents assigned yet"}):(O.agents||[]).map(Z=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:Me.surfaceEl,borderRadius:"6px",border:`1px solid ${Me.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Rs,{size:12,style:{color:Me.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:Z.name}),Z.category&&e.jsx("span",{style:{fontSize:"9px",color:Me.tm,padding:"1px 5px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"100px"},children:Z.category})]}),e.jsx("button",{onClick:()=>Ie(Z.name),style:{background:"none",border:"none",color:Me.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Unassign",children:e.jsx(St,{size:13})})]},Z.name))})]})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${Me.border}`,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{B(!1),t(`/skills/${O.id}/edit`)},style:{width:"100%",padding:"8px",borderRadius:"4px",backgroundColor:Me.violetM,color:Me.violet,border:"1px solid rgba(139,92,246,0.3)",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ht,{size:13})," Open in Editor"]}),(!O.created_by||O.created_by===(g==null?void 0:g.userId))&&e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:()=>we(O),style:{...ml,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Mu,{size:13})," Edit"]}),e.jsxs("button",{onClick:()=>be(O.id),style:{...ml,color:Me.danger,borderColor:`${Me.danger}33`,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Or,{size:13})," Delete"]})]})]})]})]}),d&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:Me.danger,color:"#fff",padding:"10px 20px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.4)",zIndex:200,fontSize:"13px"},children:[e.jsx(Ei,{size:16}),e.jsx("span",{children:d}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex"},children:e.jsx(St,{size:14})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .skills-stats-grid { grid-template-columns: repeat(2, 1fr) !important; }
          .skills-header { flex-direction: column !important; align-items: flex-start !important; gap: 12px !important; }
          .skills-search-row { flex-direction: column !important; }
          .skills-search-row > div:last-child { min-width: 0 !important; width: 100% !important; }
          .skills-grid { grid-template-columns: 1fr !important; }
          .skills-modal-content { width: 95vw !important; max-width: 95vw !important; }
          .skills-drawer {
            width: 100vw !important;
            border-left: none !important;
          }
        }
        @media (max-width: 480px) {
          .skills-stats-grid { grid-template-columns: 1fr !important; }
        }
      `})]})}const Mm={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:110},Bm={backgroundColor:Me.surface,border:`1px solid ${Me.border}`,borderRadius:"8px",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",overflow:"hidden"},xu={padding:"14px 20px",borderBottom:`1px solid ${Me.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},Pm={padding:"12px 20px",borderTop:`1px solid ${Me.border}`,display:"flex",justifyContent:"flex-end",gap:"10px",backgroundColor:Me.surfaceEl},Om={backgroundColor:Me.tp,color:Me.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},ml={backgroundColor:Me.surfaceEl,color:Me.ts,border:`1px solid ${Me.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},yl={background:"none",border:"none",color:Me.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.15s"},To={display:"block",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",color:Me.tm,marginBottom:"6px",letterSpacing:"0.05em"},mu={fontSize:"11px",fontWeight:"600",textTransform:"uppercase",color:Me.tm,letterSpacing:"0.08em",marginBottom:"10px"},yu={background:"none",border:"none",color:Me.tm,cursor:"pointer",display:"flex"},ve={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},vl={width:"100%",backgroundColor:ve.bg,border:`1px solid ${ve.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function $m(t){if(!t||!t.trim())return[{id:crypto.randomUUID(),type:"paragraph",content:""}];const i=t.split(`
`),s=[];let o=0;for(;o<i.length;){const u=i[o];if(!u.trim()){o++;continue}if(u.startsWith("```")){const b=u.slice(3).trim(),l=[];for(o++;o<i.length&&!i[o].startsWith("```");)l.push(i[o]),o++;o++,s.push({id:crypto.randomUUID(),type:"code",content:l.join(`
`),lang:b});continue}if(u.startsWith("### ")){s.push({id:crypto.randomUUID(),type:"heading3",content:u.slice(4)}),o++;continue}if(u.startsWith("## ")){s.push({id:crypto.randomUUID(),type:"heading2",content:u.slice(3)}),o++;continue}if(u.startsWith("# ")){s.push({id:crypto.randomUUID(),type:"heading1",content:u.slice(2)}),o++;continue}if(u.match(/^---+\s*$/)){s.push({id:crypto.randomUUID(),type:"divider",content:""}),o++;continue}if(u.startsWith("> ")){const b=[];for(;o<i.length&&i[o].startsWith("> ");)b.push(i[o].slice(2)),o++;s.push({id:crypto.randomUUID(),type:"callout",content:b.join(`
`)});continue}if(u.match(/^[-*] /)){const b=[];for(;o<i.length&&i[o].match(/^[-*] /);)b.push(i[o].replace(/^[-*] /,"")),o++;s.push({id:crypto.randomUUID(),type:"list",content:b.join(`
`)});continue}if(u.match(/^\d+\. /)){const b=[];for(;o<i.length&&i[o].match(/^\d+\. /);)b.push(i[o].replace(/^\d+\. /,"")),o++;s.push({id:crypto.randomUUID(),type:"numbered",content:b.join(`
`)});continue}if(u.startsWith("|")){const b=[];for(;o<i.length&&i[o].startsWith("|");)b.push(i[o]),o++;s.push({id:crypto.randomUUID(),type:"table",content:b.join(`
`)});continue}const S=[];for(;o<i.length&&i[o].trim()&&!i[o].startsWith("#")&&!i[o].startsWith("```")&&!i[o].startsWith("> ")&&!i[o].startsWith("---")&&!i[o].startsWith("|")&&!i[o].match(/^[-*] /)&&!i[o].match(/^\d+\. /);)S.push(i[o]),o++;S.length>0&&s.push({id:crypto.randomUUID(),type:"paragraph",content:S.join(`
`)})}return s.length>0?s:[{id:crypto.randomUUID(),type:"paragraph",content:""}]}function N6(t){return t.map(i=>{switch(i.type){case"heading1":return`# ${i.content}`;case"heading2":return`## ${i.content}`;case"heading3":return`### ${i.content}`;case"code":return`\`\`\`${i.lang||""}
${i.content}
\`\`\``;case"list":return i.content.split(`
`).map(s=>`- ${s}`).join(`
`);case"numbered":return i.content.split(`
`).map((s,o)=>`${o+1}. ${s}`).join(`
`);case"callout":return i.content.split(`
`).map(s=>`> ${s}`).join(`
`);case"table":return i.content;case"divider":return"---";default:return i.content}}).join(`

`)}function y1({item:t,depth:i=0,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b}){const l=t.type==="directory",c=s===t.path,m=u.includes(t.path);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"5px 10px",paddingLeft:`${12+i*16}px`,fontSize:"12px",cursor:"pointer",borderRadius:"4px",margin:"1px 6px",color:c?ve.violet:ve.ts,backgroundColor:c?ve.violetG:"transparent",transition:"background 0.1s"},onClick:()=>l?S(t.path):o(t.path),onMouseEnter:v=>{c||(v.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)")},onMouseLeave:v=>{c||(v.currentTarget.style.backgroundColor="transparent")},children:[l?m?e.jsx(Sn,{size:12,style:{flexShrink:0}}):e.jsx(cr,{size:12,style:{flexShrink:0}}):null,l?e.jsx(IS,{size:13,style:{flexShrink:0,color:ve.tm}}):e.jsx(RS,{size:13,style:{flexShrink:0,color:ve.tm}}),e.jsx("span",{style:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name})]}),l&&m&&t.children&&t.children.map((v,d)=>e.jsx(y1,{item:v,depth:i+1,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b},v.path||d))]})}const H6=[{id:"paragraph",label:"Text",icon:Lo},{id:"heading1",label:"Heading 1",icon:Lo},{id:"heading2",label:"Heading 2",icon:Lo},{id:"heading3",label:"Heading 3",icon:Lo},{id:"code",label:"Code Block",icon:Sh},{id:"list",label:"Bullet List",icon:Du},{id:"numbered",label:"Numbered List",icon:Du},{id:"table",label:"Table",icon:Ww},{id:"callout",label:"Callout",icon:Ei},{id:"divider",label:"Divider",icon:ow}];function Fm(){const{id:t}=Jn(),i=Ut(),[s]=j_(),o=s.get("agent"),u=!t,[S,b]=L.useState(null),[l,c]=L.useState(t||null),[m,v]=L.useState([]),[d,y]=L.useState(null),[_,j]=L.useState([]),[C,h]=L.useState(null),[p,f]=L.useState({visible:!1,x:0,y:0,blockId:null}),[g,w]=L.useState(""),[R,A]=L.useState(null),[z,E]=L.useState(u),[B,O]=L.useState([]),[H,K]=L.useState(!0),[U,ee]=L.useState("chat"),[V,ue]=L.useState([]),[Q,G]=L.useState(""),[M,I]=L.useState(!1),[D,W]=L.useState([]),[fe,ye]=L.useState(!1),[we,Re]=L.useState(null),[Y,F]=L.useState(!1),[be,oe]=L.useState(null),[Ie,Z]=L.useState(""),[je,pe]=L.useState(!1),[De,$e]=L.useState(""),[Pe,Ee]=L.useState(!1),[He,J]=L.useState(!1),[ce,Ne]=L.useState(!1),[et,Je]=L.useState(""),[pt,Gt]=L.useState(!1),[Ct,kt]=L.useState(null),[Lt,bt]=L.useState(!1),It=L.useRef(null),gt=L.useRef(null);L.useEffect(()=>{if(be){const P=setTimeout(()=>oe(null),4e3);return()=>clearTimeout(P)}},[be]),L.useEffect(()=>{t?Rr(t):pr()},[t]),L.useEffect(()=>{var P;(P=gt.current)==null||P.scrollIntoView({behavior:"smooth"})},[V]);const Rr=async P=>{try{const re=await le(`/api/skills/${P}`);b(re),c(P);let ie=(await le(`/api/skills/${P}/files`)).tree||[];if(!ie||ie.length===0)try{ie=(await le(`/api/skills/${P}/init`,{method:"POST",body:JSON.stringify({template:"blank"})})).tree||[]}catch(Ve){console.warn("Auto-init failed:",Ve)}v(ie),W(ie.filter(Ve=>Ve.type==="directory").map(Ve=>Ve.path)),re.entry_point&&qr(ie).includes(re.entry_point)&&fr(P,re.entry_point),await ii(P,re.name)}catch(re){oe("Failed to load skill"),console.error(re)}},pr=async()=>{try{const P=await le("/api/skill-creator/templates");O(P.templates||[])}catch(P){console.error(P)}},ii=async(P,re)=>{var Se;try{const ie=await le("/api/skill-creator/conversations",{method:"POST",body:JSON.stringify({name:re||"New Skill",skillId:P})});Re((Se=ie.conversation)==null?void 0:Se.id)}catch(ie){console.error(ie)}},fr=async(P,re)=>{Y&&d&&await Tr(P);try{const Se=await le(`/api/skills/${P}/files/${re}`);y(re),j($m(Se.content||"")),h(null),F(!1),w("")}catch(Se){oe("Failed to open file"),console.error(Se)}},Tr=async P=>{const re=P||l;if(!(!d||!re)){ye(!0);try{const Se=N6(_),ie=await le(`/api/skills/${re}/files/${d}`,{method:"PUT",body:JSON.stringify({content:Se})});v(ie.tree||m),F(!1)}catch{oe("Failed to save file")}finally{ye(!1)}}},gr=async P=>{try{const re=Date.now().toString(36).slice(-4),ie=`${P==="blank"?"New Skill":P.replace(/-/g," ").replace(/\b\w/g,ot=>ot.toUpperCase())} ${re}`,Ve=(await le("/api/skills",{method:"POST",body:JSON.stringify({name:ie,description:"",category:"general"})})).id;if(await le(`/api/skills/${Ve}/init`,{method:"POST",body:JSON.stringify({template:P})}),o)try{await le(`/api/skills/${Ve}/assign/${o}`,{method:"POST"})}catch(ot){console.error("Auto-assign failed:",ot)}E(!1),i(`/skills/${Ve}/edit${o?`?agent=${o}`:""}`,{replace:!0})}catch(re){oe(re.message||"Failed to create skill")}},ae=P=>{W(re=>re.includes(P)?re.filter(Se=>Se!==P):[...re,P])},We=async()=>{if(!(!Ie.trim()||!l))try{const P=await le(`/api/skills/${l}/files/${Ie.trim()}`,{method:"PUT",body:JSON.stringify({content:""})});v(P.tree||m),pe(!1),Z(""),fr(l,Ie.trim())}catch{oe("Failed to create file")}},Ge=async()=>{if(!(!De.trim()||!l))try{const P=await le(`/api/skills/${l}/dirs`,{method:"POST",body:JSON.stringify({path:De.trim()})});v(P.tree||m),Ee(!1),$e(""),W(re=>[...re,De.trim()])}catch{oe("Failed to create folder")}},ut=async P=>{if(l)try{const re=await le(`/api/skills/${l}/files/${P}`,{method:"DELETE"});v(re.tree||m),d===P&&(y(null),j([]))}catch{oe("Failed to delete file")}},_t=(P,re)=>{j(Se=>Se.map(ie=>ie.id===P?{...ie,content:re}:ie)),F(!0),w(""),A(null),Kr(P,re)},Yt=(P,re)=>{j(Se=>Se.map(ie=>ie.id===P?{...ie,type:re}:ie)),f({visible:!1,x:0,y:0,blockId:null}),F(!0)},mt=(P,re="paragraph")=>{const Se={id:crypto.randomUUID(),type:re,content:""};if(!P)j(ie=>[...ie,Se]);else{const ie=_.findIndex(Ve=>Ve.id===P),Oe=[..._];Oe.splice(ie+1,0,Se),j(Oe)}h(Se.id),F(!0)},Xt=P=>{_.length<=1||(j(re=>re.filter(Se=>Se.id!==P)),h(null),F(!0))},$r=(P,re)=>{const Se=_.find(ie=>ie.id===re);if(P.key==="/"&&Se&&Se.content===""){P.preventDefault();const ie=P.target.getBoundingClientRect();f({visible:!0,x:ie.left,y:ie.bottom+4,blockId:re});return}if(P.key==="Tab"&&g&&R===re){P.preventDefault(),_t(re,Se.content+g),w(""),A(null);return}if(P.key==="Escape"){w(""),A(null),f({...p,visible:!1}),h(null);return}if(P.key==="Enter"&&!P.shiftKey&&(Se==null?void 0:Se.type)!=="code"&&(Se==null?void 0:Se.type)!=="table"){P.preventDefault(),mt(re);return}P.key==="Backspace"&&(Se==null?void 0:Se.content)===""&&_.length>1&&(P.preventDefault(),Xt(re))},Kr=L.useCallback((P,re)=>{!re||re.length<10||!we||(clearTimeout(It.current),It.current=setTimeout(async()=>{try{const Se=_.findIndex(Ve=>Ve.id===P),ie=_.slice(Math.max(0,Se-5),Se).map(Ve=>Ve.content),Oe=await le(`/api/skill-creator/conversations/${we}/complete`,{method:"POST",body:JSON.stringify({fileContext:d,blocksBefore:ie,currentBlock:re,cursorPosition:re.length,skillContext:{name:S==null?void 0:S.name,files:qr(m)}})});Oe.completion&&(w(Oe.completion),A(P))}catch{}},2e3))},[_,we,d,S,m]),ni=async()=>{if(!Q.trim()||!we)return;const P=Q.trim();G(""),ue(re=>[...re,{role:"user",content:P}]),I(!0);try{const re=await le(`/api/skill-creator/conversations/${we}/messages`,{method:"POST",body:JSON.stringify({message:P,fileContext:d})});re.message&&ue(Se=>[...Se,{role:"assistant",content:re.message.content}])}catch(re){ue(Se=>[...Se,{role:"assistant",content:"Error: "+(re.message||"Failed to get response")}])}finally{I(!1)}},Ar=async()=>{if(!(!we||!d)){J(!0);try{const P=await le(`/api/skill-creator/conversations/${we}/generate-file`,{method:"POST",body:JSON.stringify({filePath:d})});P.content&&(j($m(P.content)),F(!0),ue(re=>[...re,{role:"assistant",content:`Generated content for ${d} (${P.content.length} chars). Review it in the editor and click Save when ready.`}]))}catch(P){oe(P.message||"Generate failed")}finally{J(!1)}}},Fr=async()=>{if(we){J(!0);try{const P=await le(`/api/skill-creator/conversations/${we}/generate-structure`,{method:"POST",body:JSON.stringify({})});if(P.tree){v(P.tree);const re=[],Se=ie=>{for(const Oe of ie)Oe.type==="directory"&&(re.push(Oe.path),Oe.children&&Se(Oe.children))};Se(P.tree),W(re),l&&fr(l,"SKILL.md"),ue(ie=>[...ie,{role:"assistant",content:`Generated ${P.files} files (${P.totalFiles} total). Check the file tree on the left  all files have been created with detailed content. Click any file to view/edit it.`}])}}catch(P){oe(P.message||"Generate all failed  try describing your skill in the chat first")}finally{J(!1)}}},si=()=>{Je((S==null?void 0:S.name)||""),Ne(!0)},Ui=async()=>{const P=et.trim();if(!P||!l||P===(S==null?void 0:S.name)){Ne(!1);return}Gt(!0);try{const re=await le(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:P})});b(Se=>({...Se,...re})),Ne(!1)}catch(re){oe(re.message||"Failed to rename skill")}finally{Gt(!1)}},xr=async(P="all")=>{if(we){bt(!0);try{const re=await le(`/api/skill-creator/conversations/${we}/suggestions`,{method:"POST",body:JSON.stringify({type:P})});kt(re.suggestions)}catch(re){oe(re.message||"Failed to load suggestions")}finally{bt(!1)}}},mr=async P=>{if(l){Gt(!0);try{const re=await le(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:P})});b(Se=>({...Se,...re}))}catch(re){oe(re.message||"Failed to apply name")}finally{Gt(!1)}}};function qr(P){const re=[];function Se(ie){for(const Oe of ie)re.push(Oe.path||Oe.name),Oe.children&&Se(Oe.children)}return Se(P||[]),re}return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 56px)",backgroundColor:ve.bg,color:ve.tp,overflow:"hidden"},children:[o&&e.jsxs("div",{style:{padding:"8px 20px",display:"flex",alignItems:"center",gap:"8px",background:"linear-gradient(90deg, rgba(6,182,212,0.12) 0%, rgba(139,92,246,0.08) 100%)",borderBottom:"1px solid rgba(6,182,212,0.2)",fontSize:"12px",flexShrink:0},children:[e.jsx(Cl,{size:13,style:{color:"#06b6d4"}}),e.jsx("span",{style:{color:ve.ts},children:"This skill will be auto-linked to agent"}),e.jsx("span",{style:{fontWeight:600,color:"#06b6d4",padding:"1px 8px",borderRadius:"100px",background:"rgba(6,182,212,0.15)",fontSize:"11px"},children:o}),e.jsx("button",{onClick:()=>i(`/agents/${o}`),style:{marginLeft:"auto",background:"none",border:"none",color:ve.tm,cursor:"pointer",fontSize:"11px",textDecoration:"underline"},children:"Back to agent"})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"240px",borderRight:`1px solid ${ve.border}`,display:"flex",flexDirection:"column",backgroundColor:ve.surface,flexShrink:0},children:[e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:0},children:[e.jsx("button",{onClick:()=>i("/skills"),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(vh,{size:14})}),ce?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0},children:[e.jsx("input",{autoFocus:!0,value:et,onChange:P=>Je(P.target.value),onKeyDown:P=>{P.key==="Enter"&&Ui(),P.key==="Escape"&&Ne(!1)},style:{...vl,padding:"4px 8px",fontSize:"12px",fontWeight:600},disabled:pt}),e.jsx("button",{onClick:Ui,disabled:pt,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(sr,{size:13})}),e.jsx("button",{onClick:()=>Ne(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(St,{size:13})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0,cursor:"pointer"},onClick:si,title:"Click to rename",children:[e.jsx("span",{style:{fontWeight:600,fontSize:"13px",letterSpacing:"-0.01em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(S==null?void 0:S.name)||"New Skill"}),e.jsx(Gd,{size:10,style:{color:ve.tm,flexShrink:0,opacity:.5}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>pe(!0),style:{background:"none",border:"none",color:ve.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New File",children:e.jsx(wS,{size:14})}),e.jsx("button",{onClick:()=>Ee(!0),style:{background:"none",border:"none",color:ve.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New Folder",children:e.jsx(AS,{size:14})})]})]}),je&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:Ie,onChange:P=>Z(P.target.value),placeholder:"path/file.md",onKeyDown:P=>P.key==="Enter"&&We(),style:{...vl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:We,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex"},children:e.jsx(sr,{size:14})}),e.jsx("button",{onClick:()=>pe(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:14})})]}),Pe&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:De,onChange:P=>$e(P.target.value),placeholder:"folder-name",onKeyDown:P=>P.key==="Enter"&&Ge(),style:{...vl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:Ge,style:{background:"none",border:"none",color:ve.success,cursor:"pointer",display:"flex"},children:e.jsx(sr,{size:14})}),e.jsx("button",{onClick:()=>Ee(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:14})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",paddingTop:"8px"},children:m.length===0?e.jsx("div",{style:{padding:"24px 16px",textAlign:"center",color:ve.tm,fontSize:"11px"},children:"No files yet. Use a template or create a file."}):m.map((P,re)=>e.jsx(y1,{item:P,currentFilePath:d,onOpenFile:Se=>fr(l,Se),expandedFolders:D,onToggleFolder:ae,onDeleteFile:ut},P.path||re))}),e.jsx("div",{style:{padding:"10px",borderTop:`1px solid ${ve.border}`},children:e.jsxs("button",{onClick:()=>E(!0),style:{width:"100%",padding:"7px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ht,{size:12})," From Template"]})})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 20px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:ve.bg,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:ve.ts},children:[e.jsx(Ls,{size:12,style:{color:ve.tm}}),e.jsx("span",{style:{color:ve.tm},children:(S==null?void 0:S.name)||"Skill"}),d&&e.jsxs(e.Fragment,{children:[e.jsx(cr,{size:10,style:{color:ve.tm}}),e.jsx("span",{style:{color:ve.tp,fontWeight:500},children:d})]}),Y&&e.jsx("span",{style:{fontSize:"10px",color:ve.warning,marginLeft:"6px"},children:"unsaved"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>Tr(),disabled:fe||!Y,style:{padding:"5px 14px",borderRadius:"4px",backgroundColor:Y?ve.tp:ve.surfaceEl,color:Y?ve.bg:ve.tm,border:"none",fontSize:"11px",fontWeight:600,cursor:Y?"pointer":"default",display:"flex",alignItems:"center",gap:"5px",opacity:Y?1:.5},children:[e.jsx(Gl,{size:12})," ",fe?"Saving...":"Save"]}),e.jsx("button",{onClick:()=>K(!H),style:{background:H?ve.violetG:ve.surfaceEl,border:`1px solid ${H?ve.violet:ve.border}`,color:H?ve.violet:ve.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex"},children:e.jsx(hw,{size:14})})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"40px 0"},children:d?e.jsx("div",{style:{maxWidth:"760px",margin:"0 auto",padding:"0 40px"},children:_.map((P,re)=>e.jsxs("div",{style:{position:"relative",marginBottom:"2px",group:!0},onMouseEnter:Se=>{const ie=Se.currentTarget.querySelector(".add-btn");ie&&(ie.style.opacity="1")},onMouseLeave:Se=>{const ie=Se.currentTarget.querySelector(".add-btn");ie&&(ie.style.opacity="0")},children:[C===P.id?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{autoFocus:!0,value:P.content,onChange:Se=>_t(P.id,Se.target.value),onKeyDown:Se=>$r(Se,P.id),style:{width:"100%",backgroundColor:"rgba(255,255,255,0.02)",border:`1px solid ${ve.border}`,borderRadius:"4px",color:ve.tp,outline:"none",boxSizing:"border-box",resize:"none",padding:"8px 12px",fontSize:P.type==="heading1"?"24px":P.type==="heading2"?"18px":P.type==="heading3"?"15px":"14px",fontWeight:P.type.startsWith("heading")?600:400,fontFamily:P.type==="code"||P.type==="table"?ve.mono:"inherit",lineHeight:"1.6",minHeight:P.type==="code"?"100px":"36px"},rows:Math.max(1,P.content.split(`
`).length)}),g&&R===P.id&&e.jsxs("div",{style:{position:"absolute",bottom:"-20px",left:"12px",fontSize:"11px",color:ve.tm,fontStyle:"italic"},children:[e.jsx("span",{style:{opacity:.6},children:"Tab"})," ",g.slice(0,60),g.length>60?"...":""]})]}):e.jsxs("div",{onClick:()=>h(P.id),style:{padding:"4px 12px",borderRadius:"4px",cursor:"text",minHeight:"24px",border:"1px solid transparent",transition:"background 0.1s"},onMouseEnter:Se=>Se.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:Se=>Se.currentTarget.style.backgroundColor="transparent",children:[P.type==="heading1"&&e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:P.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 1"})}),P.type==="heading2"&&e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,letterSpacing:"-0.01em"},children:P.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 2"})}),P.type==="heading3"&&e.jsx("h3",{style:{margin:0,fontSize:"15px",fontWeight:600},children:P.content||e.jsx("span",{style:{color:ve.tm},children:"Heading 3"})}),P.type==="paragraph"&&e.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.7",color:P.content?ve.tp:ve.tm},children:P.content||'Type "/" for commands...'}),P.type==="code"&&e.jsx("pre",{style:{margin:0,padding:"12px",backgroundColor:ve.surface,borderRadius:"6px",fontSize:"12px",fontFamily:ve.mono,lineHeight:"1.6",border:`1px solid ${ve.border}`,overflow:"auto"},children:e.jsx("code",{children:P.content||"// code..."})}),P.type==="list"&&e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(P.content||"").split(`
`).map((Se,ie)=>e.jsx("li",{children:Se},ie))}),P.type==="numbered"&&e.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(P.content||"").split(`
`).map((Se,ie)=>e.jsx("li",{children:Se},ie))}),P.type==="table"&&e.jsx("pre",{style:{margin:0,fontSize:"12px",fontFamily:ve.mono,lineHeight:"1.5",color:ve.ts},children:P.content||"| col1 | col2 |"}),P.type==="callout"&&e.jsx("div",{style:{padding:"10px 14px",borderLeft:`3px solid ${ve.violet}`,backgroundColor:ve.violetG,borderRadius:"0 6px 6px 0",fontSize:"13px",lineHeight:"1.6"},children:P.content||"Note..."}),P.type==="divider"&&e.jsx("hr",{style:{border:"none",borderTop:`1px solid ${ve.border}`,margin:"12px 0"}})]}),e.jsx("div",{className:"add-btn",style:{position:"absolute",left:"-28px",top:"50%",transform:"translateY(-50%)",opacity:0,transition:"opacity 0.15s"},children:e.jsx("button",{onClick:()=>mt(P.id),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(er,{size:14})})})]},P.id))}):e.jsxs("div",{style:{textAlign:"center",marginTop:"120px",color:ve.tm},children:[e.jsx(Il,{size:36,style:{marginBottom:"12px",opacity:.15}}),e.jsx("div",{style:{fontSize:"13px",marginBottom:"4px"},children:"Select a file from the sidebar"}),e.jsx("div",{style:{fontSize:"11px",color:ve.tm},children:"or create a new one to start editing"})]})})]}),H&&e.jsxs("div",{style:{width:"320px",borderLeft:`1px solid ${ve.border}`,backgroundColor:ve.surface,display:"flex",flexDirection:"column",flexShrink:0},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ve.border}`,display:"flex",gap:"12px"},children:["chat","suggest","complete"].map(P=>e.jsx("button",{onClick:()=>{ee(P),P==="suggest"&&!Ct&&!Lt&&xr()},style:{background:"none",border:"none",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:U===P?ve.tp:ve.tm,cursor:"pointer",paddingBottom:"4px",borderBottom:U===P?`2px solid ${ve.violet}`:"2px solid transparent"},children:P==="chat"?"AI Chat":P==="suggest"?"Suggestions":"Autocomplete"},P))}),U==="suggest"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:Lt?e.jsxs("div",{style:{padding:"40px 12px",textAlign:"center"},children:[e.jsx(Fi,{size:20,style:{color:ve.violet,marginBottom:"10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts},children:"Analyzing your skill..."})]}):Ct?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{onClick:()=>{kt(null),xr()},style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",fontSize:"10px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Fi,{size:10})," Refresh"]})}),Ct.names&&Ct.names.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Gd,{size:10})," Name Suggestions"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Ct.names.map((P,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:ve.tp,marginBottom:"2px"},children:P.name}),e.jsx("div",{style:{fontSize:"10px",color:ve.tm,lineHeight:"1.4"},children:P.reason})]}),e.jsxs("button",{onClick:()=>mr(P.name),disabled:pt,style:{background:"none",border:`1px solid ${ve.border}`,borderRadius:"4px",color:ve.violet,cursor:"pointer",padding:"3px 8px",fontSize:"10px",fontWeight:600,flexShrink:0,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Vn,{size:9})," Apply"]})]},re))})]}),Ct.improvements&&Ct.improvements.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Kd,{size:10})," Content Improvements"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Ct.improvements.map((P,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ve.tp},children:P.title}),e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:P.priority==="high"?"#ef4444":P.priority==="medium"?"#f59e0b":"#22c55e",backgroundColor:P.priority==="high"?"rgba(239,68,68,0.12)":P.priority==="medium"?"rgba(245,158,11,0.12)":"rgba(34,197,94,0.12)"},children:P.priority})]}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.5"},children:P.description}),P.target_file&&e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ls,{size:9})," ",P.target_file]})]},re))})]}),Ct.structure&&Ct.structure.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(nx,{size:10})," Structure"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Ct.structure.map((P,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:ve.violet,backgroundColor:ve.violetG},children:P.action}),e.jsx("span",{style:{fontSize:"11px",color:ve.tp,fontWeight:500,fontFamily:ve.mono},children:P.target})]}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.5"},children:P.suggestion}),P.description&&e.jsx("div",{style:{fontSize:"10px",color:ve.tm,marginTop:"2px",lineHeight:"1.4"},children:P.description})]},re))})]})]}):e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Kd,{size:20,style:{color:ve.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts,marginBottom:"14px"},children:"Get AI-powered suggestions to improve your skill"}),e.jsxs("button",{onClick:()=>xr(),disabled:!we,style:{padding:"8px 16px",borderRadius:"6px",backgroundColor:ve.violet,border:"none",color:"#fff",fontSize:"12px",fontWeight:600,cursor:we?"pointer":"default",display:"inline-flex",alignItems:"center",gap:"6px",opacity:we?1:.4},children:[e.jsx(Vr,{size:12})," Analyze Skill"]})]})}),e.jsx("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ve.border}`},children:e.jsx("div",{style:{display:"flex",gap:"6px"},children:[{label:"Names",type:"names",icon:Gd},{label:"Content",type:"improvements",icon:Kd},{label:"Structure",type:"structure",icon:nx}].map(P=>e.jsxs("button",{onClick:()=>xr(P.type),disabled:Lt||!we,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!we||Lt?.4:1},children:[e.jsx(P.icon,{size:10})," ",P.label]},P.type))})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:V.length===0?e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Ht,{size:20,style:{color:ve.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ve.ts,marginBottom:"14px"},children:"Ask AI to help write skill content"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[{label:"Generate This File",action:Ar,icon:Cl},{label:"Generate All Files",action:Fr,icon:Ht}].map(P=>e.jsxs("button",{onClick:P.action,disabled:He,style:{background:ve.surfaceEl,border:`1px solid ${ve.border}`,padding:"8px 10px",borderRadius:"6px",color:ve.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:He?.5:1},children:[e.jsx(P.icon,{size:12})," ",He?"Generating...":P.label]},P.label))})]}):e.jsxs(e.Fragment,{children:[V.map((P,re)=>e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"9px",color:ve.tm,marginBottom:"3px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:P.role}),e.jsx("div",{style:{padding:"8px 10px",borderRadius:"6px",fontSize:"12px",lineHeight:"1.6",backgroundColor:P.role==="user"?ve.violetG:ve.surfaceEl,border:`1px solid ${P.role==="user"?"rgba(139,92,246,0.15)":ve.border}`,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:P.content})]},re)),M&&e.jsx("div",{style:{fontSize:"11px",color:ve.tm,padding:"8px",fontStyle:"italic"},children:"Thinking..."}),e.jsx("div",{ref:gt})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ve.border}`},children:[e.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[e.jsxs("button",{onClick:Ar,disabled:He||!d,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!d||He?.4:1},children:[e.jsx(Cl,{size:10})," Generate File"]}),e.jsxs("button",{onClick:Fr,disabled:He,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ve.surfaceEl,border:`1px solid ${ve.border}`,color:ve.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:He?.4:1},children:[e.jsx(Ht,{size:10})," Generate All"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...vl,paddingRight:"36px",fontSize:"12px"},placeholder:"Ask AI for help...",value:Q,onChange:P=>G(P.target.value),onKeyDown:P=>P.key==="Enter"&&!P.shiftKey&&ni(),disabled:M}),e.jsx("button",{onClick:ni,disabled:M||!Q.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:Q.trim()?ve.violet:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(Ch,{size:14})})]})]})]})]}),p.visible&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>f({...p,visible:!1})}),e.jsxs("div",{style:{position:"fixed",left:p.x,top:p.y,zIndex:100,backgroundColor:ve.surfaceEl,border:`1px solid ${ve.borderS}`,borderRadius:"8px",padding:"4px",width:"200px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{padding:"6px 10px",fontSize:"9px",color:ve.tm,textTransform:"uppercase",letterSpacing:"0.06em",fontWeight:600},children:"Block Type"}),H6.map(P=>e.jsxs("div",{onClick:()=>Yt(p.blockId,P.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",fontSize:"12px",cursor:"pointer",borderRadius:"4px",color:ve.ts,transition:"background 0.1s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor="rgba(255,255,255,0.05)",onMouseLeave:re=>re.currentTarget.style.backgroundColor="transparent",children:[e.jsx(P.icon,{size:13,style:{color:ve.tm}}),P.label]},P.id))]})]})]}),z&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},children:e.jsxs("div",{style:{width:"580px",backgroundColor:ve.surface,border:`1px solid ${ve.border}`,borderRadius:"12px",overflow:"hidden",boxShadow:"0 20px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600},children:"Choose a template"}),e.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:ve.ts},children:"Start with a pre-built structure or blank slate"})]}),!u&&e.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",color:ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(St,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",maxHeight:"380px",overflowY:"auto"},children:[e.jsxs("div",{onClick:()=>gr("blank"),style:{padding:"14px",border:`1px dashed ${ve.borderS}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>{P.currentTarget.style.borderColor=ve.violet,P.currentTarget.style.borderStyle="solid"},onMouseLeave:P=>{P.currentTarget.style.borderColor=ve.borderS,P.currentTarget.style.borderStyle="dashed"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:"Blank Skill"}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.4"},children:"Start from scratch with just SKILL.md"})]}),(B||[]).map(P=>e.jsxs("div",{onClick:()=>gr(P.slug),style:{padding:"14px",border:`1px solid ${ve.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:re=>{re.currentTarget.style.borderColor=ve.violet,re.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"},onMouseLeave:re=>{re.currentTarget.style.borderColor=ve.border,re.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:P.name}),e.jsx("div",{style:{fontSize:"11px",color:ve.ts,lineHeight:"1.4",marginBottom:"6px"},children:P.description||"Pre-built skill structure"}),e.jsxs("div",{style:{fontSize:"10px",color:ve.tm},children:[P.totalFiles," files"]})]},P.slug))]}),e.jsx("div",{style:{padding:"12px 24px",borderTop:`1px solid ${ve.border}`,backgroundColor:"rgba(0,0,0,0.15)",textAlign:"center"},children:e.jsx("button",{onClick:()=>u?i(o?`/agents/${o}`:"/skills"):E(!1),style:{background:"none",border:"none",color:ve.tm,fontSize:"11px",cursor:"pointer"},children:u?"Cancel and go back":"Close"})})]})}),be&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:ve.danger,color:"#fff",padding:"8px 18px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:300,fontSize:"12px"},children:[e.jsx(Ei,{size:14}),be,e.jsx("button",{onClick:()=>oe(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex",marginLeft:"4px"},children:e.jsx(St,{size:12})})]}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @media (max-width: 900px) {
          .ai-panel { display: none !important; }
        }
      `})]})}const X={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace',font:'"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif'},U6=`
@keyframes fadeInUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
@keyframes spin { from { transform:rotate(0deg); } to { transform:rotate(360deg); } }
@keyframes pulse { 0%,100% { transform:scale(1); opacity:0.3; } 50% { transform:scale(1.25); opacity:0.6; } }
@keyframes cursorBlink { 0%,100% { opacity:1; } 50% { opacity:0; } }
@keyframes quillWrite {
  0% { transform:translateX(0) rotate(0deg); }
  25% { transform:translateX(3px) rotate(-3deg); }
  50% { transform:translateX(0) rotate(0deg); }
  75% { transform:translateX(-2px) rotate(2deg); }
  100% { transform:translateX(0) rotate(0deg); }
}
@keyframes constellationBirth {
  0% { opacity:0; transform:scale(0); }
  60% { opacity:1; transform:scale(1.08); }
  100% { opacity:1; transform:scale(1); }
}
@keyframes constellationBreathe {
  0%,100% { filter:drop-shadow(0 0 12px rgba(139,92,246,0.3)); }
  50% { filter:drop-shadow(0 0 24px rgba(139,92,246,0.7)); }
}
@keyframes constellationDrawConn {
  from { stroke-dashoffset: 300; }
  to { stroke-dashoffset: 0; }
}
@keyframes ambientRing {
  0% { r:60; opacity:0; }
  40% { opacity:0.12; }
  100% { r:200; opacity:0; }
}
@keyframes particleDrift {
  0% { opacity:0; r:1; }
  15% { opacity:0.5; }
  100% { opacity:0; r:0; transform:translate(var(--dx),var(--dy)); }
}
@keyframes phaseReveal {
  0% { opacity:0; transform:translateY(20px) scale(0.97); filter:blur(6px); }
  100% { opacity:1; transform:translateY(0) scale(1); filter:blur(0); }
}
@keyframes phasePulse {
  0%,100% { box-shadow:0 0 0 0 rgba(139,92,246,0.3); }
  50% { box-shadow:0 0 0 8px rgba(139,92,246,0); }
}
@keyframes phaseLineGrow {
  from { transform:scaleY(0); }
  to { transform:scaleY(1); }
}
@keyframes bookGlow {
  0%,100% { box-shadow:0 0 40px rgba(139,92,246,0.03), 0 0 80px rgba(139,92,246,0.02); }
  50% { box-shadow:0 0 60px rgba(139,92,246,0.06), 0 0 120px rgba(139,92,246,0.03); }
}
`;function V6({text:t,onComplete:i,speed:s=25}){const[o,u]=L.useState(""),S=L.useRef(i);S.current=i,L.useEffect(()=>{u("");let l=0;const c=setInterval(()=>{var m;l++,u(t.slice(0,l)),l>=t.length&&(clearInterval(c),(m=S.current)==null||m.call(S))},s);return()=>clearInterval(c)},[t,s]);const b=o.length<t.length;return e.jsxs("span",{style:{lineHeight:"1.7"},children:[o,b&&e.jsx("span",{style:{display:"inline-block",width:"2px",height:"1.1em",backgroundColor:X.violet,marginLeft:"2px",verticalAlign:"middle",animation:"cursorBlink 0.8s infinite"}})]})}function bs({label:t,selected:i,onClick:s,subtitle:o,multi:u,color:S}){const[b,l]=L.useState(!1),c=S||X.violet;return e.jsxs("button",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"3px",padding:o?"10px 16px":"8px 16px",backgroundColor:i?`${c}22`:b?X.surfaceEl:X.surface,border:`1px solid ${i?c:b?X.borderS:X.border}`,borderRadius:u?"8px":"100px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",minWidth:o?"170px":"auto",boxShadow:i?`0 0 12px ${c}20`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},children:[u&&e.jsx("div",{style:{width:15,height:15,borderRadius:3,flexShrink:0,border:`1.5px solid ${i?c:X.tm}`,backgroundColor:i?c:"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s ease"},children:i&&e.jsx(sr,{size:9,color:"#fff",strokeWidth:3.5})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:i?X.tp:X.ts},children:t}),!u&&i&&e.jsx(sr,{size:12,color:c,style:{marginLeft:"auto"}})]}),o&&e.jsx("span",{style:{fontSize:"11px",color:X.tm,marginLeft:u?"23px":0},children:o})]})}const vu=[{id:"name",label:"Nom",Icon:jn},{id:"role",label:"Rle",Icon:Yl},{id:"skills",label:"Comptences",Icon:Vr},{id:"comm",label:"Communication",Icon:w0},{id:"method",label:"Mthodologie",Icon:wh},{id:"tools",label:"Outils",Icon:z0},{id:"model",label:"Modle",Icon:Xn},{id:"autonomy",label:"Autonomie",Icon:j0},{id:"enhance",label:"IA Enhance",Icon:Ht},{id:"complete",label:"Termin",Icon:sr}];function K6(){var Se;const t=Ut(),i=L.useRef(null),s=L.useRef(null),[o,u]=L.useState(0),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[m,v]=L.useState(!1),[d,y]=L.useState(null),[_,j]=L.useState(!1),[C,h]=L.useState(null),[p,f]=L.useState([]),[g,w]=L.useState(""),[R,A]=L.useState(null),[z,E]=L.useState([]),[B,O]=L.useState([]),[H,K]=L.useState(null),[U,ee]=L.useState(null),[V,ue]=L.useState([]),[Q,G]=L.useState(null),[M,I]=L.useState(null),[D,W]=L.useState(null),[fe,ye]=L.useState(""),[we,Re]=L.useState([]),[Y,F]=L.useState([]),[be,oe]=L.useState(null),[Ie,Z]=L.useState(!1),[je,pe]=L.useState(""),[De,$e]=L.useState(null),[Pe,Ee]=L.useState(""),[He,J]=L.useState(!1),[ce,Ne]=L.useState(null),[et,Je]=L.useState("input"),[pt,Gt]=L.useState(!1),[Ct,kt]=L.useState(!1),Lt=L.useRef(null),[bt,It]=L.useState([]);L.useEffect(()=>{(async()=>{var ot;try{const[Ce,ht]=await Promise.all([le("/api/personaboarding/options"),le("/api/personaboarding/roles")]);h(Ce),f(ht)}catch(Ce){console.error("Failed to load personaboarding options:",Ce)}const ie=new URLSearchParams(window.location.search),Oe=ie.get("linkedin_data"),Ve=ie.get("linkedin_error");if(Ve)y(`LinkedIn OAuth error: ${Ve}`),window.history.replaceState({},"","/personaboarding");else if(Oe)try{const Ce=JSON.parse(decodeURIComponent(Oe));window.history.replaceState({},"","/personaboarding"),$e("linkedin"),Je("analyzing"),J(!0);const ht=await le("/api/personaboarding/linkedin/analyze-oauth",{method:"POST",body:JSON.stringify(Ce)});Ne(ht.suggestions),(ot=ht.suggestions)!=null&&ot.displayName&&w(ht.suggestions.displayName),Je("results"),J(!1)}catch(Ce){console.error("LinkedIn OAuth data processing failed:",Ce),y("Erreur lors du traitement des donnes LinkedIn"),J(!1),window.history.replaceState({},"","/personaboarding")}})()},[]),L.useEffect(()=>{var ie;(ie=i.current)==null||ie.scrollIntoView({behavior:"smooth",block:"end"})},[bt,S,o]),L.useEffect(()=>{o===0&&!S&&setTimeout(()=>{var ie;return(ie=s.current)==null?void 0:ie.focus()},100)},[o,S]);async function gt(){try{const ie=localStorage.getItem("token")||"",Oe=await le(`/api/personaboarding/linkedin/auth?token=${encodeURIComponent(ie)}`);Oe.authUrl?window.location.href=Oe.authUrl:y("LinkedIn OAuth non configur")}catch(ie){y(ie.message||"Erreur LinkedIn OAuth")}}async function Rr(){var ie;if(Pe.trim()){J(!0),Je("analyzing"),y(null);try{const Oe=await le("/api/personaboarding/linkedin-analyze",{method:"POST",body:JSON.stringify({url:Pe.trim()})});Ne(Oe.suggestions),(ie=Oe.suggestions)!=null&&ie.displayName&&w(Oe.suggestions.displayName),Je("results")}catch(Oe){y(Oe.message||"Impossible d'analyser ce profil LinkedIn"),Je("input")}J(!1)}}function pr(){Je("done"),$e("linkedin-done"),ce!=null&&ce.tools&&ue(ce.tools)}function ii(){$e("manual")}async function fr(ie){var Ve;const Oe=(Ve=ie.target.files)==null?void 0:Ve[0];if(Oe){kt(!0);try{const ot=new FormData;ot.append("image",Oe);const ht=await(await fetch("/api/personaboarding/upload-profile-pic",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:ot})).json();ht.profileImageUrl&&Ne(it=>({...it,profileImageUrl:ht.profileImageUrl}))}catch(ot){console.error("Profile pic upload failed:",ot)}kt(!1)}}async function Tr(ie){var Oe;if(((Oe=ce==null?void 0:ce.skills)==null?void 0:Oe.length)>0){const Ve=ce.skills;E(Ve),O(Ve.map(ot=>ot.name));return}Gt(!0);try{const Ve=await le("/api/personaboarding/ai-suggest-skills",{method:"POST",body:JSON.stringify({role:ie,linkedinData:null})});E(Ve.skills||[])}catch{const Ve=p.find(ot=>ot.id===ie);E((Ve==null?void 0:Ve.skills)||[])}Gt(!1)}const gr=!!ce,ae=[gr?"LinkedIn m'a parl de vous. Confirmez le nom de votre agent ?":"Commenons la gense. Quel sera le nom de votre agent ?",gr?`${g} est un beau nom. Votre profil suggre un rle. Lequel vous correspond ?`:`Je m'appellerai ${g}. Quel rle souhaitez-vous me confier ?`,gr?`En tant que ${(R==null?void 0:R.label)||"..."}, voici les comptences suggres par votre profil. Validez ou personnalisez.`:`En tant que ${(R==null?void 0:R.label)||"..."}, j'aurai besoin de comptences spcifiques. Quelles sont les miennes ?`,`Mes ${B.length} comptences sont acquises. Comment souhaitez-vous que je communique ?`,`Style ${(H==null?void 0:H.label)||"..."} not. Quelle mthodologie de travail me guidera ?`,`Mthodologie ${(U==null?void 0:U.label)||"..."} intgre. De quels outils aurai-je besoin ?`,"Mes outils sont configurs. Quel cerveau IA souhaitez-vous me donner ?",`Je fonctionnerai avec ${(Q==null?void 0:Q.label)||"..."}. Quel sera mon degr de libert ?`,"Configuration termine. L'intelligence artificielle analyse votre vision et compose mon essence...",fe||`${g} est prt. Son existence commence maintenant.`];function We(ie){It(Oe=>[...Oe,ie]),b(!0),u(Oe=>Oe+1)}function Ge(){const ie=g.trim();ie&&(w(ie),We(`Je vais crer un agent qui s'appellera ${ie}.`))}function ut(ie){A(ie),O([]),We(`${g} sera ${ie.label}.`),Tr(ie.id)}function _t(){if(B.length===0)return;const ie=B.join(", ");We(`${g} matrisera ${ie}.`)}function Yt(ie){K(ie),We(`${g} communiquera de manire ${ie.label.toLowerCase()}.`)}function mt(ie){ee(ie),We(`${g} travaillera selon la mthodologie ${ie.label}.`)}function Xt(){if(V.length===0)return;const ie=V.join(", ");We(`${g} utilisera les outils : ${ie}.`)}function $r(ie){G(ie),We(`Son moteur d'intelligence sera ${ie.label}.`)}function Kr(ie){I(ie),We(`Son niveau d'autonomie sera ${ie.label.toLowerCase()}.`)}async function ni(){v(!0),y(null);try{const ie=await le("/api/personaboarding/ai-enhance",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:B,skillsData:z,commStyle:H.id,methodology:U.id,selectedTools:V,model:Q.id,autonomy:M.id})});W(ie.gptData),ye(ie.narrative),v(!1),We(`L'IA a parl : "${ie.narrative}"`)}catch{const Oe=`Ainsi naquit ${g}, prt  transformer chaque dfi en opportunit.`;ye(Oe),v(!1),We(`L'IA a parl : "${Oe}"`)}}async function Ar(){var ie;c(!0),y(null);try{const Oe=await le("/api/personaboarding/complete",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:B,customSkills:we,skillsData:z,commStyle:H.id,methodology:U.id,selectedTools:V,model:Q.id,autonomy:M.id,gptData:D||null,profileImageUrl:(ce==null?void 0:ce.profileImageUrl)||null})});oe(Oe.agent);const Ve=((ie=p.find(Ce=>Ce.id===R.id))==null?void 0:ie.skills)||[],ot=B.map(Ce=>{const ht=Ve.find(Dt=>Dt.name===Ce),it=we.find(Dt=>Dt.name===Ce);return{name:Ce,color:(ht==null?void 0:ht.color)||(it==null?void 0:it.color)||X.violet,category:(ht==null?void 0:ht.category)||(it==null?void 0:it.category)||""}});F(ot),j(!0)}catch(Oe){y(Oe.message||"Erreur lors de la cration"),c(!1)}}function Fr(){return[g||null,(R==null?void 0:R.label)||null,B.length>0?`${B.length} skills`:null,(H==null?void 0:H.label)||null,(U==null?void 0:U.label)||null,V.length>0?`${V.length} outils`:null,(Q==null?void 0:Q.label)||null,(M==null?void 0:M.label)||null,D?"Enhanced":null,_?"Cr":null]}function si(){return e.jsxs("div",{style:{animation:"fadeInUp 0.5s ease"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:X.tp,marginBottom:"8px",letterSpacing:"-0.02em"},children:"Comment souhaitez-vous crer votre agent ?"}),e.jsx("p",{style:{fontSize:"13px",color:X.tm,marginBottom:"28px",lineHeight:"1.6"},children:"Importez votre profil LinkedIn pour des suggestions intelligentes, ou crez manuellement."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:gt,onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#0A66C215",ie.currentTarget.style.borderColor="#0A66C240",ie.currentTarget.style.boxShadow="0 0 20px rgba(10,102,194,0.15)"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor=X.surface,ie.currentTarget.style.borderColor=X.border,ie.currentTarget.style.boxShadow="none"},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:X.surface,border:`1px solid ${X.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease",boxShadow:"none"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:"#0A66C215",border:"1px solid #0A66C230",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ko,{size:22,color:"#0A66C2"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:X.tp,marginBottom:"4px"},children:"Connecter LinkedIn"}),e.jsx("div",{style:{fontSize:"12px",color:X.ts,lineHeight:"1.5"},children:"Connectez-vous via LinkedIn pour importer automatiquement votre nom, photo de profil et email."})]}),e.jsx(Vn,{size:18,color:X.tm,style:{flexShrink:0}})]}),e.jsxs("button",{onClick:()=>{$e("linkedin"),Je("input")},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#1e3a5f20",ie.currentTarget.style.borderColor="#3B82F640"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor=X.surface,ie.currentTarget.style.borderColor=X.border},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:X.surface,border:`1px solid ${X.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Iu,{size:20,color:"#3B82F6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:X.tp,marginBottom:"4px"},children:"Coller une URL LinkedIn"}),e.jsx("div",{style:{fontSize:"12px",color:X.ts,lineHeight:"1.5"},children:"Collez une URL LinkedIn publique  l'IA analysera les mtadonnes du profil."})]}),e.jsx(Vn,{size:18,color:X.tm,style:{flexShrink:0}})]}),e.jsxs("button",{onClick:ii,onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor=X.surfaceEl,ie.currentTarget.style.borderColor=X.borderS},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor=X.surface,ie.currentTarget.style.borderColor=X.border},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:X.surface,border:`1px solid ${X.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:X.violetG,border:`1px solid ${X.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(qd,{size:20,color:X.violet})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:X.tp,marginBottom:"4px"},children:"Cration manuelle"}),e.jsx("div",{style:{fontSize:"12px",color:X.ts,lineHeight:"1.5"},children:"Configurez chaque aspect de votre agent tape par tape, en toute libert."})]}),e.jsx(Vn,{size:18,color:X.tm,style:{flexShrink:0}})]})]})]})}function Ui(){var ie,Oe,Ve,ot;return e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[et==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:"#60A5FA",fontSize:"12px",fontWeight:600},children:[e.jsx(ko,{size:15})," Import LinkedIn"]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:X.tp,marginBottom:"6px"},children:"Collez votre URL LinkedIn"}),e.jsx("p",{style:{fontSize:"13px",color:X.tm,marginBottom:"20px",lineHeight:"1.5"},children:"L'IA analysera les mtadonnes de votre profil pour suggrer automatiquement les champs."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{autoFocus:!0,style:{backgroundColor:X.bg,border:`1px solid ${X.borderS}`,borderRadius:"8px",padding:"12px 16px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:X.font,transition:"border-color 0.2s"},onFocus:Ce=>Ce.target.style.borderColor="#3B82F6",onBlur:Ce=>Ce.target.style.borderColor=X.borderS,placeholder:"https://linkedin.com/in/votre-profil",value:Pe,onChange:Ce=>Ee(Ce.target.value),onKeyDown:Ce=>Ce.key==="Enter"&&Rr()}),e.jsxs("button",{disabled:!Pe.trim()||!Pe.includes("linkedin.com/in/"),onClick:Rr,style:{backgroundColor:Pe.includes("linkedin.com/in/")?"#3B82F6":X.surfaceEl,color:"#fff",border:"none",borderRadius:"8px",padding:"0 20px",fontSize:"13px",fontWeight:600,cursor:Pe.includes("linkedin.com/in/")?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",fontFamily:X.font},children:["Analyser ",e.jsx(Do,{size:13})]})]}),d&&e.jsx("p",{style:{fontSize:"12px",color:X.danger,marginTop:"10px"},children:d}),e.jsx("button",{onClick:ii,style:{background:"none",border:"none",color:X.tm,fontSize:"12px",cursor:"pointer",marginTop:"16px",padding:0,fontFamily:X.font,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Passer et crer manuellement"})]}),et==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"40px 20px",animation:"fadeInUp 0.4s ease"},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",backgroundColor:"#1e3a5f20",border:"2px solid #3B82F640",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ko,{size:28,color:"#3B82F6",style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:X.tp,marginBottom:"6px"},children:"Analyse de votre profil LinkedIn..."}),e.jsx("div",{style:{fontSize:"12px",color:X.tm},children:"Extraction des mtadonnes et gnration des suggestions"})]}),e.jsx(Kn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}})]}),et==="results"&&ce&&e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:X.success,fontSize:"13px",fontWeight:600},children:[e.jsx(sr,{size:15})," Profil analys avec succs"]}),ce.summary&&e.jsxs("div",{style:{padding:"14px 18px",backgroundColor:X.surface,borderRadius:"10px",border:`1px solid ${X.border}`,marginBottom:"20px",fontSize:"13px",color:X.ts,lineHeight:"1.6",fontStyle:"italic"},children:['"',ce.summary,'"']}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"14px 18px",backgroundColor:X.surface,borderRadius:"10px",border:`1px solid ${ce.profileImageUrl?"#3B82F630":X.border}`,marginBottom:"4px"},children:[ce.profileImageUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ce.profileImageUrl,alt:"Profile",style:{width:"56px",height:"56px",borderRadius:"14px",objectFit:"cover",border:"2px solid #3B82F640",boxShadow:"0 4px 12px rgba(59,130,246,0.15)"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:X.tp},children:ce.displayName}),e.jsx("div",{style:{fontSize:"11px",color:"#60A5FA",marginTop:"2px"},children:"Photo de profil importe"})]}),e.jsx("button",{onClick:()=>{var Ce;return(Ce=Lt.current)==null?void 0:Ce.click()},style:{background:"none",border:`1px solid ${X.border}`,borderRadius:"6px",padding:"4px 10px",color:X.ts,fontSize:"11px",cursor:"pointer",fontFamily:X.font,transition:"all 0.2s"},children:"Changer"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var Ce;return(Ce=Lt.current)==null?void 0:Ce.click()},disabled:Ct,style:{width:"56px",height:"56px",borderRadius:"14px",backgroundColor:"#3B82F610",border:"2px dashed #3B82F640",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"},children:Ct?e.jsx(Kn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}}):e.jsx(X2,{size:20,color:"#3B82F6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:X.tp},children:"Ajouter la photo de profil"}),e.jsx("div",{style:{fontSize:"11px",color:X.tm,marginTop:"2px",lineHeight:"1.4"},children:"Clic droit sur votre photo LinkedIn  Enregistrer, puis uploadez-la ici"})]}),e.jsxs("button",{onClick:()=>{var Ce;return(Ce=Lt.current)==null?void 0:Ce.click()},disabled:Ct,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 14px",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:X.font,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",flexShrink:0},children:[e.jsx(L0,{size:13})," Upload"]})]}),e.jsx("input",{ref:Lt,type:"file",accept:"image/*",style:{display:"none"},onChange:fr})]}),[{label:"Nom",value:ce.displayName,icon:e.jsx(jn,{size:13})},{label:"Rle",value:(ie=ce.role)==null?void 0:ie.replace(/-/g," ").replace(/\b\w/g,Ce=>Ce.toUpperCase()),icon:e.jsx(Yl,{size:13})},{label:"Comptences",value:`${((Oe=ce.skills)==null?void 0:Oe.length)||0} dtectes`,icon:e.jsx(Vr,{size:13})},{label:"Style",value:((Ve=ce.commStyle)==null?void 0:Ve.charAt(0).toUpperCase())+((ot=ce.commStyle)==null?void 0:ot.slice(1)),icon:e.jsx(w0,{size:13})}].map((Ce,ht)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 14px",backgroundColor:X.surface,borderRadius:"8px",border:`1px solid ${X.border}`},children:[e.jsx("div",{style:{color:"#3B82F6"},children:Ce.icon}),e.jsx("span",{style:{fontSize:"11px",color:X.tm,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",minWidth:"90px"},children:Ce.label}),e.jsx("span",{style:{fontSize:"13px",color:X.tp,fontWeight:500},children:Ce.value})]},ht))]}),e.jsx("p",{style:{fontSize:"11px",color:X.tm,marginBottom:"16px",lineHeight:"1.5"},children:"Ces suggestions pr-rempliront les tapes suivantes. Vous pourrez modifier ou rejeter chaque suggestion."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:pr,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:X.font,transition:"all 0.2s"},children:["Continuer avec ces suggestions ",e.jsx(Vn,{size:14})]}),e.jsx("button",{onClick:ii,style:{backgroundColor:X.surface,color:X.ts,border:`1px solid ${X.border}`,borderRadius:"8px",padding:"12px 18px",fontSize:"13px",fontWeight:500,cursor:"pointer",fontFamily:X.font,transition:"all 0.2s"},children:"Ignorer"})]})]})]})}function xr({label:ie}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"8px 14px",backgroundColor:"rgba(59,130,246,0.08)",borderRadius:"8px",border:"1px solid rgba(59,130,246,0.12)",fontSize:"12px",color:"#60A5FA"},children:[e.jsx(ko,{size:13})," Suggestion : ",e.jsx("strong",{style:{color:"#93C5FD"},children:ie})]})}function mr(){var Oe,Ve,ot;if(S)return null;const ie={animation:"fadeInUp 0.35s ease"};switch(o){case 0:return e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",...ie},children:[e.jsx("input",{ref:s,autoFocus:!0,style:{backgroundColor:X.bg,border:`1px solid ${X.borderS}`,borderRadius:"6px",padding:"11px 14px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:X.font,transition:"border-color 0.2s"},onFocus:Ce=>Ce.target.style.borderColor=X.violet,onBlur:Ce=>Ce.target.style.borderColor=X.borderS,placeholder:"Nom de l'agent...",value:g,onChange:Ce=>w(Ce.target.value),onKeyDown:Ce=>Ce.key==="Enter"&&Ge()}),e.jsxs("button",{disabled:!g.trim(),onClick:Ge,style:{backgroundColor:g.trim()?X.tp:X.surfaceEl,color:g.trim()?X.bg:X.tm,border:"none",borderRadius:"6px",padding:"0 22px",fontSize:"12px",fontWeight:600,cursor:g.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:["Continuer ",e.jsx(Vn,{size:14})]})]});case 1:{if(!C)return e.jsx(Hn,{});const Ce=[...C.roles];if(ce!=null&&ce.role){const it=ce.role;Ce.some(Dt=>Dt.id===it)||Ce.unshift({id:it,label:it.replace(/-/g," ").replace(/\b\w/g,Dt=>Dt.toUpperCase()),skillCount:"IA",_linkedin:!0})}const ht=()=>{const it=je.trim();if(!it)return;const Dt=it.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");ut({id:Dt,label:it,skillCount:"IA"}),pe("")};return e.jsxs("div",{style:{marginTop:"20px",...ie},children:[(ce==null?void 0:ce.role)&&e.jsx(xr,{label:((Oe=Ce.find(it=>it.id===ce.role))==null?void 0:Oe.label)||ce.role.replace(/-/g," ").replace(/\b\w/g,it=>it.toUpperCase())}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Ce.map(it=>e.jsx(bs,{label:it.label,subtitle:it._linkedin?"Suggestion LinkedIn":`${it.skillCount} comptences`,selected:(R==null?void 0:R.id)===it.id,onClick:()=>ut(it),color:(ce==null?void 0:ce.role)===it.id||it._linkedin?"#3B82F6":void 0},it.id))}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px",padding:"12px 14px",backgroundColor:X.surface,borderRadius:"10px",border:`1px solid ${X.border}`},children:[e.jsx("input",{style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"13px",flex:1,outline:"none",fontFamily:X.font},placeholder:"Ou saisissez un rle personnalis...",value:je,onChange:it=>pe(it.target.value),onKeyDown:it=>it.key==="Enter"&&ht()}),e.jsx("button",{disabled:!je.trim(),onClick:ht,style:{backgroundColor:je.trim()?X.violet:"transparent",color:je.trim()?"#fff":X.tm,border:"none",borderRadius:"6px",padding:"6px 14px",fontSize:"12px",fontWeight:600,cursor:je.trim()?"pointer":"default",transition:"all 0.2s",fontFamily:X.font},children:"Valider"})]})]})}case 2:return pt?e.jsx("div",{style:{marginTop:"20px",...ie},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:X.surface,borderRadius:"10px",border:`1px solid ${X.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:X.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ht,{size:16,color:X.violet,style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:X.tp,fontWeight:500},children:"L'IA gnre vos comptences..."}),e.jsx("div",{style:{fontSize:"11px",color:X.tm,marginTop:"2px"},children:"Analyse du profil et du rle en cours"})]}),e.jsx(Kn,{size:16,color:X.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]})}):z.length===0?e.jsx(Hn,{text:"Chargement des comptences..."}):e.jsxs("div",{style:{marginTop:"20px",...ie},children:[e.jsxs("div",{style:{fontSize:"12px",color:X.ts,marginBottom:"16px",lineHeight:"1.6",padding:"12px 16px",backgroundColor:X.surface,borderRadius:"8px",border:`1px solid ${X.border}`},children:["Cliquez sur les nodes dans la constellation pour connecter des comptences  ",g,". Vous pouvez aussi crer vos propres skills."]}),e.jsxs("div",{style:{width:"100%",minHeight:"420px",marginBottom:"16px",borderRadius:"12px",border:`1px solid ${X.border}`,backgroundColor:"#0a0a0a",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${X.border} 1px, transparent 1px)`,backgroundSize:"28px 28px",opacity:.4,pointerEvents:"none"}}),e.jsx(q6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:z,selectedSkills:B,customSkills:we,onToggleSkill:Ce=>{O(ht=>ht.includes(Ce)?ht.filter(it=>it!==Ce):[...ht,Ce])},onAddCustomSkill:Ce=>{Re(ht=>[...ht,Ce]),O(ht=>[...ht,Ce.name])},onRemoveCustomSkill:Ce=>{Re(ht=>ht.filter(it=>it.name!==Ce)),O(ht=>ht.filter(it=>it!==Ce))}})]}),B.length>0&&e.jsx(Wm,{items:B}),e.jsx(Nm,{disabled:B.length===0,onClick:_t,label:`Valider ${B.length} comptence${B.length>1?"s":""}`})]});case 3:return C?e.jsxs("div",{style:{marginTop:"20px",...ie},children:[(ce==null?void 0:ce.commStyle)&&e.jsx(xr,{label:((Ve=C.commStyles.find(Ce=>Ce.id===ce.commStyle))==null?void 0:Ve.label)||ce.commStyle}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:C.commStyles.map(Ce=>e.jsx(bs,{label:Ce.label,subtitle:Ce.description,selected:(H==null?void 0:H.id)===Ce.id,onClick:()=>Yt(Ce),color:(ce==null?void 0:ce.commStyle)===Ce.id?"#3B82F6":void 0},Ce.id))})]}):e.jsx(Hn,{});case 4:return C?e.jsxs("div",{style:{marginTop:"20px",...ie},children:[(ce==null?void 0:ce.methodology)&&e.jsx(xr,{label:((ot=C.methodologies.find(Ce=>Ce.id===ce.methodology))==null?void 0:ot.label)||ce.methodology}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:C.methodologies.map(Ce=>e.jsx(bs,{label:Ce.label,subtitle:Ce.description,selected:(U==null?void 0:U.id)===Ce.id,onClick:()=>mt(Ce),color:(ce==null?void 0:ce.methodology)===Ce.id?"#3B82F6":void 0},Ce.id))})]}):e.jsx(Hn,{});case 5:return C?e.jsxs("div",{style:{marginTop:"20px",...ie},children:[V.length>0&&e.jsx(Wm,{items:V}),["files","system","search","web","agents"].map(Ce=>{const ht=C.tools.filter(it=>it.category===Ce);return ht.length===0?null:e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:X.tm,textTransform:"uppercase",letterSpacing:"0.06em"},children:Ce}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"6px"},children:ht.map(it=>e.jsx(bs,{label:it.label,subtitle:it.description,multi:!0,selected:V.includes(it.id),onClick:()=>{ue(Dt=>Dt.includes(it.id)?Dt.filter(Vi=>Vi!==it.id):[...Dt,it.id])}},it.id))})]},Ce)}),e.jsx(Nm,{disabled:V.length===0,onClick:Xt,label:"Valider les outils"})]}):e.jsx(Hn,{});case 6:return C?e.jsx("div",{style:{marginTop:"20px",...ie},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:C.models.map(Ce=>e.jsx(bs,{label:Ce.label,subtitle:Ce.description,selected:(Q==null?void 0:Q.id)===Ce.id,onClick:()=>$r(Ce)},Ce.id))})}):e.jsx(Hn,{});case 7:return C?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"20px",...ie},children:C.autonomyLevels.map(Ce=>e.jsx(bs,{label:Ce.label,subtitle:Ce.description,selected:(M==null?void 0:M.id)===Ce.id,onClick:()=>Kr(Ce)},Ce.id))}):e.jsx(Hn,{});case 8:return e.jsx("div",{style:{marginTop:"24px",...ie},children:m?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:X.surface,borderRadius:"10px",border:`1px solid ${X.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:X.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(qd,{size:16,color:X.violet,style:{animation:"quillWrite 1s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:X.tp,fontWeight:500},children:"L'IA compose votre agent..."}),e.jsx("div",{style:{fontSize:"11px",color:X.tm,marginTop:"4px"},children:"Optimisation de la matrice comportementale"})]}),e.jsx(Kn,{size:16,color:X.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]}):e.jsxs("button",{onClick:ni,style:{backgroundColor:X.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 32px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:X.font,boxShadow:`0 0 24px ${X.violetG}`,transition:"all 0.2s"},onMouseOver:Ce=>Ce.currentTarget.style.transform="scale(1.02)",onMouseOut:Ce=>Ce.currentTarget.style.transform="scale(1)",children:[e.jsx(Ht,{size:16})," Lancer l'amlioration IA"]})});case 9:return e.jsx("div",{style:{marginTop:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",...ie},children:_?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"14px",padding:"32px",backgroundColor:X.surface,borderRadius:"12px",border:`1px solid ${X.violetM}`,animation:"fadeInUp 0.5s ease",width:"100%"},children:[ce!=null&&ce.profileImageUrl?e.jsx("img",{src:ce.profileImageUrl,alt:g,style:{width:"64px",height:"64px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${X.success}`,boxShadow:`0 0 20px ${X.success}30`}}):e.jsx("div",{style:{width:56,height:56,borderRadius:"50%",backgroundColor:`${X.success}22`,border:`2px solid ${X.success}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(sr,{size:28,color:X.success})}),e.jsxs("span",{style:{fontSize:"15px",color:X.tp,fontWeight:600},children:[g," est n"]}),e.jsxs("span",{style:{fontSize:"12px",color:X.ts,textAlign:"center",maxWidth:"280px",lineHeight:"1.6"},children:[Y.length," comptences connectes. La constellation se forme..."]}),Y.length>0&&e.jsxs("div",{style:{width:"100%",minHeight:"380px",marginTop:"8px",borderRadius:"12px",border:`1px solid ${X.border}`,backgroundColor:"#0a0a0a",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${X.border} 1px, transparent 1px)`,backgroundSize:"28px 28px",opacity:.4,pointerEvents:"none"}}),e.jsx(G6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:Y,onComplete:()=>Z(!0)})]}),Ie&&e.jsxs("button",{onClick:()=>t(`/agents/${(be==null?void 0:be.name)||g.toLowerCase().replace(/\s+/g,"-")}`),style:{backgroundColor:X.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"12px 28px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:X.font,boxShadow:`0 0 24px ${X.violetG}`,transition:"all 0.2s",animation:"fadeInUp 0.5s ease"},onMouseOver:Ce=>Ce.currentTarget.style.transform="scale(1.03)",onMouseOut:Ce=>Ce.currentTarget.style.transform="scale(1)",children:[e.jsx(Ht,{size:15})," Dcouvrir ",g]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Ar,disabled:l,style:{backgroundColor:X.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 36px",fontSize:"15px",fontWeight:600,cursor:l?"wait":"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:X.font,boxShadow:`0 0 30px ${X.violetG}`,transition:"all 0.2s"},onMouseOver:Ce=>{l||(Ce.currentTarget.style.transform="scale(1.03)")},onMouseOut:Ce=>Ce.currentTarget.style.transform="scale(1)",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Kn,{size:18,style:{animation:"spin 1s linear infinite"}})," Cration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{size:18})," Crer ",g]})}),d&&e.jsx("span",{style:{fontSize:"12px",color:X.danger},children:d})]})});default:return null}}const qr=vu.length,P=Fr(),re=De!==null&&!(De==="linkedin"&&et!=="done");return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 56px)",backgroundColor:X.bg,color:X.tp,fontFamily:X.font,overflow:"hidden"},children:[e.jsx("style",{children:U6}),re&&e.jsx("div",{style:{flex:"0 0 56px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"16px",paddingBottom:"16px",borderRight:`1px solid ${X.border}`,background:`linear-gradient(180deg, ${X.surface} 0%, ${X.bg} 100%)`,overflowY:"auto",overflowX:"hidden",scrollbarWidth:"none"},children:vu.map((ie,Oe)=>{const Ve=o===Oe,ot=o>Oe,Ce=o<Oe,ht=ie.Icon,it=P[Oe];return e.jsxs(Ms.Fragment,{children:[Oe>0&&e.jsx("div",{style:{width:"2px",height:"12px",flexShrink:0,background:ot?`linear-gradient(180deg, ${X.violet}, ${X.violet}80)`:X.border,borderRadius:"1px",transformOrigin:"top",animation:ot?"phaseLineGrow 0.4s ease-out forwards":"none"}}),e.jsx("div",{title:`${ie.label}${it?`  ${it}`:""}`,style:{width:Ve?"34px":"30px",height:Ve?"34px":"30px",borderRadius:"50%",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"default",background:ot?X.violet:Ve?X.surfaceEl:X.surface,border:`2px solid ${ot||Ve?X.violet:X.border}`,transition:"all 0.4s cubic-bezier(0.34,1.56,0.64,1)",animation:Ve?"phasePulse 2s ease-in-out infinite":"none",boxShadow:Ve?`0 0 16px ${X.violetG}`:ot?"0 0 8px rgba(139,92,246,0.15)":"none"},children:ot?e.jsx(sr,{size:14,color:"#fff",strokeWidth:3}):e.jsx(ht,{size:14,color:Ve?X.violet:Ce?X.tm:X.ts})})]},ie.id)})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse 60% 50% at 50% 30%, rgba(139,92,246,0.04) 0%, transparent 70%)"}}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",maxWidth:"720px",width:"100%",margin:"0 auto",padding:"0 48px",position:"relative",zIndex:1,animation:"bookGlow 6s ease-in-out infinite"},children:[e.jsxs("div",{style:{flexShrink:0,paddingTop:"28px",paddingBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",marginBottom:"12px"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"4px 12px",borderRadius:"100px",backgroundColor:ce?"rgba(59,130,246,0.15)":X.violetM,border:`1px solid ${ce?"rgba(59,130,246,0.3)":"rgba(139,92,246,0.3)"}`,color:ce?"#60A5FA":X.violet,fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.06em"},children:ce?e.jsxs(e.Fragment,{children:[e.jsx(ko,{size:11})," LinkedIn Import"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{size:11})," Persona Onboarding"]})}),(ce==null?void 0:ce.profileImageUrl)&&De==="linkedin-done"&&e.jsx("img",{src:ce.profileImageUrl,alt:"",style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${X.violet}40`,boxShadow:`0 4px 16px ${X.violetG}`,flexShrink:0}}),e.jsx("div",{style:{flex:1},children:e.jsx("h1",{style:{fontSize:"18px",fontWeight:700,color:X.tp,margin:0,letterSpacing:"-0.02em"},children:"Crer votre agent personnel"})})]}),re&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"3px",borderRadius:"100px",backgroundColor:X.surfaceEl,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${o/(qr-1)*100}%`,background:`linear-gradient(90deg, ${X.violet}, #A78BFA)`,borderRadius:"100px",transition:"width 0.6s cubic-bezier(0.34,1.56,0.64,1)"}})}),e.jsx("span",{style:{fontSize:"10px",color:X.violet,fontWeight:600,flexShrink:0},children:(Se=vu[o])==null?void 0:Se.label}),e.jsxs("span",{style:{fontSize:"10px",color:X.tm,fontFamily:X.mono,flexShrink:0},children:[o+1,"/",qr]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"8px"},children:[De===null?si():De==="linkedin"&&et!=="done"?Ui():e.jsxs(e.Fragment,{children:[bt.map((ie,Oe)=>e.jsx("p",{style:{margin:"0 0 10px",fontSize:"15px",lineHeight:"1.7",color:X.ts,opacity:.5,fontStyle:"italic"},children:ie},Oe)),e.jsxs("div",{style:{animation:"phaseReveal 0.5s ease-out forwards"},children:[e.jsxs("p",{style:{margin:"0 0 4px",fontSize:"17px",lineHeight:"1.7",color:X.tp,fontWeight:500,display:"flex",gap:o===8?"10px":"0"},children:[o===8&&e.jsx(qd,{size:18,style:{color:X.violet,marginTop:"4px",flexShrink:0}}),e.jsx(V6,{text:ae[o]||"",onComplete:()=>b(!1)},`step-${o}`)]}),e.jsx("div",{style:{minHeight:"220px",marginTop:"8px"},children:mr()})]},`phase-${o}`)]}),e.jsx("div",{ref:i,style:{height:"20px"}})]})]})]})]})}function Hn({text:t="Chargement..."}){return e.jsx("span",{style:{color:X.tm,fontSize:"12px",marginTop:"16px",display:"block"},children:t})}function Wm({items:t}){return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",padding:"10px 12px",backgroundColor:X.violetG,borderRadius:"8px",border:`1px solid ${X.violetM}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:X.violet,fontWeight:600,marginRight:"4px",lineHeight:"22px"},children:[t.length," slectionne",t.length>1?"s":""," :"]}),t.map(i=>e.jsx("span",{style:{fontSize:"11px",color:X.tp,backgroundColor:X.violetM,padding:"2px 8px",borderRadius:"100px",fontWeight:500},children:i},i))]})}function Nm({disabled:t,onClick:i,label:s}){return e.jsxs("button",{disabled:t,onClick:i,style:{backgroundColor:t?X.surfaceEl:X.tp,color:t?X.tm:X.bg,border:"none",borderRadius:"6px",padding:"10px 24px",fontSize:"12px",fontWeight:600,cursor:t?"default":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:[s," ",e.jsx(Vn,{size:14})]})}function q6({agentName:t,roleLabel:i,skills:s,selectedSkills:o,customSkills:u,onToggleSkill:S,onAddCustomSkill:b,onRemoveCustomSkill:l}){const[c,m]=L.useState(""),[v,d]=L.useState(null),y=420,_=y/2,j=y/2,C=148,h=[...s.map(w=>({...w,custom:!1})),...u.map(w=>({...w,custom:!0}))],p=h.length,f=h.map((w,R)=>{const A=(R*360/Math.max(p,1)-90)*(Math.PI/180),z=_+C*Math.cos(A),E=j+C*Math.sin(A),B=A+.2,O=C*.45,H=_+O*Math.cos(B),K=j+O*Math.sin(B),U=`M ${_} ${j} Q ${H} ${K} ${z} ${E}`,ee=o.includes(w.name);return{...w,x:z,y:E,path:U,isSelected:ee,index:R}});function g(){const w=c.trim();w&&(h.some(R=>R.name.toLowerCase()===w.toLowerCase())||(b({name:w,color:"#F59E0B",category:"custom",description:"Comptence personnalise"}),m("")))}return e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsxs("svg",{viewBox:`0 0 ${y} ${y}`,style:{width:"85%",maxHeight:"75%",overflow:"visible",pointerEvents:"none"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"icGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),e.jsx("circle",{cx:_,cy:j,r:C,fill:"none",stroke:X.border,strokeWidth:"1",strokeDasharray:"4 6",opacity:"0.5"}),f.map((w,R)=>e.jsx("path",{d:w.path,fill:"none",stroke:w.isSelected?w.color||X.violet:X.border,strokeWidth:w.isSelected?1.8:.8,strokeOpacity:w.isSelected?.5:.15,style:{transition:"all 0.5s ease"}},`ic-conn-${R}`)),f.map((w,R)=>{const A=w.x>_,z=v===R,E=w.isSelected,B=w.color||X.violet;return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all",animation:`constellationBirth 0.5s ease-out forwards ${R*80}ms`,opacity:0,transformOrigin:`${w.x}px ${w.y}px`},onMouseEnter:()=>d(R),onMouseLeave:()=>d(null),onClick:()=>w.custom&&E?l(w.name):S(w.name),children:[(E||z)&&e.jsx("circle",{cx:w.x,cy:w.y,r:"28",fill:B,fillOpacity:E?.1:.05,style:{transition:"all 0.3s"}}),e.jsx("circle",{cx:w.x,cy:w.y,r:"20",fill:E?`${B}22`:z?X.surfaceEl:X.surface,stroke:E?B:z?X.borderS:X.border,strokeWidth:E?2.5:1.5,style:{transition:"all 0.3s ease"}}),E&&e.jsx("circle",{cx:w.x,cy:w.y,r:"5",fill:B,style:{transition:"all 0.3s"}}),!E&&e.jsx("circle",{cx:w.x,cy:w.y,r:"2",fill:X.tm}),w.custom&&e.jsx("text",{x:w.x,y:w.y-24,textAnchor:"middle",fill:X.warning,style:{fontSize:"8px",fontWeight:700,fontFamily:X.mono},children:"CUSTOM"}),e.jsx("text",{x:w.x+(A?28:-28),y:w.y+1,textAnchor:A?"start":"end",fill:E?X.tp:z?X.ts:X.tm,style:{fontSize:"10px",fontWeight:E?600:400,fontFamily:X.font,transition:"all 0.2s",pointerEvents:"none"},children:w.name}),e.jsx("text",{x:w.x+(A?28:-28),y:w.y+13,textAnchor:A?"start":"end",fill:X.tm,style:{fontSize:"7px",textTransform:"uppercase",fontFamily:X.mono,letterSpacing:"0.05em",pointerEvents:"none"},children:w.category})]},`ic-n-${R}`)}),e.jsxs("g",{children:[e.jsx("circle",{cx:_,cy:j,r:"44",fill:X.violet,fillOpacity:"0.06"}),e.jsx("circle",{cx:_,cy:j,r:"38",fill:X.bg,stroke:X.violet,strokeWidth:"2.5",filter:"url(#icGlow)"}),e.jsx("text",{x:_,y:j-4,textAnchor:"middle",fill:X.tp,style:{fontSize:"13px",fontWeight:700,fontFamily:X.font},children:t}),e.jsx("text",{x:_,y:j+11,textAnchor:"middle",fill:X.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:X.mono,letterSpacing:"0.04em",opacity:.8},children:i}),e.jsx("circle",{cx:_+30,cy:j-28,r:"12",fill:X.violet}),e.jsx("text",{x:_+30,y:j-24,textAnchor:"middle",fill:"#fff",style:{fontSize:"10px",fontWeight:700,fontFamily:X.mono},children:o.length})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{value:c,onChange:w=>m(w.target.value),onKeyDown:w=>w.key==="Enter"&&g(),placeholder:"+ Ajouter une comptence...",style:{backgroundColor:X.surface,border:`1px solid ${X.border}`,borderRadius:"100px",padding:"8px 16px",color:X.tp,fontSize:"12px",fontFamily:X.font,outline:"none",width:"200px",transition:"border-color 0.2s"},onFocus:w=>w.target.style.borderColor=X.violet,onBlur:w=>w.target.style.borderColor=X.border}),e.jsx("button",{onClick:g,disabled:!c.trim(),style:{backgroundColor:c.trim()?X.violet:X.surfaceEl,color:"#fff",border:"none",borderRadius:"100px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c.trim()?"pointer":"default",fontSize:"16px",fontWeight:700,transition:"all 0.2s"},children:"+"})]})]})}function G6({agentName:t,roleLabel:i,skills:s=[],onComplete:o}){const c=L.useRef(o);c.current=o,L.useEffect(()=>{const v=s.length*350+1500,d=setTimeout(()=>{var y;return(y=c.current)==null?void 0:y.call(c)},v);return()=>clearTimeout(d)},[s.length]);const m=s.map((v,d)=>{const y=(d*360/s.length-90)*(Math.PI/180),_=210+150*Math.cos(y),j=210+150*Math.sin(y),C=y+.25,h=150*.5,p=210+h*Math.cos(C),f=210+h*Math.sin(C),g=`M 210 210 Q ${p} ${f} ${_} ${j}`;return{...v,x:_,y:j,path:g,delay:d*350}});return e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{viewBox:"0 0 420 420",style:{width:"88%",height:"88%",overflow:"visible"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"conGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),[0,1,2].map(v=>e.jsx("circle",{cx:210,cy:210,r:"80",fill:"none",stroke:X.violet,strokeWidth:"0.8",opacity:"0",style:{transformOrigin:"210px 210px",animation:`ambientRing ${3+v}s ease-out infinite ${v*1.2}s`}},`ring-${v}`)),m.map((v,d)=>e.jsx("path",{d:v.path,fill:"none",stroke:v.color||X.violet,strokeWidth:"1.5",strokeOpacity:"0.35",strokeDasharray:"300",strokeDashoffset:"300",style:{animation:`constellationDrawConn 1s ease-out forwards ${v.delay}ms`}},`conn-${d}`)),m.map((v,d)=>{const y=v.x>210;return v.y>210,e.jsxs("g",{style:{transformOrigin:`${v.x}px ${v.y}px`,opacity:0,animation:`constellationBirth 0.7s cubic-bezier(0.34,1.56,0.64,1) forwards ${v.delay+200}ms`},children:[e.jsx("circle",{cx:v.x,cy:v.y,r:"26",fill:v.color||X.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"20",fill:X.surfaceEl,stroke:v.color||X.violet,strokeWidth:"2"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"4",fill:v.color||X.violet}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y-1,textAnchor:y?"start":"end",fill:X.tp,style:{fontSize:"11px",fontWeight:500,fontFamily:X.font},children:v.name}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y+12,textAnchor:y?"start":"end",fill:X.tm,style:{fontSize:"8px",textTransform:"uppercase",fontFamily:X.mono,letterSpacing:"0.06em"},children:v.category})]},`sn-${d}`)}),e.jsxs("g",{style:{transformOrigin:"210px 210px",animation:"constellationBreathe 3s ease-in-out infinite"},children:[e.jsx("circle",{cx:210,cy:210,r:"48",fill:X.violet,fillOpacity:"0.05"}),e.jsx("circle",{cx:210,cy:210,r:"44",fill:X.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:210,cy:210,r:"38",fill:X.bg,stroke:X.violet,strokeWidth:"2.5",filter:"url(#conGlow)"}),e.jsx("text",{x:210,y:207,textAnchor:"middle",fill:X.tp,style:{fontSize:"14px",fontWeight:700,fontFamily:X.font,letterSpacing:"-0.01em"},children:t}),e.jsx("text",{x:210,y:223,textAnchor:"middle",fill:X.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:X.mono,letterSpacing:"0.05em",opacity:.8},children:i})]}),Array.from({length:10}).map((v,d)=>{const y=d*36*(Math.PI/180),_=Math.cos(y)*220,j=Math.sin(y)*220;return e.jsx("circle",{cx:210,cy:210,r:"1.5",fill:X.tp,style:{"--dx":`${_}px`,"--dy":`${j}px`,opacity:0,animation:`particleDrift ${2.5+d%3*.5}s ease-out infinite ${d*.4}s`}},`p-${d}`)})]})})}function Hm({children:t}){return Ko()?t:e.jsx(c_,{to:"/login",replace:!0})}function Y6(){return e.jsx(__,{children:e.jsxs(h_,{children:[e.jsx(Wt,{path:"/preview/:projectId",element:e.jsx(D6,{})}),e.jsx(Wt,{path:"/login",element:e.jsx(A_,{})}),e.jsx(Wt,{path:"/register",element:e.jsx(L_,{})}),e.jsx(Wt,{path:"/setup-claude",element:e.jsx(Hm,{children:e.jsx(z2,{})})}),e.jsxs(Wt,{path:"/",element:e.jsx(Hm,{children:e.jsx(T_,{})}),children:[e.jsx(Wt,{index:!0,element:e.jsx(t6,{})}),e.jsx(Wt,{path:"marketplace",element:e.jsx(B6,{})}),e.jsx(Wt,{path:"marketplace/:name",element:e.jsx($6,{})}),e.jsx(Wt,{path:"agents",element:e.jsx(d6,{})}),e.jsx(Wt,{path:"agents/new",element:e.jsx(f6,{})}),e.jsx(Wt,{path:"agents/teams",element:e.jsx(E6,{})}),e.jsx(Wt,{path:"agents/stats",element:e.jsx(R6,{})}),e.jsx(Wt,{path:"skills",element:e.jsx(W6,{})}),e.jsx(Wt,{path:"skills/create",element:e.jsx(Fm,{})}),e.jsx(Wt,{path:"skills/:id/edit",element:e.jsx(Fm,{})}),e.jsx(Wt,{path:"agents/:name/edit",element:e.jsx(w6,{})}),e.jsx(Wt,{path:"agents/:name",element:e.jsx(v6,{})}),e.jsx(Wt,{path:"project/:id",element:e.jsx(A6,{})}),e.jsx(Wt,{path:"compare/:id",element:e.jsx(z6,{})}),e.jsx(Wt,{path:"personaboarding",element:e.jsx(K6,{})}),e.jsx(Wt,{path:"sessions",element:e.jsx(I6,{})})]})]})})}yb.createRoot(document.getElementById("root")).render(e.jsx(Ms.StrictMode,{children:e.jsx(Y6,{})}));
