function lb(t,i){for(var s=0;s<i.length;s++){const o=i[s];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const S=Object.getOwnPropertyDescriptor(o,u);S&&Object.defineProperty(t,u,S.get?S:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const S of u)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(u){const S={};return u.integrity&&(S.integrity=u.integrity),u.referrerPolicy&&(S.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?S.credentials="include":u.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function o(u){if(u.ep)return;u.ep=!0;const S=s(u);fetch(u.href,S)}})();function qm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Od={exports:{}},Eo={},$d={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function cb(){if(Ig)return yt;Ig=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),b=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),d=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=d&&D[d]||D["@@iterator"],typeof D=="function"?D:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function h(D,W,pe){this.props=D,this.context=W,this.refs=w,this.updater=pe||_}h.prototype.isReactComponent={},h.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},h.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function p(){}p.prototype=h.prototype;function f(D,W,pe){this.props=D,this.context=W,this.refs=w,this.updater=pe||_}var g=f.prototype=new p;g.constructor=f,j(g,h.prototype),g.isPureReactComponent=!0;var C=Array.isArray,R=Object.prototype.hasOwnProperty,z={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(D,W,pe){var me,Se={},Ee=null,X=null;if(W!=null)for(me in W.ref!==void 0&&(X=W.ref),W.key!==void 0&&(Ee=""+W.key),W)R.call(W,me)&&!A.hasOwnProperty(me)&&(Se[me]=W[me]);var F=arguments.length-2;if(F===1)Se.children=pe;else if(1<F){for(var ve=Array(F),se=0;se<F;se++)ve[se]=arguments[se+2];Se.children=ve}if(D&&D.defaultProps)for(me in F=D.defaultProps,F)Se[me]===void 0&&(Se[me]=F[me]);return{$$typeof:t,type:D,key:Ee,ref:X,props:Se,_owner:z.current}}function B(D,W){return{$$typeof:t,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function P(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function N(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(pe){return W[pe]})}var K=/\/+/g;function U(D,W){return typeof D=="object"&&D!==null&&D.key!=null?N(""+D.key):W.toString(36)}function ee(D,W,pe,me,Se){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var X=!1;if(D===null)X=!0;else switch(Ee){case"string":case"number":X=!0;break;case"object":switch(D.$$typeof){case t:case i:X=!0}}if(X)return X=D,Se=Se(X),D=me===""?"."+U(X,0):me,C(Se)?(pe="",D!=null&&(pe=D.replace(K,"$&/")+"/"),ee(Se,W,pe,"",function(se){return se})):Se!=null&&(P(Se)&&(Se=B(Se,pe+(!Se.key||X&&X.key===Se.key?"":(""+Se.key).replace(K,"$&/")+"/")+D)),W.push(Se)),1;if(X=0,me=me===""?".":me+":",C(D))for(var F=0;F<D.length;F++){Ee=D[F];var ve=me+U(Ee,F);X+=ee(Ee,W,pe,ve,Se)}else if(ve=y(D),typeof ve=="function")for(D=ve.call(D),F=0;!(Ee=D.next()).done;)Ee=Ee.value,ve=me+U(Ee,F++),X+=ee(Ee,W,pe,ve,Se);else if(Ee==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return X}function V(D,W,pe){if(D==null)return D;var me=[],Se=0;return ee(D,me,"","",function(Ee){return W.call(pe,Ee,Se++)}),me}function de(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(pe){(D._status===0||D._status===-1)&&(D._status=1,D._result=pe)},function(pe){(D._status===0||D._status===-1)&&(D._status=2,D._result=pe)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var J={current:null},Y={transition:null},M={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:z};function I(){throw Error("act(...) is not supported in production builds of React.")}return yt.Children={map:V,forEach:function(D,W,pe){V(D,function(){W.apply(this,arguments)},pe)},count:function(D){var W=0;return V(D,function(){W++}),W},toArray:function(D){return V(D,function(W){return W})||[]},only:function(D){if(!P(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},yt.Component=h,yt.Fragment=s,yt.Profiler=u,yt.PureComponent=f,yt.StrictMode=o,yt.Suspense=c,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,yt.act=I,yt.cloneElement=function(D,W,pe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var me=j({},D.props),Se=D.key,Ee=D.ref,X=D._owner;if(W!=null){if(W.ref!==void 0&&(Ee=W.ref,X=z.current),W.key!==void 0&&(Se=""+W.key),D.type&&D.type.defaultProps)var F=D.type.defaultProps;for(ve in W)R.call(W,ve)&&!A.hasOwnProperty(ve)&&(me[ve]=W[ve]===void 0&&F!==void 0?F[ve]:W[ve])}var ve=arguments.length-2;if(ve===1)me.children=pe;else if(1<ve){F=Array(ve);for(var se=0;se<ve;se++)F[se]=arguments[se+2];me.children=F}return{$$typeof:t,type:D.type,key:Se,ref:Ee,props:me,_owner:X}},yt.createContext=function(D){return D={$$typeof:b,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:S,_context:D},D.Consumer=D},yt.createElement=E,yt.createFactory=function(D){var W=E.bind(null,D);return W.type=D,W},yt.createRef=function(){return{current:null}},yt.forwardRef=function(D){return{$$typeof:l,render:D}},yt.isValidElement=P,yt.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:de}},yt.memo=function(D,W){return{$$typeof:m,type:D,compare:W===void 0?null:W}},yt.startTransition=function(D){var W=Y.transition;Y.transition={};try{D()}finally{Y.transition=W}},yt.unstable_act=I,yt.useCallback=function(D,W){return J.current.useCallback(D,W)},yt.useContext=function(D){return J.current.useContext(D)},yt.useDebugValue=function(){},yt.useDeferredValue=function(D){return J.current.useDeferredValue(D)},yt.useEffect=function(D,W){return J.current.useEffect(D,W)},yt.useId=function(){return J.current.useId()},yt.useImperativeHandle=function(D,W,pe){return J.current.useImperativeHandle(D,W,pe)},yt.useInsertionEffect=function(D,W){return J.current.useInsertionEffect(D,W)},yt.useLayoutEffect=function(D,W){return J.current.useLayoutEffect(D,W)},yt.useMemo=function(D,W){return J.current.useMemo(D,W)},yt.useReducer=function(D,W,pe){return J.current.useReducer(D,W,pe)},yt.useRef=function(D){return J.current.useRef(D)},yt.useState=function(D){return J.current.useState(D)},yt.useSyncExternalStore=function(D,W,pe){return J.current.useSyncExternalStore(D,W,pe)},yt.useTransition=function(){return J.current.useTransition()},yt.version="18.3.1",yt}var Dg;function uh(){return Dg||(Dg=1,$d.exports=cb()),$d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function db(){if(Mg)return Eo;Mg=1;var t=uh(),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function b(l,c,m){var v,d={},y=null,_=null;m!==void 0&&(y=""+m),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(_=c.ref);for(v in c)o.call(c,v)&&!S.hasOwnProperty(v)&&(d[v]=c[v]);if(l&&l.defaultProps)for(v in c=l.defaultProps,c)d[v]===void 0&&(d[v]=c[v]);return{$$typeof:i,type:l,key:y,ref:_,props:d,_owner:u.current}}return Eo.Fragment=s,Eo.jsx=b,Eo.jsxs=b,Eo}var Bg;function ub(){return Bg||(Bg=1,Od.exports=db()),Od.exports}var e=ub(),L=uh();const $s=qm(L),hb=lb({__proto__:null,default:$s},[L]);var ul={},Fd={exports:{}},Wr={},Wd={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function pb(){return Pg||(Pg=1,(function(t){function i(Y,M){var I=Y.length;Y.push(M);e:for(;0<I;){var D=I-1>>>1,W=Y[D];if(0<u(W,M))Y[D]=M,Y[I]=W,I=D;else break e}}function s(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var M=Y[0],I=Y.pop();if(I!==M){Y[0]=I;e:for(var D=0,W=Y.length,pe=W>>>1;D<pe;){var me=2*(D+1)-1,Se=Y[me],Ee=me+1,X=Y[Ee];if(0>u(Se,I))Ee<W&&0>u(X,Se)?(Y[D]=X,Y[Ee]=I,D=Ee):(Y[D]=Se,Y[me]=I,D=me);else if(Ee<W&&0>u(X,I))Y[D]=X,Y[Ee]=I,D=Ee;else break e}}return M}function u(Y,M){var I=Y.sortIndex-M.sortIndex;return I!==0?I:Y.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;t.unstable_now=function(){return S.now()}}else{var b=Date,l=b.now();t.unstable_now=function(){return b.now()-l}}var c=[],m=[],v=1,d=null,y=3,_=!1,j=!1,w=!1,h=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(Y){for(var M=s(m);M!==null;){if(M.callback===null)o(m);else if(M.startTime<=Y)o(m),M.sortIndex=M.expirationTime,i(c,M);else break;M=s(m)}}function C(Y){if(w=!1,g(Y),!j)if(s(c)!==null)j=!0,de(R);else{var M=s(m);M!==null&&J(C,M.startTime-Y)}}function R(Y,M){j=!1,w&&(w=!1,p(E),E=-1),_=!0;var I=y;try{for(g(M),d=s(c);d!==null&&(!(d.expirationTime>M)||Y&&!N());){var D=d.callback;if(typeof D=="function"){d.callback=null,y=d.priorityLevel;var W=D(d.expirationTime<=M);M=t.unstable_now(),typeof W=="function"?d.callback=W:d===s(c)&&o(c),g(M)}else o(c);d=s(c)}if(d!==null)var pe=!0;else{var me=s(m);me!==null&&J(C,me.startTime-M),pe=!1}return pe}finally{d=null,y=I,_=!1}}var z=!1,A=null,E=-1,B=5,P=-1;function N(){return!(t.unstable_now()-P<B)}function K(){if(A!==null){var Y=t.unstable_now();P=Y;var M=!0;try{M=A(!0,Y)}finally{M?U():(z=!1,A=null)}}else z=!1}var U;if(typeof f=="function")U=function(){f(K)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,V=ee.port2;ee.port1.onmessage=K,U=function(){V.postMessage(null)}}else U=function(){h(K,0)};function de(Y){A=Y,z||(z=!0,U())}function J(Y,M){E=h(function(){Y(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){j||_||(j=!0,de(R))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var I=y;y=M;try{return Y()}finally{y=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,M){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var I=y;y=Y;try{return M()}finally{y=I}},t.unstable_scheduleCallback=function(Y,M,I){var D=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?D+I:D):I=D,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=I+W,Y={id:v++,callback:M,priorityLevel:Y,startTime:I,expirationTime:W,sortIndex:-1},I>D?(Y.sortIndex=I,i(m,Y),s(c)===null&&Y===s(m)&&(w?(p(E),E=-1):w=!0,J(C,I-D))):(Y.sortIndex=W,i(c,Y),j||_||(j=!0,de(R))),Y},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Y){var M=y;return function(){var I=y;y=M;try{return Y.apply(this,arguments)}finally{y=I}}}})(Nd)),Nd}var Og;function fb(){return Og||(Og=1,Wd.exports=pb()),Wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function gb(){if($g)return Wr;$g=1;var t=uh(),i=fb();function s(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function S(r,n){b(r,n),b(r+"Capture",n)}function b(r,n){for(u[r]=n,r=0;r<n.length;r++)o.add(n[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},d={};function y(r){return c.call(d,r)?!0:c.call(v,r)?!1:m.test(r)?d[r]=!0:(v[r]=!0,!1)}function _(r,n,a,x){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return x?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,n,a,x){if(n===null||typeof n>"u"||_(r,n,a,x))return!0;if(x)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function w(r,n,a,x,k,T,$){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=x,this.attributeNamespace=k,this.mustUseProperty=a,this.propertyName=r,this.type=n,this.sanitizeURL=T,this.removeEmptyString=$}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){h[r]=new w(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];h[n]=new w(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){h[r]=new w(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){h[r]=new w(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){h[r]=new w(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){h[r]=new w(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){h[r]=new w(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){h[r]=new w(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){h[r]=new w(r,5,!1,r.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function f(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new w(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(p,f);h[n]=new w(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(p,f);h[n]=new w(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){h[r]=new w(r,1,!1,r.toLowerCase(),null,!1,!1)}),h.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){h[r]=new w(r,1,!1,r.toLowerCase(),null,!0,!0)});function g(r,n,a,x){var k=h.hasOwnProperty(n)?h[n]:null;(k!==null?k.type!==0:x||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,a,k,x)&&(a=null),x||k===null?y(n)&&(a===null?r.removeAttribute(n):r.setAttribute(n,""+a)):k.mustUseProperty?r[k.propertyName]=a===null?k.type===3?!1:"":a:(n=k.attributeName,x=k.attributeNamespace,a===null?r.removeAttribute(n):(k=k.type,a=k===3||k===4&&a===!0?"":""+a,x?r.setAttributeNS(x,n,a):r.setAttribute(n,a))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),z=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Y=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var I=Object.assign,D;function W(r){if(D===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return`
`+D+r}var pe=!1;function me(r,n){if(!r||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(be){var x=be}Reflect.construct(r,[],n)}else{try{n.call()}catch(be){x=be}r.call(n.prototype)}else{try{throw Error()}catch(be){x=be}r()}}catch(be){if(be&&x&&typeof be.stack=="string"){for(var k=be.stack.split(`
`),T=x.stack.split(`
`),$=k.length-1,G=T.length-1;1<=$&&0<=G&&k[$]!==T[G];)G--;for(;1<=$&&0<=G;$--,G--)if(k[$]!==T[G]){if($!==1||G!==1)do if($--,G--,0>G||k[$]!==T[G]){var te=`
`+k[$].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=$&&0<=G);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?W(r):""}function Se(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=me(r.type,!1),r;case 11:return r=me(r.type.render,!1),r;case 1:return r=me(r.type,!0),r;default:return""}}function Ee(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case z:return"Portal";case B:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case ee:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case N:return(r.displayName||"Context")+".Consumer";case P:return(r._context.displayName||"Context")+".Provider";case K:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return n=r.displayName||null,n!==null?n:Ee(r.type)||"Memo";case de:n=r._payload,r=r._init;try{return Ee(r(n))}catch{}}return null}function X(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function F(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ve(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function se(r){var n=ve(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),x=""+r[n];if(!r.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var k=a.get,T=a.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return k.call(this)},set:function($){x=""+$,T.call(this,$)}}),Object.defineProperty(r,n,{enumerable:a.enumerable}),{getValue:function(){return x},setValue:function($){x=""+$},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function Me(r){r._valueTracker||(r._valueTracker=se(r))}function Z(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var a=n.getValue(),x="";return r&&(x=ve(r)?r.checked?"true":"false":r.value),r=x,r!==a?(n.setValue(r),!0):!1}function ke(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function he(r,n){var a=n.checked;return I({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ie(r,n){var a=n.defaultValue==null?"":n.defaultValue,x=n.checked!=null?n.checked:n.defaultChecked;a=F(n.value!=null?n.value:a),r._wrapperState={initialChecked:x,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Oe(r,n){n=n.checked,n!=null&&g(r,"checked",n,!1)}function $e(r,n){Oe(r,n);var a=F(n.value),x=n.type;if(a!=null)x==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(x==="submit"||x==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?Ne(r,n.type,a):n.hasOwnProperty("defaultValue")&&Ne(r,n.type,F(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function je(r,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var x=n.type;if(!(x!=="submit"&&x!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,a||n===r.value||(r.value=n),r.defaultValue=n}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Ne(r,n,a){(n!=="number"||ke(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Q=Array.isArray;function le(r,n,a,x){if(r=r.options,n){n={};for(var k=0;k<a.length;k++)n["$"+a[k]]=!0;for(a=0;a<r.length;a++)k=n.hasOwnProperty("$"+r[a].value),r[a].selected!==k&&(r[a].selected=k),k&&x&&(r[a].defaultSelected=!0)}else{for(a=""+F(a),n=null,k=0;k<r.length;k++){if(r[k].value===a){r[k].selected=!0,x&&(r[k].defaultSelected=!0);return}n!==null||r[k].disabled||(n=r[k])}n!==null&&(n.selected=!0)}}function We(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return I({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ze(r,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(s(92));if(Q(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),a=n}r._wrapperState={initialValue:F(a)}}function Xe(r,n){var a=F(n.value),x=F(n.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),n.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),x!=null&&(r.defaultValue=""+x)}function mt(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function Jt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?Jt(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rt,Mt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,x,k){MSApp.execUnsafeLocalFunction(function(){return r(n,a,x,k)})}:r})(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Rt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function xt(r,n){if(n){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=n;return}}r.textContent=n}var Pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];Object.keys(Pt).forEach(function(r){ht.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),Pt[n]=Pt[r]})});function zr(r,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||Pt.hasOwnProperty(r)&&Pt[r]?(""+n).trim():n+"px"}function pr(r,n){r=r.style;for(var a in n)if(n.hasOwnProperty(a)){var x=a.indexOf("--")===0,k=zr(a,n[a],x);a==="float"&&(a="cssFloat"),x?r.setProperty(a,k):r[a]=k}}var Ii=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(r,n){if(n){if(Ii[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function Lr(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kr=null;function oe(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var He=null,qe=null,pt=null;function wt(r){if(r=ho(r)){if(typeof He!="function")throw Error(s(280));var n=r.stateNode;n&&(n=ja(n),He(r.stateNode,r.type,n))}}function Qt(r){qe?pt?pt.push(r):pt=[r]:qe=r}function gt(){if(qe){var r=qe,n=pt;if(pt=qe=null,wt(r),n)for(r=0;r<n.length;r++)wt(n[r])}}function Gt(r,n){return r(n)}function Ir(){}var Xr=!1;function oi(r,n,a){if(Xr)return r(n,a);Xr=!0;try{return Gt(r,n,a)}finally{Xr=!1,(qe!==null||pt!==null)&&(Ir(),gt())}}function Dr(r,n){var a=r.stateNode;if(a===null)return null;var x=ja(a);if(x===null)return null;a=x[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(r=r.type,x=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!x;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Ur=!1;if(l)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Ur=!1}function Xi(r,n,a,x,k,T,$,G,te){var be=Array.prototype.slice.call(arguments,3);try{n.apply(a,be)}catch(Le){this.onError(Le)}}var Mr=!1,vr=null,li=!1,O=null,re={onError:function(r){Mr=!0,vr=r}};function _e(r,n,a,x,k,T,$,G,te){Mr=!1,vr=null,Xi.apply(re,arguments)}function De(r,n,a,x,k,T,$,G,te){if(_e.apply(this,arguments),Mr){if(Mr){var be=vr;Mr=!1,vr=null}else throw Error(s(198));li||(li=!0,O=be)}}function ct(r){var n=r,a=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,(n.flags&4098)!==0&&(a=n.return),r=n.return;while(r)}return n.tag===3?a:null}function ft(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function At(r){if(ct(r)!==r)throw Error(s(188))}function nr(r){var n=r.alternate;if(!n){if(n=ct(r),n===null)throw Error(s(188));return n!==r?null:r}for(var a=r,x=n;;){var k=a.return;if(k===null)break;var T=k.alternate;if(T===null){if(x=k.return,x!==null){a=x;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===a)return At(k),r;if(T===x)return At(k),n;T=T.sibling}throw Error(s(188))}if(a.return!==x.return)a=k,x=T;else{for(var $=!1,G=k.child;G;){if(G===a){$=!0,a=k,x=T;break}if(G===x){$=!0,x=k,a=T;break}G=G.sibling}if(!$){for(G=T.child;G;){if(G===a){$=!0,a=T,x=k;break}if(G===x){$=!0,x=T,a=k;break}G=G.sibling}if(!$)throw Error(s(189))}}if(a.alternate!==x)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:n}function Di(r){return r=nr(r),r!==null?we(r):null}function we(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=we(r);if(n!==null)return n;r=r.sibling}return null}var rt=i.unstable_scheduleCallback,vt=i.unstable_cancelCallback,bt=i.unstable_shouldYield,Re=i.unstable_requestPaint,ot=i.unstable_now,nt=i.unstable_getCurrentPriorityLevel,gr=i.unstable_ImmediatePriority,sa=i.unstable_UserBlockingPriority,oa=i.unstable_NormalPriority,S1=i.unstable_LowPriority,lp=i.unstable_IdlePriority,aa=null,_i=null;function w1(r){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(aa,r,void 0,(r.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:j1,C1=Math.log,k1=Math.LN2;function j1(r){return r>>>=0,r===0?32:31-(C1(r)/k1|0)|0}var la=64,ca=4194304;function qs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function da(r,n){var a=r.pendingLanes;if(a===0)return 0;var x=0,k=r.suspendedLanes,T=r.pingedLanes,$=a&268435455;if($!==0){var G=$&~k;G!==0?x=qs(G):(T&=$,T!==0&&(x=qs(T)))}else $=a&~k,$!==0?x=qs($):T!==0&&(x=qs(T));if(x===0)return 0;if(n!==0&&n!==x&&(n&k)===0&&(k=x&-x,T=n&-n,k>=T||k===16&&(T&4194240)!==0))return n;if((x&4)!==0&&(x|=a&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=x;0<n;)a=31-ci(n),k=1<<a,x|=r[a],n&=~k;return x}function E1(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R1(r,n){for(var a=r.suspendedLanes,x=r.pingedLanes,k=r.expirationTimes,T=r.pendingLanes;0<T;){var $=31-ci(T),G=1<<$,te=k[$];te===-1?((G&a)===0||(G&x)!==0)&&(k[$]=E1(G,n)):te<=n&&(r.expiredLanes|=G),T&=~G}}function sc(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function cp(){var r=la;return la<<=1,(la&4194240)===0&&(la=64),r}function oc(r){for(var n=[],a=0;31>a;a++)n.push(r);return n}function Gs(r,n,a){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-ci(n),r[n]=a}function T1(r,n){var a=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var x=r.eventTimes;for(r=r.expirationTimes;0<a;){var k=31-ci(a),T=1<<k;n[k]=0,x[k]=-1,r[k]=-1,a&=~T}}function ac(r,n){var a=r.entangledLanes|=n;for(r=r.entanglements;a;){var x=31-ci(a),k=1<<x;k&n|r[x]&n&&(r[x]|=n),a&=~k}}var jt=0;function dp(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var up,lc,hp,pp,fp,cc=!1,ua=[],Ji=null,Qi=null,Zi=null,Ys=new Map,Xs=new Map,en=[],A1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gp(r,n){switch(r){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Ys.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(n.pointerId)}}function Js(r,n,a,x,k,T){return r===null||r.nativeEvent!==T?(r={blockedOn:n,domEventName:a,eventSystemFlags:x,nativeEvent:T,targetContainers:[k]},n!==null&&(n=ho(n),n!==null&&lc(n)),r):(r.eventSystemFlags|=x,n=r.targetContainers,k!==null&&n.indexOf(k)===-1&&n.push(k),r)}function z1(r,n,a,x,k){switch(n){case"focusin":return Ji=Js(Ji,r,n,a,x,k),!0;case"dragenter":return Qi=Js(Qi,r,n,a,x,k),!0;case"mouseover":return Zi=Js(Zi,r,n,a,x,k),!0;case"pointerover":var T=k.pointerId;return Ys.set(T,Js(Ys.get(T)||null,r,n,a,x,k)),!0;case"gotpointercapture":return T=k.pointerId,Xs.set(T,Js(Xs.get(T)||null,r,n,a,x,k)),!0}return!1}function xp(r){var n=In(r.target);if(n!==null){var a=ct(n);if(a!==null){if(n=a.tag,n===13){if(n=ft(a),n!==null){r.blockedOn=n,fp(r.priority,function(){hp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ha(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var a=uc(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var x=new a.constructor(a.type,a);kr=x,a.target.dispatchEvent(x),kr=null}else return n=ho(a),n!==null&&lc(n),r.blockedOn=a,!1;n.shift()}return!0}function mp(r,n,a){ha(r)&&a.delete(n)}function L1(){cc=!1,Ji!==null&&ha(Ji)&&(Ji=null),Qi!==null&&ha(Qi)&&(Qi=null),Zi!==null&&ha(Zi)&&(Zi=null),Ys.forEach(mp),Xs.forEach(mp)}function Qs(r,n){r.blockedOn===n&&(r.blockedOn=null,cc||(cc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,L1)))}function Zs(r){function n(k){return Qs(k,r)}if(0<ua.length){Qs(ua[0],r);for(var a=1;a<ua.length;a++){var x=ua[a];x.blockedOn===r&&(x.blockedOn=null)}}for(Ji!==null&&Qs(Ji,r),Qi!==null&&Qs(Qi,r),Zi!==null&&Qs(Zi,r),Ys.forEach(n),Xs.forEach(n),a=0;a<en.length;a++)x=en[a],x.blockedOn===r&&(x.blockedOn=null);for(;0<en.length&&(a=en[0],a.blockedOn===null);)xp(a),a.blockedOn===null&&en.shift()}var rs=C.ReactCurrentBatchConfig,pa=!0;function I1(r,n,a,x){var k=jt,T=rs.transition;rs.transition=null;try{jt=1,dc(r,n,a,x)}finally{jt=k,rs.transition=T}}function D1(r,n,a,x){var k=jt,T=rs.transition;rs.transition=null;try{jt=4,dc(r,n,a,x)}finally{jt=k,rs.transition=T}}function dc(r,n,a,x){if(pa){var k=uc(r,n,a,x);if(k===null)Rc(r,n,x,fa,a),gp(r,x);else if(z1(k,r,n,a,x))x.stopPropagation();else if(gp(r,x),n&4&&-1<A1.indexOf(r)){for(;k!==null;){var T=ho(k);if(T!==null&&up(T),T=uc(r,n,a,x),T===null&&Rc(r,n,x,fa,a),T===k)break;k=T}k!==null&&x.stopPropagation()}else Rc(r,n,x,null,a)}}var fa=null;function uc(r,n,a,x){if(fa=null,r=oe(x),r=In(r),r!==null)if(n=ct(r),n===null)r=null;else if(a=n.tag,a===13){if(r=ft(n),r!==null)return r;r=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return fa=r,null}function yp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case gr:return 1;case sa:return 4;case oa:case S1:return 16;case lp:return 536870912;default:return 16}default:return 16}}var tn=null,hc=null,ga=null;function vp(){if(ga)return ga;var r,n=hc,a=n.length,x,k="value"in tn?tn.value:tn.textContent,T=k.length;for(r=0;r<a&&n[r]===k[r];r++);var $=a-r;for(x=1;x<=$&&n[a-x]===k[T-x];x++);return ga=k.slice(r,1<x?1-x:void 0)}function xa(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function ma(){return!0}function bp(){return!1}function Vr(r){function n(a,x,k,T,$){this._reactName=a,this._targetInst=k,this.type=x,this.nativeEvent=T,this.target=$,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(a=r[G],this[G]=a?a(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ma:bp,this.isPropagationStopped=bp,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),n}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=Vr(is),eo=I({},is,{view:0,detail:0}),M1=Vr(eo),fc,gc,to,ya=I({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==to&&(to&&r.type==="mousemove"?(fc=r.screenX-to.screenX,gc=r.screenY-to.screenY):gc=fc=0,to=r),fc)},movementY:function(r){return"movementY"in r?r.movementY:gc}}),_p=Vr(ya),B1=I({},ya,{dataTransfer:0}),P1=Vr(B1),O1=I({},eo,{relatedTarget:0}),xc=Vr(O1),$1=I({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),F1=Vr($1),W1=I({},is,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),N1=Vr(W1),H1=I({},is,{data:0}),Sp=Vr(H1),U1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=K1[r])?!!n[r]:!1}function mc(){return q1}var G1=I({},eo,{key:function(r){if(r.key){var n=U1[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=xa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?V1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mc,charCode:function(r){return r.type==="keypress"?xa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Y1=Vr(G1),X1=I({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wp=Vr(X1),J1=I({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mc}),Q1=Vr(J1),Z1=I({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=Vr(Z1),tv=I({},ya,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),rv=Vr(tv),iv=[9,13,27,32],yc=l&&"CompositionEvent"in window,ro=null;l&&"documentMode"in document&&(ro=document.documentMode);var nv=l&&"TextEvent"in window&&!ro,Cp=l&&(!yc||ro&&8<ro&&11>=ro),kp=" ",jp=!1;function Ep(r,n){switch(r){case"keyup":return iv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ns=!1;function sv(r,n){switch(r){case"compositionend":return Rp(n);case"keypress":return n.which!==32?null:(jp=!0,kp);case"textInput":return r=n.data,r===kp&&jp?null:r;default:return null}}function ov(r,n){if(ns)return r==="compositionend"||!yc&&Ep(r,n)?(r=vp(),ga=hc=tn=null,ns=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Cp&&n.locale!=="ko"?null:n.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!av[r.type]:n==="textarea"}function Ap(r,n,a,x){Qt(x),n=wa(n,"onChange"),0<n.length&&(a=new pc("onChange","change",null,a,x),r.push({event:a,listeners:n}))}var io=null,no=null;function lv(r){Gp(r,0)}function va(r){var n=cs(r);if(Z(n))return r}function cv(r,n){if(r==="change")return n}var zp=!1;if(l){var vc;if(l){var bc="oninput"in document;if(!bc){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),bc=typeof Lp.oninput=="function"}vc=bc}else vc=!1;zp=vc&&(!document.documentMode||9<document.documentMode)}function Ip(){io&&(io.detachEvent("onpropertychange",Dp),no=io=null)}function Dp(r){if(r.propertyName==="value"&&va(no)){var n=[];Ap(n,no,r,oe(r)),oi(lv,n)}}function dv(r,n,a){r==="focusin"?(Ip(),io=n,no=a,io.attachEvent("onpropertychange",Dp)):r==="focusout"&&Ip()}function uv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return va(no)}function hv(r,n){if(r==="click")return va(n)}function pv(r,n){if(r==="input"||r==="change")return va(n)}function fv(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var di=typeof Object.is=="function"?Object.is:fv;function so(r,n){if(di(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var a=Object.keys(r),x=Object.keys(n);if(a.length!==x.length)return!1;for(x=0;x<a.length;x++){var k=a[x];if(!c.call(n,k)||!di(r[k],n[k]))return!1}return!0}function Mp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bp(r,n){var a=Mp(r);r=0;for(var x;a;){if(a.nodeType===3){if(x=r+a.textContent.length,r<=n&&x>=n)return{node:a,offset:n-r};r=x}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mp(a)}}function Pp(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Pp(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function Op(){for(var r=window,n=ke();n instanceof r.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)r=n.contentWindow;else break;n=ke(r.document)}return n}function _c(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function gv(r){var n=Op(),a=r.focusedElem,x=r.selectionRange;if(n!==a&&a&&a.ownerDocument&&Pp(a.ownerDocument.documentElement,a)){if(x!==null&&_c(a)){if(n=x.start,r=x.end,r===void 0&&(r=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(r,a.value.length);else if(r=(n=a.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var k=a.textContent.length,T=Math.min(x.start,k);x=x.end===void 0?T:Math.min(x.end,k),!r.extend&&T>x&&(k=x,x=T,T=k),k=Bp(a,T);var $=Bp(a,x);k&&$&&(r.rangeCount!==1||r.anchorNode!==k.node||r.anchorOffset!==k.offset||r.focusNode!==$.node||r.focusOffset!==$.offset)&&(n=n.createRange(),n.setStart(k.node,k.offset),r.removeAllRanges(),T>x?(r.addRange(n),r.extend($.node,$.offset)):(n.setEnd($.node,$.offset),r.addRange(n)))}}for(n=[],r=a;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)r=n[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var xv=l&&"documentMode"in document&&11>=document.documentMode,ss=null,Sc=null,oo=null,wc=!1;function $p(r,n,a){var x=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wc||ss==null||ss!==ke(x)||(x=ss,"selectionStart"in x&&_c(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),oo&&so(oo,x)||(oo=x,x=wa(Sc,"onSelect"),0<x.length&&(n=new pc("onSelect","select",null,n,a),r.push({event:n,listeners:x}),n.target=ss)))}function ba(r,n){var a={};return a[r.toLowerCase()]=n.toLowerCase(),a["Webkit"+r]="webkit"+n,a["Moz"+r]="moz"+n,a}var os={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},Cc={},Fp={};l&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function _a(r){if(Cc[r])return Cc[r];if(!os[r])return r;var n=os[r],a;for(a in n)if(n.hasOwnProperty(a)&&a in Fp)return Cc[r]=n[a];return r}var Wp=_a("animationend"),Np=_a("animationiteration"),Hp=_a("animationstart"),Up=_a("transitionend"),Vp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(r,n){Vp.set(r,n),S(n,[r])}for(var kc=0;kc<Kp.length;kc++){var jc=Kp[kc],mv=jc.toLowerCase(),yv=jc[0].toUpperCase()+jc.slice(1);rn(mv,"on"+yv)}rn(Wp,"onAnimationEnd"),rn(Np,"onAnimationIteration"),rn(Hp,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(Up,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function qp(r,n,a){var x=r.type||"unknown-event";r.currentTarget=a,De(x,n,void 0,r),r.currentTarget=null}function Gp(r,n){n=(n&4)!==0;for(var a=0;a<r.length;a++){var x=r[a],k=x.event;x=x.listeners;e:{var T=void 0;if(n)for(var $=x.length-1;0<=$;$--){var G=x[$],te=G.instance,be=G.currentTarget;if(G=G.listener,te!==T&&k.isPropagationStopped())break e;qp(k,G,be),T=te}else for($=0;$<x.length;$++){if(G=x[$],te=G.instance,be=G.currentTarget,G=G.listener,te!==T&&k.isPropagationStopped())break e;qp(k,G,be),T=te}}}if(li)throw r=O,li=!1,O=null,r}function It(r,n){var a=n[Dc];a===void 0&&(a=n[Dc]=new Set);var x=r+"__bubble";a.has(x)||(Yp(n,r,2,!1),a.add(x))}function Ec(r,n,a){var x=0;n&&(x|=4),Yp(a,r,x,n)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function lo(r){if(!r[Sa]){r[Sa]=!0,o.forEach(function(a){a!=="selectionchange"&&(vv.has(a)||Ec(a,!1,r),Ec(a,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[Sa]||(n[Sa]=!0,Ec("selectionchange",!1,n))}}function Yp(r,n,a,x){switch(yp(n)){case 1:var k=I1;break;case 4:k=D1;break;default:k=dc}a=k.bind(null,n,a,r),k=void 0,!Ur||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(k=!0),x?k!==void 0?r.addEventListener(n,a,{capture:!0,passive:k}):r.addEventListener(n,a,!0):k!==void 0?r.addEventListener(n,a,{passive:k}):r.addEventListener(n,a,!1)}function Rc(r,n,a,x,k){var T=x;if((n&1)===0&&(n&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var G=x.stateNode.containerInfo;if(G===k||G.nodeType===8&&G.parentNode===k)break;if($===4)for($=x.return;$!==null;){var te=$.tag;if((te===3||te===4)&&(te=$.stateNode.containerInfo,te===k||te.nodeType===8&&te.parentNode===k))return;$=$.return}for(;G!==null;){if($=In(G),$===null)return;if(te=$.tag,te===5||te===6){x=T=$;continue e}G=G.parentNode}}x=x.return}oi(function(){var be=T,Le=oe(a),Pe=[];e:{var Te=Vp.get(r);if(Te!==void 0){var Ke=pc,Je=r;switch(r){case"keypress":if(xa(a)===0)break e;case"keydown":case"keyup":Ke=Y1;break;case"focusin":Je="focus",Ke=xc;break;case"focusout":Je="blur",Ke=xc;break;case"beforeblur":case"afterblur":Ke=xc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=Q1;break;case Wp:case Np:case Hp:Ke=F1;break;case Up:Ke=ev;break;case"scroll":Ke=M1;break;case"wheel":Ke=rv;break;case"copy":case"cut":case"paste":Ke=N1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=wp}var et=(n&4)!==0,Yt=!et&&r==="scroll",ue=et?Te!==null?Te+"Capture":null:Te;et=[];for(var ie=be,fe;ie!==null;){fe=ie;var Fe=fe.stateNode;if(fe.tag===5&&Fe!==null&&(fe=Fe,ue!==null&&(Fe=Dr(ie,ue),Fe!=null&&et.push(co(ie,Fe,fe)))),Yt)break;ie=ie.return}0<et.length&&(Te=new Ke(Te,Je,null,a,Le),Pe.push({event:Te,listeners:et}))}}if((n&7)===0){e:{if(Te=r==="mouseover"||r==="pointerover",Ke=r==="mouseout"||r==="pointerout",Te&&a!==kr&&(Je=a.relatedTarget||a.fromElement)&&(In(Je)||Je[Mi]))break e;if((Ke||Te)&&(Te=Le.window===Le?Le:(Te=Le.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ke?(Je=a.relatedTarget||a.toElement,Ke=be,Je=Je?In(Je):null,Je!==null&&(Yt=ct(Je),Je!==Yt||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(Ke=null,Je=be),Ke!==Je)){if(et=_p,Fe="onMouseLeave",ue="onMouseEnter",ie="mouse",(r==="pointerout"||r==="pointerover")&&(et=wp,Fe="onPointerLeave",ue="onPointerEnter",ie="pointer"),Yt=Ke==null?Te:cs(Ke),fe=Je==null?Te:cs(Je),Te=new et(Fe,ie+"leave",Ke,a,Le),Te.target=Yt,Te.relatedTarget=fe,Fe=null,In(Le)===be&&(et=new et(ue,ie+"enter",Je,a,Le),et.target=fe,et.relatedTarget=Yt,Fe=et),Yt=Fe,Ke&&Je)t:{for(et=Ke,ue=Je,ie=0,fe=et;fe;fe=as(fe))ie++;for(fe=0,Fe=ue;Fe;Fe=as(Fe))fe++;for(;0<ie-fe;)et=as(et),ie--;for(;0<fe-ie;)ue=as(ue),fe--;for(;ie--;){if(et===ue||ue!==null&&et===ue.alternate)break t;et=as(et),ue=as(ue)}et=null}else et=null;Ke!==null&&Xp(Pe,Te,Ke,et,!1),Je!==null&&Yt!==null&&Xp(Pe,Yt,Je,et,!0)}}e:{if(Te=be?cs(be):window,Ke=Te.nodeName&&Te.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Te.type==="file")var tt=cv;else if(Tp(Te))if(zp)tt=pv;else{tt=uv;var at=dv}else(Ke=Te.nodeName)&&Ke.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(tt=hv);if(tt&&(tt=tt(r,be))){Ap(Pe,tt,a,Le);break e}at&&at(r,Te,be),r==="focusout"&&(at=Te._wrapperState)&&at.controlled&&Te.type==="number"&&Ne(Te,"number",Te.value)}switch(at=be?cs(be):window,r){case"focusin":(Tp(at)||at.contentEditable==="true")&&(ss=at,Sc=be,oo=null);break;case"focusout":oo=Sc=ss=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,$p(Pe,a,Le);break;case"selectionchange":if(xv)break;case"keydown":case"keyup":$p(Pe,a,Le)}var lt;if(yc)e:{switch(r){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else ns?Ep(r,a)&&(ut="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(ut="onCompositionStart");ut&&(Cp&&a.locale!=="ko"&&(ns||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&ns&&(lt=vp()):(tn=Le,hc="value"in tn?tn.value:tn.textContent,ns=!0)),at=wa(be,ut),0<at.length&&(ut=new Sp(ut,r,null,a,Le),Pe.push({event:ut,listeners:at}),lt?ut.data=lt:(lt=Rp(a),lt!==null&&(ut.data=lt)))),(lt=nv?sv(r,a):ov(r,a))&&(be=wa(be,"onBeforeInput"),0<be.length&&(Le=new Sp("onBeforeInput","beforeinput",null,a,Le),Pe.push({event:Le,listeners:be}),Le.data=lt))}Gp(Pe,n)})}function co(r,n,a){return{instance:r,listener:n,currentTarget:a}}function wa(r,n){for(var a=n+"Capture",x=[];r!==null;){var k=r,T=k.stateNode;k.tag===5&&T!==null&&(k=T,T=Dr(r,a),T!=null&&x.unshift(co(r,T,k)),T=Dr(r,n),T!=null&&x.push(co(r,T,k))),r=r.return}return x}function as(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xp(r,n,a,x,k){for(var T=n._reactName,$=[];a!==null&&a!==x;){var G=a,te=G.alternate,be=G.stateNode;if(te!==null&&te===x)break;G.tag===5&&be!==null&&(G=be,k?(te=Dr(a,T),te!=null&&$.unshift(co(a,te,G))):k||(te=Dr(a,T),te!=null&&$.push(co(a,te,G)))),a=a.return}$.length!==0&&r.push({event:n,listeners:$})}var bv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function Jp(r){return(typeof r=="string"?r:""+r).replace(bv,`
`).replace(_v,"")}function Ca(r,n,a){if(n=Jp(n),Jp(r)!==n&&a)throw Error(s(425))}function ka(){}var Tc=null,Ac=null;function zc(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Lc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(r){return Qp.resolve(null).then(r).catch(Cv)}:Lc;function Cv(r){setTimeout(function(){throw r})}function Ic(r,n){var a=n,x=0;do{var k=a.nextSibling;if(r.removeChild(a),k&&k.nodeType===8)if(a=k.data,a==="/$"){if(x===0){r.removeChild(k),Zs(n);return}x--}else a!=="$"&&a!=="$?"&&a!=="$!"||x++;a=k}while(a);Zs(n)}function nn(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Zp(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return r;n--}else a==="/$"&&n++}r=r.previousSibling}return null}var ls=Math.random().toString(36).slice(2),Si="__reactFiber$"+ls,uo="__reactProps$"+ls,Mi="__reactContainer$"+ls,Dc="__reactEvents$"+ls,kv="__reactListeners$"+ls,jv="__reactHandles$"+ls;function In(r){var n=r[Si];if(n)return n;for(var a=r.parentNode;a;){if(n=a[Mi]||a[Si]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(r=Zp(r);r!==null;){if(a=r[Si])return a;r=Zp(r)}return n}r=a,a=r.parentNode}return null}function ho(r){return r=r[Si]||r[Mi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function cs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function ja(r){return r[uo]||null}var Mc=[],ds=-1;function sn(r){return{current:r}}function Dt(r){0>ds||(r.current=Mc[ds],Mc[ds]=null,ds--)}function zt(r,n){ds++,Mc[ds]=r.current,r.current=n}var on={},br=sn(on),Br=sn(!1),Dn=on;function us(r,n){var a=r.type.contextTypes;if(!a)return on;var x=r.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===n)return x.__reactInternalMemoizedMaskedChildContext;var k={},T;for(T in a)k[T]=n[T];return x&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=k),k}function Pr(r){return r=r.childContextTypes,r!=null}function Ea(){Dt(Br),Dt(br)}function ef(r,n,a){if(br.current!==on)throw Error(s(168));zt(br,n),zt(Br,a)}function tf(r,n,a){var x=r.stateNode;if(n=n.childContextTypes,typeof x.getChildContext!="function")return a;x=x.getChildContext();for(var k in x)if(!(k in n))throw Error(s(108,X(r)||"Unknown",k));return I({},a,x)}function Ra(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||on,Dn=br.current,zt(br,r),zt(Br,Br.current),!0}function rf(r,n,a){var x=r.stateNode;if(!x)throw Error(s(169));a?(r=tf(r,n,Dn),x.__reactInternalMemoizedMergedChildContext=r,Dt(Br),Dt(br),zt(br,r)):Dt(Br),zt(Br,a)}var Bi=null,Ta=!1,Bc=!1;function nf(r){Bi===null?Bi=[r]:Bi.push(r)}function Ev(r){Ta=!0,nf(r)}function an(){if(!Bc&&Bi!==null){Bc=!0;var r=0,n=jt;try{var a=Bi;for(jt=1;r<a.length;r++){var x=a[r];do x=x(!0);while(x!==null)}Bi=null,Ta=!1}catch(k){throw Bi!==null&&(Bi=Bi.slice(r+1)),rt(gr,an),k}finally{jt=n,Bc=!1}}return null}var hs=[],ps=0,Aa=null,za=0,Jr=[],Qr=0,Mn=null,Pi=1,Oi="";function Bn(r,n){hs[ps++]=za,hs[ps++]=Aa,Aa=r,za=n}function sf(r,n,a){Jr[Qr++]=Pi,Jr[Qr++]=Oi,Jr[Qr++]=Mn,Mn=r;var x=Pi;r=Oi;var k=32-ci(x)-1;x&=~(1<<k),a+=1;var T=32-ci(n)+k;if(30<T){var $=k-k%5;T=(x&(1<<$)-1).toString(32),x>>=$,k-=$,Pi=1<<32-ci(n)+k|a<<k|x,Oi=T+r}else Pi=1<<T|a<<k|x,Oi=r}function Pc(r){r.return!==null&&(Bn(r,1),sf(r,1,0))}function Oc(r){for(;r===Aa;)Aa=hs[--ps],hs[ps]=null,za=hs[--ps],hs[ps]=null;for(;r===Mn;)Mn=Jr[--Qr],Jr[Qr]=null,Oi=Jr[--Qr],Jr[Qr]=null,Pi=Jr[--Qr],Jr[Qr]=null}var Kr=null,qr=null,Bt=!1,ui=null;function of(r,n){var a=ri(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=r,n=r.deletions,n===null?(r.deletions=[a],r.flags|=16):n.push(a)}function af(r,n){switch(r.tag){case 5:var a=r.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,Kr=r,qr=nn(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,Kr=r,qr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=Mn!==null?{id:Pi,overflow:Oi}:null,r.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=ri(18,null,null,0),a.stateNode=n,a.return=r,r.child=a,Kr=r,qr=null,!0):!1;default:return!1}}function $c(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Fc(r){if(Bt){var n=qr;if(n){var a=n;if(!af(r,n)){if($c(r))throw Error(s(418));n=nn(a.nextSibling);var x=Kr;n&&af(r,n)?of(x,a):(r.flags=r.flags&-4097|2,Bt=!1,Kr=r)}}else{if($c(r))throw Error(s(418));r.flags=r.flags&-4097|2,Bt=!1,Kr=r}}}function lf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Kr=r}function La(r){if(r!==Kr)return!1;if(!Bt)return lf(r),Bt=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!zc(r.type,r.memoizedProps)),n&&(n=qr)){if($c(r))throw cf(),Error(s(418));for(;n;)of(r,n),n=nn(n.nextSibling)}if(lf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(n===0){qr=nn(r.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}r=r.nextSibling}qr=null}}else qr=Kr?nn(r.stateNode.nextSibling):null;return!0}function cf(){for(var r=qr;r;)r=nn(r.nextSibling)}function fs(){qr=Kr=null,Bt=!1}function Wc(r){ui===null?ui=[r]:ui.push(r)}var Rv=C.ReactCurrentBatchConfig;function po(r,n,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var x=a.stateNode}if(!x)throw Error(s(147,r));var k=x,T=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===T?n.ref:(n=function($){var G=k.refs;$===null?delete G[T]:G[T]=$},n._stringRef=T,n)}if(typeof r!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,r))}return r}function Ia(r,n){throw r=Object.prototype.toString.call(n),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function df(r){var n=r._init;return n(r._payload)}function uf(r){function n(ue,ie){if(r){var fe=ue.deletions;fe===null?(ue.deletions=[ie],ue.flags|=16):fe.push(ie)}}function a(ue,ie){if(!r)return null;for(;ie!==null;)n(ue,ie),ie=ie.sibling;return null}function x(ue,ie){for(ue=new Map;ie!==null;)ie.key!==null?ue.set(ie.key,ie):ue.set(ie.index,ie),ie=ie.sibling;return ue}function k(ue,ie){return ue=gn(ue,ie),ue.index=0,ue.sibling=null,ue}function T(ue,ie,fe){return ue.index=fe,r?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<ie?(ue.flags|=2,ie):fe):(ue.flags|=2,ie)):(ue.flags|=1048576,ie)}function $(ue){return r&&ue.alternate===null&&(ue.flags|=2),ue}function G(ue,ie,fe,Fe){return ie===null||ie.tag!==6?(ie=Ld(fe,ue.mode,Fe),ie.return=ue,ie):(ie=k(ie,fe),ie.return=ue,ie)}function te(ue,ie,fe,Fe){var tt=fe.type;return tt===A?Le(ue,ie,fe.props.children,Fe,fe.key):ie!==null&&(ie.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===de&&df(tt)===ie.type)?(Fe=k(ie,fe.props),Fe.ref=po(ue,ie,fe),Fe.return=ue,Fe):(Fe=il(fe.type,fe.key,fe.props,null,ue.mode,Fe),Fe.ref=po(ue,ie,fe),Fe.return=ue,Fe)}function be(ue,ie,fe,Fe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=Id(fe,ue.mode,Fe),ie.return=ue,ie):(ie=k(ie,fe.children||[]),ie.return=ue,ie)}function Le(ue,ie,fe,Fe,tt){return ie===null||ie.tag!==7?(ie=Un(fe,ue.mode,Fe,tt),ie.return=ue,ie):(ie=k(ie,fe),ie.return=ue,ie)}function Pe(ue,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Ld(""+ie,ue.mode,fe),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case R:return fe=il(ie.type,ie.key,ie.props,null,ue.mode,fe),fe.ref=po(ue,null,ie),fe.return=ue,fe;case z:return ie=Id(ie,ue.mode,fe),ie.return=ue,ie;case de:var Fe=ie._init;return Pe(ue,Fe(ie._payload),fe)}if(Q(ie)||M(ie))return ie=Un(ie,ue.mode,fe,null),ie.return=ue,ie;Ia(ue,ie)}return null}function Te(ue,ie,fe,Fe){var tt=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return tt!==null?null:G(ue,ie,""+fe,Fe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:return fe.key===tt?te(ue,ie,fe,Fe):null;case z:return fe.key===tt?be(ue,ie,fe,Fe):null;case de:return tt=fe._init,Te(ue,ie,tt(fe._payload),Fe)}if(Q(fe)||M(fe))return tt!==null?null:Le(ue,ie,fe,Fe,null);Ia(ue,fe)}return null}function Ke(ue,ie,fe,Fe,tt){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return ue=ue.get(fe)||null,G(ie,ue,""+Fe,tt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case R:return ue=ue.get(Fe.key===null?fe:Fe.key)||null,te(ie,ue,Fe,tt);case z:return ue=ue.get(Fe.key===null?fe:Fe.key)||null,be(ie,ue,Fe,tt);case de:var at=Fe._init;return Ke(ue,ie,fe,at(Fe._payload),tt)}if(Q(Fe)||M(Fe))return ue=ue.get(fe)||null,Le(ie,ue,Fe,tt,null);Ia(ie,Fe)}return null}function Je(ue,ie,fe,Fe){for(var tt=null,at=null,lt=ie,ut=ie=0,ur=null;lt!==null&&ut<fe.length;ut++){lt.index>ut?(ur=lt,lt=null):ur=lt.sibling;var Ct=Te(ue,lt,fe[ut],Fe);if(Ct===null){lt===null&&(lt=ur);break}r&&lt&&Ct.alternate===null&&n(ue,lt),ie=T(Ct,ie,ut),at===null?tt=Ct:at.sibling=Ct,at=Ct,lt=ur}if(ut===fe.length)return a(ue,lt),Bt&&Bn(ue,ut),tt;if(lt===null){for(;ut<fe.length;ut++)lt=Pe(ue,fe[ut],Fe),lt!==null&&(ie=T(lt,ie,ut),at===null?tt=lt:at.sibling=lt,at=lt);return Bt&&Bn(ue,ut),tt}for(lt=x(ue,lt);ut<fe.length;ut++)ur=Ke(lt,ue,ut,fe[ut],Fe),ur!==null&&(r&&ur.alternate!==null&&lt.delete(ur.key===null?ut:ur.key),ie=T(ur,ie,ut),at===null?tt=ur:at.sibling=ur,at=ur);return r&&lt.forEach(function(xn){return n(ue,xn)}),Bt&&Bn(ue,ut),tt}function et(ue,ie,fe,Fe){var tt=M(fe);if(typeof tt!="function")throw Error(s(150));if(fe=tt.call(fe),fe==null)throw Error(s(151));for(var at=tt=null,lt=ie,ut=ie=0,ur=null,Ct=fe.next();lt!==null&&!Ct.done;ut++,Ct=fe.next()){lt.index>ut?(ur=lt,lt=null):ur=lt.sibling;var xn=Te(ue,lt,Ct.value,Fe);if(xn===null){lt===null&&(lt=ur);break}r&&lt&&xn.alternate===null&&n(ue,lt),ie=T(xn,ie,ut),at===null?tt=xn:at.sibling=xn,at=xn,lt=ur}if(Ct.done)return a(ue,lt),Bt&&Bn(ue,ut),tt;if(lt===null){for(;!Ct.done;ut++,Ct=fe.next())Ct=Pe(ue,Ct.value,Fe),Ct!==null&&(ie=T(Ct,ie,ut),at===null?tt=Ct:at.sibling=Ct,at=Ct);return Bt&&Bn(ue,ut),tt}for(lt=x(ue,lt);!Ct.done;ut++,Ct=fe.next())Ct=Ke(lt,ue,ut,Ct.value,Fe),Ct!==null&&(r&&Ct.alternate!==null&&lt.delete(Ct.key===null?ut:Ct.key),ie=T(Ct,ie,ut),at===null?tt=Ct:at.sibling=Ct,at=Ct);return r&&lt.forEach(function(ab){return n(ue,ab)}),Bt&&Bn(ue,ut),tt}function Yt(ue,ie,fe,Fe){if(typeof fe=="object"&&fe!==null&&fe.type===A&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:e:{for(var tt=fe.key,at=ie;at!==null;){if(at.key===tt){if(tt=fe.type,tt===A){if(at.tag===7){a(ue,at.sibling),ie=k(at,fe.props.children),ie.return=ue,ue=ie;break e}}else if(at.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===de&&df(tt)===at.type){a(ue,at.sibling),ie=k(at,fe.props),ie.ref=po(ue,at,fe),ie.return=ue,ue=ie;break e}a(ue,at);break}else n(ue,at);at=at.sibling}fe.type===A?(ie=Un(fe.props.children,ue.mode,Fe,fe.key),ie.return=ue,ue=ie):(Fe=il(fe.type,fe.key,fe.props,null,ue.mode,Fe),Fe.ref=po(ue,ie,fe),Fe.return=ue,ue=Fe)}return $(ue);case z:e:{for(at=fe.key;ie!==null;){if(ie.key===at)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){a(ue,ie.sibling),ie=k(ie,fe.children||[]),ie.return=ue,ue=ie;break e}else{a(ue,ie);break}else n(ue,ie);ie=ie.sibling}ie=Id(fe,ue.mode,Fe),ie.return=ue,ue=ie}return $(ue);case de:return at=fe._init,Yt(ue,ie,at(fe._payload),Fe)}if(Q(fe))return Je(ue,ie,fe,Fe);if(M(fe))return et(ue,ie,fe,Fe);Ia(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ie!==null&&ie.tag===6?(a(ue,ie.sibling),ie=k(ie,fe),ie.return=ue,ue=ie):(a(ue,ie),ie=Ld(fe,ue.mode,Fe),ie.return=ue,ue=ie),$(ue)):a(ue,ie)}return Yt}var gs=uf(!0),hf=uf(!1),Da=sn(null),Ma=null,xs=null,Nc=null;function Hc(){Nc=xs=Ma=null}function Uc(r){var n=Da.current;Dt(Da),r._currentValue=n}function Vc(r,n,a){for(;r!==null;){var x=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,x!==null&&(x.childLanes|=n)):x!==null&&(x.childLanes&n)!==n&&(x.childLanes|=n),r===a)break;r=r.return}}function ms(r,n){Ma=r,Nc=xs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&n)!==0&&(Or=!0),r.firstContext=null)}function Zr(r){var n=r._currentValue;if(Nc!==r)if(r={context:r,memoizedValue:n,next:null},xs===null){if(Ma===null)throw Error(s(308));xs=r,Ma.dependencies={lanes:0,firstContext:r}}else xs=xs.next=r;return n}var Pn=null;function Kc(r){Pn===null?Pn=[r]:Pn.push(r)}function pf(r,n,a,x){var k=n.interleaved;return k===null?(a.next=a,Kc(n)):(a.next=k.next,k.next=a),n.interleaved=a,$i(r,x)}function $i(r,n){r.lanes|=n;var a=r.alternate;for(a!==null&&(a.lanes|=n),a=r,r=r.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ln=!1;function qc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ff(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Fi(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function cn(r,n,a){var x=r.updateQueue;if(x===null)return null;if(x=x.shared,(St&2)!==0){var k=x.pending;return k===null?n.next=n:(n.next=k.next,k.next=n),x.pending=n,$i(r,a)}return k=x.interleaved,k===null?(n.next=n,Kc(x)):(n.next=k.next,k.next=n),x.interleaved=n,$i(r,a)}function Ba(r,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var x=n.lanes;x&=r.pendingLanes,a|=x,n.lanes=a,ac(r,a)}}function gf(r,n){var a=r.updateQueue,x=r.alternate;if(x!==null&&(x=x.updateQueue,a===x)){var k=null,T=null;if(a=a.firstBaseUpdate,a!==null){do{var $={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};T===null?k=T=$:T=T.next=$,a=a.next}while(a!==null);T===null?k=T=n:T=T.next=n}else k=T=n;a={baseState:x.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:x.shared,effects:x.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=n:r.next=n,a.lastBaseUpdate=n}function Pa(r,n,a,x){var k=r.updateQueue;ln=!1;var T=k.firstBaseUpdate,$=k.lastBaseUpdate,G=k.shared.pending;if(G!==null){k.shared.pending=null;var te=G,be=te.next;te.next=null,$===null?T=be:$.next=be,$=te;var Le=r.alternate;Le!==null&&(Le=Le.updateQueue,G=Le.lastBaseUpdate,G!==$&&(G===null?Le.firstBaseUpdate=be:G.next=be,Le.lastBaseUpdate=te))}if(T!==null){var Pe=k.baseState;$=0,Le=be=te=null,G=T;do{var Te=G.lane,Ke=G.eventTime;if((x&Te)===Te){Le!==null&&(Le=Le.next={eventTime:Ke,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Je=r,et=G;switch(Te=n,Ke=a,et.tag){case 1:if(Je=et.payload,typeof Je=="function"){Pe=Je.call(Ke,Pe,Te);break e}Pe=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=et.payload,Te=typeof Je=="function"?Je.call(Ke,Pe,Te):Je,Te==null)break e;Pe=I({},Pe,Te);break e;case 2:ln=!0}}G.callback!==null&&G.lane!==0&&(r.flags|=64,Te=k.effects,Te===null?k.effects=[G]:Te.push(G))}else Ke={eventTime:Ke,lane:Te,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Le===null?(be=Le=Ke,te=Pe):Le=Le.next=Ke,$|=Te;if(G=G.next,G===null){if(G=k.shared.pending,G===null)break;Te=G,G=Te.next,Te.next=null,k.lastBaseUpdate=Te,k.shared.pending=null}}while(!0);if(Le===null&&(te=Pe),k.baseState=te,k.firstBaseUpdate=be,k.lastBaseUpdate=Le,n=k.shared.interleaved,n!==null){k=n;do $|=k.lane,k=k.next;while(k!==n)}else T===null&&(k.shared.lanes=0);Fn|=$,r.lanes=$,r.memoizedState=Pe}}function xf(r,n,a){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var x=r[n],k=x.callback;if(k!==null){if(x.callback=null,x=a,typeof k!="function")throw Error(s(191,k));k.call(x)}}}var fo={},wi=sn(fo),go=sn(fo),xo=sn(fo);function On(r){if(r===fo)throw Error(s(174));return r}function Gc(r,n){switch(zt(xo,n),zt(go,r),zt(wi,fo),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Et(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=Et(n,r)}Dt(wi),zt(wi,n)}function ys(){Dt(wi),Dt(go),Dt(xo)}function mf(r){On(xo.current);var n=On(wi.current),a=Et(n,r.type);n!==a&&(zt(go,r),zt(wi,a))}function Yc(r){go.current===r&&(Dt(wi),Dt(go))}var Ot=sn(0);function Oa(r){for(var n=r;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xc=[];function Jc(){for(var r=0;r<Xc.length;r++)Xc[r]._workInProgressVersionPrimary=null;Xc.length=0}var $a=C.ReactCurrentDispatcher,Qc=C.ReactCurrentBatchConfig,$n=0,$t=null,sr=null,cr=null,Fa=!1,mo=!1,yo=0,Tv=0;function _r(){throw Error(s(321))}function Zc(r,n){if(n===null)return!1;for(var a=0;a<n.length&&a<r.length;a++)if(!di(r[a],n[a]))return!1;return!0}function ed(r,n,a,x,k,T){if($n=T,$t=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,$a.current=r===null||r.memoizedState===null?Iv:Dv,r=a(x,k),mo){T=0;do{if(mo=!1,yo=0,25<=T)throw Error(s(301));T+=1,cr=sr=null,n.updateQueue=null,$a.current=Mv,r=a(x,k)}while(mo)}if($a.current=Ha,n=sr!==null&&sr.next!==null,$n=0,cr=sr=$t=null,Fa=!1,n)throw Error(s(300));return r}function td(){var r=yo!==0;return yo=0,r}function Ci(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?$t.memoizedState=cr=r:cr=cr.next=r,cr}function ei(){if(sr===null){var r=$t.alternate;r=r!==null?r.memoizedState:null}else r=sr.next;var n=cr===null?$t.memoizedState:cr.next;if(n!==null)cr=n,sr=r;else{if(r===null)throw Error(s(310));sr=r,r={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},cr===null?$t.memoizedState=cr=r:cr=cr.next=r}return cr}function vo(r,n){return typeof n=="function"?n(r):n}function rd(r){var n=ei(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var x=sr,k=x.baseQueue,T=a.pending;if(T!==null){if(k!==null){var $=k.next;k.next=T.next,T.next=$}x.baseQueue=k=T,a.pending=null}if(k!==null){T=k.next,x=x.baseState;var G=$=null,te=null,be=T;do{var Le=be.lane;if(($n&Le)===Le)te!==null&&(te=te.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),x=be.hasEagerState?be.eagerState:r(x,be.action);else{var Pe={lane:Le,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};te===null?(G=te=Pe,$=x):te=te.next=Pe,$t.lanes|=Le,Fn|=Le}be=be.next}while(be!==null&&be!==T);te===null?$=x:te.next=G,di(x,n.memoizedState)||(Or=!0),n.memoizedState=x,n.baseState=$,n.baseQueue=te,a.lastRenderedState=x}if(r=a.interleaved,r!==null){k=r;do T=k.lane,$t.lanes|=T,Fn|=T,k=k.next;while(k!==r)}else k===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function id(r){var n=ei(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var x=a.dispatch,k=a.pending,T=n.memoizedState;if(k!==null){a.pending=null;var $=k=k.next;do T=r(T,$.action),$=$.next;while($!==k);di(T,n.memoizedState)||(Or=!0),n.memoizedState=T,n.baseQueue===null&&(n.baseState=T),a.lastRenderedState=T}return[T,x]}function yf(){}function vf(r,n){var a=$t,x=ei(),k=n(),T=!di(x.memoizedState,k);if(T&&(x.memoizedState=k,Or=!0),x=x.queue,nd(Sf.bind(null,a,x,r),[r]),x.getSnapshot!==n||T||cr!==null&&cr.memoizedState.tag&1){if(a.flags|=2048,bo(9,_f.bind(null,a,x,k,n),void 0,null),dr===null)throw Error(s(349));($n&30)!==0||bf(a,n,k)}return k}function bf(r,n,a){r.flags|=16384,r={getSnapshot:n,value:a},n=$t.updateQueue,n===null?(n={lastEffect:null,stores:null},$t.updateQueue=n,n.stores=[r]):(a=n.stores,a===null?n.stores=[r]:a.push(r))}function _f(r,n,a,x){n.value=a,n.getSnapshot=x,wf(n)&&Cf(r)}function Sf(r,n,a){return a(function(){wf(n)&&Cf(r)})}function wf(r){var n=r.getSnapshot;r=r.value;try{var a=n();return!di(r,a)}catch{return!0}}function Cf(r){var n=$i(r,1);n!==null&&gi(n,r,1,-1)}function kf(r){var n=Ci();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:r},n.queue=r,r=r.dispatch=Lv.bind(null,$t,r),[n.memoizedState,r]}function bo(r,n,a,x){return r={tag:r,create:n,destroy:a,deps:x,next:null},n=$t.updateQueue,n===null?(n={lastEffect:null,stores:null},$t.updateQueue=n,n.lastEffect=r.next=r):(a=n.lastEffect,a===null?n.lastEffect=r.next=r:(x=a.next,a.next=r,r.next=x,n.lastEffect=r)),r}function jf(){return ei().memoizedState}function Wa(r,n,a,x){var k=Ci();$t.flags|=r,k.memoizedState=bo(1|n,a,void 0,x===void 0?null:x)}function Na(r,n,a,x){var k=ei();x=x===void 0?null:x;var T=void 0;if(sr!==null){var $=sr.memoizedState;if(T=$.destroy,x!==null&&Zc(x,$.deps)){k.memoizedState=bo(n,a,T,x);return}}$t.flags|=r,k.memoizedState=bo(1|n,a,T,x)}function Ef(r,n){return Wa(8390656,8,r,n)}function nd(r,n){return Na(2048,8,r,n)}function Rf(r,n){return Na(4,2,r,n)}function Tf(r,n){return Na(4,4,r,n)}function Af(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function zf(r,n,a){return a=a!=null?a.concat([r]):null,Na(4,4,Af.bind(null,n,r),a)}function sd(){}function Lf(r,n){var a=ei();n=n===void 0?null:n;var x=a.memoizedState;return x!==null&&n!==null&&Zc(n,x[1])?x[0]:(a.memoizedState=[r,n],r)}function If(r,n){var a=ei();n=n===void 0?null:n;var x=a.memoizedState;return x!==null&&n!==null&&Zc(n,x[1])?x[0]:(r=r(),a.memoizedState=[r,n],r)}function Df(r,n,a){return($n&21)===0?(r.baseState&&(r.baseState=!1,Or=!0),r.memoizedState=a):(di(a,n)||(a=cp(),$t.lanes|=a,Fn|=a,r.baseState=!0),n)}function Av(r,n){var a=jt;jt=a!==0&&4>a?a:4,r(!0);var x=Qc.transition;Qc.transition={};try{r(!1),n()}finally{jt=a,Qc.transition=x}}function Mf(){return ei().memoizedState}function zv(r,n,a){var x=pn(r);if(a={lane:x,action:a,hasEagerState:!1,eagerState:null,next:null},Bf(r))Pf(n,a);else if(a=pf(r,n,a,x),a!==null){var k=Er();gi(a,r,x,k),Of(a,n,x)}}function Lv(r,n,a){var x=pn(r),k={lane:x,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bf(r))Pf(n,k);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=n.lastRenderedReducer,T!==null))try{var $=n.lastRenderedState,G=T($,a);if(k.hasEagerState=!0,k.eagerState=G,di(G,$)){var te=n.interleaved;te===null?(k.next=k,Kc(n)):(k.next=te.next,te.next=k),n.interleaved=k;return}}catch{}finally{}a=pf(r,n,k,x),a!==null&&(k=Er(),gi(a,r,x,k),Of(a,n,x))}}function Bf(r){var n=r.alternate;return r===$t||n!==null&&n===$t}function Pf(r,n){mo=Fa=!0;var a=r.pending;a===null?n.next=n:(n.next=a.next,a.next=n),r.pending=n}function Of(r,n,a){if((a&4194240)!==0){var x=n.lanes;x&=r.pendingLanes,a|=x,n.lanes=a,ac(r,a)}}var Ha={readContext:Zr,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},Iv={readContext:Zr,useCallback:function(r,n){return Ci().memoizedState=[r,n===void 0?null:n],r},useContext:Zr,useEffect:Ef,useImperativeHandle:function(r,n,a){return a=a!=null?a.concat([r]):null,Wa(4194308,4,Af.bind(null,n,r),a)},useLayoutEffect:function(r,n){return Wa(4194308,4,r,n)},useInsertionEffect:function(r,n){return Wa(4,2,r,n)},useMemo:function(r,n){var a=Ci();return n=n===void 0?null:n,r=r(),a.memoizedState=[r,n],r},useReducer:function(r,n,a){var x=Ci();return n=a!==void 0?a(n):n,x.memoizedState=x.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},x.queue=r,r=r.dispatch=zv.bind(null,$t,r),[x.memoizedState,r]},useRef:function(r){var n=Ci();return r={current:r},n.memoizedState=r},useState:kf,useDebugValue:sd,useDeferredValue:function(r){return Ci().memoizedState=r},useTransition:function(){var r=kf(!1),n=r[0];return r=Av.bind(null,r[1]),Ci().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,a){var x=$t,k=Ci();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),dr===null)throw Error(s(349));($n&30)!==0||bf(x,n,a)}k.memoizedState=a;var T={value:a,getSnapshot:n};return k.queue=T,Ef(Sf.bind(null,x,T,r),[r]),x.flags|=2048,bo(9,_f.bind(null,x,T,a,n),void 0,null),a},useId:function(){var r=Ci(),n=dr.identifierPrefix;if(Bt){var a=Oi,x=Pi;a=(x&~(1<<32-ci(x)-1)).toString(32)+a,n=":"+n+"R"+a,a=yo++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=Tv++,n=":"+n+"r"+a.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},Dv={readContext:Zr,useCallback:Lf,useContext:Zr,useEffect:nd,useImperativeHandle:zf,useInsertionEffect:Rf,useLayoutEffect:Tf,useMemo:If,useReducer:rd,useRef:jf,useState:function(){return rd(vo)},useDebugValue:sd,useDeferredValue:function(r){var n=ei();return Df(n,sr.memoizedState,r)},useTransition:function(){var r=rd(vo)[0],n=ei().memoizedState;return[r,n]},useMutableSource:yf,useSyncExternalStore:vf,useId:Mf,unstable_isNewReconciler:!1},Mv={readContext:Zr,useCallback:Lf,useContext:Zr,useEffect:nd,useImperativeHandle:zf,useInsertionEffect:Rf,useLayoutEffect:Tf,useMemo:If,useReducer:id,useRef:jf,useState:function(){return id(vo)},useDebugValue:sd,useDeferredValue:function(r){var n=ei();return sr===null?n.memoizedState=r:Df(n,sr.memoizedState,r)},useTransition:function(){var r=id(vo)[0],n=ei().memoizedState;return[r,n]},useMutableSource:yf,useSyncExternalStore:vf,useId:Mf,unstable_isNewReconciler:!1};function hi(r,n){if(r&&r.defaultProps){n=I({},n),r=r.defaultProps;for(var a in r)n[a]===void 0&&(n[a]=r[a]);return n}return n}function od(r,n,a,x){n=r.memoizedState,a=a(x,n),a=a==null?n:I({},n,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Ua={isMounted:function(r){return(r=r._reactInternals)?ct(r)===r:!1},enqueueSetState:function(r,n,a){r=r._reactInternals;var x=Er(),k=pn(r),T=Fi(x,k);T.payload=n,a!=null&&(T.callback=a),n=cn(r,T,k),n!==null&&(gi(n,r,k,x),Ba(n,r,k))},enqueueReplaceState:function(r,n,a){r=r._reactInternals;var x=Er(),k=pn(r),T=Fi(x,k);T.tag=1,T.payload=n,a!=null&&(T.callback=a),n=cn(r,T,k),n!==null&&(gi(n,r,k,x),Ba(n,r,k))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var a=Er(),x=pn(r),k=Fi(a,x);k.tag=2,n!=null&&(k.callback=n),n=cn(r,k,x),n!==null&&(gi(n,r,x,a),Ba(n,r,x))}};function $f(r,n,a,x,k,T,$){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(x,T,$):n.prototype&&n.prototype.isPureReactComponent?!so(a,x)||!so(k,T):!0}function Ff(r,n,a){var x=!1,k=on,T=n.contextType;return typeof T=="object"&&T!==null?T=Zr(T):(k=Pr(n)?Dn:br.current,x=n.contextTypes,T=(x=x!=null)?us(r,k):on),n=new n(a,T),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ua,r.stateNode=n,n._reactInternals=r,x&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=k,r.__reactInternalMemoizedMaskedChildContext=T),n}function Wf(r,n,a,x){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,x),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,x),n.state!==r&&Ua.enqueueReplaceState(n,n.state,null)}function ad(r,n,a,x){var k=r.stateNode;k.props=a,k.state=r.memoizedState,k.refs={},qc(r);var T=n.contextType;typeof T=="object"&&T!==null?k.context=Zr(T):(T=Pr(n)?Dn:br.current,k.context=us(r,T)),k.state=r.memoizedState,T=n.getDerivedStateFromProps,typeof T=="function"&&(od(r,n,T,a),k.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(n=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),n!==k.state&&Ua.enqueueReplaceState(k,k.state,null),Pa(r,a,k,x),k.state=r.memoizedState),typeof k.componentDidMount=="function"&&(r.flags|=4194308)}function vs(r,n){try{var a="",x=n;do a+=Se(x),x=x.return;while(x);var k=a}catch(T){k=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:n,stack:k,digest:null}}function ld(r,n,a){return{value:r,source:null,stack:a??null,digest:n??null}}function cd(r,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var Bv=typeof WeakMap=="function"?WeakMap:Map;function Nf(r,n,a){a=Fi(-1,a),a.tag=3,a.payload={element:null};var x=n.value;return a.callback=function(){Ja||(Ja=!0,Cd=x),cd(r,n)},a}function Hf(r,n,a){a=Fi(-1,a),a.tag=3;var x=r.type.getDerivedStateFromError;if(typeof x=="function"){var k=n.value;a.payload=function(){return x(k)},a.callback=function(){cd(r,n)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){cd(r,n),typeof x!="function"&&(un===null?un=new Set([this]):un.add(this));var $=n.stack;this.componentDidCatch(n.value,{componentStack:$!==null?$:""})}),a}function Uf(r,n,a){var x=r.pingCache;if(x===null){x=r.pingCache=new Bv;var k=new Set;x.set(n,k)}else k=x.get(n),k===void 0&&(k=new Set,x.set(n,k));k.has(a)||(k.add(a),r=Xv.bind(null,r,n,a),n.then(r,r))}function Vf(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function Kf(r,n,a,x,k){return(r.mode&1)===0?(r===n?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=Fi(-1,1),n.tag=2,cn(a,n,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=k,r)}var Pv=C.ReactCurrentOwner,Or=!1;function jr(r,n,a,x){n.child=r===null?hf(n,null,a,x):gs(n,r.child,a,x)}function qf(r,n,a,x,k){a=a.render;var T=n.ref;return ms(n,k),x=ed(r,n,a,x,T,k),a=td(),r!==null&&!Or?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Wi(r,n,k)):(Bt&&a&&Pc(n),n.flags|=1,jr(r,n,x,k),n.child)}function Gf(r,n,a,x,k){if(r===null){var T=a.type;return typeof T=="function"&&!zd(T)&&T.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=T,Yf(r,n,T,x,k)):(r=il(a.type,null,x,n,n.mode,k),r.ref=n.ref,r.return=n,n.child=r)}if(T=r.child,(r.lanes&k)===0){var $=T.memoizedProps;if(a=a.compare,a=a!==null?a:so,a($,x)&&r.ref===n.ref)return Wi(r,n,k)}return n.flags|=1,r=gn(T,x),r.ref=n.ref,r.return=n,n.child=r}function Yf(r,n,a,x,k){if(r!==null){var T=r.memoizedProps;if(so(T,x)&&r.ref===n.ref)if(Or=!1,n.pendingProps=x=T,(r.lanes&k)!==0)(r.flags&131072)!==0&&(Or=!0);else return n.lanes=r.lanes,Wi(r,n,k)}return dd(r,n,a,x,k)}function Xf(r,n,a){var x=n.pendingProps,k=x.children,T=r!==null?r.memoizedState:null;if(x.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(_s,Gr),Gr|=a;else{if((a&1073741824)===0)return r=T!==null?T.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,zt(_s,Gr),Gr|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=T!==null?T.baseLanes:a,zt(_s,Gr),Gr|=x}else T!==null?(x=T.baseLanes|a,n.memoizedState=null):x=a,zt(_s,Gr),Gr|=x;return jr(r,n,k,a),n.child}function Jf(r,n){var a=n.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function dd(r,n,a,x,k){var T=Pr(a)?Dn:br.current;return T=us(n,T),ms(n,k),a=ed(r,n,a,x,T,k),x=td(),r!==null&&!Or?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~k,Wi(r,n,k)):(Bt&&x&&Pc(n),n.flags|=1,jr(r,n,a,k),n.child)}function Qf(r,n,a,x,k){if(Pr(a)){var T=!0;Ra(n)}else T=!1;if(ms(n,k),n.stateNode===null)Ka(r,n),Ff(n,a,x),ad(n,a,x,k),x=!0;else if(r===null){var $=n.stateNode,G=n.memoizedProps;$.props=G;var te=$.context,be=a.contextType;typeof be=="object"&&be!==null?be=Zr(be):(be=Pr(a)?Dn:br.current,be=us(n,be));var Le=a.getDerivedStateFromProps,Pe=typeof Le=="function"||typeof $.getSnapshotBeforeUpdate=="function";Pe||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(G!==x||te!==be)&&Wf(n,$,x,be),ln=!1;var Te=n.memoizedState;$.state=Te,Pa(n,x,$,k),te=n.memoizedState,G!==x||Te!==te||Br.current||ln?(typeof Le=="function"&&(od(n,a,Le,x),te=n.memoizedState),(G=ln||$f(n,a,G,x,Te,te,be))?(Pe||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(n.flags|=4194308)):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=x,n.memoizedState=te),$.props=x,$.state=te,$.context=be,x=G):(typeof $.componentDidMount=="function"&&(n.flags|=4194308),x=!1)}else{$=n.stateNode,ff(r,n),G=n.memoizedProps,be=n.type===n.elementType?G:hi(n.type,G),$.props=be,Pe=n.pendingProps,Te=$.context,te=a.contextType,typeof te=="object"&&te!==null?te=Zr(te):(te=Pr(a)?Dn:br.current,te=us(n,te));var Ke=a.getDerivedStateFromProps;(Le=typeof Ke=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(G!==Pe||Te!==te)&&Wf(n,$,x,te),ln=!1,Te=n.memoizedState,$.state=Te,Pa(n,x,$,k);var Je=n.memoizedState;G!==Pe||Te!==Je||Br.current||ln?(typeof Ke=="function"&&(od(n,a,Ke,x),Je=n.memoizedState),(be=ln||$f(n,a,be,x,Te,Je,te)||!1)?(Le||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(x,Je,te),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(x,Je,te)),typeof $.componentDidUpdate=="function"&&(n.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof $.componentDidUpdate!="function"||G===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),n.memoizedProps=x,n.memoizedState=Je),$.props=x,$.state=Je,$.context=te,x=be):(typeof $.componentDidUpdate!="function"||G===r.memoizedProps&&Te===r.memoizedState||(n.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&Te===r.memoizedState||(n.flags|=1024),x=!1)}return ud(r,n,a,x,T,k)}function ud(r,n,a,x,k,T){Jf(r,n);var $=(n.flags&128)!==0;if(!x&&!$)return k&&rf(n,a,!1),Wi(r,n,T);x=n.stateNode,Pv.current=n;var G=$&&typeof a.getDerivedStateFromError!="function"?null:x.render();return n.flags|=1,r!==null&&$?(n.child=gs(n,r.child,null,T),n.child=gs(n,null,G,T)):jr(r,n,G,T),n.memoizedState=x.state,k&&rf(n,a,!0),n.child}function Zf(r){var n=r.stateNode;n.pendingContext?ef(r,n.pendingContext,n.pendingContext!==n.context):n.context&&ef(r,n.context,!1),Gc(r,n.containerInfo)}function eg(r,n,a,x,k){return fs(),Wc(k),n.flags|=256,jr(r,n,a,x),n.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function pd(r){return{baseLanes:r,cachePool:null,transitions:null}}function tg(r,n,a){var x=n.pendingProps,k=Ot.current,T=!1,$=(n.flags&128)!==0,G;if((G=$)||(G=r!==null&&r.memoizedState===null?!1:(k&2)!==0),G?(T=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(k|=1),zt(Ot,k&1),r===null)return Fc(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((n.mode&1)===0?n.lanes=1:r.data==="$!"?n.lanes=8:n.lanes=1073741824,null):($=x.children,r=x.fallback,T?(x=n.mode,T=n.child,$={mode:"hidden",children:$},(x&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=$):T=nl($,x,0,null),r=Un(r,x,a,null),T.return=n,r.return=n,T.sibling=r,n.child=T,n.child.memoizedState=pd(a),n.memoizedState=hd,r):fd(n,$));if(k=r.memoizedState,k!==null&&(G=k.dehydrated,G!==null))return Ov(r,n,$,x,G,k,a);if(T){T=x.fallback,$=n.mode,k=r.child,G=k.sibling;var te={mode:"hidden",children:x.children};return($&1)===0&&n.child!==k?(x=n.child,x.childLanes=0,x.pendingProps=te,n.deletions=null):(x=gn(k,te),x.subtreeFlags=k.subtreeFlags&14680064),G!==null?T=gn(G,T):(T=Un(T,$,a,null),T.flags|=2),T.return=n,x.return=n,x.sibling=T,n.child=x,x=T,T=n.child,$=r.child.memoizedState,$=$===null?pd(a):{baseLanes:$.baseLanes|a,cachePool:null,transitions:$.transitions},T.memoizedState=$,T.childLanes=r.childLanes&~a,n.memoizedState=hd,x}return T=r.child,r=T.sibling,x=gn(T,{mode:"visible",children:x.children}),(n.mode&1)===0&&(x.lanes=a),x.return=n,x.sibling=null,r!==null&&(a=n.deletions,a===null?(n.deletions=[r],n.flags|=16):a.push(r)),n.child=x,n.memoizedState=null,x}function fd(r,n){return n=nl({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Va(r,n,a,x){return x!==null&&Wc(x),gs(n,r.child,null,a),r=fd(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function Ov(r,n,a,x,k,T,$){if(a)return n.flags&256?(n.flags&=-257,x=ld(Error(s(422))),Va(r,n,$,x)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(T=x.fallback,k=n.mode,x=nl({mode:"visible",children:x.children},k,0,null),T=Un(T,k,$,null),T.flags|=2,x.return=n,T.return=n,x.sibling=T,n.child=x,(n.mode&1)!==0&&gs(n,r.child,null,$),n.child.memoizedState=pd($),n.memoizedState=hd,T);if((n.mode&1)===0)return Va(r,n,$,null);if(k.data==="$!"){if(x=k.nextSibling&&k.nextSibling.dataset,x)var G=x.dgst;return x=G,T=Error(s(419)),x=ld(T,x,void 0),Va(r,n,$,x)}if(G=($&r.childLanes)!==0,Or||G){if(x=dr,x!==null){switch($&-$){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(x.suspendedLanes|$))!==0?0:k,k!==0&&k!==T.retryLane&&(T.retryLane=k,$i(r,k),gi(x,r,k,-1))}return Ad(),x=ld(Error(s(421))),Va(r,n,$,x)}return k.data==="$?"?(n.flags|=128,n.child=r.child,n=Jv.bind(null,r),k._reactRetry=n,null):(r=T.treeContext,qr=nn(k.nextSibling),Kr=n,Bt=!0,ui=null,r!==null&&(Jr[Qr++]=Pi,Jr[Qr++]=Oi,Jr[Qr++]=Mn,Pi=r.id,Oi=r.overflow,Mn=n),n=fd(n,x.children),n.flags|=4096,n)}function rg(r,n,a){r.lanes|=n;var x=r.alternate;x!==null&&(x.lanes|=n),Vc(r.return,n,a)}function gd(r,n,a,x,k){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:x,tail:a,tailMode:k}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=x,T.tail=a,T.tailMode=k)}function ig(r,n,a){var x=n.pendingProps,k=x.revealOrder,T=x.tail;if(jr(r,n,x.children,a),x=Ot.current,(x&2)!==0)x=x&1|2,n.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rg(r,a,n);else if(r.tag===19)rg(r,a,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}x&=1}if(zt(Ot,x),(n.mode&1)===0)n.memoizedState=null;else switch(k){case"forwards":for(a=n.child,k=null;a!==null;)r=a.alternate,r!==null&&Oa(r)===null&&(k=a),a=a.sibling;a=k,a===null?(k=n.child,n.child=null):(k=a.sibling,a.sibling=null),gd(n,!1,k,a,T);break;case"backwards":for(a=null,k=n.child,n.child=null;k!==null;){if(r=k.alternate,r!==null&&Oa(r)===null){n.child=k;break}r=k.sibling,k.sibling=a,a=k,k=r}gd(n,!0,a,null,T);break;case"together":gd(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ka(r,n){(n.mode&1)===0&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Wi(r,n,a){if(r!==null&&(n.dependencies=r.dependencies),Fn|=n.lanes,(a&n.childLanes)===0)return null;if(r!==null&&n.child!==r.child)throw Error(s(153));if(n.child!==null){for(r=n.child,a=gn(r,r.pendingProps),n.child=a,a.return=n;r.sibling!==null;)r=r.sibling,a=a.sibling=gn(r,r.pendingProps),a.return=n;a.sibling=null}return n.child}function $v(r,n,a){switch(n.tag){case 3:Zf(n),fs();break;case 5:mf(n);break;case 1:Pr(n.type)&&Ra(n);break;case 4:Gc(n,n.stateNode.containerInfo);break;case 10:var x=n.type._context,k=n.memoizedProps.value;zt(Da,x._currentValue),x._currentValue=k;break;case 13:if(x=n.memoizedState,x!==null)return x.dehydrated!==null?(zt(Ot,Ot.current&1),n.flags|=128,null):(a&n.child.childLanes)!==0?tg(r,n,a):(zt(Ot,Ot.current&1),r=Wi(r,n,a),r!==null?r.sibling:null);zt(Ot,Ot.current&1);break;case 19:if(x=(a&n.childLanes)!==0,(r.flags&128)!==0){if(x)return ig(r,n,a);n.flags|=128}if(k=n.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),zt(Ot,Ot.current),x)break;return null;case 22:case 23:return n.lanes=0,Xf(r,n,a)}return Wi(r,n,a)}var ng,xd,sg,og;ng=function(r,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},xd=function(){},sg=function(r,n,a,x){var k=r.memoizedProps;if(k!==x){r=n.stateNode,On(wi.current);var T=null;switch(a){case"input":k=he(r,k),x=he(r,x),T=[];break;case"select":k=I({},k,{value:void 0}),x=I({},x,{value:void 0}),T=[];break;case"textarea":k=We(r,k),x=We(r,x),T=[];break;default:typeof k.onClick!="function"&&typeof x.onClick=="function"&&(r.onclick=ka)}fr(a,x);var $;a=null;for(be in k)if(!x.hasOwnProperty(be)&&k.hasOwnProperty(be)&&k[be]!=null)if(be==="style"){var G=k[be];for($ in G)G.hasOwnProperty($)&&(a||(a={}),a[$]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(u.hasOwnProperty(be)?T||(T=[]):(T=T||[]).push(be,null));for(be in x){var te=x[be];if(G=k!=null?k[be]:void 0,x.hasOwnProperty(be)&&te!==G&&(te!=null||G!=null))if(be==="style")if(G){for($ in G)!G.hasOwnProperty($)||te&&te.hasOwnProperty($)||(a||(a={}),a[$]="");for($ in te)te.hasOwnProperty($)&&G[$]!==te[$]&&(a||(a={}),a[$]=te[$])}else a||(T||(T=[]),T.push(be,a)),a=te;else be==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,G=G?G.__html:void 0,te!=null&&G!==te&&(T=T||[]).push(be,te)):be==="children"?typeof te!="string"&&typeof te!="number"||(T=T||[]).push(be,""+te):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(u.hasOwnProperty(be)?(te!=null&&be==="onScroll"&&It("scroll",r),T||G===te||(T=[])):(T=T||[]).push(be,te))}a&&(T=T||[]).push("style",a);var be=T;(n.updateQueue=be)&&(n.flags|=4)}},og=function(r,n,a,x){a!==x&&(n.flags|=4)};function _o(r,n){if(!Bt)switch(r.tailMode){case"hidden":n=r.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var x=null;a!==null;)a.alternate!==null&&(x=a),a=a.sibling;x===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:x.sibling=null}}function Sr(r){var n=r.alternate!==null&&r.alternate.child===r.child,a=0,x=0;if(n)for(var k=r.child;k!==null;)a|=k.lanes|k.childLanes,x|=k.subtreeFlags&14680064,x|=k.flags&14680064,k.return=r,k=k.sibling;else for(k=r.child;k!==null;)a|=k.lanes|k.childLanes,x|=k.subtreeFlags,x|=k.flags,k.return=r,k=k.sibling;return r.subtreeFlags|=x,r.childLanes=a,n}function Fv(r,n,a){var x=n.pendingProps;switch(Oc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(n),null;case 1:return Pr(n.type)&&Ea(),Sr(n),null;case 3:return x=n.stateNode,ys(),Dt(Br),Dt(br),Jc(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(r===null||r.child===null)&&(La(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ui!==null&&(Ed(ui),ui=null))),xd(r,n),Sr(n),null;case 5:Yc(n);var k=On(xo.current);if(a=n.type,r!==null&&n.stateNode!=null)sg(r,n,a,x,k),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!x){if(n.stateNode===null)throw Error(s(166));return Sr(n),null}if(r=On(wi.current),La(n)){x=n.stateNode,a=n.type;var T=n.memoizedProps;switch(x[Si]=n,x[uo]=T,r=(n.mode&1)!==0,a){case"dialog":It("cancel",x),It("close",x);break;case"iframe":case"object":case"embed":It("load",x);break;case"video":case"audio":for(k=0;k<ao.length;k++)It(ao[k],x);break;case"source":It("error",x);break;case"img":case"image":case"link":It("error",x),It("load",x);break;case"details":It("toggle",x);break;case"input":Ie(x,T),It("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!T.multiple},It("invalid",x);break;case"textarea":Ze(x,T),It("invalid",x)}fr(a,T),k=null;for(var $ in T)if(T.hasOwnProperty($)){var G=T[$];$==="children"?typeof G=="string"?x.textContent!==G&&(T.suppressHydrationWarning!==!0&&Ca(x.textContent,G,r),k=["children",G]):typeof G=="number"&&x.textContent!==""+G&&(T.suppressHydrationWarning!==!0&&Ca(x.textContent,G,r),k=["children",""+G]):u.hasOwnProperty($)&&G!=null&&$==="onScroll"&&It("scroll",x)}switch(a){case"input":Me(x),je(x,T,!0);break;case"textarea":Me(x),mt(x);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(x.onclick=ka)}x=k,n.updateQueue=x,x!==null&&(n.flags|=4)}else{$=k.nodeType===9?k:k.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Jt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=$.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof x.is=="string"?r=$.createElement(a,{is:x.is}):(r=$.createElement(a),a==="select"&&($=r,x.multiple?$.multiple=!0:x.size&&($.size=x.size))):r=$.createElementNS(r,a),r[Si]=n,r[uo]=x,ng(r,n,!1,!1),n.stateNode=r;e:{switch($=Lr(a,x),a){case"dialog":It("cancel",r),It("close",r),k=x;break;case"iframe":case"object":case"embed":It("load",r),k=x;break;case"video":case"audio":for(k=0;k<ao.length;k++)It(ao[k],r);k=x;break;case"source":It("error",r),k=x;break;case"img":case"image":case"link":It("error",r),It("load",r),k=x;break;case"details":It("toggle",r),k=x;break;case"input":Ie(r,x),k=he(r,x),It("invalid",r);break;case"option":k=x;break;case"select":r._wrapperState={wasMultiple:!!x.multiple},k=I({},x,{value:void 0}),It("invalid",r);break;case"textarea":Ze(r,x),k=We(r,x),It("invalid",r);break;default:k=x}fr(a,k),G=k;for(T in G)if(G.hasOwnProperty(T)){var te=G[T];T==="style"?pr(r,te):T==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Mt(r,te)):T==="children"?typeof te=="string"?(a!=="textarea"||te!=="")&&xt(r,te):typeof te=="number"&&xt(r,""+te):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?te!=null&&T==="onScroll"&&It("scroll",r):te!=null&&g(r,T,te,$))}switch(a){case"input":Me(r),je(r,x,!1);break;case"textarea":Me(r),mt(r);break;case"option":x.value!=null&&r.setAttribute("value",""+F(x.value));break;case"select":r.multiple=!!x.multiple,T=x.value,T!=null?le(r,!!x.multiple,T,!1):x.defaultValue!=null&&le(r,!!x.multiple,x.defaultValue,!0);break;default:typeof k.onClick=="function"&&(r.onclick=ka)}switch(a){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Sr(n),null;case 6:if(r&&n.stateNode!=null)og(r,n,r.memoizedProps,x);else{if(typeof x!="string"&&n.stateNode===null)throw Error(s(166));if(a=On(xo.current),On(wi.current),La(n)){if(x=n.stateNode,a=n.memoizedProps,x[Si]=n,(T=x.nodeValue!==a)&&(r=Kr,r!==null))switch(r.tag){case 3:Ca(x.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ca(x.nodeValue,a,(r.mode&1)!==0)}T&&(n.flags|=4)}else x=(a.nodeType===9?a:a.ownerDocument).createTextNode(x),x[Si]=n,n.stateNode=x}return Sr(n),null;case 13:if(Dt(Ot),x=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Bt&&qr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)cf(),fs(),n.flags|=98560,T=!1;else if(T=La(n),x!==null&&x.dehydrated!==null){if(r===null){if(!T)throw Error(s(318));if(T=n.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(s(317));T[Si]=n}else fs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Sr(n),T=!1}else ui!==null&&(Ed(ui),ui=null),T=!0;if(!T)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=a,n):(x=x!==null,x!==(r!==null&&r.memoizedState!==null)&&x&&(n.child.flags|=8192,(n.mode&1)!==0&&(r===null||(Ot.current&1)!==0?or===0&&(or=3):Ad())),n.updateQueue!==null&&(n.flags|=4),Sr(n),null);case 4:return ys(),xd(r,n),r===null&&lo(n.stateNode.containerInfo),Sr(n),null;case 10:return Uc(n.type._context),Sr(n),null;case 17:return Pr(n.type)&&Ea(),Sr(n),null;case 19:if(Dt(Ot),T=n.memoizedState,T===null)return Sr(n),null;if(x=(n.flags&128)!==0,$=T.rendering,$===null)if(x)_o(T,!1);else{if(or!==0||r!==null&&(r.flags&128)!==0)for(r=n.child;r!==null;){if($=Oa(r),$!==null){for(n.flags|=128,_o(T,!1),x=$.updateQueue,x!==null&&(n.updateQueue=x,n.flags|=4),n.subtreeFlags=0,x=a,a=n.child;a!==null;)T=a,r=x,T.flags&=14680066,$=T.alternate,$===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=$.childLanes,T.lanes=$.lanes,T.child=$.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=$.memoizedProps,T.memoizedState=$.memoizedState,T.updateQueue=$.updateQueue,T.type=$.type,r=$.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return zt(Ot,Ot.current&1|2),n.child}r=r.sibling}T.tail!==null&&ot()>Ss&&(n.flags|=128,x=!0,_o(T,!1),n.lanes=4194304)}else{if(!x)if(r=Oa($),r!==null){if(n.flags|=128,x=!0,a=r.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),_o(T,!0),T.tail===null&&T.tailMode==="hidden"&&!$.alternate&&!Bt)return Sr(n),null}else 2*ot()-T.renderingStartTime>Ss&&a!==1073741824&&(n.flags|=128,x=!0,_o(T,!1),n.lanes=4194304);T.isBackwards?($.sibling=n.child,n.child=$):(a=T.last,a!==null?a.sibling=$:n.child=$,T.last=$)}return T.tail!==null?(n=T.tail,T.rendering=n,T.tail=n.sibling,T.renderingStartTime=ot(),n.sibling=null,a=Ot.current,zt(Ot,x?a&1|2:a&1),n):(Sr(n),null);case 22:case 23:return Td(),x=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==x&&(n.flags|=8192),x&&(n.mode&1)!==0?(Gr&1073741824)!==0&&(Sr(n),n.subtreeFlags&6&&(n.flags|=8192)):Sr(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Wv(r,n){switch(Oc(n),n.tag){case 1:return Pr(n.type)&&Ea(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return ys(),Dt(Br),Dt(br),Jc(),r=n.flags,(r&65536)!==0&&(r&128)===0?(n.flags=r&-65537|128,n):null;case 5:return Yc(n),null;case 13:if(Dt(Ot),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(s(340));fs()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Dt(Ot),null;case 4:return ys(),null;case 10:return Uc(n.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var qa=!1,wr=!1,Nv=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function bs(r,n){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(x){Ht(r,n,x)}else a.current=null}function md(r,n,a){try{a()}catch(x){Ht(r,n,x)}}var ag=!1;function Hv(r,n){if(Tc=pa,r=Op(),_c(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var x=a.getSelection&&a.getSelection();if(x&&x.rangeCount!==0){a=x.anchorNode;var k=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{a.nodeType,T.nodeType}catch{a=null;break e}var $=0,G=-1,te=-1,be=0,Le=0,Pe=r,Te=null;t:for(;;){for(var Ke;Pe!==a||k!==0&&Pe.nodeType!==3||(G=$+k),Pe!==T||x!==0&&Pe.nodeType!==3||(te=$+x),Pe.nodeType===3&&($+=Pe.nodeValue.length),(Ke=Pe.firstChild)!==null;)Te=Pe,Pe=Ke;for(;;){if(Pe===r)break t;if(Te===a&&++be===k&&(G=$),Te===T&&++Le===x&&(te=$),(Ke=Pe.nextSibling)!==null)break;Pe=Te,Te=Pe.parentNode}Pe=Ke}a=G===-1||te===-1?null:{start:G,end:te}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ac={focusedElem:r,selectionRange:a},pa=!1,Ge=n;Ge!==null;)if(n=Ge,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,Ge=r;else for(;Ge!==null;){n=Ge;try{var Je=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var et=Je.memoizedProps,Yt=Je.memoizedState,ue=n.stateNode,ie=ue.getSnapshotBeforeUpdate(n.elementType===n.type?et:hi(n.type,et),Yt);ue.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var fe=n.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Fe){Ht(n,n.return,Fe)}if(r=n.sibling,r!==null){r.return=n.return,Ge=r;break}Ge=n.return}return Je=ag,ag=!1,Je}function So(r,n,a){var x=n.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&r)===r){var T=k.destroy;k.destroy=void 0,T!==void 0&&md(n,a,T)}k=k.next}while(k!==x)}}function Ga(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&r)===r){var x=a.create;a.destroy=x()}a=a.next}while(a!==n)}}function yd(r){var n=r.ref;if(n!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof n=="function"?n(r):n.current=r}}function lg(r){var n=r.alternate;n!==null&&(r.alternate=null,lg(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[Si],delete n[uo],delete n[Dc],delete n[kv],delete n[jv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function cg(r){return r.tag===5||r.tag===3||r.tag===4}function dg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||cg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vd(r,n,a){var x=r.tag;if(x===5||x===6)r=r.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(r,n):a.insertBefore(r,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(r,a)):(n=a,n.appendChild(r)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ka));else if(x!==4&&(r=r.child,r!==null))for(vd(r,n,a),r=r.sibling;r!==null;)vd(r,n,a),r=r.sibling}function bd(r,n,a){var x=r.tag;if(x===5||x===6)r=r.stateNode,n?a.insertBefore(r,n):a.appendChild(r);else if(x!==4&&(r=r.child,r!==null))for(bd(r,n,a),r=r.sibling;r!==null;)bd(r,n,a),r=r.sibling}var xr=null,pi=!1;function dn(r,n,a){for(a=a.child;a!==null;)ug(r,n,a),a=a.sibling}function ug(r,n,a){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(aa,a)}catch{}switch(a.tag){case 5:wr||bs(a,n);case 6:var x=xr,k=pi;xr=null,dn(r,n,a),xr=x,pi=k,xr!==null&&(pi?(r=xr,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):xr.removeChild(a.stateNode));break;case 18:xr!==null&&(pi?(r=xr,a=a.stateNode,r.nodeType===8?Ic(r.parentNode,a):r.nodeType===1&&Ic(r,a),Zs(r)):Ic(xr,a.stateNode));break;case 4:x=xr,k=pi,xr=a.stateNode.containerInfo,pi=!0,dn(r,n,a),xr=x,pi=k;break;case 0:case 11:case 14:case 15:if(!wr&&(x=a.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){k=x=x.next;do{var T=k,$=T.destroy;T=T.tag,$!==void 0&&((T&2)!==0||(T&4)!==0)&&md(a,n,$),k=k.next}while(k!==x)}dn(r,n,a);break;case 1:if(!wr&&(bs(a,n),x=a.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=a.memoizedProps,x.state=a.memoizedState,x.componentWillUnmount()}catch(G){Ht(a,n,G)}dn(r,n,a);break;case 21:dn(r,n,a);break;case 22:a.mode&1?(wr=(x=wr)||a.memoizedState!==null,dn(r,n,a),wr=x):dn(r,n,a);break;default:dn(r,n,a)}}function hg(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Nv),n.forEach(function(x){var k=Qv.bind(null,r,x);a.has(x)||(a.add(x),x.then(k,k))})}}function fi(r,n){var a=n.deletions;if(a!==null)for(var x=0;x<a.length;x++){var k=a[x];try{var T=r,$=n,G=$;e:for(;G!==null;){switch(G.tag){case 5:xr=G.stateNode,pi=!1;break e;case 3:xr=G.stateNode.containerInfo,pi=!0;break e;case 4:xr=G.stateNode.containerInfo,pi=!0;break e}G=G.return}if(xr===null)throw Error(s(160));ug(T,$,k),xr=null,pi=!1;var te=k.alternate;te!==null&&(te.return=null),k.return=null}catch(be){Ht(k,n,be)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)pg(n,r),n=n.sibling}function pg(r,n){var a=r.alternate,x=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(fi(n,r),ki(r),x&4){try{So(3,r,r.return),Ga(3,r)}catch(et){Ht(r,r.return,et)}try{So(5,r,r.return)}catch(et){Ht(r,r.return,et)}}break;case 1:fi(n,r),ki(r),x&512&&a!==null&&bs(a,a.return);break;case 5:if(fi(n,r),ki(r),x&512&&a!==null&&bs(a,a.return),r.flags&32){var k=r.stateNode;try{xt(k,"")}catch(et){Ht(r,r.return,et)}}if(x&4&&(k=r.stateNode,k!=null)){var T=r.memoizedProps,$=a!==null?a.memoizedProps:T,G=r.type,te=r.updateQueue;if(r.updateQueue=null,te!==null)try{G==="input"&&T.type==="radio"&&T.name!=null&&Oe(k,T),Lr(G,$);var be=Lr(G,T);for($=0;$<te.length;$+=2){var Le=te[$],Pe=te[$+1];Le==="style"?pr(k,Pe):Le==="dangerouslySetInnerHTML"?Mt(k,Pe):Le==="children"?xt(k,Pe):g(k,Le,Pe,be)}switch(G){case"input":$e(k,T);break;case"textarea":Xe(k,T);break;case"select":var Te=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!T.multiple;var Ke=T.value;Ke!=null?le(k,!!T.multiple,Ke,!1):Te!==!!T.multiple&&(T.defaultValue!=null?le(k,!!T.multiple,T.defaultValue,!0):le(k,!!T.multiple,T.multiple?[]:"",!1))}k[uo]=T}catch(et){Ht(r,r.return,et)}}break;case 6:if(fi(n,r),ki(r),x&4){if(r.stateNode===null)throw Error(s(162));k=r.stateNode,T=r.memoizedProps;try{k.nodeValue=T}catch(et){Ht(r,r.return,et)}}break;case 3:if(fi(n,r),ki(r),x&4&&a!==null&&a.memoizedState.isDehydrated)try{Zs(n.containerInfo)}catch(et){Ht(r,r.return,et)}break;case 4:fi(n,r),ki(r);break;case 13:fi(n,r),ki(r),k=r.child,k.flags&8192&&(T=k.memoizedState!==null,k.stateNode.isHidden=T,!T||k.alternate!==null&&k.alternate.memoizedState!==null||(wd=ot())),x&4&&hg(r);break;case 22:if(Le=a!==null&&a.memoizedState!==null,r.mode&1?(wr=(be=wr)||Le,fi(n,r),wr=be):fi(n,r),ki(r),x&8192){if(be=r.memoizedState!==null,(r.stateNode.isHidden=be)&&!Le&&(r.mode&1)!==0)for(Ge=r,Le=r.child;Le!==null;){for(Pe=Ge=Le;Ge!==null;){switch(Te=Ge,Ke=Te.child,Te.tag){case 0:case 11:case 14:case 15:So(4,Te,Te.return);break;case 1:bs(Te,Te.return);var Je=Te.stateNode;if(typeof Je.componentWillUnmount=="function"){x=Te,a=Te.return;try{n=x,Je.props=n.memoizedProps,Je.state=n.memoizedState,Je.componentWillUnmount()}catch(et){Ht(x,a,et)}}break;case 5:bs(Te,Te.return);break;case 22:if(Te.memoizedState!==null){xg(Pe);continue}}Ke!==null?(Ke.return=Te,Ge=Ke):xg(Pe)}Le=Le.sibling}e:for(Le=null,Pe=r;;){if(Pe.tag===5){if(Le===null){Le=Pe;try{k=Pe.stateNode,be?(T=k.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(G=Pe.stateNode,te=Pe.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null,G.style.display=zr("display",$))}catch(et){Ht(r,r.return,et)}}}else if(Pe.tag===6){if(Le===null)try{Pe.stateNode.nodeValue=be?"":Pe.memoizedProps}catch(et){Ht(r,r.return,et)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===r)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===r)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===r)break e;Le===Pe&&(Le=null),Pe=Pe.return}Le===Pe&&(Le=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:fi(n,r),ki(r),x&4&&hg(r);break;case 21:break;default:fi(n,r),ki(r)}}function ki(r){var n=r.flags;if(n&2){try{e:{for(var a=r.return;a!==null;){if(cg(a)){var x=a;break e}a=a.return}throw Error(s(160))}switch(x.tag){case 5:var k=x.stateNode;x.flags&32&&(xt(k,""),x.flags&=-33);var T=dg(r);bd(r,T,k);break;case 3:case 4:var $=x.stateNode.containerInfo,G=dg(r);vd(r,G,$);break;default:throw Error(s(161))}}catch(te){Ht(r,r.return,te)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function Uv(r,n,a){Ge=r,fg(r)}function fg(r,n,a){for(var x=(r.mode&1)!==0;Ge!==null;){var k=Ge,T=k.child;if(k.tag===22&&x){var $=k.memoizedState!==null||qa;if(!$){var G=k.alternate,te=G!==null&&G.memoizedState!==null||wr;G=qa;var be=wr;if(qa=$,(wr=te)&&!be)for(Ge=k;Ge!==null;)$=Ge,te=$.child,$.tag===22&&$.memoizedState!==null?mg(k):te!==null?(te.return=$,Ge=te):mg(k);for(;T!==null;)Ge=T,fg(T),T=T.sibling;Ge=k,qa=G,wr=be}gg(r)}else(k.subtreeFlags&8772)!==0&&T!==null?(T.return=k,Ge=T):gg(r)}}function gg(r){for(;Ge!==null;){var n=Ge;if((n.flags&8772)!==0){var a=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:wr||Ga(5,n);break;case 1:var x=n.stateNode;if(n.flags&4&&!wr)if(a===null)x.componentDidMount();else{var k=n.elementType===n.type?a.memoizedProps:hi(n.type,a.memoizedProps);x.componentDidUpdate(k,a.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var T=n.updateQueue;T!==null&&xf(n,T,x);break;case 3:var $=n.updateQueue;if($!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}xf(n,$,a)}break;case 5:var G=n.stateNode;if(a===null&&n.flags&4){a=G;var te=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&a.focus();break;case"img":te.src&&(a.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var be=n.alternate;if(be!==null){var Le=be.memoizedState;if(Le!==null){var Pe=Le.dehydrated;Pe!==null&&Zs(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}wr||n.flags&512&&yd(n)}catch(Te){Ht(n,n.return,Te)}}if(n===r){Ge=null;break}if(a=n.sibling,a!==null){a.return=n.return,Ge=a;break}Ge=n.return}}function xg(r){for(;Ge!==null;){var n=Ge;if(n===r){Ge=null;break}var a=n.sibling;if(a!==null){a.return=n.return,Ge=a;break}Ge=n.return}}function mg(r){for(;Ge!==null;){var n=Ge;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{Ga(4,n)}catch(te){Ht(n,a,te)}break;case 1:var x=n.stateNode;if(typeof x.componentDidMount=="function"){var k=n.return;try{x.componentDidMount()}catch(te){Ht(n,k,te)}}var T=n.return;try{yd(n)}catch(te){Ht(n,T,te)}break;case 5:var $=n.return;try{yd(n)}catch(te){Ht(n,$,te)}}}catch(te){Ht(n,n.return,te)}if(n===r){Ge=null;break}var G=n.sibling;if(G!==null){G.return=n.return,Ge=G;break}Ge=n.return}}var Vv=Math.ceil,Ya=C.ReactCurrentDispatcher,_d=C.ReactCurrentOwner,ti=C.ReactCurrentBatchConfig,St=0,dr=null,Zt=null,mr=0,Gr=0,_s=sn(0),or=0,wo=null,Fn=0,Xa=0,Sd=0,Co=null,$r=null,wd=0,Ss=1/0,Ni=null,Ja=!1,Cd=null,un=null,Qa=!1,hn=null,Za=0,ko=0,kd=null,el=-1,tl=0;function Er(){return(St&6)!==0?ot():el!==-1?el:el=ot()}function pn(r){return(r.mode&1)===0?1:(St&2)!==0&&mr!==0?mr&-mr:Rv.transition!==null?(tl===0&&(tl=cp()),tl):(r=jt,r!==0||(r=window.event,r=r===void 0?16:yp(r.type)),r)}function gi(r,n,a,x){if(50<ko)throw ko=0,kd=null,Error(s(185));Gs(r,a,x),((St&2)===0||r!==dr)&&(r===dr&&((St&2)===0&&(Xa|=a),or===4&&fn(r,mr)),Fr(r,x),a===1&&St===0&&(n.mode&1)===0&&(Ss=ot()+500,Ta&&an()))}function Fr(r,n){var a=r.callbackNode;R1(r,n);var x=da(r,r===dr?mr:0);if(x===0)a!==null&&vt(a),r.callbackNode=null,r.callbackPriority=0;else if(n=x&-x,r.callbackPriority!==n){if(a!=null&&vt(a),n===1)r.tag===0?Ev(vg.bind(null,r)):nf(vg.bind(null,r)),wv(function(){(St&6)===0&&an()}),a=null;else{switch(dp(x)){case 1:a=gr;break;case 4:a=sa;break;case 16:a=oa;break;case 536870912:a=lp;break;default:a=oa}a=Eg(a,yg.bind(null,r))}r.callbackPriority=n,r.callbackNode=a}}function yg(r,n){if(el=-1,tl=0,(St&6)!==0)throw Error(s(327));var a=r.callbackNode;if(ws()&&r.callbackNode!==a)return null;var x=da(r,r===dr?mr:0);if(x===0)return null;if((x&30)!==0||(x&r.expiredLanes)!==0||n)n=rl(r,x);else{n=x;var k=St;St|=2;var T=_g();(dr!==r||mr!==n)&&(Ni=null,Ss=ot()+500,Nn(r,n));do try{Gv();break}catch(G){bg(r,G)}while(!0);Hc(),Ya.current=T,St=k,Zt!==null?n=0:(dr=null,mr=0,n=or)}if(n!==0){if(n===2&&(k=sc(r),k!==0&&(x=k,n=jd(r,k))),n===1)throw a=wo,Nn(r,0),fn(r,x),Fr(r,ot()),a;if(n===6)fn(r,x);else{if(k=r.current.alternate,(x&30)===0&&!Kv(k)&&(n=rl(r,x),n===2&&(T=sc(r),T!==0&&(x=T,n=jd(r,T))),n===1))throw a=wo,Nn(r,0),fn(r,x),Fr(r,ot()),a;switch(r.finishedWork=k,r.finishedLanes=x,n){case 0:case 1:throw Error(s(345));case 2:Hn(r,$r,Ni);break;case 3:if(fn(r,x),(x&130023424)===x&&(n=wd+500-ot(),10<n)){if(da(r,0)!==0)break;if(k=r.suspendedLanes,(k&x)!==x){Er(),r.pingedLanes|=r.suspendedLanes&k;break}r.timeoutHandle=Lc(Hn.bind(null,r,$r,Ni),n);break}Hn(r,$r,Ni);break;case 4:if(fn(r,x),(x&4194240)===x)break;for(n=r.eventTimes,k=-1;0<x;){var $=31-ci(x);T=1<<$,$=n[$],$>k&&(k=$),x&=~T}if(x=k,x=ot()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Vv(x/1960))-x,10<x){r.timeoutHandle=Lc(Hn.bind(null,r,$r,Ni),x);break}Hn(r,$r,Ni);break;case 5:Hn(r,$r,Ni);break;default:throw Error(s(329))}}}return Fr(r,ot()),r.callbackNode===a?yg.bind(null,r):null}function jd(r,n){var a=Co;return r.current.memoizedState.isDehydrated&&(Nn(r,n).flags|=256),r=rl(r,n),r!==2&&(n=$r,$r=a,n!==null&&Ed(n)),r}function Ed(r){$r===null?$r=r:$r.push.apply($r,r)}function Kv(r){for(var n=r;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var x=0;x<a.length;x++){var k=a[x],T=k.getSnapshot;k=k.value;try{if(!di(T(),k))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fn(r,n){for(n&=~Sd,n&=~Xa,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var a=31-ci(n),x=1<<a;r[a]=-1,n&=~x}}function vg(r){if((St&6)!==0)throw Error(s(327));ws();var n=da(r,0);if((n&1)===0)return Fr(r,ot()),null;var a=rl(r,n);if(r.tag!==0&&a===2){var x=sc(r);x!==0&&(n=x,a=jd(r,x))}if(a===1)throw a=wo,Nn(r,0),fn(r,n),Fr(r,ot()),a;if(a===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,Hn(r,$r,Ni),Fr(r,ot()),null}function Rd(r,n){var a=St;St|=1;try{return r(n)}finally{St=a,St===0&&(Ss=ot()+500,Ta&&an())}}function Wn(r){hn!==null&&hn.tag===0&&(St&6)===0&&ws();var n=St;St|=1;var a=ti.transition,x=jt;try{if(ti.transition=null,jt=1,r)return r()}finally{jt=x,ti.transition=a,St=n,(St&6)===0&&an()}}function Td(){Gr=_s.current,Dt(_s)}function Nn(r,n){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Sv(a)),Zt!==null)for(a=Zt.return;a!==null;){var x=a;switch(Oc(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ea();break;case 3:ys(),Dt(Br),Dt(br),Jc();break;case 5:Yc(x);break;case 4:ys();break;case 13:Dt(Ot);break;case 19:Dt(Ot);break;case 10:Uc(x.type._context);break;case 22:case 23:Td()}a=a.return}if(dr=r,Zt=r=gn(r.current,null),mr=Gr=n,or=0,wo=null,Sd=Xa=Fn=0,$r=Co=null,Pn!==null){for(n=0;n<Pn.length;n++)if(a=Pn[n],x=a.interleaved,x!==null){a.interleaved=null;var k=x.next,T=a.pending;if(T!==null){var $=T.next;T.next=k,x.next=$}a.pending=x}Pn=null}return r}function bg(r,n){do{var a=Zt;try{if(Hc(),$a.current=Ha,Fa){for(var x=$t.memoizedState;x!==null;){var k=x.queue;k!==null&&(k.pending=null),x=x.next}Fa=!1}if($n=0,cr=sr=$t=null,mo=!1,yo=0,_d.current=null,a===null||a.return===null){or=1,wo=n,Zt=null;break}e:{var T=r,$=a.return,G=a,te=n;if(n=mr,G.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var be=te,Le=G,Pe=Le.tag;if((Le.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var Te=Le.alternate;Te?(Le.updateQueue=Te.updateQueue,Le.memoizedState=Te.memoizedState,Le.lanes=Te.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var Ke=Vf($);if(Ke!==null){Ke.flags&=-257,Kf(Ke,$,G,T,n),Ke.mode&1&&Uf(T,be,n),n=Ke,te=be;var Je=n.updateQueue;if(Je===null){var et=new Set;et.add(te),n.updateQueue=et}else Je.add(te);break e}else{if((n&1)===0){Uf(T,be,n),Ad();break e}te=Error(s(426))}}else if(Bt&&G.mode&1){var Yt=Vf($);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Kf(Yt,$,G,T,n),Wc(vs(te,G));break e}}T=te=vs(te,G),or!==4&&(or=2),Co===null?Co=[T]:Co.push(T),T=$;do{switch(T.tag){case 3:T.flags|=65536,n&=-n,T.lanes|=n;var ue=Nf(T,te,n);gf(T,ue);break e;case 1:G=te;var ie=T.type,fe=T.stateNode;if((T.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(un===null||!un.has(fe)))){T.flags|=65536,n&=-n,T.lanes|=n;var Fe=Hf(T,G,n);gf(T,Fe);break e}}T=T.return}while(T!==null)}wg(a)}catch(tt){n=tt,Zt===a&&a!==null&&(Zt=a=a.return);continue}break}while(!0)}function _g(){var r=Ya.current;return Ya.current=Ha,r===null?Ha:r}function Ad(){(or===0||or===3||or===2)&&(or=4),dr===null||(Fn&268435455)===0&&(Xa&268435455)===0||fn(dr,mr)}function rl(r,n){var a=St;St|=2;var x=_g();(dr!==r||mr!==n)&&(Ni=null,Nn(r,n));do try{qv();break}catch(k){bg(r,k)}while(!0);if(Hc(),St=a,Ya.current=x,Zt!==null)throw Error(s(261));return dr=null,mr=0,or}function qv(){for(;Zt!==null;)Sg(Zt)}function Gv(){for(;Zt!==null&&!bt();)Sg(Zt)}function Sg(r){var n=jg(r.alternate,r,Gr);r.memoizedProps=r.pendingProps,n===null?wg(r):Zt=n,_d.current=null}function wg(r){var n=r;do{var a=n.alternate;if(r=n.return,(n.flags&32768)===0){if(a=Fv(a,n,Gr),a!==null){Zt=a;return}}else{if(a=Wv(a,n),a!==null){a.flags&=32767,Zt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{or=6,Zt=null;return}}if(n=n.sibling,n!==null){Zt=n;return}Zt=n=r}while(n!==null);or===0&&(or=5)}function Hn(r,n,a){var x=jt,k=ti.transition;try{ti.transition=null,jt=1,Yv(r,n,a,x)}finally{ti.transition=k,jt=x}return null}function Yv(r,n,a,x){do ws();while(hn!==null);if((St&6)!==0)throw Error(s(327));a=r.finishedWork;var k=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var T=a.lanes|a.childLanes;if(T1(r,T),r===dr&&(Zt=dr=null,mr=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Qa||(Qa=!0,Eg(oa,function(){return ws(),null})),T=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||T){T=ti.transition,ti.transition=null;var $=jt;jt=1;var G=St;St|=4,_d.current=null,Hv(r,a),pg(a,r),gv(Ac),pa=!!Tc,Ac=Tc=null,r.current=a,Uv(a),Re(),St=G,jt=$,ti.transition=T}else r.current=a;if(Qa&&(Qa=!1,hn=r,Za=k),T=r.pendingLanes,T===0&&(un=null),w1(a.stateNode),Fr(r,ot()),n!==null)for(x=r.onRecoverableError,a=0;a<n.length;a++)k=n[a],x(k.value,{componentStack:k.stack,digest:k.digest});if(Ja)throw Ja=!1,r=Cd,Cd=null,r;return(Za&1)!==0&&r.tag!==0&&ws(),T=r.pendingLanes,(T&1)!==0?r===kd?ko++:(ko=0,kd=r):ko=0,an(),null}function ws(){if(hn!==null){var r=dp(Za),n=ti.transition,a=jt;try{if(ti.transition=null,jt=16>r?16:r,hn===null)var x=!1;else{if(r=hn,hn=null,Za=0,(St&6)!==0)throw Error(s(331));var k=St;for(St|=4,Ge=r.current;Ge!==null;){var T=Ge,$=T.child;if((Ge.flags&16)!==0){var G=T.deletions;if(G!==null){for(var te=0;te<G.length;te++){var be=G[te];for(Ge=be;Ge!==null;){var Le=Ge;switch(Le.tag){case 0:case 11:case 15:So(8,Le,T)}var Pe=Le.child;if(Pe!==null)Pe.return=Le,Ge=Pe;else for(;Ge!==null;){Le=Ge;var Te=Le.sibling,Ke=Le.return;if(lg(Le),Le===be){Ge=null;break}if(Te!==null){Te.return=Ke,Ge=Te;break}Ge=Ke}}}var Je=T.alternate;if(Je!==null){var et=Je.child;if(et!==null){Je.child=null;do{var Yt=et.sibling;et.sibling=null,et=Yt}while(et!==null)}}Ge=T}}if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,Ge=$;else e:for(;Ge!==null;){if(T=Ge,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:So(9,T,T.return)}var ue=T.sibling;if(ue!==null){ue.return=T.return,Ge=ue;break e}Ge=T.return}}var ie=r.current;for(Ge=ie;Ge!==null;){$=Ge;var fe=$.child;if(($.subtreeFlags&2064)!==0&&fe!==null)fe.return=$,Ge=fe;else e:for($=ie;Ge!==null;){if(G=Ge,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Ga(9,G)}}catch(tt){Ht(G,G.return,tt)}if(G===$){Ge=null;break e}var Fe=G.sibling;if(Fe!==null){Fe.return=G.return,Ge=Fe;break e}Ge=G.return}}if(St=k,an(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(aa,r)}catch{}x=!0}return x}finally{jt=a,ti.transition=n}}return!1}function Cg(r,n,a){n=vs(a,n),n=Nf(r,n,1),r=cn(r,n,1),n=Er(),r!==null&&(Gs(r,1,n),Fr(r,n))}function Ht(r,n,a){if(r.tag===3)Cg(r,r,a);else for(;n!==null;){if(n.tag===3){Cg(n,r,a);break}else if(n.tag===1){var x=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(un===null||!un.has(x))){r=vs(a,r),r=Hf(n,r,1),n=cn(n,r,1),r=Er(),n!==null&&(Gs(n,1,r),Fr(n,r));break}}n=n.return}}function Xv(r,n,a){var x=r.pingCache;x!==null&&x.delete(n),n=Er(),r.pingedLanes|=r.suspendedLanes&a,dr===r&&(mr&a)===a&&(or===4||or===3&&(mr&130023424)===mr&&500>ot()-wd?Nn(r,0):Sd|=a),Fr(r,n)}function kg(r,n){n===0&&((r.mode&1)===0?n=1:(n=ca,ca<<=1,(ca&130023424)===0&&(ca=4194304)));var a=Er();r=$i(r,n),r!==null&&(Gs(r,n,a),Fr(r,a))}function Jv(r){var n=r.memoizedState,a=0;n!==null&&(a=n.retryLane),kg(r,a)}function Qv(r,n){var a=0;switch(r.tag){case 13:var x=r.stateNode,k=r.memoizedState;k!==null&&(a=k.retryLane);break;case 19:x=r.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(n),kg(r,a)}var jg;jg=function(r,n,a){if(r!==null)if(r.memoizedProps!==n.pendingProps||Br.current)Or=!0;else{if((r.lanes&a)===0&&(n.flags&128)===0)return Or=!1,$v(r,n,a);Or=(r.flags&131072)!==0}else Or=!1,Bt&&(n.flags&1048576)!==0&&sf(n,za,n.index);switch(n.lanes=0,n.tag){case 2:var x=n.type;Ka(r,n),r=n.pendingProps;var k=us(n,br.current);ms(n,a),k=ed(null,n,x,r,k,a);var T=td();return n.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Pr(x)?(T=!0,Ra(n)):T=!1,n.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,qc(n),k.updater=Ua,n.stateNode=k,k._reactInternals=n,ad(n,x,r,a),n=ud(null,n,x,!0,T,a)):(n.tag=0,Bt&&T&&Pc(n),jr(null,n,k,a),n=n.child),n;case 16:x=n.elementType;e:{switch(Ka(r,n),r=n.pendingProps,k=x._init,x=k(x._payload),n.type=x,k=n.tag=eb(x),r=hi(x,r),k){case 0:n=dd(null,n,x,r,a);break e;case 1:n=Qf(null,n,x,r,a);break e;case 11:n=qf(null,n,x,r,a);break e;case 14:n=Gf(null,n,x,hi(x.type,r),a);break e}throw Error(s(306,x,""))}return n;case 0:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:hi(x,k),dd(r,n,x,k,a);case 1:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:hi(x,k),Qf(r,n,x,k,a);case 3:e:{if(Zf(n),r===null)throw Error(s(387));x=n.pendingProps,T=n.memoizedState,k=T.element,ff(r,n),Pa(n,x,null,a);var $=n.memoizedState;if(x=$.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},n.updateQueue.baseState=T,n.memoizedState=T,n.flags&256){k=vs(Error(s(423)),n),n=eg(r,n,x,a,k);break e}else if(x!==k){k=vs(Error(s(424)),n),n=eg(r,n,x,a,k);break e}else for(qr=nn(n.stateNode.containerInfo.firstChild),Kr=n,Bt=!0,ui=null,a=hf(n,null,x,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fs(),x===k){n=Wi(r,n,a);break e}jr(r,n,x,a)}n=n.child}return n;case 5:return mf(n),r===null&&Fc(n),x=n.type,k=n.pendingProps,T=r!==null?r.memoizedProps:null,$=k.children,zc(x,k)?$=null:T!==null&&zc(x,T)&&(n.flags|=32),Jf(r,n),jr(r,n,$,a),n.child;case 6:return r===null&&Fc(n),null;case 13:return tg(r,n,a);case 4:return Gc(n,n.stateNode.containerInfo),x=n.pendingProps,r===null?n.child=gs(n,null,x,a):jr(r,n,x,a),n.child;case 11:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:hi(x,k),qf(r,n,x,k,a);case 7:return jr(r,n,n.pendingProps,a),n.child;case 8:return jr(r,n,n.pendingProps.children,a),n.child;case 12:return jr(r,n,n.pendingProps.children,a),n.child;case 10:e:{if(x=n.type._context,k=n.pendingProps,T=n.memoizedProps,$=k.value,zt(Da,x._currentValue),x._currentValue=$,T!==null)if(di(T.value,$)){if(T.children===k.children&&!Br.current){n=Wi(r,n,a);break e}}else for(T=n.child,T!==null&&(T.return=n);T!==null;){var G=T.dependencies;if(G!==null){$=T.child;for(var te=G.firstContext;te!==null;){if(te.context===x){if(T.tag===1){te=Fi(-1,a&-a),te.tag=2;var be=T.updateQueue;if(be!==null){be=be.shared;var Le=be.pending;Le===null?te.next=te:(te.next=Le.next,Le.next=te),be.pending=te}}T.lanes|=a,te=T.alternate,te!==null&&(te.lanes|=a),Vc(T.return,a,n),G.lanes|=a;break}te=te.next}}else if(T.tag===10)$=T.type===n.type?null:T.child;else if(T.tag===18){if($=T.return,$===null)throw Error(s(341));$.lanes|=a,G=$.alternate,G!==null&&(G.lanes|=a),Vc($,a,n),$=T.sibling}else $=T.child;if($!==null)$.return=T;else for($=T;$!==null;){if($===n){$=null;break}if(T=$.sibling,T!==null){T.return=$.return,$=T;break}$=$.return}T=$}jr(r,n,k.children,a),n=n.child}return n;case 9:return k=n.type,x=n.pendingProps.children,ms(n,a),k=Zr(k),x=x(k),n.flags|=1,jr(r,n,x,a),n.child;case 14:return x=n.type,k=hi(x,n.pendingProps),k=hi(x.type,k),Gf(r,n,x,k,a);case 15:return Yf(r,n,n.type,n.pendingProps,a);case 17:return x=n.type,k=n.pendingProps,k=n.elementType===x?k:hi(x,k),Ka(r,n),n.tag=1,Pr(x)?(r=!0,Ra(n)):r=!1,ms(n,a),Ff(n,x,k),ad(n,x,k,a),ud(null,n,x,!0,r,a);case 19:return ig(r,n,a);case 22:return Xf(r,n,a)}throw Error(s(156,n.tag))};function Eg(r,n){return rt(r,n)}function Zv(r,n,a,x){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(r,n,a,x){return new Zv(r,n,a,x)}function zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function eb(r){if(typeof r=="function")return zd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===K)return 11;if(r===V)return 14}return 2}function gn(r,n){var a=r.alternate;return a===null?(a=ri(r.tag,n,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=n,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,n=r.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function il(r,n,a,x,k,T){var $=2;if(x=r,typeof r=="function")zd(r)&&($=1);else if(typeof r=="string")$=5;else e:switch(r){case A:return Un(a.children,k,T,n);case E:$=8,k|=8;break;case B:return r=ri(12,a,n,k|2),r.elementType=B,r.lanes=T,r;case U:return r=ri(13,a,n,k),r.elementType=U,r.lanes=T,r;case ee:return r=ri(19,a,n,k),r.elementType=ee,r.lanes=T,r;case J:return nl(a,k,T,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:$=10;break e;case N:$=9;break e;case K:$=11;break e;case V:$=14;break e;case de:$=16,x=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return n=ri($,a,n,k),n.elementType=r,n.type=x,n.lanes=T,n}function Un(r,n,a,x){return r=ri(7,r,x,n),r.lanes=a,r}function nl(r,n,a,x){return r=ri(22,r,x,n),r.elementType=J,r.lanes=a,r.stateNode={isHidden:!1},r}function Ld(r,n,a){return r=ri(6,r,null,n),r.lanes=a,r}function Id(r,n,a){return n=ri(4,r.children!==null?r.children:[],r.key,n),n.lanes=a,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function tb(r,n,a,x,k){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oc(0),this.expirationTimes=oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.identifierPrefix=x,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Dd(r,n,a,x,k,T,$,G,te){return r=new tb(r,n,a,G,te),n===1?(n=1,T===!0&&(n|=8)):n=0,T=ri(3,null,null,n),r.current=T,T.stateNode=r,T.memoizedState={element:x,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(T),r}function rb(r,n,a){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:x==null?null:""+x,children:r,containerInfo:n,implementation:a}}function Rg(r){if(!r)return on;r=r._reactInternals;e:{if(ct(r)!==r||r.tag!==1)throw Error(s(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Pr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(r.tag===1){var a=r.type;if(Pr(a))return tf(r,a,n)}return n}function Tg(r,n,a,x,k,T,$,G,te){return r=Dd(a,x,!0,r,k,T,$,G,te),r.context=Rg(null),a=r.current,x=Er(),k=pn(a),T=Fi(x,k),T.callback=n??null,cn(a,T,k),r.current.lanes=k,Gs(r,k,x),Fr(r,x),r}function sl(r,n,a,x){var k=n.current,T=Er(),$=pn(k);return a=Rg(a),n.context===null?n.context=a:n.pendingContext=a,n=Fi(T,$),n.payload={element:r},x=x===void 0?null:x,x!==null&&(n.callback=x),r=cn(k,n,$),r!==null&&(gi(r,k,$,T),Ba(r,k,$)),$}function ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ag(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<n?a:n}}function Md(r,n){Ag(r,n),(r=r.alternate)&&Ag(r,n)}function ib(){return null}var zg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bd(r){this._internalRoot=r}al.prototype.render=Bd.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(s(409));sl(r,n,null,null)},al.prototype.unmount=Bd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Wn(function(){sl(null,r,null,null)}),n[Mi]=null}};function al(r){this._internalRoot=r}al.prototype.unstable_scheduleHydration=function(r){if(r){var n=pp();r={blockedOn:null,target:r,priority:n};for(var a=0;a<en.length&&n!==0&&n<en[a].priority;a++);en.splice(a,0,r),a===0&&xp(r)}};function Pd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ll(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function nb(r,n,a,x,k){if(k){if(typeof x=="function"){var T=x;x=function(){var be=ol($);T.call(be)}}var $=Tg(n,x,r,0,null,!1,!1,"",Lg);return r._reactRootContainer=$,r[Mi]=$.current,lo(r.nodeType===8?r.parentNode:r),Wn(),$}for(;k=r.lastChild;)r.removeChild(k);if(typeof x=="function"){var G=x;x=function(){var be=ol(te);G.call(be)}}var te=Dd(r,0,!1,null,null,!1,!1,"",Lg);return r._reactRootContainer=te,r[Mi]=te.current,lo(r.nodeType===8?r.parentNode:r),Wn(function(){sl(n,te,a,x)}),te}function cl(r,n,a,x,k){var T=a._reactRootContainer;if(T){var $=T;if(typeof k=="function"){var G=k;k=function(){var te=ol($);G.call(te)}}sl(n,$,r,k)}else $=nb(a,n,r,k,x);return ol($)}up=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var a=qs(n.pendingLanes);a!==0&&(ac(n,a|1),Fr(n,ot()),(St&6)===0&&(Ss=ot()+500,an()))}break;case 13:Wn(function(){var x=$i(r,1);if(x!==null){var k=Er();gi(x,r,1,k)}}),Md(r,1)}},lc=function(r){if(r.tag===13){var n=$i(r,134217728);if(n!==null){var a=Er();gi(n,r,134217728,a)}Md(r,134217728)}},hp=function(r){if(r.tag===13){var n=pn(r),a=$i(r,n);if(a!==null){var x=Er();gi(a,r,n,x)}Md(r,n)}},pp=function(){return jt},fp=function(r,n){var a=jt;try{return jt=r,n()}finally{jt=a}},He=function(r,n,a){switch(n){case"input":if($e(r,a),n=a.name,a.type==="radio"&&n!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var x=a[n];if(x!==r&&x.form===r.form){var k=ja(x);if(!k)throw Error(s(90));Z(x),$e(x,k)}}}break;case"textarea":Xe(r,a);break;case"select":n=a.value,n!=null&&le(r,!!a.multiple,n,!1)}},Gt=Rd,Ir=Wn;var sb={usingClientEntryPoint:!1,Events:[ho,cs,ja,Qt,gt,Rd]},jo={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ob={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Di(r),r===null?null:r.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||ib,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{aa=dl.inject(ob),_i=dl}catch{}}return Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb,Wr.createPortal=function(r,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(n))throw Error(s(200));return rb(r,n,null,a)},Wr.createRoot=function(r,n){if(!Pd(r))throw Error(s(299));var a=!1,x="",k=zg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(x=n.identifierPrefix),n.onRecoverableError!==void 0&&(k=n.onRecoverableError)),n=Dd(r,1,!1,null,null,a,!1,x,k),r[Mi]=n.current,lo(r.nodeType===8?r.parentNode:r),new Bd(n)},Wr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=Di(n),r=r===null?null:r.stateNode,r},Wr.flushSync=function(r){return Wn(r)},Wr.hydrate=function(r,n,a){if(!ll(n))throw Error(s(200));return cl(null,r,n,!0,a)},Wr.hydrateRoot=function(r,n,a){if(!Pd(r))throw Error(s(405));var x=a!=null&&a.hydratedSources||null,k=!1,T="",$=zg;if(a!=null&&(a.unstable_strictMode===!0&&(k=!0),a.identifierPrefix!==void 0&&(T=a.identifierPrefix),a.onRecoverableError!==void 0&&($=a.onRecoverableError)),n=Tg(n,null,r,1,a??null,k,!1,T,$),r[Mi]=n.current,lo(r),x)for(r=0;r<x.length;r++)a=x[r],k=a._getVersion,k=k(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,k]:n.mutableSourceEagerHydrationData.push(a,k);return new al(n)},Wr.render=function(r,n,a){if(!ll(n))throw Error(s(200));return cl(null,r,n,!1,a)},Wr.unmountComponentAtNode=function(r){if(!ll(r))throw Error(s(40));return r._reactRootContainer?(Wn(function(){cl(null,null,r,!1,function(){r._reactRootContainer=null,r[Mi]=null})}),!0):!1},Wr.unstable_batchedUpdates=Rd,Wr.unstable_renderSubtreeIntoContainer=function(r,n,a,x){if(!ll(a))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return cl(r,n,a,!1,x)},Wr.version="18.3.1-next-f1338f8080-20240426",Wr}var Fg;function Gm(){if(Fg)return Fd.exports;Fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),Fd.exports=gb(),Fd.exports}var Wg;function xb(){if(Wg)return ul;Wg=1;var t=Gm();return ul.createRoot=t.createRoot,ul.hydrateRoot=t.hydrateRoot,ul}var mb=xb();const yb=qm(mb);Gm();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},Ho.apply(this,arguments)}var _n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_n||(_n={}));const Ng="popstate";function vb(t){t===void 0&&(t={});function i(o,u){let{pathname:S,search:b,hash:l}=o.location;return Cu("",{pathname:S,search:b,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(o,u){return typeof u=="string"?u:Bl(u)}return _b(i,s,null,t)}function Nt(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function hh(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function bb(){return Math.random().toString(36).substr(2,8)}function Hg(t,i){return{usr:t.state,key:t.key,idx:i}}function Cu(t,i,s,o){return s===void 0&&(s=null),Ho({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?Fs(i):i,{state:s,key:i&&i.key||o||bb()})}function Bl(t){let{pathname:i="/",search:s="",hash:o=""}=t;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function Fs(t){let i={};if(t){let s=t.indexOf("#");s>=0&&(i.hash=t.substr(s),t=t.substr(0,s));let o=t.indexOf("?");o>=0&&(i.search=t.substr(o),t=t.substr(0,o)),t&&(i.pathname=t)}return i}function _b(t,i,s,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:S=!1}=o,b=u.history,l=_n.Pop,c=null,m=v();m==null&&(m=0,b.replaceState(Ho({},b.state,{idx:m}),""));function v(){return(b.state||{idx:null}).idx}function d(){l=_n.Pop;let h=v(),p=h==null?null:h-m;m=h,c&&c({action:l,location:w.location,delta:p})}function y(h,p){l=_n.Push;let f=Cu(w.location,h,p);m=v()+1;let g=Hg(f,m),C=w.createHref(f);try{b.pushState(g,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(C)}S&&c&&c({action:l,location:w.location,delta:1})}function _(h,p){l=_n.Replace;let f=Cu(w.location,h,p);m=v();let g=Hg(f,m),C=w.createHref(f);b.replaceState(g,"",C),S&&c&&c({action:l,location:w.location,delta:0})}function j(h){let p=u.location.origin!=="null"?u.location.origin:u.location.href,f=typeof h=="string"?h:Bl(h);return f=f.replace(/ $/,"%20"),Nt(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let w={get action(){return l},get location(){return t(u,b)},listen(h){if(c)throw new Error("A history only accepts one active listener");return u.addEventListener(Ng,d),c=h,()=>{u.removeEventListener(Ng,d),c=null}},createHref(h){return i(u,h)},createURL:j,encodeLocation(h){let p=j(h);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:y,replace:_,go(h){return b.go(h)}};return w}var Ug;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ug||(Ug={}));function Sb(t,i,s){return s===void 0&&(s="/"),wb(t,i,s)}function wb(t,i,s,o){let u=typeof i=="string"?Fs(i):i,S=Ds(u.pathname||"/",s);if(S==null)return null;let b=Ym(t);Cb(b);let l=null;for(let c=0;l==null&&c<b.length;++c){let m=Mb(S);l=Ib(b[c],m)}return l}function Ym(t,i,s,o){i===void 0&&(i=[]),s===void 0&&(s=[]),o===void 0&&(o="");let u=(S,b,l)=>{let c={relativePath:l===void 0?S.path||"":l,caseSensitive:S.caseSensitive===!0,childrenIndex:b,route:S};c.relativePath.startsWith("/")&&(Nt(c.relativePath.startsWith(o),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(o.length));let m=Cn([o,c.relativePath]),v=s.concat(c);S.children&&S.children.length>0&&(Nt(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Ym(S.children,i,v,m)),!(S.path==null&&!S.index)&&i.push({path:m,score:zb(m,S.index),routesMeta:v})};return t.forEach((S,b)=>{var l;if(S.path===""||!((l=S.path)!=null&&l.includes("?")))u(S,b);else for(let c of Xm(S.path))u(S,b,c)}),i}function Xm(t){let i=t.split("/");if(i.length===0)return[];let[s,...o]=i,u=s.endsWith("?"),S=s.replace(/\?$/,"");if(o.length===0)return u?[S,""]:[S];let b=Xm(o.join("/")),l=[];return l.push(...b.map(c=>c===""?S:[S,c].join("/"))),u&&l.push(...b),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Cb(t){t.sort((i,s)=>i.score!==s.score?s.score-i.score:Lb(i.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const kb=/^:[\w-]+$/,jb=3,Eb=2,Rb=1,Tb=10,Ab=-2,Vg=t=>t==="*";function zb(t,i){let s=t.split("/"),o=s.length;return s.some(Vg)&&(o+=Ab),i&&(o+=Eb),s.filter(u=>!Vg(u)).reduce((u,S)=>u+(kb.test(S)?jb:S===""?Rb:Tb),o)}function Lb(t,i){return t.length===i.length&&t.slice(0,-1).every((o,u)=>o===i[u])?t[t.length-1]-i[i.length-1]:0}function Ib(t,i,s){let{routesMeta:o}=t,u={},S="/",b=[];for(let l=0;l<o.length;++l){let c=o[l],m=l===o.length-1,v=S==="/"?i:i.slice(S.length)||"/",d=ku({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},v),y=c.route;if(!d)return null;Object.assign(u,d.params),b.push({params:u,pathname:Cn([S,d.pathname]),pathnameBase:Fb(Cn([S,d.pathnameBase])),route:y}),d.pathnameBase!=="/"&&(S=Cn([S,d.pathnameBase]))}return b}function ku(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,o]=Db(t.path,t.caseSensitive,t.end),u=i.match(s);if(!u)return null;let S=u[0],b=S.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((m,v,d)=>{let{paramName:y,isOptional:_}=v;if(y==="*"){let w=l[d]||"";b=S.slice(0,S.length-w.length).replace(/(.)\/+$/,"$1")}const j=l[d];return _&&!j?m[y]=void 0:m[y]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:S,pathnameBase:b,pattern:t}}function Db(t,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),hh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],u="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,l,c)=>(o.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),u+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":t!==""&&t!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function Mb(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return hh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function Ds(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,o=t.charAt(s);return o&&o!=="/"?null:t.slice(s)||"/"}const Bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pb=t=>Bb.test(t);function Ob(t,i){i===void 0&&(i="/");let{pathname:s,search:o="",hash:u=""}=typeof t=="string"?Fs(t):t,S;if(s)if(Pb(s))S=s;else{if(s.includes("//")){let b=s;s=s.replace(/\/\/+/g,"/"),hh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(b+" -> "+s))}s.startsWith("/")?S=Kg(s.substring(1),"/"):S=Kg(s,i)}else S=i;return{pathname:S,search:Wb(o),hash:Nb(u)}}function Kg(t,i){let s=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function Hd(t,i,s,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $b(t){return t.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function ph(t,i){let s=$b(t);return i?s.map((o,u)=>u===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function fh(t,i,s,o){o===void 0&&(o=!1);let u;typeof t=="string"?u=Fs(t):(u=Ho({},t),Nt(!u.pathname||!u.pathname.includes("?"),Hd("?","pathname","search",u)),Nt(!u.pathname||!u.pathname.includes("#"),Hd("#","pathname","hash",u)),Nt(!u.search||!u.search.includes("#"),Hd("#","search","hash",u)));let S=t===""||u.pathname==="",b=S?"/":u.pathname,l;if(b==null)l=s;else{let d=i.length-1;if(!o&&b.startsWith("..")){let y=b.split("/");for(;y[0]==="..";)y.shift(),d-=1;u.pathname=y.join("/")}l=d>=0?i[d]:"/"}let c=Ob(u,l),m=b&&b!=="/"&&b.endsWith("/"),v=(S||b===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(m||v)&&(c.pathname+="/"),c}const Cn=t=>t.join("/").replace(/\/\/+/g,"/"),Fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Jm=["post","put","patch","delete"];new Set(Jm);const Ub=["get",...Jm];new Set(Ub);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},Uo.apply(this,arguments)}const ql=L.createContext(null),Qm=L.createContext(null),Yi=L.createContext(null),Gl=L.createContext(null),Li=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Zm=L.createContext(null);function Vb(t,i){let{relative:s}=i===void 0?{}:i;Ws()||Nt(!1);let{basename:o,navigator:u}=L.useContext(Yi),{hash:S,pathname:b,search:l}=Yl(t,{relative:s}),c=b;return o!=="/"&&(c=b==="/"?o:Cn([o,b])),u.createHref({pathname:c,search:l,hash:S})}function Ws(){return L.useContext(Gl)!=null}function zn(){return Ws()||Nt(!1),L.useContext(Gl).location}function e0(t){L.useContext(Yi).static||L.useLayoutEffect(t)}function qt(){let{isDataRoute:t}=L.useContext(Li);return t?o_():Kb()}function Kb(){Ws()||Nt(!1);let t=L.useContext(ql),{basename:i,future:s,navigator:o}=L.useContext(Yi),{matches:u}=L.useContext(Li),{pathname:S}=zn(),b=JSON.stringify(ph(u,s.v7_relativeSplatPath)),l=L.useRef(!1);return e0(()=>{l.current=!0}),L.useCallback(function(m,v){if(v===void 0&&(v={}),!l.current)return;if(typeof m=="number"){o.go(m);return}let d=fh(m,JSON.parse(b),S,v.relative==="path");t==null&&i!=="/"&&(d.pathname=d.pathname==="/"?i:Cn([i,d.pathname])),(v.replace?o.replace:o.push)(d,v.state,v)},[i,o,b,S,t])}const qb=L.createContext(null);function Gb(t){let i=L.useContext(Li).outlet;return i&&L.createElement(qb.Provider,{value:t},i)}function ts(){let{matches:t}=L.useContext(Li),i=t[t.length-1];return i?i.params:{}}function Yl(t,i){let{relative:s}=i===void 0?{}:i,{future:o}=L.useContext(Yi),{matches:u}=L.useContext(Li),{pathname:S}=zn(),b=JSON.stringify(ph(u,o.v7_relativeSplatPath));return L.useMemo(()=>fh(t,JSON.parse(b),S,s==="path"),[t,b,S,s])}function Yb(t,i){return Xb(t,i)}function Xb(t,i,s,o){Ws()||Nt(!1);let{navigator:u}=L.useContext(Yi),{matches:S}=L.useContext(Li),b=S[S.length-1],l=b?b.params:{};b&&b.pathname;let c=b?b.pathnameBase:"/";b&&b.route;let m=zn(),v;if(i){var d;let h=typeof i=="string"?Fs(i):i;c==="/"||(d=h.pathname)!=null&&d.startsWith(c)||Nt(!1),v=h}else v=m;let y=v.pathname||"/",_=y;if(c!=="/"){let h=c.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(h.length).join("/")}let j=Sb(t,{pathname:_}),w=t_(j&&j.map(h=>Object.assign({},h,{params:Object.assign({},l,h.params),pathname:Cn([c,u.encodeLocation?u.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?c:Cn([c,u.encodeLocation?u.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),S,s,o);return i&&w?L.createElement(Gl.Provider,{value:{location:Uo({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:_n.Pop}},w):w}function Jb(){let t=s_(),i=Hb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},i),s?L.createElement("pre",{style:u},s):null,null)}const Qb=L.createElement(Jb,null);class Zb extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?L.createElement(Li.Provider,{value:this.props.routeContext},L.createElement(Zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e_(t){let{routeContext:i,match:s,children:o}=t,u=L.useContext(ql);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement(Li.Provider,{value:i},o)}function t_(t,i,s,o){var u;if(i===void 0&&(i=[]),s===void 0&&(s=null),o===void 0&&(o=null),t==null){var S;if(!s)return null;if(s.errors)t=s.matches;else if((S=o)!=null&&S.v7_partialHydration&&i.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let b=t,l=(u=s)==null?void 0:u.errors;if(l!=null){let v=b.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);v>=0||Nt(!1),b=b.slice(0,Math.min(b.length,v+1))}let c=!1,m=-1;if(s&&o&&o.v7_partialHydration)for(let v=0;v<b.length;v++){let d=b[v];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(m=v),d.route.id){let{loaderData:y,errors:_}=s,j=d.route.loader&&y[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||j){c=!0,m>=0?b=b.slice(0,m+1):b=[b[0]];break}}}return b.reduceRight((v,d,y)=>{let _,j=!1,w=null,h=null;s&&(_=l&&d.route.id?l[d.route.id]:void 0,w=d.route.errorElement||Qb,c&&(m<0&&y===0?(a_("route-fallback"),j=!0,h=null):m===y&&(j=!0,h=d.route.hydrateFallbackElement||null)));let p=i.concat(b.slice(0,y+1)),f=()=>{let g;return _?g=w:j?g=h:d.route.Component?g=L.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=v,L.createElement(e_,{match:d,routeContext:{outlet:v,matches:p,isDataRoute:s!=null},children:g})};return s&&(d.route.ErrorBoundary||d.route.errorElement||y===0)?L.createElement(Zb,{location:s.location,revalidation:s.revalidation,component:w,error:_,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var t0=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(t0||{}),r0=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(r0||{});function r_(t){let i=L.useContext(ql);return i||Nt(!1),i}function i_(t){let i=L.useContext(Qm);return i||Nt(!1),i}function n_(t){let i=L.useContext(Li);return i||Nt(!1),i}function i0(t){let i=n_(),s=i.matches[i.matches.length-1];return s.route.id||Nt(!1),s.route.id}function s_(){var t;let i=L.useContext(Zm),s=i_(),o=i0();return i!==void 0?i:(t=s.errors)==null?void 0:t[o]}function o_(){let{router:t}=r_(t0.UseNavigateStable),i=i0(r0.UseNavigateStable),s=L.useRef(!1);return e0(()=>{s.current=!0}),L.useCallback(function(u,S){S===void 0&&(S={}),s.current&&(typeof u=="number"?t.navigate(u):t.navigate(u,Uo({fromRouteId:i},S)))},[t,i])}const qg={};function a_(t,i,s){qg[t]||(qg[t]=!0)}function l_(t,i){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function c_(t){let{to:i,replace:s,state:o,relative:u}=t;Ws()||Nt(!1);let{future:S,static:b}=L.useContext(Yi),{matches:l}=L.useContext(Li),{pathname:c}=zn(),m=qt(),v=fh(i,ph(l,S.v7_relativeSplatPath),c,u==="path"),d=JSON.stringify(v);return L.useEffect(()=>m(JSON.parse(d),{replace:s,state:o,relative:u}),[m,d,u,s,o]),null}function d_(t){return Gb(t.context)}function Vt(t){Nt(!1)}function u_(t){let{basename:i="/",children:s=null,location:o,navigationType:u=_n.Pop,navigator:S,static:b=!1,future:l}=t;Ws()&&Nt(!1);let c=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:c,navigator:S,static:b,future:Uo({v7_relativeSplatPath:!1},l)}),[c,l,S,b]);typeof o=="string"&&(o=Fs(o));let{pathname:v="/",search:d="",hash:y="",state:_=null,key:j="default"}=o,w=L.useMemo(()=>{let h=Ds(v,c);return h==null?null:{location:{pathname:h,search:d,hash:y,state:_,key:j},navigationType:u}},[c,v,d,y,_,j,u]);return w==null?null:L.createElement(Yi.Provider,{value:m},L.createElement(Gl.Provider,{children:s,value:w}))}function h_(t){let{children:i,location:s}=t;return Yb(ju(i),s)}new Promise(()=>{});function ju(t,i){i===void 0&&(i=[]);let s=[];return L.Children.forEach(t,(o,u)=>{if(!L.isValidElement(o))return;let S=[...i,u];if(o.type===L.Fragment){s.push.apply(s,ju(o.props.children,S));return}o.type!==Vt&&Nt(!1),!o.props.index||!o.props.children||Nt(!1);let b={id:o.props.id||S.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(b.children=ju(o.props.children,S)),s.push(b)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},Pl.apply(this,arguments)}function n0(t,i){if(t==null)return{};var s={},o=Object.keys(t),u,S;for(S=0;S<o.length;S++)u=o[S],!(i.indexOf(u)>=0)&&(s[u]=t[u]);return s}function p_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function f_(t,i){return t.button===0&&(!i||i==="_self")&&!p_(t)}function Eu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,s)=>{let o=t[s];return i.concat(Array.isArray(o)?o.map(u=>[s,u]):[[s,o]])},[]))}function g_(t,i){let s=Eu(t);return i&&i.forEach((o,u)=>{s.has(u)||i.getAll(u).forEach(S=>{s.append(u,S)})}),s}const x_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y_="6";try{window.__reactRouterVersion=y_}catch{}const v_=L.createContext({isTransitioning:!1}),b_="startTransition",Gg=hb[b_];function __(t){let{basename:i,children:s,future:o,window:u}=t,S=L.useRef();S.current==null&&(S.current=vb({window:u,v5Compat:!0}));let b=S.current,[l,c]=L.useState({action:b.action,location:b.location}),{v7_startTransition:m}=o||{},v=L.useCallback(d=>{m&&Gg?Gg(()=>c(d)):c(d)},[c,m]);return L.useLayoutEffect(()=>b.listen(v),[b,v]),L.useEffect(()=>l_(o),[o]),L.createElement(u_,{basename:i,children:s,location:l.location,navigationType:l.action,navigator:b,future:o})}const S_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bi=L.forwardRef(function(i,s){let{onClick:o,relative:u,reloadDocument:S,replace:b,state:l,target:c,to:m,preventScrollReset:v,viewTransition:d}=i,y=n0(i,x_),{basename:_}=L.useContext(Yi),j,w=!1;if(typeof m=="string"&&w_.test(m)&&(j=m,S_))try{let g=new URL(window.location.href),C=m.startsWith("//")?new URL(g.protocol+m):new URL(m),R=Ds(C.pathname,_);C.origin===g.origin&&R!=null?m=R+C.search+C.hash:w=!0}catch{}let h=Vb(m,{relative:u}),p=k_(m,{replace:b,state:l,target:c,preventScrollReset:v,relative:u,viewTransition:d});function f(g){o&&o(g),g.defaultPrevented||p(g)}return L.createElement("a",Pl({},y,{href:j||h,onClick:w||S?o:f,ref:s,target:c}))}),Nr=L.forwardRef(function(i,s){let{"aria-current":o="page",caseSensitive:u=!1,className:S="",end:b=!1,style:l,to:c,viewTransition:m,children:v}=i,d=n0(i,m_),y=Yl(c,{relative:d.relative}),_=zn(),j=L.useContext(Qm),{navigator:w,basename:h}=L.useContext(Yi),p=j!=null&&E_(y)&&m===!0,f=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,g=_.pathname,C=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;u||(g=g.toLowerCase(),C=C?C.toLowerCase():null,f=f.toLowerCase()),C&&h&&(C=Ds(C,h)||C);const R=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let z=g===f||!b&&g.startsWith(f)&&g.charAt(R)==="/",A=C!=null&&(C===f||!b&&C.startsWith(f)&&C.charAt(f.length)==="/"),E={isActive:z,isPending:A,isTransitioning:p},B=z?o:void 0,P;typeof S=="function"?P=S(E):P=[S,z?"active":null,A?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(E):l;return L.createElement(bi,Pl({},d,{"aria-current":B,className:P,ref:s,style:N,to:c,viewTransition:m}),typeof v=="function"?v(E):v)});var Ru;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ru||(Ru={}));var Yg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yg||(Yg={}));function C_(t){let i=L.useContext(ql);return i||Nt(!1),i}function k_(t,i){let{target:s,replace:o,state:u,preventScrollReset:S,relative:b,viewTransition:l}=i===void 0?{}:i,c=qt(),m=zn(),v=Yl(t,{relative:b});return L.useCallback(d=>{if(f_(d,s)){d.preventDefault();let y=o!==void 0?o:Bl(m)===Bl(v);c(t,{replace:y,state:u,preventScrollReset:S,relative:b,viewTransition:l})}},[m,c,v,o,u,s,t,S,b,l])}function j_(t){let i=L.useRef(Eu(t)),s=L.useRef(!1),o=zn(),u=L.useMemo(()=>g_(o.search,s.current?null:i.current),[o.search]),S=qt(),b=L.useCallback((l,c)=>{const m=Eu(typeof l=="function"?l(u):l);s.current=!0,S("?"+m,c)},[S,u]);return[u,b]}function E_(t,i){i===void 0&&(i={});let s=L.useContext(v_);s==null&&Nt(!1);let{basename:o}=C_(Ru.useViewTransitionState),u=Yl(t,{relative:i.relative});if(!s.isTransitioning)return!1;let S=Ds(s.currentLocation.pathname,o)||s.currentLocation.pathname,b=Ds(s.nextLocation.pathname,o)||s.nextLocation.pathname;return ku(u.pathname,b)!=null||ku(u.pathname,S)!=null}const gh="atp-token",xh="atp-user";function Xo(){return localStorage.getItem(gh)}function s0(t){localStorage.setItem(gh,t)}function o0(){localStorage.removeItem(gh),localStorage.removeItem(xh)}function Jo(){try{const t=localStorage.getItem(xh);return t?JSON.parse(t):null}catch{return null}}function mh(t){localStorage.setItem(xh,JSON.stringify(t))}async function ae(t,i={}){const s=Xo(),o={"Content-Type":"application/json",...i.headers||{}};s&&(o.Authorization=`Bearer ${s}`);const u=await fetch(t,{...i,headers:o});if(u.status===401)throw o0(),window.location.href="/login",new Error("Unauthorized");if(!u.ok){const S=await u.json().catch(()=>({error:u.statusText}));throw new Error(S.error||"Request failed")}return u.json()}function R_({size:t=32,withText:i=!1,glowing:s=!1}){const o=s?{filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6)) drop-shadow(0 0 4px rgba(139, 92, 246, 0.4))"}:{};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",style:{imageRendering:"pixelated",...o},children:[e.jsx("rect",{x:"5",y:"3",width:"6",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"4",width:"8",height:"1",fill:"#a78bfa"}),e.jsx("rect",{x:"4",y:"5",width:"8",height:"5",fill:"#8B5CF6"}),e.jsx("rect",{x:"6",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"9",y:"7",width:"1",height:"1",fill:"#F4F4F5"}),e.jsx("rect",{x:"6",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"7",y:"9",width:"2",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"9",y:"9",width:"1",height:"1",fill:"#6d28d9"}),e.jsx("rect",{x:"6",y:"2",width:"4",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"7",y:"1",width:"2",height:"1",fill:"#c4b5fd"}),e.jsx("rect",{x:"5",y:"10",width:"6",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"6",y:"11",width:"4",height:"1",fill:"#7c3aed"}),e.jsx("rect",{x:"5",y:"6",width:"1",height:"1",fill:"#c4b5fd",opacity:"0.6"})]}),i&&e.jsxs("div",{style:{fontFamily:'"Press Start 2P", "JetBrains Mono", monospace',fontSize:t*.4,fontWeight:"400",letterSpacing:"0.05em",color:"#F4F4F5",lineHeight:1,textShadow:s?"0 0 10px rgba(139, 92, 246, 0.5)":"none"},children:["guru",e.jsx("span",{style:{color:"#8B5CF6"},children:".ai"})]})]})}function T_(){const t=qt(),i=zn(),[s,o]=L.useState(null),[u,S]=L.useState(!1);L.useEffect(()=>{ae("/api/user/me").then(o).catch(()=>{const d=Jo();d&&o(d)})},[]),L.useEffect(()=>{S(!1)},[i.pathname]);const b=()=>{o0(),t("/login")},l=d=>({color:d?"#F4F4F5":"#52525B",fontSize:"13px",fontWeight:"500",textDecoration:"none",transition:"color 0.2s",padding:"6px 12px",borderRadius:"4px",background:d?"rgba(139,92,246,0.1)":"transparent"}),c=i.pathname.startsWith("/project/")&&i.pathname!=="/project/new",m=i.pathname.startsWith("/compare/"),v=c||m;return e.jsxs("div",{style:{minHeight:"100vh",background:"#0f0f0f"},children:[e.jsxs("nav",{className:"guru-nav",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:50,background:"rgba(15,15,15,0.95)",backdropFilter:"blur(12px)"},children:[e.jsx("div",{style:{cursor:"pointer"},onClick:()=>t("/"),children:e.jsx(R_,{size:28,withText:!0})}),e.jsxs("div",{className:"guru-nav-links",style:{display:"flex",gap:"4px"},children:[e.jsx(Nr,{to:"/",end:!0,style:({isActive:d})=>l(d),children:"Dashboard"}),e.jsx(Nr,{to:"/marketplace",style:({isActive:d})=>l(d||i.pathname.startsWith("/marketplace")),children:"Marketplace"}),e.jsx(Nr,{to:"/agents",style:({isActive:d})=>l(d||i.pathname.startsWith("/agents")),children:"Agents"}),e.jsx(Nr,{to:"/agents/teams",style:({isActive:d})=>l(d),children:"Teams"}),e.jsx(Nr,{to:"/skills",style:({isActive:d})=>l(d),children:"Skills"}),e.jsx(Nr,{to:"/agents/stats",style:({isActive:d})=>l(d),children:"Stats"}),e.jsx(Nr,{to:"/sessions",style:({isActive:d})=>l(d),children:"Sessions"})]}),e.jsxs("div",{className:"guru-nav-right",style:{display:"flex",alignItems:"center",gap:"12px"},children:[s&&e.jsxs("div",{className:"guru-user-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA"},children:s.displayName||s.email}),e.jsx("div",{title:s.claudeConnected?"Claude connected":"Claude not connected",onClick:()=>!s.claudeConnected&&t("/setup-claude"),style:{width:"8px",height:"8px",borderRadius:"50%",background:s.claudeConnected?"#22c55e":"#ef4444",cursor:s.claudeConnected?"default":"pointer",boxShadow:s.claudeConnected?"0 0 6px rgba(34,197,94,0.4)":"0 0 6px rgba(239,68,68,0.4)"}})]}),e.jsx("button",{onClick:b,className:"guru-logout-btn",style:{background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:d=>{d.target.style.borderColor="#8B5CF6",d.target.style.color="#F4F4F5"},onMouseLeave:d=>{d.target.style.borderColor="rgba(255,255,255,0.15)",d.target.style.color="#A1A1AA"},children:"Logout"}),e.jsxs("button",{className:"guru-hamburger",onClick:()=>S(!u),style:{display:"none",background:"none",border:"1px solid rgba(255,255,255,0.15)",color:"#A1A1AA",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",flexDirection:"column",gap:"3px",alignItems:"center"},children:[e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(45deg) translateY(5px)":"none"}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",opacity:u?0:1}}),e.jsx("span",{style:{width:"16px",height:"2px",background:"#A1A1AA",borderRadius:"1px",transition:"all 0.2s",transform:u?"rotate(-45deg) translateY(-5px)":"none"}})]})]})]}),u&&e.jsxs("div",{className:"guru-mobile-menu",style:{position:"fixed",top:"53px",left:0,right:0,bottom:0,background:"rgba(15,15,15,0.98)",zIndex:49,display:"flex",flexDirection:"column",padding:"16px 24px",gap:"4px",backdropFilter:"blur(12px)"},children:[e.jsx(Nr,{to:"/",end:!0,style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Dashboard"}),e.jsx(Nr,{to:"/marketplace",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/marketplace")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Marketplace"}),e.jsx(Nr,{to:"/agents",style:({isActive:d})=>({...l(d||i.pathname.startsWith("/agents")),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Agents"}),e.jsx(Nr,{to:"/agents/teams",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Teams"}),e.jsx(Nr,{to:"/skills",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Skills"}),e.jsx(Nr,{to:"/agents/stats",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Stats"}),e.jsx(Nr,{to:"/sessions",style:({isActive:d})=>({...l(d),fontSize:"15px",padding:"12px 16px"}),onClick:()=>S(!1),children:"Sessions"})]}),e.jsx("main",{className:"guru-main",style:{padding:v?0:"24px",maxWidth:v?"none":"1400px",margin:"0 auto"},children:e.jsx(d_,{})}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .guru-nav { padding: 10px 16px !important; }
          .guru-nav-links { display: none !important; }
          .guru-hamburger { display: flex !important; }
          .guru-user-info { display: none !important; }
          .guru-logout-btn { display: none !important; }
          .guru-main { padding: 16px !important; }
        }
        @media (min-width: 769px) {
          .guru-mobile-menu { display: none !important; }
        }
      `})]})}function A_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(!1),c=qt(),m=async v=>{v.preventDefault(),S(""),l(!0);try{const d=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}),y=await d.json();if(!d.ok)throw new Error(y.error);s0(y.token),mh({userId:y.userId,email:y.email,displayName:y.displayName,role:y.role,claudeConnected:y.claudeConnected}),c("/")}catch(d){S(d.message)}finally{l(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:m,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m4.93 4.93 4.24 4.24"}),e.jsx("path",{d:"m14.83 9.17 4.24-4.24"}),e.jsx("path",{d:"m14.83 14.83 4.24 4.24"}),e.jsx("path",{d:"m9.17 14.83-4.24 4.24"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px"},children:"Agent Testing Platform"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Sign in to continue"})]}),u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:u}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:v=>i(v.target.value),required:!0,style:{width:"100%"},placeholder:"admin@vps.local"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:v=>o(v.target.value),required:!0,style:{width:"100%"}})]}),e.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:b?.7:1},children:b?"Signing in...":"Sign In"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Don't have an account?"," ",e.jsx(bi,{to:"/register",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Create one"})]})]})]})}function z_(){const[t,i]=L.useState(""),[s,o]=L.useState(""),[u,S]=L.useState(""),[b,l]=L.useState(""),[c,m]=L.useState(!1),v=qt(),d=async y=>{y.preventDefault(),l(""),m(!0);try{const _=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s,displayName:u})}),j=await _.json();if(!_.ok)throw new Error(j.error);s0(j.token),mh({userId:j.userId,email:j.email,displayName:j.displayName,role:j.role,claudeConnected:j.claudeConnected}),v("/setup-claude")}catch(_){l(_.message)}finally{m(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#050505",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("form",{onSubmit:d,style:{width:"360px",padding:"40px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:"#8B5CF6",fontSize:"20px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),e.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]})}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"4px",color:"#F4F4F5"},children:"Create Account"}),e.jsx("p",{style:{fontSize:"13px",color:"#A1A1AA"},children:"Join the Agent Testing Platform"})]}),b&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",borderRadius:"4px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",fontSize:"12px"},children:b}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Display Name"}),e.jsx("input",{type:"text",value:u,onChange:y=>S(y.target.value),style:{width:"100%"},placeholder:"Your name"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:y=>i(y.target.value),required:!0,style:{width:"100%"},placeholder:"you@example.com"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#A1A1AA",marginBottom:"6px"},children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:y=>o(y.target.value),required:!0,style:{width:"100%"},placeholder:"Min. 6 characters"})]}),e.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"10px",background:"#F4F4F5",color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",opacity:c?.7:1,cursor:c?"default":"pointer"},children:c?"Creating account...":"Create Account"}),e.jsxs("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#A1A1AA"},children:["Already have an account?"," ",e.jsx(bi,{to:"/login",style:{color:"#8B5CF6",textDecoration:"none",fontWeight:"500"},children:"Sign in"})]})]})]})}const Ti=Object.create(null);Ti.open="0";Ti.close="1";Ti.ping="2";Ti.pong="3";Ti.message="4";Ti.upgrade="5";Ti.noop="6";const kl=Object.create(null);Object.keys(Ti).forEach(t=>{kl[Ti[t]]=t});const Tu={type:"error",data:"parser error"},a0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",l0=typeof ArrayBuffer=="function",c0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,yh=({type:t,data:i},s,o)=>a0&&i instanceof Blob?s?o(i):Xg(i,o):l0&&(i instanceof ArrayBuffer||c0(i))?s?o(i):Xg(new Blob([i]),o):o(Ti[t]+(i||"")),Xg=(t,i)=>{const s=new FileReader;return s.onload=function(){const o=s.result.split(",")[1];i("b"+(o||""))},s.readAsDataURL(t)};function Jg(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Ud;function L_(t,i){if(a0&&t.data instanceof Blob)return t.data.arrayBuffer().then(Jg).then(i);if(l0&&(t.data instanceof ArrayBuffer||c0(t.data)))return i(Jg(t.data));yh(t,!1,s=>{Ud||(Ud=new TextEncoder),i(Ud.encode(s))})}const Qg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Do=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Qg.length;t++)Do[Qg.charCodeAt(t)]=t;const I_=t=>{let i=t.length*.75,s=t.length,o,u=0,S,b,l,c;t[t.length-1]==="="&&(i--,t[t.length-2]==="="&&i--);const m=new ArrayBuffer(i),v=new Uint8Array(m);for(o=0;o<s;o+=4)S=Do[t.charCodeAt(o)],b=Do[t.charCodeAt(o+1)],l=Do[t.charCodeAt(o+2)],c=Do[t.charCodeAt(o+3)],v[u++]=S<<2|b>>4,v[u++]=(b&15)<<4|l>>2,v[u++]=(l&3)<<6|c&63;return m},D_=typeof ArrayBuffer=="function",vh=(t,i)=>{if(typeof t!="string")return{type:"message",data:d0(t,i)};const s=t.charAt(0);return s==="b"?{type:"message",data:M_(t.substring(1),i)}:kl[s]?t.length>1?{type:kl[s],data:t.substring(1)}:{type:kl[s]}:Tu},M_=(t,i)=>{if(D_){const s=I_(t);return d0(s,i)}else return{base64:!0,data:t}},d0=(t,i)=>{switch(i){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},u0="",B_=(t,i)=>{const s=t.length,o=new Array(s);let u=0;t.forEach((S,b)=>{yh(S,!1,l=>{o[b]=l,++u===s&&i(o.join(u0))})})},P_=(t,i)=>{const s=t.split(u0),o=[];for(let u=0;u<s.length;u++){const S=vh(s[u],i);if(o.push(S),S.type==="error")break}return o};function O_(){return new TransformStream({transform(t,i){L_(t,s=>{const o=s.length;let u;if(o<126)u=new Uint8Array(1),new DataView(u.buffer).setUint8(0,o);else if(o<65536){u=new Uint8Array(3);const S=new DataView(u.buffer);S.setUint8(0,126),S.setUint16(1,o)}else{u=new Uint8Array(9);const S=new DataView(u.buffer);S.setUint8(0,127),S.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(u[0]|=128),i.enqueue(u),i.enqueue(s)})}})}let Vd;function hl(t){return t.reduce((i,s)=>i+s.length,0)}function pl(t,i){if(t[0].length===i)return t.shift();const s=new Uint8Array(i);let o=0;for(let u=0;u<i;u++)s[u]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),s}function $_(t,i){Vd||(Vd=new TextDecoder);const s=[];let o=0,u=-1,S=!1;return new TransformStream({transform(b,l){for(s.push(b);;){if(o===0){if(hl(s)<1)break;const c=pl(s,1);S=(c[0]&128)===128,u=c[0]&127,u<126?o=3:u===126?o=1:o=2}else if(o===1){if(hl(s)<2)break;const c=pl(s,2);u=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),o=3}else if(o===2){if(hl(s)<8)break;const c=pl(s,8),m=new DataView(c.buffer,c.byteOffset,c.length),v=m.getUint32(0);if(v>Math.pow(2,21)-1){l.enqueue(Tu);break}u=v*Math.pow(2,32)+m.getUint32(4),o=3}else{if(hl(s)<u)break;const c=pl(s,u);l.enqueue(vh(S?c:Vd.decode(c),i)),o=0}if(u===0||u>t){l.enqueue(Tu);break}}}})}const h0=4;function tr(t){if(t)return F_(t)}function F_(t){for(var i in tr.prototype)t[i]=tr.prototype[i];return t}tr.prototype.on=tr.prototype.addEventListener=function(t,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(i),this};tr.prototype.once=function(t,i){function s(){this.off(t,s),i.apply(this,arguments)}return s.fn=i,this.on(t,s),this};tr.prototype.off=tr.prototype.removeListener=tr.prototype.removeAllListeners=tr.prototype.removeEventListener=function(t,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,u=0;u<s.length;u++)if(o=s[u],o===i||o.fn===i){s.splice(u,1);break}return s.length===0&&delete this._callbacks["$"+t],this};tr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+t],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,u=s.length;o<u;++o)s[o].apply(this,i)}return this};tr.prototype.emitReserved=tr.prototype.emit;tr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};tr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Xl=typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,s)=>s(i,0),ii=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),W_="arraybuffer";function p0(t,...i){return i.reduce((s,o)=>(t.hasOwnProperty(o)&&(s[o]=t[o]),s),{})}const N_=ii.setTimeout,H_=ii.clearTimeout;function Jl(t,i){i.useNativeTimers?(t.setTimeoutFn=N_.bind(ii),t.clearTimeoutFn=H_.bind(ii)):(t.setTimeoutFn=ii.setTimeout.bind(ii),t.clearTimeoutFn=ii.clearTimeout.bind(ii))}const U_=1.33;function V_(t){return typeof t=="string"?K_(t):Math.ceil((t.byteLength||t.size)*U_)}function K_(t){let i=0,s=0;for(let o=0,u=t.length;o<u;o++)i=t.charCodeAt(o),i<128?s+=1:i<2048?s+=2:i<55296||i>=57344?s+=3:(o++,s+=4);return s}function f0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function q_(t){let i="";for(let s in t)t.hasOwnProperty(s)&&(i.length&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return i}function G_(t){let i={},s=t.split("&");for(let o=0,u=s.length;o<u;o++){let S=s[o].split("=");i[decodeURIComponent(S[0])]=decodeURIComponent(S[1])}return i}class Y_ extends Error{constructor(i,s,o){super(i),this.description=s,this.context=o,this.type="TransportError"}}class bh extends tr{constructor(i){super(),this.writable=!1,Jl(this,i),this.opts=i,this.query=i.query,this.socket=i.socket,this.supportsBinary=!i.forceBase64}onError(i,s,o){return super.emitReserved("error",new Y_(i,s,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const s=vh(i,this.socket.binaryType);this.onPacket(s)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}pause(i){}createUri(i,s={}){return i+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const i=this.opts.hostname;return i.indexOf(":")===-1?i:"["+i+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(i){const s=q_(i);return s.length?"?"+s:""}}class X_ extends bh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(i){this.readyState="pausing";const s=()=>{this.readyState="paused",i()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||s()})),this.writable||(o++,this.once("drain",function(){--o||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const s=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};P_(i,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,B_(i,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const i=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=f0()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(i,s)}}let g0=!1;try{g0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const J_=g0;function Q_(){}class Z_ extends X_{constructor(i){if(super(i),typeof location<"u"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location<"u"&&i.hostname!==location.hostname||o!==i.port}}doWrite(i,s){const o=this.request({method:"POST",data:i});o.on("success",s),o.on("error",(u,S)=>{this.onError("xhr post error",u,S)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(s,o)=>{this.onError("xhr poll error",s,o)}),this.pollXhr=i}}class Ei extends tr{constructor(i,s,o){super(),this.createRequest=i,Jl(this,o),this._opts=o,this._method=o.method||"GET",this._uri=s,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var i;const s=p0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(s);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let u in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(u)&&o.setRequestHeader(u,this._opts.extraHeaders[u])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(i=this._opts.cookieJar)===null||i===void 0||i.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var u;o.readyState===3&&((u=this._opts.cookieJar)===null||u===void 0||u.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(u){this.setTimeoutFn(()=>{this._onError(u)},0);return}typeof document<"u"&&(this._index=Ei.requestsCount++,Ei.requests[this._index]=this)}_onError(i){this.emitReserved("error",i,this._xhr),this._cleanup(!0)}_cleanup(i){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Q_,i)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ei.requests[this._index],this._xhr=null}}_onLoad(){const i=this._xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ei.requestsCount=0;Ei.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Zg);else if(typeof addEventListener=="function"){const t="onpagehide"in ii?"pagehide":"unload";addEventListener(t,Zg,!1)}}function Zg(){for(let t in Ei.requests)Ei.requests.hasOwnProperty(t)&&Ei.requests[t].abort()}const e2=(function(){const t=x0({xdomain:!1});return t&&t.responseType!==null})();class t2 extends Z_{constructor(i){super(i);const s=i&&i.forceBase64;this.supportsBinary=e2&&!s}request(i={}){return Object.assign(i,{xd:this.xd},this.opts),new Ei(x0,this.uri(),i)}}function x0(t){const i=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!i||J_))return new XMLHttpRequest}catch{}if(!i)try{return new ii[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const m0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class r2 extends bh{get name(){return"websocket"}doOpen(){const i=this.uri(),s=this.opts.protocols,o=m0?{}:p0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(i,s,o)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;yh(o,this.supportsBinary,S=>{try{this.doWrite(o,S)}catch{}u&&Xl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const i=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=f0()),this.supportsBinary||(s.b64=1),this.createUri(i,s)}}const Kd=ii.WebSocket||ii.MozWebSocket;class i2 extends r2{createSocket(i,s,o){return m0?new Kd(i,s,o):s?new Kd(i,s):new Kd(i)}doWrite(i,s){this.ws.send(s)}}class n2 extends bh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(i){return this.emitReserved("error",i)}this._transport.closed.then(()=>{this.onClose()}).catch(i=>{this.onError("webtransport error",i)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(i=>{const s=$_(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=i.readable.pipeThrough(s).getReader(),u=O_();u.readable.pipeTo(i.writable),this._writer=u.writable.getWriter();const S=()=>{o.read().then(({done:l,value:c})=>{l||(this.onPacket(c),S())}).catch(l=>{})};S();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(i){this.writable=!1;for(let s=0;s<i.length;s++){const o=i[s],u=s===i.length-1;this._writer.write(o).then(()=>{u&&Xl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var i;(i=this._transport)===null||i===void 0||i.close()}}const s2={websocket:i2,webtransport:n2,polling:t2},o2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Au(t){if(t.length>8e3)throw"URI too long";const i=t,s=t.indexOf("["),o=t.indexOf("]");s!=-1&&o!=-1&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));let u=o2.exec(t||""),S={},b=14;for(;b--;)S[a2[b]]=u[b]||"";return s!=-1&&o!=-1&&(S.source=i,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S.pathNames=l2(S,S.path),S.queryKey=c2(S,S.query),S}function l2(t,i){const s=/\/{2,9}/g,o=i.replace(s,"/").split("/");return(i.slice(0,1)=="/"||i.length===0)&&o.splice(0,1),i.slice(-1)=="/"&&o.splice(o.length-1,1),o}function c2(t,i){const s={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,u,S){u&&(s[u]=S)}),s}const zu=typeof addEventListener=="function"&&typeof removeEventListener=="function",jl=[];zu&&addEventListener("offline",()=>{jl.forEach(t=>t())},!1);class kn extends tr{constructor(i,s){if(super(),this.binaryType=W_,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,i&&typeof i=="object"&&(s=i,i=null),i){const o=Au(i);s.hostname=o.host,s.secure=o.protocol==="https"||o.protocol==="wss",s.port=o.port,o.query&&(s.query=o.query)}else s.host&&(s.hostname=Au(s.host).host);Jl(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(o=>{const u=o.prototype.name;this.transports.push(u),this._transportsByName[u]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=G_(this.opts.query)),zu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(i){const s=Object.assign({},this.opts.query);s.EIO=h0,s.transport=i,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new this._transportsByName[i](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const i=this.opts.rememberUpgrade&&kn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(i);s.open(),this.setTransport(s)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",kn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=i.data,this._onError(s);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this._pingInterval=i.pingInterval,this._pingTimeout=i.pingTimeout,this._maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const i=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+i,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},i),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this._getWritablePackets();this.transport.send(i),this._prevBufferLen=i.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const u=this.writeBuffer[o].data;if(u&&(s+=V_(u)),o>0&&s>this._maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const i=Date.now()>this._pingTimeoutTime;return i&&(this._pingTimeoutTime=0,Xl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),i}write(i,s,o){return this._sendPacket("message",i,s,o),this}send(i,s,o){return this._sendPacket("message",i,s,o),this}_sendPacket(i,s,o,u){if(typeof s=="function"&&(u=s,s=void 0),typeof o=="function"&&(u=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const S={type:i,data:s,options:o};this.emitReserved("packetCreate",S),this.writeBuffer.push(S),u&&this.once("flush",u),this.flush()}close(){const i=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),i()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():i()}):this.upgrading?o():i()),this}_onError(i){if(kn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",i),this._onClose("transport error",i)}_onClose(i,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=jl.indexOf(this._offlineEventListener);o!==-1&&jl.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",i,s),this.writeBuffer=[],this._prevBufferLen=0}}}kn.protocol=h0;class d2 extends kn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let i=0;i<this._upgrades.length;i++)this._probe(this._upgrades[i])}_probe(i){let s=this.createTransport(i),o=!1;kn.priorWebsocketSuccess=!1;const u=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",d=>{if(!o)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;kn.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(v(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=s.name,this.emitReserved("upgradeError",y)}}))};function S(){o||(o=!0,v(),s.close(),s=null)}const b=d=>{const y=new Error("probe error: "+d);y.transport=s.name,S(),this.emitReserved("upgradeError",y)};function l(){b("transport closed")}function c(){b("socket closed")}function m(d){s&&d.name!==s.name&&S()}const v=()=>{s.removeListener("open",u),s.removeListener("error",b),s.removeListener("close",l),this.off("close",c),this.off("upgrading",m)};s.once("open",u),s.once("error",b),s.once("close",l),this.once("close",c),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{o||s.open()},200):s.open()}onHandshake(i){this._upgrades=this._filterUpgrades(i.upgrades),super.onHandshake(i)}_filterUpgrades(i){const s=[];for(let o=0;o<i.length;o++)~this.transports.indexOf(i[o])&&s.push(i[o]);return s}}let u2=class extends d2{constructor(i,s={}){const o=typeof i=="object"?i:s;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(u=>s2[u]).filter(u=>!!u)),super(i,o)}};function h2(t,i="",s){let o=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),o=Au(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const S=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+S+":"+o.port+i,o.href=o.protocol+"://"+S+(s&&s.port===o.port?"":":"+o.port),o}const p2=typeof ArrayBuffer=="function",f2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,y0=Object.prototype.toString,g2=typeof Blob=="function"||typeof Blob<"u"&&y0.call(Blob)==="[object BlobConstructor]",x2=typeof File=="function"||typeof File<"u"&&y0.call(File)==="[object FileConstructor]";function _h(t){return p2&&(t instanceof ArrayBuffer||f2(t))||g2&&t instanceof Blob||x2&&t instanceof File}function El(t,i){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(El(t[s]))return!0;return!1}if(_h(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return El(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&El(t[s]))return!0;return!1}function m2(t){const i=[],s=t.data,o=t;return o.data=Lu(s,i),o.attachments=i.length,{packet:o,buffers:i}}function Lu(t,i){if(!t)return t;if(_h(t)){const s={_placeholder:!0,num:i.length};return i.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=Lu(t[o],i);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=Lu(t[o],i));return s}return t}function y2(t,i){return t.data=Iu(t.data,i),delete t.attachments,t}function Iu(t,i){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<i.length)return i[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Iu(t[s],i);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Iu(t[s],i));return t}const v2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var _t;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(_t||(_t={}));class b2{constructor(i){this.replacer=i}encode(i){return(i.type===_t.EVENT||i.type===_t.ACK)&&El(i)?this.encodeAsBinary({type:i.type===_t.EVENT?_t.BINARY_EVENT:_t.BINARY_ACK,nsp:i.nsp,data:i.data,id:i.id}):[this.encodeAsString(i)]}encodeAsString(i){let s=""+i.type;return(i.type===_t.BINARY_EVENT||i.type===_t.BINARY_ACK)&&(s+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(s+=i.nsp+","),i.id!=null&&(s+=i.id),i.data!=null&&(s+=JSON.stringify(i.data,this.replacer)),s}encodeAsBinary(i){const s=m2(i),o=this.encodeAsString(s.packet),u=s.buffers;return u.unshift(o),u}}class Sh extends tr{constructor(i){super(),this.reviver=i}add(i){let s;if(typeof i=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(i);const o=s.type===_t.BINARY_EVENT;o||s.type===_t.BINARY_ACK?(s.type=o?_t.EVENT:_t.ACK,this.reconstructor=new _2(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(_h(i)||i.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(i),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let s=0;const o={type:Number(i.charAt(0))};if(_t[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===_t.BINARY_EVENT||o.type===_t.BINARY_ACK){const S=s+1;for(;i.charAt(++s)!=="-"&&s!=i.length;);const b=i.substring(S,s);if(b!=Number(b)||i.charAt(s)!=="-")throw new Error("Illegal attachments");o.attachments=Number(b)}if(i.charAt(s+1)==="/"){const S=s+1;for(;++s&&!(i.charAt(s)===","||s===i.length););o.nsp=i.substring(S,s)}else o.nsp="/";const u=i.charAt(s+1);if(u!==""&&Number(u)==u){const S=s+1;for(;++s;){const b=i.charAt(s);if(b==null||Number(b)!=b){--s;break}if(s===i.length)break}o.id=Number(i.substring(S,s+1))}if(i.charAt(++s)){const S=this.tryParse(i.substr(s));if(Sh.isPayloadValid(o.type,S))o.data=S;else throw new Error("invalid payload")}return o}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,s){switch(i){case _t.CONNECT:return ex(s);case _t.DISCONNECT:return s===void 0;case _t.CONNECT_ERROR:return typeof s=="string"||ex(s);case _t.EVENT:case _t.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&v2.indexOf(s[0])===-1);case _t.ACK:case _t.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _2{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const s=y2(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ex(t){return Object.prototype.toString.call(t)==="[object Object]"}const S2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Sh,Encoder:b2,get PacketType(){return _t}},Symbol.toStringTag,{value:"Module"}));function yi(t,i,s){return t.on(i,s),function(){t.off(i,s)}}const w2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class v0 extends tr{constructor(i,s,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=s,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[yi(i,"open",this.onopen.bind(this)),yi(i,"packet",this.onpacket.bind(this)),yi(i,"error",this.onerror.bind(this)),yi(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...s){var o,u,S;if(w2.hasOwnProperty(i))throw new Error('"'+i.toString()+'" is a reserved event name');if(s.unshift(i),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const b={type:_t.EVENT,data:s};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const v=this.ids++,d=s.pop();this._registerAckCallback(v,d),b.id=v}const l=(u=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||u===void 0?void 0:u.writable,c=this.connected&&!(!((S=this.io.engine)===null||S===void 0)&&S._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(i,s){var o;const u=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(u===void 0){this.acks[i]=s;return}const S=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===i&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},u),b=(...l)=>{this.io.clearTimeoutFn(S),s.apply(this,l)};b.withError=!0,this.acks[i]=b}emitWithAck(i,...s){return new Promise((o,u)=>{const S=(b,l)=>b?u(b):o(l);S.withError=!0,s.push(S),this.emit(i,...s)})}_addToQueue(i){let s;typeof i[i.length-1]=="function"&&(s=i.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:i,flags:Object.assign({fromQueue:!0},this.flags)};i.push((u,...S)=>(this._queue[0],u!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(u)):(this._queue.shift(),s&&s(null,...S)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(i=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!i||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this._sendConnectPacket(i)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(i){this.packet({type:_t.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},i):i})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(i=>{if(!this.sendBuffer.some(o=>String(o.id)===i)){const o=this.acks[i];delete this.acks[i],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case _t.CONNECT:i.data&&i.data.sid?this.onconnect(i.data.sid,i.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _t.EVENT:case _t.BINARY_EVENT:this.onevent(i);break;case _t.ACK:case _t.BINARY_ACK:this.onack(i);break;case _t.DISCONNECT:this.ondisconnect();break;case _t.CONNECT_ERROR:this.destroy();const o=new Error(i.data.message);o.data=i.data.data,this.emitReserved("connect_error",o);break}}onevent(i){const s=i.data||[];i.id!=null&&s.push(this.ack(i.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const o of s)o.apply(this,i)}super.emit.apply(this,i),this._pid&&i.length&&typeof i[i.length-1]=="string"&&(this._lastOffset=i[i.length-1])}ack(i){const s=this;let o=!1;return function(...u){o||(o=!0,s.packet({type:_t.ACK,id:i,data:u}))}}onack(i){const s=this.acks[i.id];typeof s=="function"&&(delete this.acks[i.id],s.withError&&i.data.unshift(null),s.apply(this,i.data))}onconnect(i,s){this.id=i,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_t.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const s=this._anyListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const s=this._anyOutgoingListeners;for(let o=0;o<s.length;o++)if(i===s[o])return s.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const o of s)o.apply(this,i.data)}}}function Ns(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ns.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),s=Math.floor(i*this.jitter*t);t=(Math.floor(i*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Ns.prototype.reset=function(){this.attempts=0};Ns.prototype.setMin=function(t){this.ms=t};Ns.prototype.setMax=function(t){this.max=t};Ns.prototype.setJitter=function(t){this.jitter=t};class Du extends tr{constructor(i,s){var o;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(s=i,i=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Jl(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((o=s.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Ns({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=i;const u=s.parser||S2;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,i||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var s;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(s=this.backoff)===null||s===void 0||s.setMin(i),this)}randomizationFactor(i){var s;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(s=this.backoff)===null||s===void 0||s.setJitter(i),this)}reconnectionDelayMax(i){var s;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(s=this.backoff)===null||s===void 0||s.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new u2(this.uri,this.opts);const s=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const u=yi(s,"open",function(){o.onopen(),i&&i()}),S=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),i?i(l):this.maybeReconnectOnOpen()},b=yi(s,"error",S);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{u(),S(new Error("timeout")),s.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(u),this.subs.push(b),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(yi(i,"ping",this.onping.bind(this)),yi(i,"data",this.ondata.bind(this)),yi(i,"error",this.onerror.bind(this)),yi(i,"close",this.onclose.bind(this)),yi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){try{this.decoder.add(i)}catch(s){this.onclose("parse error",s)}}ondecoded(i){Xl(()=>{this.emitReserved("packet",i)},this.setTimeoutFn)}onerror(i){this.emitReserved("error",i)}socket(i,s){let o=this.nsps[i];return o?this._autoConnect&&!o.active&&o.connect():(o=new v0(this,i,s),this.nsps[i]=o),o}_destroy(i){const s=Object.keys(this.nsps);for(const o of s)if(this.nsps[o].active)return;this._close()}_packet(i){const s=this.encoder.encode(i);for(let o=0;o<s.length;o++)this.engine.write(s[o],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(i,s){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(u=>{u?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",u)):i.onreconnect()}))},s);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const Ro={};function Po(t,i){typeof t=="object"&&(i=t,t=void 0),i=i||{};const s=h2(t,i.path||"/socket.io"),o=s.source,u=s.id,S=s.path,b=Ro[u]&&S in Ro[u].nsps,l=i.forceNew||i["force new connection"]||i.multiplex===!1||b;let c;return l?c=new Du(o,i):(Ro[u]||(Ro[u]=new Du(o,i)),c=Ro[u]),s.query&&!i.query&&(i.query=s.queryKey),c.socket(s.path,i)}Object.assign(Po,{Manager:Du,Socket:v0,io:Po,connect:Po});var qd={exports:{}},tx;function C2(){return tx||(tx=1,(function(t,i){(function(s,o){t.exports=o()})(globalThis,(()=>(()=>{var s={4567:function(b,l,c){var m=this&&this.__decorate||function(f,g,C,R){var z,A=arguments.length,E=A<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,C):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,C,R);else for(var B=f.length-1;B>=0;B--)(z=f[B])&&(E=(A<3?z(E):A>3?z(g,C,E):z(g,C))||E);return A>3&&E&&Object.defineProperty(g,C,E),E},v=this&&this.__param||function(f,g){return function(C,R){g(C,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const d=c(9042),y=c(9924),_=c(844),j=c(4725),w=c(2585),h=c(3656);let p=l.AccessibilityManager=class extends _.Disposable{constructor(f,g,C,R){super(),this._terminal=f,this._coreBrowserService=C,this._renderService=R,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let z=0;z<this._terminal.rows;z++)this._rowElements[z]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[z]);if(this._topBoundaryFocusListener=z=>this._handleBoundaryFocus(z,0),this._bottomBoundaryFocusListener=z=>this._handleBoundaryFocus(z,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((z=>this._handleResize(z.rows)))),this.register(this._terminal.onRender((z=>this._refreshRows(z.start,z.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((z=>this._handleChar(z)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((z=>this._handleTab(z)))),this.register(this._terminal.onKey((z=>this._handleKey(z.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,h.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,_.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(f){for(let g=0;g<f;g++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,g){this._liveRegionDebouncer.refresh(f,g,this._terminal.rows)}_renderRows(f,g){const C=this._terminal.buffer,R=C.lines.length.toString();for(let z=f;z<=g;z++){const A=C.lines.get(C.ydisp+z),E=[],B=(A==null?void 0:A.translateToString(!0,void 0,void 0,E))||"",P=(C.ydisp+z+1).toString(),N=this._rowElements[z];N&&(B.length===0?(N.innerText="",this._rowColumns.set(N,[0,1])):(N.textContent=B,this._rowColumns.set(N,E)),N.setAttribute("aria-posinset",P),N.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,g){const C=f.target,R=this._rowElements[g===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==R)return;let z,A;if(g===0?(z=C,A=this._rowElements.pop(),this._rowContainer.removeChild(A)):(z=this._rowElements.shift(),A=C,this._rowContainer.removeChild(z)),z.removeEventListener("focus",this._topBoundaryFocusListener),A.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleSelectionChange(){var B;if(this._rowElements.length===0)return;const f=document.getSelection();if(!f)return;if(f.isCollapsed)return void(this._rowContainer.contains(f.anchorNode)&&this._terminal.clearSelection());if(!f.anchorNode||!f.focusNode)return void console.error("anchorNode and/or focusNode are null");let g={node:f.anchorNode,offset:f.anchorOffset},C={node:f.focusNode,offset:f.focusOffset};if((g.node.compareDocumentPosition(C.node)&Node.DOCUMENT_POSITION_PRECEDING||g.node===C.node&&g.offset>C.offset)&&([g,C]=[C,g]),g.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(g={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(g.node))return;const R=this._rowElements.slice(-1)[0];if(C.node.compareDocumentPosition(R)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(C={node:R,offset:((B=R.textContent)==null?void 0:B.length)??0}),!this._rowContainer.contains(C.node))return;const z=({node:P,offset:N})=>{const K=P instanceof Text?P.parentNode:P;let U=parseInt(K==null?void 0:K.getAttribute("aria-posinset"),10)-1;if(isNaN(U))return console.warn("row is invalid. Race condition?"),null;const ee=this._rowColumns.get(K);if(!ee)return console.warn("columns is null. Race condition?"),null;let V=N<ee.length?ee[N]:ee.slice(-1)[0]+1;return V>=this._terminal.cols&&(++U,V=0),{row:U,column:V}},A=z(g),E=z(C);if(A&&E){if(A.row>E.row||A.row===E.row&&A.column>=E.column)throw new Error("invalid range");this._terminal.select(A.column,A.row,(E.row-A.row)*this._terminal.cols-A.column+E.column)}}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const f=this._coreBrowserService.mainDocument.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=p=m([v(1,w.IInstantiationService),v(2,j.ICoreBrowserService),v(3,j.IRenderService)],p)},3614:(b,l)=>{function c(y){return y.replace(/\r?\n/g,"\r")}function m(y,_){return _?"\x1B[200~"+y+"\x1B[201~":y}function v(y,_,j,w){y=m(y=c(y),j.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),j.triggerDataEvent(y,!0),_.value=""}function d(y,_,j){const w=j.getBoundingClientRect(),h=y.clientX-w.left-10,p=y.clientY-w.top-10;_.style.width="20px",_.style.height="20px",_.style.left=`${h}px`,_.style.top=`${p}px`,_.style.zIndex="1000",_.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=c,l.bracketTextForPaste=m,l.copyHandler=function(y,_){y.clipboardData&&y.clipboardData.setData("text/plain",_.selectionText),y.preventDefault()},l.handlePasteEvent=function(y,_,j,w){y.stopPropagation(),y.clipboardData&&v(y.clipboardData.getData("text/plain"),_,j,w)},l.paste=v,l.moveTextAreaUnderMouseCursor=d,l.rightClickHandler=function(y,_,j,w,h){d(y,_,j),h&&w.rightClickSelect(y),_.value=w.selectionText,_.select()}},7239:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const m=c(1505);l.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(v,d,y){this._css.set(v,d,y)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,y){this._color.set(v,d,y)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(c,m,v,d){c.addEventListener(m,v,d);let y=!1;return{dispose:()=>{y||(y=!0,c.removeEventListener(m,v,d))}}}},3551:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,C){var R,z=arguments.length,A=z<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(p,f,g,C);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(A=(z<3?R(A):z>3?R(f,g,A):R(f,g))||A);return z>3&&A&&Object.defineProperty(f,g,A),A},v=this&&this.__param||function(p,f){return function(g,C){f(g,C,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const d=c(3656),y=c(8460),_=c(844),j=c(2585),w=c(4725);let h=l.Linkifier=class extends _.Disposable{get currentLink(){return this._currentLink}constructor(p,f,g,C,R){super(),this._element=p,this._mouseService=f,this._renderService=g,this._bufferService=C,this._linkProviderService=R,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,_.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,_.toDisposable)((()=>{var z;this._lastMouseEvent=void 0,(z=this._activeProviderReplies)==null||z.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const g=p.composedPath();for(let C=0;C<g.length;C++){const R=g[C];if(R.classList.contains("xterm"))break;if(R.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,f){var C,R;this._activeProviderReplies&&f||((C=this._activeProviderReplies)==null||C.forEach((z=>{z==null||z.forEach((A=>{A.link.dispose&&A.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=p.y);let g=!1;for(const[z,A]of this._linkProviderService.linkProviders.entries())f?(R=this._activeProviderReplies)!=null&&R.get(z)&&(g=this._checkLinkProviderResult(z,p,g)):A.provideLinks(p.y,(E=>{var P,N;if(this._isMouseOut)return;const B=E==null?void 0:E.map((K=>({link:K})));(P=this._activeProviderReplies)==null||P.set(z,B),g=this._checkLinkProviderResult(z,p,g),((N=this._activeProviderReplies)==null?void 0:N.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)}))}_removeIntersectingLinks(p,f){const g=new Set;for(let C=0;C<f.size;C++){const R=f.get(C);if(R)for(let z=0;z<R.length;z++){const A=R[z],E=A.link.range.start.y<p?0:A.link.range.start.x,B=A.link.range.end.y>p?this._bufferService.cols:A.link.range.end.x;for(let P=E;P<=B;P++){if(g.has(P)){R.splice(z--,1);break}g.add(P)}}}}_checkLinkProviderResult(p,f,g){var z;if(!this._activeProviderReplies)return g;const C=this._activeProviderReplies.get(p);let R=!1;for(let A=0;A<p;A++)this._activeProviderReplies.has(A)&&!this._activeProviderReplies.get(A)||(R=!0);if(!R&&C){const A=C.find((E=>this._linkAtPosition(E.link,f)));A&&(g=!0,this._handleNewLink(A))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!g)for(let A=0;A<this._activeProviderReplies.size;A++){const E=(z=this._activeProviderReplies.get(A))==null?void 0:z.find((B=>this._linkAtPosition(B.link,f)));if(E){g=!0,this._handleNewLink(E);break}}return g}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const f=this._positionFromMouseEvent(p,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,f){this._currentLink&&this._lastMouseEvent&&(!p||!f||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(p.link,f)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var g,C;return(C=(g=this._currentLink)==null?void 0:g.state)==null?void 0:C.decorations.pointerCursor},set:g=>{var C;(C=this._currentLink)!=null&&C.state&&this._currentLink.state.decorations.pointerCursor!==g&&(this._currentLink.state.decorations.pointerCursor=g,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",g))}},underline:{get:()=>{var g,C;return(C=(g=this._currentLink)==null?void 0:g.state)==null?void 0:C.decorations.underline},set:g=>{var C,R,z;(C=this._currentLink)!=null&&C.state&&((z=(R=this._currentLink)==null?void 0:R.state)==null?void 0:z.decorations.underline)!==g&&(this._currentLink.state.decorations.underline=g,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,g))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((g=>{if(!this._currentLink)return;const C=g.start===0?0:g.start+1+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.ydisp+1+g.end;if(this._currentLink.link.range.start.y>=C&&this._currentLink.link.range.end.y<=R&&(this._clearCurrentLink(C,R),this._lastMouseEvent)){const z=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);z&&this._askForLink(z,!1)}}))))}_linkHover(p,f,g){var C;(C=this._currentLink)!=null&&C.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(g,f.text)}_fireUnderlineEvent(p,f){const g=p.range,C=this._bufferService.buffer.ydisp,R=this._createLinkUnderlineEvent(g.start.x-1,g.start.y-C-1,g.end.x,g.end.y-C-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(R)}_linkLeave(p,f,g){var C;(C=this._currentLink)!=null&&C.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(g,f.text)}_linkAtPosition(p,f){const g=p.range.start.y*this._bufferService.cols+p.range.start.x,C=p.range.end.y*this._bufferService.cols+p.range.end.x,R=f.y*this._bufferService.cols+f.x;return g<=R&&R<=C}_positionFromMouseEvent(p,f,g){const C=g.getCoords(p,f,this._bufferService.cols,this._bufferService.rows);if(C)return{x:C[0],y:C[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,f,g,C,R){return{x1:p,y1:f,x2:g,y2:C,cols:this._bufferService.cols,fg:R}}};l.Linkifier=h=m([v(1,w.IMouseService),v(2,w.IRenderService),v(3,j.IBufferService),v(4,w.ILinkProviderService)],h)},9042:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,l,c){var m=this&&this.__decorate||function(w,h,p,f){var g,C=arguments.length,R=C<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,h,p,f);else for(var z=w.length-1;z>=0;z--)(g=w[z])&&(R=(C<3?g(R):C>3?g(h,p,R):g(h,p))||R);return C>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(w,h){return function(p,f){h(p,f,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const d=c(511),y=c(2585);let _=l.OscLinkProvider=class{constructor(w,h,p){this._bufferService=w,this._optionsService=h,this._oscLinkService=p}provideLinks(w,h){var B;const p=this._bufferService.buffer.lines.get(w-1);if(!p)return void h(void 0);const f=[],g=this._optionsService.rawOptions.linkHandler,C=new d.CellData,R=p.getTrimmedLength();let z=-1,A=-1,E=!1;for(let P=0;P<R;P++)if(A!==-1||p.hasContent(P)){if(p.loadCell(P,C),C.hasExtendedAttrs()&&C.extended.urlId){if(A===-1){A=P,z=C.extended.urlId;continue}E=C.extended.urlId!==z}else A!==-1&&(E=!0);if(E||A!==-1&&P===R-1){const N=(B=this._oscLinkService.getLinkData(z))==null?void 0:B.uri;if(N){const K={start:{x:A+1,y:w},end:{x:P+(E||P!==R-1?0:1),y:w}};let U=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const ee=new URL(N);["http:","https:"].includes(ee.protocol)||(U=!0)}catch{U=!0}U||f.push({text:N,range:K,activate:(ee,V)=>g?g.activate(ee,V,K):j(0,V),hover:(ee,V)=>{var de;return(de=g==null?void 0:g.hover)==null?void 0:de.call(g,ee,V,K)},leave:(ee,V)=>{var de;return(de=g==null?void 0:g.leave)==null?void 0:de.call(g,ee,V,K)}})}E=!1,C.hasExtendedAttrs()&&C.extended.urlId?(A=P,z=C.extended.urlId):(A=-1,z=-1)}}h(f)}};function j(w,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=_=m([v(0,y.IBufferService),v(1,y.IOptionsService),v(2,y.IOscLinkService)],_)},6193:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(c,m){this._renderCallback=c,this._coreBrowserService=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(c,m,v){this._rowCount=v,c=c!==void 0?c:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const m=c(3614),v=c(3656),d=c(3551),y=c(9042),_=c(3730),j=c(1680),w=c(3107),h=c(5744),p=c(2950),f=c(1296),g=c(428),C=c(4269),R=c(5114),z=c(8934),A=c(3230),E=c(9312),B=c(4725),P=c(6731),N=c(8055),K=c(8969),U=c(8460),ee=c(844),V=c(6114),de=c(8437),J=c(2584),Y=c(7399),M=c(5941),I=c(9074),D=c(2585),W=c(5435),pe=c(4567),me=c(779);class Se extends K.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(X={}){super(X),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new ee.MutableDisposable),this._onCursorMove=this.register(new U.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new U.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new U.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new U.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new U.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new U.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new U.EventEmitter),this._onBlur=this.register(new U.EventEmitter),this._onA11yCharEmitter=this.register(new U.EventEmitter),this._onA11yTabEmitter=this.register(new U.EventEmitter),this._onWillOpen=this.register(new U.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(D.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(me.LinkProviderService),this._instantiationService.setService(B.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(_.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((F,ve)=>this.refresh(F,ve)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((F=>this._reportWindowsOptions(F)))),this.register(this._inputHandler.onColor((F=>this._handleColorEvent(F)))),this.register((0,U.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,U.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((F=>this._afterResize(F.cols,F.rows)))),this.register((0,ee.toDisposable)((()=>{var F,ve;this._customKeyEventHandler=void 0,(ve=(F=this.element)==null?void 0:F.parentNode)==null||ve.removeChild(this.element)})))}_handleColorEvent(X){if(this._themeService)for(const F of X){let ve,se="";switch(F.index){case 256:ve="foreground",se="10";break;case 257:ve="background",se="11";break;case 258:ve="cursor",se="12";break;default:ve="ansi",se="4;"+F.index}switch(F.type){case 0:const Me=N.color.toColorRGB(ve==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[ve]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${se};${(0,M.toRgbString)(Me)}${J.C1_ESCAPED.ST}`);break;case 1:if(ve==="ansi")this._themeService.modifyColors((Z=>Z.ansi[F.index]=N.channels.toColor(...F.color)));else{const Z=ve;this._themeService.modifyColors((ke=>ke[Z]=N.channels.toColor(...F.color)))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(X){X?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(pe.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(X){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var X;return(X=this.textarea)==null?void 0:X.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const X=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(X);if(!F)return;const ve=Math.min(this.buffer.x,this.cols-1),se=this._renderService.dimensions.css.cell.height,Me=F.getWidth(ve),Z=this._renderService.dimensions.css.cell.width*Me,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,he=ve*this._renderService.dimensions.css.cell.width;this.textarea.style.left=he+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=se+"px",this.textarea.style.lineHeight=se+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(F=>{this.hasSelection()&&(0,m.copyHandler)(F,this._selectionService)})));const X=F=>(0,m.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",X)),this.register((0,v.addDisposableDomListener)(this.element,"paste",X)),V.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(F=>{F.button===2&&(0,m.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(F=>{(0,m.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),V.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(F=>{F.button===1&&(0,m.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(X=>this._keyUp(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(X=>this._keyDown(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(X=>this._keyPress(X)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(X=>this._compositionHelper.compositionupdate(X)))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(X=>this._inputEvent(X)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(X){var ve;if(!X)throw new Error("Terminal requires a parent element.");if(X.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ve=this.element)==null?void 0:ve.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=X.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),X.appendChild(this.element);const F=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",(se=>this.updateCursorStyle(se)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,X.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(B.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(se=>this._handleTextAreaFocus(se)))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(g.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(B.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(P.ThemeService),this._instantiationService.setService(B.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(C.CharacterJoinerService),this._instantiationService.setService(B.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(A.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(B.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((se=>this._onRender.fire(se)))),this.onResize((se=>this._renderService.resize(se.cols,se.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(z.MouseService),this._instantiationService.setService(B.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(j.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((se=>this.scrollLines(se.amount,se.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(E.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(B.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((se=>this.scrollLines(se.amount,se.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((se=>this._renderService.handleSelectionChanged(se.start,se.end,se.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((se=>{this.textarea.value=se,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((se=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(se=>this._selectionService.handleMouseDown(se)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(pe.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(se=>this._handleScreenReaderModeOptionChange(se)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(se=>{!this._overviewRulerRenderer&&se&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const X=this,F=this.element;function ve(Z){const ke=X._mouseService.getMouseReportCoords(Z,X.screenElement);if(!ke)return!1;let he,Ie;switch(Z.overrideType||Z.type){case"mousemove":Ie=32,Z.buttons===void 0?(he=3,Z.button!==void 0&&(he=Z.button<3?Z.button:3)):he=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":Ie=0,he=Z.button<3?Z.button:3;break;case"mousedown":Ie=1,he=Z.button<3?Z.button:3;break;case"wheel":if(X._customWheelEventHandler&&X._customWheelEventHandler(Z)===!1||X.viewport.getLinesScrolled(Z)===0)return!1;Ie=Z.deltaY<0?0:1,he=4;break;default:return!1}return!(Ie===void 0||he===void 0||he>4)&&X.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:he,action:Ie,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const se={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Me={mouseup:Z=>(ve(Z),Z.buttons||(this._document.removeEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.removeEventListener("mousemove",se.mousedrag)),this.cancel(Z)),wheel:Z=>(ve(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&ve(Z)},mousemove:Z=>{Z.buttons||ve(Z)}};this.register(this.coreMouseService.onProtocolChange((Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?se.mousemove||(F.addEventListener("mousemove",Me.mousemove),se.mousemove=Me.mousemove):(F.removeEventListener("mousemove",se.mousemove),se.mousemove=null),16&Z?se.wheel||(F.addEventListener("wheel",Me.wheel,{passive:!1}),se.wheel=Me.wheel):(F.removeEventListener("wheel",se.wheel),se.wheel=null),2&Z?se.mouseup||(se.mouseup=Me.mouseup):(this._document.removeEventListener("mouseup",se.mouseup),se.mouseup=null),4&Z?se.mousedrag||(se.mousedrag=Me.mousedrag):(this._document.removeEventListener("mousemove",se.mousedrag),se.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(F,"mousedown",(Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return ve(Z),se.mouseup&&this._document.addEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.addEventListener("mousemove",se.mousedrag),this.cancel(Z)}))),this.register((0,v.addDisposableDomListener)(F,"wheel",(Z=>{if(!se.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Z)===!1)return!1;if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(Z);if(ke===0)return;const he=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let Ie="";for(let Oe=0;Oe<Math.abs(ke);Oe++)Ie+=he;return this.coreService.triggerDataEvent(Ie,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(F,"touchstart",(Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(F,"touchmove",(Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)}),{passive:!1}))}refresh(X,F){var ve;(ve=this._renderService)==null||ve.refreshRows(X,F)}updateCursorStyle(X){var F;(F=this._selectionService)!=null&&F.shouldColumnSelect(X)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(X,F,ve=0){var se;ve===1?(super.scrollLines(X,F,ve),this.refresh(0,this.rows-1)):(se=this.viewport)==null||se.scrollLines(X)}paste(X){(0,m.paste)(X,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(X){this._customKeyEventHandler=X}attachCustomWheelEventHandler(X){this._customWheelEventHandler=X}registerLinkProvider(X){return this._linkProviderService.registerLinkProvider(X)}registerCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(X);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(X)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(X){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+X)}registerDecoration(X){return this._decorationService.registerDecoration(X)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(X,F,ve){this._selectionService.setSelection(X,F,ve)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var X;(X=this._selectionService)==null||X.clearSelection()}selectAll(){var X;(X=this._selectionService)==null||X.selectAll()}selectLines(X,F){var ve;(ve=this._selectionService)==null||ve.selectLines(X,F)}_keyDown(X){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&X.altKey;if(!F&&!this._compositionHelper.keydown(X))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||X.key!=="Dead"&&X.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ve=(0,Y.evaluateKeyboardEvent)(X,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(X),ve.type===3||ve.type===2){const se=this.rows-1;return this.scrollLines(ve.type===2?-se:se),this.cancel(X,!0)}return ve.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,X)||(ve.cancel&&this.cancel(X,!0),!ve.key||!!(X.key&&!X.ctrlKey&&!X.altKey&&!X.metaKey&&X.key.length===1&&X.key.charCodeAt(0)>=65&&X.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ve.key!==J.C0.ETX&&ve.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ve.key,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(ve.key,!0),!this.optionsService.rawOptions.screenReaderMode||X.altKey||X.ctrlKey?this.cancel(X,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(X,F){const ve=X.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||X.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||X.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?ve:ve&&(!F.keyCode||F.keyCode>47)}_keyUp(X){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1||((function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18})(X)||this.focus(),this.updateCursorStyle(X),this._keyPressHandled=!1)}_keyPress(X){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;if(this.cancel(X),X.charCode)F=X.charCode;else if(X.which===null||X.which===void 0)F=X.keyCode;else{if(X.which===0||X.charCode===0)return!1;F=X.which}return!(!F||(X.altKey||X.ctrlKey||X.metaKey)&&!this._isThirdLevelShift(this.browser,X)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(X){if(X.data&&X.inputType==="insertText"&&(!X.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=X.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(X),!0}return!1}resize(X,F){X!==this.cols||F!==this.rows?super.resize(X,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(X,F){var ve,se;(ve=this._charSizeService)==null||ve.measure(),(se=this.viewport)==null||se.syncScrollArea(!0)}clear(){var X;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine(de.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(X=this.viewport)==null||X.reset(),this.refresh(0,this.rows-1)}}reset(){var F,ve;this.options.rows=this.rows,this.options.cols=this.cols;const X=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)==null||F.reset(),this._decorationService.reset(),(ve=this.viewport)==null||ve.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1)}clearTextureAtlas(){var X;(X=this._renderService)==null||X.clearTextureAtlas()}_reportFocus(){var X;(X=this.element)!=null&&X.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(X){if(this._renderService)switch(X){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),ve=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${ve};${F}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const se=this._renderService.dimensions.css.cell.width.toFixed(0),Me=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${Me};${se}t`)}}cancel(X,F){if(this.options.cancelEvents||F)return X.preventDefault(),X.stopPropagation(),!1}}l.Terminal=Se},9924:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(c,m=1e3){this._renderCallback=c,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,m,v){this._rowCount=v,c=c!==void 0?c:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=d-this._lastRefreshMs,_=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),_)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,m)}}},1680:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,C){var R,z=arguments.length,A=z<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(p,f,g,C);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(A=(z<3?R(A):z>3?R(f,g,A):R(f,g))||A);return z>3&&A&&Object.defineProperty(f,g,A),A},v=this&&this.__param||function(p,f){return function(g,C){f(g,C,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const d=c(3656),y=c(4725),_=c(8460),j=c(844),w=c(2585);let h=l.Viewport=class extends j.Disposable{constructor(p,f,g,C,R,z,A,E){super(),this._viewportElement=p,this._scrollArea=f,this._bufferService=g,this._optionsService=C,this._charSizeService=R,this._renderService=z,this._coreBrowserService=A,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((B=>this._renderDimensions=B))),this._handleThemeChange(E.colors),this.register(E.onChangeColors((B=>this._handleThemeChange(B)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,f){const g=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&g<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const f=this._getPixelsScrolled(p);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const f=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(p,f){var E;let g,C="";const R=[],z=f??this._bufferService.buffer.lines.length,A=this._bufferService.buffer.lines;for(let B=p;B<z;B++){const P=A.get(B);if(!P)continue;const N=(E=A.get(B+1))==null?void 0:E.isWrapped;if(C+=P.translateToString(!N),!N||B===A.length-1){const K=document.createElement("div");K.textContent=C,R.push(K),C.length>0&&(g=K),C=""}}return{bufferElements:R,cursorElement:g}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let f=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(p,f){const g=this._optionsService.rawOptions.fastScrollModifier;return g==="alt"&&f.altKey||g==="ctrl"&&f.ctrlKey||g==="shift"&&f.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const f=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(p,f))}};l.Viewport=h=m([v(2,w.IBufferService),v(3,w.IOptionsService),v(4,y.ICharSizeService),v(5,y.IRenderService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],h)},3107:function(b,l,c){var m=this&&this.__decorate||function(w,h,p,f){var g,C=arguments.length,R=C<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,h,p,f);else for(var z=w.length-1;z>=0;z--)(g=w[z])&&(R=(C<3?g(R):C>3?g(h,p,R):g(h,p))||R);return C>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(w,h){return function(p,f){h(p,f,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const d=c(4725),y=c(844),_=c(2585);let j=l.BufferDecorationRenderer=class extends y.Disposable{constructor(w,h,p,f,g){super(),this._screenElement=w,this._bufferService=h,this._coreBrowserService=p,this._decorationService=f,this._renderService=g,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((C=>this._removeDecoration(C)))),this.register((0,y.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const w of this._decorationService.decorations)this._renderDecoration(w);this._dimensionsChanged=!1}_renderDecoration(w){this._refreshStyle(w),this._dimensionsChanged&&this._refreshXPosition(w)}_createElement(w){var f;const h=this._coreBrowserService.mainDocument.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((f=w==null?void 0:w.options)==null?void 0:f.layer)==="top"),h.style.width=`${Math.round((w.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(w.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(w.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=w.options.x??0;return p&&p>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(w,h),h}_refreshStyle(w){const h=w.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)w.element&&(w.element.style.display="none",w.onRenderEmitter.fire(w.element));else{let p=this._decorationElements.get(w);p||(p=this._createElement(w),w.element=p,this._decorationElements.set(w,p),this._container.appendChild(p),w.onDispose((()=>{this._decorationElements.delete(w),p.remove()}))),p.style.top=h*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",w.onRenderEmitter.fire(p)}}_refreshXPosition(w,h=w.element){if(!h)return;const p=w.options.x??0;(w.options.anchor||"left")==="right"?h.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(w){var h;(h=this._decorationElements.get(w))==null||h.remove(),this._decorationElements.delete(w),w.dispose()}};l.BufferDecorationRenderer=j=m([v(1,_.IBufferService),v(2,d.ICoreBrowserService),v(3,_.IDecorationService),v(4,d.IRenderService)],j)},5871:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const m of this._zones)if(m.color===c.options.overviewRulerOptions.color&&m.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,c.marker.line))return;if(this._lineAdjacentToZone(m,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(m,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,m){return m>=c.startBufferLine&&m<=c.endBufferLine}_lineAdjacentToZone(c,m,v){return m>=c.startBufferLine-this._linePadding[v||"full"]&&m<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,m){c.startBufferLine=Math.min(c.startBufferLine,m),c.endBufferLine=Math.max(c.endBufferLine,m)}}},5744:function(b,l,c){var m=this&&this.__decorate||function(g,C,R,z){var A,E=arguments.length,B=E<3?C:z===null?z=Object.getOwnPropertyDescriptor(C,R):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,C,R,z);else for(var P=g.length-1;P>=0;P--)(A=g[P])&&(B=(E<3?A(B):E>3?A(C,R,B):A(C,R))||B);return E>3&&B&&Object.defineProperty(C,R,B),B},v=this&&this.__param||function(g,C){return function(R,z){C(R,z,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const d=c(5871),y=c(4725),_=c(844),j=c(2585),w={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let f=l.OverviewRulerRenderer=class extends _.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,C,R,z,A,E,B){var N;super(),this._viewportElement=g,this._screenElement=C,this._bufferService=R,this._decorationService=z,this._renderService=A,this._optionsService=E,this._coreBrowserService=B,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(N=this._viewportElement.parentElement)==null||N.insertBefore(this._canvas,this._viewportElement);const P=this._canvas.getContext("2d");if(!P)throw new Error("Ctx cannot be null");this._ctx=P,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,_.toDisposable)((()=>{var K;(K=this._canvas)==null||K.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=C,h.right=g,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=h.left,p.right=h.left+h.center}_refreshDrawHeightConstants(){w.full=Math.round(2*this._coreBrowserService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowserService.dpr);w.left=C,w.center=C,w.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const C of g)C.position!=="full"&&this._renderColorZone(C);for(const C of g)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(p[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-w[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+w[g.position||"full"]))}_queueRefresh(g,C){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=f=m([v(2,j.IBufferService),v(3,j.IDecorationService),v(4,y.IRenderService),v(5,j.IOptionsService),v(6,y.ICoreBrowserService)],f)},2950:function(b,l,c){var m=this&&this.__decorate||function(w,h,p,f){var g,C=arguments.length,R=C<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,h,p,f);else for(var z=w.length-1;z>=0;z--)(g=w[z])&&(R=(C<3?g(R):C>3?g(h,p,R):g(h,p))||R);return C>3&&R&&Object.defineProperty(h,p,R),R},v=this&&this.__param||function(w,h){return function(p,f){h(p,f,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const d=c(4725),y=c(2585),_=c(2584);let j=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,h,p,f,g,C){this._textarea=w,this._compositionView=h,this._bufferService=p,this._optionsService=f,this._coreService=g,this._renderService=C,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}}),0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const h=this._textarea.value,p=h.replace(w,"");this._dataAlreadySent=p,h.length>w.length?this._coreService.triggerDataEvent(p,!0):h.length<w.length?this._coreService.triggerDataEvent(`${_.C0.DEL}`,!0):h.length===w.length&&h!==w&&this._coreService.triggerDataEvent(h,!0)}}),0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,g=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=g+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const C=this._compositionView.getBoundingClientRect();this._textarea.style.left=g+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(C.width,1)+"px",this._textarea.style.height=Math.max(C.height,1)+"px",this._textarea.style.lineHeight=C.height+"px"}w||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=j=m([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,y.ICoreService),v(5,d.IRenderService)],j)},9806:(b,l)=>{function c(m,v,d){const y=d.getBoundingClientRect(),_=m.getComputedStyle(d),j=parseInt(_.getPropertyValue("padding-left")),w=parseInt(_.getPropertyValue("padding-top"));return[v.clientX-y.left-j,v.clientY-y.top-w]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=c,l.getCoords=function(m,v,d,y,_,j,w,h,p){if(!j)return;const f=c(m,v,d);return f?(f[0]=Math.ceil((f[0]+(p?w/2:0))/w),f[1]=Math.ceil(f[1]/h),f[0]=Math.min(Math.max(f[0],1),y+(p?1:0)),f[1]=Math.min(Math.max(f[1],1),_),f):void 0}},9504:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const m=c(2584);function v(h,p,f,g){const C=h-d(h,f),R=p-d(p,f),z=Math.abs(C-R)-(function(A,E,B){let P=0;const N=A-d(A,B),K=E-d(E,B);for(let U=0;U<Math.abs(N-K);U++){const ee=y(A,E)==="A"?-1:1,V=B.buffer.lines.get(N+ee*U);V!=null&&V.isWrapped&&P++}return P})(h,p,f);return w(z,j(y(h,p),g))}function d(h,p){let f=0,g=p.buffer.lines.get(h),C=g==null?void 0:g.isWrapped;for(;C&&h>=0&&h<p.rows;)f++,g=p.buffer.lines.get(--h),C=g==null?void 0:g.isWrapped;return f}function y(h,p){return h>p?"A":"B"}function _(h,p,f,g,C,R){let z=h,A=p,E="";for(;z!==f||A!==g;)z+=C?1:-1,C&&z>R.cols-1?(E+=R.buffer.translateBufferLineToString(A,!1,h,z),z=0,h=0,A++):!C&&z<0&&(E+=R.buffer.translateBufferLineToString(A,!1,0,h+1),z=R.cols-1,h=z,A--);return E+R.buffer.translateBufferLineToString(A,!1,h,z)}function j(h,p){const f=p?"O":"[";return m.C0.ESC+f+h}function w(h,p){h=Math.floor(h);let f="";for(let g=0;g<h;g++)f+=p;return f}l.moveToCellSequence=function(h,p,f,g){const C=f.buffer.x,R=f.buffer.y;if(!f.buffer.hasScrollback)return(function(E,B,P,N,K,U){return v(B,N,K,U).length===0?"":w(_(E,B,E,B-d(B,K),!1,K).length,j("D",U))})(C,R,0,p,f,g)+v(R,p,f,g)+(function(E,B,P,N,K,U){let ee;ee=v(B,N,K,U).length>0?N-d(N,K):B;const V=N,de=(function(J,Y,M,I,D,W){let pe;return pe=v(M,I,D,W).length>0?I-d(I,D):Y,J<M&&pe<=I||J>=M&&pe<I?"C":"D"})(E,B,P,N,K,U);return w(_(E,ee,P,V,de==="C",K).length,j(de,U))})(C,R,h,p,f,g);let z;if(R===p)return z=C>h?"D":"C",w(Math.abs(C-h),j(z,g));z=R>p?"D":"C";const A=Math.abs(R-p);return w((function(E,B){return B.cols-E})(R>p?h:C,f)+(A-1)*f.cols+1+((R>p?C:h)-1),j(z,g))}},1296:function(b,l,c){var m=this&&this.__decorate||function(U,ee,V,de){var J,Y=arguments.length,M=Y<3?ee:de===null?de=Object.getOwnPropertyDescriptor(ee,V):de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(U,ee,V,de);else for(var I=U.length-1;I>=0;I--)(J=U[I])&&(M=(Y<3?J(M):Y>3?J(ee,V,M):J(ee,V))||M);return Y>3&&M&&Object.defineProperty(ee,V,M),M},v=this&&this.__param||function(U,ee){return function(V,de){ee(V,de,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const d=c(3787),y=c(2550),_=c(2223),j=c(6171),w=c(6052),h=c(4725),p=c(8055),f=c(8460),g=c(844),C=c(2585),R="xterm-dom-renderer-owner-",z="xterm-rows",A="xterm-fg-",E="xterm-bg-",B="xterm-focus",P="xterm-selection";let N=1,K=l.DomRenderer=class extends g.Disposable{constructor(U,ee,V,de,J,Y,M,I,D,W,pe,me,Se){super(),this._terminal=U,this._document=ee,this._element=V,this._screenElement=de,this._viewportElement=J,this._helperContainer=Y,this._linkifier2=M,this._charSizeService=D,this._optionsService=W,this._bufferService=pe,this._coreBrowserService=me,this._themeService=Se,this._terminalClass=N++,this._rowElements=[],this._selectionRenderModel=(0,w.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(z),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(P),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,j.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Ee=>this._injectCss(Ee)))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(R+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Ee=>this._handleLinkHover(Ee)))),this.register(this._linkifier2.onHideLinkUnderline((Ee=>this._handleLinkLeave(Ee)))),this.register((0,g.toDisposable)((()=>{this._element.classList.remove(R+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new y.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const ee=`${this._terminalSelector} .${z} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=ee,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let ee=`${this._terminalSelector} .${z} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;ee+=`${this._terminalSelector} .${z} .xterm-dim { color: ${p.color.multiplyOpacity(U.foreground,.5).css};}`,ee+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const V=`blink_underline_${this._terminalClass}`,de=`blink_bar_${this._terminalClass}`,J=`blink_block_${this._terminalClass}`;ee+=`@keyframes ${V} { 50% {  border-bottom-style: hidden; }}`,ee+=`@keyframes ${de} { 50% {  box-shadow: none; }}`,ee+=`@keyframes ${J} { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,ee+=`${this._terminalSelector} .${z}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${z}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${de} 1s step-end infinite;}${this._terminalSelector} .${z}.${B} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${z} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${z} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${U.cursor.css} !important; color: ${U.cursorAccent.css} !important;}${this._terminalSelector} .${z} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${z} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${z} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,ee+=`${this._terminalSelector} .${P} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${P} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${P} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,M]of U.ansi.entries())ee+=`${this._terminalSelector} .${A}${Y} { color: ${M.css}; }${this._terminalSelector} .${A}${Y}.xterm-dim { color: ${p.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${E}${Y} { background-color: ${M.css}; }`;ee+=`${this._terminalSelector} .${A}${_.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(U.background).css}; }${this._terminalSelector} .${A}${_.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${E}${_.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=ee}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,ee){for(let V=this._rowElements.length;V<=ee;V++){const de=this._document.createElement("div");this._rowContainer.appendChild(de),this._rowElements.push(de)}for(;this._rowElements.length>ee;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,ee){this._refreshRowElements(U,ee),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(B),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(B),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,ee,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,ee,V),this.renderRows(0,this._bufferService.rows-1),!U||!ee)return;this._selectionRenderModel.update(this._terminal,U,ee,V);const de=this._selectionRenderModel.viewportStartRow,J=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||M<0)return;const I=this._document.createDocumentFragment();if(V){const D=U[0]>ee[0];I.appendChild(this._createSelectionElement(Y,D?ee[0]:U[0],D?U[0]:ee[0],M-Y+1))}else{const D=de===Y?U[0]:0,W=Y===J?ee[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(Y,D,W));const pe=M-Y-1;if(I.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,pe)),Y!==M){const me=J===M?ee[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(M,0,me))}}this._selectionContainer.appendChild(I)}_createSelectionElement(U,ee,V,de=1){const J=this._document.createElement("div"),Y=ee*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(V-ee);return Y+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-Y),J.style.height=de*this.dimensions.css.cell.height+"px",J.style.top=U*this.dimensions.css.cell.height+"px",J.style.left=`${Y}px`,J.style.width=`${M}px`,J}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,ee){const V=this._bufferService.buffer,de=V.ybase+V.y,J=Math.min(V.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let D=U;D<=ee;D++){const W=D+V.ydisp,pe=this._rowElements[D],me=V.lines.get(W);if(!pe||!me)break;pe.replaceChildren(...this._rowFactory.createRow(me,W,W===de,M,I,J,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${R}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,ee,V,de,J,Y){V<0&&(U=0),de<0&&(ee=0);const M=this._bufferService.rows-1;V=Math.max(Math.min(V,M),0),de=Math.max(Math.min(de,M),0),J=Math.min(J,this._bufferService.cols);const I=this._bufferService.buffer,D=I.ybase+I.y,W=Math.min(I.x,J-1),pe=this._optionsService.rawOptions.cursorBlink,me=this._optionsService.rawOptions.cursorStyle,Se=this._optionsService.rawOptions.cursorInactiveStyle;for(let Ee=V;Ee<=de;++Ee){const X=Ee+I.ydisp,F=this._rowElements[Ee],ve=I.lines.get(X);if(!F||!ve)break;F.replaceChildren(...this._rowFactory.createRow(ve,X,X===D,me,Se,W,pe,this.dimensions.css.cell.width,this._widthCache,Y?Ee===V?U:0:-1,Y?(Ee===de?ee:J)-1:-1))}}};l.DomRenderer=K=m([v(7,C.IInstantiationService),v(8,h.ICharSizeService),v(9,C.IOptionsService),v(10,C.IBufferService),v(11,h.ICoreBrowserService),v(12,h.IThemeService)],K)},3787:function(b,l,c){var m=this&&this.__decorate||function(z,A,E,B){var P,N=arguments.length,K=N<3?A:B===null?B=Object.getOwnPropertyDescriptor(A,E):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(z,A,E,B);else for(var U=z.length-1;U>=0;U--)(P=z[U])&&(K=(N<3?P(K):N>3?P(A,E,K):P(A,E))||K);return N>3&&K&&Object.defineProperty(A,E,K),K},v=this&&this.__param||function(z,A){return function(E,B){A(E,B,z)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const d=c(2223),y=c(643),_=c(511),j=c(2585),w=c(8055),h=c(4725),p=c(4269),f=c(6171),g=c(3734);let C=l.DomRendererRowFactory=class{constructor(z,A,E,B,P,N,K){this._document=z,this._characterJoinerService=A,this._optionsService=E,this._coreBrowserService=B,this._coreService=P,this._decorationService=N,this._themeService=K,this._workCell=new _.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(z,A,E){this._selectionStart=z,this._selectionEnd=A,this._columnSelectMode=E}createRow(z,A,E,B,P,N,K,U,ee,V,de){const J=[],Y=this._characterJoinerService.getJoinedCharacters(A),M=this._themeService.colors;let I,D=z.getNoBgTrimmedLength();E&&D<N+1&&(D=N+1);let W=0,pe="",me=0,Se=0,Ee=0,X=!1,F=0,ve=!1,se=0;const Me=[],Z=V!==-1&&de!==-1;for(let ke=0;ke<D;ke++){z.loadCell(ke,this._workCell);let he=this._workCell.getWidth();if(he===0)continue;let Ie=!1,Oe=ke,$e=this._workCell;if(Y.length>0&&ke===Y[0][0]){Ie=!0;const ht=Y.shift();$e=new p.JoinedCellData(this._workCell,z.translateToString(!0,ht[0],ht[1]),ht[1]-ht[0]),Oe=ht[1]-1,he=$e.getWidth()}const je=this._isCellInSelection(ke,A),Ne=E&&ke===N,Q=Z&&ke>=V&&ke<=de;let le=!1;this._decorationService.forEachDecorationAtCell(ke,A,void 0,(ht=>{le=!0}));let We=$e.getChars()||y.WHITESPACE_CELL_CHAR;if(We===" "&&($e.isUnderline()||$e.isOverline())&&(We=""),se=he*U-ee.get(We,$e.isBold(),$e.isItalic()),I){if(W&&(je&&ve||!je&&!ve&&$e.bg===me)&&(je&&ve&&M.selectionForeground||$e.fg===Se)&&$e.extended.ext===Ee&&Q===X&&se===F&&!Ne&&!Ie&&!le){$e.isInvisible()?pe+=y.WHITESPACE_CELL_CHAR:pe+=We,W++;continue}W&&(I.textContent=pe),I=this._document.createElement("span"),W=0,pe=""}else I=this._document.createElement("span");if(me=$e.bg,Se=$e.fg,Ee=$e.extended.ext,X=Q,F=se,ve=je,Ie&&N>=ke&&N<=Oe&&(N=ke),!this._coreService.isCursorHidden&&Ne&&this._coreService.isCursorInitialized){if(Me.push("xterm-cursor"),this._coreBrowserService.isFocused)K&&Me.push("xterm-cursor-blink"),Me.push(B==="bar"?"xterm-cursor-bar":B==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(P)switch(P){case"outline":Me.push("xterm-cursor-outline");break;case"block":Me.push("xterm-cursor-block");break;case"bar":Me.push("xterm-cursor-bar");break;case"underline":Me.push("xterm-cursor-underline")}}if($e.isBold()&&Me.push("xterm-bold"),$e.isItalic()&&Me.push("xterm-italic"),$e.isDim()&&Me.push("xterm-dim"),pe=$e.isInvisible()?y.WHITESPACE_CELL_CHAR:$e.getChars()||y.WHITESPACE_CELL_CHAR,$e.isUnderline()&&(Me.push(`xterm-underline-${$e.extended.underlineStyle}`),pe===" "&&(pe=""),!$e.isUnderlineColorDefault()))if($e.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${g.AttributeData.toColorRGB($e.getUnderlineColor()).join(",")})`;else{let ht=$e.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&$e.isBold()&&ht<8&&(ht+=8),I.style.textDecorationColor=M.ansi[ht].css}$e.isOverline()&&(Me.push("xterm-overline"),pe===" "&&(pe="")),$e.isStrikethrough()&&Me.push("xterm-strikethrough"),Q&&(I.style.textDecoration="underline");let Ze=$e.getFgColor(),Xe=$e.getFgColorMode(),mt=$e.getBgColor(),Jt=$e.getBgColorMode();const Et=!!$e.isInverse();if(Et){const ht=Ze;Ze=mt,mt=ht;const zr=Xe;Xe=Jt,Jt=zr}let Rt,Mt,xt,Pt=!1;switch(this._decorationService.forEachDecorationAtCell(ke,A,void 0,(ht=>{ht.options.layer!=="top"&&Pt||(ht.backgroundColorRGB&&(Jt=50331648,mt=ht.backgroundColorRGB.rgba>>8&16777215,Rt=ht.backgroundColorRGB),ht.foregroundColorRGB&&(Xe=50331648,Ze=ht.foregroundColorRGB.rgba>>8&16777215,Mt=ht.foregroundColorRGB),Pt=ht.options.layer==="top")})),!Pt&&je&&(Rt=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,mt=Rt.rgba>>8&16777215,Jt=50331648,Pt=!0,M.selectionForeground&&(Xe=50331648,Ze=M.selectionForeground.rgba>>8&16777215,Mt=M.selectionForeground)),Pt&&Me.push("xterm-decoration-top"),Jt){case 16777216:case 33554432:xt=M.ansi[mt],Me.push(`xterm-bg-${mt}`);break;case 50331648:xt=w.channels.toColor(mt>>16,mt>>8&255,255&mt),this._addStyle(I,`background-color:#${R((mt>>>0).toString(16),"0",6)}`);break;default:Et?(xt=M.foreground,Me.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):xt=M.background}switch(Rt||$e.isDim()&&(Rt=w.color.multiplyOpacity(xt,.5)),Xe){case 16777216:case 33554432:$e.isBold()&&Ze<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ze+=8),this._applyMinimumContrast(I,xt,M.ansi[Ze],$e,Rt,void 0)||Me.push(`xterm-fg-${Ze}`);break;case 50331648:const ht=w.channels.toColor(Ze>>16&255,Ze>>8&255,255&Ze);this._applyMinimumContrast(I,xt,ht,$e,Rt,Mt)||this._addStyle(I,`color:#${R(Ze.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,xt,M.foreground,$e,Rt,Mt)||Et&&Me.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}Me.length&&(I.className=Me.join(" "),Me.length=0),Ne||Ie||le?I.textContent=pe:W++,se!==this.defaultSpacing&&(I.style.letterSpacing=`${se}px`),J.push(I),ke=Oe}return I&&W&&(I.textContent=pe),J}_applyMinimumContrast(z,A,E,B,P,N){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.treatGlyphAsBackgroundColor)(B.getCode()))return!1;const K=this._getContrastCache(B);let U;if(P||N||(U=K.getColor(A.rgba,E.rgba)),U===void 0){const ee=this._optionsService.rawOptions.minimumContrastRatio/(B.isDim()?2:1);U=w.color.ensureContrastRatio(P||A,N||E,ee),K.setColor((P||A).rgba,(N||E).rgba,U??null)}return!!U&&(this._addStyle(z,`color:${U.css}`),!0)}_getContrastCache(z){return z.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(z,A){z.setAttribute("style",`${z.getAttribute("style")||""}${A};`)}_isCellInSelection(z,A){const E=this._selectionStart,B=this._selectionEnd;return!(!E||!B)&&(this._columnSelectMode?E[0]<=B[0]?z>=E[0]&&A>=E[1]&&z<B[0]&&A<=B[1]:z<E[0]&&A>=E[1]&&z>=B[0]&&A<=B[1]:A>E[1]&&A<B[1]||E[1]===B[1]&&A===E[1]&&z>=E[0]&&z<B[0]||E[1]<B[1]&&A===B[1]&&z<B[0]||E[1]<B[1]&&A===E[1]&&z>=E[0])}};function R(z,A,E){for(;z.length<E;)z=A+z;return z}l.DomRendererRowFactory=C=m([v(1,h.ICharacterJoinerService),v(2,j.IOptionsService),v(3,h.ICoreBrowserService),v(4,j.ICoreService),v(5,j.IDecorationService),v(6,h.IThemeService)],C)},2550:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(c,m){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const y=c.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontStyle="italic";const _=c.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[v,d,y,_],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(y),this._container.appendChild(_),m.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,m,v,d){c===this._font&&m===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=m,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,m,v){let d=0;if(!m&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const j=this._measure(c,0);return j>0&&(this._flat[d]=j),j}let y=c;m&&(y+="B"),v&&(y+="I");let _=this._holey.get(y);if(_===void 0){let j=0;m&&(j|=1),v&&(j|=2),_=this._measure(c,j),_>0&&this._holey.set(y,_)}return _}_measure(c,m){const v=this._measureElements[m];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const m=c(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(b,l)=>{function c(v){return 57508<=v&&v<=57558}function m(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},l.isPowerlineGlyph=c,l.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},l.isEmoji=m,l.allowRescaling=function(v,d,y,_){return d===1&&y>Math.ceil(1.5*_)&&v!==void 0&&v>255&&!m(v)&&!c(v)&&!(function(j){return 57344<=j&&j<=63743})(v)},l.treatGlyphAsBackgroundColor=function(v){return c(v)||(function(d){return 9472<=d&&d<=9631})(v)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(v,d,y=0){return(v-(2*Math.round(d)-y))%(2*Math.round(d))}},6052:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,y,_=!1){if(this.selectionStart=d,this.selectionEnd=y,!d||!y||d[0]===y[0]&&d[1]===y[1])return void this.clear();const j=v.buffers.active.ydisp,w=d[1]-j,h=y[1]-j,p=Math.max(w,0),f=Math.min(h,v.rows-1);p>=v.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=w,this.viewportEndRow=h,this.viewportCappedStartRow=p,this.viewportCappedEndRow=f,this.startCol=d[0],this.endCol=y[0])}isCellSelected(v,d,y){return!!this.hasSelection&&(y-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&y>=this.viewportCappedStartRow&&d<this.endCol&&y<=this.viewportCappedEndRow:d<this.startCol&&y>=this.viewportCappedStartRow&&d>=this.endCol&&y<=this.viewportCappedEndRow:y>this.viewportStartRow&&y<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&y===this.viewportStartRow&&d>=this.startCol)}}l.createSelectionRenderModel=function(){return new c}},456:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,m=this.selectionEnd;return!(!c||!m)&&(c[1]>m[1]||c[1]===m[1]&&c[0]>m[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,l,c){var m=this&&this.__decorate||function(f,g,C,R){var z,A=arguments.length,E=A<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,C):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,C,R);else for(var B=f.length-1;B>=0;B--)(z=f[B])&&(E=(A<3?z(E):A>3?z(g,C,E):z(g,C))||E);return A>3&&E&&Object.defineProperty(g,C,E),E},v=this&&this.__param||function(f,g){return function(C,R){g(C,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const d=c(2585),y=c(8460),_=c(844);let j=l.CharSizeService=class extends _.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,g,C){super(),this._optionsService=C,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new h(f,g,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};l.CharSizeService=j=m([v(2,d.IOptionsService)],j);class w extends _.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(g,C){g!==void 0&&g>0&&C!==void 0&&C>0&&(this._result.width=g,this._result.height=C)}}class h extends w{constructor(g,C,R){super(),this._document=g,this._parentElement=C,this._optionsService=R,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends w{constructor(g){super(),this._optionsService=g,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const C=this._ctx.measureText("W");if(!("width"in C&&"fontBoundingBoxAscent"in C&&"fontBoundingBoxDescent"in C))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const g=this._ctx.measureText("W");return this._validateAndSet(g.width,g.fontBoundingBoxAscent+g.fontBoundingBoxDescent),this._result}}},4269:function(b,l,c){var m=this&&this.__decorate||function(p,f,g,C){var R,z=arguments.length,A=z<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(p,f,g,C);else for(var E=p.length-1;E>=0;E--)(R=p[E])&&(A=(z<3?R(A):z>3?R(f,g,A):R(f,g))||A);return z>3&&A&&Object.defineProperty(f,g,A),A},v=this&&this.__param||function(p,f){return function(g,C){f(g,C,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const d=c(3734),y=c(643),_=c(511),j=c(2585);class w extends d.AttributeData{constructor(f,g,C){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=g,this._width=C}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let h=l.CharacterJoinerService=class b0{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _.CellData}register(f){const g={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(g),g.id}deregister(f){for(let g=0;g<this._characterJoiners.length;g++)if(this._characterJoiners[g].id===f)return this._characterJoiners.splice(g,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];const g=this._bufferService.buffer.lines.get(f);if(!g||g.length===0)return[];const C=[],R=g.translateToString(!0);let z=0,A=0,E=0,B=g.getFg(0),P=g.getBg(0);for(let N=0;N<g.getTrimmedLength();N++)if(g.loadCell(N,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==B||this._workCell.bg!==P){if(N-z>1){const K=this._getJoinedRanges(R,E,A,g,z);for(let U=0;U<K.length;U++)C.push(K[U])}z=N,E=A,B=this._workCell.fg,P=this._workCell.bg}A+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-z>1){const N=this._getJoinedRanges(R,E,A,g,z);for(let K=0;K<N.length;K++)C.push(N[K])}return C}_getJoinedRanges(f,g,C,R,z){const A=f.substring(g,C);let E=[];try{E=this._characterJoiners[0].handler(A)}catch(B){console.error(B)}for(let B=1;B<this._characterJoiners.length;B++)try{const P=this._characterJoiners[B].handler(A);for(let N=0;N<P.length;N++)b0._mergeRanges(E,P[N])}catch(P){console.error(P)}return this._stringRangesToCellRanges(E,R,z),E}_stringRangesToCellRanges(f,g,C){let R=0,z=!1,A=0,E=f[R];if(E){for(let B=C;B<this._bufferService.cols;B++){const P=g.getWidth(B),N=g.getString(B).length||y.WHITESPACE_CELL_CHAR.length;if(P!==0){if(!z&&E[0]<=A&&(E[0]=B,z=!0),E[1]<=A){if(E[1]=B,E=f[++R],!E)break;E[0]<=A?(E[0]=B,z=!0):z=!1}A+=N}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(f,g){let C=!1;for(let R=0;R<f.length;R++){const z=f[R];if(C){if(g[1]<=z[0])return f[R-1][1]=g[1],f;if(g[1]<=z[1])return f[R-1][1]=Math.max(g[1],z[1]),f.splice(R,1),f;f.splice(R,1),R--}else{if(g[1]<=z[0])return f.splice(R,0,g),f;if(g[1]<=z[1])return z[0]=Math.min(g[0],z[0]),f;g[0]<z[1]&&(z[0]=Math.min(g[0],z[0]),C=!0)}}return C?f[f.length-1][1]=g[1]:f.push(g),f}};l.CharacterJoinerService=h=m([v(0,j.IBufferService)],h)},5114:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const m=c(844),v=c(8460),d=c(3656);class y extends m.Disposable{constructor(w,h,p){super(),this._textarea=w,this._window=h,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new _(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((f=>this._screenDprMonitor.setWindow(f)))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(w){this._window!==w&&(this._window=w,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}l.CoreBrowserService=y;class _ extends m.Disposable{constructor(w){super(),this._parentWindow=w,this._windowResizeListener=this.register(new m.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,m.toDisposable)((()=>this.clearListener())))}setWindow(w){this._parentWindow=w,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var w;this._outerListener&&((w=this._resolutionMediaMatchList)==null||w.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const m=c(844);class v extends m.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,m.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(y){return this.linkProviders.push(y),{dispose:()=>{const _=this.linkProviders.indexOf(y);_!==-1&&this.linkProviders.splice(_,1)}}}}l.LinkProviderService=v},8934:function(b,l,c){var m=this&&this.__decorate||function(j,w,h,p){var f,g=arguments.length,C=g<3?w:p===null?p=Object.getOwnPropertyDescriptor(w,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(j,w,h,p);else for(var R=j.length-1;R>=0;R--)(f=j[R])&&(C=(g<3?f(C):g>3?f(w,h,C):f(w,h))||C);return g>3&&C&&Object.defineProperty(w,h,C),C},v=this&&this.__param||function(j,w){return function(h,p){w(h,p,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const d=c(4725),y=c(9806);let _=l.MouseService=class{constructor(j,w){this._renderService=j,this._charSizeService=w}getCoords(j,w,h,p,f){return(0,y.getCoords)(window,j,w,h,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(j,w){const h=(0,y.getCoordsRelativeToElement)(window,j,w);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};l.MouseService=_=m([v(0,d.IRenderService),v(1,d.ICharSizeService)],_)},3230:function(b,l,c){var m=this&&this.__decorate||function(f,g,C,R){var z,A=arguments.length,E=A<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,C):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,C,R);else for(var B=f.length-1;B>=0;B--)(z=f[B])&&(E=(A<3?z(E):A>3?z(g,C,E):z(g,C))||E);return A>3&&E&&Object.defineProperty(g,C,E),E},v=this&&this.__param||function(f,g){return function(C,R){g(C,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const d=c(6193),y=c(4725),_=c(8460),j=c(844),w=c(7226),h=c(2585);let p=l.RenderService=class extends j.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,g,C,R,z,A,E,B){super(),this._rowCount=f,this._charSizeService=R,this._renderer=this.register(new j.MutableDisposable),this._pausedResizeTask=new w.DebouncedIdleTask,this._observerDisposable=this.register(new j.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer(((P,N)=>this._renderRows(P,N)),E),this.register(this._renderDebouncer),this.register(E.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(A.onResize((()=>this._fullRefresh()))),this.register(A.buffers.onBufferActivate((()=>{var P;return(P=this._renderer.value)==null?void 0:P.clear()}))),this.register(C.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(z.onDecorationRegistered((()=>this._fullRefresh()))),this.register(z.onDecorationRemoved((()=>this._fullRefresh()))),this.register(C.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(A.cols,A.rows),this._fullRefresh()}))),this.register(C.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(A.buffer.y,A.buffer.y,!0)))),this.register(B.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(E.window,g),this.register(E.onWindowChange((P=>this._registerIntersectionObserver(P,g))))}_registerIntersectionObserver(f,g){if("IntersectionObserver"in f){const C=new f.IntersectionObserver((R=>this._handleIntersectionChange(R[R.length-1])),{threshold:0});C.observe(g),this._observerDisposable.value=(0,j.toDisposable)((()=>C.disconnect()))}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,g,C=!1){this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,g,this._rowCount))}_renderRows(f,g){this._renderer.value&&(f=Math.min(f,this._rowCount-1),g=Math.min(g,this._rowCount-1),this._renderer.value.renderRows(f,g),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:g}),this._onRender.fire({start:f,end:g}),this._isNextRenderRedrawOnly=!0)}resize(f,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value&&(this._renderer.value.onRequestRedraw((g=>this.refreshRows(g.start,g.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,g;this._renderer.value&&((g=(f=this._renderer.value).clearTextureAtlas)==null||g.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,g){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var C;return(C=this._renderer.value)==null?void 0:C.handleResize(f,g)})):this._renderer.value.handleResize(f,g),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)==null||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)==null||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)==null||f.handleFocus()}handleSelectionChanged(f,g,C){var R;this._selectionState.start=f,this._selectionState.end=g,this._selectionState.columnSelectMode=C,(R=this._renderer.value)==null||R.handleSelectionChanged(f,g,C)}handleCursorMove(){var f;(f=this._renderer.value)==null||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)==null||f.clear()}};l.RenderService=p=m([v(2,h.IOptionsService),v(3,y.ICharSizeService),v(4,h.IDecorationService),v(5,h.IBufferService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],p)},9312:function(b,l,c){var m=this&&this.__decorate||function(E,B,P,N){var K,U=arguments.length,ee=U<3?B:N===null?N=Object.getOwnPropertyDescriptor(B,P):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(E,B,P,N);else for(var V=E.length-1;V>=0;V--)(K=E[V])&&(ee=(U<3?K(ee):U>3?K(B,P,ee):K(B,P))||ee);return U>3&&ee&&Object.defineProperty(B,P,ee),ee},v=this&&this.__param||function(E,B){return function(P,N){B(P,N,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const d=c(9806),y=c(9504),_=c(456),j=c(4725),w=c(8460),h=c(844),p=c(6114),f=c(4841),g=c(511),C=c(2585),R="",z=new RegExp(R,"g");let A=l.SelectionService=class extends h.Disposable{constructor(E,B,P,N,K,U,ee,V,de){super(),this._element=E,this._screenElement=B,this._linkifier=P,this._bufferService=N,this._coreService=K,this._mouseService=U,this._optionsService=ee,this._renderService=V,this._coreBrowserService=de,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new g.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((J=>this._handleTrim(J))),this.register(this._bufferService.buffers.onBufferActivate((J=>this._handleBufferActivate(J)))),this.enable(),this._model=new _.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!E||!B||E[0]===B[0]&&E[1]===B[1])}get selectionText(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;if(!E||!B)return"";const P=this._bufferService.buffer,N=[];if(this._activeSelectionMode===3){if(E[0]===B[0])return"";const K=E[0]<B[0]?E[0]:B[0],U=E[0]<B[0]?B[0]:E[0];for(let ee=E[1];ee<=B[1];ee++){const V=P.translateBufferLineToString(ee,!0,K,U);N.push(V)}}else{const K=E[1]===B[1]?B[0]:void 0;N.push(P.translateBufferLineToString(E[1],!0,E[0],K));for(let U=E[1]+1;U<=B[1]-1;U++){const ee=P.lines.get(U),V=P.translateBufferLineToString(U,!0);ee!=null&&ee.isWrapped?N[N.length-1]+=V:N.push(V)}if(E[1]!==B[1]){const U=P.lines.get(B[1]),ee=P.translateBufferLineToString(B[1],!0,0,B[0]);U&&U.isWrapped?N[N.length-1]+=ee:N.push(ee)}}return N.map((K=>K.replace(z," "))).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),p.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){const B=this._getMouseBufferCoords(E),P=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!!(P&&N&&B)&&this._areCoordsInSelection(B,P,N)}isCellInSelection(E,B){const P=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!P||!N)&&this._areCoordsInSelection([E,B],P,N)}_areCoordsInSelection(E,B,P){return E[1]>B[1]&&E[1]<P[1]||B[1]===P[1]&&E[1]===B[1]&&E[0]>=B[0]&&E[0]<P[0]||B[1]<P[1]&&E[1]===P[1]&&E[0]<P[0]||B[1]<P[1]&&E[1]===B[1]&&E[0]>=B[0]}_selectWordAtCursor(E,B){var K,U;const P=(U=(K=this._linkifier.currentLink)==null?void 0:K.link)==null?void 0:U.range;if(P)return this._model.selectionStart=[P.start.x-1,P.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(P,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const N=this._getMouseBufferCoords(E);return!!N&&(this._selectWordAt(N,B),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,B){this._model.clearSelection(),E=Math.max(E,0),B=Math.min(B,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,B],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){const B=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(B)return B[0]--,B[1]--,B[1]+=this._bufferService.buffer.ydisp,B}_getMouseEventScrollAmount(E){let B=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1];const P=this._renderService.dimensions.css.canvas.height;return B>=0&&B<=P?0:(B>P&&(B-=P),B=Math.min(Math.max(B,-50),50),B/=50,B/Math.abs(B)+Math.round(14*B))}shouldForceSelection(E){return p.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const B=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);B&&B.length!==this._model.selectionStart[0]&&B.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){const B=this._getMouseBufferCoords(E);B&&(this._activeSelectionMode=2,this._selectLineAt(B[1]))}shouldColumnSelect(E){return E.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;const B=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const P=this._bufferService.buffer;if(this._model.selectionEnd[1]<P.lines.length){const N=P.lines.get(this._model.selectionEnd[1]);N&&N.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}B&&B[0]===this._model.selectionEnd[0]&&B[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){const B=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&B<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const P=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(P&&P[0]!==void 0&&P[1]!==void 0){const N=(0,y.moveToCellSequence)(P[0]-1,P[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(N,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const E=this._model.finalSelectionStart,B=this._model.finalSelectionEnd,P=!(!E||!B||E[0]===B[0]&&E[1]===B[1]);P?E&&B&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&B[0]===this._oldSelectionEnd[0]&&B[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,B,P)):this._oldHasSelection&&this._fireOnSelectionChange(E,B,P)}_fireOnSelectionChange(E,B,P){this._oldSelectionStart=E,this._oldSelectionEnd=B,this._oldHasSelection=P,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim((B=>this._handleTrim(B)))}_convertViewportColToCharacterIndex(E,B){let P=B;for(let N=0;B>=N;N++){const K=E.loadCell(N,this._workCell).getChars().length;this._workCell.getWidth()===0?P--:K>1&&B!==N&&(P+=K-1)}return P}setSelection(E,B,P){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,B],this._model.selectionStartLength=P,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,B,P=!0,N=!0){if(E[0]>=this._bufferService.cols)return;const K=this._bufferService.buffer,U=K.lines.get(E[1]);if(!U)return;const ee=K.translateBufferLineToString(E[1],!1);let V=this._convertViewportColToCharacterIndex(U,E[0]),de=V;const J=E[0]-V;let Y=0,M=0,I=0,D=0;if(ee.charAt(V)===" "){for(;V>0&&ee.charAt(V-1)===" ";)V--;for(;de<ee.length&&ee.charAt(de+1)===" ";)de++}else{let me=E[0],Se=E[0];U.getWidth(me)===0&&(Y++,me--),U.getWidth(Se)===2&&(M++,Se++);const Ee=U.getString(Se).length;for(Ee>1&&(D+=Ee-1,de+=Ee-1);me>0&&V>0&&!this._isCharWordSeparator(U.loadCell(me-1,this._workCell));){U.loadCell(me-1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,me--):X>1&&(I+=X-1,V-=X-1),V--,me--}for(;Se<U.length&&de+1<ee.length&&!this._isCharWordSeparator(U.loadCell(Se+1,this._workCell));){U.loadCell(Se+1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,Se++):X>1&&(D+=X-1,de+=X-1),de++,Se++}}de++;let W=V+J-Y+I,pe=Math.min(this._bufferService.cols,de-V+Y+M-I-D);if(B||ee.slice(V,de).trim()!==""){if(P&&W===0&&U.getCodePoint(0)!==32){const me=K.lines.get(E[1]-1);if(me&&U.isWrapped&&me.getCodePoint(this._bufferService.cols-1)!==32){const Se=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(Se){const Ee=this._bufferService.cols-Se.start;W-=Ee,pe+=Ee}}}if(N&&W+pe===this._bufferService.cols&&U.getCodePoint(this._bufferService.cols-1)!==32){const me=K.lines.get(E[1]+1);if(me!=null&&me.isWrapped&&me.getCodePoint(0)!==32){const Se=this._getWordAt([0,E[1]+1],!1,!1,!0);Se&&(pe+=Se.length)}}return{start:W,length:pe}}}_selectWordAt(E,B){const P=this._getWordAt(E,B);if(P){for(;P.start<0;)P.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[P.start,E[1]],this._model.selectionStartLength=P.length}}_selectToWordAt(E){const B=this._getWordAt(E,!0);if(B){let P=E[1];for(;B.start<0;)B.start+=this._bufferService.cols,P--;if(!this._model.areSelectionValuesReversed())for(;B.start+B.length>this._bufferService.cols;)B.length-=this._bufferService.cols,P++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?B.start:B.start+B.length,P]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){const B=this._bufferService.buffer.getWrappedRangeForLine(E),P={start:{x:0,y:B.first},end:{x:this._bufferService.cols-1,y:B.last}};this._model.selectionStart=[0,B.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(P,this._bufferService.cols)}};l.SelectionService=A=m([v(3,C.IBufferService),v(4,C.ICoreService),v(5,j.IMouseService),v(6,C.IOptionsService),v(7,j.IRenderService),v(8,j.ICoreBrowserService)],A)},4725:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const m=c(8343);l.ICharSizeService=(0,m.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),l.IMouseService=(0,m.createDecorator)("MouseService"),l.IRenderService=(0,m.createDecorator)("RenderService"),l.ISelectionService=(0,m.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,m.createDecorator)("ThemeService"),l.ILinkProviderService=(0,m.createDecorator)("LinkProviderService")},6731:function(b,l,c){var m=this&&this.__decorate||function(A,E,B,P){var N,K=arguments.length,U=K<3?E:P===null?P=Object.getOwnPropertyDescriptor(E,B):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(A,E,B,P);else for(var ee=A.length-1;ee>=0;ee--)(N=A[ee])&&(U=(K<3?N(U):K>3?N(E,B,U):N(E,B))||U);return K>3&&U&&Object.defineProperty(E,B,U),U},v=this&&this.__param||function(A,E){return function(B,P){E(B,P,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),y=c(8055),_=c(8460),j=c(844),w=c(2585),h=y.css.toColor("#ffffff"),p=y.css.toColor("#000000"),f=y.css.toColor("#ffffff"),g=y.css.toColor("#000000"),C={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const A=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let B=0;B<216;B++){const P=E[B/36%6|0],N=E[B/6%6|0],K=E[B%6];A.push({css:y.channels.toCss(P,N,K),rgba:y.channels.toRgba(P,N,K)})}for(let B=0;B<24;B++){const P=8+10*B;A.push({css:y.channels.toCss(P,P,P),rgba:y.channels.toRgba(P,P,P)})}return A})());let R=l.ThemeService=class extends j.Disposable{get colors(){return this._colors}constructor(A){super(),this._optionsService=A,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new _.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:p,cursor:f,cursorAccent:g,selectionForeground:void 0,selectionBackgroundTransparent:C,selectionBackgroundOpaque:y.color.blend(p,C),selectionInactiveBackgroundTransparent:C,selectionInactiveBackgroundOpaque:y.color.blend(p,C),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(A={}){const E=this._colors;if(E.foreground=z(A.foreground,h),E.background=z(A.background,p),E.cursor=z(A.cursor,f),E.cursorAccent=z(A.cursorAccent,g),E.selectionBackgroundTransparent=z(A.selectionBackground,C),E.selectionBackgroundOpaque=y.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=z(A.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=y.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=A.selectionForeground?z(A.selectionForeground,y.NULL_COLOR):void 0,E.selectionForeground===y.NULL_COLOR&&(E.selectionForeground=void 0),y.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=y.color.opacity(E.selectionBackgroundTransparent,.3)),y.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=y.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=l.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=z(A.black,l.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=z(A.red,l.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=z(A.green,l.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=z(A.yellow,l.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=z(A.blue,l.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=z(A.magenta,l.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=z(A.cyan,l.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=z(A.white,l.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=z(A.brightBlack,l.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=z(A.brightRed,l.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=z(A.brightGreen,l.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=z(A.brightYellow,l.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=z(A.brightBlue,l.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=z(A.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=z(A.brightCyan,l.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=z(A.brightWhite,l.DEFAULT_ANSI_COLORS[15]),A.extendedAnsi){const B=Math.min(E.ansi.length-16,A.extendedAnsi.length);for(let P=0;P<B;P++)E.ansi[P+16]=z(A.extendedAnsi[P],l.DEFAULT_ANSI_COLORS[P+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(A){this._restoreColor(A),this._onChangeColors.fire(this.colors)}_restoreColor(A){if(A!==void 0)switch(A){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[A]=this._restoreColors.ansi[A]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(A){A(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function z(A,E){if(A!==void 0)try{return y.css.toColor(A)}catch{}return E}l.ThemeService=R=m([v(0,w.IOptionsService)],R)},6349:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const m=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._maxLength=_,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(_){if(this._maxLength===_)return;const j=new Array(_);for(let w=0;w<Math.min(_,this.length);w++)j[w]=this._array[this._getCyclicIndex(w)];this._array=j,this._maxLength=_,this._startIndex=0}get length(){return this._length}set length(_){if(_>this._length)for(let j=this._length;j<_;j++)this._array[j]=void 0;this._length=_}get(_){return this._array[this._getCyclicIndex(_)]}set(_,j){this._array[this._getCyclicIndex(_)]=j}push(_){this._array[this._getCyclicIndex(this._length)]=_,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(_,j,...w){if(j){for(let h=_;h<this._length-j;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+j)];this._length-=j,this.onDeleteEmitter.fire({index:_,amount:j})}for(let h=this._length-1;h>=_;h--)this._array[this._getCyclicIndex(h+w.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<w.length;h++)this._array[this._getCyclicIndex(_+h)]=w[h];if(w.length&&this.onInsertEmitter.fire({index:_,amount:w.length}),this._length+w.length>this._maxLength){const h=this._length+w.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=w.length}trimStart(_){_>this._length&&(_=this._length),this._startIndex+=_,this._length-=_,this.onTrimEmitter.fire(_)}shiftElements(_,j,w){if(!(j<=0)){if(_<0||_>=this._length)throw new Error("start argument out of range");if(_+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let p=j-1;p>=0;p--)this.set(_+p+w,this.get(_+p));const h=_+j+w-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<j;h++)this.set(_+h+w,this.get(_+h))}}_getCyclicIndex(_){return(this._startIndex+_)%this._maxLength}}l.CircularList=d},1439:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function c(m,v=5){if(typeof m!="object")return m;const d=Array.isArray(m)?[]:{};for(const y in m)d[y]=v<=1?m[y]:m[y]&&c(m[y],v-1);return d}},8055:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let c=0,m=0,v=0,d=0;var y,_,j,w,h;function p(g){const C=g.toString(16);return C.length<2?"0"+C:C}function f(g,C){return g<C?(C+.05)/(g+.05):(g+.05)/(C+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(g){g.toCss=function(C,R,z,A){return A!==void 0?`#${p(C)}${p(R)}${p(z)}${p(A)}`:`#${p(C)}${p(R)}${p(z)}`},g.toRgba=function(C,R,z,A=255){return(C<<24|R<<16|z<<8|A)>>>0},g.toColor=function(C,R,z,A){return{css:g.toCss(C,R,z,A),rgba:g.toRgba(C,R,z,A)}}})(y||(l.channels=y={})),(function(g){function C(R,z){return d=Math.round(255*z),[c,m,v]=h.toChannels(R.rgba),{css:y.toCss(c,m,v,d),rgba:y.toRgba(c,m,v,d)}}g.blend=function(R,z){if(d=(255&z.rgba)/255,d===1)return{css:z.css,rgba:z.rgba};const A=z.rgba>>24&255,E=z.rgba>>16&255,B=z.rgba>>8&255,P=R.rgba>>24&255,N=R.rgba>>16&255,K=R.rgba>>8&255;return c=P+Math.round((A-P)*d),m=N+Math.round((E-N)*d),v=K+Math.round((B-K)*d),{css:y.toCss(c,m,v),rgba:y.toRgba(c,m,v)}},g.isOpaque=function(R){return(255&R.rgba)==255},g.ensureContrastRatio=function(R,z,A){const E=h.ensureContrastRatio(R.rgba,z.rgba,A);if(E)return y.toColor(E>>24&255,E>>16&255,E>>8&255)},g.opaque=function(R){const z=(255|R.rgba)>>>0;return[c,m,v]=h.toChannels(z),{css:y.toCss(c,m,v),rgba:z}},g.opacity=C,g.multiplyOpacity=function(R,z){return d=255&R.rgba,C(R,d*z/255)},g.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}})(_||(l.color=_={})),(function(g){let C,R;try{const z=document.createElement("canvas");z.width=1,z.height=1;const A=z.getContext("2d",{willReadFrequently:!0});A&&(C=A,C.globalCompositeOperation="copy",R=C.createLinearGradient(0,0,1,1))}catch{}g.toColor=function(z){if(z.match(/#[\da-f]{3,8}/i))switch(z.length){case 4:return c=parseInt(z.slice(1,2).repeat(2),16),m=parseInt(z.slice(2,3).repeat(2),16),v=parseInt(z.slice(3,4).repeat(2),16),y.toColor(c,m,v);case 5:return c=parseInt(z.slice(1,2).repeat(2),16),m=parseInt(z.slice(2,3).repeat(2),16),v=parseInt(z.slice(3,4).repeat(2),16),d=parseInt(z.slice(4,5).repeat(2),16),y.toColor(c,m,v,d);case 7:return{css:z,rgba:(parseInt(z.slice(1),16)<<8|255)>>>0};case 9:return{css:z,rgba:parseInt(z.slice(1),16)>>>0}}const A=z.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(A)return c=parseInt(A[1]),m=parseInt(A[2]),v=parseInt(A[3]),d=Math.round(255*(A[5]===void 0?1:parseFloat(A[5]))),y.toColor(c,m,v,d);if(!C||!R)throw new Error("css.toColor: Unsupported css format");if(C.fillStyle=R,C.fillStyle=z,typeof C.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(C.fillRect(0,0,1,1),[c,m,v,d]=C.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(c,m,v,d),css:z}}})(j||(l.css=j={})),(function(g){function C(R,z,A){const E=R/255,B=z/255,P=A/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.0722*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))}g.relativeLuminance=function(R){return C(R>>16&255,R>>8&255,255&R)},g.relativeLuminance2=C})(w||(l.rgb=w={})),(function(g){function C(z,A,E){const B=z>>24&255,P=z>>16&255,N=z>>8&255;let K=A>>24&255,U=A>>16&255,ee=A>>8&255,V=f(w.relativeLuminance2(K,U,ee),w.relativeLuminance2(B,P,N));for(;V<E&&(K>0||U>0||ee>0);)K-=Math.max(0,Math.ceil(.1*K)),U-=Math.max(0,Math.ceil(.1*U)),ee-=Math.max(0,Math.ceil(.1*ee)),V=f(w.relativeLuminance2(K,U,ee),w.relativeLuminance2(B,P,N));return(K<<24|U<<16|ee<<8|255)>>>0}function R(z,A,E){const B=z>>24&255,P=z>>16&255,N=z>>8&255;let K=A>>24&255,U=A>>16&255,ee=A>>8&255,V=f(w.relativeLuminance2(K,U,ee),w.relativeLuminance2(B,P,N));for(;V<E&&(K<255||U<255||ee<255);)K=Math.min(255,K+Math.ceil(.1*(255-K))),U=Math.min(255,U+Math.ceil(.1*(255-U))),ee=Math.min(255,ee+Math.ceil(.1*(255-ee))),V=f(w.relativeLuminance2(K,U,ee),w.relativeLuminance2(B,P,N));return(K<<24|U<<16|ee<<8|255)>>>0}g.blend=function(z,A){if(d=(255&A)/255,d===1)return A;const E=A>>24&255,B=A>>16&255,P=A>>8&255,N=z>>24&255,K=z>>16&255,U=z>>8&255;return c=N+Math.round((E-N)*d),m=K+Math.round((B-K)*d),v=U+Math.round((P-U)*d),y.toRgba(c,m,v)},g.ensureContrastRatio=function(z,A,E){const B=w.relativeLuminance(z>>8),P=w.relativeLuminance(A>>8);if(f(B,P)<E){if(P<B){const U=C(z,A,E),ee=f(B,w.relativeLuminance(U>>8));if(ee<E){const V=R(z,A,E);return ee>f(B,w.relativeLuminance(V>>8))?U:V}return U}const N=R(z,A,E),K=f(B,w.relativeLuminance(N>>8));if(K<E){const U=C(z,A,E);return K>f(B,w.relativeLuminance(U>>8))?N:U}return N}},g.reduceLuminance=C,g.increaseLuminance=R,g.toChannels=function(z){return[z>>24&255,z>>16&255,z>>8&255,255&z]}})(h||(l.rgba=h={})),l.toPaddedHex=p,l.contrastRatio=f},8969:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const m=c(844),v=c(2585),d=c(4348),y=c(7866),_=c(744),j=c(7302),w=c(6975),h=c(8460),p=c(1753),f=c(1480),g=c(7994),C=c(9282),R=c(5435),z=c(5981),A=c(2660);let E=!1;class B extends m.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event((N=>{var K;(K=this._onScrollApi)==null||K.fire(N.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(N){for(const K in N)this.optionsService.options[K]=N[K]}constructor(N){super(),this._windowsWrappingHeuristics=this.register(new m.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new j.OptionsService(N)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(_.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(g.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(A.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new R.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((K=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new z.WriteBuffer(((K,U)=>this._inputHandler.parse(K,U)))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(N,K){this._writeBuffer.write(N,K)}writeSync(N,K){this._logService.logLevel<=v.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(N,K)}input(N,K=!0){this.coreService.triggerDataEvent(N,K)}resize(N,K){isNaN(N)||isNaN(K)||(N=Math.max(N,_.MINIMUM_COLS),K=Math.max(K,_.MINIMUM_ROWS),this._bufferService.resize(N,K))}scroll(N,K=!1){this._bufferService.scroll(N,K)}scrollLines(N,K,U){this._bufferService.scrollLines(N,K,U)}scrollPages(N){this.scrollLines(N*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(N){const K=N-this._bufferService.buffer.ydisp;K!==0&&this.scrollLines(K)}registerEscHandler(N,K){return this._inputHandler.registerEscHandler(N,K)}registerDcsHandler(N,K){return this._inputHandler.registerDcsHandler(N,K)}registerCsiHandler(N,K){return this._inputHandler.registerCsiHandler(N,K)}registerOscHandler(N,K){return this._inputHandler.registerOscHandler(N,K)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let N=!1;const K=this.optionsService.rawOptions.windowsPty;K&&K.buildNumber!==void 0&&K.buildNumber!==void 0?N=K.backend==="conpty"&&K.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(N=!0),N?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const N=[];N.push(this.onLineFeed(C.updateWindowsModeWrappedState.bind(null,this._bufferService))),N.push(this.registerCsiHandler({final:"H"},(()=>((0,C.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,m.toDisposable)((()=>{for(const K of N)K.dispose()}))}}}l.CoreTerminal=B},8460:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===c)return void this._listeners.splice(m,1)}}})),this._event}fire(c,m){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(c,m){return c((v=>m.fire(v)))},l.runAndSubscribe=function(c,m){return m(void 0),c((v=>m(v)))}},5435:function(b,l,c){var m=this&&this.__decorate||function(Y,M,I,D){var W,pe=arguments.length,me=pe<3?M:D===null?D=Object.getOwnPropertyDescriptor(M,I):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(Y,M,I,D);else for(var Se=Y.length-1;Se>=0;Se--)(W=Y[Se])&&(me=(pe<3?W(me):pe>3?W(M,I,me):W(M,I))||me);return pe>3&&me&&Object.defineProperty(M,I,me),me},v=this&&this.__param||function(Y,M){return function(I,D){M(I,D,Y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const d=c(2584),y=c(7116),_=c(2015),j=c(844),w=c(482),h=c(8437),p=c(8460),f=c(643),g=c(511),C=c(3734),R=c(2585),z=c(1480),A=c(6242),E=c(6351),B=c(5941),P={"(":0,")":1,"*":2,"+":3,"-":1,".":2},N=131072;function K(Y,M){if(Y>24)return M.setWinLines||!1;switch(Y){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var U;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let ee=0;class V extends j.Disposable{getAttrData(){return this._curAttrData}constructor(M,I,D,W,pe,me,Se,Ee,X=new _.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=I,this._coreService=D,this._logService=W,this._optionsService=pe,this._oscLinkService=me,this._coreMouseService=Se,this._unicodeService=Ee,this._parser=X,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new g.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new de(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((F=>this._activeBuffer=F.activeBuffer))),this._parser.setCsiHandlerFallback(((F,ve)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:ve.toArray()})})),this._parser.setEscHandlerFallback((F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})})),this._parser.setExecuteHandlerFallback((F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})})),this._parser.setOscHandlerFallback(((F,ve,se)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:ve,data:se})})),this._parser.setDcsHandlerFallback(((F,ve,se)=>{ve==="HOOK"&&(se=se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:ve,payload:se})})),this._parser.setPrintHandler(((F,ve,se)=>this.print(F,ve,se))),this._parser.registerCsiHandler({final:"@"},(F=>this.insertChars(F))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(F=>this.scrollLeft(F))),this._parser.registerCsiHandler({final:"A"},(F=>this.cursorUp(F))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(F=>this.scrollRight(F))),this._parser.registerCsiHandler({final:"B"},(F=>this.cursorDown(F))),this._parser.registerCsiHandler({final:"C"},(F=>this.cursorForward(F))),this._parser.registerCsiHandler({final:"D"},(F=>this.cursorBackward(F))),this._parser.registerCsiHandler({final:"E"},(F=>this.cursorNextLine(F))),this._parser.registerCsiHandler({final:"F"},(F=>this.cursorPrecedingLine(F))),this._parser.registerCsiHandler({final:"G"},(F=>this.cursorCharAbsolute(F))),this._parser.registerCsiHandler({final:"H"},(F=>this.cursorPosition(F))),this._parser.registerCsiHandler({final:"I"},(F=>this.cursorForwardTab(F))),this._parser.registerCsiHandler({final:"J"},(F=>this.eraseInDisplay(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(F=>this.eraseInDisplay(F,!0))),this._parser.registerCsiHandler({final:"K"},(F=>this.eraseInLine(F,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(F=>this.eraseInLine(F,!0))),this._parser.registerCsiHandler({final:"L"},(F=>this.insertLines(F))),this._parser.registerCsiHandler({final:"M"},(F=>this.deleteLines(F))),this._parser.registerCsiHandler({final:"P"},(F=>this.deleteChars(F))),this._parser.registerCsiHandler({final:"S"},(F=>this.scrollUp(F))),this._parser.registerCsiHandler({final:"T"},(F=>this.scrollDown(F))),this._parser.registerCsiHandler({final:"X"},(F=>this.eraseChars(F))),this._parser.registerCsiHandler({final:"Z"},(F=>this.cursorBackwardTab(F))),this._parser.registerCsiHandler({final:"`"},(F=>this.charPosAbsolute(F))),this._parser.registerCsiHandler({final:"a"},(F=>this.hPositionRelative(F))),this._parser.registerCsiHandler({final:"b"},(F=>this.repeatPrecedingCharacter(F))),this._parser.registerCsiHandler({final:"c"},(F=>this.sendDeviceAttributesPrimary(F))),this._parser.registerCsiHandler({prefix:">",final:"c"},(F=>this.sendDeviceAttributesSecondary(F))),this._parser.registerCsiHandler({final:"d"},(F=>this.linePosAbsolute(F))),this._parser.registerCsiHandler({final:"e"},(F=>this.vPositionRelative(F))),this._parser.registerCsiHandler({final:"f"},(F=>this.hVPosition(F))),this._parser.registerCsiHandler({final:"g"},(F=>this.tabClear(F))),this._parser.registerCsiHandler({final:"h"},(F=>this.setMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(F=>this.setModePrivate(F))),this._parser.registerCsiHandler({final:"l"},(F=>this.resetMode(F))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(F=>this.resetModePrivate(F))),this._parser.registerCsiHandler({final:"m"},(F=>this.charAttributes(F))),this._parser.registerCsiHandler({final:"n"},(F=>this.deviceStatus(F))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(F=>this.deviceStatusPrivate(F))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(F=>this.softReset(F))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(F=>this.setCursorStyle(F))),this._parser.registerCsiHandler({final:"r"},(F=>this.setScrollRegion(F))),this._parser.registerCsiHandler({final:"s"},(F=>this.saveCursor(F))),this._parser.registerCsiHandler({final:"t"},(F=>this.windowOptions(F))),this._parser.registerCsiHandler({final:"u"},(F=>this.restoreCursor(F))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(F=>this.insertColumns(F))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(F=>this.deleteColumns(F))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(F=>this.selectProtected(F))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(F=>this.requestMode(F,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(F=>this.requestMode(F,!1))),this._parser.setExecuteHandler(d.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(d.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(d.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(d.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(d.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(d.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(d.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(d.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(d.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new A.OscHandler((F=>(this.setTitle(F),this.setIconName(F),!0)))),this._parser.registerOscHandler(1,new A.OscHandler((F=>this.setIconName(F)))),this._parser.registerOscHandler(2,new A.OscHandler((F=>this.setTitle(F)))),this._parser.registerOscHandler(4,new A.OscHandler((F=>this.setOrReportIndexedColor(F)))),this._parser.registerOscHandler(8,new A.OscHandler((F=>this.setHyperlink(F)))),this._parser.registerOscHandler(10,new A.OscHandler((F=>this.setOrReportFgColor(F)))),this._parser.registerOscHandler(11,new A.OscHandler((F=>this.setOrReportBgColor(F)))),this._parser.registerOscHandler(12,new A.OscHandler((F=>this.setOrReportCursorColor(F)))),this._parser.registerOscHandler(104,new A.OscHandler((F=>this.restoreIndexedColor(F)))),this._parser.registerOscHandler(110,new A.OscHandler((F=>this.restoreFgColor(F)))),this._parser.registerOscHandler(111,new A.OscHandler((F=>this.restoreBgColor(F)))),this._parser.registerOscHandler(112,new A.OscHandler((F=>this.restoreCursorColor(F)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const F in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},(()=>this.selectCharset("("+F))),this._parser.registerEscHandler({intermediates:")",final:F},(()=>this.selectCharset(")"+F))),this._parser.registerEscHandler({intermediates:"*",final:F},(()=>this.selectCharset("*"+F))),this._parser.registerEscHandler({intermediates:"+",final:F},(()=>this.selectCharset("+"+F))),this._parser.registerEscHandler({intermediates:"-",final:F},(()=>this.selectCharset("-"+F))),this._parser.registerEscHandler({intermediates:".",final:F},(()=>this.selectCharset("."+F))),this._parser.registerEscHandler({intermediates:"/",final:F},(()=>this.selectCharset("/"+F)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((F=>(this._logService.error("Parsing error: ",F),F))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler(((F,ve)=>this.requestStatusString(F,ve))))}_preserveStack(M,I,D,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=D,this._parseStack.position=W}_logSlowResolvingAsync(M){this._logService.logLevel<=R.LogLevelEnum.WARN&&Promise.race([M,new Promise(((I,D)=>setTimeout((()=>D("#SLOW_TIMEOUT")),5e3)))]).catch((I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,I){let D,W=this._activeBuffer.x,pe=this._activeBuffer.y,me=0;const Se=this._parseStack.paused;if(Se){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(D),D;W=this._parseStack.cursorStartX,pe=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>N&&(me=this._parseStack.position+N)}if(this._logService.logLevel<=R.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,(F=>String.fromCharCode(F))).join("")}"`),typeof M=="string"?M.split("").map((F=>F.charCodeAt(0))):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<N&&(this._parseBuffer=new Uint32Array(Math.min(M.length,N))),Se||this._dirtyRowTracker.clearRange(),M.length>N)for(let F=me;F<M.length;F+=N){const ve=F+N<M.length?F+N:M.length,se=typeof M=="string"?this._stringDecoder.decode(M.substring(F,ve),this._parseBuffer):this._utf8Decoder.decode(M.subarray(F,ve),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,se))return this._preserveStack(W,pe,se,F),this._logSlowResolvingAsync(D),D}else if(!Se){const F=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,F))return this._preserveStack(W,pe,F,0),this._logSlowResolvingAsync(D),D}this._activeBuffer.x===W&&this._activeBuffer.y===pe||this._onCursorMove.fire();const Ee=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),X=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);X<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(X,this._bufferService.rows-1),Math.min(Ee,this._bufferService.rows-1))}print(M,I,D){let W,pe;const me=this._charsetService.charset,Se=this._optionsService.rawOptions.screenReaderMode,Ee=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,ve=this._curAttrData;let se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-I>0&&se.getWidth(this._activeBuffer.x-1)===2&&se.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ve);let Me=this._parser.precedingJoinState;for(let Z=I;Z<D;++Z){if(W=M[Z],W<127&&me){const Oe=me[String.fromCharCode(W)];Oe&&(W=Oe.charCodeAt(0))}const ke=this._unicodeService.charProperties(W,Me);pe=z.UnicodeService.extractWidth(ke);const he=z.UnicodeService.extractShouldJoin(ke),Ie=he?z.UnicodeService.extractWidth(Me):0;if(Me=ke,Se&&this._onA11yChar.fire((0,w.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+pe-Ie>Ee){if(X){const Oe=se;let $e=this._activeBuffer.x-Ie;for(this._activeBuffer.x=Ie,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ie>0&&se instanceof h.BufferLine&&se.copyCellsFrom(Oe,$e,0,Ie,!1);$e<Ee;)Oe.setCellFromCodepoint($e++,0,1,ve)}else if(this._activeBuffer.x=Ee-1,pe===2)continue}if(he&&this._activeBuffer.x){const Oe=se.getWidth(this._activeBuffer.x-1)?1:2;se.addCodepointToCell(this._activeBuffer.x-Oe,W,pe);for(let $e=pe-Ie;--$e>=0;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,ve)}else if(F&&(se.insertCells(this._activeBuffer.x,pe-Ie,this._activeBuffer.getNullCell(ve)),se.getWidth(Ee-1)===2&&se.setCellFromCodepoint(Ee-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,ve)),se.setCellFromCodepoint(this._activeBuffer.x++,W,pe,ve),pe>0)for(;--pe;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,ve)}this._parser.precedingJoinState=Me,this._activeBuffer.x<Ee&&D-I>0&&se.getWidth(this._activeBuffer.x)===0&&!se.hasContent(this._activeBuffer.x)&&se.setCellFromCodepoint(this._activeBuffer.x,0,1,ve),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,I){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,I):this._parser.registerCsiHandler(M,(D=>!K(D.params[0],this._optionsService.rawOptions.windowOptions)||I(D)))}registerDcsHandler(M,I){return this._parser.registerDcsHandler(M,new E.DcsHandler(I))}registerEscHandler(M,I){return this._parser.registerEscHandler(M,I)}registerOscHandler(M,I){return this._parser.registerOscHandler(M,new A.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=M,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+I)}cursorUp(M){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const I=M.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const I=M.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,I,D,W=!1,pe=!1){const me=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);me.replaceCells(I,D,this._activeBuffer.getNullCell(this._eraseAttrData()),pe),W&&(me.isWrapped=!1)}_resetBufferLine(M,I=!1){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);D&&(D.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),D.isWrapped=!1)}eraseInDisplay(M,I=!1){let D;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);D<this._bufferService.rows;D++)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(D);break;case 1:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(D+1).isWrapped=!1);D--;)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(D=this._bufferService.rows,this._dirtyRowTracker.markDirty(D-1);D--;)this._resetBufferLine(D,I);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(M,I=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,pe=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;I--;)this._activeBuffer.lines.splice(pe-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;I--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const I=this._parser.precedingJoinState;if(!I)return!0;const D=M.params[0]||1,W=z.UnicodeService.extractWidth(I),pe=this._activeBuffer.x-W,me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(pe),Se=new Uint32Array(me.length*D);let Ee=0;for(let F=0;F<me.length;){const ve=me.codePointAt(F)||0;Se[Ee++]=ve,F+=ve>65535?2:1}let X=Ee;for(let F=1;F<D;++F)Se.copyWithin(X,0,Ee),X+=Ee;return this.print(Se,0,X),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,I){const D=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:pe}=this._coreMouseService,me=this._coreService,{buffers:Se,cols:Ee}=this._bufferService,{active:X,alt:F}=Se,ve=this._optionsService.rawOptions,se=he=>he?1:2,Me=M.params[0];return Z=Me,ke=I?Me===2?4:Me===4?se(me.modes.insertMode):Me===12?3:Me===20?se(ve.convertEol):0:Me===1?se(D.applicationCursorKeys):Me===3?ve.windowOptions.setWinLines?Ee===80?2:Ee===132?1:0:0:Me===6?se(D.origin):Me===7?se(D.wraparound):Me===8?3:Me===9?se(W==="X10"):Me===12?se(ve.cursorBlink):Me===25?se(!me.isCursorHidden):Me===45?se(D.reverseWraparound):Me===66?se(D.applicationKeypad):Me===67?4:Me===1e3?se(W==="VT200"):Me===1002?se(W==="DRAG"):Me===1003?se(W==="ANY"):Me===1004?se(D.sendFocus):Me===1005?4:Me===1006?se(pe==="SGR"):Me===1015?4:Me===1016?se(pe==="SGR_PIXELS"):Me===1048?1:Me===47||Me===1047||Me===1049?se(X===F):Me===2004?se(D.bracketedPasteMode):0,me.triggerDataEvent(`${d.C0.ESC}[${I?"":"?"}${Z};${ke}$y`),!0;var Z,ke}_updateAttrColor(M,I,D,W,pe){return I===2?(M|=50331648,M&=-16777216,M|=C.AttributeData.fromColorRGB([D,W,pe])):I===5&&(M&=-50331904,M|=33554432|255&D),M}_extractColor(M,I,D){const W=[0,0,-1,0,0,0];let pe=0,me=0;do{if(W[me+pe]=M.params[I+me],M.hasSubParams(I+me)){const Se=M.getSubParams(I+me);let Ee=0;do W[1]===5&&(pe=1),W[me+Ee+1+pe]=Se[Ee];while(++Ee<Se.length&&Ee+me+1+pe<W.length);break}if(W[1]===5&&me+pe>=2||W[1]===2&&me+pe>=5)break;W[1]&&(pe=1)}while(++me+I<M.length&&me+pe<W.length);for(let Se=2;Se<W.length;++Se)W[Se]===-1&&(W[Se]=0);switch(W[0]){case 38:D.fg=this._updateAttrColor(D.fg,W[1],W[3],W[4],W[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,W[1],W[3],W[4],W[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,W[1],W[3],W[4],W[5])}return me}_processUnderline(M,I){I.extended=I.extended.clone(),(!~M||M>5)&&(M=1),I.extended.underlineStyle=M,I.fg|=268435456,M===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(M){M.fg=h.DEFAULT_ATTR_DATA.fg,M.bg=h.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=M.length;let D;const W=this._curAttrData;for(let pe=0;pe<I;pe++)D=M.params[pe],D>=30&&D<=37?(W.fg&=-50331904,W.fg|=16777216|D-30):D>=40&&D<=47?(W.bg&=-50331904,W.bg|=16777216|D-40):D>=90&&D<=97?(W.fg&=-50331904,W.fg|=16777224|D-90):D>=100&&D<=107?(W.bg&=-50331904,W.bg|=16777224|D-100):D===0?this._processSGR0(W):D===1?W.fg|=134217728:D===3?W.bg|=67108864:D===4?(W.fg|=268435456,this._processUnderline(M.hasSubParams(pe)?M.getSubParams(pe)[0]:1,W)):D===5?W.fg|=536870912:D===7?W.fg|=67108864:D===8?W.fg|=1073741824:D===9?W.fg|=2147483648:D===2?W.bg|=134217728:D===21?this._processUnderline(2,W):D===22?(W.fg&=-134217729,W.bg&=-134217729):D===23?W.bg&=-67108865:D===24?(W.fg&=-268435457,this._processUnderline(0,W)):D===25?W.fg&=-536870913:D===27?W.fg&=-67108865:D===28?W.fg&=-1073741825:D===29?W.fg&=2147483647:D===39?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):D===49?(W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):D===38||D===48||D===58?pe+=this._extractColor(M,pe,W):D===53?W.bg|=1073741824:D===55?W.bg&=-1073741825:D===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):D===100?(W.fg&=-67108864,W.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",D);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${I};${D}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const I=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${I};${D}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const I=M.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const D=I%2==1;return this._optionsService.options.cursorBlink=D,!0}setScrollRegion(M){const I=M.params[0]||1;let D;return(M.length<2||(D=M.params[1])>this._bufferService.rows||D===0)&&(D=this._bufferService.rows),D>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=D-1,this._setCursor(0,0)),!0}windowOptions(M){if(!K(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const I=[],D=M.split(";");for(;D.length>1;){const W=D.shift(),pe=D.shift();if(/^\d+$/.exec(W)){const me=parseInt(W);if(J(me))if(pe==="?")I.push({type:0,index:me});else{const Se=(0,B.parseColor)(pe);Se&&I.push({type:1,index:me,color:Se})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(M){const I=M.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(M,I){this._getCurrentLinkId()&&this._finishHyperlink();const D=M.split(":");let W;const pe=D.findIndex((me=>me.startsWith("id=")));return pe!==-1&&(W=D[pe].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,I){const D=M.split(";");for(let W=0;W<D.length&&!(I>=this._specialColors.length);++W,++I)if(D[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const pe=(0,B.parseColor)(D[W]);pe&&this._onColor.fire([{type:1,index:this._specialColors[I],color:pe}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const I=[],D=M.split(";");for(let W=0;W<D.length;++W)if(/^\d+$/.exec(D[W])){const pe=parseInt(D[W]);J(pe)&&I.push({type:2,index:pe})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(P[M[0]],y.CHARSETS[M[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new g.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const D=this._activeBuffer.ybase+this._activeBuffer.y+I,W=this._activeBuffer.lines.get(D);W&&(W.fill(M),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,I){const D=this._bufferService.buffer,W=this._optionsService.rawOptions;return(pe=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${pe}${d.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${D.scrollTop+1};${D.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,I){this._dirtyRowTracker.markRangeDirty(M,I)}}l.InputHandler=V;let de=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,M){Y>M&&(ee=Y,Y=M,M=ee),Y<this.start&&(this.start=Y),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function J(Y){return 0<=Y&&Y<256}de=m([v(0,R.IBufferService)],de)},844:(b,l)=>{function c(m){for(const v of m)v.dispose();m.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const v=this._disposables.indexOf(m);v!==-1&&this._disposables.splice(v,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var v;this._isDisposed||m===this._value||((v=this._value)==null||v.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)==null||m.dispose(),this._value=void 0}},l.toDisposable=function(m){return{dispose:m}},l.disposeArray=c,l.getDisposeArrayDisposable=function(m){return{dispose:()=>c(m)}}},1505:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,y){this._data[v]||(this._data[v]={}),this._data[v][d]=y}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}l.TwoKeyMap=c,l.FourKeyMap=class{constructor(){this._data=new c}set(m,v,d,y,_){this._data.get(m,v)||this._data.set(m,v,new c),this._data.get(m,v).set(d,y,_)}get(m,v,d,y){var _;return(_=this._data.get(m,v))==null?void 0:_.get(d,y)}clear(){this._data.clear()}}},6114:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const c=l.isNode?"node":navigator.userAgent,m=l.isNode?"node":navigator.platform;l.isFirefox=c.includes("Firefox"),l.isLegacyEdge=c.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(c),l.getSafariVersion=function(){if(!l.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),l.isIpad=m==="iPad",l.isIphone=m==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),l.isLinux=m.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(c)},6106:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let c=0;l.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(c=this._search(this._getKey(m)),this._array.splice(c,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;const v=this._getKey(m);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===m)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(m){if(this._array.length!==0&&(c=this._search(m),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===m))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===m)}forEachByKey(m,v){if(this._array.length!==0&&(c=this._search(m),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===m))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===m)}values(){return[...this._array].values()}_search(m){let v=0,d=this._array.length-1;for(;d>=v;){let y=v+d>>1;const _=this._getKey(this._array[y]);if(_>m)d=y-1;else{if(!(_<m)){for(;y>0&&this._getKey(this._array[y-1])===m;)y--;return y}v=y+1}}return v}}},7226:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const m=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let j=0,w=0,h=_.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(j=Date.now(),this._tasks[this._i]()||this._i++,j=Math.max(1,Date.now()-j),w=Math.max(j,w),p=_.timeRemaining(),1.5*w>p)return h-j<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-j))}ms`),void this._start();h=p}this.clear()}}class d extends v{_requestCallback(_){return setTimeout((()=>_(this._createDeadline(16))))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const j=Date.now()+_;return{timeRemaining:()=>Math.max(0,j-Date.now())}}}l.PriorityTaskQueue=d,l.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:d,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const m=c(643);l.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),y=d==null?void 0:d.get(v.cols-1),_=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);_&&y&&(_.isWrapped=y[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&y[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=c;class m{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,y=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=y}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=m},9092:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const m=c(6349),v=c(7226),d=c(3734),y=c(8437),_=c(4634),j=c(511),w=c(643),h=c(4863),p=c(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(f,g,C){this._hasScrollback=f,this._optionsService=g,this._bufferService=C,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=j.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=j.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,g){return new y.BufferLine(this._bufferService.cols,this.getNullCell(f),g)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;const g=f+this._optionsService.rawOptions.scrollback;return g>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:g}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=y.DEFAULT_ATTR_DATA);let g=this._rows;for(;g--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,g){const C=this.getNullCell(y.DEFAULT_ATTR_DATA);let R=0;const z=this._getCorrectBufferLength(g);if(z>this.lines.maxLength&&(this.lines.maxLength=z),this.lines.length>0){if(this._cols<f)for(let E=0;E<this.lines.length;E++)R+=+this.lines.get(E).resize(f,C);let A=0;if(this._rows<g)for(let E=this._rows;E<g;E++)this.lines.length<g+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(f,C)):this.ybase>0&&this.lines.length<=this.ybase+this.y+A+1?(this.ybase--,A++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(f,C)));else for(let E=this._rows;E>g;E--)this.lines.length>g+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(z<this.lines.maxLength){const E=this.lines.length-z;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=z}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,g-1),A&&(this.y+=A),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=g-1,this._isReflowEnabled&&(this._reflow(f,g),this._cols>f))for(let A=0;A<this.lines.length;A++)R+=+this.lines.get(A).resize(f,C);this._cols=f,this._rows=g,this._memoryCleanupQueue.clear(),R>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let g=0;for(;this._memoryCleanupPosition<this.lines.length;)if(g+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),g>100)return!0;return f}get _isReflowEnabled(){const f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,g){this._cols!==f&&(f>this._cols?this._reflowLarger(f,g):this._reflowSmaller(f,g))}_reflowLarger(f,g){const C=(0,_.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(C.length>0){const R=(0,_.reflowLargerCreateNewLayout)(this.lines,C);(0,_.reflowLargerApplyNewLayout)(this.lines,R.layout),this._reflowLargerAdjustViewport(f,g,R.countRemoved)}}_reflowLargerAdjustViewport(f,g,C){const R=this.getNullCell(y.DEFAULT_ATTR_DATA);let z=C;for(;z-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<g&&this.lines.push(new y.BufferLine(f,R))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-C,0)}_reflowSmaller(f,g){const C=this.getNullCell(y.DEFAULT_ATTR_DATA),R=[];let z=0;for(let A=this.lines.length-1;A>=0;A--){let E=this.lines.get(A);if(!E||!E.isWrapped&&E.getTrimmedLength()<=f)continue;const B=[E];for(;E.isWrapped&&A>0;)E=this.lines.get(--A),B.unshift(E);const P=this.ybase+this.y;if(P>=A&&P<A+B.length)continue;const N=B[B.length-1].getTrimmedLength(),K=(0,_.reflowSmallerGetNewLineLengths)(B,this._cols,f),U=K.length-B.length;let ee;ee=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);const V=[];for(let D=0;D<U;D++){const W=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);V.push(W)}V.length>0&&(R.push({start:A+B.length+z,newLines:V}),z+=V.length),B.push(...V);let de=K.length-1,J=K[de];J===0&&(de--,J=K[de]);let Y=B.length-U-1,M=N;for(;Y>=0;){const D=Math.min(M,J);if(B[de]===void 0)break;if(B[de].copyCellsFrom(B[Y],M-D,J-D,D,!0),J-=D,J===0&&(de--,J=K[de]),M-=D,M===0){Y--;const W=Math.max(Y,0);M=(0,_.getWrappedLineTrimmedLength)(B,W,this._cols)}}for(let D=0;D<B.length;D++)K[D]<f&&B[D].setCell(K[D],C);let I=U-ee;for(;I-- >0;)this.ybase===0?this.y<g-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+z)-g&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+g-1)}if(R.length>0){const A=[],E=[];for(let de=0;de<this.lines.length;de++)E.push(this.lines.get(de));const B=this.lines.length;let P=B-1,N=0,K=R[N];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+z);let U=0;for(let de=Math.min(this.lines.maxLength-1,B+z-1);de>=0;de--)if(K&&K.start>P+U){for(let J=K.newLines.length-1;J>=0;J--)this.lines.set(de--,K.newLines[J]);de++,A.push({index:P+1,amount:K.newLines.length}),U+=K.newLines.length,K=R[++N]}else this.lines.set(de,E[P--]);let ee=0;for(let de=A.length-1;de>=0;de--)A[de].index+=ee,this.lines.onInsertEmitter.fire(A[de]),ee+=A[de].amount;const V=Math.max(0,B+z-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(f,g,C=0,R){const z=this.lines.get(f);return z?z.translateToString(g,C,R):""}getWrappedRangeForLine(f){let g=f,C=f;for(;g>0&&this.lines.get(g).isWrapped;)g--;for(;C+1<this.lines.length&&this.lines.get(C+1).isWrapped;)C++;return{first:g,last:C}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].line===f&&(this.markers[g].dispose(),this.markers.splice(g--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){const g=new h.Marker(f);return this.markers.push(g),g.register(this.lines.onTrim((C=>{g.line-=C,g.line<0&&g.dispose()}))),g.register(this.lines.onInsert((C=>{g.line>=C.index&&(g.line+=C.amount)}))),g.register(this.lines.onDelete((C=>{g.line>=C.index&&g.line<C.index+C.amount&&g.dispose(),g.line>C.index&&(g.line-=C.amount)}))),g.register(g.onDispose((()=>this._removeMarker(g)))),g}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const m=c(3734),v=c(511),d=c(643),y=c(482);l.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);let _=0;class j{constructor(h,p,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const g=p||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let C=0;C<h;++C)this.setCell(C,g);this.length=h}get(h){const p=this._data[3*h+0],f=2097151&p;return[this._data[3*h+1],2097152&p?this._combined[h]:f?(0,y.stringFromCodePoint)(f):"",p>>22,2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):f]}set(h,p){this._data[3*h+1]=p[d.CHAR_DATA_ATTR_INDEX],p[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=p[1],this._data[3*h+0]=2097152|h|p[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&p}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const p=this._data[3*h+0];return 2097152&p?this._combined[h]:2097151&p?(0,y.stringFromCodePoint)(2097151&p):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,p){return _=3*h,p.content=this._data[_+0],p.fg=this._data[_+1],p.bg=this._data[_+2],2097152&p.content&&(p.combinedData=this._combined[h]),268435456&p.bg&&(p.extended=this._extendedAttrs[h]),p}setCell(h,p){2097152&p.content&&(this._combined[h]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[h]=p.extended),this._data[3*h+0]=p.content,this._data[3*h+1]=p.fg,this._data[3*h+2]=p.bg}setCellFromCodepoint(h,p,f,g){268435456&g.bg&&(this._extendedAttrs[h]=g.extended),this._data[3*h+0]=p|f<<22,this._data[3*h+1]=g.fg,this._data[3*h+2]=g.bg}addCodepointToCell(h,p,f){let g=this._data[3*h+0];2097152&g?this._combined[h]+=(0,y.stringFromCodePoint)(p):2097151&g?(this._combined[h]=(0,y.stringFromCodePoint)(2097151&g)+(0,y.stringFromCodePoint)(p),g&=-2097152,g|=2097152):g=p|4194304,f&&(g&=-12582913,g|=f<<22),this._data[3*h+0]=g}insertCells(h,p,f){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length-h){const g=new v.CellData;for(let C=this.length-h-p-1;C>=0;--C)this.setCell(h+p+C,this.loadCell(h+C,g));for(let C=0;C<p;++C)this.setCell(h+C,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,f)}deleteCells(h,p,f){if(h%=this.length,p<this.length-h){const g=new v.CellData;for(let C=0;C<this.length-h-p;++C)this.setCell(h+C,this.loadCell(h+p+C,g));for(let C=this.length-p;C<this.length;++C)this.setCell(C,f)}else for(let g=h;g<this.length;++g)this.setCell(g,f);h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodepoint(h,0,1,f)}replaceCells(h,p,f,g=!1){if(g)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.isProtected(h)||this.setCell(h,f),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,f),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,f);h<p&&h<this.length;)this.setCell(h++,f)}resize(h,p){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const f=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{const g=new Uint32Array(f);g.set(this._data),this._data=g}for(let g=this.length;g<h;++g)this.setCell(g,p)}else{this._data=this._data.subarray(0,f);const g=Object.keys(this._combined);for(let R=0;R<g.length;R++){const z=parseInt(g[R],10);z>=h&&delete this._combined[z]}const C=Object.keys(this._extendedAttrs);for(let R=0;R<C.length;R++){const z=parseInt(C[R],10);z>=h&&delete this._extendedAttrs[z]}}return this.length=h,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,p=!1){if(p)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,h);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const p in h._combined)this._combined[p]=h._combined[p];this._extendedAttrs={};for(const p in h._extendedAttrs)this._extendedAttrs[p]=h._extendedAttrs[p];this.isWrapped=h.isWrapped}clone(){const h=new j(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const p in this._combined)h._combined[p]=this._combined[p];for(const p in this._extendedAttrs)h._extendedAttrs[p]=this._extendedAttrs[p];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,p,f,g,C){const R=h._data;if(C)for(let A=g-1;A>=0;A--){for(let E=0;E<3;E++)this._data[3*(f+A)+E]=R[3*(p+A)+E];268435456&R[3*(p+A)+2]&&(this._extendedAttrs[f+A]=h._extendedAttrs[p+A])}else for(let A=0;A<g;A++){for(let E=0;E<3;E++)this._data[3*(f+A)+E]=R[3*(p+A)+E];268435456&R[3*(p+A)+2]&&(this._extendedAttrs[f+A]=h._extendedAttrs[p+A])}const z=Object.keys(h._combined);for(let A=0;A<z.length;A++){const E=parseInt(z[A],10);E>=p&&(this._combined[E-p+f]=h._combined[E])}}translateToString(h,p,f,g){p=p??0,f=f??this.length,h&&(f=Math.min(f,this.getTrimmedLength())),g&&(g.length=0);let C="";for(;p<f;){const R=this._data[3*p+0],z=2097151&R,A=2097152&R?this._combined[p]:z?(0,y.stringFromCodePoint)(z):d.WHITESPACE_CELL_CHAR;if(C+=A,g)for(let E=0;E<A.length;++E)g.push(p);p+=R>>22||1}return g&&g.push(p),C}}l.BufferLine=j},4841:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(c,m){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return m*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(b,l)=>{function c(m,v,d){if(v===m.length-1)return m[v].getTrimmedLength();const y=!m[v].hasContent(d-1)&&m[v].getWidth(d-1)===1,_=m[v+1].getWidth(0)===2;return y&&_?d-1:d}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(m,v,d,y,_){const j=[];for(let w=0;w<m.length-1;w++){let h=w,p=m.get(++h);if(!p.isWrapped)continue;const f=[m.get(w)];for(;h<m.length&&p.isWrapped;)f.push(p),p=m.get(++h);if(y>=w&&y<h){w+=f.length-1;continue}let g=0,C=c(f,g,v),R=1,z=0;for(;R<f.length;){const E=c(f,R,v),B=E-z,P=d-C,N=Math.min(B,P);f[g].copyCellsFrom(f[R],z,C,N,!1),C+=N,C===d&&(g++,C=0),z+=N,z===E&&(R++,z=0),C===0&&g!==0&&f[g-1].getWidth(d-1)===2&&(f[g].copyCellsFrom(f[g-1],d-1,C++,1,!1),f[g-1].setCell(d-1,_))}f[g].replaceCells(C,d,_);let A=0;for(let E=f.length-1;E>0&&(E>g||f[E].getTrimmedLength()===0);E--)A++;A>0&&(j.push(w+f.length-A),j.push(A)),w+=f.length-1}return j},l.reflowLargerCreateNewLayout=function(m,v){const d=[];let y=0,_=v[y],j=0;for(let w=0;w<m.length;w++)if(_===w){const h=v[++y];m.onDeleteEmitter.fire({index:w-j,amount:h}),w+=h-1,j+=h,_=v[++y]}else d.push(w);return{layout:d,countRemoved:j}},l.reflowLargerApplyNewLayout=function(m,v){const d=[];for(let y=0;y<v.length;y++)d.push(m.get(v[y]));for(let y=0;y<d.length;y++)m.set(y,d[y]);m.length=v.length},l.reflowSmallerGetNewLineLengths=function(m,v,d){const y=[],_=m.map(((p,f)=>c(m,f,v))).reduce(((p,f)=>p+f));let j=0,w=0,h=0;for(;h<_;){if(_-h<d){y.push(_-h);break}j+=d;const p=c(m,w,v);j>p&&(j-=p,w++);const f=m[w].getWidth(j-1)===2;f&&j--;const g=f?d-1:d;y.push(g),h+=g}return y},l.getWrappedLineTrimmedLength=c},5295:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const m=c(8460),v=c(844),d=c(9092);class y extends v.Disposable{constructor(j,w){super(),this._optionsService=j,this._bufferService=w,this._onBufferActivate=this.register(new m.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(j){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(j),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(j,w){this._normal.resize(j,w),this._alt.resize(j,w),this.setupTabStops(j)}setupTabStops(j){this._normal.setupTabStops(j),this._alt.setupTabStops(j)}}l.BufferSet=y},511:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const m=c(482),v=c(643),d=c(3734);class y extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(j){const w=new y;return w.setFromCharData(j),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(j){this.fg=j[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(j[v.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(j[v.CHAR_DATA_CHAR_INDEX].length===2){const h=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const p=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(h-55296)+p-56320+65536|j[v.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=j[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|j[v.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=j[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|j[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=y},643:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const m=c(8460),v=c(844);class d{get id(){return this._id}constructor(_){this.line=_,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(_){return this._disposables.push(_),_}}l.Marker=d,d._nextId=1},7116:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(b,l)=>{var c,m,v;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""})(c||(l.C0=c={})),(function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""})(m||(l.C1=m={})),(function(d){d.ST=`${c.ESC}\\`})(v||(l.C1_ESCAPED=v={}))},7399:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const m=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(d,y,_,j){const w={type:0,cancel:!1,key:void 0},h=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?w.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?w.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?w.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(w.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:w.key=d.ctrlKey?"\b":m.C0.DEL,d.altKey&&(w.key=m.C0.ESC+w.key);break;case 9:if(d.shiftKey){w.key=m.C0.ESC+"[Z";break}w.key=m.C0.HT,w.cancel=!0;break;case 13:w.key=d.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,w.cancel=!0;break;case 27:w.key=m.C0.ESC,d.altKey&&(w.key=m.C0.ESC+m.C0.ESC),w.cancel=!0;break;case 37:if(d.metaKey)break;h?(w.key=m.C0.ESC+"[1;"+(h+1)+"D",w.key===m.C0.ESC+"[1;3D"&&(w.key=m.C0.ESC+(_?"b":"[1;5D"))):w.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(d.metaKey)break;h?(w.key=m.C0.ESC+"[1;"+(h+1)+"C",w.key===m.C0.ESC+"[1;3C"&&(w.key=m.C0.ESC+(_?"f":"[1;5C"))):w.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(d.metaKey)break;h?(w.key=m.C0.ESC+"[1;"+(h+1)+"A",_||w.key!==m.C0.ESC+"[1;3A"||(w.key=m.C0.ESC+"[1;5A")):w.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(d.metaKey)break;h?(w.key=m.C0.ESC+"[1;"+(h+1)+"B",_||w.key!==m.C0.ESC+"[1;3B"||(w.key=m.C0.ESC+"[1;5B")):w.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(w.key=m.C0.ESC+"[2~");break;case 46:w.key=h?m.C0.ESC+"[3;"+(h+1)+"~":m.C0.ESC+"[3~";break;case 36:w.key=h?m.C0.ESC+"[1;"+(h+1)+"H":y?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:w.key=h?m.C0.ESC+"[1;"+(h+1)+"F":y?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:d.shiftKey?w.type=2:d.ctrlKey?w.key=m.C0.ESC+"[5;"+(h+1)+"~":w.key=m.C0.ESC+"[5~";break;case 34:d.shiftKey?w.type=3:d.ctrlKey?w.key=m.C0.ESC+"[6;"+(h+1)+"~":w.key=m.C0.ESC+"[6~";break;case 112:w.key=h?m.C0.ESC+"[1;"+(h+1)+"P":m.C0.ESC+"OP";break;case 113:w.key=h?m.C0.ESC+"[1;"+(h+1)+"Q":m.C0.ESC+"OQ";break;case 114:w.key=h?m.C0.ESC+"[1;"+(h+1)+"R":m.C0.ESC+"OR";break;case 115:w.key=h?m.C0.ESC+"[1;"+(h+1)+"S":m.C0.ESC+"OS";break;case 116:w.key=h?m.C0.ESC+"[15;"+(h+1)+"~":m.C0.ESC+"[15~";break;case 117:w.key=h?m.C0.ESC+"[17;"+(h+1)+"~":m.C0.ESC+"[17~";break;case 118:w.key=h?m.C0.ESC+"[18;"+(h+1)+"~":m.C0.ESC+"[18~";break;case 119:w.key=h?m.C0.ESC+"[19;"+(h+1)+"~":m.C0.ESC+"[19~";break;case 120:w.key=h?m.C0.ESC+"[20;"+(h+1)+"~":m.C0.ESC+"[20~";break;case 121:w.key=h?m.C0.ESC+"[21;"+(h+1)+"~":m.C0.ESC+"[21~";break;case 122:w.key=h?m.C0.ESC+"[23;"+(h+1)+"~":m.C0.ESC+"[23~";break;case 123:w.key=h?m.C0.ESC+"[24;"+(h+1)+"~":m.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(_&&!j||!d.altKey||d.metaKey)!_||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?w.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(w.key=m.C0.US),d.key==="@"&&(w.key=m.C0.NUL)):d.keyCode===65&&(w.type=1);else{const p=v[d.keyCode],f=p==null?void 0:p[d.shiftKey?1:0];if(f)w.key=m.C0.ESC+f;else if(d.keyCode>=65&&d.keyCode<=90){const g=d.ctrlKey?d.keyCode-64:d.keyCode+32;let C=String.fromCharCode(g);d.shiftKey&&(C=C.toUpperCase()),w.key=m.C0.ESC+C}else if(d.keyCode===32)w.key=m.C0.ESC+(d.ctrlKey?m.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let g=d.code.slice(3,4);d.shiftKey||(g=g.toLowerCase()),w.key=m.C0.ESC+g,w.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?w.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?w.key=m.C0.NUL:d.keyCode>=51&&d.keyCode<=55?w.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?w.key=m.C0.DEL:d.keyCode===219?w.key=m.C0.ESC:d.keyCode===220?w.key=m.C0.FS:d.keyCode===221&&(w.key=m.C0.GS)}return w}},482:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},l.utf32ToString=function(c,m=0,v=c.length){let d="";for(let y=m;y<v;++y){let _=c[y];_>65535?(_-=65536,d+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):d+=String.fromCharCode(_)}return d},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,m){const v=c.length;if(!v)return 0;let d=0,y=0;if(this._interim){const _=c.charCodeAt(y++);56320<=_&&_<=57343?m[d++]=1024*(this._interim-55296)+_-56320+65536:(m[d++]=this._interim,m[d++]=_),this._interim=0}for(let _=y;_<v;++_){const j=c.charCodeAt(_);if(55296<=j&&j<=56319){if(++_>=v)return this._interim=j,d;const w=c.charCodeAt(_);56320<=w&&w<=57343?m[d++]=1024*(j-55296)+w-56320+65536:(m[d++]=j,m[d++]=w)}else j!==65279&&(m[d++]=j)}return d}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,m){const v=c.length;if(!v)return 0;let d,y,_,j,w=0,h=0,p=0;if(this.interim[0]){let C=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let z,A=0;for(;(z=63&this.interim[++A])&&A<4;)R<<=6,R|=z;const E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=E-A;for(;p<B;){if(p>=v)return 0;if(z=c[p++],(192&z)!=128){p--,C=!0;break}this.interim[A++]=z,R<<=6,R|=63&z}C||(E===2?R<128?p--:m[w++]=R:E===3?R<2048||R>=55296&&R<=57343||R===65279||(m[w++]=R):R<65536||R>1114111||(m[w++]=R)),this.interim.fill(0)}const f=v-4;let g=p;for(;g<v;){for(;!(!(g<f)||128&(d=c[g])||128&(y=c[g+1])||128&(_=c[g+2])||128&(j=c[g+3]));)m[w++]=d,m[w++]=y,m[w++]=_,m[w++]=j,g+=4;if(d=c[g++],d<128)m[w++]=d;else if((224&d)==192){if(g>=v)return this.interim[0]=d,w;if(y=c[g++],(192&y)!=128){g--;continue}if(h=(31&d)<<6|63&y,h<128){g--;continue}m[w++]=h}else if((240&d)==224){if(g>=v)return this.interim[0]=d,w;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,w;if(_=c[g++],(192&_)!=128){g--;continue}if(h=(15&d)<<12|(63&y)<<6|63&_,h<2048||h>=55296&&h<=57343||h===65279)continue;m[w++]=h}else if((248&d)==240){if(g>=v)return this.interim[0]=d,w;if(y=c[g++],(192&y)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,w;if(_=c[g++],(192&_)!=128){g--;continue}if(g>=v)return this.interim[0]=d,this.interim[1]=y,this.interim[2]=_,w;if(j=c[g++],(192&j)!=128){g--;continue}if(h=(7&d)<<18|(63&y)<<12|(63&_)<<6|63&j,h<65536||h>1114111)continue;m[w++]=h}}return w}}},225:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const m=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let y;l.UnicodeV6=class{constructor(){if(this.version="6",!y){y=new Uint8Array(65536),y.fill(1),y[0]=0,y.fill(0,1,32),y.fill(0,127,160),y.fill(2,4352,4448),y[9001]=2,y[9002]=2,y.fill(2,11904,42192),y[12351]=1,y.fill(2,44032,55204),y.fill(2,63744,64256),y.fill(2,65040,65050),y.fill(2,65072,65136),y.fill(2,65280,65377),y.fill(2,65504,65511);for(let _=0;_<v.length;++_)y.fill(0,v[_][0],v[_][1]+1)}}wcwidth(_){return _<32?0:_<127?1:_<65536?y[_]:(function(j,w){let h,p=0,f=w.length-1;if(j<w[0][0]||j>w[f][1])return!1;for(;f>=p;)if(h=p+f>>1,j>w[h][1])p=h+1;else{if(!(j<w[h][0]))return!0;f=h-1}return!1})(_,d)?0:_>=131072&&_<=196605||_>=196608&&_<=262141?2:1}charProperties(_,j){let w=this.wcwidth(_),h=w===0&&j!==0;if(h){const p=m.UnicodeService.extractWidth(j);p===0?h=!1:p>w&&(w=p)}return m.UnicodeService.createPropertyValue(0,w,h)}}},5981:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const m=c(8460),v=c(844);class d extends v.Disposable{constructor(_){super(),this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(_,j){if(j!==void 0&&this._syncCalls>j)return void(this._syncCalls=0);if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(_,j){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(j)}_innerWrite(_=0,j=!0){const w=_||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],p=this._action(h,j);if(p){const g=C=>Date.now()-w>=12?setTimeout((()=>this._innerWrite(0,C))):this._innerWrite(w,C);return void p.catch((C=>(queueMicrotask((()=>{throw C})),Promise.resolve(!1)))).then(g)}const f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=d},5941:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function v(d,y){const _=d.toString(16),j=_.length<2?"0"+_:_;switch(y){case 4:return _[0];case 8:return j;case 12:return(j+j).slice(0,3);default:return j+j}}l.parseColor=function(d){if(!d)return;let y=d.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const _=c.exec(y);if(_){const j=_[1]?15:_[4]?255:_[7]?4095:65535;return[Math.round(parseInt(_[1]||_[4]||_[7]||_[10],16)/j*255),Math.round(parseInt(_[2]||_[5]||_[8]||_[11],16)/j*255),Math.round(parseInt(_[3]||_[6]||_[9]||_[12],16)/j*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),m.exec(y)&&[3,6,9,12].includes(y.length))){const _=y.length/3,j=[0,0,0];for(let w=0;w<3;++w){const h=parseInt(y.slice(_*w,_*w+_),16);j[w]=_===1?h<<4:_===2?h:_===3?h>>4:h>>8}return j}},l.toRgbString=function(d,y=16){const[_,j,w]=d;return`rgb:${v(_,y)}/${v(j,y)}/${v(w,y)}`}},5770:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const m=c(482),v=c(8742),d=c(5770),y=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(j,w){this._handlers[j]===void 0&&(this._handlers[j]=[]);const h=this._handlers[j];return h.push(w),{dispose:()=>{const p=h.indexOf(w);p!==-1&&h.splice(p,1)}}}clearHandler(j){this._handlers[j]&&delete this._handlers[j]}setHandlerFallback(j){this._handlerFb=j}reset(){if(this._active.length)for(let j=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;j>=0;--j)this._active[j].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(j,w){if(this.reset(),this._ident=j,this._active=this._handlers[j]||y,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(j,w,h){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(j,w,h);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(j,w,h))}unhook(j,w=!0){if(this._active.length){let h=!1,p=this._active.length-1,f=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,h=w,f=this._stack.fallThrough,this._stack.paused=!1),!f&&h===!1){for(;p>=0&&(h=this._active[p].unhook(j),h!==!0);p--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,h;p--}for(;p>=0;p--)if(h=this._active[p].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",j);this._active=y,this._ident=0}};const _=new v.Params;_.addParam(0),l.DcsHandler=class{constructor(j){this._handler=j,this._data="",this._params=_,this._hitLimit=!1}hook(j){this._params=j.length>1||j.params[0]?j.clone():_,this._data="",this._hitLimit=!1}put(j,w,h){this._hitLimit||(this._data+=(0,m.utf32ToString)(j,w,h),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(j){let w=!1;if(this._hitLimit)w=!1;else if(j&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then((h=>(this._params=_,this._data="",this._hitLimit=!1,h)));return this._params=_,this._data="",this._hitLimit=!1,w}}},2015:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const m=c(844),v=c(8742),d=c(6242),y=c(6351);class _{constructor(p){this.table=new Uint8Array(p)}setDefault(p,f){this.table.fill(p<<4|f)}add(p,f,g,C){this.table[f<<8|p]=g<<4|C}addMany(p,f,g,C){for(let R=0;R<p.length;R++)this.table[f<<8|p[R]]=g<<4|C}}l.TransitionTable=_;const j=160;l.VT500_TRANSITION_TABLE=(function(){const h=new _(4095),p=Array.apply(null,Array(256)).map(((A,E)=>E)),f=(A,E)=>p.slice(A,E),g=f(32,127),C=f(0,24);C.push(25),C.push.apply(C,f(28,32));const R=f(0,14);let z;for(z in h.setDefault(1,0),h.addMany(g,0,2,0),R)h.addMany([24,26,153,154],z,3,0),h.addMany(f(128,144),z,3,0),h.addMany(f(144,152),z,3,0),h.add(156,z,0,0),h.add(27,z,11,1),h.add(157,z,4,8),h.addMany([152,158,159],z,0,7),h.add(155,z,11,3),h.add(144,z,11,9);return h.addMany(C,0,3,0),h.addMany(C,1,3,1),h.add(127,1,0,1),h.addMany(C,8,0,8),h.addMany(C,3,3,3),h.add(127,3,0,3),h.addMany(C,4,3,4),h.add(127,4,0,4),h.addMany(C,6,3,6),h.addMany(C,5,3,5),h.add(127,5,0,5),h.addMany(C,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(g,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(f(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(g,7,0,7),h.addMany(C,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(f(64,127),3,7,0),h.addMany(f(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(f(48,60),4,8,4),h.addMany(f(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(f(32,64),6,0,6),h.add(127,6,0,6),h.addMany(f(64,127),6,0,0),h.addMany(f(32,48),3,9,5),h.addMany(f(32,48),5,9,5),h.addMany(f(48,64),5,0,6),h.addMany(f(64,127),5,7,0),h.addMany(f(32,48),4,9,5),h.addMany(f(32,48),1,9,2),h.addMany(f(32,48),2,9,2),h.addMany(f(48,127),2,10,0),h.addMany(f(48,80),1,10,0),h.addMany(f(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(f(96,127),1,10,0),h.add(80,1,11,9),h.addMany(C,9,0,9),h.add(127,9,0,9),h.addMany(f(28,32),9,0,9),h.addMany(f(32,48),9,9,12),h.addMany(f(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(C,11,0,11),h.addMany(f(32,128),11,0,11),h.addMany(f(28,32),11,0,11),h.addMany(C,10,0,10),h.add(127,10,0,10),h.addMany(f(28,32),10,0,10),h.addMany(f(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(f(32,48),10,9,12),h.addMany(C,12,0,12),h.add(127,12,0,12),h.addMany(f(28,32),12,0,12),h.addMany(f(32,48),12,9,12),h.addMany(f(48,64),12,0,11),h.addMany(f(64,127),12,12,13),h.addMany(f(64,127),10,12,13),h.addMany(f(64,127),9,12,13),h.addMany(C,13,13,13),h.addMany(g,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(j,0,2,0),h.add(j,8,5,8),h.add(j,6,0,6),h.add(j,11,0,11),h.add(j,13,13,13),h})();class w extends m.Disposable{constructor(p=l.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(f,g,C)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,g)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(p,f=[64,126]){let g=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(g=p.prefix.charCodeAt(0),g&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let R=0;R<p.intermediates.length;++R){const z=p.intermediates.charCodeAt(R);if(32>z||z>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=z}}if(p.final.length!==1)throw new Error("final must be a single byte");const C=p.final.charCodeAt(0);if(f[0]>C||C>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return g<<=8,g|=C,g}identToString(p){const f=[];for(;p;)f.push(String.fromCharCode(255&p)),p>>=8;return f.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,f){const g=this._identifier(p,[48,126]);this._escHandlers[g]===void 0&&(this._escHandlers[g]=[]);const C=this._escHandlers[g];return C.push(f),{dispose:()=>{const R=C.indexOf(f);R!==-1&&C.splice(R,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,f){this._executeHandlers[p.charCodeAt(0)]=f}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,f){const g=this._identifier(p);this._csiHandlers[g]===void 0&&(this._csiHandlers[g]=[]);const C=this._csiHandlers[g];return C.push(f),{dispose:()=>{const R=C.indexOf(f);R!==-1&&C.splice(R,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,f){return this._dcsParser.registerHandler(this._identifier(p),f)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,f){return this._oscParser.registerHandler(p,f)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,f,g,C,R){this._parseStack.state=p,this._parseStack.handlers=f,this._parseStack.handlerPos=g,this._parseStack.transition=C,this._parseStack.chunkPos=R}parse(p,f,g){let C,R=0,z=0,A=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,A=this._parseStack.chunkPos+1;else{if(g===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const E=this._parseStack.handlers;let B=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(g===!1&&B>-1){for(;B>=0&&(C=E[B](this._params),C!==!0);B--)if(C instanceof Promise)return this._parseStack.handlerPos=B,C}this._parseStack.handlers=[];break;case 4:if(g===!1&&B>-1){for(;B>=0&&(C=E[B](),C!==!0);B--)if(C instanceof Promise)return this._parseStack.handlerPos=B,C}this._parseStack.handlers=[];break;case 6:if(R=p[this._parseStack.chunkPos],C=this._dcsParser.unhook(R!==24&&R!==26,g),C)return C;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(R=p[this._parseStack.chunkPos],C=this._oscParser.end(R!==24&&R!==26,g),C)return C;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,A=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let E=A;E<f;++E){switch(R=p[E],z=this._transitions.table[this.currentState<<8|(R<160?R:j)],z>>4){case 2:for(let U=E+1;;++U){if(U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}if(++U>=f||(R=p[U])<32||R>126&&R<j){this._printHandler(p,E,U),E=U-1;break}}break;case 3:this._executeHandlers[R]?this._executeHandlers[R]():this._executeHandlerFb(R),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:R,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const B=this._csiHandlers[this._collect<<8|R];let P=B?B.length-1:-1;for(;P>=0&&(C=B[P](this._params),C!==!0);P--)if(C instanceof Promise)return this._preserveStack(3,B,P,z,E),C;P<0&&this._csiHandlerFb(this._collect<<8|R,this._params),this.precedingJoinState=0;break;case 8:do switch(R){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(R-48)}while(++E<f&&(R=p[E])>47&&R<60);E--;break;case 9:this._collect<<=8,this._collect|=R;break;case 10:const N=this._escHandlers[this._collect<<8|R];let K=N?N.length-1:-1;for(;K>=0&&(C=N[K](),C!==!0);K--)if(C instanceof Promise)return this._preserveStack(4,N,K,z,E),C;K<0&&this._escHandlerFb(this._collect<<8|R),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|R,this._params);break;case 13:for(let U=E+1;;++U)if(U>=f||(R=p[U])===24||R===26||R===27||R>127&&R<j){this._dcsParser.put(p,E,U),E=U-1;break}break;case 14:if(C=this._dcsParser.unhook(R!==24&&R!==26),C)return this._preserveStack(6,[],0,z,E),C;R===27&&(z|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let U=E+1;;U++)if(U>=f||(R=p[U])<32||R>127&&R<j){this._oscParser.put(p,E,U),E=U-1;break}break;case 6:if(C=this._oscParser.end(R!==24&&R!==26),C)return this._preserveStack(5,[],0,z,E),C;R===27&&(z|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&z}}}l.EscapeSequenceParser=w},6242:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const m=c(5770),v=c(482),d=[];l.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,_){this._handlers[y]===void 0&&(this._handlers[y]=[]);const j=this._handlers[y];return j.push(_),{dispose:()=>{const w=j.indexOf(_);w!==-1&&j.splice(w,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,_,j){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(y,_,j);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(y,_,j))}start(){this.reset(),this._state=1}put(y,_,j){if(this._state!==3){if(this._state===1)for(;_<j;){const w=y[_++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&j-_>0&&this._put(y,_,j)}}end(y,_=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let j=!1,w=this._active.length-1,h=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,j=_,h=this._stack.fallThrough,this._stack.paused=!1),!h&&j===!1){for(;w>=0&&(j=this._active[w].end(y),j!==!0);w--)if(j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,j;w--}for(;w>=0;w--)if(j=this._active[w].end(!1),j instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,j}else this._handlerFb(this._id,"END",y);this._active=d,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,_,j){this._hitLimit||(this._data+=(0,v.utf32ToString)(y,_,j),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let _=!1;if(this._hitLimit)_=!1;else if(y&&(_=this._handler(this._data),_ instanceof Promise))return _.then((j=>(this._data="",this._hitLimit=!1,j)));return this._data="",this._hitLimit=!1,_}}},8742:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const c=2147483647;class m{static fromArray(d){const y=new m;if(!d.length)return y;for(let _=Array.isArray(d[0])?1:0;_<d.length;++_){const j=d[_];if(Array.isArray(j))for(let w=0;w<j.length;++w)y.addSubParam(j[w]);else y.addParam(j)}return y}constructor(d=32,y=32){if(this.maxLength=d,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new m(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let y=0;y<this.length;++y){d.push(this.params[y]);const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&d.push(Array.prototype.slice.call(this._subParams,_,j))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const y=this._subParamsIdx[d]>>8,_=255&this._subParamsIdx[d];return _-y>0?this._subParams.subarray(y,_):null}getSubParamsAll(){const d={};for(let y=0;y<this.length;++y){const _=this._subParamsIdx[y]>>8,j=255&this._subParamsIdx[y];j-_>0&&(d[y]=this._subParams.slice(_,j))}return d}addDigit(d){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const _=this._digitIsSub?this._subParams:this.params,j=_[y-1];_[y-1]=~j?Math.min(10*j+d,c):d}}l.Params=m},5741:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,m){const v={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(v),m.dispose=()=>this._wrappedAddonDispose(v),m.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let m=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){m=v;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(m,1)}}},8771:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const m=c(3785),v=c(511);l.BufferApiView=class{constructor(d,y){this._buffer=d,this.type=y}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const y=this._buffer.lines.get(d);if(y)return new m.BufferLineApiView(y)}getNullCell(){return new v.CellData}}},3785:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const m=c(511);l.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new m.CellData)}translateToString(v,d,y){return this._line.translateToString(v,d,y)}}},8285:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const m=c(8771),v=c(8460),d=c(844);class y extends d.Disposable{constructor(j){super(),this._core=j,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=y},7975:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,m){return this._core.registerCsiHandler(c,(v=>m(v.toArray())))}addCsiHandler(c,m){return this.registerCsiHandler(c,m)}registerDcsHandler(c,m){return this._core.registerDcsHandler(c,((v,d)=>m(v,d.toArray())))}addDcsHandler(c,m){return this.registerDcsHandler(c,m)}registerEscHandler(c,m){return this._core.registerEscHandler(c,m)}addEscHandler(c,m){return this.registerEscHandler(c,m)}registerOscHandler(c,m){return this._core.registerOscHandler(c,m)}addOscHandler(c,m){return this.registerOscHandler(c,m)}}},7090:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(b,l,c){var m=this&&this.__decorate||function(h,p,f,g){var C,R=arguments.length,z=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(h,p,f,g);else for(var A=h.length-1;A>=0;A--)(C=h[A])&&(z=(R<3?C(z):R>3?C(p,f,z):C(p,f))||z);return R>3&&z&&Object.defineProperty(p,f,z),z},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const d=c(8460),y=c(844),_=c(5295),j=c(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let w=l.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new _.BufferSet(h,this))}resize(h,p){this.cols=h,this.rows=p,this.buffers.resize(h,p),this._onResize.fire({cols:h,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,p=!1){const f=this.buffer;let g;g=this._cachedBlankLine,g&&g.length===this.cols&&g.getFg(0)===h.fg&&g.getBg(0)===h.bg||(g=f.getBlankLine(h,p),this._cachedBlankLine=g),g.isWrapped=p;const C=f.ybase+f.scrollTop,R=f.ybase+f.scrollBottom;if(f.scrollTop===0){const z=f.lines.isFull;R===f.lines.length-1?z?f.lines.recycle().copyFrom(g):f.lines.push(g.clone()):f.lines.splice(R+1,0,g.clone()),z?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{const z=R-C+1;f.lines.shiftElements(C+1,z-1,-1),f.lines.set(R,g.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(h,p,f){const g=this.buffer;if(h<0){if(g.ydisp===0)return;this.isUserScrolling=!0}else h+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);const C=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+h,g.ybase),0),C!==g.ydisp&&(p||this._onScroll.fire(g.ydisp))}};l.BufferService=w=m([v(0,j.IOptionsService)],w)},7994:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,m){this._charsets[c]=m,this.glevel===c&&(this.charset=m)}}},1753:function(b,l,c){var m=this&&this.__decorate||function(g,C,R,z){var A,E=arguments.length,B=E<3?C:z===null?z=Object.getOwnPropertyDescriptor(C,R):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,C,R,z);else for(var P=g.length-1;P>=0;P--)(A=g[P])&&(B=(E<3?A(B):E>3?A(C,R,B):A(C,R))||B);return E>3&&B&&Object.defineProperty(C,R,B),B},v=this&&this.__param||function(g,C){return function(R,z){C(R,z,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const d=c(2585),y=c(8460),_=c(844),j={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:g=>g.button!==4&&g.action===1&&(g.ctrl=!1,g.alt=!1,g.shift=!1,!0)},VT200:{events:19,restrict:g=>g.action!==32},DRAG:{events:23,restrict:g=>g.action!==32||g.button!==3},ANY:{events:31,restrict:g=>!0}};function w(g,C){let R=(g.ctrl?16:0)|(g.shift?4:0)|(g.alt?8:0);return g.button===4?(R|=64,R|=g.action):(R|=3&g.button,4&g.button&&(R|=64),8&g.button&&(R|=128),g.action===32?R|=32:g.action!==0||C||(R|=3)),R}const h=String.fromCharCode,p={DEFAULT:g=>{const C=[w(g,!1)+32,g.col+32,g.row+32];return C[0]>255||C[1]>255||C[2]>255?"":`\x1B[M${h(C[0])}${h(C[1])}${h(C[2])}`},SGR:g=>{const C=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${w(g,!0)};${g.col};${g.row}${C}`},SGR_PIXELS:g=>{const C=g.action===0&&g.button!==4?"m":"M";return`\x1B[<${w(g,!0)};${g.x};${g.y}${C}`}};let f=l.CoreMouseService=class extends _.Disposable{constructor(g,C){super(),this._bufferService=g,this._coreService=C,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const R of Object.keys(j))this.addProtocol(R,j[R]);for(const R of Object.keys(p))this.addEncoding(R,p[R]);this.reset()}addProtocol(g,C){this._protocols[g]=C}addEncoding(g,C){this._encodings[g]=C}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(g){if(!this._protocols[g])throw new Error(`unknown protocol "${g}"`);this._activeProtocol=g,this._onProtocolChange.fire(this._protocols[g].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(g){if(!this._encodings[g])throw new Error(`unknown encoding "${g}"`);this._activeEncoding=g}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(g){if(g.col<0||g.col>=this._bufferService.cols||g.row<0||g.row>=this._bufferService.rows||g.button===4&&g.action===32||g.button===3&&g.action!==32||g.button!==4&&(g.action===2||g.action===3)||(g.col++,g.row++,g.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,g,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(g))return!1;const C=this._encodings[this._activeEncoding](g);return C&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(C):this._coreService.triggerDataEvent(C,!0)),this._lastEvent=g,!0}explainEvents(g){return{down:!!(1&g),up:!!(2&g),drag:!!(4&g),move:!!(8&g),wheel:!!(16&g)}}_equalEvents(g,C,R){if(R){if(g.x!==C.x||g.y!==C.y)return!1}else if(g.col!==C.col||g.row!==C.row)return!1;return g.button===C.button&&g.action===C.action&&g.ctrl===C.ctrl&&g.alt===C.alt&&g.shift===C.shift}};l.CoreMouseService=f=m([v(0,d.IBufferService),v(1,d.ICoreService)],f)},6975:function(b,l,c){var m=this&&this.__decorate||function(f,g,C,R){var z,A=arguments.length,E=A<3?g:R===null?R=Object.getOwnPropertyDescriptor(g,C):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,g,C,R);else for(var B=f.length-1;B>=0;B--)(z=f[B])&&(E=(A<3?z(E):A>3?z(g,C,E):z(g,C))||E);return A>3&&E&&Object.defineProperty(g,C,E),E},v=this&&this.__param||function(f,g){return function(C,R){g(C,R,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const d=c(1439),y=c(8460),_=c(844),j=c(2585),w=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=l.CoreService=class extends _.Disposable{constructor(f,g,C){super(),this._bufferService=f,this._logService=g,this._optionsService=C,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(w),this.decPrivateModes=(0,d.clone)(h)}reset(){this.modes=(0,d.clone)(w),this.decPrivateModes=(0,d.clone)(h)}triggerDataEvent(f,g=!1){if(this._optionsService.rawOptions.disableStdin)return;const C=this._bufferService.buffer;g&&this._optionsService.rawOptions.scrollOnUserInput&&C.ybase!==C.ydisp&&this._onRequestScrollToBottom.fire(),g&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,(()=>f.split("").map((R=>R.charCodeAt(0))))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,(()=>f.split("").map((g=>g.charCodeAt(0))))),this._onBinary.fire(f))}};l.CoreService=p=m([v(0,j.IBufferService),v(1,j.ILogService),v(2,j.IOptionsService)],p)},9074:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const m=c(8055),v=c(8460),d=c(844),y=c(6106);let _=0,j=0;class w extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList((f=>f==null?void 0:f.marker.line)),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)((()=>this.reset())))}registerDecoration(f){if(f.marker.isDisposed)return;const g=new h(f);if(g){const C=g.marker.onDispose((()=>g.dispose()));g.onDispose((()=>{g&&(this._decorations.delete(g)&&this._onDecorationRemoved.fire(g),C.dispose())})),this._decorations.insert(g),this._onDecorationRegistered.fire(g)}return g}reset(){for(const f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,g,C){let R=0,z=0;for(const A of this._decorations.getKeyIterator(g))R=A.options.x??0,z=R+(A.options.width??1),f>=R&&f<z&&(!C||(A.options.layer??"bottom")===C)&&(yield A)}forEachDecorationAtCell(f,g,C,R){this._decorations.forEachByKey(g,(z=>{_=z.options.x??0,j=_+(z.options.width??1),f>=_&&f<j&&(!C||(z.options.layer??"bottom")===C)&&R(z)}))}}l.DecorationService=w;class h extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const m=c(2585),v=c(8343);class d{constructor(..._){this._entries=new Map;for(const[j,w]of _)this.set(j,w)}set(_,j){const w=this._entries.get(_);return this._entries.set(_,j),w}forEach(_){for(const[j,w]of this._entries.entries())_(j,w)}has(_){return this._entries.has(_)}get(_){return this._entries.get(_)}}l.ServiceCollection=d,l.InstantiationService=class{constructor(){this._services=new d,this._services.set(m.IInstantiationService,this)}setService(y,_){this._services.set(y,_)}getService(y){return this._services.get(y)}createInstance(y,..._){const j=(0,v.getServiceDependencies)(y).sort(((p,f)=>p.index-f.index)),w=[];for(const p of j){const f=this._services.get(p.id);if(!f)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${p.id}.`);w.push(f)}const h=j.length>0?j[0].index:_.length;if(_.length!==h)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${h+1} conflicts with ${_.length} static arguments`);return new y(..._,...w)}}},7866:function(b,l,c){var m=this&&this.__decorate||function(h,p,f,g){var C,R=arguments.length,z=R<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,f):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(h,p,f,g);else for(var A=h.length-1;A>=0;A--)(C=h[A])&&(z=(R<3?C(z):R>3?C(p,f,z):C(p,f))||z);return R>3&&z&&Object.defineProperty(p,f,z),z},v=this&&this.__param||function(h,p){return function(f,g){p(f,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const d=c(844),y=c(2585),_={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let j,w=l.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),j=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let p=0;p<h.length;p++)typeof h[p]=="function"&&(h[p]=h[p]())}_log(h,p,f){this._evalLazyOptionalParams(f),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...f)}trace(h,...p){var f;this._logLevel<=y.LogLevelEnum.TRACE&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.trace.bind(this._optionsService.options.logger))??console.log,h,p)}debug(h,...p){var f;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.debug.bind(this._optionsService.options.logger))??console.log,h,p)}info(h,...p){var f;this._logLevel<=y.LogLevelEnum.INFO&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.info.bind(this._optionsService.options.logger))??console.info,h,p)}warn(h,...p){var f;this._logLevel<=y.LogLevelEnum.WARN&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.warn.bind(this._optionsService.options.logger))??console.warn,h,p)}error(h,...p){var f;this._logLevel<=y.LogLevelEnum.ERROR&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.error.bind(this._optionsService.options.logger))??console.error,h,p)}};l.LogService=w=m([v(0,y.IOptionsService)],w),l.setTraceLogger=function(h){j=h},l.traceCall=function(h,p,f){if(typeof f.value!="function")throw new Error("not supported");const g=f.value;f.value=function(...C){if(j.logLevel!==y.LogLevelEnum.TRACE)return g.apply(this,C);j.trace(`GlyphRenderer#${g.name}(${C.map((z=>JSON.stringify(z))).join(", ")})`);const R=g.apply(this,C);return j.trace(`GlyphRenderer#${g.name} return`,R),R}}},7302:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const m=c(8460),v=c(844),d=c(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class _ extends v.Disposable{constructor(w){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h={...l.DEFAULT_OPTIONS};for(const p in w)if(p in h)try{const f=w[p];h[p]=this._sanitizeAndValidateOption(p,f)}catch(f){console.error(f)}this.rawOptions=h,this.options={...h},this._setupOptions(),this.register((0,v.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(w,h){return this.onOptionChange((p=>{p===w&&h(this.rawOptions[w])}))}onMultipleOptionChange(w,h){return this.onOptionChange((p=>{w.indexOf(p)!==-1&&h()}))}_setupOptions(){const w=p=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},h=(p,f)=>{if(!(p in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);f=this._sanitizeAndValidateOption(p,f),this.rawOptions[p]!==f&&(this.rawOptions[p]=f,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const f={get:w.bind(this,p),set:h.bind(this,p)};Object.defineProperty(this.options,p,f)}}_sanitizeAndValidateOption(w,h){switch(w){case"cursorStyle":if(h||(h=l.DEFAULT_OPTIONS[w]),!(function(p){return p==="block"||p==="underline"||p==="bar"})(h))throw new Error(`"${h}" is not a valid value for ${w}`);break;case"wordSeparator":h||(h=l.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=y.includes(h)?h:l.DEFAULT_OPTIONS[w];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${w} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${w} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}l.OptionsService=_},2660:function(b,l,c){var m=this&&this.__decorate||function(_,j,w,h){var p,f=arguments.length,g=f<3?j:h===null?h=Object.getOwnPropertyDescriptor(j,w):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,j,w,h);else for(var C=_.length-1;C>=0;C--)(p=_[C])&&(g=(f<3?p(g):f>3?p(j,w,g):p(j,w))||g);return f>3&&g&&Object.defineProperty(j,w,g),g},v=this&&this.__param||function(_,j){return function(w,h){j(w,h,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const d=c(2585);let y=l.OscLinkService=class{constructor(_){this._bufferService=_,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(_){const j=this._bufferService.buffer;if(_.id===void 0){const C=j.addMarker(j.ybase+j.y),R={data:_,id:this._nextId++,lines:[C]};return C.onDispose((()=>this._removeMarkerFromLink(R,C))),this._dataByLinkId.set(R.id,R),R.id}const w=_,h=this._getEntryIdKey(w),p=this._entriesWithId.get(h);if(p)return this.addLineToLink(p.id,j.ybase+j.y),p.id;const f=j.addMarker(j.ybase+j.y),g={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(g,f))),this._entriesWithId.set(g.key,g),this._dataByLinkId.set(g.id,g),g.id}addLineToLink(_,j){const w=this._dataByLinkId.get(_);if(w&&w.lines.every((h=>h.line!==j))){const h=this._bufferService.buffer.addMarker(j);w.lines.push(h),h.onDispose((()=>this._removeMarkerFromLink(w,h)))}}getLinkData(_){var j;return(j=this._dataByLinkId.get(_))==null?void 0:j.data}_getEntryIdKey(_){return`${_.id};;${_.uri}`}_removeMarkerFromLink(_,j){const w=_.lines.indexOf(j);w!==-1&&(_.lines.splice(w,1),_.lines.length===0&&(_.data.id!==void 0&&this._entriesWithId.delete(_.key),this._dataByLinkId.delete(_.id)))}};l.OscLinkService=y=m([v(0,d.IBufferService)],y)},8343:(b,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const c="di$target",m="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(v){return v[m]||[]},l.createDecorator=function(v){if(l.serviceRegistry.has(v))return l.serviceRegistry.get(v);const d=function(y,_,j){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,h,p){h[c]===h?h[m].push({id:w,index:p}):(h[m]=[{id:w,index:p}],h[c]=h)})(d,y,j)};return d.toString=()=>v,l.serviceRegistry.set(v,d),d}},2585:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const m=c(8343);var v;l.IBufferService=(0,m.createDecorator)("BufferService"),l.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),l.ICoreService=(0,m.createDecorator)("CoreService"),l.ICharsetService=(0,m.createDecorator)("CharsetService"),l.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"})(v||(l.LogLevelEnum=v={})),l.ILogService=(0,m.createDecorator)("LogService"),l.IOptionsService=(0,m.createDecorator)("OptionsService"),l.IOscLinkService=(0,m.createDecorator)("OscLinkService"),l.IUnicodeService=(0,m.createDecorator)("UnicodeService"),l.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(b,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const m=c(8460),v=c(225);class d{static extractShouldJoin(_){return(1&_)!=0}static extractWidth(_){return _>>1&3}static extractCharKind(_){return _>>3}static createPropertyValue(_,j,w=!1){return(16777215&_)<<3|(3&j)<<1|(w?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;const _=new v.UnicodeV6;this.register(_),this._active=_.version,this._activeProvider=_}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(_){if(!this._providers[_])throw new Error(`unknown Unicode version "${_}"`);this._active=_,this._activeProvider=this._providers[_],this._onChange.fire(_)}register(_){this._providers[_.version]=_}wcwidth(_){return this._activeProvider.wcwidth(_)}getStringCellWidth(_){let j=0,w=0;const h=_.length;for(let p=0;p<h;++p){let f=_.charCodeAt(p);if(55296<=f&&f<=56319){if(++p>=h)return j+this.wcwidth(f);const R=_.charCodeAt(p);56320<=R&&R<=57343?f=1024*(f-55296)+R-56320+65536:j+=this.wcwidth(R)}const g=this.charProperties(f,w);let C=d.extractWidth(g);d.extractShouldJoin(g)&&(C-=d.extractWidth(w)),j+=C,w=g}return j}charProperties(_,j){return this._activeProvider.charProperties(_,j)}}l.UnicodeService=d}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b].call(c.exports,c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const l=u(9042),c=u(3236),m=u(844),v=u(5741),d=u(8285),y=u(7975),_=u(7090),j=["cols","rows"];class w extends m.Disposable{constructor(p){super(),this._core=this.register(new c.Terminal(p)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const f=C=>this._core.options[C],g=(C,R)=>{this._checkReadonlyOptions(C),this._core.options[C]=R};for(const C in this._core.options){const R={get:f.bind(this,C),set:g.bind(this,C)};Object.defineProperty(this._publicOptions,C,R)}}_checkReadonlyOptions(p){if(j.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const f in p)this._publicOptions[f]=p[f]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,f=!0){this._core.input(p,f)}resize(p,f){this._verifyIntegers(p,f),this._core.resize(p,f)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,f,g){this._verifyIntegers(p,f,g),this._core.select(p,f,g)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,f){this._verifyIntegers(p,f),this._core.selectLines(p,f)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,f){this._core.write(p,f)}writeln(p,f){this._core.write(p),this._core.write(`\r
`,f)}paste(p){this._core.paste(p)}refresh(p,f){this._verifyIntegers(p,f),this._core.refresh(p,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return l}_verifyIntegers(...p){for(const f of p)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const f of p)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}b.Terminal=w})(),S})()))})(qd)),qd.exports}var k2=C2(),Gd={exports:{}},rx;function j2(){return rx||(rx=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.FitAddon=void 0,o.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const S=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(S._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,S=u._renderService.dimensions;if(S.css.cell.width===0||S.css.cell.height===0)return;const b=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(l.getPropertyValue("height")),m=Math.max(0,parseInt(l.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),y=m-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(y/S.css.cell.width)),rows:Math.max(1,Math.floor(d/S.css.cell.height))}}}})(),s})()))})(Gd)),Gd.exports}var E2=j2(),Yd={exports:{}},ix;function R2(){return ix||(ix=1,(function(t,i){(function(s,o){t.exports=o()})(self,(()=>(()=>{var s={6:(b,l)=>{function c(v){try{const d=new URL(v),y=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(y.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(v,d,y,_={}){this._terminal=v,this._regex=d,this._handler=y,this._options=_}provideLinks(v,d){const y=m.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(y))}_addCallbacks(v){return v.map((d=>(d.leave=this._options.leave,d.hover=(y,_)=>{if(this._options.hover){const{range:j}=d;this._options.hover(y,_,j)}},d)))}};class m{static computeLink(d,y,_,j){const w=new RegExp(y.source,(y.flags||"")+"g"),[h,p]=m._getWindowedLineStrings(d-1,_),f=h.join("");let g;const C=[];for(;g=w.exec(f);){const R=g[0];if(!c(R))continue;const[z,A]=m._mapStrIdx(_,p,0,g.index),[E,B]=m._mapStrIdx(_,z,A,R.length);if(z===-1||A===-1||E===-1||B===-1)continue;const P={start:{x:A+1,y:z+1},end:{x:B,y:E+1}};C.push({range:P,text:R,activate:j})}return C}static _getWindowedLineStrings(d,y){let _,j=d,w=d,h=0,p="";const f=[];if(_=y.buffer.active.getLine(d)){const g=_.translateToString(!0);if(_.isWrapped&&g[0]!==" "){for(h=0;(_=y.buffer.active.getLine(--j))&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),_.isWrapped&&p.indexOf(" ")===-1););f.reverse()}for(f.push(g),h=0;(_=y.buffer.active.getLine(++w))&&_.isWrapped&&h<2048&&(p=_.translateToString(!0),h+=p.length,f.push(p),p.indexOf(" ")===-1););}return[f,j]}static _mapStrIdx(d,y,_,j){const w=d.buffer.active,h=w.getNullCell();let p=_;for(;j;){const f=w.getLine(y);if(!f)return[-1,-1];for(let g=p;g<f.length;++g){f.getCell(g,h);const C=h.getChars();if(h.getWidth()&&(j-=C.length||1,g===f.length-1&&C==="")){const R=w.getLine(y+1);R&&R.isWrapped&&(R.getCell(0,h),h.getWidth()===2&&(j+=1))}if(j<0)return[y,g]}y++,p=0}return[y,p]}}l.LinkComputer=m}},o={};function u(b){var l=o[b];if(l!==void 0)return l.exports;var c=o[b]={exports:{}};return s[b](c,c.exports,u),c.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.WebLinksAddon=void 0;const l=u(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function m(v,d){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}b.WebLinksAddon=class{constructor(v=m,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,y=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,y,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),S})()))})(Yd)),Yd.exports}var T2=R2();const A2={background:"#0f0f0f",foreground:"#e4e4e7",cursor:"#8B5CF6",cursorAccent:"#0f0f0f",selectionBackground:"#3b3d5e80",black:"#1a1b2e",red:"#f87171",green:"#4ade80",yellow:"#facc15",blue:"#60a5fa",magenta:"#c084fc",cyan:"#22d3ee",white:"#e4e4e7",brightBlack:"#4b5563",brightRed:"#fca5a5",brightGreen:"#86efac",brightYellow:"#fde68a",brightBlue:"#93c5fd",brightMagenta:"#d8b4fe",brightCyan:"#67e8f9",brightWhite:"#f9fafb"};function z2(t,{sessionId:i,projectId:s,onSessionCreated:o}){const u=L.useRef(null),S=L.useRef(null),b=L.useRef(null),l=L.useRef(null),[c,m]=L.useState(!1);L.useEffect(()=>{if(!t.current)return;const d=new k2.Terminal({theme:A2,fontFamily:'"JetBrains Mono", "Fira Code", "Cascadia Code", monospace',fontSize:15,lineHeight:1.3,cursorBlink:!0,cursorStyle:"bar",allowProposedApi:!0}),y=new E2.FitAddon;d.loadAddon(y),d.loadAddon(new T2.WebLinksAddon),d.open(t.current),y.fit(),u.current=d,S.current=y;const _=Xo();if(!_)return;const j=Po("/terminal",{auth:{token:_},transports:["websocket"]});b.current=j,j.on("connect",()=>{m(!0),i?j.emit("attach-session",{id:i,cols:d.cols||120,rows:d.rows||30,replay:!0},p=>{p&&p.error?w():l.current=i}):w()});function w(){j.emit("create-session",{cols:d.cols||120,rows:d.rows||30,projectId:s||""},p=>{if(p.error){console.error(p.error),u.current&&(u.current.write(`\r
\x1B[31m  `+p.error+`\x1B[0m\r
`),u.current.write(`\x1B[90m  Terminal features require a local environment with node-pty.\x1B[0m\r
`));return}l.current=p.id,j.emit("attach-session",{id:p.id,cols:d.cols||120,rows:d.rows||30}),o&&o(p.id)})}j.on("output",p=>{u.current&&u.current.write(p)}),j.on("session-exited",()=>{u.current&&u.current.write(`\r
\x1B[33m[Session ended. Close this tab or create a new one.]\x1B[0m\r
`)}),j.on("disconnect",()=>m(!1)),d.onData(p=>{b.current&&l.current&&b.current.emit("input",p)}),d.onResize(({cols:p,rows:f})=>{b.current&&b.current.emit("resize",{cols:p,rows:f})});const h=new ResizeObserver(()=>{try{y.fit()}catch{}});return h.observe(t.current),()=>{h.disconnect(),b.current&&(b.current.emit("detach-session"),b.current.disconnect(),b.current=null),l.current=null,d.dispose(),u.current=null,S.current=null}},[t,i,s]);const v=L.useCallback(d=>{b.current&&l.current&&b.current.emit("input",d)},[]);return{connected:c,sendInput:v}}const Mu=L.forwardRef(function({sessionId:i,projectId:s,onSessionCreated:o},u){const S=L.useRef(null),{connected:b,sendInput:l}=z2(S,{sessionId:i,projectId:s,onSessionCreated:o});return L.useImperativeHandle(u,()=>({sendInput:l}),[l]),e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",background:"#050505"},children:[e.jsx("div",{ref:S,style:{width:"100%",height:"100%"}}),!b&&e.jsx("div",{style:{position:"absolute",bottom:"8px",right:"8px",fontSize:"10px",color:"#52525B",fontFamily:"monospace"},children:"Connecting..."})]})}),Rr={bg:"#0f0f0f",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e"};function L2(){const[t,i]=L.useState(!1),[s,o]=L.useState(!1),[u,S]=L.useState(""),b=L.useRef(null),l=qt(),c=async()=>{i(!0),S("");try{const m=await ae("/api/claude-auth/verify",{method:"POST"});if(o(m.connected),m.connected){const v=Jo();v&&mh({...v,claudeConnected:!0})}else S("Claude is not connected yet. Complete the OAuth flow in the terminal first.")}catch(m){S(m.message)}finally{i(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#050505",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"400px",background:"radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%)",filter:"blur(80px)",pointerEvents:"none"}}),e.jsxs("div",{style:{width:"680px",background:"#0A0A0B",border:"1px solid rgba(255,255,255,0.06)",borderRadius:"12px",position:"relative",zIndex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"32px 32px 0",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#111112",border:"1px solid rgba(255,255,255,0.12)",display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",color:s?Rr.success:Rr.violet},children:s?e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsx("h1",{style:{fontSize:"22px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"6px",color:Rr.tp},children:s?"Claude Connected!":"Connect Claude"}),e.jsx("p",{style:{fontSize:"13px",color:Rr.ts,lineHeight:1.5,maxWidth:"480px",margin:"0 auto"},children:s?"Your Claude account is connected and ready to use. You can now create projects and generate iterations.":"Authenticate with Claude to enable AI-powered agent testing. Follow the steps below."})]}),s?e.jsxs("div",{style:{padding:"24px 32px 32px"},children:[e.jsx("div",{style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"8px",padding:"16px",marginBottom:"20px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"13px",color:Rr.success,fontWeight:"500"},children:"Claude OAuth authentication successful"})}),e.jsx("button",{onClick:()=>l("/"),style:{width:"100%",padding:"12px",background:Rr.violet,color:"#fff",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Continue to Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"20px 32px"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{num:"1",text:"Type 'claude' in the terminal below and press Enter"},{num:"2",text:"A URL will appear  open it in your browser"},{num:"3",text:"Sign in and authorize the connection"},{num:"4",text:"Come back here and click 'Check Connection'"}].map(m=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",background:Rr.violetM,color:Rr.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"700",flexShrink:0},children:m.num}),e.jsx("span",{style:{fontSize:"12px",color:Rr.ts},children:m.text})]},m.num))})}),e.jsx("div",{style:{margin:"0 16px",height:"280px",borderRadius:"8px",overflow:"hidden",border:`1px solid ${Rr.borderS}`,background:Rr.bg},children:e.jsx(Mu,{ref:b,projectId:"",onSessionCreated:()=>{}})}),e.jsxs("div",{style:{padding:"20px 32px 28px"},children:[u&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"12px",borderRadius:"4px",background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.25)",color:"#f59e0b",fontSize:"12px"},children:u}),e.jsx("button",{onClick:c,disabled:t,style:{width:"100%",padding:"10px",background:Rr.tp,color:"#050505",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:t?"default":"pointer",opacity:t?.7:1,marginBottom:"12px"},children:t?"Checking...":"Check Connection"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("span",{onClick:()=>l("/"),style:{fontSize:"12px",color:Rr.tm,cursor:"pointer",textDecoration:"none"},onMouseEnter:m=>m.target.style.color=Rr.ts,onMouseLeave:m=>m.target.style.color=Rr.tm,children:"Skip for now"})})]})]})]})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=(...t)=>t.filter((i,s,o)=>!!i&&i.trim()!==""&&o.indexOf(i)===s).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,s,o)=>o?o.toUpperCase():s.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=t=>{const i=D2(t);return i.charAt(0).toUpperCase()+i.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=t=>{for(const i in t)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=L.forwardRef(({color:t="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:S,iconNode:b,...l},c)=>L.createElement("svg",{ref:c,...M2,width:i,height:i,stroke:t,strokeWidth:o?Number(s)*24/Number(i):s,className:_0("lucide",u),...!S&&!B2(l)&&{"aria-hidden":"true"},...l},[...b.map(([m,v])=>L.createElement(m,v)),...Array.isArray(S)?S:[S]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,i)=>{const s=L.forwardRef(({className:o,...u},S)=>L.createElement(P2,{ref:S,iconNode:i,className:_0(`lucide-${I2(nx(t))}`,`lucide-${t}`,o),...u}));return s.displayName=nx(t),s};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],S0=ze("activity",O2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],w0=ze("arrow-down",$2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wh=ze("arrow-left",F2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xn=ze("arrow-right",W2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],H2=ze("arrow-up-down",N2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],V2=ze("arrow-up-right",U2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],C0=ze("arrow-up",K2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Sn=ze("bot",q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sx=ze("calendar",G2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],X2=ze("camera",Y2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ch=ze("chart-column",J2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Z2=ze("chart-pie",Q2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rr=ze("check",eS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rn=ze("chevron-down",tS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qo=ze("chevron-left",rS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hr=ze("chevron-right",iS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],kh=ze("chevron-up",nS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ai=ze("circle-alert",sS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fl=ze("circle-check-big",oS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lS=ze("circle-check",aS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dS=ze("circle-x",cS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zo=ze("clock",uS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ox=ze("cloud-upload",hS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],jh=ze("code",pS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Rl=ze("copy",fS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],es=ze("cpu",gS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mS=ze("database",xS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jn=ze("download",yS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Oo=ze("external-link",vS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hs=ze("eye",bS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],Bu=ze("file-code",_S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],wS=ze("file-plus",SS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],kS=ze("file-search",CS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ms=ze("file-text",jS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],RS=ze("file",ES);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],AS=ze("folder-plus",TS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],ax=ze("folder-tree",zS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],IS=ze("folder",LS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],MS=ze("funnel",DS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Eh=ze("git-branch",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zs=ze("globe",PS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$S=ze("grip-vertical",OS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],WS=ze("hash",FS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],lx=ze("history",NS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],US=ze("image",HS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],KS=ze("info",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],cx=ze("key",qS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Bs=ze("layers",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],k0=ze("layout-grid",YS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Xd=ze("lightbulb",XS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Pu=ze("link",JS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],To=ze("linkedin",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ou=ze("list",ZS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bn=ze("loader-circle",ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],rw=ze("maximize-2",tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],dx=ze("message-circle",iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],j0=ze("message-square",nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M5 12h14",key:"1ays0h"}]],ow=ze("minus",sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],E0=ze("monitor",aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ki=ze("package",lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dw=ze("palette",cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],hw=ze("panel-right",uw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ol=ze("panels-top-left",pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],gw=ze("pause",fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ea=ze("pen-line",xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Jd=ze("pen-tool",mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$u=ze("pen",yw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Qd=ze("pencil",vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ql=ze("play",bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ir=ze("plus",_w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],R0=ze("refresh-ccw",Sw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vi=ze("refresh-cw",ww);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],kw=ze("repeat",Cw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Zd=ze("rocket",jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Rw=ze("rotate-ccw",Ew);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zl=ze("save",Tw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ps=ze("search",Aw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rh=ze("send",zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T0=ze("settings",Lw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],A0=ze("share-2",Iw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ec=ze("shield",Dw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],z0=ze("smartphone",Mw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ft=ze("sparkles",Bw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ow=ze("square-check-big",Pw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],En=ze("star",$w);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ww=ze("table",Fw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],L0=ze("tablet",Nw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Uw=ze("tag",Hw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],I0=ze("terminal",Vw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hr=ze("trash-2",Kw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ux=ze("trash",qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Yw=ze("trending-up",Gw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hx=ze("triangle-alert",Xw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Mo=ze("type",Jw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],D0=ze("upload",Qw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],px=ze("user-plus",Zw);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qi=ze("user",eC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ls=ze("users",tC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Tl=ze("wand-sparkles",rC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],M0=ze("wrench",iC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kt=ze("x",nC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yr=ze("zap",sC),Th=L.createContext({});function Ah(t){const i=L.useRef(null);return i.current===null&&(i.current=t()),i.current}const B0=typeof window<"u",P0=B0?L.useLayoutEffect:L.useEffect,tc=L.createContext(null);function zh(t,i){t.indexOf(i)===-1&&t.push(i)}function $l(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}const zi=(t,i,s)=>s>i?i:s<t?t:s;let Lh=()=>{};const Gi={},O0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function $0(t){return typeof t=="object"&&t!==null}const F0=t=>/^0[^.\s]+$/u.test(t);function Ih(t){let i;return()=>(i===void 0&&(i=t()),i)}const si=t=>t,oC=(t,i)=>s=>i(t(s)),ta=(...t)=>t.reduce(oC),Vo=(t,i,s)=>{const o=i-t;return o===0?1:(s-t)/o};class Dh{constructor(){this.subscriptions=[]}add(i){return zh(this.subscriptions,i),()=>$l(this.subscriptions,i)}notify(i,s,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](i,s,o);else for(let S=0;S<u;S++){const b=this.subscriptions[S];b&&b(i,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vi=t=>t*1e3,ni=t=>t/1e3;function W0(t,i){return i?t*(1e3/i):0}const N0=(t,i,s)=>(((1-3*s+3*i)*t+(3*s-6*i))*t+3*i)*t,aC=1e-7,lC=12;function cC(t,i,s,o,u){let S,b,l=0;do b=i+(s-i)/2,S=N0(b,o,u)-t,S>0?s=b:i=b;while(Math.abs(S)>aC&&++l<lC);return b}function ra(t,i,s,o){if(t===i&&s===o)return si;const u=S=>cC(S,0,1,t,s);return S=>S===0||S===1?S:N0(u(S),i,o)}const H0=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,U0=t=>i=>1-t(1-i),V0=ra(.33,1.53,.69,.99),Mh=U0(V0),K0=H0(Mh),q0=t=>(t*=2)<1?.5*Mh(t):.5*(2-Math.pow(2,-10*(t-1))),Bh=t=>1-Math.sin(Math.acos(t)),G0=U0(Bh),Y0=H0(Bh),dC=ra(.42,0,1,1),uC=ra(0,0,.58,1),X0=ra(.42,0,.58,1),hC=t=>Array.isArray(t)&&typeof t[0]!="number",J0=t=>Array.isArray(t)&&typeof t[0]=="number",pC={linear:si,easeIn:dC,easeInOut:X0,easeOut:uC,circIn:Bh,circInOut:Y0,circOut:G0,backIn:Mh,backInOut:K0,backOut:V0,anticipate:q0},fC=t=>typeof t=="string",fx=t=>{if(J0(t)){Lh(t.length===4);const[i,s,o,u]=t;return ra(i,s,o,u)}else if(fC(t))return pC[t];return t},gl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gC(t,i){let s=new Set,o=new Set,u=!1,S=!1;const b=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(v){b.has(v)&&(m.schedule(v),t()),v(l)}const m={schedule:(v,d=!1,y=!1)=>{const j=y&&u?s:o;return d&&b.add(v),j.has(v)||j.add(v),v},cancel:v=>{o.delete(v),b.delete(v)},process:v=>{if(l=v,u){S=!0;return}u=!0,[s,o]=[o,s],s.forEach(c),s.clear(),u=!1,S&&(S=!1,m.process(v))}};return m}const xC=40;function Q0(t,i){let s=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},S=()=>s=!0,b=gl.reduce((g,C)=>(g[C]=gC(S),g),{}),{setup:l,read:c,resolveKeyframes:m,preUpdate:v,update:d,preRender:y,render:_,postRender:j}=b,w=()=>{const g=Gi.useManualTiming?u.timestamp:performance.now();s=!1,Gi.useManualTiming||(u.delta=o?1e3/60:Math.max(Math.min(g-u.timestamp,xC),1)),u.timestamp=g,u.isProcessing=!0,l.process(u),c.process(u),m.process(u),v.process(u),d.process(u),y.process(u),_.process(u),j.process(u),u.isProcessing=!1,s&&i&&(o=!1,t(w))},h=()=>{s=!0,o=!0,u.isProcessing||t(w)};return{schedule:gl.reduce((g,C)=>{const R=b[C];return g[C]=(z,A=!1,E=!1)=>(s||h(),R.schedule(z,A,E)),g},{}),cancel:g=>{for(let C=0;C<gl.length;C++)b[gl[C]].cancel(g)},state:u,steps:b}}const{schedule:Lt,cancel:Tn,state:yr,steps:eu}=Q0(typeof requestAnimationFrame<"u"?requestAnimationFrame:si,!0);let Al;function mC(){Al=void 0}const Tr={now:()=>(Al===void 0&&Tr.set(yr.isProcessing||Gi.useManualTiming?yr.timestamp:performance.now()),Al),set:t=>{Al=t,queueMicrotask(mC)}},Z0=t=>i=>typeof i=="string"&&i.startsWith(t),ey=Z0("--"),yC=Z0("var(--"),Ph=t=>yC(t)?vC.test(t.split("/*")[0].trim()):!1,vC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function gx(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Us={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ko={...Us,transform:t=>zi(0,1,t)},xl={...Us,default:1},$o=t=>Math.round(t*1e5)/1e5,Oh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bC(t){return t==null}const _C=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$h=(t,i)=>s=>!!(typeof s=="string"&&_C.test(s)&&s.startsWith(t)||i&&!bC(s)&&Object.prototype.hasOwnProperty.call(s,i)),ty=(t,i,s)=>o=>{if(typeof o!="string")return o;const[u,S,b,l]=o.match(Oh);return{[t]:parseFloat(u),[i]:parseFloat(S),[s]:parseFloat(b),alpha:l!==void 0?parseFloat(l):1}},SC=t=>zi(0,255,t),tu={...Us,transform:t=>Math.round(SC(t))},Jn={test:$h("rgb","red"),parse:ty("red","green","blue"),transform:({red:t,green:i,blue:s,alpha:o=1})=>"rgba("+tu.transform(t)+", "+tu.transform(i)+", "+tu.transform(s)+", "+$o(Ko.transform(o))+")"};function wC(t){let i="",s="",o="",u="";return t.length>5?(i=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),u=t.substring(7,9)):(i=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),u=t.substring(4,5),i+=i,s+=s,o+=o,u+=u),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const Fu={test:$h("#"),parse:wC,transform:Jn.transform},ia=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),yn=ia("deg"),Ri=ia("%"),Qe=ia("px"),CC=ia("vh"),kC=ia("vw"),xx={...Ri,parse:t=>Ri.parse(t)/100,transform:t=>Ri.transform(t*100)},js={test:$h("hsl","hue"),parse:ty("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+Ri.transform($o(i))+", "+Ri.transform($o(s))+", "+$o(Ko.transform(o))+")"},er={test:t=>Jn.test(t)||Fu.test(t)||js.test(t),parse:t=>Jn.test(t)?Jn.parse(t):js.test(t)?js.parse(t):Fu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Jn.transform(t):js.transform(t),getAnimatableNone:t=>{const i=er.parse(t);return i.alpha=0,er.transform(i)}},jC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EC(t){var i,s;return isNaN(t)&&typeof t=="string"&&(((i=t.match(Oh))==null?void 0:i.length)||0)+(((s=t.match(jC))==null?void 0:s.length)||0)>0}const ry="number",iy="color",RC="var",TC="var(",mx="${}",AC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qo(t){const i=t.toString(),s=[],o={color:[],number:[],var:[]},u=[];let S=0;const l=i.replace(AC,c=>(er.test(c)?(o.color.push(S),u.push(iy),s.push(er.parse(c))):c.startsWith(TC)?(o.var.push(S),u.push(RC),s.push(c)):(o.number.push(S),u.push(ry),s.push(parseFloat(c))),++S,mx)).split(mx);return{values:s,split:l,indexes:o,types:u}}function ny(t){return qo(t).values}function sy(t){const{split:i,types:s}=qo(t),o=i.length;return u=>{let S="";for(let b=0;b<o;b++)if(S+=i[b],u[b]!==void 0){const l=s[b];l===ry?S+=$o(u[b]):l===iy?S+=er.transform(u[b]):S+=u[b]}return S}}const zC=t=>typeof t=="number"?0:er.test(t)?er.getAnimatableNone(t):t;function LC(t){const i=ny(t);return sy(t)(i.map(zC))}const An={test:EC,parse:ny,createTransformer:sy,getAnimatableNone:LC};function ru(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(i-t)*6*s:s<1/2?i:s<2/3?t+(i-t)*(2/3-s)*6:t}function IC({hue:t,saturation:i,lightness:s,alpha:o}){t/=360,i/=100,s/=100;let u=0,S=0,b=0;if(!i)u=S=b=s;else{const l=s<.5?s*(1+i):s+i-s*i,c=2*s-l;u=ru(c,l,t+1/3),S=ru(c,l,t),b=ru(c,l,t-1/3)}return{red:Math.round(u*255),green:Math.round(S*255),blue:Math.round(b*255),alpha:o}}function Fl(t,i){return s=>s>0?i:t}const Wt=(t,i,s)=>t+(i-t)*s,iu=(t,i,s)=>{const o=t*t,u=s*(i*i-o)+o;return u<0?0:Math.sqrt(u)},DC=[Fu,Jn,js],MC=t=>DC.find(i=>i.test(t));function yx(t){const i=MC(t);if(!i)return!1;let s=i.parse(t);return i===js&&(s=IC(s)),s}const vx=(t,i)=>{const s=yx(t),o=yx(i);if(!s||!o)return Fl(t,i);const u={...s};return S=>(u.red=iu(s.red,o.red,S),u.green=iu(s.green,o.green,S),u.blue=iu(s.blue,o.blue,S),u.alpha=Wt(s.alpha,o.alpha,S),Jn.transform(u))},Wu=new Set(["none","hidden"]);function BC(t,i){return Wu.has(t)?s=>s<=0?t:i:s=>s>=1?i:t}function PC(t,i){return s=>Wt(t,i,s)}function Fh(t){return typeof t=="number"?PC:typeof t=="string"?Ph(t)?Fl:er.test(t)?vx:FC:Array.isArray(t)?oy:typeof t=="object"?er.test(t)?vx:OC:Fl}function oy(t,i){const s=[...t],o=s.length,u=t.map((S,b)=>Fh(S)(S,i[b]));return S=>{for(let b=0;b<o;b++)s[b]=u[b](S);return s}}function OC(t,i){const s={...t,...i},o={};for(const u in s)t[u]!==void 0&&i[u]!==void 0&&(o[u]=Fh(t[u])(t[u],i[u]));return u=>{for(const S in o)s[S]=o[S](u);return s}}function $C(t,i){const s=[],o={color:0,var:0,number:0};for(let u=0;u<i.values.length;u++){const S=i.types[u],b=t.indexes[S][o[S]],l=t.values[b]??0;s[u]=l,o[S]++}return s}const FC=(t,i)=>{const s=An.createTransformer(i),o=qo(t),u=qo(i);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?Wu.has(t)&&!u.values.length||Wu.has(i)&&!o.values.length?BC(t,i):ta(oy($C(o,u),u.values),s):Fl(t,i)};function ay(t,i,s){return typeof t=="number"&&typeof i=="number"&&typeof s=="number"?Wt(t,i,s):Fh(t)(t,i)}const WC=t=>{const i=({timestamp:s})=>t(s);return{start:(s=!0)=>Lt.update(i,s),stop:()=>Tn(i),now:()=>yr.isProcessing?yr.timestamp:Tr.now()}},ly=(t,i,s=10)=>{let o="";const u=Math.max(Math.round(i/s),2);for(let S=0;S<u;S++)o+=Math.round(t(S/(u-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Wl=2e4;function Wh(t){let i=0;const s=50;let o=t.next(i);for(;!o.done&&i<Wl;)i+=s,o=t.next(i);return i>=Wl?1/0:i}function NC(t,i=100,s){const o=s({...t,keyframes:[0,i]}),u=Math.min(Wh(o),Wl);return{type:"keyframes",ease:S=>o.next(u*S).value/i,duration:ni(u)}}const HC=5;function cy(t,i,s){const o=Math.max(i-HC,0);return W0(s-t(o),i-o)}const Kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nu=.001;function UC({duration:t=Kt.duration,bounce:i=Kt.bounce,velocity:s=Kt.velocity,mass:o=Kt.mass}){let u,S,b=1-i;b=zi(Kt.minDamping,Kt.maxDamping,b),t=zi(Kt.minDuration,Kt.maxDuration,ni(t)),b<1?(u=m=>{const v=m*b,d=v*t,y=v-s,_=Nu(m,b),j=Math.exp(-d);return nu-y/_*j},S=m=>{const d=m*b*t,y=d*s+s,_=Math.pow(b,2)*Math.pow(m,2)*t,j=Math.exp(-d),w=Nu(Math.pow(m,2),b);return(-u(m)+nu>0?-1:1)*((y-_)*j)/w}):(u=m=>{const v=Math.exp(-m*t),d=(m-s)*t+1;return-nu+v*d},S=m=>{const v=Math.exp(-m*t),d=(s-m)*(t*t);return v*d});const l=5/t,c=KC(u,S,l);if(t=vi(t),isNaN(c))return{stiffness:Kt.stiffness,damping:Kt.damping,duration:t};{const m=Math.pow(c,2)*o;return{stiffness:m,damping:b*2*Math.sqrt(o*m),duration:t}}}const VC=12;function KC(t,i,s){let o=s;for(let u=1;u<VC;u++)o=o-t(o)/i(o);return o}function Nu(t,i){return t*Math.sqrt(1-i*i)}const qC=["duration","bounce"],GC=["stiffness","damping","mass"];function bx(t,i){return i.some(s=>t[s]!==void 0)}function YC(t){let i={velocity:Kt.velocity,stiffness:Kt.stiffness,damping:Kt.damping,mass:Kt.mass,isResolvedFromDuration:!1,...t};if(!bx(t,GC)&&bx(t,qC))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),u=o*o,S=2*zi(.05,1,1-(t.bounce||0))*Math.sqrt(u);i={...i,mass:Kt.mass,stiffness:u,damping:S}}else{const s=UC(t);i={...i,...s,mass:Kt.mass},i.isResolvedFromDuration=!0}return i}function Nl(t=Kt.visualDuration,i=Kt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:o,restDelta:u}=s;const S=s.keyframes[0],b=s.keyframes[s.keyframes.length-1],l={done:!1,value:S},{stiffness:c,damping:m,mass:v,duration:d,velocity:y,isResolvedFromDuration:_}=YC({...s,velocity:-ni(s.velocity||0)}),j=y||0,w=m/(2*Math.sqrt(c*v)),h=b-S,p=ni(Math.sqrt(c/v)),f=Math.abs(h)<5;o||(o=f?Kt.restSpeed.granular:Kt.restSpeed.default),u||(u=f?Kt.restDelta.granular:Kt.restDelta.default);let g;if(w<1){const R=Nu(p,w);g=z=>{const A=Math.exp(-w*p*z);return b-A*((j+w*p*h)/R*Math.sin(R*z)+h*Math.cos(R*z))}}else if(w===1)g=R=>b-Math.exp(-p*R)*(h+(j+p*h)*R);else{const R=p*Math.sqrt(w*w-1);g=z=>{const A=Math.exp(-w*p*z),E=Math.min(R*z,300);return b-A*((j+w*p*h)*Math.sinh(E)+R*h*Math.cosh(E))/R}}const C={calculatedDuration:_&&d||null,next:R=>{const z=g(R);if(_)l.done=R>=d;else{let A=R===0?j:0;w<1&&(A=R===0?vi(j):cy(g,R,z));const E=Math.abs(A)<=o,B=Math.abs(b-z)<=u;l.done=E&&B}return l.value=l.done?b:z,l},toString:()=>{const R=Math.min(Wh(C),Wl),z=ly(A=>C.next(R*A).value,R,30);return R+"ms "+z},toTransition:()=>{}};return C}Nl.applyToOptions=t=>{const i=NC(t,100,Nl);return t.ease=i.ease,t.duration=vi(i.duration),t.type="keyframes",t};function Hu({keyframes:t,velocity:i=0,power:s=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:S=500,modifyTarget:b,min:l,max:c,restDelta:m=.5,restSpeed:v}){const d=t[0],y={done:!1,value:d},_=E=>l!==void 0&&E<l||c!==void 0&&E>c,j=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let w=s*i;const h=d+w,p=b===void 0?h:b(h);p!==h&&(w=p-d);const f=E=>-w*Math.exp(-E/o),g=E=>p+f(E),C=E=>{const B=f(E),P=g(E);y.done=Math.abs(B)<=m,y.value=y.done?p:P};let R,z;const A=E=>{_(y.value)&&(R=E,z=Nl({keyframes:[y.value,j(y.value)],velocity:cy(g,E,y.value),damping:u,stiffness:S,restDelta:m,restSpeed:v}))};return A(0),{calculatedDuration:null,next:E=>{let B=!1;return!z&&R===void 0&&(B=!0,C(E),A(E)),R!==void 0&&E>=R?z.next(E-R):(!B&&C(E),y)}}}function XC(t,i,s){const o=[],u=s||Gi.mix||ay,S=t.length-1;for(let b=0;b<S;b++){let l=u(t[b],t[b+1]);if(i){const c=Array.isArray(i)?i[b]||si:i;l=ta(c,l)}o.push(l)}return o}function JC(t,i,{clamp:s=!0,ease:o,mixer:u}={}){const S=t.length;if(Lh(S===i.length),S===1)return()=>i[0];if(S===2&&i[0]===i[1])return()=>i[1];const b=t[0]===t[1];t[0]>t[S-1]&&(t=[...t].reverse(),i=[...i].reverse());const l=XC(i,o,u),c=l.length,m=v=>{if(b&&v<t[0])return i[0];let d=0;if(c>1)for(;d<t.length-2&&!(v<t[d+1]);d++);const y=Vo(t[d],t[d+1],v);return l[d](y)};return s?v=>m(zi(t[0],t[S-1],v)):m}function QC(t,i){const s=t[t.length-1];for(let o=1;o<=i;o++){const u=Vo(0,i,o);t.push(Wt(s,1,u))}}function ZC(t){const i=[0];return QC(i,t.length-1),i}function ek(t,i){return t.map(s=>s*i)}function tk(t,i){return t.map(()=>i||X0).splice(0,t.length-1)}function Fo({duration:t=300,keyframes:i,times:s,ease:o="easeInOut"}){const u=hC(o)?o.map(fx):fx(o),S={done:!1,value:i[0]},b=ek(s&&s.length===i.length?s:ZC(i),t),l=JC(b,i,{ease:Array.isArray(u)?u:tk(i,u)});return{calculatedDuration:t,next:c=>(S.value=l(c),S.done=c>=t,S)}}const rk=t=>t!==null;function Nh(t,{repeat:i,repeatType:s="loop"},o,u=1){const S=t.filter(rk),l=u<0||i&&s!=="loop"&&i%2===1?0:S.length-1;return!l||o===void 0?S[l]:o}const ik={decay:Hu,inertia:Hu,tween:Fo,keyframes:Fo,spring:Nl};function dy(t){typeof t.type=="string"&&(t.type=ik[t.type])}class Hh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,s){return this.finished.then(i,s)}}const nk=t=>t/100;class Uh extends Hh{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,u;const{motionValue:s}=this.options;s&&s.updatedAt!==Tr.now()&&this.tick(Tr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(o=this.options).onStop)==null||u.call(o))},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;dy(i);const{type:s=Fo,repeat:o=0,repeatDelay:u=0,repeatType:S,velocity:b=0}=i;let{keyframes:l}=i;const c=s||Fo;c!==Fo&&typeof l[0]!="number"&&(this.mixKeyframes=ta(nk,ay(l[0],l[1])),l=[0,100]);const m=c({...i,keyframes:l});S==="mirror"&&(this.mirroredGenerator=c({...i,keyframes:[...l].reverse(),velocity:-b})),m.calculatedDuration===null&&(m.calculatedDuration=Wh(m));const{calculatedDuration:v}=m;this.calculatedDuration=v,this.resolvedDuration=v+u,this.totalDuration=this.resolvedDuration*(o+1)-u,this.generator=m}updateTime(i){const s=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(i,s=!1){const{generator:o,totalDuration:u,mixKeyframes:S,mirroredGenerator:b,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return o.next(0);const{delay:m=0,keyframes:v,repeat:d,repeatType:y,repeatDelay:_,type:j,onUpdate:w,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-u/this.speed,this.startTime)),s?this.currentTime=i:this.updateTime(i);const p=this.currentTime-m*(this.playbackSpeed>=0?1:-1),f=this.playbackSpeed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let g=this.currentTime,C=o;if(d){const E=Math.min(this.currentTime,u)/l;let B=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&B--,B=Math.min(B,d+1),!!(B%2)&&(y==="reverse"?(P=1-P,_&&(P-=_/l)):y==="mirror"&&(C=b)),g=zi(0,1,P)*l}const R=f?{done:!1,value:v[0]}:C.next(g);S&&(R.value=S(R.value));let{done:z}=R;!f&&c!==null&&(z=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return A&&j!==Hu&&(R.value=Nh(v,this.options,h,this.speed)),w&&w(R.value),A&&this.finish(),R}then(i,s){return this.finished.then(i,s)}get duration(){return ni(this.calculatedDuration)}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+ni(i)}get time(){return ni(this.currentTime)}set time(i){var s;i=vi(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(Tr.now());const s=this.playbackSpeed!==i;this.playbackSpeed=i,s&&(this.time=ni(this.currentTime))}play(){var u,S;if(this.isStopped)return;const{driver:i=WC,startTime:s}=this.options;this.driver||(this.driver=i(b=>this.tick(b))),(S=(u=this.options).onPlay)==null||S.call(u);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var i,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(i=this.options).onComplete)==null||s.call(i)}cancel(){var i,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(i=this.options).onCancel)==null||s.call(i)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),i.observe(this)}}function sk(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const Qn=t=>t*180/Math.PI,Uu=t=>{const i=Qn(Math.atan2(t[1],t[0]));return Vu(i)},ok={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Uu,rotateZ:Uu,skewX:t=>Qn(Math.atan(t[1])),skewY:t=>Qn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Vu=t=>(t=t%360,t<0&&(t+=360),t),_x=Uu,Sx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ak={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Sx,scaleY:wx,scale:t=>(Sx(t)+wx(t))/2,rotateX:t=>Vu(Qn(Math.atan2(t[6],t[5]))),rotateY:t=>Vu(Qn(Math.atan2(-t[2],t[0]))),rotateZ:_x,rotate:_x,skewX:t=>Qn(Math.atan(t[4])),skewY:t=>Qn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ku(t){return t.includes("scale")?1:0}function qu(t,i){if(!t||t==="none")return Ku(i);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,u;if(s)o=ak,u=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=ok,u=l}if(!u)return Ku(i);const S=o[i],b=u[1].split(",").map(ck);return typeof S=="function"?S(b):b[S]}const lk=(t,i)=>{const{transform:s="none"}=getComputedStyle(t);return qu(s,i)};function ck(t){return parseFloat(t.trim())}const Vs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ks=new Set(Vs),Cx=t=>t===Us||t===Qe,dk=new Set(["x","y","z"]),uk=Vs.filter(t=>!dk.has(t));function hk(t){const i=[];return uk.forEach(s=>{const o=t.getValue(s);o!==void 0&&(i.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),i}const wn={width:({x:t},{paddingLeft:i="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),height:({y:t},{paddingTop:i="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>qu(i,"x"),y:(t,{transform:i})=>qu(i,"y")};wn.translateX=wn.x;wn.translateY=wn.y;const Zn=new Set;let Gu=!1,Yu=!1,Xu=!1;function uy(){if(Yu){const t=Array.from(Zn).filter(o=>o.needsMeasurement),i=new Set(t.map(o=>o.element)),s=new Map;i.forEach(o=>{const u=hk(o);u.length&&(s.set(o,u),o.render())}),t.forEach(o=>o.measureInitialState()),i.forEach(o=>{o.render();const u=s.get(o);u&&u.forEach(([S,b])=>{var l;(l=o.getValue(S))==null||l.set(b)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}Yu=!1,Gu=!1,Zn.forEach(t=>t.complete(Xu)),Zn.clear()}function hy(){Zn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Yu=!0)})}function pk(){Xu=!0,hy(),uy(),Xu=!1}class Vh{constructor(i,s,o,u,S,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=s,this.name=o,this.motionValue=u,this.element=S,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(Zn.add(this),Gu||(Gu=!0,Lt.read(hy),Lt.resolveKeyframes(uy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:s,element:o,motionValue:u}=this;if(i[0]===null){const S=u==null?void 0:u.get(),b=i[i.length-1];if(S!==void 0)i[0]=S;else if(o&&s){const l=o.readValue(s,b);l!=null&&(i[0]=l)}i[0]===void 0&&(i[0]=b),u&&S===void 0&&u.set(i[0])}sk(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),Zn.delete(this)}cancel(){this.state==="scheduled"&&(Zn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fk=t=>t.startsWith("--");function gk(t,i,s){fk(i)?t.style.setProperty(i,s):t.style[i]=s}const xk=Ih(()=>window.ScrollTimeline!==void 0),mk={};function yk(t,i){const s=Ih(t);return()=>mk[i]??s()}const py=yk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bo=([t,i,s,o])=>`cubic-bezier(${t}, ${i}, ${s}, ${o})`,kx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bo([0,.65,.55,1]),circOut:Bo([.55,0,1,.45]),backIn:Bo([.31,.01,.66,-.59]),backOut:Bo([.33,1.53,.69,.99])};function fy(t,i){if(t)return typeof t=="function"?py()?ly(t,i):"ease-out":J0(t)?Bo(t):Array.isArray(t)?t.map(s=>fy(s,i)||kx.easeOut):kx[t]}function vk(t,i,s,{delay:o=0,duration:u=300,repeat:S=0,repeatType:b="loop",ease:l="easeOut",times:c}={},m=void 0){const v={[i]:s};c&&(v.offset=c);const d=fy(l,u);Array.isArray(d)&&(v.easing=d);const y={delay:o,duration:u,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:S+1,direction:b==="reverse"?"alternate":"normal"};return m&&(y.pseudoElement=m),t.animate(v,y)}function gy(t){return typeof t=="function"&&"applyToOptions"in t}function bk({type:t,...i}){return gy(t)&&py()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class xy extends Hh{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!i)return;const{element:s,name:o,keyframes:u,pseudoElement:S,allowFlatten:b=!1,finalKeyframe:l,onComplete:c}=i;this.isPseudoElement=!!S,this.allowFlatten=b,this.options=i,Lh(typeof i.type!="string");const m=bk(i);this.animation=vk(s,o,u,m,S),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const v=Nh(u,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(v):gk(s,o,v),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var i,s;(s=(i=this.animation).finish)==null||s.call(i)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,o,u;const i=(s=this.options)==null?void 0:s.element;!this.isPseudoElement&&(i!=null&&i.isConnected)&&((u=(o=this.animation).commitStyles)==null||u.call(o))}get duration(){var s,o;const i=((o=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:o.call(s).duration)||0;return ni(Number(i))}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+ni(i)}get time(){return ni(Number(this.animation.currentTime)||0)}set time(i){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=vi(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(i){this.manualStartTime=this.animation.startTime=i}attachTimeline({timeline:i,observe:s}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,i&&xk()?(this.animation.timeline=i,si):s(this)}}const my={anticipate:q0,backInOut:K0,circInOut:Y0};function _k(t){return t in my}function Sk(t){typeof t.ease=="string"&&_k(t.ease)&&(t.ease=my[t.ease])}const su=10;class wk extends xy{constructor(i){Sk(i),dy(i),super(i),i.startTime!==void 0&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:s,onUpdate:o,onComplete:u,element:S,...b}=this.options;if(!s)return;if(i!==void 0){s.set(i);return}const l=new Uh({...b,autoplay:!1}),c=Math.max(su,Tr.now()-this.startTime),m=zi(0,su,c-su);s.setWithVelocity(l.sample(Math.max(0,c-m)).value,l.sample(c).value,m),l.stop()}}const jx=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(An.test(t)||t==="0")&&!t.startsWith("url("));function Ck(t){const i=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==i)return!0}function kk(t,i,s,o){const u=t[0];if(u===null)return!1;if(i==="display"||i==="visibility")return!0;const S=t[t.length-1],b=jx(u,i),l=jx(S,i);return!b||!l?!1:Ck(t)||(s==="spring"||gy(s))&&o}function Ju(t){t.duration=0,t.type="keyframes"}const jk=new Set(["opacity","clipPath","filter","transform"]),Ek=Ih(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rk(t){var v;const{motionValue:i,name:s,repeatDelay:o,repeatType:u,damping:S,type:b}=t;if(!(((v=i==null?void 0:i.owner)==null?void 0:v.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:m}=i.owner.getProps();return Ek()&&s&&jk.has(s)&&(s!=="transform"||!m)&&!c&&!o&&u!=="mirror"&&S!==0&&b!=="inertia"}const Tk=40;class Ak extends Hh{constructor({autoplay:i=!0,delay:s=0,type:o="keyframes",repeat:u=0,repeatDelay:S=0,repeatType:b="loop",keyframes:l,name:c,motionValue:m,element:v,...d}){var j;super(),this.stop=()=>{var w,h;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(h=this.keyframeResolver)==null||h.cancel()},this.createdAt=Tr.now();const y={autoplay:i,delay:s,type:o,repeat:u,repeatDelay:S,repeatType:b,name:c,motionValue:m,element:v,...d},_=(v==null?void 0:v.KeyframeResolver)||Vh;this.keyframeResolver=new _(l,(w,h,p)=>this.onKeyframesResolved(w,h,y,!p),c,m,v),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(i,s,o,u){var h,p;this.keyframeResolver=void 0;const{name:S,type:b,velocity:l,delay:c,isHandoff:m,onUpdate:v}=o;this.resolvedAt=Tr.now(),kk(i,S,b,l)||((Gi.instantAnimations||!c)&&(v==null||v(Nh(i,o,s))),i[0]=i[i.length-1],Ju(o),o.repeat=0);const y={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>Tk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:i},_=!m&&Rk(y),j=(p=(h=y.motionValue)==null?void 0:h.owner)==null?void 0:p.current,w=_?new wk({...y,element:j}):new Uh(y);w.finished.then(()=>{this.notifyFinished()}).catch(si),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(i,s){return this.finished.finally(i).then(()=>{})}get animation(){var i;return this._animation||((i=this.keyframeResolver)==null||i.resume(),pk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var i;this._animation&&this.animation.cancel(),(i=this.keyframeResolver)==null||i.cancel()}}function yy(t,i,s,o=0,u=1){const S=Array.from(t).sort((m,v)=>m.sortNodePosition(v)).indexOf(i),b=t.size,l=(b-1)*o;return typeof s=="function"?s(S,b):u===1?S*o:l-S*o}const zk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Lk(t){const i=zk.exec(t);if(!i)return[,];const[,s,o,u]=i;return[`--${s??o}`,u]}function vy(t,i,s=1){const[o,u]=Lk(t);if(!o)return;const S=window.getComputedStyle(i).getPropertyValue(o);if(S){const b=S.trim();return O0(b)?parseFloat(b):b}return Ph(u)?vy(u,i,s+1):u}const Ik={type:"spring",stiffness:500,damping:25,restSpeed:10},Dk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Mk={type:"keyframes",duration:.8},Bk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pk=(t,{keyframes:i})=>i.length>2?Mk:Ks.has(t)?t.startsWith("scale")?Dk(i[1]):Ik:Bk,Ok=t=>t!==null;function $k(t,{repeat:i,repeatType:s="loop"},o){const u=t.filter(Ok),S=i&&s!=="loop"&&i%2===1?0:u.length-1;return u[S]}function by(t,i){if(t!=null&&t.inherit&&i){const{inherit:s,...o}=t;return{...i,...o}}return t}function Kh(t,i){const s=(t==null?void 0:t[i])??(t==null?void 0:t.default)??t;return s!==t?by(s,t):s}function Fk({when:t,delay:i,delayChildren:s,staggerChildren:o,staggerDirection:u,repeat:S,repeatType:b,repeatDelay:l,from:c,elapsed:m,...v}){return!!Object.keys(v).length}const qh=(t,i,s,o={},u,S)=>b=>{const l=Kh(o,t)||{},c=l.delay||o.delay||0;let{elapsed:m=0}=o;m=m-vi(c);const v={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:i.getVelocity(),...l,delay:-m,onUpdate:y=>{i.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{b(),l.onComplete&&l.onComplete()},name:t,motionValue:i,element:S?void 0:u};Fk(l)||Object.assign(v,Pk(t,v)),v.duration&&(v.duration=vi(v.duration)),v.repeatDelay&&(v.repeatDelay=vi(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let d=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(Ju(v),v.delay===0&&(d=!0)),(Gi.instantAnimations||Gi.skipAnimations||u!=null&&u.shouldSkipAnimations)&&(d=!0,Ju(v),v.delay=0),v.allowFlatten=!l.type&&!l.ease,d&&!S&&i.get()!==void 0){const y=$k(v.keyframes,l);if(y!==void 0){Lt.update(()=>{v.onUpdate(y),v.onComplete()});return}}return l.isSync?new Uh(v):new Ak(v)};function Ex(t){const i=[{},{}];return t==null||t.values.forEach((s,o)=>{i[0][o]=s.get(),i[1][o]=s.getVelocity()}),i}function Gh(t,i,s,o){if(typeof i=="function"){const[u,S]=Ex(o);i=i(s!==void 0?s:t.custom,u,S)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[u,S]=Ex(o);i=i(s!==void 0?s:t.custom,u,S)}return i}function Is(t,i,s){const o=t.getProps();return Gh(o,i,s!==void 0?s:o.custom,t)}const _y=new Set(["width","height","top","left","right","bottom",...Vs]),Rx=30,Wk=t=>!isNaN(parseFloat(t));class Nk{constructor(i,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var S;const u=Tr.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((S=this.events.change)==null||S.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=s.owner}setCurrent(i){this.current=i,this.updatedAt=Tr.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=Wk(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new Dh);const o=this.events[i].add(s);return i==="change"?()=>{o(),Lt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-o}jump(i,s=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var i;(i=this.events.change)==null||i.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=Tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>Rx)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Rx);return W0(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var i,s;(i=this.dependents)==null||i.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Os(t,i){return new Nk(t,i)}const Qu=t=>Array.isArray(t);function Hk(t,i,s){t.hasValue(i)?t.getValue(i).set(s):t.addValue(i,Os(s))}function Uk(t){return Qu(t)?t[t.length-1]||0:t}function Vk(t,i){const s=Is(t,i);let{transitionEnd:o={},transition:u={},...S}=s||{};S={...S,...o};for(const b in S){const l=Uk(S[b]);Hk(t,b,l)}}const Cr=t=>!!(t&&t.getVelocity);function Kk(t){return!!(Cr(t)&&t.add)}function Zu(t,i){const s=t.getValue("willChange");if(Kk(s))return s.add(i);if(!s&&Gi.WillChange){const o=new Gi.WillChange("auto");t.addValue("willChange",o),o.add(i)}}function Yh(t){return t.replace(/([A-Z])/g,i=>`-${i.toLowerCase()}`)}const qk="framerAppearId",Sy="data-"+Yh(qk);function wy(t){return t.props[Sy]}function Gk({protectedKeys:t,needsAnimating:i},s){const o=t.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,o}function Cy(t,i,{delay:s=0,transitionOverride:o,type:u}={}){let{transition:S,transitionEnd:b,...l}=i;const c=t.getDefaultTransition();S=S?by(S,c):c;const m=S==null?void 0:S.reduceMotion;o&&(S=o);const v=[],d=u&&t.animationState&&t.animationState.getState()[u];for(const y in l){const _=t.getValue(y,t.latestValues[y]??null),j=l[y];if(j===void 0||d&&Gk(d,y))continue;const w={delay:s,...Kh(S||{},y)},h=_.get();if(h!==void 0&&!_.isAnimating&&!Array.isArray(j)&&j===h&&!w.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const C=wy(t);if(C){const R=window.MotionHandoffAnimation(C,y,Lt);R!==null&&(w.startTime=R,p=!0)}}Zu(t,y);const f=m??t.shouldReduceMotion;_.start(qh(y,_,j,f&&_y.has(y)?{type:!1}:w,t,p));const g=_.animation;g&&v.push(g)}if(b){const y=()=>Lt.update(()=>{b&&Vk(t,b)});v.length?Promise.all(v).then(y):y()}return v}function eh(t,i,s={}){var c;const o=Is(t,i,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(u=s.transitionOverride);const S=o?()=>Promise.all(Cy(t,o,s)):()=>Promise.resolve(),b=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:d,staggerDirection:y}=u;return Yk(t,i,m,v,d,y,s)}:()=>Promise.resolve(),{when:l}=u;if(l){const[m,v]=l==="beforeChildren"?[S,b]:[b,S];return m().then(()=>v())}else return Promise.all([S(),b(s.delay)])}function Yk(t,i,s=0,o=0,u=0,S=1,b){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",i),l.push(eh(c,i,{...b,delay:s+(typeof o=="function"?0:o)+yy(t.variantChildren,c,o,u,S)}).then(()=>c.notify("AnimationComplete",i)));return Promise.all(l)}function Xk(t,i,s={}){t.notify("AnimationStart",i);let o;if(Array.isArray(i)){const u=i.map(S=>eh(t,S,s));o=Promise.all(u)}else if(typeof i=="string")o=eh(t,i,s);else{const u=typeof i=="function"?Is(t,i,s.custom):i;o=Promise.all(Cy(t,u,s))}return o.then(()=>{t.notify("AnimationComplete",i)})}const Jk={test:t=>t==="auto",parse:t=>t},ky=t=>i=>i.test(t),jy=[Us,Qe,Ri,yn,kC,CC,Jk],Tx=t=>jy.find(ky(t));function Qk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||F0(t):!0}const Zk=new Set(["brightness","contrast","saturate","opacity"]);function ej(t){const[i,s]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[o]=s.match(Oh)||[];if(!o)return t;const u=s.replace(o,"");let S=Zk.has(i)?1:0;return o!==s&&(S*=100),i+"("+S+u+")"}const tj=/\b([a-z-]*)\(.*?\)/gu,th={...An,getAnimatableNone:t=>{const i=t.match(tj);return i?i.map(ej).join(" "):t}},Ax={...Us,transform:Math.round},rj={rotate:yn,rotateX:yn,rotateY:yn,rotateZ:yn,scale:xl,scaleX:xl,scaleY:xl,scaleZ:xl,skew:yn,skewX:yn,skewY:yn,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Ko,originX:xx,originY:xx,originZ:Qe},Xh={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,inset:Qe,insetBlock:Qe,insetBlockStart:Qe,insetBlockEnd:Qe,insetInline:Qe,insetInlineStart:Qe,insetInlineEnd:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,paddingBlock:Qe,paddingBlockStart:Qe,paddingBlockEnd:Qe,paddingInline:Qe,paddingInlineStart:Qe,paddingInlineEnd:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,marginBlock:Qe,marginBlockStart:Qe,marginBlockEnd:Qe,marginInline:Qe,marginInlineStart:Qe,marginInlineEnd:Qe,fontSize:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe,...rj,zIndex:Ax,fillOpacity:Ko,strokeOpacity:Ko,numOctaves:Ax},ij={...Xh,color:er,backgroundColor:er,outlineColor:er,fill:er,stroke:er,borderColor:er,borderTopColor:er,borderRightColor:er,borderBottomColor:er,borderLeftColor:er,filter:th,WebkitFilter:th},Ey=t=>ij[t];function Ry(t,i){let s=Ey(t);return s!==th&&(s=An),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const nj=new Set(["auto","none","0"]);function sj(t,i,s){let o=0,u;for(;o<t.length&&!u;){const S=t[o];typeof S=="string"&&!nj.has(S)&&qo(S).values.length&&(u=t[o]),o++}if(u&&s)for(const S of i)t[S]=Ry(s,u)}class oj extends Vh{constructor(i,s,o,u,S){super(i,s,o,u,S,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let v=0;v<i.length;v++){let d=i[v];if(typeof d=="string"&&(d=d.trim(),Ph(d))){const y=vy(d,s.current);y!==void 0&&(i[v]=y),v===i.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!_y.has(o)||i.length!==2)return;const[u,S]=i,b=Tx(u),l=Tx(S),c=gx(u),m=gx(S);if(c!==m&&wn[o]){this.needsMeasurement=!0;return}if(b!==l)if(Cx(b)&&Cx(l))for(let v=0;v<i.length;v++){const d=i[v];typeof d=="string"&&(i[v]=parseFloat(d))}else wn[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:s}=this,o=[];for(let u=0;u<i.length;u++)(i[u]===null||Qk(i[u]))&&o.push(u);o.length&&sj(i,o,s)}measureInitialState(){const{element:i,unresolvedKeyframes:s,name:o}=this;if(!i||!i.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wn[o](i.measureViewportBox(),window.getComputedStyle(i.current)),s[0]=this.measuredOrigin;const u=s[s.length-1];u!==void 0&&i.getValue(o,u).jump(u,!1)}measureEndState(){var l;const{element:i,name:s,unresolvedKeyframes:o}=this;if(!i||!i.current)return;const u=i.getValue(s);u&&u.jump(this.measuredOrigin,!1);const S=o.length-1,b=o[S];o[S]=wn[s](i.measureViewportBox(),window.getComputedStyle(i.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,m])=>{i.getValue(c).set(m)}),this.resolveNoneKeyframes()}}const aj=new Set(["opacity","clipPath","filter","transform"]);function Ty(t,i,s){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const u=(s==null?void 0:s[t])??o.querySelectorAll(t);return u?Array.from(u):[]}return Array.from(t).filter(o=>o!=null)}const Ay=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function rh(t){return $0(t)&&"offsetHeight"in t}const{schedule:Jh}=Q0(queueMicrotask,!1),mi={x:!1,y:!1};function zy(){return mi.x||mi.y}function lj(t){return t==="x"||t==="y"?mi[t]?null:(mi[t]=!0,()=>{mi[t]=!1}):mi.x||mi.y?null:(mi.x=mi.y=!0,()=>{mi.x=mi.y=!1})}function Ly(t,i){const s=Ty(t),o=new AbortController,u={passive:!0,...i,signal:o.signal};return[s,u,()=>o.abort()]}function cj(t){return!(t.pointerType==="touch"||zy())}function dj(t,i,s={}){const[o,u,S]=Ly(t,s);return o.forEach(b=>{let l=!1,c=!1,m;const v=()=>{b.removeEventListener("pointerleave",j)},d=h=>{m&&(m(h),m=void 0),v()},y=h=>{l=!1,window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",y),c&&(c=!1,d(h))},_=()=>{l=!0,window.addEventListener("pointerup",y,u),window.addEventListener("pointercancel",y,u)},j=h=>{if(h.pointerType!=="touch"){if(l){c=!0;return}d(h)}},w=h=>{if(!cj(h))return;c=!1;const p=i(b,h);typeof p=="function"&&(m=p,b.addEventListener("pointerleave",j,u))};b.addEventListener("pointerenter",w,u),b.addEventListener("pointerdown",_,u)}),S}const Iy=(t,i)=>i?t===i?!0:Iy(t,i.parentElement):!1,Qh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hj(t){return uj.has(t.tagName)||t.isContentEditable===!0}const pj=new Set(["INPUT","SELECT","TEXTAREA"]);function fj(t){return pj.has(t.tagName)||t.isContentEditable===!0}const zl=new WeakSet;function zx(t){return i=>{i.key==="Enter"&&t(i)}}function ou(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const gj=(t,i)=>{const s=t.currentTarget;if(!s)return;const o=zx(()=>{if(zl.has(s))return;ou(s,"down");const u=zx(()=>{ou(s,"up")}),S=()=>ou(s,"cancel");s.addEventListener("keyup",u,i),s.addEventListener("blur",S,i)});s.addEventListener("keydown",o,i),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),i)};function Lx(t){return Qh(t)&&!zy()}const Ix=new WeakSet;function xj(t,i,s={}){const[o,u,S]=Ly(t,s),b=l=>{const c=l.currentTarget;if(!Lx(l)||Ix.has(l))return;zl.add(c),s.stopPropagation&&Ix.add(l);const m=i(c,l),v=(_,j)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",y),zl.has(c)&&zl.delete(c),Lx(_)&&typeof m=="function"&&m(_,{success:j})},d=_=>{v(_,c===window||c===document||s.useGlobalTarget||Iy(c,_.target))},y=_=>{v(_,!1)};window.addEventListener("pointerup",d,u),window.addEventListener("pointercancel",y,u)};return o.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",b,u),rh(l)&&(l.addEventListener("focus",m=>gj(m,u)),!hj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),S}function Zh(t){return $0(t)&&"ownerSVGElement"in t}const Ll=new WeakMap;let vn;const Dy=(t,i,s)=>(o,u)=>u&&u[0]?u[0][t+"Size"]:Zh(o)&&"getBBox"in o?o.getBBox()[i]:o[s],mj=Dy("inline","width","offsetWidth"),yj=Dy("block","height","offsetHeight");function vj({target:t,borderBoxSize:i}){var s;(s=Ll.get(t))==null||s.forEach(o=>{o(t,{get width(){return mj(t,i)},get height(){return yj(t,i)}})})}function bj(t){t.forEach(vj)}function _j(){typeof ResizeObserver>"u"||(vn=new ResizeObserver(bj))}function Sj(t,i){vn||_j();const s=Ty(t);return s.forEach(o=>{let u=Ll.get(o);u||(u=new Set,Ll.set(o,u)),u.add(i),vn==null||vn.observe(o)}),()=>{s.forEach(o=>{const u=Ll.get(o);u==null||u.delete(i),u!=null&&u.size||vn==null||vn.unobserve(o)})}}const Il=new Set;let Es;function wj(){Es=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Il.forEach(i=>i(t))},window.addEventListener("resize",Es)}function Cj(t){return Il.add(t),Es||wj(),()=>{Il.delete(t),!Il.size&&typeof Es=="function"&&(window.removeEventListener("resize",Es),Es=void 0)}}function Dx(t,i){return typeof t=="function"?Cj(t):Sj(t,i)}function kj(t){return Zh(t)&&t.tagName==="svg"}const jj=[...jy,er,An],Ej=t=>jj.find(ky(t)),Mx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rs=()=>({x:Mx(),y:Mx()}),Bx=()=>({min:0,max:0}),lr=()=>({x:Bx(),y:Bx()}),Rj=new WeakMap;function rc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Go(t){return typeof t=="string"||Array.isArray(t)}const ep=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tp=["initial",...ep];function ic(t){return rc(t.animate)||tp.some(i=>Go(t[i]))}function My(t){return!!(ic(t)||t.variants)}function Tj(t,i,s){for(const o in i){const u=i[o],S=s[o];if(Cr(u))t.addValue(o,u);else if(Cr(S))t.addValue(o,Os(u,{owner:t}));else if(S!==u)if(t.hasValue(o)){const b=t.getValue(o);b.liveStyle===!0?b.jump(u):b.hasAnimated||b.set(u)}else{const b=t.getStaticValue(o);t.addValue(o,Os(b!==void 0?b:u,{owner:t}))}}for(const o in s)i[o]===void 0&&t.removeValue(o);return i}const ih={current:null},By={current:!1},Aj=typeof window<"u";function zj(){if(By.current=!0,!!Aj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>ih.current=t.matches;t.addEventListener("change",i),i()}else ih.current=!1}const Px=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Hl={};function Py(t){Hl=t}function Lj(){return Hl}class Ij{scrapeMotionValuesFromProps(i,s,o){return{}}constructor({parent:i,props:s,presenceContext:o,reducedMotionConfig:u,skipAnimations:S,blockInitialAnimation:b,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Vh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Tr.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Lt.render(this.render,!1,!0))};const{latestValues:m,renderState:v}=l;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=v,this.parent=i,this.props=s,this.presenceContext=o,this.depth=i?i.depth+1:0,this.reducedMotionConfig=u,this.skipAnimationsConfig=S,this.options=c,this.blockInitialAnimation=!!b,this.isControllingVariants=ic(s),this.isVariantNode=My(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:d,...y}=this.scrapeMotionValuesFromProps(s,{},this);for(const _ in y){const j=y[_];m[_]!==void 0&&Cr(j)&&j.set(m[_])}}mount(i){var s,o;if(this.hasBeenMounted)for(const u in this.initialValues)(s=this.values.get(u))==null||s.jump(this.initialValues[u]),this.latestValues[u]=this.initialValues[u];this.current=i,Rj.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,S)=>this.bindToMotionValue(S,u)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(By.current||zj(),this.shouldReduceMotion=ih.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(o=this.parent)==null||o.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var i;this.projection&&this.projection.unmount(),Tn(this.notifyUpdate),Tn(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(i=this.parent)==null||i.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const o=this.features[s];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,s){if(this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)(),s.accelerate&&aj.has(i)&&this.current instanceof HTMLElement){const{factory:b,keyframes:l,times:c,ease:m,duration:v}=s.accelerate,d=new xy({element:this.current,name:i,keyframes:l,times:c,ease:m,duration:vi(v)}),y=b(d);this.valueSubscriptions.set(i,()=>{y(),d.cancel()});return}const o=Ks.has(i);o&&this.onBindTransform&&this.onBindTransform();const u=s.on("change",b=>{this.latestValues[i]=b,this.props.onUpdate&&Lt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;typeof window<"u"&&window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,i,s)),this.valueSubscriptions.set(i,()=>{u(),S&&S(),s.owner&&s.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in Hl){const s=Hl[i];if(!s)continue;const{isEnabled:o,Feature:u}=s;if(!this.features[i]&&u&&o(this.props)&&(this.features[i]=new u(this)),this.features[i]){const S=this.features[i];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lr()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<Px.length;o++){const u=Px[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const S="on"+u,b=i[S];b&&(this.propEventSubscriptions[u]=this.on(u,b))}this.prevMotionValues=Tj(this,this.scrapeMotionValuesFromProps(i,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){const o=this.values.get(i);s!==o&&(o&&this.removeValue(i),this.bindToMotionValue(i,s),this.values.set(i,s),this.latestValues[i]=s.get())}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let o=this.values.get(i);return o===void 0&&s!==void 0&&(o=Os(s===null?void 0:s,{owner:this}),this.addValue(i,o)),o}readValue(i,s){let o=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return o!=null&&(typeof o=="string"&&(O0(o)||F0(o))?o=parseFloat(o):!Ej(o)&&An.test(s)&&(o=Ry(i,s)),this.setBaseTarget(i,Cr(o)?o.get():o)),Cr(o)?o.get():o}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){var S;const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const b=Gh(this.props,s,(S=this.presenceContext)==null?void 0:S.custom);b&&(o=b[i])}if(s&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,i);return u!==void 0&&!Cr(u)?u:this.initialValues[i]!==void 0&&o===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new Dh),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}scheduleRenderMicrotask(){Jh.render(this.render)}}class Oy extends Ij{constructor(){super(...arguments),this.KeyframeResolver=oj}sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){const o=i.style;return o?o[s]:void 0}removeValueFromRenderState(i,{vars:s,style:o}){delete s[i],delete o[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;Cr(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class Ln{constructor(i){this.isMounted=!1,this.node=i}update(){}}function $y({top:t,left:i,right:s,bottom:o}){return{x:{min:i,max:s},y:{min:t,max:o}}}function Dj({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function Mj(t,i){if(!i)return t;const s=i({x:t.left,y:t.top}),o=i({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function au(t){return t===void 0||t===1}function nh({scale:t,scaleX:i,scaleY:s}){return!au(t)||!au(i)||!au(s)}function Yn(t){return nh(t)||Fy(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Fy(t){return Ox(t.x)||Ox(t.y)}function Ox(t){return t&&t!=="0%"}function Ul(t,i,s){const o=t-s,u=i*o;return s+u}function $x(t,i,s,o,u){return u!==void 0&&(t=Ul(t,u,o)),Ul(t,s,o)+i}function sh(t,i=0,s=1,o,u){t.min=$x(t.min,i,s,o,u),t.max=$x(t.max,i,s,o,u)}function Wy(t,{x:i,y:s}){sh(t.x,i.translate,i.scale,i.originPoint),sh(t.y,s.translate,s.scale,s.originPoint)}const Fx=.999999999999,Wx=1.0000000000001;function Bj(t,i,s,o=!1){const u=s.length;if(!u)return;i.x=i.y=1;let S,b;for(let l=0;l<u;l++){S=s[l],b=S.projectionDelta;const{visualElement:c}=S.options;c&&c.props.style&&c.props.style.display==="contents"||(o&&S.options.layoutScroll&&S.scroll&&S!==S.root&&As(t,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),b&&(i.x*=b.x.scale,i.y*=b.y.scale,Wy(t,b)),o&&Yn(S.latestValues)&&As(t,S.latestValues))}i.x<Wx&&i.x>Fx&&(i.x=1),i.y<Wx&&i.y>Fx&&(i.y=1)}function Ts(t,i){t.min=t.min+i,t.max=t.max+i}function Nx(t,i,s,o,u=.5){const S=Wt(t.min,t.max,u);sh(t,i,s,S,o)}function As(t,i){Nx(t.x,i.x,i.scaleX,i.scale,i.originX),Nx(t.y,i.y,i.scaleY,i.scale,i.originY)}function Ny(t,i){return $y(Mj(t.getBoundingClientRect(),i))}function Pj(t,i,s){const o=Ny(t,s),{scroll:u}=i;return u&&(Ts(o.x,u.offset.x),Ts(o.y,u.offset.y)),o}const Oj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$j=Vs.length;function Fj(t,i,s){let o="",u=!0;for(let S=0;S<$j;S++){const b=Vs[S],l=t[b];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(b.startsWith("scale")?1:0);else{const m=parseFloat(l);c=b.startsWith("scale")?m===1:m===0}if(!c||s){const m=Ay(l,Xh[b]);if(!c){u=!1;const v=Oj[b]||b;o+=`${v}(${m}) `}s&&(i[b]=m)}}return o=o.trim(),s?o=s(i,u?"":o):u&&(o="none"),o}function rp(t,i,s){const{style:o,vars:u,transformOrigin:S}=t;let b=!1,l=!1;for(const c in i){const m=i[c];if(Ks.has(c)){b=!0;continue}else if(ey(c)){u[c]=m;continue}else{const v=Ay(m,Xh[c]);c.startsWith("origin")?(l=!0,S[c]=v):o[c]=v}}if(i.transform||(b||s?o.transform=Fj(i,t.transform,s):o.transform&&(o.transform="none")),l){const{originX:c="50%",originY:m="50%",originZ:v=0}=S;o.transformOrigin=`${c} ${m} ${v}`}}function Hy(t,{style:i,vars:s},o,u){const S=t.style;let b;for(b in i)S[b]=i[b];u==null||u.applyProjectionStyles(S,o);for(b in s)S.setProperty(b,s[b])}function Hx(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const Ao={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(Qe.test(t))t=parseFloat(t);else return t;const s=Hx(t,i.target.x),o=Hx(t,i.target.y);return`${s}% ${o}%`}},Wj={correct:(t,{treeScale:i,projectionDelta:s})=>{const o=t,u=An.parse(t);if(u.length>5)return o;const S=An.createTransformer(t),b=typeof u[0]!="number"?1:0,l=s.x.scale*i.x,c=s.y.scale*i.y;u[0+b]/=l,u[1+b]/=c;const m=Wt(l,c,.5);return typeof u[2+b]=="number"&&(u[2+b]/=m),typeof u[3+b]=="number"&&(u[3+b]/=m),S(u)}},oh={borderRadius:{...Ao,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ao,borderTopRightRadius:Ao,borderBottomLeftRadius:Ao,borderBottomRightRadius:Ao,boxShadow:Wj};function Uy(t,{layout:i,layoutId:s}){return Ks.has(t)||t.startsWith("origin")||(i||s!==void 0)&&(!!oh[t]||t==="opacity")}function ip(t,i,s){var b;const o=t.style,u=i==null?void 0:i.style,S={};if(!o)return S;for(const l in o)(Cr(o[l])||u&&Cr(u[l])||Uy(l,t)||((b=s==null?void 0:s.getValue(l))==null?void 0:b.liveStyle)!==void 0)&&(S[l]=o[l]);return S}function Nj(t){return window.getComputedStyle(t)}class Hj extends Oy{constructor(){super(...arguments),this.type="html",this.renderInstance=Hy}readValueFromInstance(i,s){var o;if(Ks.has(s))return(o=this.projection)!=null&&o.isProjecting?Ku(s):lk(i,s);{const u=Nj(i),S=(ey(s)?u.getPropertyValue(s):u[s])||0;return typeof S=="string"?S.trim():S}}measureInstanceViewportBox(i,{transformPagePoint:s}){return Ny(i,s)}build(i,s,o){rp(i,s,o.transformTemplate)}scrapeMotionValuesFromProps(i,s,o){return ip(i,s,o)}}const Uj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vj={offset:"strokeDashoffset",array:"strokeDasharray"};function Kj(t,i,s=1,o=0,u=!0){t.pathLength=1;const S=u?Uj:Vj;t[S.offset]=`${-o}`,t[S.array]=`${i} ${s}`}const qj=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Vy(t,{attrX:i,attrY:s,attrScale:o,pathLength:u,pathSpacing:S=1,pathOffset:b=0,...l},c,m,v){if(rp(t,l,m),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:y}=t;d.transform&&(y.transform=d.transform,delete d.transform),(y.transform||d.transformOrigin)&&(y.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),y.transform&&(y.transformBox=(v==null?void 0:v.transformBox)??"fill-box",delete d.transformBox);for(const _ of qj)d[_]!==void 0&&(y[_]=d[_],delete d[_]);i!==void 0&&(d.x=i),s!==void 0&&(d.y=s),o!==void 0&&(d.scale=o),u!==void 0&&Kj(d,u,S,b,!1)}const Ky=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),qy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gj(t,i,s,o){Hy(t,i,void 0,o);for(const u in i.attrs)t.setAttribute(Ky.has(u)?u:Yh(u),i.attrs[u])}function Gy(t,i,s){const o=ip(t,i,s);for(const u in t)if(Cr(t[u])||Cr(i[u])){const S=Vs.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;o[S]=t[u]}return o}class Yj extends Oy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lr}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(Ks.has(s)){const o=Ey(s);return o&&o.default||0}return s=Ky.has(s)?s:Yh(s),i.getAttribute(s)}scrapeMotionValuesFromProps(i,s,o){return Gy(i,s,o)}build(i,s,o){Vy(i,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(i,s,o,u){Gj(i,s,o,u)}mount(i){this.isSVGTag=qy(i.tagName),super.mount(i)}}const Xj=tp.length;function Yy(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Yy(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const i={};for(let s=0;s<Xj;s++){const o=tp[s],u=t.props[o];(Go(u)||u===!1)&&(i[o]=u)}return i}function Xy(t,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(i[o]!==t[o])return!1;return!0}const Jj=[...ep].reverse(),Qj=ep.length;function Zj(t){return i=>Promise.all(i.map(({animation:s,options:o})=>Xk(t,s,o)))}function e5(t){let i=Zj(t),s=Ux(),o=!0;const u=c=>(m,v)=>{var y;const d=Is(t,v,c==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(d){const{transition:_,transitionEnd:j,...w}=d;m={...m,...w,...j}}return m};function S(c){i=c(t)}function b(c){const{props:m}=t,v=Yy(t.parent)||{},d=[],y=new Set;let _={},j=1/0;for(let h=0;h<Qj;h++){const p=Jj[h],f=s[p],g=m[p]!==void 0?m[p]:v[p],C=Go(g),R=p===c?f.isActive:null;R===!1&&(j=h);let z=g===v[p]&&g!==m[p]&&C;if(z&&o&&t.manuallyAnimateOnMount&&(z=!1),f.protectedKeys={..._},!f.isActive&&R===null||!g&&!f.prevProp||rc(g)||typeof g=="boolean")continue;if(p==="exit"&&f.isActive&&R!==!0){f.prevResolvedValues&&(_={..._,...f.prevResolvedValues});continue}const A=t5(f.prevProp,g);let E=A||p===c&&f.isActive&&!z&&C||h>j&&C,B=!1;const P=Array.isArray(g)?g:[g];let N=P.reduce(u(p),{});R===!1&&(N={});const{prevResolvedValues:K={}}=f,U={...K,...N},ee=J=>{E=!0,y.has(J)&&(B=!0,y.delete(J)),f.needsAnimating[J]=!0;const Y=t.getValue(J);Y&&(Y.liveStyle=!1)};for(const J in U){const Y=N[J],M=K[J];if(_.hasOwnProperty(J))continue;let I=!1;Qu(Y)&&Qu(M)?I=!Xy(Y,M):I=Y!==M,I?Y!=null?ee(J):y.add(J):Y!==void 0&&y.has(J)?ee(J):f.protectedKeys[J]=!0}f.prevProp=g,f.prevResolvedValues=N,f.isActive&&(_={..._,...N}),o&&t.blockInitialAnimation&&(E=!1);const V=z&&A;E&&(!V||B)&&d.push(...P.map(J=>{const Y={type:p};if(typeof J=="string"&&o&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:M}=t,I=Is(M,J);if(M.enteringChildren&&I){const{delayChildren:D}=I.transition||{};Y.delay=yy(M.enteringChildren,t,D)}}return{animation:J,options:Y}}))}if(y.size){const h={};if(typeof m.initial!="boolean"){const p=Is(t,Array.isArray(m.initial)?m.initial[0]:m.initial);p&&p.transition&&(h.transition=p.transition)}y.forEach(p=>{const f=t.getBaseTarget(p),g=t.getValue(p);g&&(g.liveStyle=!0),h[p]=f??null}),d.push({animation:h})}let w=!!d.length;return o&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(w=!1),o=!1,w?i(d):Promise.resolve()}function l(c,m){var d;if(s[c].isActive===m)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(y=>{var _;return(_=y.animationState)==null?void 0:_.setActive(c,m)}),s[c].isActive=m;const v=b(c);for(const y in s)s[y].protectedKeys={};return v}return{animateChanges:b,setActive:l,setAnimateFunction:S,getState:()=>s,reset:()=>{s=Ux()}}}function t5(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!Xy(i,t):!1}function Vn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ux(){return{animate:Vn(!0),whileInView:Vn(),whileHover:Vn(),whileTap:Vn(),whileDrag:Vn(),whileFocus:Vn(),exit:Vn()}}function Vx(t,i){t.min=i.min,t.max=i.max}function xi(t,i){Vx(t.x,i.x),Vx(t.y,i.y)}function Kx(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}const Jy=1e-4,r5=1-Jy,i5=1+Jy,Qy=.01,n5=0-Qy,s5=0+Qy;function Ar(t){return t.max-t.min}function o5(t,i,s){return Math.abs(t-i)<=s}function qx(t,i,s,o=.5){t.origin=o,t.originPoint=Wt(i.min,i.max,t.origin),t.scale=Ar(s)/Ar(i),t.translate=Wt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=r5&&t.scale<=i5||isNaN(t.scale))&&(t.scale=1),(t.translate>=n5&&t.translate<=s5||isNaN(t.translate))&&(t.translate=0)}function Wo(t,i,s,o){qx(t.x,i.x,s.x,o?o.originX:void 0),qx(t.y,i.y,s.y,o?o.originY:void 0)}function Gx(t,i,s){t.min=s.min+i.min,t.max=t.min+Ar(i)}function a5(t,i,s){Gx(t.x,i.x,s.x),Gx(t.y,i.y,s.y)}function Yx(t,i,s){t.min=i.min-s.min,t.max=t.min+Ar(i)}function Vl(t,i,s){Yx(t.x,i.x,s.x),Yx(t.y,i.y,s.y)}function Xx(t,i,s,o,u){return t-=i,t=Ul(t,1/s,o),u!==void 0&&(t=Ul(t,1/u,o)),t}function l5(t,i=0,s=1,o=.5,u,S=t,b=t){if(Ri.test(i)&&(i=parseFloat(i),i=Wt(b.min,b.max,i/100)-b.min),typeof i!="number")return;let l=Wt(S.min,S.max,o);t===S&&(l-=i),t.min=Xx(t.min,i,s,l,u),t.max=Xx(t.max,i,s,l,u)}function Jx(t,i,[s,o,u],S,b){l5(t,i[s],i[o],i[u],i.scale,S,b)}const c5=["x","scaleX","originX"],d5=["y","scaleY","originY"];function Qx(t,i,s,o){Jx(t.x,i,c5,s?s.x:void 0,o?o.x:void 0),Jx(t.y,i,d5,s?s.y:void 0,o?o.y:void 0)}function Zx(t){return t.translate===0&&t.scale===1}function Zy(t){return Zx(t.x)&&Zx(t.y)}function em(t,i){return t.min===i.min&&t.max===i.max}function u5(t,i){return em(t.x,i.x)&&em(t.y,i.y)}function tm(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function e1(t,i){return tm(t.x,i.x)&&tm(t.y,i.y)}function rm(t){return Ar(t.x)/Ar(t.y)}function im(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}function ji(t){return[t("x"),t("y")]}function h5(t,i,s){let o="";const u=t.x.translate/i.x,S=t.y.translate/i.y,b=(s==null?void 0:s.z)||0;if((u||S||b)&&(o=`translate3d(${u}px, ${S}px, ${b}px) `),(i.x!==1||i.y!==1)&&(o+=`scale(${1/i.x}, ${1/i.y}) `),s){const{transformPerspective:m,rotate:v,rotateX:d,rotateY:y,skewX:_,skewY:j}=s;m&&(o=`perspective(${m}px) ${o}`),v&&(o+=`rotate(${v}deg) `),d&&(o+=`rotateX(${d}deg) `),y&&(o+=`rotateY(${y}deg) `),_&&(o+=`skewX(${_}deg) `),j&&(o+=`skewY(${j}deg) `)}const l=t.x.scale*i.x,c=t.y.scale*i.y;return(l!==1||c!==1)&&(o+=`scale(${l}, ${c})`),o||"none"}const t1=["TopLeft","TopRight","BottomLeft","BottomRight"],p5=t1.length,nm=t=>typeof t=="string"?parseFloat(t):t,sm=t=>typeof t=="number"||Qe.test(t);function f5(t,i,s,o,u,S){u?(t.opacity=Wt(0,s.opacity??1,g5(o)),t.opacityExit=Wt(i.opacity??1,0,x5(o))):S&&(t.opacity=Wt(i.opacity??1,s.opacity??1,o));for(let b=0;b<p5;b++){const l=`border${t1[b]}Radius`;let c=om(i,l),m=om(s,l);if(c===void 0&&m===void 0)continue;c||(c=0),m||(m=0),c===0||m===0||sm(c)===sm(m)?(t[l]=Math.max(Wt(nm(c),nm(m),o),0),(Ri.test(m)||Ri.test(c))&&(t[l]+="%")):t[l]=m}(i.rotate||s.rotate)&&(t.rotate=Wt(i.rotate||0,s.rotate||0,o))}function om(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const g5=r1(0,.5,G0),x5=r1(.5,.95,si);function r1(t,i,s){return o=>o<t?0:o>i?1:s(Vo(t,i,o))}function m5(t,i,s){const o=Cr(t)?t:Os(t);return o.start(qh("",o,i,s)),o.animation}function Yo(t,i,s,o={passive:!0}){return t.addEventListener(i,s,o),()=>t.removeEventListener(i,s)}const y5=(t,i)=>t.depth-i.depth;class v5{constructor(){this.children=[],this.isDirty=!1}add(i){zh(this.children,i),this.isDirty=!0}remove(i){$l(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(y5),this.isDirty=!1,this.children.forEach(i)}}function b5(t,i){const s=Tr.now(),o=({timestamp:u})=>{const S=u-s;S>=i&&(Tn(o),t(S-i))};return Lt.setup(o,!0),()=>Tn(o)}function Dl(t){return Cr(t)?t.get():t}class _5{constructor(){this.members=[]}add(i){zh(this.members,i);for(let s=this.members.length-1;s>=0;s--){const o=this.members[s];if(o===i||o===this.lead||o===this.prevLead)continue;const u=o.instance;u&&u.isConnected===!1&&o.isPresent!==!1&&!o.snapshot&&$l(this.members,o)}i.scheduleRender()}remove(i){if($l(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(u=>i===u);if(s===0)return!1;let o;for(let u=s;u>=0;u--){const S=this.members[u],b=S.instance;if(S.isPresent!==!1&&(!b||b.isConnected!==!1)){o=S;break}}return o?(this.promote(o),!0):!1}promote(i,s){const o=this.lead;if(i!==o&&(this.prevLead=o,this.lead=i,i.show(),o)){o.instance&&o.scheduleRender(),i.scheduleRender();const u=o.options.layoutDependency,S=i.options.layoutDependency;if(!(u!==void 0&&S!==void 0&&u===S)){const c=o.instance;c&&c.isConnected===!1&&!o.snapshot||(i.resumeFrom=o,s&&(i.resumeFrom.preserveOpacity=!0),o.snapshot&&(i.snapshot=o.snapshot,i.snapshot.latestValues=o.animationValues||o.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0))}const{crossfade:l}=i.options;l===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:o}=i;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ml={hasAnimatedSinceResize:!0,hasEverUpdated:!1},lu=["","X","Y","Z"],S5=1e3;let w5=0;function cu(t,i,s,o){const{latestValues:u}=i;u[t]&&(s[t]=u[t],i.setStaticValue(t,0),o&&(o[t]=0))}function i1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const s=wy(i);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:u,layoutId:S}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Lt,!(u||S))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&i1(o)}function n1({attachResizeListener:t,defaultParent:i,measureScroll:s,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(b={},l=i==null?void 0:i()){this.id=w5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(j5),this.nodes.forEach(A5),this.nodes.forEach(z5),this.nodes.forEach(E5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new v5)}addEventListener(b,l){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new Dh),this.eventHandlers.get(b).add(l)}notifyListeners(b,...l){const c=this.eventHandlers.get(b);c&&c.notify(...l)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=Zh(b)&&!kj(b),this.instance=b;const{layoutId:l,layout:c,visualElement:m}=this.options;if(m&&!m.current&&m.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let v,d=0;const y=()=>this.root.updateBlockedByResize=!1;Lt.read(()=>{d=window.innerWidth}),t(b,()=>{const _=window.innerWidth;_!==d&&(d=_,this.root.updateBlockedByResize=!0,v&&v(),v=b5(y,250),Ml.hasAnimatedSinceResize&&(Ml.hasAnimatedSinceResize=!1,this.nodes.forEach(cm)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&m&&(l||c)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:d,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||m.getDefaultTransition()||B5,{onLayoutAnimationStart:w,onLayoutAnimationComplete:h}=m.getProps(),p=!this.targetLayout||!e1(this.targetLayout,_),f=!d&&y;if(this.options.layoutRoot||this.resumeFrom||f||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...Kh(j,"layout"),onPlay:w,onComplete:h};(m.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(v,f)}else d||cm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L5),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&i1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const d=this.path[v];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(am);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T5),this.nodes.forEach(C5),this.nodes.forEach(k5)):this.nodes.forEach(lm),this.clearAllSnapshots();const l=Tr.now();yr.delta=zi(0,1e3/60,l-yr.timestamp),yr.timestamp=l,yr.isProcessing=!0,eu.update.process(yr),eu.preRender.process(yr),eu.render.process(yr),yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(R5),this.sharedNodes.forEach(I5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Lt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Lt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ar(this.snapshot.measuredBox.x)&&!Ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(l=!1),l&&this.instance){const c=o(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!u)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Zy(this.projectionDelta),c=this.getTransformTemplate(),m=c?c(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;b&&this.instance&&(l||Yn(this.latestValues)||v)&&(u(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return b&&(c=this.removeTransform(c)),P5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:b}=this.options;if(!b)return lr();const l=b.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(O5))){const{scroll:v}=this.root;v&&(Ts(l.x,v.offset.x),Ts(l.y,v.offset.y))}return l}removeElementScroll(b){var c;const l=lr();if(xi(l,b),(c=this.scroll)!=null&&c.wasRoot)return l;for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:d,options:y}=v;v!==this.root&&d&&y.layoutScroll&&(d.wasRoot&&xi(l,b),Ts(l.x,d.offset.x),Ts(l.y,d.offset.y))}return l}applyTransform(b,l=!1){const c=lr();xi(c,b);for(let m=0;m<this.path.length;m++){const v=this.path[m];!l&&v.options.layoutScroll&&v.scroll&&v!==v.root&&As(c,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Yn(v.latestValues)&&As(c,v.latestValues)}return Yn(this.latestValues)&&As(c,this.latestValues),c}removeTransform(b){const l=lr();xi(l,b);for(let c=0;c<this.path.length;c++){const m=this.path[c];if(!m.instance||!Yn(m.latestValues))continue;nh(m.latestValues)&&m.updateSnapshot();const v=lr(),d=m.measurePageBox();xi(v,d),Qx(l,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return Yn(this.latestValues)&&Qx(l,this.latestValues),l}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var _;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(b||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:d}=this.options;if(!this.layout||!(v||d))return;this.resolvedRelativeTargetAt=yr.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=lr(),this.targetWithTransforms=lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),Wy(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||nh(this.parent.latestValues)||Fy(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(b,l,c){this.relativeParent=b,this.linkedParentVersion=b.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),Vl(this.relativeTargetOrigin,l,c),xi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var j;const b=this.getLead(),l=!!this.resumingFrom||this!==b;let c=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===yr.timestamp&&(c=!1),c)return;const{layout:m,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||v))return;xi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,y=this.treeScale.y;Bj(this.layoutCorrected,this.treeScale,this.path,l),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=lr());const{target:_}=b;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kx(this.prevProjectionDelta.x,this.projectionDelta.x),Kx(this.prevProjectionDelta.y,this.projectionDelta.y)),Wo(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==y||!im(this.projectionDelta.x,this.prevProjectionDelta.x)||!im(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),b){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rs(),this.projectionDelta=Rs(),this.projectionDeltaWithTransform=Rs()}setAnimationOrigin(b,l=!1){const c=this.snapshot,m=c?c.latestValues:{},v={...this.latestValues},d=Rs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=lr(),_=c?c.source:void 0,j=this.layout?this.layout.source:void 0,w=_!==j,h=this.getStack(),p=!h||h.members.length<=1,f=!!(w&&!p&&this.options.crossfade===!0&&!this.path.some(M5));this.animationProgress=0;let g;this.mixTargetDelta=C=>{const R=C/1e3;dm(d.x,b.x,R),dm(d.y,b.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),D5(this.relativeTarget,this.relativeTargetOrigin,y,R),g&&u5(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=lr()),xi(g,this.relativeTarget)),w&&(this.animationValues=v,f5(v,m,this.latestValues,R,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var l,c,m;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(m=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Tn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Lt.update(()=>{Ml.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Os(0)),this.currentAnimation=m5(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),b.onUpdate&&b.onUpdate(v)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:l,target:c,layout:m,latestValues:v}=b;if(!(!l||!c||!m)){if(this!==b&&this.layout&&m&&s1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){c=this.target||lr();const d=Ar(this.layout.layoutBox.x);c.x.min=b.target.x.min,c.x.max=c.x.min+d;const y=Ar(this.layout.layoutBox.y);c.y.min=b.target.y.min,c.y.max=c.y.min+y}xi(l,c),As(l,v),Wo(this.projectionDeltaWithTransform,this.layoutCorrected,l,v)}}registerSharedNode(b,l){this.sharedNodes.has(b)||this.sharedNodes.set(b,new _5),this.sharedNodes.get(b).add(l);const m=l.options.initialPromotionConfig;l.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(l):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var l;const{layoutId:b}=this.options;return b?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:b}=this.options;return b?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:l,preserveFollowOpacity:c}={}){const m=this.getStack();m&&m.promote(this,c),b&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let l=!1;const{latestValues:c}=b;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const m={};c.z&&cu("z",b,m,this.animationValues);for(let v=0;v<lu.length;v++)cu(`rotate${lu[v]}`,b,m,this.animationValues),cu(`skew${lu[v]}`,b,m,this.animationValues);b.render();for(const v in m)b.setStaticValue(v,m[v]),this.animationValues&&(this.animationValues[v]=m[v]);b.scheduleRender()}applyProjectionStyles(b,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=Dl(l==null?void 0:l.pointerEvents)||"",b.transform=c?c(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Dl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Yn(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1);return}b.visibility="";const v=m.animationValues||m.latestValues;this.applyTransformsToTarget();let d=h5(this.projectionDeltaWithTransform,this.treeScale,v);c&&(d=c(v,d)),b.transform=d;const{x:y,y:_}=this.projectionDelta;b.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,m.animationValues?b.opacity=m===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:b.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const j in oh){if(v[j]===void 0)continue;const{correct:w,applyTo:h,isCSSVariable:p}=oh[j],f=d==="none"?v[j]:w(v[j],m);if(h){const g=h.length;for(let C=0;C<g;C++)b[h[C]]=f}else p?this.options.visualElement.renderState.vars[j]=f:b[j]=f}this.options.layoutId&&(b.pointerEvents=m===this?Dl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var l;return(l=b.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(am),this.root.sharedNodes.clear()}}}function C5(t){t.updateLayout()}function k5(t){var s;const i=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:u}=t.layout,{animationType:S}=t.options,b=i.source!==t.layout.source;S==="size"?ji(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=Ar(y);y.min=o[d].min,y.max=y.min+_}):s1(S,i.layoutBox,o)&&ji(d=>{const y=b?i.measuredBox[d]:i.layoutBox[d],_=Ar(o[d]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+_)});const l=Rs();Wo(l,o,i.layoutBox);const c=Rs();b?Wo(c,t.applyTransform(u,!0),i.measuredBox):Wo(c,o,i.layoutBox);const m=!Zy(l);let v=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:y,layout:_}=d;if(y&&_){const j=lr();Vl(j,i.layoutBox,y.layoutBox);const w=lr();Vl(w,o,_.layoutBox),e1(j,w)||(v=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=j,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:c,layoutDelta:l,hasLayoutChanged:m,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function j5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function R5(t){t.clearSnapshot()}function am(t){t.clearMeasurements()}function lm(t){t.isLayoutDirty=!1}function T5(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function cm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function A5(t){t.resolveTargetDelta()}function z5(t){t.calcProjection()}function L5(t){t.resetSkewAndRotation()}function I5(t){t.removeLeadSnapshot()}function dm(t,i,s){t.translate=Wt(i.translate,0,s),t.scale=Wt(i.scale,1,s),t.origin=i.origin,t.originPoint=i.originPoint}function um(t,i,s,o){t.min=Wt(i.min,s.min,o),t.max=Wt(i.max,s.max,o)}function D5(t,i,s,o){um(t.x,i.x,s.x,o),um(t.y,i.y,s.y,o)}function M5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B5={duration:.45,ease:[.4,0,.1,1]},hm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),pm=hm("applewebkit/")&&!hm("chrome/")?Math.round:si;function fm(t){t.min=pm(t.min),t.max=pm(t.max)}function P5(t){fm(t.x),fm(t.y)}function s1(t,i,s){return t==="position"||t==="preserve-aspect"&&!o5(rm(i),rm(s),.2)}function O5(t){var i;return t!==t.root&&((i=t.scroll)==null?void 0:i.wasRoot)}const $5=n1({attachResizeListener:(t,i)=>Yo(t,"resize",i),measureScroll:()=>{var t,i;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((i=document.body)==null?void 0:i.scrollTop)||0}},checkIsScrollRoot:()=>!0}),du={current:void 0},o1=n1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!du.current){const t=new $5({});t.mount(window),t.setOptions({layoutScroll:!0}),du.current=t}return du.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),np=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function gm(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function F5(...t){return i=>{let s=!1;const o=t.map(u=>{const S=gm(u,i);return!s&&typeof S=="function"&&(s=!0),S});if(s)return()=>{for(let u=0;u<o.length;u++){const S=o[u];typeof S=="function"?S():gm(t[u],null)}}}}function W5(...t){return L.useCallback(F5(...t),t)}class N5 extends L.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const o=s.offsetParent,u=rh(o)&&o.offsetWidth||0,S=rh(o)&&o.offsetHeight||0,b=this.props.sizeRef.current;b.height=s.offsetHeight||0,b.width=s.offsetWidth||0,b.top=s.offsetTop,b.left=s.offsetLeft,b.right=u-b.width-b.left,b.bottom=S-b.height-b.top}return null}componentDidUpdate(){}render(){return this.props.children}}function H5({children:t,isPresent:i,anchorX:s,anchorY:o,root:u,pop:S}){var y;const b=L.useId(),l=L.useRef(null),c=L.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=L.useContext(np),v=((y=t.props)==null?void 0:y.ref)??(t==null?void 0:t.ref),d=W5(l,v);return L.useInsertionEffect(()=>{const{width:_,height:j,top:w,left:h,right:p,bottom:f}=c.current;if(i||S===!1||!l.current||!_||!j)return;const g=s==="left"?`left: ${h}`:`right: ${p}`,C=o==="bottom"?`bottom: ${f}`:`top: ${w}`;l.current.dataset.motionPopId=b;const R=document.createElement("style");m&&(R.nonce=m);const z=u??document.head;return z.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${b}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${j}px !important;
            ${g}px !important;
            ${C}px !important;
          }
        `),()=>{z.contains(R)&&z.removeChild(R)}},[i]),e.jsx(N5,{isPresent:i,childRef:l,sizeRef:c,pop:S,children:S===!1?t:L.cloneElement(t,{ref:d})})}const U5=({children:t,initial:i,isPresent:s,onExitComplete:o,custom:u,presenceAffectsLayout:S,mode:b,anchorX:l,anchorY:c,root:m})=>{const v=Ah(V5),d=L.useId();let y=!0,_=L.useMemo(()=>(y=!1,{id:d,initial:i,isPresent:s,custom:u,onExitComplete:j=>{v.set(j,!0);for(const w of v.values())if(!w)return;o&&o()},register:j=>(v.set(j,!1),()=>v.delete(j))}),[s,v,o]);return S&&y&&(_={..._}),L.useMemo(()=>{v.forEach((j,w)=>v.set(w,!1))},[s]),L.useEffect(()=>{!s&&!v.size&&o&&o()},[s]),t=e.jsx(H5,{pop:b==="popLayout",isPresent:s,anchorX:l,anchorY:c,root:m,children:t}),e.jsx(tc.Provider,{value:_,children:t})};function V5(){return new Map}function a1(t=!0){const i=L.useContext(tc);if(i===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:u}=i,S=L.useId();L.useEffect(()=>{if(t)return u(S)},[t]);const b=L.useCallback(()=>t&&o&&o(S),[S,o,t]);return!s&&o?[!1,b]:[!0]}const ml=t=>t.key||"";function xm(t){const i=[];return L.Children.forEach(t,s=>{L.isValidElement(s)&&i.push(s)}),i}const uu=({children:t,custom:i,initial:s=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:S="sync",propagate:b=!1,anchorX:l="left",anchorY:c="top",root:m})=>{const[v,d]=a1(b),y=L.useMemo(()=>xm(t),[t]),_=b&&!v?[]:y.map(ml),j=L.useRef(!0),w=L.useRef(y),h=Ah(()=>new Map),p=L.useRef(new Set),[f,g]=L.useState(y),[C,R]=L.useState(y);P0(()=>{j.current=!1,w.current=y;for(let E=0;E<C.length;E++){const B=ml(C[E]);_.includes(B)?(h.delete(B),p.current.delete(B)):h.get(B)!==!0&&h.set(B,!1)}},[C,_.length,_.join("-")]);const z=[];if(y!==f){let E=[...y];for(let B=0;B<C.length;B++){const P=C[B],N=ml(P);_.includes(N)||(E.splice(B,0,P),z.push(P))}return S==="wait"&&z.length&&(E=z),R(xm(E)),g(y),null}const{forceRender:A}=L.useContext(Th);return e.jsx(e.Fragment,{children:C.map(E=>{const B=ml(E),P=b&&!v?!1:y===C||_.includes(B),N=()=>{if(p.current.has(B))return;if(p.current.add(B),h.has(B))h.set(B,!0);else return;let K=!0;h.forEach(U=>{U||(K=!1)}),K&&(A==null||A(),R(w.current),b&&(d==null||d()),o&&o())};return e.jsx(U5,{isPresent:P,initial:!j.current||s?void 0:!1,custom:i,presenceAffectsLayout:u,mode:S,root:m,onExitComplete:P?void 0:N,anchorX:l,anchorY:c,children:E},B)})})},l1=L.createContext({strict:!1}),mm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let ym=!1;function K5(){if(ym)return;const t={};for(const i in mm)t[i]={isEnabled:s=>mm[i].some(o=>!!s[o])};Py(t),ym=!0}function c1(){return K5(),Lj()}function q5(t){const i=c1();for(const s in t)i[s]={...i[s],...t[s]};Py(i)}const G5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Kl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G5.has(t)}let d1=t=>!Kl(t);function Y5(t){typeof t=="function"&&(d1=i=>i.startsWith("on")?!Kl(i):t(i))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function X5(t,i,s){const o={};for(const u in t)u==="values"&&typeof t.values=="object"||(d1(u)||s===!0&&Kl(u)||!i&&!Kl(u)||t.draggable&&u.startsWith("onDrag"))&&(o[u]=t[u]);return o}const nc=L.createContext({});function J5(t,i){if(ic(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Go(s)?s:void 0,animate:Go(o)?o:void 0}}return t.inherit!==!1?i:{}}function Q5(t){const{initial:i,animate:s}=J5(t,L.useContext(nc));return L.useMemo(()=>({initial:i,animate:s}),[vm(i),vm(s)])}function vm(t){return Array.isArray(t)?t.join(" "):t}const sp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function u1(t,i,s){for(const o in i)!Cr(i[o])&&!Uy(o,s)&&(t[o]=i[o])}function Z5({transformTemplate:t},i){return L.useMemo(()=>{const s=sp();return rp(s,i,t),Object.assign({},s.vars,s.style)},[i])}function e4(t,i){const s=t.style||{},o={};return u1(o,s,t),Object.assign(o,Z5(t,i)),o}function t4(t,i){const s={},o=e4(t,i);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const h1=()=>({...sp(),attrs:{}});function r4(t,i,s,o){const u=L.useMemo(()=>{const S=h1();return Vy(S,i,qy(o),t.transformTemplate,t.style),{...S.attrs,style:{...S.style}}},[i]);if(t.style){const S={};u1(S,t.style,t),u.style={...S,...u.style}}return u}const i4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function op(t){return typeof t!="string"||t.includes("-")?!1:!!(i4.indexOf(t)>-1||/[A-Z]/u.test(t))}function n4(t,i,s,{latestValues:o},u,S=!1,b){const c=(b??op(t)?r4:t4)(i,o,u,t),m=X5(i,typeof t=="string",S),v=t!==L.Fragment?{...m,...c,ref:s}:{},{children:d}=i,y=L.useMemo(()=>Cr(d)?d.get():d,[d]);return L.createElement(t,{...v,children:y})}function s4({scrapeMotionValuesFromProps:t,createRenderState:i},s,o,u){return{latestValues:o4(s,o,u,t),renderState:i()}}function o4(t,i,s,o){const u={},S=o(t,{});for(const y in S)u[y]=Dl(S[y]);let{initial:b,animate:l}=t;const c=ic(t),m=My(t);i&&m&&!c&&t.inherit!==!1&&(b===void 0&&(b=i.initial),l===void 0&&(l=i.animate));let v=s?s.initial===!1:!1;v=v||b===!1;const d=v?l:b;if(d&&typeof d!="boolean"&&!rc(d)){const y=Array.isArray(d)?d:[d];for(let _=0;_<y.length;_++){const j=Gh(t,y[_]);if(j){const{transitionEnd:w,transition:h,...p}=j;for(const f in p){let g=p[f];if(Array.isArray(g)){const C=v?g.length-1:0;g=g[C]}g!==null&&(u[f]=g)}for(const f in w)u[f]=w[f]}}}return u}const p1=t=>(i,s)=>{const o=L.useContext(nc),u=L.useContext(tc),S=()=>s4(t,i,o,u);return s?S():Ah(S)},a4=p1({scrapeMotionValuesFromProps:ip,createRenderState:sp}),l4=p1({scrapeMotionValuesFromProps:Gy,createRenderState:h1}),c4=Symbol.for("motionComponentSymbol");function d4(t,i,s){const o=L.useRef(s);L.useInsertionEffect(()=>{o.current=s});const u=L.useRef(null);return L.useCallback(S=>{var l;S&&((l=t.onMount)==null||l.call(t,S)),i&&(S?i.mount(S):i.unmount());const b=o.current;if(typeof b=="function")if(S){const c=b(S);typeof c=="function"&&(u.current=c)}else u.current?(u.current(),u.current=null):b(S);else b&&(b.current=S)},[i])}const f1=L.createContext({});function ks(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function u4(t,i,s,o,u,S){var g,C;const{visualElement:b}=L.useContext(nc),l=L.useContext(l1),c=L.useContext(tc),m=L.useContext(np),v=m.reducedMotion,d=m.skipAnimations,y=L.useRef(null),_=L.useRef(!1);o=o||l.renderer,!y.current&&o&&(y.current=o(t,{visualState:i,parent:b,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:v,skipAnimations:d,isSVG:S}),_.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const j=y.current,w=L.useContext(f1);j&&!j.projection&&u&&(j.type==="html"||j.type==="svg")&&h4(y.current,s,u,w);const h=L.useRef(!1);L.useInsertionEffect(()=>{j&&h.current&&j.update(s,c)});const p=s[Sy],f=L.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,p)));return P0(()=>{_.current=!0,j&&(h.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),f.current&&j.animationState&&j.animationState.animateChanges())}),L.useEffect(()=>{j&&(!f.current&&j.animationState&&j.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,p)}),f.current=!1),j.enteringChildren=void 0)}),j}function h4(t,i,s,o){const{layoutId:u,layout:S,drag:b,dragConstraints:l,layoutScroll:c,layoutRoot:m,layoutCrossfade:v}=i;t.projection=new s(t.latestValues,i["data-framer-portal-id"]?void 0:g1(t.parent)),t.projection.setOptions({layoutId:u,layout:S,alwaysMeasureLayout:!!b||l&&ks(l),visualElement:t,animationType:typeof S=="string"?S:"both",initialPromotionConfig:o,crossfade:v,layoutScroll:c,layoutRoot:m})}function g1(t){if(t)return t.options.allowProjection!==!1?t.projection:g1(t.parent)}function hu(t,{forwardMotionProps:i=!1,type:s}={},o,u){o&&q5(o);const S=s?s==="svg":op(t),b=S?l4:a4;function l(m,v){let d;const y={...L.useContext(np),...m,layoutId:p4(m)},{isStatic:_}=y,j=Q5(m),w=b(m,_);if(!_&&B0){f4();const h=g4(y);d=h.MeasureLayout,j.visualElement=u4(t,w,y,u,h.ProjectionNode,S)}return e.jsxs(nc.Provider,{value:j,children:[d&&j.visualElement?e.jsx(d,{visualElement:j.visualElement,...y}):null,n4(t,m,d4(w,j.visualElement,v),w,_,i,S)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=L.forwardRef(l);return c[c4]=t,c}function p4({layoutId:t}){const i=L.useContext(Th).id;return i&&t!==void 0?i+"-"+t:t}function f4(t,i){L.useContext(l1).strict}function g4(t){const i=c1(),{drag:s,layout:o}=i;if(!s&&!o)return{};const u={...s,...o};return{MeasureLayout:s!=null&&s.isEnabled(t)||o!=null&&o.isEnabled(t)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function x4(t,i){if(typeof Proxy>"u")return hu;const s=new Map,o=(S,b)=>hu(S,b,t,i),u=(S,b)=>o(S,b);return new Proxy(u,{get:(S,b)=>b==="create"?o:(s.has(b)||s.set(b,hu(b,void 0,t,i)),s.get(b))})}const m4=(t,i)=>i.isSVG??op(t)?new Yj(i):new Hj(i,{allowProjection:t!==L.Fragment});class y4 extends Ln{constructor(i){super(i),i.animationState||(i.animationState=e5(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();rc(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)==null||i.call(this)}}let v4=0;class b4 extends Ln{constructor(){super(...arguments),this.id=v4++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===o)return;const u=this.node.animationState.setActive("exit",!i);s&&!i&&u.then(()=>{s(this.id)})}mount(){const{register:i,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const _4={animation:{Feature:y4},exit:{Feature:b4}};function na(t){return{point:{x:t.pageX,y:t.pageY}}}const S4=t=>i=>Qh(i)&&t(i,na(i));function No(t,i,s,o){return Yo(t,i,S4(s),o)}const x1=({current:t})=>t?t.ownerDocument.defaultView:null,bm=(t,i)=>Math.abs(t-i);function w4(t,i){const s=bm(t.x,i.x),o=bm(t.y,i.y);return Math.sqrt(s**2+o**2)}const _m=new Set(["auto","scroll"]);class m1{constructor(i,s,{transformPagePoint:o,contextWindow:u=window,dragSnapToOrigin:S=!1,distanceThreshold:b=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=fu(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,w=w4(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!w)return;const{point:h}=_,{timestamp:p}=yr;this.history.push({...h,timestamp:p});const{onStart:f,onMove:g}=this.handlers;j||(f&&f(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,_)},this.handlePointerMove=(_,j)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=pu(j,this.transformPagePoint),Lt.update(this.updatePoint,!0)},this.handlePointerUp=(_,j)=>{this.end();const{onEnd:w,onSessionEnd:h,resumeAnimation:p}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=fu(_.type==="pointercancel"?this.lastMoveEventInfo:pu(j,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,f),h&&h(_,f)},!Qh(i))return;this.dragSnapToOrigin=S,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=b,this.contextWindow=u||window;const c=na(i),m=pu(c,this.transformPagePoint),{point:v}=m,{timestamp:d}=yr;this.history=[{...v,timestamp:d}];const{onSessionStart:y}=s;y&&y(i,fu(m,this.history)),this.removeListeners=ta(No(this.contextWindow,"pointermove",this.handlePointerMove),No(this.contextWindow,"pointerup",this.handlePointerUp),No(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(i){let s=i.parentElement;for(;s;){const o=getComputedStyle(s);(_m.has(o.overflowX)||_m.has(o.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(i){const s=this.scrollPositions.get(i);if(!s)return;const o=i===window,u=o?{x:window.scrollX,y:window.scrollY}:{x:i.scrollLeft,y:i.scrollTop},S={x:u.x-s.x,y:u.y-s.y};S.x===0&&S.y===0||(o?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=S.x,this.lastMoveEventInfo.point.y+=S.y):this.history.length>0&&(this.history[0].x-=S.x,this.history[0].y-=S.y),this.scrollPositions.set(i,u),Lt.update(this.updatePoint,!0))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Tn(this.updatePoint)}}function pu(t,i){return i?{point:i(t.point)}:t}function Sm(t,i){return{x:t.x-i.x,y:t.y-i.y}}function fu({point:t},i){return{point:t,delta:Sm(t,y1(i)),offset:Sm(t,C4(i)),velocity:k4(i,.1)}}function C4(t){return t[0]}function y1(t){return t[t.length-1]}function k4(t,i){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const u=y1(t);for(;s>=0&&(o=t[s],!(u.timestamp-o.timestamp>vi(i)));)s--;if(!o)return{x:0,y:0};o===t[0]&&t.length>2&&u.timestamp-o.timestamp>vi(i)*2&&(o=t[1]);const S=ni(u.timestamp-o.timestamp);if(S===0)return{x:0,y:0};const b={x:(u.x-o.x)/S,y:(u.y-o.y)/S};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function j4(t,{min:i,max:s},o){return i!==void 0&&t<i?t=o?Wt(i,t,o.min):Math.max(t,i):s!==void 0&&t>s&&(t=o?Wt(s,t,o.max):Math.min(t,s)),t}function wm(t,i,s){return{min:i!==void 0?t.min+i:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function E4(t,{top:i,left:s,bottom:o,right:u}){return{x:wm(t.x,s,u),y:wm(t.y,i,o)}}function Cm(t,i){let s=i.min-t.min,o=i.max-t.max;return i.max-i.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function R4(t,i){return{x:Cm(t.x,i.x),y:Cm(t.y,i.y)}}function T4(t,i){let s=.5;const o=Ar(t),u=Ar(i);return u>o?s=Vo(i.min,i.max-o,t.min):o>u&&(s=Vo(t.min,t.max-u,i.min)),zi(0,1,s)}function A4(t,i){const s={};return i.min!==void 0&&(s.min=i.min-t.min),i.max!==void 0&&(s.max=i.max-t.min),s}const ah=.35;function z4(t=ah){return t===!1?t=0:t===!0&&(t=ah),{x:km(t,"left","right"),y:km(t,"top","bottom")}}function km(t,i,s){return{min:jm(t,i),max:jm(t,s)}}function jm(t,i){return typeof t=="number"?t:t[i]||0}const L4=new WeakMap;class I4{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const S=d=>{s&&this.snapToCursor(na(d).point),this.stopAnimation()},b=(d,y)=>{const{drag:_,dragPropagation:j,onDragStart:w}=this.getProps();if(_&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lj(_),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ji(p=>{let f=this.getAxisMotionValue(p).get()||0;if(Ri.test(f)){const{projection:g}=this.visualElement;if(g&&g.layout){const C=g.layout.layoutBox[p];C&&(f=Ar(C)*(parseFloat(f)/100))}}this.originPoint[p]=f}),w&&Lt.update(()=>w(d,y),!1,!0),Zu(this.visualElement,"transform");const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},l=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:j,onDirectionLock:w,onDrag:h}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:p}=y;if(j&&this.currentDirection===null){this.currentDirection=M4(p),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",y.point,p),this.updateAxis("y",y.point,p),this.visualElement.render(),h&&Lt.update(()=>h(d,y),!1,!0)},c=(d,y)=>{this.latestPointerEvent=d,this.latestPanInfo=y,this.stop(d,y),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:v}=this.getProps();this.panSession=new m1(i,{onSessionStart:S,onStart:b,onMove:l,onSessionEnd:c,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:o,contextWindow:x1(this.visualElement),element:this.visualElement.current})}stop(i,s){const o=i||this.latestPointerEvent,u=s||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!u||!o)return;const{velocity:b}=u;this.startAnimation(b);const{onDragEnd:l}=this.getProps();l&&Lt.postRender(()=>l(o,u))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(i,s,o){const{drag:u}=this.getProps();if(!o||!yl(i,u,this.currentDirection))return;const S=this.getAxisMotionValue(i);let b=this.originPoint[i]+o[i];this.constraints&&this.constraints[i]&&(b=j4(b,this.constraints[i],this.elastic[i])),S.set(b)}resolveConstraints(){var S;const{dragConstraints:i,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,u=this.constraints;i&&ks(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&o?this.constraints=E4(o.layoutBox,i):this.constraints=!1,this.elastic=z4(s),u!==this.constraints&&!ks(i)&&o&&this.constraints&&!this.hasMutatedConstraints&&ji(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=A4(o.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!ks(i))return!1;const o=i.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const S=Pj(o,u.root,this.visualElement.getTransformPagePoint());let b=R4(u.layout.layoutBox,S);if(s){const l=s(Dj(b));this.hasMutatedConstraints=!!l,l&&(b=$y(l))}return b}startAnimation(i){const{drag:s,dragMomentum:o,dragElastic:u,dragTransition:S,dragSnapToOrigin:b,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},m=ji(v=>{if(!yl(v,s,this.currentDirection))return;let d=c&&c[v]||{};b&&(d={min:0,max:0});const y=u?200:1e6,_=u?40:1e7,j={type:"inertia",velocity:o?i[v]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...S,...d};return this.startAxisValueAnimation(v,j)});return Promise.all(m).then(l)}startAxisValueAnimation(i,s){const o=this.getAxisMotionValue(i);return Zu(this.visualElement,i),o.start(qh(i,o,0,s,this.visualElement,!1))}stopAnimation(){ji(i=>this.getAxisMotionValue(i).stop())}getAxisMotionValue(i){const s=`_drag${i.toUpperCase()}`,o=this.visualElement.getProps(),u=o[s];return u||this.visualElement.getValue(i,(o.initial?o.initial[i]:void 0)||0)}snapToCursor(i){ji(s=>{const{drag:o}=this.getProps();if(!yl(s,o,this.currentDirection))return;const{projection:u}=this.visualElement,S=this.getAxisMotionValue(s);if(u&&u.layout){const{min:b,max:l}=u.layout.layoutBox[s],c=S.get()||0;S.set(i[s]-Wt(b,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!ks(s)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};ji(b=>{const l=this.getAxisMotionValue(b);if(l&&this.constraints!==!1){const c=l.get();u[b]=T4({min:c,max:c},this.constraints[b])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.constraints=!1,this.resolveConstraints(),ji(b=>{if(!yl(b,i,null))return;const l=this.getAxisMotionValue(b),{min:c,max:m}=this.constraints[b];l.set(Wt(c,m,u[b]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;L4.set(this.visualElement,this);const i=this.visualElement.current,s=No(i,"pointerdown",m=>{const{drag:v,dragListener:d=!0}=this.getProps(),y=m.target,_=y!==i&&fj(y);v&&d&&!_&&this.start(m)});let o;const u=()=>{const{dragConstraints:m}=this.getProps();ks(m)&&m.current&&(this.constraints=this.resolveRefConstraints(),o||(o=D4(i,m.current,()=>this.scalePositionWithinConstraints())))},{projection:S}=this.visualElement,b=S.addEventListener("measure",u);S&&!S.layout&&(S.root&&S.root.updateScroll(),S.updateLayout()),Lt.read(u);const l=Yo(window,"resize",()=>this.scalePositionWithinConstraints()),c=S.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:v})=>{this.isDragging&&v&&(ji(d=>{const y=this.getAxisMotionValue(d);y&&(this.originPoint[d]+=m[d].translate,y.set(y.get()+m[d].translate))}),this.visualElement.render())}));return()=>{l(),s(),b(),c&&c(),o&&o()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:S=!1,dragElastic:b=ah,dragMomentum:l=!0}=i;return{...i,drag:s,dragDirectionLock:o,dragPropagation:u,dragConstraints:S,dragElastic:b,dragMomentum:l}}}function Em(t){let i=!0;return()=>{if(i){i=!1;return}t()}}function D4(t,i,s){const o=Dx(t,Em(s)),u=Dx(i,Em(s));return()=>{o(),u()}}function yl(t,i,s){return(i===!0||i===t)&&(s===null||s===t)}function M4(t,i=10){let s=null;return Math.abs(t.y)>i?s="y":Math.abs(t.x)>i&&(s="x"),s}class B4 extends Ln{constructor(i){super(i),this.removeGroupControls=si,this.removeListeners=si,this.controls=new I4(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||si}update(){const{dragControls:i}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};i!==s&&(this.removeGroupControls(),i&&(this.removeGroupControls=i.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const gu=t=>(i,s)=>{t&&Lt.update(()=>t(i,s),!1,!0)};class P4 extends Ln{constructor(){super(...arguments),this.removePointerDownListener=si}onPointerDown(i){this.session=new m1(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:x1(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:gu(i),onStart:gu(s),onMove:gu(o),onEnd:(S,b)=>{delete this.session,u&&Lt.postRender(()=>u(S,b))}}}mount(){this.removePointerDownListener=No(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let xu=!1;class O4 extends L.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o,layoutId:u}=this.props,{projection:S}=i;S&&(s.group&&s.group.add(S),o&&o.register&&u&&o.register(S),xu&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Ml.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:o,drag:u,isPresent:S}=this.props,{projection:b}=o;return b&&(b.isPresent=S,i.layoutDependency!==s&&b.setOptions({...b.options,layoutDependency:s}),xu=!0,u||i.layoutDependency!==s||s===void 0||i.isPresent!==S?b.willUpdate():this.safeToRemove(),i.isPresent!==S&&(S?b.promote():b.relegate()||Lt.postRender(()=>{const l=b.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),Jh.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:u}=i;xu=!0,u&&(u.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function v1(t){const[i,s]=a1(),o=L.useContext(Th);return e.jsx(O4,{...t,layoutGroup:o,switchLayoutGroup:L.useContext(f1),isPresent:i,safeToRemove:s})}const $4={pan:{Feature:P4},drag:{Feature:B4,ProjectionNode:o1,MeasureLayout:v1}};function Rm(t,i,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const u="onHover"+s,S=o[u];S&&Lt.postRender(()=>S(i,na(i)))}class F4 extends Ln{mount(){const{current:i}=this.node;i&&(this.unmount=dj(i,(s,o)=>(Rm(this.node,o,"Start"),u=>Rm(this.node,u,"End"))))}unmount(){}}class W4 extends Ln{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ta(Yo(this.node.current,"focus",()=>this.onFocus()),Yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Tm(t,i,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const u="onTap"+(s==="End"?"":s),S=o[u];S&&Lt.postRender(()=>S(i,na(i)))}class N4 extends Ln{mount(){const{current:i}=this.node;if(!i)return;const{globalTapTarget:s,propagate:o}=this.node.props;this.unmount=xj(i,(u,S)=>(Tm(this.node,S,"Start"),(b,{success:l})=>Tm(this.node,b,l?"End":"Cancel")),{useGlobalTarget:s,stopPropagation:(o==null?void 0:o.tap)===!1})}unmount(){}}const lh=new WeakMap,mu=new WeakMap,H4=t=>{const i=lh.get(t.target);i&&i(t)},U4=t=>{t.forEach(H4)};function V4({root:t,...i}){const s=t||document;mu.has(s)||mu.set(s,{});const o=mu.get(s),u=JSON.stringify(i);return o[u]||(o[u]=new IntersectionObserver(U4,{root:t,...i})),o[u]}function K4(t,i,s){const o=V4(i);return lh.set(t,s),o.observe(t),()=>{lh.delete(t),o.unobserve(t)}}const q4={some:0,all:1};class G4 extends Ln{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:o,amount:u="some",once:S}=i,b={root:s?s.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:q4[u]},l=c=>{const{isIntersecting:m}=c;if(this.isInView===m||(this.isInView=m,S&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:d}=this.node.getProps(),y=m?v:d;y&&y(c)};return K4(this.node.current,b,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(Y4(i,s))&&this.startObserver()}unmount(){}}function Y4({viewport:t={}},{viewport:i={}}={}){return s=>t[s]!==i[s]}const X4={inView:{Feature:G4},tap:{Feature:N4},focus:{Feature:W4},hover:{Feature:F4}},J4={layout:{ProjectionNode:o1,MeasureLayout:v1}},Q4={..._4,...X4,...$4,...J4},Xt=x4(Q4,m4),ge={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",cyan:"#06b6d4",mono:'"JetBrains Mono","Fira Code",monospace'},Am={id:"welcome",role:"assistant",content:`I'm your AI agent architect. I can see your uploaded screenshots directly  upload references and let's discuss the design.

Start by uploading screenshots, adding URLs, or describing the style you want.`},zm=t=>({id:"welcome",role:"assistant",content:`I've loaded the current prompt for **${t.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase())}**. I'm ready to help you enhance it.

Tell me what you'd like to improve  capabilities, style, structure, new sections, or anything else.`}),ap=({onClose:t,initialAgent:i})=>{var fr,Lr,kr;const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(""),[c,m]=L.useState(!1),[v,d]=L.useState(""),[y,_]=L.useState([]),[j,w]=L.useState(""),[h,p]=L.useState([]),[f,g]=L.useState(""),[C,R]=L.useState(!1),[z,A]=L.useState(""),[E,B]=L.useState(!1),[P,N]=L.useState(!1),[K,U]=L.useState(!1),[ee,V]=L.useState(!1),[de,J]=L.useState(!1),[Y,M]=L.useState(null),[I,D]=L.useState(null),[W,pe]=L.useState(!1),[me,Se]=L.useState(null),[Ee,X]=L.useState(""),[F,ve]=L.useState(!1),[se,Me]=L.useState(null),[Z,ke]=L.useState(!1),[he,Ie]=L.useState(!1),[Oe,$e]=L.useState(""),je=L.useRef(null),Ne=L.useRef(null);L.useEffect(()=>{Q().then(async oe=>{var pt;if(i)try{const wt=i.name.replace(/-/g," ").replace(/\b\w/g,Gt=>Gt.toUpperCase()),gt=(await ae("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:`Enhance: ${wt}`})})).conversation;if(o(Gt=>[gt,...Gt]),S(gt.id),l(gt.name),localStorage.setItem("atp-agent-creator-conv",gt.id),$e(i.name),i.prompt&&(A(i.prompt),R(!0)),p([zm(i.name)]),_([]),i.prompt)try{const Gt=`I want to enhance this existing agent "${wt}". Here is its current prompt:

\`\`\`
${i.prompt.slice(0,8e3)}
\`\`\`

Please analyze it and wait for my instructions on what to improve.`,Ir=await ae(`/api/agent-creator/conversations/${gt.id}/messages`,{method:"POST",body:JSON.stringify({message:Gt})}),Xr={id:`init-${Date.now()}`,role:"user",content:Gt},oi=((pt=Ir.message)==null?void 0:pt.content)||Ir.response||"",Dr={id:`resp-${Date.now()}`,role:"assistant",content:oi};p(Ur=>[...Ur,Xr,Dr])}catch(Gt){console.error("Failed to send initial context:",Gt)}return}catch(wt){console.error("Failed to create enhance conversation:",wt)}if(!oe||oe.length===0)return;const He=localStorage.getItem("atp-agent-creator-conv"),qe=He?oe.find(wt=>wt.id===He):null;We(qe||oe[0])})},[]),L.useEffect(()=>{var oe;(oe=je.current)==null||oe.scrollIntoView({behavior:"smooth"})},[h]),L.useEffect(()=>{c&&Ne.current&&Ne.current.focus()},[c]);const Q=async()=>{try{const He=(await ae("/api/agent-creator/conversations")).conversations||[];return o(He),He}catch(oe){return console.error("Failed to load conversations:",oe),[]}},le=async oe=>{try{const qe=(await ae("/api/agent-creator/conversations",{method:"POST",body:JSON.stringify({name:oe||"New Agent"})})).conversation;o(pt=>[qe,...pt]),We(qe)}catch(He){console.error("Failed to create conversation:",He)}},We=async oe=>{S(oe.id),l(oe.name),localStorage.setItem("atp-agent-creator-conv",oe.id),m(!1),M(null),A(""),D(null),R(!1),Se(null),$e(""),Me(null),Ie(!1);try{const qe=(await ae(`/api/agent-creator/conversations/${oe.id}`)).conversation,pt=(qe.messages||[]).map(gt=>({id:gt.id,role:gt.role,content:gt.content})),wt=oe.name.startsWith("Enhance:")?zm(oe.name.replace("Enhance: ","")):Am;if(p(pt.length>0?pt:[wt]),_(qe.references||[]),qe.design_brief&&M(qe.design_brief),qe.generated_agent){A(qe.generated_agent),R(!0);const gt=qe.generated_agent.match(/^name:\s*(.+)$/m);gt&&$e(gt[1].trim())}const Qt=`/uploads/agent-creator/preview-${oe.id}.png`;fetch(Qt,{method:"HEAD"}).then(gt=>{gt.ok&&Me(Qt+"?t="+Date.now())}).catch(()=>{})}catch(He){console.error("Failed to load conversation:",He),p([Am]),_([])}},Ze=async()=>{if(!(!u||!v.trim()))try{await ae(`/api/agent-creator/conversations/${u}`,{method:"PUT",body:JSON.stringify({name:v.trim()})}),l(v.trim()),o(oe=>oe.map(He=>He.id===u?{...He,name:v.trim()}:He)),m(!1)}catch(oe){console.error("Failed to rename:",oe)}},Xe=async oe=>{try{await ae(`/api/agent-creator/conversations/${oe}`,{method:"DELETE"}),o(He=>He.filter(qe=>qe.id!==oe)),u===oe&&(S(null),p([]),_([]),M(null),A(""),localStorage.removeItem("atp-agent-creator-conv"))}catch(He){console.error("Failed to delete conversation:",He)}},mt=async()=>{var oe;if(!(!j.trim()||!u||W)){pe(!0);try{const He=await ae(`/api/agent-creator/conversations/${u}/urls`,{method:"POST",body:JSON.stringify({url:j})});_(pt=>[...pt,He.reference]);const qe=He.reference.profile_image_url||((oe=He.reference.structured_analysis)==null?void 0:oe.profile_image_url);if(qe&&(p(pt=>[...pt,{id:`profile-${Date.now()}`,role:"assistant",content:`![Profile Picture](${qe})

I found and saved the profile picture from this URL. It will be used as the agent's avatar.`}]),i))try{await ae(`/api/agents/${i.name}/screenshot`,{method:"PATCH",body:JSON.stringify({screenshot_path:qe})})}catch(pt){console.warn("Failed to update agent screenshot:",pt)}w("")}catch(He){console.error("Failed to add URL:",He)}finally{pe(!1)}}},Jt=async oe=>{const He=oe.target.files;if(!(!He||He.length===0||!u)){B(!0);try{for(let qe=0;qe<He.length;qe++){const pt=new FormData;pt.append("image",He[qe]);const wt=await fetch(`/api/agent-creator/conversations/${u}/images`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("atp-token")}`},body:pt});if(!wt.ok){const gt=await wt.json().catch(()=>({error:wt.statusText}));throw new Error(gt.error||"Upload failed")}const Qt=await wt.json();_(gt=>[...gt,Qt.reference])}}catch(qe){console.error("Failed to upload image:",qe)}finally{B(!1),oe.target&&(oe.target.value="")}}},Et=async oe=>{if(u)try{await ae(`/api/agent-creator/conversations/${u}/references/${oe}`,{method:"DELETE"}),_(He=>He.filter(qe=>qe.id!==oe))}catch(He){console.error("Failed to remove reference:",He)}},Rt=async()=>{if(!f.trim()||!u||P)return;const oe={id:Date.now().toString(),role:"user",content:f};p(He=>[...He.filter(qe=>qe.id!=="welcome"),oe]),g(""),N(!0);try{const He=await ae(`/api/agent-creator/conversations/${u}/messages`,{method:"POST",body:JSON.stringify({message:f})});p(qe=>[...qe,{id:He.message.id,role:"assistant",content:He.message.content}])}catch(He){p(qe=>[...qe,{id:(Date.now()+1).toString(),role:"assistant",content:`Error: ${He.message||"Failed"}`}])}finally{N(!1)}},Mt=async()=>{if(!(!u||de)){J(!0);try{const oe=await ae(`/api/agent-creator/conversations/${u}/analyze`,{method:"POST"});M(oe.brief),p(He=>{var qe,pt,wt,Qt;return[...He,{id:`brief-${Date.now()}`,role:"assistant",content:`Design Brief synthesized from ${y.length} reference(s):

**Aesthetic**: ${((qe=oe.brief.agentIdentity)==null?void 0:qe.aesthetic)||"custom"}
**Colors**: ${Object.keys(((pt=oe.brief.colorSystem)==null?void 0:pt.cssVariables)||{}).length} CSS variables
**Fonts**: ${((wt=oe.brief.typographySystem)==null?void 0:wt.displayFont)||"?"} + ${((Qt=oe.brief.typographySystem)==null?void 0:Qt.bodyFont)||"?"}
**Components**: ${(oe.brief.componentInventory||[]).map(gt=>gt.name).join(", ")}

Ready to generate. Click **Generate Agent**.`}]})}catch(oe){console.error("Failed to analyze:",oe)}finally{J(!1)}}},xt=async()=>{if(!(!u||K)){U(!0),R(!0),A(""),D(null);try{const oe=await ae(`/api/agent-creator/conversations/${u}/generate`,{method:"POST"});A(oe.agentFile),D(oe.validation);const He=oe.agentFile.match(/^name:\s*(.+)$/m);He&&$e(He[1].trim())}catch(oe){console.error("Failed to generate:",oe),A(`# Error generating agent

${oe.message||"Unknown error"}`)}finally{U(!1)}}},Pt=async()=>{if(!(!u||!me||!Ee.trim()||F)){ve(!0);try{const oe=await ae(`/api/agent-creator/conversations/${u}/refine`,{method:"POST",body:JSON.stringify({section:me,feedback:Ee})});A(oe.agentFile),D(oe.validation),Se(null),X("")}catch(oe){console.error("Failed to refine:",oe)}finally{ve(!1)}}},ht=async()=>{if(!(!u||Z)){ke(!0);try{const oe=await ae(`/api/agent-creator/conversations/${u}/preview-image`,{method:"POST"});Me(oe.previewUrl+"?t="+Date.now())}catch(oe){console.error("Failed to generate preview:",oe),alert(`Preview failed: ${oe.message||"Unknown error"}`)}finally{ke(!1)}}},zr=async()=>{if(!(!u||!z||ee)){V(!0);try{let oe=z;Oe.trim()&&(oe=oe.replace(/^name:\s*.+$/m,`name: ${Oe.trim()}`));const He=await ae(`/api/agent-creator/conversations/${u}/save`,{method:"POST",body:JSON.stringify({agentContent:oe})});He.success&&(alert(`Agent "${He.agent.name}" saved to library!`),t())}catch(oe){alert(`Failed: ${oe.message||"Unknown error"}`)}finally{V(!1)}}},pr=z?(z.match(/^## .+$/gm)||[]).map(oe=>oe.replace("## ","")):[],Ii=oe=>{const He=Date.now()-new Date(oe).getTime(),qe=Math.floor(He/6e4);if(qe<1)return"now";if(qe<60)return`${qe}m`;const pt=Math.floor(qe/60);return pt<24?`${pt}h`:`${Math.floor(pt/24)}d`};return e.jsxs("div",{style:{backgroundColor:ge.bg,color:ge.tp,position:"fixed",inset:0,zIndex:1e3,display:"flex",flexDirection:"column",fontFamily:"Inter, system-ui, sans-serif"},children:[e.jsxs("header",{style:{padding:"10px 20px",borderBottom:`1px solid ${ge.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:ge.surface,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:ge.violetG,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ge.violetM}`},children:e.jsx(Sn,{size:18,color:ge.violet})}),e.jsxs("div",{children:[u&&!c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:b}),e.jsx("button",{onClick:()=>{m(!0),d(b)},style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px"},children:e.jsx(ea,{size:12})})]}):u&&c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("input",{ref:Ne,type:"text",value:v,onChange:oe=>d(oe.target.value),onKeyDown:oe=>{oe.key==="Enter"&&Ze(),oe.key==="Escape"&&m(!1)},style:{background:ge.bg,border:`1px solid ${ge.violet}`,borderRadius:"4px",padding:"2px 8px",color:ge.tp,fontSize:"14px",fontWeight:600,outline:"none",width:"200px"}}),e.jsx("button",{onClick:Ze,style:{background:"none",border:"none",color:ge.success,cursor:"pointer",padding:"2px"},children:e.jsx(rr,{size:14})}),e.jsx("button",{onClick:()=>m(!1),style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px"},children:e.jsx(kt,{size:14})})]}):e.jsx("h1",{style:{fontSize:"15px",fontWeight:600,margin:0},children:"Agent Architect"}),e.jsx("span",{style:{fontSize:"11px",color:ge.tm},children:u?`${y.length} refs | ${h.filter(oe=>oe.id!=="welcome").length} msgs`:"Select or create a conversation"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[I&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"6px",background:I.score>=7?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${I.score>=7?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[I.score>=7?e.jsx(fl,{size:14,color:ge.success}):e.jsx(hx,{size:14,color:ge.warning}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:I.score>=7?ge.success:ge.warning},children:[I.score,"/10 | ",I.totalLines," lines"]})]}),e.jsx("button",{onClick:t,style:{background:"none",border:"none",color:ge.ts,cursor:"pointer",padding:"6px",borderRadius:"50%"},children:e.jsx(kt,{size:18})})]})]}),e.jsxs("main",{style:{flex:1,display:"grid",gridTemplateColumns:C?"220px 260px 1fr 420px":"220px 260px 1fr",overflow:"hidden",minHeight:0},children:[e.jsxs("aside",{style:{borderRight:`1px solid ${ge.border}`,background:ge.bg,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px",borderBottom:`1px solid ${ge.border}`},children:e.jsxs("button",{onClick:()=>le(),style:{width:"100%",padding:"8px",borderRadius:"8px",fontWeight:600,fontSize:"12px",cursor:"pointer",background:ge.violetG,color:ge.violet,border:`1px solid ${ge.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(ir,{size:14})," New Conversation"]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[s.length===0&&e.jsxs("div",{style:{padding:"24px 16px",textAlign:"center",color:ge.tm,fontSize:"12px"},children:["No conversations yet.",e.jsx("br",{}),'Click "New" to start.']}),s.map(oe=>e.jsx("div",{onClick:()=>We(oe),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${ge.border}`,background:oe.id===u?ge.surfaceEl:"transparent",borderLeft:oe.id===u?`2px solid ${ge.violet}`:"2px solid transparent",transition:"all 0.15s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"12px",fontWeight:600,color:oe.id===u?ge.tp:ge.ts,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:oe.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"3px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:ge.tm,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Zo,{size:9})," ",Ii(oe.updated_at||oe.created_at)]}),oe.generation_status==="complete"&&e.jsx("span",{style:{fontSize:"9px",color:ge.success,padding:"0 4px",background:"rgba(34,197,94,0.1)",borderRadius:"3px"},children:"generated"}),oe.generation_status==="analyzing"&&e.jsx("span",{style:{fontSize:"9px",color:ge.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"analyzing"}),oe.generation_status==="briefing"&&e.jsx("span",{style:{fontSize:"9px",color:ge.cyan,padding:"0 4px",background:"rgba(6,182,212,0.1)",borderRadius:"3px"},children:"briefing"}),oe.generation_status==="generating"&&e.jsx("span",{style:{fontSize:"9px",color:ge.warning,padding:"0 4px",background:"rgba(245,158,11,0.1)",borderRadius:"3px"},children:"generating"}),oe.generation_status==="error"&&e.jsx("span",{style:{fontSize:"9px",color:ge.danger,padding:"0 4px",background:"rgba(239,68,68,0.1)",borderRadius:"3px"},children:"error"})]})]}),e.jsx("button",{onClick:He=>{He.stopPropagation(),Xe(oe.id)},style:{background:"none",border:"none",color:ge.tm,cursor:"pointer",padding:"2px",opacity:.5,flexShrink:0},children:e.jsx(Hr,{size:11})})]})},oe.id))]})]}),e.jsx("aside",{style:{borderRight:`1px solid ${ge.border}`,background:ge.surface,display:"flex",flexDirection:"column",padding:"12px",gap:"12px",overflowY:"auto",minHeight:0},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"11px",color:ge.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",fontWeight:700},children:"References"}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"16px 10px",border:`1px dashed ${ge.borderS}`,borderRadius:"8px",cursor:"pointer",backgroundColor:ge.bg},children:[e.jsx(ox,{size:18,color:E?ge.violet:ge.ts}),e.jsx("span",{style:{fontSize:"11px",color:ge.ts},children:E?"Analyzing...":"Upload screenshots"}),e.jsx("input",{type:"file",hidden:!0,onChange:Jt,accept:"image/*",multiple:!0,disabled:E})]}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx(Pu,{size:11,color:ge.tm,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{type:"text",placeholder:"URL...",value:j,onChange:oe=>w(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&mt(),style:{width:"100%",background:ge.bg,border:`1px solid ${ge.border}`,borderRadius:"6px",padding:"7px 8px 7px 26px",color:ge.tp,fontSize:"11px",outline:"none"}})]}),e.jsx("button",{onClick:mt,disabled:W,style:{padding:"7px",borderRadius:"6px",background:ge.violet,border:"none",color:"white",cursor:"pointer"},children:W?e.jsx(Vi,{size:12,className:"animate-spin"}):e.jsx(ir,{size:12})})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{fontSize:"10px",color:ge.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",fontWeight:700},children:["Context (",y.length,")"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[y.length===0&&e.jsx("div",{style:{padding:"12px",textAlign:"center",color:ge.tm,fontSize:"11px"},children:"No references yet"}),e.jsx(uu,{initial:!1,children:y.map(oe=>{var He,qe,pt,wt,Qt,gt;return e.jsxs(Xt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},style:{padding:"6px",background:ge.surfaceEl,borderRadius:"6px",border:`1px solid ${oe.structured_analysis?"rgba(34,197,94,0.15)":ge.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[oe.type==="image"||oe.profile_image_url||(He=oe.structured_analysis)!=null&&He.profile_image_url?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:oe.profile_image_url||(qe=oe.structured_analysis)!=null&&qe.profile_image_url?"50%":"3px",overflow:"hidden",background:ge.bg,flexShrink:0},children:e.jsx("img",{src:oe.type==="image"?oe.url:oe.profile_image_url||((pt=oe.structured_analysis)==null?void 0:pt.profile_image_url),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"3px",background:ge.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Pu,{size:10,color:ge.ts})}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("p",{style:{fontSize:"10px",color:ge.tp,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0},children:oe.filename||oe.url}),oe.structured_analysis&&e.jsxs("span",{style:{fontSize:"9px",color:ge.success,display:"flex",alignItems:"center",gap:"2px",marginTop:"1px"},children:[e.jsx(fl,{size:8})," Analyzed"]})]}),e.jsx("button",{onClick:()=>Et(oe.id),style:{background:"none",border:"none",cursor:"pointer",color:ge.tm,padding:"2px"},children:e.jsx(Hr,{size:10})})]}),oe.type==="url"&&(oe.profile_image_url||((wt=oe.structured_analysis)==null?void 0:wt.profile_image_url))&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("img",{src:oe.profile_image_url||((Qt=oe.structured_analysis)==null?void 0:Qt.profile_image_url),alt:"Profile",style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${ge.violet}`}}),e.jsxs("span",{style:{fontSize:"9px",color:ge.success,display:"flex",alignItems:"center",gap:"2px"},children:[e.jsx(fl,{size:8})," Profile pic saved"]})]}),oe.structured_analysis&&oe.type==="image"&&oe.structured_analysis.colors&&e.jsxs("div",{style:{marginTop:"4px",display:"flex",gap:"2px",flexWrap:"wrap"},children:[[oe.structured_analysis.colors.dominantBackground,oe.structured_analysis.colors.primaryAccent,oe.structured_analysis.colors.secondaryAccent].filter(Boolean).map((Gt,Ir)=>e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"2px",background:Gt,border:"1px solid rgba(255,255,255,0.1)"},title:Gt},Ir)),((gt=oe.structured_analysis.components)==null?void 0:gt.overallAesthetic)&&e.jsx("span",{style:{fontSize:"8px",color:ge.tm,padding:"1px 4px",background:ge.bg,borderRadius:"2px",marginLeft:"2px"},children:oe.structured_analysis.components.overallAesthetic})]})]},oe.id)})})]})]}),y.length>0&&e.jsx("button",{onClick:Mt,disabled:de,style:{width:"100%",padding:"8px",borderRadius:"6px",fontWeight:600,fontSize:"11px",cursor:de?"not-allowed":"pointer",background:Y?"rgba(34,197,94,0.1)":ge.violetG,color:Y?ge.success:ge.violet,border:`1px solid ${Y?"rgba(34,197,94,0.2)":ge.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:de?e.jsxs(e.Fragment,{children:[e.jsx(Vi,{size:12})," Synthesizing..."]}):Y?e.jsxs(e.Fragment,{children:[e.jsx(fl,{size:12})," Brief ready"]}):e.jsxs(e.Fragment,{children:[e.jsx(Yr,{size:12})," Analyze & Brief"]})}),Y&&e.jsxs("div",{style:{padding:"8px",borderRadius:"6px",background:ge.bg,border:`1px solid ${ge.border}`,fontSize:"10px"},children:[e.jsx("div",{style:{color:ge.tm,fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px",fontSize:"9px"},children:"Brief"}),e.jsxs("div",{style:{color:ge.ts,lineHeight:"1.5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(dw,{size:9,color:ge.cyan}),Object.keys(((fr=Y.colorSystem)==null?void 0:fr.cssVariables)||{}).length," CSS vars"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Mo,{size:9,color:ge.cyan}),((Lr=Y.typographySystem)==null?void 0:Lr.displayFont)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginBottom:"2px"},children:[e.jsx(Ol,{size:9,color:ge.cyan}),((kr=Y.layoutArchitecture)==null?void 0:kr.primaryLayout)||"?"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Bs,{size:9,color:ge.cyan}),(Y.componentInventory||[]).length," comps"]})]})]})]}):e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:ge.tm,fontSize:"12px",textAlign:"center",padding:"20px"},children:"Select or create a conversation to start"})}),e.jsx("section",{style:{display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 6%",display:"flex",flexDirection:"column",gap:"14px"},children:[h.map(oe=>e.jsxs(Xt.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:oe.role==="user"?"flex-end":"flex-start",flexDirection:oe.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:oe.role==="user"?ge.surfaceEl:ge.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:`1px solid ${oe.role==="user"?ge.border:ge.violetM}`},children:oe.role==="user"?e.jsx(qi,{size:12,color:ge.ts}):e.jsx(Ft,{size:12,color:ge.violet})}),e.jsx("div",{style:{background:oe.role==="user"?ge.violet:ge.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopRightRadius:oe.role==="user"?"3px":"12px",borderTopLeftRadius:oe.role==="assistant"?"3px":"12px",color:oe.role==="user"?"white":ge.tp,fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:oe.content.split(/(\!\[.*?\]\(.*?\))/).map((He,qe)=>{const pt=He.match(/^\!\[(.*?)\]\((.*?)\)$/);return pt?e.jsx("img",{src:pt[2],alt:pt[1],style:{maxWidth:"120px",borderRadius:"12px",display:"block",margin:"4px 0",border:`2px solid ${ge.violet}40`}},qe):e.jsx("span",{children:He},qe)})})]},oe.id)),P&&e.jsxs(Xt.div,{initial:{opacity:0},animate:{opacity:1},style:{display:"flex",gap:"10px",maxWidth:"85%",alignSelf:"flex-start"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"7px",background:ge.violetM,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ft,{size:12,color:ge.violet})}),e.jsx("div",{style:{background:ge.surfaceEl,padding:"9px 13px",borderRadius:"12px",borderTopLeftRadius:"3px",color:ge.ts,fontSize:"13px"},children:"Analyzing images & thinking..."})]}),e.jsx("div",{ref:je})]}),e.jsx("div",{style:{padding:"12px 20px",borderTop:`1px solid ${ge.border}`,background:ge.bg},children:e.jsxs("div",{style:{maxWidth:"680px",margin:"0 auto",background:ge.surface,borderRadius:"10px",border:`1px solid ${ge.borderS}`,padding:"3px"},children:[e.jsx("textarea",{value:f,onChange:oe=>g(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),Rt()),placeholder:"Describe the design, ask about your screenshots...",disabled:P,style:{width:"100%",background:"transparent",border:"none",color:ge.tp,padding:"8px 10px",height:"48px",resize:"none",outline:"none",fontSize:"13px",fontFamily:"inherit"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 6px"},children:[e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[y.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:ge.tm,display:"flex",alignItems:"center",gap:"3px",padding:"4px 8px",background:ge.bg,borderRadius:"4px"},children:[e.jsx(ox,{size:10})," ",y.filter(oe=>oe.type==="image").length," images in vision"]}),e.jsx("button",{onClick:xt,disabled:K||h.filter(oe=>oe.id!=="welcome").length<2,style:{background:K?ge.surfaceEl:ge.violetG,color:K?ge.tm:ge.violet,border:`1px solid ${K?ge.border:ge.violetM}`,borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:K?"not-allowed":"pointer"},children:K?e.jsxs(e.Fragment,{children:[e.jsx(Vi,{size:11})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bu,{size:11})," ",C?"Regenerate":"Generate"]})})]}),e.jsxs("button",{onClick:Rt,disabled:!f.trim()||P,style:{background:f.trim()&&!P?ge.violet:ge.surfaceEl,color:f.trim()&&!P?"white":ge.tm,border:"none",borderRadius:"6px",padding:"4px 12px",display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",fontWeight:600,cursor:f.trim()&&!P?"pointer":"not-allowed"},children:[e.jsx(Rh,{size:11})," Send"]})]})]})})]}):e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",color:ge.tm},children:[e.jsx(Sn,{size:40,color:ge.tm}),e.jsx("span",{style:{fontSize:"14px"},children:"Create or select a conversation"}),e.jsxs("button",{onClick:()=>le(),style:{padding:"10px 20px",borderRadius:"8px",background:ge.violet,color:"white",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:14})," New Conversation"]})]})}),e.jsx(uu,{children:C&&e.jsxs(Xt.aside,{initial:{width:0,opacity:0},animate:{width:420,opacity:1},exit:{width:0,opacity:0},style:{borderLeft:`1px solid ${ge.border}`,background:ge.surface,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ge.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Bu,{size:13,color:ge.ts}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:ge.ts},children:"agent.md"})]}),I&&e.jsxs("div",{style:{display:"flex",gap:"6px",fontSize:"10px",color:ge.tm},children:[e.jsxs("span",{children:[I.totalLines,"L"]}),e.jsxs("span",{children:[I.stats.cssVariables,"vars"]}),e.jsxs("span",{children:[I.sections.filter(oe=>oe.found).length,"/",I.sections.length,"sec"]})]})]}),z&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",color:ge.tm,flexShrink:0},children:"Name:"}),e.jsx("input",{type:"text",value:Oe,onChange:oe=>$e(oe.target.value),placeholder:"agent-name",style:{flex:1,background:ge.bg,border:`1px solid ${ge.border}`,borderRadius:"4px",padding:"3px 8px",color:ge.tp,fontSize:"12px",fontWeight:600,fontFamily:ge.mono,outline:"none"}}),e.jsxs("button",{onClick:ht,disabled:Z,title:se?"Regenerate Preview":"Generate Preview",style:{padding:"4px 10px",borderRadius:"5px",fontSize:"10px",fontWeight:600,cursor:Z?"not-allowed":"pointer",background:Z?ge.surfaceEl:"rgba(6,182,212,0.12)",color:Z?ge.tm:ge.cyan,border:`1px solid ${Z?ge.border:"rgba(6,182,212,0.25)"}`,display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap",flexShrink:0},children:[Z?e.jsx(Vi,{size:10,style:{animation:"spin 1s linear infinite"}}):e.jsx(US,{size:10}),Z?"Generating...":se?"Regen":"Preview"]})]})]}),pr.length>0&&e.jsx("div",{style:{padding:"6px 14px",borderBottom:`1px solid ${ge.border}`,display:"flex",flexWrap:"wrap",gap:"3px"},children:pr.map((oe,He)=>{const qe=I==null?void 0:I.sections.find(pt=>oe.toLowerCase().includes(pt.name.toLowerCase().split(" ")[0]));return e.jsx("button",{onClick:()=>Se(me===oe?null:oe),style:{padding:"1px 6px",borderRadius:"3px",fontSize:"9px",fontWeight:500,cursor:"pointer",border:"none",background:me===oe?ge.violetM:qe!=null&&qe.found?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",color:me===oe?ge.violet:qe!=null&&qe.found?ge.success:ge.warning},children:oe.slice(0,18)},He)})}),me&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${ge.border}`,background:ge.bg},children:[e.jsxs("div",{style:{fontSize:"10px",color:ge.violet,fontWeight:600,marginBottom:"4px"},children:["Refine: ",me]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"text",value:Ee,onChange:oe=>X(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&Pt(),placeholder:"What to improve...",style:{flex:1,background:ge.surface,border:`1px solid ${ge.border}`,borderRadius:"4px",padding:"5px 8px",color:ge.tp,fontSize:"11px",outline:"none"}}),e.jsx("button",{onClick:Pt,disabled:F||!Ee.trim(),style:{padding:"5px 10px",borderRadius:"4px",background:ge.violet,border:"none",color:"white",fontSize:"10px",fontWeight:600,cursor:"pointer"},children:F?"...":"Refine"})]})]}),se&&e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ge.border}`,background:ge.bg},children:e.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:`1px solid ${ge.border}`,cursor:"pointer"},onClick:()=>Ie(!0),children:[e.jsx("img",{src:se,alt:"Preview mockup",style:{width:"100%",height:"auto",display:"block"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",background:"rgba(0,0,0,0.7)",borderRadius:"4px",padding:"3px 6px",display:"flex",alignItems:"center",gap:"3px",color:"white",fontSize:"9px"},children:[e.jsx(rw,{size:9})," Fullscreen"]})]})}),e.jsx("div",{style:{flex:1,padding:"14px",fontFamily:ge.mono,fontSize:"10px",lineHeight:"1.6",color:ge.ts,backgroundColor:ge.bg,overflowY:"auto",whiteSpace:"pre-wrap"},children:K?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"14px"},children:[e.jsx(Vi,{size:22,color:ge.violet,style:{animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{color:ge.ts,fontSize:"12px",fontFamily:"Inter, sans-serif"},children:"Generating 600-900 line agent..."}),e.jsx("div",{style:{color:ge.tm,fontSize:"10px",fontFamily:"Inter, sans-serif"},children:"30-60 seconds"})]}):z||"Generate your agent to preview it here..."}),I&&I.issues.length>0&&e.jsx("div",{style:{padding:"8px 14px",borderTop:`1px solid ${ge.border}`,background:"rgba(245,158,11,0.05)",maxHeight:"70px",overflowY:"auto"},children:I.issues.map((oe,He)=>e.jsxs("div",{style:{fontSize:"9px",color:ge.warning,display:"flex",alignItems:"center",gap:"3px",marginBottom:"1px"},children:[e.jsx(hx,{size:8})," ",oe]},He))}),e.jsx("div",{style:{padding:"10px 14px",background:ge.surface,borderTop:`1px solid ${ge.border}`},children:e.jsxs("button",{onClick:zr,disabled:!z||ee||K,style:{width:"100%",background:z&&!ee&&!K?ge.violet:ge.surfaceEl,color:z&&!ee&&!K?"white":ge.tm,border:"none",padding:"9px",borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:z&&!ee&&!K?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Zl,{size:13})," ",ee?"Saving...":`Save${Oe?` "${Oe}"`:""} to Library`]})})]})})]}),e.jsx(uu,{children:he&&se&&e.jsxs(Xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ie(!1),style:{position:"fixed",inset:0,zIndex:2e3,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[e.jsx("button",{onClick:()=>Ie(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(kt,{size:18,color:"white"})}),e.jsx("img",{src:se,alt:"Preview fullscreen",onClick:oe=>oe.stopPropagation(),style:{maxWidth:"95vw",maxHeight:"95vh",objectFit:"contain",borderRadius:"8px",cursor:"default"}})]})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})},ne={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'},Z4=({value:t})=>{const[i,s]=L.useState(0);return L.useEffect(()=>{let o=0;const u=parseInt(t)||0;if(o===u)return;const b=u/(1e3/30);let l=setInterval(()=>{o+=b,o>=u?(s(u),clearInterval(l)):s(Math.floor(o))},30);return()=>clearInterval(l)},[t]),e.jsx("span",{children:i.toLocaleString()})},ch=({children:t,color:i=ne.violet})=>e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",background:`${i}15`,border:`1px solid ${i}44`,color:i,fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em"},children:t}),e6=({project:t,navigate:i,onDelete:s,t:o})=>{const[u,S]=$s.useState(!1);return e.jsxs("div",{onClick:()=>i(`/project/${t.id}`),onMouseEnter:b=>{b.currentTarget.style.borderColor=`${o.violet}44`,b.currentTarget.style.boxShadow=`0 8px 24px -8px ${o.violet}22`,b.currentTarget.style.transform="translateY(-2px)",S(!0)},onMouseLeave:b=>{b.currentTarget.style.borderColor=o.border,b.currentTarget.style.boxShadow="none",b.currentTarget.style.transform="translateY(0)",S(!1)},style:{background:o.surface,borderRadius:"12px",border:`1px solid ${o.border}`,padding:"18px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"14px",transition:"all 0.2s",position:"relative"},children:[u&&e.jsx(Xt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:b=>s(t.id,t.name,b),style:{position:"absolute",top:"12px",right:"12px",zIndex:10,width:"32px",height:"32px",borderRadius:"6px",backgroundColor:"rgba(239, 68, 68, 0.9)",border:"1px solid rgba(239, 68, 68, 1)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseEnter:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 1)",b.currentTarget.style.transform="scale(1.05)"},onMouseLeave:b=>{b.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.9)",b.currentTarget.style.transform="scale(1)"},children:e.jsx(Hr,{size:16})}),t.latest_iteration_id&&e.jsx("div",{style:{width:"100%",height:"140px",borderRadius:"8px",overflow:"hidden",background:o.surfaceEl,border:`1px solid ${o.border}`,position:"relative"},children:e.jsx("iframe",{src:`/api/preview/${t.id}/${t.latest_iteration_id}`,title:`Preview ${t.name}`,style:{width:"1280px",height:"800px",border:"none",transform:"scale(0.22)",transformOrigin:"top left",pointerEvents:"none"},sandbox:"allow-same-origin",loading:"lazy"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:o.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${o.borderS}`},children:e.jsx(ec,{size:18,color:o.violet})}),e.jsx(ch,{color:t.status==="active"?o.success:o.ts,children:t.status||"Idle"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",marginBottom:"4px"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",color:o.ts,lineHeight:"1.4",height:"32px",overflow:"hidden"},children:t.description||"No description provided."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",borderTop:`1px solid ${o.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Agent"}),e.jsxs("div",{style:{fontSize:"11px",color:o.tp,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(es,{size:10,color:o.ts})," ",t.agent_name||"None"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:o.tm,textTransform:"uppercase",fontWeight:700,marginBottom:"2px"},children:"Iters"}),e.jsx("div",{style:{fontSize:"11px",color:o.tp},children:t.iteration_count||0})]})]})]})};function t6(){const t=qt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[m,v]=L.useState(""),[d,y]=L.useState(""),[_,j]=L.useState(!1),[w,h]=L.useState(!1),[p,f]=L.useState(null),[g,C]=L.useState(!1),R=$s.useRef(null),z=async()=>{try{b(!0);const[V,de]=await Promise.all([ae("/api/projects"),ae("/api/agents")]);s(V||[]),u(de||[])}catch(V){console.error(V)}finally{b(!1)}};L.useEffect(()=>{z()},[]);const A=async()=>{c(!0);try{await ae("/api/seed",{method:"POST"}),await z()}catch(V){console.error(V)}finally{c(!1)}},E=async()=>{if(!(!m.trim()||_)){j(!0),y("");try{const V=await ae("/api/orchestrator/command",{method:"POST",body:JSON.stringify({prompt:m})});y(V.response)}catch(V){y(`Error: ${V.message}`)}finally{j(!1)}}},B=async(V,de,J)=>{if(J.stopPropagation(),!!window.confirm(`Are you sure you want to delete "${de}"? This action cannot be undone.`))try{await ae(`/api/projects/${V}`,{method:"DELETE"}),await z()}catch(Y){console.error("Failed to delete project:",Y),alert("Failed to delete project. Please try again.")}},P=i.reduce((V,de)=>V+(de.iteration_count||0),0),N=V=>{if(R.current){const{scrollLeft:de,clientWidth:J}=R.current,Y=V==="left"?de-J*.5:de+J*.5;R.current.scrollTo({left:Y,behavior:"smooth"})}},K=[{id:"commit",name:"/commit",description:"Analyze staged changes and generate semantic commit messages.",icon:Eh,usage:142,status:"Available",accent:ne.success,isNew:!1},{id:"review",name:"/review-pr",description:"Perform an automated security and logic audit on pull requests.",icon:kS,usage:89,status:"Available",accent:ne.violet,isNew:!1},{id:"refactor",name:"/refactor",description:"Suggest structural improvements for complex functions or components.",icon:jh,usage:56,status:"Available",accent:ne.violet,isNew:!0},{id:"optimize",name:"/optimize",description:"Identify performance bottlenecks and suggest faster alternatives.",icon:Yr,usage:0,status:"Coming Soon",accent:ne.warning,isNew:!1}],U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},ee={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return S?e.jsxs("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:ne.violet,fontFamily:ne.mono,fontSize:"13px"},children:[e.jsx(Vi,{size:20,style:{animation:"spin 2s linear infinite",marginRight:"8px"}}),"INITIALIZING_DASHBOARD..."]}):e.jsxs(Xt.div,{variants:U,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:"32px"},children:[e.jsxs(Xt.header,{variants:ee,className:"dash-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"6px",letterSpacing:"-0.02em"},children:["Dashboard ",e.jsx("span",{style:{fontSize:"24px"},children:""})]}),e.jsxs("p",{style:{color:ne.ts,fontSize:"14px",margin:0},children:["Managing ",i.length," projects across ",o.length," specialized agents."]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"8px",backgroundColor:ne.surface,border:`1px solid ${ne.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:ne.success,boxShadow:`0 0 10px ${ne.success}`}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ne.ts},children:"All Systems Operational"})]})})]}),e.jsxs(Xt.div,{variants:ee,className:"dash-actions",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[e.jsxs("button",{onClick:()=>t("/project/new"),style:{padding:"20px",borderRadius:"12px",background:ne.surface,border:`1px solid ${ne.violet}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:`0 0 20px ${ne.violet}15`},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=ne.violet,V.currentTarget.style.boxShadow=`0 10px 30px ${ne.violet}25`},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${ne.violet}66`,V.currentTarget.style.boxShadow=`0 0 20px ${ne.violet}15`},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:ne.violet,color:"#fff",boxShadow:`0 0 15px ${ne.violet}88`},children:e.jsx(ir,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:ne.tp,marginBottom:"2px"},children:"New Project"}),e.jsx("div",{style:{fontSize:"12px",color:ne.ts},children:"Initialize testing environment"})]})]}),e.jsxs("button",{onClick:()=>C(!0),style:{padding:"20px",borderRadius:"12px",background:ne.surface,border:`1px solid ${ne.success}66`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left",boxShadow:"0 0 20px rgba(34, 197, 94, 0.08)"},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.borderColor=ne.success,V.currentTarget.style.boxShadow="0 10px 30px rgba(34, 197, 94, 0.15)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.borderColor=`${ne.success}66`,V.currentTarget.style.boxShadow="0 0 20px rgba(34, 197, 94, 0.08)"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:"rgba(34, 197, 94, 0.15)",color:ne.success,boxShadow:"0 0 15px rgba(34, 197, 94, 0.2)"},children:e.jsx(Ft,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:ne.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"12px",color:ne.ts},children:"Design with GPT-5"})]})]}),e.jsxs("button",{onClick:()=>t("/agents"),style:{padding:"20px",borderRadius:"12px",background:ne.surface,border:`1px solid ${ne.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=ne.surfaceEl,V.currentTarget.style.borderColor=ne.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=ne.surface,V.currentTarget.style.borderColor=ne.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:ne.surfaceEl,color:ne.tp,border:`1px solid ${ne.borderS}`},children:e.jsx(zs,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:ne.tp,marginBottom:"2px"},children:"Browse Agents"}),e.jsx("div",{style:{fontSize:"12px",color:ne.ts},children:"Explore pretrained models"})]})]}),e.jsxs("button",{onClick:()=>t("/marketplace"),style:{padding:"20px",borderRadius:"12px",background:ne.surface,border:`1px solid ${ne.border}`,display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",transition:"all 0.3s",textAlign:"left"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=ne.surfaceEl,V.currentTarget.style.borderColor=ne.borderS},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=ne.surface,V.currentTarget.style.borderColor=ne.border},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"8px",background:ne.surfaceEl,color:ne.tp,border:`1px solid ${ne.borderS}`},children:e.jsx(Yr,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"15px",color:ne.tp,marginBottom:"2px"},children:"Marketplace"}),e.jsx("div",{style:{fontSize:"12px",color:ne.ts},children:"Discover & share agents"})]})]})]}),e.jsx(Xt.div,{variants:ee,children:e.jsxs("div",{onClick:()=>t("/personaboarding"),style:{position:"relative",overflow:"hidden",cursor:"pointer",borderRadius:"16px",padding:"32px 36px",background:`linear-gradient(135deg, ${ne.surface} 0%, #1e1233 50%, ${ne.surface} 100%)`,border:`1px solid ${ne.violet}33`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"32px",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.borderColor=ne.violet,V.currentTarget.style.boxShadow=`0 12px 40px ${ne.violet}20`,V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.borderColor=`${ne.violet}33`,V.currentTarget.style.boxShadow="none",V.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"absolute",top:"-40px",right:"120px",width:"200px",height:"200px",borderRadius:"50%",background:`radial-gradient(circle, ${ne.violet}18 0%, transparent 70%)`,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-60px",left:"30%",width:"160px",height:"160px",borderRadius:"50%",background:"radial-gradient(circle, rgba(236,72,153,0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",zIndex:1},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:`linear-gradient(135deg, ${ne.violet}, #a855f7)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 24px ${ne.violet}44`,flexShrink:0},children:e.jsx(qi,{size:28,color:"#fff"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:ne.tp,letterSpacing:"-0.01em"},children:"Persona Onboarding"}),e.jsx("span",{style:{padding:"2px 10px",borderRadius:"100px",background:"linear-gradient(135deg, #ec4899, #8b5cf6)",color:"#fff",fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.08em"},children:"New"})]}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:ne.ts,lineHeight:"1.5",maxWidth:"420px"},children:"Crez un agent personnalis qui comprend votre faon de travailler. Chaque choix construit une histoire narrative unique."})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",zIndex:1,flexShrink:0},children:[e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",maxWidth:"180px"},children:["Role","Skills","Style","Workflow"].map(V=>e.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",backgroundColor:`${ne.violet}15`,border:`1px solid ${ne.violet}30`,color:ne.violet,fontSize:"10px",fontWeight:600},children:V},V))}),e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:ne.tp,color:ne.bg,display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s"},children:e.jsx(V2,{size:20})})]})]})}),e.jsx(Xt.div,{variants:ee,className:"dash-metrics",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[{label:"Total Agents",value:o.length,icon:es,trend:"Active",color:ne.violet},{label:"Active Projects",value:i.length,icon:Ch,trend:"Running",color:ne.success},{label:"Total Iterations",value:P,icon:kw,trend:"Completed",color:ne.warning}].map((V,de)=>e.jsxs("div",{style:{background:ne.surface,padding:"20px",borderRadius:"12px",border:`1px solid ${ne.border}`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"14px"},children:[e.jsx("div",{style:{color:ne.ts,fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:V.label}),e.jsx(V.icon,{size:18,color:V.color})]}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,marginBottom:"6px",color:ne.tp},children:e.jsx(Z4,{value:V.value})}),e.jsxs("div",{style:{fontSize:"11px",color:ne.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(S0,{size:10})," ",V.trend]}),e.jsx("div",{style:{position:"absolute",right:"-20px",bottom:"-20px",width:"100px",height:"100px",background:`radial-gradient(circle, ${V.color}11 0%, transparent 70%)`,borderRadius:"50%"}})]},de))}),e.jsxs(Xt.div,{variants:ee,style:{position:"relative"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:ne.tp,fontSize:"18px",fontWeight:"700",marginBottom:"4px",margin:0},children:"My Agents"}),e.jsx("p",{style:{color:ne.ts,fontSize:"13px",margin:0},children:"Your active collection of AI specialized tools"})]}),e.jsxs("span",{style:{color:ne.tm,fontSize:"12px",fontWeight:"500"},children:[o.length," Available"]})]}),w&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Xt.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>N("left"),style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:ne.surfaceEl,border:`1px solid ${ne.borderS}`,color:ne.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Qo,{size:20})}),e.jsx(Xt.button,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},onClick:()=>N("right"),style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:ne.surfaceEl,border:`1px solid ${ne.borderS}`,color:ne.tp,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(hr,{size:20})})]}),e.jsx("div",{ref:R,style:{display:"flex",gap:"16px",overflowX:"auto",padding:"8px 4px 24px 4px",msOverflowStyle:"none",scrollbarWidth:"none",scrollBehavior:"smooth"},children:o.length===0?e.jsxs("div",{style:{width:"100%",padding:"40px",textAlign:"center",color:ne.tm,background:ne.surface,border:`1px dashed ${ne.border}`,borderRadius:"12px"},children:[e.jsx(Sn,{size:32,style:{margin:"0 auto 12px",opacity:.5}}),e.jsx("p",{style:{fontSize:"13px",margin:0},children:"No agents available yet"})]}):e.jsxs(e.Fragment,{children:[o.map((V,de)=>e.jsxs(Xt.div,{whileHover:{y:-5,borderColor:ne.violet,boxShadow:`0 8px 30px ${ne.violetG}`},style:{flex:"0 0 300px",backgroundColor:ne.surface,border:`1px solid ${ne.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",cursor:"pointer",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},onClick:()=>t(`/agents/${V.name}`),children:[V.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"8px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${ne.border}`},children:e.jsx("img",{src:V.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:de%2===0?ne.violetM:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:de%2===0?ne.violet:ne.ts,border:`1px solid ${de%2===0?ne.violet:ne.border}`},children:de%2===0?e.jsx(Sn,{size:22}):e.jsx(es,{size:22})}),V.rating&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:ne.warning},children:[e.jsx(En,{size:12,fill:ne.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:V.rating})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("h3",{style:{color:ne.tp,fontSize:"15px",fontWeight:"600",margin:0},children:V.name}),V.category&&e.jsx(ch,{color:ne.violet,children:V.category})]}),e.jsx("p",{style:{color:ne.ts,fontSize:"12px",lineHeight:"1.5",margin:0,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"36px"},children:V.description||"No description available"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"auto",paddingTop:"8px"},children:[e.jsxs(Xt.button,{whileTap:{scale:.96},style:{backgroundColor:ne.tp,color:ne.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:2},onClick:J=>{J.stopPropagation(),t(`/project/new?agent=${V.name}`)},children:[e.jsx(Ql,{size:14,fill:"currentColor"}),"Use"]}),e.jsxs("button",{style:{backgroundColor:ne.surfaceEl,color:ne.ts,border:`1px solid ${ne.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",flex:1.5},onClick:J=>{J.stopPropagation(),t(`/agents/${V.name}`)},children:[e.jsx(Hs,{size:14}),"View"]}),e.jsx("button",{style:{backgroundColor:ne.surfaceEl,color:ne.ts,border:`1px solid ${ne.borderS}`,borderRadius:"4px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:J=>{J.stopPropagation(),t(`/agents/${V.name}/edit`)},children:e.jsx($u,{size:14})})]})]},V.name||de)),e.jsx("div",{style:{minWidth:"10px"}})]})})]}),e.jsxs(Xt.div,{variants:ee,style:{width:"100%"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px",padding:"0 4px"},children:e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",color:ne.tp,margin:"0 0 4px 0",letterSpacing:"-0.01em"},children:"Platform Capabilities"}),e.jsx("p",{style:{fontSize:"13px",color:ne.ts,margin:0},children:"Slash commands and specialized agent skills available for your projects."})]})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"16px"},children:K.map(V=>e.jsxs(Xt.div,{whileHover:{y:-2},onMouseEnter:()=>f(V.id),onMouseLeave:()=>f(null),style:{backgroundColor:ne.surface,border:`1px solid ${p===V.id?ne.violet:ne.border}`,borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",transition:"border-color 0.2s ease, box-shadow 0.2s ease",boxShadow:p===V.id?`0 0 20px ${ne.violetG}`:"none",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"60px",height:"60px",background:V.accent,filter:"blur(40px)",opacity:p===V.id?.15:.05,borderRadius:"50%",transition:"opacity 0.3s ease"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:`${V.accent}15`,border:`1px solid ${V.accent}30`,display:"flex",alignItems:"center",justifyContent:"center",color:V.accent},children:e.jsx(V.icon,{size:18})}),V.isNew?e.jsx("span",{style:{padding:"2px 8px",borderRadius:"100px",backgroundColor:ne.violetM,border:`1px solid ${ne.violet}`,color:ne.violet,fontSize:"10px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em"},children:"New"}):e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:ne.tm,textTransform:"uppercase",fontWeight:"600"},children:"Uses"}),e.jsx("div",{style:{fontSize:"13px",color:ne.ts,fontWeight:"500",fontFamily:ne.mono},children:V.usage})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 6px 0",fontSize:"15px",color:ne.tp,fontFamily:ne.mono,fontWeight:"600"},children:V.name}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:ne.ts,lineHeight:"1.5",height:"40px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:V.description})]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:`1px solid ${ne.border}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:V.status==="Available"?ne.success:ne.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:V.status==="Available"?ne.success:ne.tm}}),V.status]}),e.jsxs(Xt.div,{animate:{x:p===V.id?4:0},style:{display:"flex",alignItems:"center",color:ne.violet,fontSize:"12px",fontWeight:"600"},children:["Use skill ",e.jsx(hr,{size:14})]})]})]},V.id))})]}),e.jsxs("div",{className:"dash-main-grid",style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"28px",alignItems:"start"},children:[e.jsxs(Xt.div,{variants:ee,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("h2",{style:{fontSize:"18px",fontWeight:700,display:"flex",alignItems:"center",gap:"8px",margin:0},children:["Projects ",e.jsx(ch,{color:ne.ts,children:i.length})]})}),i.length===0?e.jsxs("div",{style:{padding:"50px 40px",borderRadius:"16px",border:`2px dashed ${ne.border}`,textAlign:"center",backgroundColor:`${ne.surface}44`},children:[e.jsx("div",{style:{marginBottom:"16px",color:ne.tm},children:e.jsx(zs,{size:40,strokeWidth:1,style:{margin:"0 auto"}})}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:700,marginBottom:"6px"},children:"Your workspace is empty"}),e.jsx("p",{style:{color:ne.ts,fontSize:"13px",maxWidth:"300px",margin:"0 auto 20px",lineHeight:"1.5"},children:"Start by creating a new project or initialize with our sample test suite."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{onClick:A,disabled:l,style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:ne.surfaceEl,color:ne.tp,border:`1px solid ${ne.borderS}`,fontWeight:600,fontSize:"13px",cursor:"pointer"},children:l?"Generating...":"Seed Sample Data"}),e.jsx("button",{onClick:()=>t("/project/new"),style:{padding:"10px 18px",borderRadius:"8px",backgroundColor:ne.violet,color:"#fff",border:"none",fontWeight:600,fontSize:"13px",cursor:"pointer"},children:"Create Project"})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:i.map(V=>e.jsx(e6,{project:V,navigate:t,onDelete:B,t:ne},V.id))})]}),e.jsxs(Xt.div,{variants:ee,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${ne.surface}, ${ne.bg})`,borderRadius:"14px",border:`1px solid ${ne.violet}33`,padding:"20px",boxShadow:`0 10px 40px -10px ${ne.violet}15`,position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",background:ne.violetG,color:ne.violet},children:e.jsx(Ft,{size:16})}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:700,margin:0},children:"Ask Guru AI"})]}),e.jsx("p",{style:{fontSize:"12px",color:ne.ts,marginBottom:"16px",lineHeight:"1.5"},children:"Get recommendations for agent selection, optimization tips, and platform guidance."}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{value:m,onChange:V=>v(V.target.value),onKeyDown:V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),E())},placeholder:"Ask anything...",style:{width:"100%",height:"70px",backgroundColor:ne.bg,border:`1px solid ${ne.border}`,borderRadius:"10px",padding:"10px",color:ne.tp,fontSize:"13px",resize:"none",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit",boxSizing:"border-box"},onFocus:V=>V.target.style.borderColor=ne.violet,onBlur:V=>V.target.style.borderColor=ne.border}),e.jsx("button",{onClick:E,disabled:_||!m.trim(),style:{position:"absolute",bottom:"8px",right:"8px",padding:"5px 10px",backgroundColor:ne.violet,color:"#fff",border:"none",borderRadius:"5px",fontSize:"11px",fontWeight:700,cursor:"pointer",opacity:!m.trim()||_?.5:1,transition:"opacity 0.2s"},children:_?"Thinking...":"Send"})]}),d&&e.jsx("div",{style:{marginTop:"12px",padding:"10px",borderRadius:"8px",backgroundColor:`${ne.violet}08`,borderLeft:`3px solid ${ne.violet}`,fontSize:"12px",color:ne.tp,lineHeight:"1.5",fontFamily:ne.mono,maxHeight:"200px",overflowY:"auto"},children:d})]}),e.jsxs("div",{style:{background:ne.surface,borderRadius:"14px",border:`1px solid ${ne.border}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${ne.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",margin:0},children:[e.jsx(I0,{size:13,color:ne.ts})," Activity Log"]}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:ne.success,animation:"pulse 2s infinite"}})]}),e.jsxs("div",{style:{height:"220px",overflowY:"auto",padding:"12px",fontFamily:ne.mono,fontSize:"11px",display:"flex",flexDirection:"column",gap:"8px"},children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:1},children:[e.jsxs("span",{style:{color:ne.tm,whiteSpace:"nowrap"},children:["[",new Date().toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:ne.success},children:"System initialized"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.8},children:[e.jsxs("span",{style:{color:ne.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-12e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsxs("span",{style:{color:ne.ts},children:["Projects loaded (",i.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",opacity:.6},children:[e.jsxs("span",{style:{color:ne.tm,whiteSpace:"nowrap"},children:["[",new Date(Date.now()-24e4).toLocaleTimeString("en-US",{hour12:!1}),"]"]}),e.jsx("span",{style:{color:ne.ts},children:"Agent registry synced"})]})]}),i.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:ne.tm},children:"No activity yet"})]})]}),e.jsxs("div",{style:{background:ne.surface,borderRadius:"14px",border:`1px solid ${ne.border}`,padding:"16px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,marginBottom:"14px"},children:"Platform Status"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:ne.ts},children:"Project Capacity"}),e.jsxs("span",{style:{color:ne.tp,fontWeight:600},children:[i.length,"/20"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:ne.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${i.length/20*100}%`,height:"100%",backgroundColor:ne.violet,borderRadius:"10px",transition:"width 0.5s ease-out"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"5px"},children:[e.jsx("span",{style:{color:ne.ts},children:"Agent Registry"}),e.jsxs("span",{style:{color:ne.tp,fontWeight:600},children:[o.length," loaded"]})]}),e.jsx("div",{style:{width:"100%",height:"5px",backgroundColor:ne.bg,borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:ne.success,borderRadius:"10px"}})})]})]})]})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: ${ne.borderS}; borderRadius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: ${ne.tm}; }

        @media (max-width: 1024px) {
          .dash-main-grid { grid-template-columns: 1fr !important; }
        }
        @media (max-width: 768px) {
          .dash-actions { grid-template-columns: repeat(2, 1fr) !important; gap: 10px !important; }
          .dash-metrics { grid-template-columns: 1fr !important; gap: 12px !important; }
          .dash-main-grid { grid-template-columns: 1fr !important; }
          .dash-header { flex-direction: column; align-items: flex-start !important; }
        }
        @media (max-width: 480px) {
          .dash-actions { grid-template-columns: 1fr !important; }
        }
      `}}),g&&e.jsx(ap,{onClose:()=>C(!1)})]})}const zo={violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"},dh={folder:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),code:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"16 18 22 12 16 6"}),e.jsx("polyline",{points:"8 6 2 12 8 18"})]}),globe:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]}),database:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),rocket:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 00-2.91-.09z"}),e.jsx("path",{d:"M12 15l-3-3a22 22 0 012-3.95A12.88 12.88 0 0122 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 01-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),star:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),heart:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})}),lightning:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),brain:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.5 2A2.5 2.5 0 0112 4.5v15a2.5 2.5 0 01-4.96.44 2.5 2.5 0 01-2.96-3.08 3 3 0 01-.34-5.58 2.5 2.5 0 011.32-4.24 2.5 2.5 0 011.98-3A2.5 2.5 0 019.5 2z"}),e.jsx("path",{d:"M14.5 2A2.5 2.5 0 0012 4.5v15a2.5 2.5 0 004.96.44 2.5 2.5 0 002.96-3.08 3 3 0 00.34-5.58 2.5 2.5 0 00-1.32-4.24 2.5 2.5 0 00-1.98-3A2.5 2.5 0 0014.5 2z"})]}),terminal:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),cloud:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z"})}),shield:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),bug:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"8",y:"6",width:"8",height:"14",rx:"4"}),e.jsx("path",{d:"M19 12h2"}),e.jsx("path",{d:"M3 12h2"}),e.jsx("path",{d:"M19 8h2"}),e.jsx("path",{d:"M3 8h2"}),e.jsx("path",{d:"M19 16h2"}),e.jsx("path",{d:"M3 16h2"}),e.jsx("path",{d:"M12 6V2"})]}),palette:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"13.5",cy:"6.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"17.5",cy:"10.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"8.5",cy:"7.5",r:"0.5",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"12.5",r:"0.5",fill:"currentColor"}),e.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.93 0 1.5-.75 1.5-1.5 0-.39-.15-.74-.39-1.04-.24-.3-.39-.65-.39-1.04 0-.83.67-1.5 1.5-1.5H16c3.31 0 6-2.69 6-6 0-5.5-4.5-9.92-10-9.92z"})]}),cpu:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),wand:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 4V2"}),e.jsx("path",{d:"M15 16v-2"}),e.jsx("path",{d:"M8 9h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M17.8 11.8L19 13"}),e.jsx("path",{d:"M15 9h0"}),e.jsx("path",{d:"M17.8 6.2L19 5"}),e.jsx("path",{d:"M11 6.2L9.7 5"}),e.jsx("path",{d:"M2 22l10-10"})]}),hammer:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 12l-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 010-3L12 9"}),e.jsx("path",{d:"M17.64 15L22 10.64"}),e.jsx("path",{d:"M20.91 11.7l-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V6.5a.5.5 0 00-.5-.5H16.5c-.85 0-1.65-.33-2.25-.93l-1.25-1.25"}),e.jsx("path",{d:"M13.09 7.91l3 3"})]}),search:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),sparkles:t=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"})}),brush:t=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9.06 11.9l8.07-8.06a2.85 2.85 0 114.03 4.03l-8.06 8.08"}),e.jsx("path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 00-3-3.02z"})]})};function r6(t,i=16){const s=dh[t];return s?s(i):null}function i6({value:t,onChange:i}){const[s,o]=L.useState(null),u=Object.keys(dh);return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"4px"},children:u.map(S=>e.jsx("button",{onClick:()=>i(S),onMouseEnter:()=>o(S),onMouseLeave:()=>o(null),title:S,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t===S?zo.violetM:s===S?"rgba(255,255,255,0.04)":"transparent",border:t===S?`1px solid ${zo.violet}`:"1px solid transparent",borderRadius:"6px",cursor:"pointer",padding:0,color:t===S?zo.violet:s===S?zo.ts:zo.tm,transition:"all 0.15s ease"},children:dh[S](16)},S))})}const Tt={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444"},n6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316","#22c55e","#a855f7"],Lm={backgroundColor:Tt.bg,border:`1px solid ${Tt.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},vl={fontSize:"11px",fontWeight:"600",color:Tt.tm,textTransform:"uppercase",letterSpacing:"0.05em"};function s6({isOpen:t,onClose:i,categories:s,agentCounts:o,onSave:u,onDelete:S,onReorder:b}){const[l,c]=L.useState({name:"",color:"#8B5CF6",icon:"",description:""}),[m,v]=L.useState(null),[d,y]=L.useState(null),[_,j]=L.useState(null);if(L.useEffect(()=>{t||(c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null),y(null))},[t]),!t)return null;const w=g=>{v(g.id),c({name:g.name,color:g.color||"#8B5CF6",icon:g.icon||"",description:g.description||""})},h=()=>{var g;(g=l.name)!=null&&g.trim()&&(u({...l,id:m||void 0}),c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null))},p=()=>{c({name:"",color:"#8B5CF6",icon:"",description:""}),v(null)},f=(g,C)=>{const R=[...s],z=g+C;z<0||z>=R.length||([R[g],R[z]]=[R[z],R[g]],b(R.map(A=>A.id)))};return e.jsx("div",{onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{onClick:g=>g.stopPropagation(),style:{width:"720px",maxHeight:"80vh",backgroundColor:Tt.surface,border:`1px solid ${Tt.borderS}`,borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${Tt.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Manage Categories"}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:Tt.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"55%",padding:"20px 24px",borderRight:`1px solid ${Tt.border}`,overflowY:"auto",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h3",{style:{fontSize:"13px",fontWeight:"600",margin:0,color:Tt.ts},children:m?"Edit Category":"New Category"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:vl,children:"Name"}),e.jsx("input",{style:Lm,value:l.name,placeholder:"Category name...",onChange:g=>c(C=>({...C,name:g.target.value})),onKeyDown:g=>{g.key==="Enter"&&h()}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:vl,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:n6.map(g=>e.jsx("button",{onClick:()=>c(C=>({...C,color:g})),style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:g,padding:0,cursor:"pointer",border:l.color===g?"2px solid #fff":"2px solid transparent",transition:"border 0.15s"}},g))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:vl,children:"Icon"}),e.jsx(i6,{value:l.icon,onChange:g=>c(C=>({...C,icon:g}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:vl,children:"Description"}),e.jsx("input",{style:Lm,value:l.description,placeholder:"Optional description...",onChange:g=>c(C=>({...C,description:g.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[m&&e.jsx("button",{onClick:p,style:{backgroundColor:Tt.surfaceEl,color:Tt.ts,border:`1px solid ${Tt.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:h,style:{backgroundColor:Tt.tp,color:Tt.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:12}),m?"Update":"Add Category"]})]})]}),e.jsxs("div",{style:{width:"45%",padding:"20px 16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("h3",{style:{fontSize:"13px",fontWeight:"600",margin:"0 0 8px 0",color:Tt.ts},children:["Existing (",s.length,")"]}),s.map((g,C)=>e.jsxs("div",{onMouseEnter:()=>j(g.id),onMouseLeave:()=>j(null),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",borderRadius:"6px",fontSize:"13px",backgroundColor:m===g.id?Tt.violetM:_===g.id?"rgba(255,255,255,0.02)":"transparent",border:m===g.id?`1px solid ${Tt.violet}`:"1px solid transparent",transition:"all 0.15s"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:g.color||Tt.violet,flexShrink:0}}),e.jsx("span",{style:{color:Tt.tm,flexShrink:0,display:"flex"},children:r6(g.icon,14)}),e.jsx("span",{style:{flex:1,color:Tt.tp,textTransform:"capitalize",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.name}),e.jsx("span",{style:{fontSize:"10px",color:Tt.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px",flexShrink:0},children:o[g.name]||0}),_===g.id&&e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>f(C,-1),disabled:C===0,style:{background:"none",border:"none",color:C===0?"rgba(255,255,255,0.1)":Tt.tm,cursor:C===0?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(kh,{size:12})}),e.jsx("button",{onClick:()=>f(C,1),disabled:C===s.length-1,style:{background:"none",border:"none",color:C===s.length-1?"rgba(255,255,255,0.1)":Tt.tm,cursor:C===s.length-1?"default":"pointer",padding:"2px",display:"flex"},children:e.jsx(Rn,{size:12})}),e.jsx("button",{onClick:()=>w(g),style:{background:"none",border:"none",color:Tt.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(ea,{size:12})}),d===g.id?e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:()=>{S(g.id),y(null)},style:{background:"none",border:"none",color:Tt.danger,cursor:"pointer",padding:"2px",fontSize:"10px",fontWeight:"700"},children:"Yes"}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:Tt.tm,cursor:"pointer",padding:"2px",fontSize:"10px"},children:"No"})]}):e.jsx("button",{onClick:()=>y(g.id),style:{background:"none",border:"none",color:Tt.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Hr,{size:12})})]})]},g.id)),s.length===0&&e.jsx("p",{style:{color:Tt.tm,fontSize:"12px",textAlign:"center",padding:"20px 0"},children:"No categories yet"})]})]})]})})}const xe={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},o6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06b6d4","#f97316"];function Im({initial:t,onCancel:i,onSave:s,onChange:o}){return e.jsxs("div",{style:{padding:"10px",backgroundColor:xe.surfaceEl,borderRadius:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("input",{style:{background:xe.bg,border:`1px solid ${xe.border}`,color:"#fff",fontSize:"12px",padding:"6px 8px",borderRadius:"4px",outline:"none"},value:t.name,placeholder:"Category name...",onChange:u=>o({name:u.target.value}),onKeyDown:u=>{u.key==="Enter"&&s(),u.key==="Escape"&&i()},autoFocus:!0}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:o6.map(u=>e.jsx("button",{onClick:()=>o({color:u}),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:u,padding:0,cursor:"pointer",border:t.color===u?"2px solid #fff":"2px solid transparent"}},u))}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"4px"},children:[e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(kt,{size:14})}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:xe.success,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(rr,{size:14})})]})]})}function a6({cat:t,isActive:i,count:s,onClick:o,onEdit:u,onDelete:S}){const[b,l]=L.useState(!1);return e.jsxs("div",{onClick:o,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",fontSize:"13px",gap:"10px",backgroundColor:i?xe.surfaceEl:b?"rgba(255,255,255,0.02)":"transparent",color:i?xe.tp:xe.ts,border:i?`1px solid ${xe.borderS}`:"1px solid transparent"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:t.color||xe.violet,flexShrink:0}}),e.jsx("span",{style:{flex:1,textTransform:"capitalize"},children:t.name}),b&&e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),u()},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(ea,{size:11})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),S()},style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(Hr,{size:11})})]}),e.jsx("span",{style:{fontSize:"11px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:s})]})}function l6({agent:t,viewType:i,categories:s,onEdit:o,onDelete:u,onRate:S,onTest:b,onClick:l,canEdit:c,canDelete:m}){const[v,d]=L.useState(!1),y=s.find(j=>j.name===t.category),_=i==="grid";return e.jsxs("div",{onClick:l,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{cursor:"pointer",backgroundColor:xe.surface,borderRadius:_?"8px":"4px",border:`1px solid ${v?xe.violet:xe.border}`,padding:_?"16px":"10px 16px",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:v?`0 0 20px ${xe.violetG}`:"none",display:"flex",flexDirection:_?"column":"row",alignItems:_?"stretch":"center",gap:_?"0":"16px"},children:[_&&t.screenshot_path&&e.jsx("div",{style:{marginBottom:"10px",borderRadius:"6px",overflow:"hidden",aspectRatio:"16/10",backgroundColor:"#141415",border:`1px solid ${xe.border}`},children:e.jsx("img",{src:t.screenshot_path+"?t=1",alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:0,color:xe.tp},children:t.name.replace(/-/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",width:"fit-content",backgroundColor:y!=null&&y.color?`${y.color}15`:xe.violetM,color:(y==null?void 0:y.color)||xe.violet},children:t.category||"uncategorized"})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(j=>e.jsx(En,{size:12,fill:j<=(t.rating||0)?xe.warning:"none",color:j<=(t.rating||0)?xe.warning:xe.tm,style:{cursor:"pointer"},onClick:w=>{w.stopPropagation(),S(j)}},j))})]}),_&&e.jsx("p",{style:{fontSize:"12px",color:xe.ts,lineHeight:"1.5",margin:"0 0 12px 0",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:_?"12px":"0",borderTop:_?`1px solid ${xe.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:xe.mono,color:xe.tm},children:t.model||"unknown"}),t.project_count>0&&e.jsxs("span",{style:{fontSize:"10px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:[t.project_count," project",t.project_count!==1?"s":""]}),c?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:xe.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:j=>{j.stopPropagation(),b()},style:{backgroundColor:xe.violetM,color:xe.violet,border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(Oo,{size:10,style:{marginRight:4}}),"TEST"]}),c&&e.jsx("button",{onClick:j=>{j.stopPropagation(),o()},style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(ea,{size:13})}),m&&e.jsx("button",{onClick:j=>{j.stopPropagation(),u()},style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Hr,{size:13})})]})]})]})]})}function c6({agent:t,categories:i,onClose:s,onSave:o}){const[u,S]=L.useState({...t}),[b,l]=L.useState(!1),c=async()=>{l(!0);try{await o(u)}finally{l(!1)}},m={backgroundColor:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"};return e.jsx("div",{onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",justifyContent:"flex-end",zIndex:1e3},children:e.jsxs("div",{onClick:v=>v.stopPropagation(),style:{width:"450px",height:"100%",backgroundColor:xe.surface,borderLeft:`1px solid ${xe.borderS}`,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${xe.border}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 4px 0"},children:"Edit Agent"}),e.jsx("p",{style:{fontSize:"12px",fontFamily:xe.mono,color:xe.tm,margin:0},children:t.name})]}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Description"}),e.jsx("textarea",{style:{...m,resize:"vertical",fontFamily:"inherit",minHeight:"80px"},value:u.description||"",rows:4,onChange:v=>S({...u,description:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Model"}),e.jsx("input",{style:m,value:u.model||"",onChange:v=>S({...u,model:v.target.value})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Category"}),e.jsxs("select",{style:m,value:u.category||"",onChange:v=>S({...u,category:v.target.value}),children:[e.jsx("option",{value:"",children:"uncategorized"}),i.map(v=>e.jsx("option",{value:v.name,children:v.name},v.id))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Prompt Preview"}),e.jsx("div",{style:{backgroundColor:xe.bg,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"12px",fontSize:"11px",color:xe.ts,fontFamily:xe.mono,whiteSpace:"pre-wrap",maxHeight:"200px",overflowY:"auto",lineHeight:"1.6"},children:t.prompt_preview||"[No prompt content]"})]})]}),e.jsxs("div",{style:{padding:"20px 24px",borderTop:`1px solid ${xe.border}`,display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:s,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:c,disabled:b,style:{backgroundColor:xe.tp,color:xe.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",opacity:b?.6:1},children:[e.jsx(Zl,{size:14,style:{marginRight:6}}),b?"Saving...":"Save Changes"]})]})]})})}function d6(){const t=qt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(null),[m,v]=L.useState(""),[d,y]=L.useState("rating"),[_,j]=L.useState("mine"),[w,h]=L.useState("grid"),p=Jo(),[f,g]=L.useState(!1),[C,R]=L.useState(null),[z,A]=L.useState(null),[E,B]=L.useState(null),[P,N]=L.useState(!1),[K,U]=L.useState(!1),[ee,V]=L.useState(new Set),[de,J]=L.useState(null),[Y,M]=L.useState(!1),[I,D]=L.useState(!1),W=L.useCallback(async()=>{try{b(!0);const[Q,le]=await Promise.all([ae("/api/agents"),ae("/api/categories")]);s(Q||[]),u(le||[])}catch(Q){console.error(Q)}finally{b(!1)}},[]);L.useEffect(()=>{W()},[W]);const pe=()=>{const Q=document.createElement("input");Q.type="file",Q.accept=".md",Q.onchange=async le=>{var Xe;const We=(Xe=le.target.files)==null?void 0:Xe[0];if(!We)return;const Ze=await We.text();try{await ae("/api/agents/import",{method:"POST",body:JSON.stringify({filename:We.name,content:Ze})}),await W()}catch(mt){console.error("Import failed:",mt),alert(mt.message||"Import failed")}},Q.click()},me=async()=>{g(!0);try{await ae("/api/agents/sync",{method:"POST"}),await W()}catch(Q){console.error(Q)}finally{g(!1)}},Se=async(Q,le)=>{try{await ae(`/api/agents/${Q}/rating`,{method:"PATCH",body:JSON.stringify({rating:le})}),s(We=>We.map(Ze=>Ze.name===Q?{...Ze,rating:le}:Ze))}catch(We){console.error(We)}},Ee=async Q=>{try{await ae(`/api/agents/${Q}`,{method:"DELETE"}),s(le=>le.filter(We=>We.name!==Q)),B(null)}catch(le){console.error(le)}},X=async Q=>{try{const le=await ae(`/api/agents/${Q.name}`,{method:"PUT",body:JSON.stringify(Q)});s(We=>We.map(Ze=>Ze.name===Q.name?{...Ze,...le}:Ze)),R(null)}catch(le){console.error(le)}},F=async Q=>{var le;if((le=Q.name)!=null&&le.trim())try{Q.id?await ae(`/api/categories/${Q.id}`,{method:"PUT",body:JSON.stringify(Q)}):await ae("/api/categories",{method:"POST",body:JSON.stringify(Q)}),A(null),W()}catch(We){console.error(We)}},ve=async Q=>{var le;try{await ae(`/api/categories/${Q}`,{method:"DELETE"}),((le=o.find(We=>We.id===Q))==null?void 0:le.name)===l&&c(null),W()}catch(We){console.error(We)}},se=async Q=>{try{await ae("/api/categories/reorder",{method:"PUT",body:JSON.stringify({ids:Q})}),W()}catch(le){console.error(le)}},Me=async Q=>{var le;if((le=Q.name)!=null&&le.trim())try{Q.id?await ae(`/api/categories/${Q.id}`,{method:"PUT",body:JSON.stringify(Q)}):await ae("/api/categories",{method:"POST",body:JSON.stringify(Q)}),W()}catch(We){console.error(We)}},Z=Q=>{V(le=>{const We=new Set(le);return We.has(Q)?We.delete(Q):We.add(Q),We})},ke=()=>{ee.size===je.length?V(new Set):V(new Set(je.map(Q=>Q.name)))},he=async()=>{if(ee.size&&window.confirm(`Delete ${ee.size} agents?`))try{await ae("/api/agents/bulk/delete",{method:"POST",body:JSON.stringify({names:[...ee]})}),V(new Set),U(!1),W()}catch(Q){console.error(Q)}},Ie=async Q=>{if(ee.size)try{await ae("/api/agents/bulk/categorize",{method:"POST",body:JSON.stringify({names:[...ee],category:Q})}),J(null),V(new Set),U(!1),W()}catch(le){console.error(le)}},Oe=async()=>{if(ee.size)try{const Q=await ae("/api/agents/bulk/export",{method:"POST",body:JSON.stringify({names:[...ee]})}),le=new Blob([JSON.stringify(Q,null,2)],{type:"application/json"}),We=URL.createObjectURL(le),Ze=document.createElement("a");Ze.href=We,Ze.download=`agents-export-${ee.size}.json`,Ze.click(),URL.revokeObjectURL(We)}catch(Q){console.error(Q)}},$e=L.useMemo(()=>{const Q={};return i.forEach(le=>{Q[le.category]=(Q[le.category]||0)+1}),Q},[i]),je=L.useMemo(()=>i.filter(Q=>{const le=!l||Q.category===l,We=m.toLowerCase(),Ze=!We||Q.name.toLowerCase().includes(We)||(Q.description||"").toLowerCase().includes(We);let Xe=!0;return _==="mine"?Xe=Q.source==="manual"&&(!Q.created_by||Q.created_by===(p==null?void 0:p.userId)):_==="platform"&&(Xe=Q.source==="filesystem"||Q.source==="manual"&&Q.created_by&&Q.created_by!==(p==null?void 0:p.userId)),le&&Ze&&Xe}).sort((Q,le)=>d==="rating"?(le.rating||0)-(Q.rating||0):d==="name"?Q.name.localeCompare(le.name):d==="projects"?(le.project_count||0)-(Q.project_count||0):(le.updated_at||0)-(Q.updated_at||0)),[i,l,m,d,_,p==null?void 0:p.userId]),Ne=Q=>i.filter(le=>le.category===Q).length;return e.jsxs("div",{className:"ab-root",style:{display:"flex",height:"calc(100vh - 53px)",width:"100%",backgroundColor:xe.bg,color:xe.tp,overflow:"hidden"},children:[e.jsxs("aside",{className:"ab-sidebar",style:{width:"260px",borderRight:`1px solid ${xe.border}`,display:"flex",flexDirection:"column",backgroundColor:"#0a0a0b",flexShrink:0},children:[e.jsx("button",{className:"ab-sidebar-close",onClick:()=>M(!1),style:{display:"none",background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"8px",position:"absolute",top:"8px",right:"8px",zIndex:10},children:e.jsx(kt,{size:18})}),e.jsxs("div",{style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${xe.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:xe.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Categories"}),e.jsx("button",{onClick:()=>N(!0),title:"Manage categories",style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(T0,{size:14})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[e.jsxs("div",{onClick:()=>c(null),style:{display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"13px",gap:"10px",marginBottom:"2px",backgroundColor:l===null?xe.surfaceEl:"transparent",color:l===null?xe.tp:xe.ts,border:l===null?`1px solid ${xe.borderS}`:"1px solid transparent"},children:[e.jsx(Bs,{size:12,color:xe.tm}),e.jsx("span",{style:{flex:1},children:"All Agents"}),e.jsx("span",{style:{fontSize:"11px",color:xe.tm,backgroundColor:"rgba(255,255,255,0.03)",padding:"2px 6px",borderRadius:"4px"},children:i.length})]}),o.map(Q=>e.jsx("div",{style:{marginBottom:"2px"},children:(z==null?void 0:z.id)===Q.id?e.jsx(Im,{initial:z,onCancel:()=>A(null),onSave:()=>F(z),onChange:le=>A(We=>({...We,...le}))}):e.jsx(a6,{cat:Q,isActive:l===Q.name,count:Ne(Q.name),onClick:()=>c(Q.name),onEdit:()=>A({...Q}),onDelete:()=>ve(Q.id)})},Q.id)),z&&!z.id&&e.jsx(Im,{initial:z,onCancel:()=>A(null),onSave:()=>F(z),onChange:Q=>A(le=>({...le,...Q}))})]})]}),e.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("header",{className:"ab-toolbar",style:{minHeight:"52px",padding:"8px 24px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${xe.border}`,flexShrink:0,flexWrap:"wrap",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("button",{className:"ab-sidebar-toggle",onClick:()=>M(!Y),style:{display:"none",background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"6px",borderRadius:"4px",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:e.jsx(Bs,{size:14})})}),e.jsxs("div",{className:"ab-search",style:{display:"flex",alignItems:"center",backgroundColor:xe.surface,border:`1px solid ${xe.border}`,borderRadius:"6px",padding:"0 12px",width:"300px",maxWidth:"100%"},children:[e.jsx(Ps,{size:14,color:xe.tm}),e.jsx("input",{value:m,onChange:Q=>v(Q.target.value),placeholder:"Search agents...",style:{background:"none",border:"none",color:"#fff",padding:"8px 10px",fontSize:"13px",width:"100%",outline:"none"}})]}),e.jsxs("div",{className:"ab-toolbar-right",style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("select",{value:d,onChange:Q=>y(Q.target.value),style:{backgroundColor:xe.surface,border:`1px solid ${xe.border}`,color:xe.ts,fontSize:"12px",padding:"6px 10px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"name",children:"Alphabetical"}),e.jsx("option",{value:"recent",children:"Recent"}),e.jsx("option",{value:"projects",children:"Most Used"})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:xe.surface,padding:"3px",borderRadius:"6px",border:`1px solid ${xe.border}`},children:[e.jsx("button",{onClick:()=>h("grid"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:w==="grid"?xe.surfaceEl:"transparent",color:w==="grid"?xe.violet:xe.tm,display:"flex",alignItems:"center"},children:e.jsx(k0,{size:14})}),e.jsx("button",{onClick:()=>h("compact"),style:{padding:"4px 8px",background:"none",border:"none",cursor:"pointer",borderRadius:"4px",backgroundColor:w==="compact"?xe.surfaceEl:"transparent",color:w==="compact"?xe.violet:xe.tm,display:"flex",alignItems:"center"},children:e.jsx(Ou,{size:14})})]}),e.jsxs("button",{onClick:()=>{U(!K),V(new Set)},style:{backgroundColor:K?xe.violetM:xe.surfaceEl,color:K?xe.violet:xe.ts,border:`1px solid ${K?xe.violet:xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ow,{size:14}),K?"Cancel":"Select"]}),e.jsxs("button",{onClick:me,disabled:f,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Vi,{size:14,style:f?{animation:"spin 1s linear infinite"}:{}}),"Sync"]}),e.jsxs("button",{onClick:pe,style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(D0,{size:14}),"Import .md"]}),e.jsxs("button",{onClick:()=>t("/agents/new"),style:{backgroundColor:xe.violet,color:"#fff",border:"none",padding:"6px 14px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:14}),"Create Agent"]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${xe.border}`,padding:"0 24px"},children:[{key:"all",label:"All Agents",count:i.length},{key:"mine",label:"My Agents",count:i.filter(Q=>Q.source==="manual"&&(!Q.created_by||Q.created_by===(p==null?void 0:p.userId))).length},{key:"platform",label:"Platform",count:i.filter(Q=>Q.source==="filesystem"||Q.source==="manual"&&Q.created_by&&Q.created_by!==(p==null?void 0:p.userId)).length}].map(Q=>e.jsxs("button",{onClick:()=>j(Q.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:_===Q.key?xe.violet:xe.ts,borderBottom:_===Q.key?`2px solid ${xe.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[Q.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:_===Q.key?xe.violetM:"rgba(255,255,255,0.04)",color:_===Q.key?xe.violet:xe.tm},children:Q.count})]},Q.key))}),e.jsxs("div",{style:{padding:"20px 24px 0 24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"12px",textTransform:"capitalize"},children:[l||"All Agents",e.jsx("span",{style:{fontSize:"12px",fontWeight:"400",color:xe.tm,backgroundColor:xe.border,padding:"2px 8px",borderRadius:"100px"},children:je.length})]}),K&&ee.size>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"12px",color:xe.violet,fontWeight:600},children:[ee.size," selected"]}),e.jsx("button",{onClick:ke,style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer"},children:ee.size===je.length?"Deselect All":"Select All"}),de?e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsxs("select",{autoFocus:!0,onChange:Q=>{Q.target.value&&Ie(Q.target.value)},style:{backgroundColor:xe.surfaceEl,border:`1px solid ${xe.borderS}`,color:xe.tp,fontSize:"11px",padding:"4px 8px",borderRadius:"4px",outline:"none"},children:[e.jsx("option",{value:"",children:"Pick category..."}),o.map(Q=>e.jsx("option",{value:Q.name,children:Q.name},Q.id))]}),e.jsx("button",{onClick:()=>J(null),style:{background:"none",border:"none",color:xe.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(kt,{size:14})})]}):e.jsxs("button",{onClick:()=>J("picking"),style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Uw,{size:12})," Categorize"]}),e.jsxs("button",{onClick:Oe,style:{background:"none",border:`1px solid ${xe.border}`,color:xe.ts,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(jn,{size:12})," Export"]}),e.jsxs("button",{onClick:he,style:{background:"none",border:"1px solid rgba(239,68,68,0.3)",color:xe.danger,padding:"4px 10px",fontSize:"11px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Hr,{size:12})," Delete"]})]})]}),K&&ee.size===0&&e.jsx("p",{style:{fontSize:"12px",color:xe.tm,margin:"8px 0 0 0"},children:"Click agents to select them for bulk actions."})]}),e.jsxs("div",{className:"ab-cta-row",style:{padding:"16px 24px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>t("/agents/new"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor=xe.violet,Q.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",Q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Q=>{Q.currentTarget.style.borderColor="rgba(139,92,246,0.25)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(ir,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Create Agent"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Build a new agent from scratch"})]}),e.jsx(hr,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>t("/skills/create"),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor="#06b6d4",Q.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",Q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Q=>{Q.currentTarget.style.borderColor="rgba(6,182,212,0.25)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Yr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Create reusable skill modules"})]}),e.jsx(hr,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>D(!0),className:"ab-cta-card",style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor="#f59e0b",Q.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",Q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Q=>{Q.currentTarget.style.borderColor="rgba(245,158,11,0.25)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ft,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:xe.tp,marginBottom:"2px"},children:"Craft with AI"}),e.jsx("div",{style:{fontSize:"11px",color:xe.ts},children:"Design an agent via GPT conversation"})]}),e.jsx(hr,{size:16,style:{color:xe.tm,marginLeft:"auto",flexShrink:0}})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px 24px",display:w==="grid"?"grid":"flex",gridTemplateColumns:w==="grid"?"repeat(auto-fill, minmax(320px, 1fr))":void 0,flexDirection:w==="compact"?"column":void 0,gap:"12px",opacity:S?.5:1,transition:"opacity 0.3s"},children:[je.map(Q=>e.jsxs("div",{style:{position:"relative"},children:[K&&e.jsx("div",{onClick:le=>{le.stopPropagation(),Z(Q.name)},style:{position:"absolute",top:"8px",left:"8px",zIndex:10,width:"20px",height:"20px",borderRadius:"4px",cursor:"pointer",backgroundColor:ee.has(Q.name)?xe.violet:xe.surfaceEl,border:`1px solid ${ee.has(Q.name)?xe.violet:xe.borderS}`,display:"flex",alignItems:"center",justifyContent:"center"},children:ee.has(Q.name)&&e.jsx(rr,{size:12,color:"#fff"})}),e.jsx(l6,{agent:Q,viewType:w,categories:o,canEdit:Q.source==="manual"&&(!Q.created_by||Q.created_by===(p==null?void 0:p.userId)),canDelete:Q.source==="manual"&&(!Q.created_by||Q.created_by===(p==null?void 0:p.userId)),onClick:()=>K?Z(Q.name):t(`/agents/${Q.name}`),onEdit:()=>{K||R(Q)},onDelete:()=>{K||B(Q.name)},onRate:le=>{K||Se(Q.name,le)},onTest:()=>{K||t(`/project/new?agent=${Q.name}`)}})]},Q.name)),je.length===0&&!S&&e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",padding:"60px",border:`1px dashed ${xe.borderS}`,borderRadius:"12px"},children:[e.jsx("h3",{style:{fontSize:"14px",color:xe.ts,margin:"0 0 8px 0"},children:"No agents found"}),e.jsx("p",{style:{fontSize:"12px",color:xe.tm,margin:"0 0 16px 0"},children:"Try adjusting your search or category filters."}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await ae("/api/seed/demo",{method:"POST"}),await W()}catch(Q){console.error(Q)}},style:{backgroundColor:xe.violetM,color:xe.violet,border:"1px solid rgba(139,92,246,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Yr,{size:14})," Load Demo Data"]})]})]})]}),C&&e.jsx(c6,{agent:C,categories:o,onClose:()=>R(null),onSave:X}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsxs("div",{style:{backgroundColor:xe.surface,border:`1px solid ${xe.borderS}`,borderRadius:"12px",padding:"32px",width:"400px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ai,{size:32,color:xe.danger,style:{marginBottom:16}}),e.jsx("h3",{style:{fontSize:"16px",margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{color:xe.ts,fontSize:"13px",textAlign:"center",margin:"0 0 24px 0"},children:["Are you sure you want to delete ",e.jsx("strong",{style:{color:"#fff"},children:E}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>B(null),style:{backgroundColor:xe.surfaceEl,color:xe.ts,border:`1px solid ${xe.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:()=>Ee(E),style:{backgroundColor:xe.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})}),e.jsx(s6,{isOpen:P,onClose:()=>N(!1),categories:o,agentCounts:$e,onSave:async Q=>{await Me(Q)},onDelete:async Q=>{await ve(Q)},onReorder:se}),I&&e.jsx(ap,{onClose:()=>D(!1)}),e.jsx("style",{children:`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
          .ab-sidebar {
            position: fixed !important;
            top: 53px;
            left: ${Y?"0":"-280px"};
            width: 260px !important;
            height: calc(100vh - 53px) !important;
            z-index: 100;
            transition: left 0.3s ease;
          }
          .ab-sidebar-close { display: flex !important; }
          .ab-sidebar-toggle { display: flex !important; }
          .ab-toolbar { padding: 8px 12px !important; }
          .ab-search { width: 100% !important; flex: 1; min-width: 0; }
          .ab-toolbar-right { width: 100%; overflow-x: auto; scrollbar-width: none; }
          .ab-toolbar-right::-webkit-scrollbar { display: none; }
          .ab-cta-row { padding: 12px 12px 0 !important; gap: 8px !important; }
          .ab-cta-card { flex: 1 1 100% !important; padding: 12px 14px !important; }
        }
      `}),Y&&e.jsx("div",{onClick:()=>M(!1),className:"ab-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99,display:"none"}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .ab-overlay { display: block !important; }
        }
      `})]})}const Ue={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},u6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],h6=["sonnet","opus","haiku"],p6=["","default","plan","bypassPermissions"],Hi={backgroundColor:Ue.bg,border:`1px solid ${Ue.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",width:"100%",boxSizing:"border-box"},Ui={fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"6px",display:"block"};function f6(){const t=qt(),[i,s]=L.useState([]),[o,u]=L.useState(!1),[S,b]=L.useState(""),[l,c]=L.useState(!1),[m,v]=L.useState(""),[d,y]=L.useState(!1),[_,j]=L.useState(null),[w,h]=L.useState(""),[p,f]=L.useState({name:"",description:"",model:"sonnet",category:"uncategorized",tools:[],max_turns:0,memory:"",permission_mode:"",prompt:""}),g=async()=>{if(m.trim()){y(!0),h(""),j(null);try{const P=await ae("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:m,style:p.category!=="uncategorized"?p.category:"",tools_needed:"",category:p.category!=="uncategorized"?p.category:""})});j(P)}catch(P){h(P.message||"AI generation failed")}finally{y(!1)}}},C=()=>{_&&(f(P=>({...P,name:_.name||P.name,description:_.description||P.description,model:_.model||P.model,tools:_.tools||P.tools,max_turns:_.max_turns||P.max_turns,permission_mode:_.permission_mode||P.permission_mode,prompt:_.prompt||P.prompt})),j(null),c(!1))};L.useEffect(()=>{ae("/api/categories").then(s).catch(()=>{})},[]);const R=p.name.length===0?null:/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(p.name),z=P=>{f(N=>({...N,tools:N.tools.includes(P)?N.tools.filter(K=>K!==P):[...N.tools,P]}))},A=L.useMemo(()=>{const P=[];return p.description&&P.push(`description: "${p.description.replace(/"/g,'\\"')}"`),p.model&&P.push(`model: ${p.model}`),p.tools.length>0&&P.push(`tools: [${p.tools.join(", ")}]`),p.max_turns>0&&P.push(`max_turns: ${p.max_turns}`),p.memory&&P.push(`memory: "${p.memory.replace(/"/g,'\\"')}"`),p.permission_mode&&P.push(`permission_mode: ${p.permission_mode}`),(P.length>0?`---
${P.join(`
`)}
---

`:"")+(p.prompt||"")},[p]),E=async()=>{if(!(!p.name||!R)){u(!0),b("");try{await ae("/api/agents",{method:"POST",body:JSON.stringify({name:p.name,description:p.description,model:p.model,category:p.category,tools:p.tools.join(", "),max_turns:p.max_turns,memory:p.memory,permission_mode:p.permission_mode,prompt:p.prompt})}),t(`/agents/${p.name}`)}catch(P){b(P.message||"Failed to create agent")}finally{u(!1)}}},B=i.find(P=>P.name===p.category);return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ue.bg,color:Ue.tp,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${Ue.border}`,display:"flex",alignItems:"center",gap:"16px",flexShrink:0},children:[e.jsx(bi,{to:"/agents",style:{color:Ue.tm,display:"flex",textDecoration:"none"},children:e.jsx(wh,{size:18})}),e.jsx("h1",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Create New Agent"})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsxs("div",{style:{width:"60%",overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"10px",border:`1px solid ${l?Ue.violet:Ue.border}`,overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("button",{onClick:()=>c(!l),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",backgroundColor:"transparent",border:"none",color:Ue.tp,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ft,{size:16,color:Ue.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600},children:"AI Assistant"}),e.jsx("span",{style:{fontSize:"11px",color:Ue.tm},children:"Describe your agent and let AI generate the config"})]}),e.jsx("span",{style:{fontSize:"12px",color:Ue.violet},children:l?"Close":"Open"})]}),l&&e.jsxs("div",{style:{padding:"0 16px 16px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("textarea",{value:m,onChange:P=>v(P.target.value),placeholder:"Describe what you want your agent to do... e.g. 'A code reviewer that focuses on React best practices and security vulnerabilities'",style:{...Hi,minHeight:"80px",resize:"vertical",fontFamily:"inherit",border:`1px solid ${Ue.borderS}`}}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsxs("button",{onClick:g,disabled:d||!m.trim(),style:{backgroundColor:Ue.violetM,color:Ue.violet,border:`1px solid ${Ue.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:d||!m.trim()?.5:1},children:[e.jsx(Tl,{size:14}),d?"Generating...":"Generate with AI"]}),w&&e.jsxs("span",{style:{fontSize:"12px",color:Ue.danger,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ai,{size:12}),w]})]}),_&&e.jsxs("div",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.success}`,borderRadius:"8px",padding:"14px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ue.success,textTransform:"uppercase"},children:"AI Suggestion"}),e.jsxs("button",{onClick:C,style:{backgroundColor:Ue.success,color:"#fff",border:"none",padding:"5px 12px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(rr,{size:12}),"Apply"]})]}),_.name&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Name:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.name})]}),_.description&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Description:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.description})]}),_.model&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Model:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.model})]}),_.tools&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("strong",{style:{color:Ue.tm},children:"Tools:"})," ",e.jsx("span",{style:{color:Ue.ts},children:_.tools.join(", ")})]}),_.prompt&&e.jsxs("pre",{style:{fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,backgroundColor:"rgba(255,255,255,0.02)",padding:"10px",borderRadius:"6px",maxHeight:"150px",overflowY:"auto",whiteSpace:"pre-wrap",margin:0,lineHeight:"1.5"},children:[_.prompt.substring(0,500),_.prompt.length>500?"...":""]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ui,children:"Name"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...Hi,paddingRight:"36px"},value:p.name,placeholder:"my-custom-agent",onChange:P=>f(N=>({...N,name:P.target.value.toLowerCase().replace(/\s/g,"-")}))}),R!==null&&e.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex"},children:R?e.jsx(rr,{size:14,color:Ue.success}):e.jsx(kt,{size:14,color:Ue.danger})})]}),e.jsx("p",{style:{fontSize:"11px",color:R===!1?Ue.danger:Ue.tm,margin:"4px 0 0 0"},children:R===!1?"Must be kebab-case (e.g. my-agent-name)":"Lowercase, hyphens only"})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ui,children:"Description"}),e.jsx("textarea",{style:{...Hi,resize:"vertical",minHeight:"60px",fontFamily:"inherit"},value:p.description,rows:3,placeholder:"What does this agent do?",onChange:P=>f(N=>({...N,description:P.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Ui,children:"Model"}),e.jsx("select",{style:Hi,value:p.model,onChange:P=>f(N=>({...N,model:P.target.value})),children:h6.map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Ui,children:"Category"}),e.jsxs("select",{style:Hi,value:p.category,onChange:P=>f(N=>({...N,category:P.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),i.map(P=>e.jsx("option",{value:P.name,children:P.name},P.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ui,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:u6.map(P=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:p.tools.includes(P)?Ue.violetM:Ue.bg,border:`1px solid ${p.tools.includes(P)?Ue.violet:Ue.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:p.tools.includes(P)?Ue.violet:Ue.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:p.tools.includes(P),onChange:()=>z(P),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${p.tools.includes(P)?Ue.violet:Ue.tm}`,backgroundColor:p.tools.includes(P)?Ue.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:p.tools.includes(P)&&e.jsx(rr,{size:10,color:"#fff"})}),P]},P))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:Ui,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:Hi,value:p.max_turns,onChange:P=>f(N=>({...N,max_turns:parseInt(P.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Ui,children:"Permission Mode"}),e.jsx("select",{style:Hi,value:p.permission_mode,onChange:P=>f(N=>({...N,permission_mode:P.target.value})),children:p6.map(P=>e.jsx("option",{value:P,children:P||"(none)"},P))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Ui,children:"Memory"}),e.jsx("input",{style:Hi,value:p.memory,placeholder:"Optional...",onChange:P=>f(N=>({...N,memory:P.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Ui,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...Hi,resize:"vertical",minHeight:"280px",fontFamily:Ue.mono,fontSize:"12px",lineHeight:"1.7",whiteSpace:"pre"},value:p.prompt,rows:20,placeholder:"Write the agent instructions here...",onChange:P=>f(N=>({...N,prompt:P.target.value}))})]}),S&&e.jsx("div",{style:{color:Ue.danger,fontSize:"12px",padding:"8px 12px",backgroundColor:"rgba(239,68,68,0.1)",borderRadius:"6px",border:"1px solid rgba(239,68,68,0.2)"},children:S}),e.jsxs("div",{style:{display:"flex",gap:"12px",paddingBottom:"24px"},children:[e.jsx(bi,{to:"/agents",style:{backgroundColor:Ue.surfaceEl,color:Ue.ts,border:`1px solid ${Ue.borderS}`,padding:"10px 20px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:o||!R,style:{backgroundColor:Ue.tp,color:Ue.bg,border:"none",padding:"10px 24px",fontSize:"13px",fontWeight:"600",borderRadius:"6px",cursor:"pointer",opacity:o||!R?.5:1,display:"flex",alignItems:"center",gap:"8px"},children:o?"Creating...":"Create Agent"})]})]}),e.jsxs("div",{style:{width:"40%",borderLeft:`1px solid ${Ue.border}`,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Hs,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Card Preview"})]}),e.jsxs("div",{style:{backgroundColor:Ue.surface,borderRadius:"8px",border:`1px solid ${Ue.border}`,padding:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0",color:Ue.tp},children:p.name?p.name.replace(/-/g," ").replace(/\b\w/g,P=>P.toUpperCase()):"Agent Name"}),e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:B!=null&&B.color?`${B.color}15`:Ue.violetM,color:(B==null?void 0:B.color)||Ue.violet},children:p.category||"uncategorized"})]})}),e.jsx("p",{style:{fontSize:"12px",color:Ue.ts,lineHeight:"1.5",margin:0},children:p.description||"[No description]"}),e.jsxs("div",{style:{borderTop:`1px solid ${Ue.border}`,paddingTop:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",fontFamily:Ue.mono,color:Ue.tm},children:p.model||"unknown"}),p.tools.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:Ue.tm},children:[p.tools.length," tools"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ms,{size:14,color:Ue.tm}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ue.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:Ue.bg,border:`1px solid ${Ue.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:Ue.ts,fontFamily:Ue.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:A||"# Empty agent file"})]})]})]})]})}const it={surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},g6=t=>t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--";function x6({agentName:t,onRevert:i}){const[s,o]=L.useState([]),[u,S]=L.useState(!0),[b,l]=L.useState(null),[c,m]=L.useState(null),[v,d]=L.useState(null);L.useEffect(()=>{y()},[t]);const y=async()=>{S(!0);try{const w=(await ae(`/api/agents/${t}/versions`)||[]).sort((h,p)=>p.version_number-h.version_number);o(w)}catch{l("Failed to load version history")}finally{S(!1)}},_=async j=>{try{await ae(`/api/agents/${t}/versions/${j}/revert`,{method:"POST"}),m(null),i&&i(),y()}catch{alert("Failed to revert version")}};return u?e.jsxs("div",{style:{padding:"24px",color:it.ts,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(lx,{size:14}),"Loading history..."]}):b?e.jsxs("div",{style:{padding:"24px",color:it.danger,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ai,{size:14}),b]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:it.violetG,display:"flex",alignItems:"center",justifyContent:"center",color:it.violet},children:e.jsx(lx,{size:14})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600,color:it.tp},children:"Version History"}),e.jsxs("span",{style:{fontSize:"10px",color:it.tm},children:[s.length," versions"]})]})]}),e.jsxs("div",{style:{position:"relative",paddingLeft:"24px"},children:[s.length>0&&e.jsx("div",{style:{position:"absolute",left:"7px",top:"8px",bottom:"8px",width:"1px",background:it.borderS}}),s.map((j,w)=>{const h=w===0,p=v===j.id,f=c===j.id,g=s[w+1],C=g&&j.model!==g.model,R=g&&j.tools!==g.tools;return e.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"-21px",top:"12px",width:"9px",height:"9px",borderRadius:"50%",background:h?it.violet:it.surfaceEl,border:`2px solid ${h?it.violetM:it.borderS}`,zIndex:2}}),e.jsxs("div",{style:{background:it.surface,border:`1px solid ${it.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>d(p?null:j.id),style:{padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:"11px",fontFamily:it.mono,color:h?it.violet:it.ts,background:h?it.violetG:"transparent",padding:"2px 6px",borderRadius:"4px",border:`1px solid ${h?it.violetM:it.border}`,flexShrink:0},children:["v",j.version_number]}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("span",{style:{fontSize:"13px",color:it.tp,fontWeight:500},children:j.change_summary||"[No summary]"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"2px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:it.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Zo,{size:10})," ",g6(j.created_at)]}),h&&e.jsx("span",{style:{fontSize:"10px",color:it.violet,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Current"})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[!h&&!f&&e.jsxs("button",{onClick:z=>{z.stopPropagation(),m(j.id)},style:{background:"transparent",border:`1px solid ${it.border}`,borderRadius:"6px",color:it.ts,padding:"4px 8px",fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",transition:"border-color 0.2s"},children:[e.jsx(Rw,{size:12})," Revert"]}),p?e.jsx(Rn,{size:14,color:it.tm}):e.jsx(hr,{size:14,color:it.tm})]})]}),f&&e.jsxs("div",{style:{padding:"12px 16px",background:"rgba(139,92,246,0.05)",borderTop:`1px solid ${it.violetM}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontSize:"12px",color:it.tp},children:["Revert to ",e.jsxs("strong",{children:["v",j.version_number]}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>m(null),style:{background:"transparent",border:"none",color:it.ts,fontSize:"11px",cursor:"pointer",padding:"4px 8px"},children:"Cancel"}),e.jsx("button",{onClick:()=>_(j.id),style:{background:it.violet,border:"none",color:"#fff",fontSize:"11px",fontWeight:600,padding:"4px 12px",borderRadius:"4px",cursor:"pointer"},children:"Revert Now"})]})]}),p&&e.jsxs("div",{style:{padding:"16px",borderTop:`1px solid ${it.border}`,background:"rgba(0,0,0,0.1)"},children:[e.jsx("p",{style:{fontSize:"12px",color:it.ts,margin:"0 0 12px 0",lineHeight:1.5},children:j.description||"[No description]"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${C?it.violetM:it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(es,{size:10})," Model"]}),e.jsx("div",{style:{fontSize:"12px",color:C?it.violet:it.tp,fontFamily:it.mono},children:j.model||"unknown"})]}),e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${R?it.violetM:it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(M0,{size:10})," Tools"]}),e.jsxs("div",{style:{fontSize:"12px",color:R?it.violet:it.tp},children:[j.tools?j.tools.split(",").filter(Boolean).length:0," defined"]})]}),e.jsxs("div",{style:{padding:"8px",background:it.surfaceEl,borderRadius:"6px",border:`1px solid ${it.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"4px",textTransform:"uppercase"},children:[e.jsx(Eh,{size:10})," Memory"]}),e.jsx("div",{style:{fontSize:"12px",color:it.tp},children:j.memory||"None"})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"10px",color:it.tm,marginBottom:"6px",textTransform:"uppercase"},children:[e.jsx(Ms,{size:10})," Prompt Snippet"]}),e.jsxs("div",{style:{fontSize:"11px",color:it.ts,fontFamily:it.mono,background:"#000",padding:"10px",borderRadius:"6px",border:`1px solid ${it.border}`,maxHeight:"100px",overflowY:"auto",whiteSpace:"pre-wrap",lineHeight:1.4},children:[(j.full_prompt||"[Empty]").substring(0,500),j.full_prompt&&j.full_prompt.length>500?"...":""]})]})]})]})]},j.id)})]}),s.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 0",border:`1px dashed ${it.border}`,borderRadius:"12px",color:it.tm,fontSize:"12px"},children:"No version history available yet."})]})}const H={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function yu(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function Lo(t){return t?t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString():"0"}function m6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=H.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${H.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=H.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})})}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:H.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:H.ts},children:t.project_name}),e.jsx("span",{style:{color:H.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:H.tm},children:["v",t.iteration_version]})]})]})]})}function y6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ki,{size:14,style:{color:H.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:H.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:H.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:H.surfaceEl,border:`1px solid ${H.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:H.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Qo,{size:16})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${H.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=H.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=H.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:H.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:H.surfaceEl,border:`1px solid ${H.border}`,color:H.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:H.surfaceEl,border:`1px solid ${H.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:H.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(hr,{size:16})})]})]})}function v6(){const{name:t}=ts(),i=qt(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState([]),[c,m]=L.useState(!0),[v,d]=L.useState(!1),[y,_]=L.useState([]),[j,w]=L.useState([]),[h,p]=L.useState(!1),[f,g]=L.useState([]),[C,R]=L.useState(!1),[z,A]=L.useState(!1),[E,B]=L.useState(new Set),[P,N]=L.useState([]),[K,U]=L.useState({}),[ee,V]=L.useState(!1),[de,J]=L.useState(!1),[Y,M]=L.useState(null),[I,D]=L.useState(!1),[W,pe]=L.useState([]),[me,Se]=L.useState(!0),[Ee,X]=L.useState(null),[F,ve]=L.useState({}),[se,Me]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[Z,ke]=L.useState(!1),he=Jo(),Ie=s&&s.source==="manual"&&(!s.created_by||s.created_by===(he==null?void 0:he.userId)),[Oe,$e]=L.useState(null),[je,Ne]=L.useState(!1),[Q,le]=L.useState(null),[We,Ze]=L.useState(!1),[Xe,mt]=L.useState(null),[Jt,Et]=L.useState(null),[Rt,Mt]=L.useState([]),[xt,Pt]=L.useState(""),[ht,zr]=L.useState(!1),[pr,Ii]=L.useState(!1),[fr,Lr]=L.useState(null),kr=L.useRef(null);L.useEffect(()=>{var O;(O=kr.current)==null||O.scrollIntoView({behavior:"smooth"})},[Rt]);const oe=async()=>{if(!xt.trim()||ht)return;const O=xt.trim();Pt("");const re=[...Rt,{role:"user",content:O}];Mt(re),zr(!0);try{const _e=await ae(`/api/agents/${t}/test-chat`,{method:"POST",body:JSON.stringify({messages:re})});Mt(De=>[...De,{role:"assistant",content:_e.content}]),_e.context&&Lr(_e.context)}catch(_e){Mt(De=>[...De,{role:"assistant",content:"Error: "+(_e.message||"Failed to get response")}])}finally{zr(!1)}};L.useEffect(()=>{try{const O=localStorage.getItem(`mcp_key_${t}`);O&&Et(O)}catch{}},[t]);const He=(O,re)=>{navigator.clipboard.writeText(O),mt(re),setTimeout(()=>mt(null),2e3)};L.useEffect(()=>{m(!0),Promise.all([ae(`/api/agents/${t}`),ae(`/api/agents/${t}/projects`),ae("/api/categories"),ae(`/api/marketplace/${t}`)]).then(async([O,re,_e,De])=>{o(O),S(re||[]),l(_e||[]),N(De.showcases||[]);try{const At=await ae(`/api/skills/agent/${t}`);_(At||[])}catch(At){console.error("Failed to load agent skills:",At)}try{const At=await ae(`/api/agent-deploy/${t}/deployment`);$e(At)}catch{}const ct=(re||[]).slice(0,20),ft={};await Promise.all(ct.map(async At=>{try{const nr=await ae(`/api/iterations/${At.id}`);nr&&nr.length>0&&(ft[At.id]=nr)}catch(nr){console.error(`Failed to load iterations for project ${At.id}:`,nr)}})),U(ft)}).catch(O=>{console.error(O)}).finally(()=>m(!1))},[t]);const qe=async O=>{try{await ae(`/api/agents/${t}/rating`,{method:"PATCH",body:JSON.stringify({rating:O})}),o(re=>({...re,rating:O}))}catch(re){console.error(re)}},pt=async()=>{try{await ae(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch(O){console.error(O)}},wt=()=>{if(!(s!=null&&s.full_prompt))return;const O=new Blob([s.full_prompt],{type:"text/markdown"}),re=URL.createObjectURL(O),_e=document.createElement("a");_e.href=re,_e.download=`${s.name}.md`,_e.click(),URL.revokeObjectURL(re)},Qt=async()=>{const O=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(O)try{await ae(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:O})}),i(`/agents/${O}`)}catch(re){console.error(re)}},gt=async O=>{if(O.preventDefault(),J(!1),P.length>=6){alert("Maximum 6 showcases per agent");return}try{const re=JSON.parse(O.dataTransfer.getData("application/json"));await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(re)});const _e=await ae(`/api/marketplace/${t}`);N(_e.showcases||[])}catch(re){console.error("Drop error:",re),alert(re.message||"Failed to add showcase")}},Gt=O=>{O.preventDefault(),O.dataTransfer.dropEffect="copy",J(!0)},Ir=()=>{J(!1)},Xr=async()=>{Ne(!0);try{const O=await ae(`/api/agent-deploy/${t}/deploy`,{method:"POST",body:JSON.stringify({tier:"starter"})});$e(O.deployment),le(O.apiKey),Et(O.apiKey),Ze(!0);try{localStorage.setItem(`mcp_key_${t}`,O.apiKey)}catch{}}catch(O){alert(O.message||"Deploy failed")}finally{Ne(!1)}},oi=async()=>{if(window.confirm("Undeploy this MCP server? API keys will be revoked.")){Ne(!0);try{await ae(`/api/agent-deploy/${t}/deployment`,{method:"DELETE"}),$e(null),le(null)}catch(O){alert(O.message||"Undeploy failed")}finally{Ne(!1)}}},Dr=async()=>{if(!Oe)return;const O=Oe.status==="active"?"paused":"active";try{await ae(`/api/agent-deploy/${t}/deployment`,{method:"PUT",body:JSON.stringify({status:O})}),$e(re=>({...re,status:O}))}catch(re){alert(re.message||"Status update failed")}},Ur=async(O,re)=>{const _e=P.findIndex(ft=>ft.id===O);if(re==="up"&&_e===0||re==="down"&&_e===P.length-1)return;const De=[...P],ct=re==="up"?_e-1:_e+1;[De[_e],De[ct]]=[De[ct],De[_e]],N(De),await ae(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:De.map(ft=>ft.id)})})},ai=async O=>{window.confirm("Remove this showcase?")&&(await ae(`/api/marketplace/${t}/showcases/${O}`,{method:"DELETE"}),N(P.filter(re=>re.id!==O)))},Xi=async()=>{try{const O=await ae("/api/projects");pe(O||[]);const re={};await Promise.all((O||[]).map(async _e=>{try{const De=await ae(`/api/iterations/${_e.id}`);De&&De.length>0&&(re[_e.id]=De)}catch(De){console.error(`Failed to load iterations for project ${_e.id}:`,De)}})),ve(re)}catch(O){console.error(O)}Se(!0),X(null),D(!0)},Mr=async()=>{if(!(!se.project_id||!se.iteration_id||!se.title))try{await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(se)});const O=await ae(`/api/marketplace/${t}`);N(O.showcases||[]),D(!1),X(null),Me({project_id:"",iteration_id:"",title:"",description:""})}catch(O){console.error(O),alert(O.message||"Failed to add showcase")}};if(c)return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:H.bg,color:H.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:H.tm,fontSize:"13px"},children:"Loading..."})});if(!s)return e.jsxs("div",{style:{height:"calc(100vh - 53px)",backgroundColor:H.bg,color:H.tp,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px"},children:[e.jsx("span",{style:{color:H.ts,fontSize:"14px"},children:"Agent not found"}),e.jsx(bi,{to:"/agents",style:{color:H.violet,fontSize:"13px"},children:"Back to agents"})]});const vr=b.find(O=>O.name===s.category),li=s.tools?s.tools.split(",").map(O=>O.trim()).filter(Boolean):[];return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:H.bg,color:H.tp,overflowY:"auto"},children:[e.jsxs("div",{className:"agent-detail-breadcrumb",style:{padding:"16px 32px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${H.border}`},children:[e.jsx(bi,{to:"/agents",style:{color:H.tm,display:"flex",textDecoration:"none"},children:e.jsx(wh,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:H.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:H.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:H.ts},children:t})]}),e.jsxs("div",{className:"agent-detail-header",style:{margin:"0",padding:"32px",borderRadius:"0",border:"none",borderBottom:`1px solid ${H.border}`,background:"rgba(26,26,27,0.8)",backdropFilter:"blur(20px)",boxShadow:`0 0 40px ${H.violetG}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[s.screenshot_path?e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",overflow:"hidden",border:`2px solid ${H.violet}40`,flexShrink:0,background:H.surfaceEl,boxShadow:`0 4px 16px ${H.violetG}`},children:e.jsx("img",{src:s.screenshot_path+"?t="+Date.now(),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",flexShrink:0,background:`linear-gradient(135deg, ${H.violetM} 0%, ${H.surfaceEl} 100%)`,border:`2px solid ${H.violet}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",color:H.violet},children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 10px 0",letterSpacing:"-0.01em"},children:s.name.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:vr!=null&&vr.color?`${vr.color}15`:H.violetM,color:(vr==null?void 0:vr.color)||H.violet},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:"rgba(255,255,255,0.05)",color:H.ts,fontFamily:H.mono},children:s.model||"unknown"}),e.jsx("span",{style:{display:"inline-flex",padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",backgroundColor:s.source==="manual"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:s.source==="manual"?H.success:H.ts},children:s.source||"filesystem"}),li.map(O=>e.jsx("span",{style:{display:"inline-flex",padding:"3px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"500",backgroundColor:"rgba(255,255,255,0.04)",color:H.tm},children:O},O))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"3px",flexShrink:0},children:[1,2,3,4,5].map(O=>e.jsx(En,{size:16,fill:O<=(s.rating||0)?H.warning:"none",color:O<=(s.rating||0)?H.warning:H.tm,style:{cursor:"pointer"},onClick:()=>qe(O)},O))})]}),e.jsx("p",{style:{fontSize:"13px",color:H.ts,lineHeight:"1.6",margin:"0 0 16px 0",maxWidth:"700px"},children:s.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",marginBottom:"20px"},children:[s.memory&&e.jsxs("div",{style:{fontSize:"11px",color:H.tm},children:[e.jsx("span",{style:{color:H.ts,fontWeight:"600"},children:"Memory:"})," ",s.memory]}),s.permission_mode&&e.jsxs("div",{style:{fontSize:"11px",color:H.tm},children:[e.jsx("span",{style:{color:H.ts,fontWeight:"600"},children:"Permission:"})," ",s.permission_mode]}),s.max_turns>0&&e.jsxs("div",{style:{fontSize:"11px",color:H.tm},children:[e.jsx("span",{style:{color:H.ts,fontWeight:"600"},children:"Max Turns:"})," ",s.max_turns]}),e.jsxs("div",{style:{fontSize:"11px",color:H.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(sx,{size:10})," ",yu(s.created_at)]}),e.jsxs("div",{style:{fontSize:"11px",color:H.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Zo,{size:10})," ",yu(s.updated_at)]})]}),e.jsxs("div",{className:"agent-detail-actions",style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[Ie&&e.jsxs("button",{onClick:()=>i(`/agents/${t}/edit`),style:{backgroundColor:H.surfaceEl,color:H.ts,border:`1px solid ${H.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ea,{size:13}),"Edit"]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:H.violetM,color:H.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Oo,{size:13}),"Test"]}),e.jsxs("button",{onClick:Qt,style:{backgroundColor:H.surfaceEl,color:H.ts,border:`1px solid ${H.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Rl,{size:13}),"Duplicate"]}),e.jsxs("button",{onClick:wt,style:{backgroundColor:H.surfaceEl,color:H.ts,border:`1px solid ${H.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(jn,{size:13}),"Export .md"]}),Oe?e.jsxs("a",{href:`/mcp/${Oe.slug}`,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"rgba(34,197,94,0.1)",color:H.success,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",textDecoration:"none"},children:[e.jsx(zs,{size:13}),"View MCP"]}):e.jsxs("button",{onClick:Xr,disabled:je,style:{backgroundColor:H.violetM,color:H.violet,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:je?"wait":"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Zd,{size:13}),je?"Deploying...":"Deploy MCP"]}),e.jsxs("button",{onClick:()=>V(!ee),style:{backgroundColor:H.surfaceEl,color:H.ts,border:`1px solid ${H.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ki,{size:13}),ee?"Hide Showcases":"Manage Showcases"]}),Ie&&(v?e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"12px",color:H.danger},children:"Confirm?"}),e.jsx("button",{onClick:pt,style:{backgroundColor:H.danger,color:"#fff",border:"none",padding:"6px 12px",fontSize:"11px",fontWeight:"700",borderRadius:"4px",cursor:"pointer"},children:"Yes"}),e.jsx("button",{onClick:()=>d(!1),style:{backgroundColor:H.surfaceEl,color:H.ts,border:`1px solid ${H.borderS}`,padding:"6px 12px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:"No"})]}):e.jsxs("button",{onClick:()=>d(!0),style:{backgroundColor:"transparent",color:H.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Hr,{size:13}),"Delete"]}))]})]}),Ie&&e.jsxs("div",{style:{padding:"20px 32px 0",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>i(`/skills/create?agent=${t}`),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.05) 100%)",border:"1px solid rgba(6,182,212,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:O=>{O.currentTarget.style.borderColor="#06b6d4",O.currentTarget.style.boxShadow="0 8px 32px -8px rgba(6,182,212,0.4)",O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.borderColor="rgba(6,182,212,0.25)",O.currentTarget.style.boxShadow="none",O.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6,182,212,0.3)"},children:e.jsx(Yr,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:H.tp,marginBottom:"2px"},children:"Create Skill"}),e.jsx("div",{style:{fontSize:"11px",color:H.ts},children:"New skill auto-linked to this agent"})]}),e.jsx(hr,{size:16,style:{color:H.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:async()=>{try{const O=await ae("/api/skills");w(O||[]),p(!0)}catch(O){console.error(O)}},style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:O=>{O.currentTarget.style.borderColor=H.violet,O.currentTarget.style.boxShadow="0 8px 32px -8px rgba(139,92,246,0.4)",O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.borderColor="rgba(139,92,246,0.25)",O.currentTarget.style.boxShadow="none",O.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:e.jsx(ir,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:H.tp,marginBottom:"2px"},children:"Add Skills"}),e.jsx("div",{style:{fontSize:"11px",color:H.ts},children:"Assign existing skills to this agent"})]}),e.jsx(hr,{size:16,style:{color:H.tm,marginLeft:"auto",flexShrink:0}})]}),e.jsxs("button",{onClick:()=>ke(!0),style:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"14px",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",border:"1px solid rgba(245,158,11,0.25)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:O=>{O.currentTarget.style.borderColor="#f59e0b",O.currentTarget.style.boxShadow="0 8px 32px -8px rgba(245,158,11,0.4)",O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.borderColor="rgba(245,158,11,0.25)",O.currentTarget.style.boxShadow="none",O.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",flexShrink:0,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ft,{size:20,color:"#fff"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:H.tp,marginBottom:"2px"},children:"Enhance with AI"}),e.jsx("div",{style:{fontSize:"11px",color:H.ts},children:"Improve this agent via AI conversation"})]}),e.jsx(hr,{size:16,style:{color:H.tm,marginLeft:"auto",flexShrink:0}})]})]}),ee&&e.jsxs("div",{style:{margin:"0 24px 24px",padding:"24px",borderRadius:"12px",border:`1px solid ${H.violet}40`,background:H.surface},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:H.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:H.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:H.ts},children:[P.length," / 6 showcases"]}),P.length<6&&e.jsxs("button",{onClick:Xi,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:H.tp,color:H.bg,border:"none"},children:[e.jsx(ir,{size:14})," Add Showcase"]})]})]}),e.jsxs("div",{onDrop:gt,onDragOver:Gt,onDragLeave:Ir,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:P.length===0?"120px":"auto",border:de?`2px dashed ${H.violet}`:"none",borderRadius:"8px",padding:de?"8px":"0",background:de?`${H.violet}10`:"transparent",transition:"all 0.2s"},children:[P.map((O,re)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:H.surfaceEl,borderRadius:"8px",border:`1px solid ${H.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>Ur(O.id,"up"),disabled:re===0,style:{background:"none",border:"none",color:re===0?H.tm:H.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(C0,{size:14})}),e.jsx("button",{onClick:()=>Ur(O.id,"down"),disabled:re===P.length-1,style:{background:"none",border:"none",color:re===P.length-1?H.tm:H.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(w0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:O.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:H.tm},children:[O.project_name,"  v",O.iteration_version]})]}),e.jsxs("button",{onClick:()=>ai(O.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${H.danger}20`,color:H.danger,border:"none"},children:[e.jsx(Hr,{size:14})," Remove"]})]},O.id)),P.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${de?H.violet:H.border}`,borderRadius:"8px",color:de?H.violet:H.tm,background:de?`${H.violet}10`:"transparent",transition:"all 0.2s"},children:de?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations below!"})]})]}),P.length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Hs,{size:16,style:{color:H.violet}})," Showcase Gallery"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:P.map(O=>e.jsx(m6,{showcase:O,onClick:M},O.id))})]}),Object.keys(K).length>0&&e.jsxs("div",{style:{margin:"0 24px 24px"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ki,{size:16,style:{color:H.violet}})," Iteration Browser"]}),u.filter(O=>K[O.id]&&K[O.id].length>0).map(O=>e.jsx(y6,{iterations:K[O.id],projectId:O.id,projectName:O.name,onSelectIteration:(re,_e,De)=>{M({project_id:_e,iteration_id:re.id,title:re.title||`V${re.version}`,project_name:De,iteration_version:re.version})}},O.id))]}),e.jsxs("div",{className:"agent-detail-content",style:{display:"flex",padding:"0 24px 24px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{className:"agent-detail-left",style:{width:"65%",minWidth:"300px",flex:"1 1 400px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:["Prompt",s.full_prompt&&e.jsxs("span",{style:{fontSize:"10px",color:H.tm,fontWeight:"400",fontFamily:H.mono},children:[s.full_prompt.split(`
`).length," lines"]})]}),e.jsx("div",{style:{backgroundColor:H.bg,border:`1px solid ${H.borderS}`,borderRadius:"8px",maxHeight:"600px",overflowY:"auto"},children:s.full_prompt?e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{padding:"16px 12px 16px 16px",borderRight:`1px solid ${H.border}`,userSelect:"none",flexShrink:0},children:s.full_prompt.split(`
`).map((O,re)=>e.jsx("div",{style:{fontSize:"11px",fontFamily:H.mono,color:"rgba(255,255,255,0.15)",lineHeight:"1.7",textAlign:"right"},children:re+1},re))}),e.jsx("pre",{style:{padding:"16px",margin:0,fontSize:"11px",fontFamily:H.mono,color:H.ts,lineHeight:"1.7",whiteSpace:"pre-wrap",wordBreak:"break-word",flex:1,overflow:"hidden"},children:s.full_prompt})]}):e.jsx("div",{style:{padding:"40px",textAlign:"center",color:H.tm,fontSize:"13px"},children:"[No prompt content]"})}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx(x6,{agentName:t,onRevert:()=>{ae(`/api/agents/${t}`).then(o).catch(console.error)}})})]}),e.jsxs("div",{className:"agent-detail-right",style:{width:"35%",minWidth:"280px",flex:"1 1 280px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:["Projects",e.jsx("span",{style:{fontSize:"10px",color:H.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:u.length})]}),e.jsxs("button",{onClick:()=>i(`/project/new?agent=${t}`),style:{backgroundColor:H.violetM,color:H.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ir,{size:12}),"New"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[u.map(O=>e.jsxs("div",{onClick:()=>i(`/project/${O.id}`),style:{backgroundColor:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",padding:"14px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:re=>re.currentTarget.style.borderColor=H.violet,onMouseLeave:re=>re.currentTarget.style.borderColor=H.border,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"500"},children:O.name}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:O.status==="active"?"rgba(34,197,94,0.1)":"rgba(255,255,255,0.05)",color:O.status==="active"?H.success:H.tm},children:O.status})]}),e.jsxs("div",{style:{fontSize:"11px",color:H.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(sx,{size:10})," ",yu(O.created_at)]})]},O.id)),u.length===0&&e.jsx("div",{style:{padding:"40px 20px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${H.borderS}`,color:H.tm,fontSize:"12px"},children:"No projects yet"})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Yr,{size:14,style:{color:H.violet}}),"Skills",e.jsx("span",{style:{fontSize:"10px",color:H.tm,fontWeight:"400",backgroundColor:"rgba(255,255,255,0.04)",padding:"2px 6px",borderRadius:"4px"},children:y.length})]}),Ie&&e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsxs("button",{onClick:async()=>{R(!0),A(!0),B(new Set);try{const O=await ae(`/api/skills/agent/${t}/ai-generate`,{method:"POST"});g(O.skills||[]),B(new Set((O.skills||[]).map((re,_e)=>_e)))}catch(O){console.error(O),g([])}R(!1)},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.25)",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ft,{size:12}),"AI Enhance"]}),e.jsxs("button",{onClick:async()=>{try{const O=await ae("/api/skills");w(O||[]),p(!0)}catch(O){console.error(O)}},style:{backgroundColor:H.violetM,color:H.violet,border:"none",padding:"5px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ir,{size:12}),"Add"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[y.map(O=>e.jsxs("div",{style:{backgroundColor:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:re=>{re.currentTarget.style.borderColor=O.color||H.violet,re.currentTarget.style.transform="translateX(4px)"},onMouseLeave:re=>{re.currentTarget.style.borderColor=H.border,re.currentTarget.style.transform="translateX(0)"},onClick:()=>i(`/skills/${O.id}/edit`),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:O.color||H.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:O.name}),e.jsx("span",{style:{fontSize:"9px",color:H.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:O.category||"general"}),e.jsx(Oo,{size:10,style:{color:H.tm,opacity:.5}})]}),Ie&&e.jsx("button",{onClick:async re=>{re.stopPropagation();try{await ae(`/api/skills/${O.id}/unassign/${t}`,{method:"DELETE"}),_(_e=>_e.filter(De=>De.id!==O.id))}catch(_e){console.error(_e)}},style:{background:"none",border:"none",color:H.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Remove skill",children:e.jsx(kt,{size:13})})]},O.id)),y.length===0&&!z&&e.jsx("div",{style:{padding:"24px 14px",textAlign:"center",borderRadius:"8px",border:`1px dashed ${H.borderS}`,color:H.tm,fontSize:"11px"},children:"No skills assigned"})]}),z&&e.jsxs("div",{style:{marginTop:"12px",borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(245,158,11,0.3)",background:"linear-gradient(135deg, rgba(245,158,11,0.06) 0%, rgba(245,158,11,0.02) 100%)"},children:[e.jsxs("div",{style:{padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(245,158,11,0.15)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ft,{size:14,style:{color:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:H.tp},children:"AI-Suggested Skills"}),!C&&f.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:H.tm},children:[E.size,"/",f.length," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[!C&&f.length>0&&e.jsxs("button",{onClick:async()=>{if(E.size===0)return;const O=f.filter((re,_e)=>E.has(_e));try{const re=await ae("/api/skills/bulk",{method:"POST",body:JSON.stringify({skills:O})});if(re.skills&&re.skills.length>0){const _e=re.skills.map(ct=>ct.id);await ae(`/api/skills/agent/${t}/bulk`,{method:"POST",body:JSON.stringify({skill_ids:_e})});const De=await ae(`/api/skills/agent/${t}`);_(De||[])}A(!1),g([])}catch(re){console.error(re)}},style:{backgroundColor:"rgba(34,197,94,0.15)",color:"#22c55e",border:"1px solid rgba(34,197,94,0.3)",padding:"4px 12px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer"},children:["Add ",E.size," Skills"]}),e.jsx("button",{onClick:()=>{A(!1),g([])},style:{background:"none",border:"none",color:H.tm,cursor:"pointer",display:"flex",padding:"4px"},children:e.jsx(kt,{size:14})})]})]}),e.jsx("div",{style:{padding:"8px",maxHeight:"320px",overflowY:"auto"},children:C?e.jsxs("div",{style:{padding:"30px",textAlign:"center"},children:[e.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid rgba(245,158,11,0.3)",borderTopColor:"#f59e0b",borderRadius:"50%",margin:"0 auto 10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"11px",color:H.ts},children:"Analyzing agent context..."}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg) } }"})]}):f.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:H.tm,fontSize:"11px"},children:"No suggestions generated. Try again."}):f.map((O,re)=>{const _e=E.has(re);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",padding:"10px 12px",borderRadius:"6px",marginBottom:"4px",backgroundColor:_e?"rgba(245,158,11,0.08)":"transparent",border:`1px solid ${_e?"rgba(245,158,11,0.2)":"transparent"}`,cursor:"pointer",transition:"all 0.15s"},onClick:()=>{B(De=>{const ct=new Set(De);return ct.has(re)?ct.delete(re):ct.add(re),ct})},children:[e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",flexShrink:0,marginTop:"1px",border:`2px solid ${_e?"#f59e0b":H.borderS}`,backgroundColor:_e?"#f59e0b":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},children:_e&&e.jsx("span",{style:{color:"#000",fontSize:"11px",fontWeight:"700"},children:""})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"3px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:O.color||"#f59e0b"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:H.tp},children:O.name}),e.jsx("span",{style:{fontSize:"9px",color:H.tm,padding:"1px 6px",borderRadius:"100px",backgroundColor:"rgba(255,255,255,0.04)"},children:O.category})]}),e.jsx("div",{style:{fontSize:"11px",color:H.ts,lineHeight:"1.4"},children:O.description})]})]},re)})})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Zd,{size:14,style:{color:H.violet}}),"MCP Deploy",Oe&&e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:Oe.status==="active"?"rgba(34,197,94,0.15)":"rgba(245,158,11,0.15)",color:Oe.status==="active"?H.success:H.warning},children:Oe.status})]})}),Oe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("a",{href:`/mcp/${Oe.slug}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 14px",borderBottom:`1px solid ${H.border}`,textDecoration:"none",color:H.tp,fontSize:"12px",transition:"background 0.15s"},onMouseEnter:O=>O.currentTarget.style.backgroundColor=H.surfaceEl,onMouseLeave:O=>O.currentTarget.style.backgroundColor="transparent",children:[e.jsx(zs,{size:13,style:{color:H.violet}}),e.jsxs("span",{style:{fontFamily:H.mono,fontSize:"11px",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["/mcp/",Oe.slug]}),e.jsx(Oo,{size:11,style:{color:H.tm}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",borderBottom:`1px solid ${H.border}`,fontSize:"11px"},children:[e.jsx(cx,{size:12,style:{color:H.violet}}),e.jsxs("span",{style:{fontFamily:H.mono,color:H.ts,flex:1},children:["/mcp/",Oe.slug,"/api/chat"]})]}),We&&Q&&e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${H.border}`,background:"rgba(139,92,246,0.05)"},children:[e.jsxs("div",{style:{fontSize:"10px",color:H.warning,fontWeight:"600",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(cx,{size:10})," Save your API key (shown only once)"]}),e.jsxs("div",{style:{fontFamily:H.mono,fontSize:"10px",color:H.tp,background:"rgba(0,0,0,0.3)",padding:"6px 8px",borderRadius:"4px",wordBreak:"break-all",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{flex:1},children:Q}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Q)},style:{background:"none",border:"none",color:H.violet,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(Rl,{size:12})})]})]}),Oe.monthlyUsage!==void 0&&e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${H.border}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsxs("span",{style:{fontSize:"10px",color:H.tm,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ch,{size:10})," Monthly Tokens"]}),e.jsxs("span",{style:{fontSize:"10px",fontFamily:H.mono,color:H.ts},children:[Lo(Oe.monthlyUsage)," / ",Lo(Oe.monthly_token_limit)]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.06)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:"3px",width:`${Math.min((Oe.monthlyUsage||0)/(Oe.monthly_token_limit||1)*100,100)}%`,background:`linear-gradient(90deg, ${H.violet}, ${H.violet}cc)`,transition:"width 0.5s ease"}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",borderBottom:`1px solid ${H.border}`},children:[e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${H.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:H.mono},children:Oe.total_requests||0}),e.jsx("div",{style:{fontSize:"9px",color:H.tm,marginTop:"2px"},children:"Requests"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center",borderRight:`1px solid ${H.border}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:H.mono},children:Lo(Oe.total_input_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:H.tm,marginTop:"2px"},children:"Input"})]}),e.jsxs("div",{style:{padding:"10px 14px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"700",fontFamily:H.mono},children:Lo(Oe.total_output_tokens||0)}),e.jsx("div",{style:{fontSize:"9px",color:H.tm,marginTop:"2px"},children:"Output"})]})]}),e.jsxs("div",{style:{padding:"10px 14px",display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:Dr,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:Oe.status==="active"?"rgba(245,158,11,0.1)":"rgba(34,197,94,0.1)",color:Oe.status==="active"?H.warning:H.success,border:"none",cursor:"pointer"},children:Oe.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(gw,{size:10}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ql,{size:10}),"Resume"]})}),e.jsxs("button",{onClick:oi,disabled:je,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",padding:"6px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",backgroundColor:"rgba(239,68,68,0.1)",color:H.danger,border:"none",cursor:je?"wait":"pointer"},children:[e.jsx(ux,{size:10}),"Undeploy"]})]})]}),(()=>{const O=Jt||Q||"YOUR_API_KEY",_e=`${window.location.origin}/mcp/${Oe.slug}/api/chat`,De=s.name.replace(/-/g," ").replace(/\b\w/g,Di=>Di.toUpperCase()),ct=`curl -X POST ${_e} \\
  -H "Authorization: Bearer ${O}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"Hello!"}]}'`,ft=`You have access to an AI agent "${De}" via HTTP API.

Endpoint: ${_e}
API Key: ${O}

To interact with this agent, make HTTP POST requests:

curl -X POST ${_e} \\
  -H "Authorization: Bearer ${O}" \\
  -H "Content-Type: application/json" \\
  -d '{"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}'

The response will contain the agent's reply in: response.choices[0].message.content

Use this agent when you need help with: ${s.description||"specialized tasks"}.`,At=`You are connected to an external AI agent "${De}".

To call this agent, use the following HTTP API:
- Method: POST
- URL: ${_e}
- Headers: Authorization: Bearer ${O}, Content-Type: application/json
- Body: {"messages":[{"role":"user","content":"YOUR_MESSAGE"}]}

The agent responds with: {"choices":[{"message":{"content":"RESPONSE"}}]}

Agent description: ${s.description||"Specialized AI agent"}.
Use this agent to delegate tasks matching its expertise.`,nr=({label:Di,value:we,fieldKey:rt})=>e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"10px",color:H.tm,fontWeight:"600",textTransform:"uppercase"},children:Di}),e.jsxs("button",{onClick:()=>He(we,rt),style:{background:Xe===rt?"rgba(34,197,94,0.15)":H.surfaceEl,border:`1px solid ${Xe===rt?"rgba(34,197,94,0.3)":H.border}`,color:Xe===rt?H.success:H.ts,padding:"3px 8px",fontSize:"9px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s"},children:[e.jsx(Rl,{size:9}),Xe===rt?"Copied!":"Copy"]})]}),e.jsx("div",{onClick:()=>He(we,rt),style:{fontFamily:H.mono,fontSize:"10px",color:H.ts,background:"rgba(0,0,0,0.3)",padding:"8px 10px",borderRadius:"6px",whiteSpace:"pre-wrap",wordBreak:"break-all",lineHeight:"1.5",cursor:"pointer",border:`1px solid ${H.border}`,maxHeight:"120px",overflowY:"auto",transition:"border-color 0.2s"},onMouseEnter:vt=>vt.currentTarget.style.borderColor=H.violet,onMouseLeave:vt=>vt.currentTarget.style.borderColor=H.border,children:we})]});return e.jsxs("div",{style:{marginTop:"12px",background:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${H.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Yr,{size:12,style:{color:H.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:"Test in your LLM"})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx(nr,{label:"API Token",value:O,fieldKey:"token"}),e.jsx(nr,{label:"Curl Command",value:ct,fieldKey:"curl"}),e.jsx(nr,{label:"Prompt for Claude",value:ft,fieldKey:"claude"}),e.jsx(nr,{label:"Prompt for ChatGPT",value:At,fieldKey:"gpt"})]})]})})()]}):e.jsxs("div",{style:{background:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",padding:"20px",textAlign:"center"},children:[e.jsx(zs,{size:24,style:{color:H.tm,marginBottom:"8px"}}),e.jsx("p",{style:{fontSize:"12px",color:H.tm,marginBottom:"14px"},children:"Deploy this agent as an MCP server with its own landing page & API"}),e.jsxs("button",{onClick:Xr,disabled:je,style:{backgroundColor:H.violet,color:"#fff",border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:"600",borderRadius:"6px",cursor:je?"wait":"pointer",display:"inline-flex",alignItems:"center",gap:"6px",opacity:je?.6:1},children:[e.jsx(Zd,{size:13}),je?"Deploying...":"Deploy as MCP"]})]})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(dx,{size:14,style:{color:H.violet}}),"Test Agent"]}),e.jsxs("button",{onClick:()=>Ii(!pr),style:{background:pr?H.violetG:H.surfaceEl,border:`1px solid ${pr?H.violet:H.border}`,color:pr?H.violet:H.ts,padding:"4px 10px",fontSize:"10px",fontWeight:"600",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(dx,{size:10})," ",pr?"Close":"Open Chat"]})]}),pr&&e.jsxs("div",{style:{background:H.surface,border:`1px solid ${H.border}`,borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",height:"420px"},children:[e.jsxs("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${H.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(139,92,246,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Sn,{size:13,style:{color:H.violet}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"600"},children:s.name.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase())}),fr&&e.jsxs("span",{style:{fontSize:"9px",color:H.tm,fontFamily:H.mono,padding:"1px 6px",borderRadius:"100px",background:"rgba(255,255,255,0.05)"},children:[Lo(fr.systemPromptTokens)," tokens context"]})]}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:Rt.length>0&&e.jsxs("button",{onClick:()=>{Mt([]),Lr(null)},style:{background:"none",border:"none",color:H.tm,cursor:"pointer",fontSize:"9px",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ux,{size:9})," Clear"]})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:Rt.length===0?e.jsxs("div",{style:{padding:"30px 12px",textAlign:"center"},children:[e.jsx(Sn,{size:28,style:{color:H.tm,marginBottom:"10px",opacity:.2}}),e.jsx("div",{style:{fontSize:"12px",color:H.ts,marginBottom:"6px"},children:"Chat with this agent to test it"}),e.jsxs("div",{style:{fontSize:"10px",color:H.tm,lineHeight:"1.5"},children:["Full system prompt + all skills are injected.",y.length>0&&e.jsxs("span",{children:[" ",y.length," skill",y.length>1?"s":""," loaded."]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",justifyContent:"center",marginTop:"14px"},children:["What can you do?","List your skills","Help me get started"].map(O=>e.jsx("button",{onClick:()=>{Pt(O)},style:{padding:"4px 10px",fontSize:"10px",borderRadius:"100px",background:H.surfaceEl,border:`1px solid ${H.border}`,color:H.ts,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:re=>{re.currentTarget.style.borderColor=H.violet,re.currentTarget.style.color=H.violet},onMouseLeave:re=>{re.currentTarget.style.borderColor=H.border,re.currentTarget.style.color=H.ts},children:O},O))})]}):e.jsxs(e.Fragment,{children:[Rt.map((O,re)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexDirection:O.role==="user"?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:O.role==="user"?"rgba(255,255,255,0.08)":H.violetG},children:O.role==="user"?e.jsx(qi,{size:11,style:{color:H.ts}}):e.jsx(Sn,{size:11,style:{color:H.violet}})}),e.jsx("div",{style:{maxWidth:"85%",padding:"8px 12px",borderRadius:O.role==="user"?"10px 10px 2px 10px":"10px 10px 10px 2px",background:O.role==="user"?"rgba(139,92,246,0.12)":H.surfaceEl,border:`1px solid ${O.role==="user"?"rgba(139,92,246,0.2)":H.border}`,fontSize:"12px",lineHeight:"1.6",color:H.tp,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:O.content})]},re)),ht&&e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:H.violetG},children:e.jsx(Sn,{size:11,style:{color:H.violet}})}),e.jsx("div",{style:{padding:"8px 12px",borderRadius:"10px 10px 10px 2px",background:H.surfaceEl,border:`1px solid ${H.border}`,fontSize:"11px",color:H.tm,fontStyle:"italic"},children:"Thinking..."})]}),e.jsx("div",{ref:kr})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${H.border}`,display:"flex",gap:"6px"},children:[e.jsx("input",{value:xt,onChange:O=>Pt(O.target.value),onKeyDown:O=>O.key==="Enter"&&!O.shiftKey&&oe(),placeholder:"Test a message...",disabled:ht,style:{flex:1,backgroundColor:H.bg,border:`1px solid ${H.border}`,borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"12px",outline:"none",fontFamily:"inherit"}}),e.jsx("button",{onClick:oe,disabled:ht||!xt.trim(),style:{backgroundColor:xt.trim()?H.violet:H.surfaceEl,border:"none",borderRadius:"6px",padding:"8px 12px",color:xt.trim()?"#fff":H.tm,cursor:xt.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:"600",transition:"all 0.15s"},children:e.jsx(Rh,{size:12})})]})]})]}),h&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>p(!1),children:e.jsxs("div",{style:{background:H.surface,border:`1px solid ${H.borderS}`,borderRadius:"8px",width:"400px",maxHeight:"500px",overflow:"hidden"},onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${H.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",margin:0},children:"Add Skills"}),e.jsx("button",{onClick:()=>p(!1),style:{background:"none",border:"none",color:H.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:16})})]}),e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"8px"},children:[j.filter(O=>!y.find(re=>re.id===O.id)).map(O=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.15s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor=H.surfaceEl,onMouseLeave:re=>re.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:O.color||H.violet}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:O.name}),e.jsx("span",{style:{fontSize:"9px",color:H.tm},children:O.category})]}),e.jsx("button",{onClick:async()=>{try{await ae(`/api/skills/${O.id}/assign/${t}`,{method:"POST"}),_(re=>[...re,O]),w(re=>re.filter(_e=>_e.id!==O.id))}catch(re){console.error(re)}},style:{backgroundColor:H.violetM,color:H.violet,border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Add"})]},O.id)),j.filter(O=>!y.find(re=>re.id===O.id)).length===0&&e.jsx("div",{style:{padding:"30px",textAlign:"center",color:H.tm,fontSize:"12px"},children:"No more skills available"})]})]})})]})]}),I&&(()=>{const O=me?W.filter(De=>De.agent===t):W,re=(De,ct)=>{const ft=ct.title||`${De.name} v${ct.version}`;Me({project_id:De.id,iteration_id:ct.id,title:ft,description:""}),X({project:De,iteration:ct,title:ft})},_e=async()=>{!se.project_id||!se.iteration_id||await Mr()};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:H.surface,border:`1px solid ${H.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:H.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{D(!1),X(null)},style:{background:"none",border:"none",color:H.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:H.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>Se(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:me?H.violet:"transparent",color:me?"#fff":H.ts},children:["This Agent (",u.length,")"]}),e.jsxs("button",{onClick:()=>Se(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:me?"transparent":H.violet,color:me?H.ts:"#fff"},children:["All Projects (",W.length,")"]})]}),O.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:H.tm,fontSize:"14px"},children:["No projects found",me?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:O.map(De=>{const ct=F[De.id]||[];return ct.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ki,{size:14,style:{color:H.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:H.tp},children:De.name}),e.jsxs("span",{style:{fontSize:"11px",color:H.tm},children:[ct.length," version",ct.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:ct.map(ft=>{const At=(Ee==null?void 0:Ee.iteration.id)===ft.id;return e.jsxs("div",{onClick:()=>re(De,ft),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:At?`2px solid ${H.violet}`:`1px solid ${H.border}`,background:H.surfaceEl,transition:"all 0.2s",boxShadow:At?`0 0 20px ${H.violet}40`:"none"},onMouseEnter:nr=>{At||(nr.currentTarget.style.borderColor=H.violet)},onMouseLeave:nr=>{At||(nr.currentTarget.style.borderColor=H.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${De.id}/${ft.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${ft.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),At&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:H.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:H.tp,marginBottom:"2px"},children:ft.title||`Version ${ft.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:H.tm},children:["v",ft.version]})]})]},ft.id)})})]},De.id)})}),Ee&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:H.surfaceEl,border:`1px solid ${H.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:H.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:se.title,onChange:De=>Me({...se,title:De.target.value}),style:{width:"100%",background:H.surface,border:`1px solid ${H.border}`,borderRadius:"6px",padding:"10px",color:H.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>X(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:H.ts,border:`1px solid ${H.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:_e,disabled:!se.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:H.violet,color:"#fff",border:"none",opacity:se.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),Y&&e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.95)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"60px",borderBottom:`1px solid ${H.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Y.title}),e.jsxs("span",{style:{fontSize:"12px",color:H.tm,whiteSpace:"nowrap"},children:[Y.project_name," v",Y.iteration_version]})]}),e.jsx("button",{onClick:()=>M(null),style:{background:H.surfaceEl,border:"none",color:H.tp,width:"32px",height:"32px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(kt,{size:18})})]}),e.jsx("div",{style:{flex:1},children:e.jsx("iframe",{src:`/api/preview/${Y.project_id}/${Y.iteration_id}`,style:{width:"100%",height:"100%",border:"none"}})})]}),Z&&e.jsx(ap,{onClose:()=>{ke(!1),ae(`/api/agents/${t}`).then(o).catch(console.error)},initialAgent:{name:s.name,prompt:s.full_prompt||""}}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .agent-detail-breadcrumb { padding: 12px 16px !important; }
          .agent-detail-header { padding: 20px 16px !important; }
          .agent-detail-content { padding: 0 16px 16px !important; flex-direction: column; }
          .agent-detail-left, .agent-detail-right { width: 100% !important; min-width: 0 !important; }
          .agent-detail-actions button { padding: 6px 10px !important; font-size: 11px !important; }
        }
      `})]})}const Ce={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},b6=["Read","Write","Edit","Bash","Glob","Grep","WebFetch","WebSearch","Task"],_6=["sonnet","opus","haiku"],S6=["","default","plan","bypassPermissions"],mn={display:"block",fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},Kn={width:"100%",backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function Dm(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"}function w6(){const{name:t}=ts(),i=qt(),s=L.useRef(null),[o,u]=L.useState(!0),[S,b]=L.useState(!1),[l,c]=L.useState(!1),[m,v]=L.useState([]),[d,y]=L.useState(!1),[_,j]=L.useState(null),[w,h]=L.useState([]),[p,f]=L.useState([]),[g,C]=L.useState(!1),[R,z]=L.useState(""),[A,E]=L.useState({description:"",model:"sonnet",category:"uncategorized",full_prompt:"",tools:[],max_turns:0,memory:"",permission_mode:"",created_at:null,updated_at:null,project_count:0});L.useEffect(()=>{Promise.all([ae(`/api/agents/${t}`),ae("/api/categories"),ae(`/api/skills/agent/${t}`)]).then(([I,D,W])=>{const pe=I.tools?I.tools.split(",").map(me=>me.trim()).filter(Boolean):[];E({description:I.description||"",model:I.model||"sonnet",category:I.category||"uncategorized",full_prompt:I.full_prompt||"",tools:pe,max_turns:I.max_turns||0,memory:I.memory||"",permission_mode:I.permission_mode||"",created_at:I.created_at,updated_at:I.updated_at,project_count:I.project_count||0}),v(D||[]),h(W||[])}).catch(I=>{B("Error loading agent","danger")}).finally(()=>u(!1))},[t]);const B=(I,D="success")=>{j({message:I,type:D}),setTimeout(()=>j(null),3e3)},P=I=>{E(D=>({...D,tools:D.tools.includes(I)?D.tools.filter(W=>W!==I):[...D.tools,I]}))},N=L.useMemo(()=>{const I=(A.full_prompt||"").split(`
`).length;return Array.from({length:Math.max(I,1)},(D,W)=>W+1)},[A.full_prompt]),K=L.useMemo(()=>{const I=[];return A.description&&I.push(`description: "${A.description.replace(/"/g,'\\"')}"`),A.model&&I.push(`model: ${A.model}`),A.tools.length>0&&I.push(`tools: [${A.tools.join(", ")}]`),A.max_turns>0&&I.push(`max_turns: ${A.max_turns}`),A.memory&&I.push(`memory: "${A.memory.replace(/"/g,'\\"')}"`),A.permission_mode&&I.push(`permission_mode: ${A.permission_mode}`),(I.length>0?`---
${I.join(`
`)}
---

`:"")+(A.full_prompt||"")},[A]),U=async()=>{b(!0);try{await ae(`/api/agents/${t}`,{method:"PUT",body:JSON.stringify({description:A.description,model:A.model,category:A.category,full_prompt:A.full_prompt,tools:A.tools.join(", "),max_turns:A.max_turns,memory:A.memory,permission_mode:A.permission_mode})}),B("Agent saved successfully"),setTimeout(()=>i(`/agents/${t}`),800)}catch(I){B(I.message||"Failed to save","danger")}finally{b(!1)}},ee=async()=>{const I=window.prompt("Enter new agent name (kebab-case):",`${t}-copy`);if(I)try{await ae(`/api/agents/${t}/duplicate`,{method:"POST",body:JSON.stringify({new_name:I})}),B("Agent duplicated"),i(`/agents/${I}/edit`)}catch(D){B(D.message||"Duplicate failed","danger")}},V=async()=>{c(!0);try{const I=await ae("/api/agents/ai-generate",{method:"POST",body:JSON.stringify({purpose:A.description||"Improve this agent prompt",style:A.category,tools_needed:A.tools.join(", "),category:A.category,existing_prompt:A.full_prompt})});I.prompt&&(E(D=>({...D,full_prompt:I.prompt})),B("Prompt enhanced by AI"))}catch(I){B(I.message||"AI enhancement failed","danger")}finally{c(!1)}},de=async()=>{try{await ae(`/api/agents/${t}`,{method:"DELETE"}),i("/agents")}catch{B("Delete failed","danger"),y(!1)}},J=async()=>{try{const I=await ae("/api/skills");f(I||[]),z(""),C(!0)}catch{B("Failed to load skills","danger")}},Y=async I=>{try{await ae(`/api/skills/${I.id}/assign/${t}`,{method:"POST"}),h(D=>[...D,I]),B(`Skill "${I.name}" assigned`)}catch(D){B(D.message||"Assign failed","danger")}},M=async I=>{try{await ae(`/api/skills/${I.id}/unassign/${t}`,{method:"DELETE"}),h(D=>D.filter(W=>W.id!==I.id)),B(`Skill "${I.name}" removed`)}catch(D){B(D.message||"Unassign failed","danger")}};return o?e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ce.bg,color:Ce.tp,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:Ce.tm,fontSize:"13px"},children:"Loading agent..."})}):e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:Ce.bg,color:Ce.tp,paddingBottom:"80px"},children:[e.jsxs("div",{style:{padding:"16px 24px",display:"flex",alignItems:"center",gap:"12px",borderBottom:`1px solid ${Ce.border}`},children:[e.jsx(bi,{to:`/agents/${t}`,style:{color:Ce.tm,display:"flex",textDecoration:"none"},children:e.jsx(Qo,{size:18})}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"Agents"}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"/"}),e.jsx(bi,{to:`/agents/${t}`,style:{fontSize:"12px",color:Ce.ts,textDecoration:"none"},children:t}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tm},children:"/"}),e.jsx("span",{style:{fontSize:"12px",color:Ce.tp,fontWeight:600},children:"Edit"})]}),e.jsxs("div",{style:{display:"flex",padding:"24px",gap:"24px"},children:[e.jsxs("div",{style:{flex:"1 1 60%",display:"flex",flexDirection:"column",gap:"20px",minWidth:0},children:[e.jsxs("div",{children:[e.jsx("label",{style:mn,children:"Description"}),e.jsx("textarea",{style:{...Kn,resize:"vertical",minHeight:"70px"},value:A.description,placeholder:"What does this agent do?",onChange:I=>E(D=>({...D,description:I.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:mn,children:"Model"}),e.jsx("select",{style:Kn,value:A.model,onChange:I=>E(D=>({...D,model:I.target.value})),children:_6.map(I=>e.jsx("option",{value:I,children:I},I))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:mn,children:"Category"}),e.jsxs("select",{style:Kn,value:A.category,onChange:I=>E(D=>({...D,category:I.target.value})),children:[e.jsx("option",{value:"uncategorized",children:"uncategorized"}),m.map(I=>e.jsx("option",{value:I.name,children:I.name},I.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:mn,children:"Tools"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:b6.map(I=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",backgroundColor:A.tools.includes(I)?Ce.violetM:Ce.bg,border:`1px solid ${A.tools.includes(I)?Ce.violet:Ce.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:A.tools.includes(I)?Ce.violet:Ce.ts,transition:"all 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:A.tools.includes(I),onChange:()=>P(I),style:{display:"none"}}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"3px",flexShrink:0,border:`1.5px solid ${A.tools.includes(I)?Ce.violet:Ce.tm}`,backgroundColor:A.tools.includes(I)?Ce.violet:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:A.tools.includes(I)&&e.jsx(rr,{size:10,color:"#fff"})}),I]},I))})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{style:mn,children:"Max Turns"}),e.jsx("input",{type:"number",min:"0",max:"100",style:Kn,value:A.max_turns,onChange:I=>E(D=>({...D,max_turns:parseInt(I.target.value)||0}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:mn,children:"Permission Mode"}),e.jsx("select",{style:Kn,value:A.permission_mode,onChange:I=>E(D=>({...D,permission_mode:I.target.value})),children:S6.map(I=>e.jsx("option",{value:I,children:I||"(none)"},I))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:mn,children:"Memory"}),e.jsx("input",{style:Kn,value:A.memory,placeholder:"Optional...",onChange:I=>E(D=>({...D,memory:I.target.value}))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"6px"},children:[e.jsx("label",{style:{...mn,marginBottom:0},children:"System Prompt"}),e.jsxs("span",{style:{fontSize:"11px",color:Ce.tm,fontFamily:Ce.mono},children:[A.full_prompt.length," chars / ",N.length," lines"]})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:Ce.bg,border:`1px solid ${Ce.borderS}`,borderRadius:"8px",minHeight:"500px",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px 8px 16px 12px",borderRight:`1px solid ${Ce.border}`,userSelect:"none",flexShrink:0,backgroundColor:Ce.surface},children:N.map(I=>e.jsx("div",{style:{fontSize:"11px",fontFamily:Ce.mono,color:"rgba(255,255,255,0.15)",lineHeight:"20px",textAlign:"right"},children:I},I))}),e.jsx("textarea",{ref:s,value:A.full_prompt,onChange:I=>E(D=>({...D,full_prompt:I.target.value})),spellCheck:"false",style:{flex:1,background:"transparent",border:"none",outline:"none",color:Ce.tp,fontSize:"13px",lineHeight:"20px",padding:"16px",resize:"none",fontFamily:Ce.mono,width:"100%"},placeholder:"Write the agent instructions here..."})]})]})]}),e.jsxs("div",{style:{flex:"0 0 380px",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ol,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Live Preview"})]}),e.jsxs("div",{style:{backgroundColor:Ce.surface,borderRadius:"8px",border:`1px solid ${Ce.borderS}`,padding:"16px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:`radial-gradient(circle at top right, ${Ce.violetG}, transparent)`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:600,textTransform:"uppercase",backgroundColor:Ce.violetM,color:Ce.violet},children:A.category}),e.jsx("span",{style:{fontSize:"10px",color:Ce.tm,fontFamily:Ce.mono,fontWeight:600},children:A.model})]}),e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,margin:"0 0 6px 0"},children:t.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),e.jsx("p",{style:{fontSize:"12px",color:Ce.ts,lineHeight:"1.5",margin:"0 0 10px 0"},children:A.description||"[No description]"}),e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[A.tools.slice(0,5).map(I=>e.jsx("span",{style:{fontSize:"10px",backgroundColor:Ce.surfaceEl,padding:"2px 6px",borderRadius:"4px",border:`1px solid ${Ce.border}`,color:Ce.tm},children:I},I)),A.tools.length>5&&e.jsxs("span",{style:{fontSize:"10px",color:Ce.tm},children:["+",A.tools.length-5]})]})]})]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(KS,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Stats"})]}),[{icon:e.jsx(Zo,{size:12,color:Ce.tm}),label:"Created",value:Dm(A.created_at)},{icon:e.jsx(es,{size:12,color:Ce.tm}),label:"Updated",value:Dm(A.updated_at)},{icon:e.jsx(Ol,{size:12,color:Ce.tm}),label:"Projects",value:`${A.project_count}`}].map((I,D)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:D<2?`1px solid ${Ce.border}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[I.icon,e.jsx("span",{style:{fontSize:"12px",color:Ce.ts},children:I.label})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:Ce.mono,color:Ce.tp},children:I.value})]},D))]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Yr,{size:14,color:Ce.violet}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Skills (",w.length,")"]})]}),e.jsxs("button",{onClick:J,style:{background:"none",border:"none",color:Ce.violet,cursor:"pointer",fontSize:"11px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ir,{size:12})," Add"]})]}),w.length===0?e.jsx("div",{style:{padding:"16px",textAlign:"center",color:Ce.tm,fontSize:"11px",border:`1px dashed ${Ce.border}`,borderRadius:"6px"},children:"No skills assigned. Skills inject context into workspace CLAUDE.md when running projects."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:w.map(I=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:Ce.surface,borderRadius:"6px",border:`1px solid ${Ce.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:I.color||Ce.violet,flexShrink:0}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.name}),I.total_files>0&&e.jsxs("span",{style:{fontSize:"9px",color:Ce.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 5px",borderRadius:"100px"},children:[I.total_files," files"]})]}),e.jsx("button",{onClick:()=>M(I),style:{background:"none",border:"none",color:Ce.tm,cursor:"pointer",padding:"2px",display:"flex"},title:"Remove skill",children:e.jsx(kt,{size:12})})]},I.id))})]}),e.jsxs("div",{style:{backgroundColor:Ce.bg,border:`1px solid ${Ce.border}`,borderRadius:"12px",padding:"20px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Hs,{size:14,color:Ce.violet}),e.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:Ce.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Generated .md"})]}),e.jsx("pre",{style:{backgroundColor:"#0a0a0a",border:`1px solid ${Ce.borderS}`,borderRadius:"8px",padding:"16px",fontSize:"11px",color:Ce.ts,fontFamily:Ce.mono,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",lineHeight:"1.6",margin:0},children:K||"# Empty agent file"})]})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:100,backgroundColor:Ce.bg,borderTop:`1px solid ${Ce.borderS}`,padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>y(!0),style:{backgroundColor:"transparent",color:Ce.danger,border:"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Hr,{size:14}),"Delete"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:V,disabled:l,style:{backgroundColor:Ce.violetM,color:Ce.violet,border:`1px solid ${Ce.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:l?.6:1},children:[e.jsx(Ft,{size:14}),l?"Enhancing...":"AI Enhance"]}),e.jsxs("button",{onClick:ee,style:{backgroundColor:Ce.surfaceEl,color:Ce.ts,border:`1px solid ${Ce.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Rl,{size:14}),"Duplicate"]}),e.jsxs("button",{onClick:U,disabled:S,style:{backgroundColor:Ce.tp,color:Ce.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:S?.6:1},children:[e.jsx(Zl,{size:14}),S?"Saving...":"Save Changes"]})]})]}),_&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:_.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${_.type==="danger"?Ce.danger:Ce.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[_.type==="danger"?e.jsx(Ai,{size:14,color:Ce.danger}):e.jsx(rr,{size:14,color:Ce.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ce.tp},children:_.message})]}),g&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:()=>C(!1),children:e.jsxs("div",{style:{width:"420px",backgroundColor:Ce.surface,border:`1px solid ${Ce.borderS}`,borderRadius:"12px",overflow:"hidden"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{padding:"14px 20px",borderBottom:`1px solid ${Ce.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:["Add Skills to ",t]}),e.jsx("button",{onClick:()=>C(!1),style:{background:"none",border:"none",color:Ce.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:16})})]}),e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${Ce.border}`},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ps,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:Ce.tm}}),e.jsx("input",{style:{...Kn,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search skills...",value:R,onChange:I=>z(I.target.value),autoFocus:!0})]})}),e.jsxs("div",{style:{maxHeight:"320px",overflowY:"auto"},children:[p.filter(I=>!w.find(D=>D.id===I.id)).filter(I=>!R||I.name.toLowerCase().includes(R.toLowerCase())||(I.category||"").toLowerCase().includes(R.toLowerCase())).map(I=>e.jsxs("div",{onClick:()=>Y(I),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",borderBottom:`1px solid ${Ce.border}`,cursor:"pointer",transition:"background 0.1s"},onMouseEnter:D=>D.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)",onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:I.color||Ce.violet,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500},children:I.name}),I.description&&e.jsx("div",{style:{fontSize:"10px",color:Ce.tm,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.description})]}),I.category&&e.jsx("span",{style:{fontSize:"9px",color:I.color||Ce.violet,backgroundColor:`${I.color||Ce.violet}15`,padding:"2px 6px",borderRadius:"100px",flexShrink:0},children:I.category})]},I.id)),p.filter(I=>!w.find(D=>D.id===I.id)).length===0&&e.jsx("div",{style:{padding:"24px",textAlign:"center",color:Ce.tm,fontSize:"12px"},children:"No more skills available"})]})]})}),d&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"400px",backgroundColor:Ce.surface,border:`1px solid ${Ce.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:"0 0 8px 0"},children:"Delete Agent?"}),e.jsxs("p",{style:{fontSize:"13px",color:Ce.ts,lineHeight:"1.5",margin:"0 0 20px 0"},children:["This will permanently delete ",e.jsx("strong",{style:{color:Ce.tp},children:t})," and cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>y(!1),style:{backgroundColor:Ce.surfaceEl,color:Ce.ts,border:`1px solid ${Ce.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:de,style:{backgroundColor:Ce.danger,color:"#fff",border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})})]})}const Ut={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",tm:"#52525B",mono:'"JetBrains Mono","Fira Code",monospace'},Mm={completed:{color:"#22c55e",bg:"rgba(34,197,94,0.1)"},failed:{color:"#ef4444",bg:"rgba(239,68,68,0.1)"},running:{color:"#8B5CF6",bg:"rgba(139,92,246,0.2)"},pending:{color:"#A1A1AA",bg:"rgba(255,255,255,0.05)"}},Bm={info:"#A1A1AA",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"};function C6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--"}function k6(t){return t?new Date(typeof t=="number"?t*1e3:t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"--"}function j6({teamId:t,members:i}){const[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState({}),[c,m]=L.useState(!1),[v,d]=L.useState(!0),y=L.useRef(null),_=async()=>{try{const h=await ae(`/api/agent-teams/${t}/runs`);o(h.runs||[])}catch(h){console.error("Failed to fetch runs",h)}finally{d(!1)}},j=async h=>{try{const p=await ae(`/api/agent-teams/${t}/runs/${h}`);l(f=>({...f,[h]:p.logs||[]}))}catch(p){console.error("Failed to fetch logs",p)}},w=async()=>{m(!0);try{const h=await ae(`/api/agent-teams/${t}/runs`,{method:"POST",body:JSON.stringify({config:{initiated_by:"user_ui"}})});await ae(`/api/agent-teams/${t}/runs/${h.id}/start`,{method:"POST"}),await _(),S(h.id)}catch(h){console.error("Failed to start run",h)}finally{m(!1)}};return L.useEffect(()=>{_();const h=setInterval(_,5e3);return()=>clearInterval(h)},[t]),L.useEffect(()=>{let h;return u&&(j(u),h=setInterval(()=>j(u),2e3)),()=>{h&&clearInterval(h)}},[u]),L.useEffect(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})},[b,u]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",borderBottom:`1px solid ${Ut.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I0,{size:16,color:Ut.violet}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Ut.tp},children:"Team Runs"}),e.jsx("span",{style:{fontSize:"11px",color:Ut.tm,backgroundColor:Ut.surfaceEl,padding:"2px 6px",borderRadius:"4px"},children:s.length})]}),e.jsxs("button",{onClick:w,disabled:c,style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:Ut.violet,color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:c?"not-allowed":"pointer",opacity:c?.7:1},children:[c?e.jsx(bn,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx(Ql,{size:14,fill:"currentColor"}),"New Run"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.length===0&&!v?e.jsx("div",{style:{padding:"32px",textAlign:"center",border:`1px dashed ${Ut.border}`,borderRadius:"8px",color:Ut.tm,fontSize:"12px"},children:'No runs yet. Click "New Run" to start.'}):s.map(h=>{const p=u===h.id,f=Mm[h.status]||Mm.pending;return e.jsxs("div",{style:{backgroundColor:Ut.surface,border:`1px solid ${p?Ut.violetM:Ut.border}`,borderRadius:"8px",overflow:"hidden",transition:"border-color 0.2s"},children:[e.jsxs("div",{onClick:()=>S(p?null:h.id),style:{padding:"10px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[p?e.jsx(Rn,{size:14,color:Ut.tm}):e.jsx(hr,{size:14,color:Ut.tm}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{fontSize:"12px",fontWeight:500,color:Ut.tp,fontFamily:Ut.mono},children:["run_",h.id.split("-")[0]]}),e.jsx("span",{style:{fontSize:"10px",color:Ut.tm},children:k6(h.created_at)})]})]}),e.jsxs("div",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",padding:"2px 8px",borderRadius:"100px",backgroundColor:f.bg,color:f.color,display:"flex",alignItems:"center",gap:"4px"},children:[h.status==="running"&&e.jsx(bn,{size:10,style:{animation:"spin 1s linear infinite"}}),h.status==="completed"&&e.jsx(lS,{size:10}),h.status==="failed"&&e.jsx(dS,{size:10}),h.status==="pending"&&e.jsx(Zo,{size:10}),h.status]})]}),p&&e.jsx("div",{style:{backgroundColor:Ut.bg,borderTop:`1px solid ${Ut.border}`,maxHeight:"400px",overflowY:"auto",padding:"12px",fontFamily:Ut.mono,fontSize:"11px",lineHeight:"1.6"},children:!b[h.id]||b[h.id].length===0?e.jsx("div",{style:{color:Ut.tm,fontStyle:"italic",padding:"8px"},children:"Waiting for logs..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[b[h.id].map((g,C)=>e.jsxs("div",{style:{display:"flex",gap:"12px",whiteSpace:"pre-wrap"},children:[e.jsxs("span",{style:{color:Ut.tm,flexShrink:0,width:"70px"},children:["[",C6(g.created_at),"]"]}),e.jsx("span",{style:{color:Ut.violet,fontWeight:600,flexShrink:0,minWidth:"80px"},children:g.agent_name||"system"}),e.jsx("span",{style:{color:Bm[g.log_type]||Bm.info},children:g.message})]},g.id||C)),e.jsx("div",{ref:y})]})})]},h.id)})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})}const Ve={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},vu={width:"100%",backgroundColor:Ve.bg,border:`1px solid ${Ve.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"},Pm={leader:{bg:"rgba(245,158,11,0.1)",color:Ve.warning,icon:ec},member:{bg:"rgba(255,255,255,0.04)",color:Ve.tm,icon:qi}};function E6(){var de;qt();const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(!1),[b,l]=L.useState(null),[c,m]=L.useState(null),[v,d]=L.useState([]),[y,_]=L.useState(""),[j,w]=L.useState(null),[h,p]=L.useState({name:"",description:""}),[f,g]=L.useState(!1),[C,R]=L.useState(null),z=(J,Y="success")=>{w({message:J,type:Y}),setTimeout(()=>w(null),3e3)},A=L.useCallback(async()=>{try{const J=await ae("/api/agent-teams");i(J)}catch{z("Failed to load teams","danger")}finally{o(!1)}},[]);L.useEffect(()=>{A(),ae("/api/agents").then(d).catch(()=>{})},[A]);const E=async()=>{if(h.name.trim()){g(!0);try{await ae("/api/agent-teams",{method:"POST",body:JSON.stringify(h)}),S(!1),p({name:"",description:""}),z("Team created"),A()}catch(J){z(J.message||"Failed to create team","danger")}finally{g(!1)}}},B=async J=>{try{await ae(`/api/agent-teams/${J}`,{method:"DELETE"}),z("Team deleted"),R(null),b===J&&(l(null),m(null)),A()}catch{z("Failed to delete team","danger")}},P=async J=>{if(b===J){l(null),m(null);return}l(J);try{const Y=await ae(`/api/agent-teams/${J}`);m(Y)}catch{z("Failed to load team details","danger")}},N=async J=>{if(b)try{await ae(`/api/agent-teams/${b}/members`,{method:"POST",body:JSON.stringify({agent_name:J,role:"member"})}),_("");const Y=await ae(`/api/agent-teams/${b}`);m(Y),A()}catch(Y){z(Y.message||"Failed to add member","danger")}},K=async J=>{if(b)try{await ae(`/api/agent-teams/${b}/members/${J}`,{method:"DELETE"});const Y=await ae(`/api/agent-teams/${b}`);m(Y),A()}catch{z("Failed to remove member","danger")}},U=async(J,Y)=>{if(!b)return;const M=Y==="leader"?"member":"leader";try{await ae(`/api/agent-teams/${b}/members/${J}`,{method:"PUT",body:JSON.stringify({role:M})});const I=await ae(`/api/agent-teams/${b}`);m(I)}catch{z("Failed to update role","danger")}},ee=((de=c==null?void 0:c.members)==null?void 0:de.map(J=>J.agent_name))||[],V=v.filter(J=>!ee.includes(J.name)&&(J.name.includes(y.toLowerCase())||(J.description||"").toLowerCase().includes(y.toLowerCase())));return e.jsxs("div",{style:{minHeight:"calc(100vh - 53px)",backgroundColor:Ve.bg,color:Ve.tp},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:`1px solid ${Ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"20px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ls,{size:20,color:Ve.violet}),"Agent Teams"]}),e.jsx("p",{style:{fontSize:"13px",color:Ve.ts,margin:0},children:"Compose teams of agents for complex tasks"})]}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ve.tp,color:Ve.bg,border:"none",padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:14}),"Create Team"]})]}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px"},children:s?e.jsx("div",{style:{textAlign:"center",padding:"60px",color:Ve.tm},children:"Loading teams..."}):t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",border:`1px dashed ${Ve.borderS}`,borderRadius:"12px",color:Ve.tm},children:[e.jsx(Ls,{size:40,color:Ve.tm,style:{marginBottom:"12px"}}),e.jsx("p",{style:{fontSize:"14px",margin:"0 0 4px 0"},children:"No teams yet"}),e.jsx("p",{style:{fontSize:"12px",margin:"0 0 16px 0"},children:"Create your first agent team to compose powerful workflows"}),e.jsxs("button",{onClick:()=>S(!0),style:{backgroundColor:Ve.violetM,color:Ve.violet,border:`1px solid ${Ve.violet}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:[e.jsx(ir,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),"Create Team"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(J=>{var Y;return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:Ve.surface,border:`1px solid ${b===J.id?Ve.violet:Ve.border}`,borderRadius:b===J.id?"12px 12px 0 0":"12px",padding:"16px 20px",cursor:"pointer",transition:"border-color 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>P(J.id),onMouseEnter:M=>{b!==J.id&&(M.currentTarget.style.borderColor=Ve.borderS)},onMouseLeave:M=>{b!==J.id&&(M.currentTarget.style.borderColor=Ve.border)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b===J.id?e.jsx(Rn,{size:16,color:Ve.violet}):e.jsx(hr,{size:16,color:Ve.tm}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,margin:0},children:J.name}),e.jsxs("span",{style:{fontSize:"10px",fontWeight:600,backgroundColor:Ve.violetM,color:Ve.violet,padding:"2px 8px",borderRadius:"100px"},children:[J.member_count||0," agents"]})]}),J.description&&e.jsx("p",{style:{fontSize:"12px",color:Ve.ts,margin:"4px 0 0 0"},children:J.description})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},onClick:M=>M.stopPropagation(),children:[e.jsx("div",{style:{display:"flex",marginRight:"8px"},children:(J.member_names||"").split(",").filter(Boolean).slice(0,4).map((M,I)=>e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:`hsl(${M.charCodeAt(0)*7%360}, 50%, 35%)`,border:`2px solid ${Ve.surface}`,marginLeft:I>0?"-6px":"0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:700,color:"#fff"},children:M.charAt(0).toUpperCase()},I))}),C===J.id?e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>B(J.id),style:{backgroundColor:Ve.danger,color:"#fff",border:"none",padding:"4px 10px",fontSize:"11px",fontWeight:700,borderRadius:"4px",cursor:"pointer"},children:"Delete"}),e.jsx("button",{onClick:()=>R(null),style:{backgroundColor:Ve.surfaceEl,color:Ve.ts,border:`1px solid ${Ve.borderS}`,padding:"4px 10px",fontSize:"11px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]}):e.jsx("button",{onClick:()=>R(J.id),style:{backgroundColor:"transparent",color:Ve.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(Hr,{size:14})})]})]}),b===J.id&&c&&e.jsxs("div",{style:{backgroundColor:Ve.bg,border:`1px solid ${Ve.violet}`,borderTop:"none",borderRadius:"0 0 12px 12px",padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 10px 0"},children:["Members (",((Y=c.members)==null?void 0:Y.length)||0,")"]}),c.members&&c.members.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:c.members.map(M=>{const I=Pm[M.role]||Pm.member,D=I.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",backgroundColor:Ve.surface,borderRadius:"8px",border:`1px solid ${Ve.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx($S,{size:14,color:Ve.tm,style:{cursor:"grab"}}),e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:`hsl(${M.agent_name.charCodeAt(0)*7%360}, 50%, 35%)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:700,color:"#fff"},children:M.agent_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:M.agent_name.replace(/-/g," ").replace(/\b\w/g,W=>W.toUpperCase())}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"2px"},children:[M.category&&e.jsx("span",{style:{fontSize:"10px",color:Ve.tm,backgroundColor:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"4px"},children:M.category}),M.model&&e.jsx("span",{style:{fontSize:"10px",color:Ve.tm,fontFamily:Ve.mono},children:M.model})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("button",{onClick:()=>U(M.agent_name,M.role),style:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:I.bg,color:I.color,border:"none",padding:"4px 10px",fontSize:"10px",fontWeight:600,borderRadius:"100px",cursor:"pointer",textTransform:"uppercase"},children:[e.jsx(D,{size:10}),M.role]}),e.jsx("button",{onClick:()=>K(M.agent_name),style:{backgroundColor:"transparent",color:Ve.tm,border:"none",cursor:"pointer",padding:"4px",display:"flex"},children:e.jsx(kt,{size:14})})]})]},M.agent_name)})}):e.jsx("p",{style:{fontSize:"12px",color:Ve.tm,padding:"12px",textAlign:"center",border:`1px dashed ${Ve.border}`,borderRadius:"8px"},children:"No members yet. Add agents below."})]}),e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(j6,{teamId:J.id,members:c.members||[]})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px 0"},children:"Add Agent"}),e.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[e.jsx(Ps,{size:14,color:Ve.tm,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("input",{value:y,onChange:M=>_(M.target.value),placeholder:"Search agents...",style:{...vu,paddingLeft:"34px"}})]}),y&&e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",backgroundColor:Ve.surface,border:`1px solid ${Ve.border}`,borderRadius:"8px"},children:V.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:Ve.tm,fontSize:"12px"},children:"No matching agents"}):V.slice(0,10).map(M=>e.jsxs("div",{onClick:()=>N(M.name),style:{padding:"10px 12px",cursor:"pointer",borderBottom:`1px solid ${Ve.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background 0.15s"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=Ve.surfaceEl,onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ve.tp},children:M.name.replace(/-/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),e.jsx("p",{style:{fontSize:"11px",color:Ve.tm,margin:"2px 0 0 0"},children:(M.description||"").substring(0,80)})]}),e.jsx(ir,{size:14,color:Ve.violet})]},M.name))})]})]})]},J.id)})})}),u&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{width:"440px",backgroundColor:Ve.surface,border:`1px solid ${Ve.borderS}`,borderRadius:"12px",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:0},children:"Create Team"}),e.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",color:Ve.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Team Name"}),e.jsx("input",{style:vu,value:h.name,placeholder:"e.g. Landing Page Team",onChange:J=>p(Y=>({...Y,name:J.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:Ve.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Description"}),e.jsx("textarea",{style:{...vu,minHeight:"80px",resize:"vertical"},value:h.description,placeholder:"What is this team for?",onChange:J=>p(Y=>({...Y,description:J.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"6px"},children:[e.jsx("button",{onClick:()=>S(!1),style:{backgroundColor:Ve.surfaceEl,color:Ve.ts,border:`1px solid ${Ve.borderS}`,padding:"8px 16px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f||!h.name.trim(),style:{backgroundColor:Ve.tp,color:Ve.bg,border:"none",padding:"8px 20px",fontSize:"12px",fontWeight:600,borderRadius:"4px",cursor:"pointer",opacity:f||!h.name.trim()?.5:1},children:f?"Creating...":"Create Team"})]})]})]})}),j&&e.jsxs("div",{style:{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:j.type==="danger"?"rgba(239,68,68,0.15)":"rgba(34,197,94,0.15)",border:`1px solid ${j.type==="danger"?Ve.danger:Ve.success}`,padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[j.type==="danger"?e.jsx(Ai,{size:14,color:Ve.danger}):e.jsx(rr,{size:14,color:Ve.success}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ve.tp},children:j.message})]})]})}const Ye={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",mono:'"JetBrains Mono","Fira Code",monospace'};function bl({icon:t,label:i,value:s,subtext:o,color:u=Ye.violet}){return e.jsxs("div",{style:{backgroundColor:Ye.surface,border:`1px solid ${Ye.border}`,borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"8px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-10px",right:"-10px",opacity:.05},children:e.jsx(t,{size:80,color:u})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:`${u}15`,color:u,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(t,{size:14})}),e.jsx("span",{style:{color:Ye.ts,fontSize:"12px",fontWeight:500},children:i})]}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"6px"},children:[e.jsx("span",{style:{color:Ye.tp,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:s}),o&&e.jsx("span",{style:{color:Ye.tm,fontSize:"11px"},children:o})]})]})}function _l({children:t,icon:i}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[i&&e.jsx(i,{size:14,style:{color:Ye.violet}}),e.jsx("h2",{style:{color:Ye.tp,fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:t})]})}function R6(){var v,d,y,_,j,w,h;const[t,i]=L.useState(null),[s,o]=L.useState([]),[u,S]=L.useState(!0),b=qt();if(L.useEffect(()=>{(async()=>{try{const[f,g]=await Promise.all([ae("/api/agents/stats"),ae("/api/agents")]);i(f);const C=[...g||[]].sort((R,z)=>(z.rating||0)-(R.rating||0)).slice(0,5);o(C)}catch(f){console.error("Error fetching dashboard data",f)}finally{S(!1)}})()},[]),u)return e.jsx("div",{style:{height:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Ye.bg,color:Ye.ts},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx(S0,{size:24,style:{color:Ye.violet}}),e.jsx("span",{style:{fontSize:"13px",letterSpacing:"0.05em"},children:"ANALYZING AGENT DATA..."})]})});const l=((v=t==null?void 0:t.bySource)==null?void 0:v.reduce((p,f)=>p+f.count,0))||1,c=((y=(d=t==null?void 0:t.bySource)==null?void 0:d.find(p=>p.source==="filesystem"))==null?void 0:y.count)||0,m=Math.round(c/l*100);return e.jsx("div",{style:{height:"calc(100vh - 53px)",backgroundColor:Ye.bg,padding:"24px",overflowY:"auto"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:Ye.tp,fontSize:"20px",fontWeight:600,margin:"0 0 4px 0"},children:"Agent Statistics"}),e.jsx("p",{style:{color:Ye.ts,fontSize:"13px",margin:0},children:"System-wide metrics and distribution for all agents."})]}),e.jsxs("div",{style:{padding:"6px 12px",borderRadius:"4px",border:`1px solid ${Ye.border}`,color:Ye.ts,fontSize:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Ye.success}}),"Live"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"16px",marginBottom:"32px"},children:[e.jsx(bl,{icon:Ls,label:"Total Agents",value:(t==null?void 0:t.total)||0,subtext:"deployed"}),e.jsx(bl,{icon:En,label:"Avg Rating",value:`${((t==null?void 0:t.avgRating)||0).toFixed(1)}/5.0`,color:Ye.warning,subtext:"user feedback"}),e.jsx(bl,{icon:Bs,label:"Total Projects",value:(t==null?void 0:t.totalProjects)||0,subtext:"active"}),e.jsx(bl,{icon:Yw,label:"Categories",value:((_=t==null?void 0:t.byCategory)==null?void 0:_.length)||0,color:Ye.success,subtext:"organized"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{backgroundColor:Ye.surface,border:`1px solid ${Ye.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(_l,{icon:Ch,children:"Agent Distribution by Category"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(j=t==null?void 0:t.byCategory)==null?void 0:j.map((p,f)=>{const g=t.total>0?p.count/t.total*100:0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[e.jsx("span",{style:{color:Ye.ts,textTransform:"capitalize"},children:p.category}),e.jsxs("span",{style:{color:Ye.tp,fontWeight:500},children:[p.count," ",e.jsxs("span",{style:{color:Ye.tm,fontSize:"10px"},children:["(",g.toFixed(0),"%)"]})]})]}),e.jsx("div",{style:{height:"6px",width:"100%",backgroundColor:Ye.surfaceEl,borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${g}%`,backgroundColor:Ye.violet,boxShadow:`0 0 10px ${Ye.violetG}`,borderRadius:"3px"}})})]},f)})})]}),e.jsxs("div",{style:{backgroundColor:Ye.surface,border:`1px solid ${Ye.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsx(_l,{icon:Z2,children:"Source Analysis"}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 0"},children:e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${Ye.violet} 0% ${m}%, ${Ye.surfaceEl} ${m}% 100%)`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:Ye.surface,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(mS,{size:16,style:{color:Ye.tm,marginBottom:"2px"}}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:Ye.tp},children:(t==null?void 0:t.total)||0})]})})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"16px"},children:(w=t==null?void 0:t.bySource)==null?void 0:w.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",borderRadius:"6px",backgroundColor:Ye.surfaceEl},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.source==="filesystem"?e.jsx(Bu,{size:12,color:Ye.violet}):e.jsx(zs,{size:12,color:Ye.ts}),e.jsx("span",{style:{fontSize:"11px",color:Ye.ts,textTransform:"capitalize"},children:p.source})]}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:Ye.tp},children:[p.count," agents"]})]},f))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px"},children:[e.jsxs("div",{style:{backgroundColor:Ye.surface,border:`1px solid ${Ye.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(_l,{icon:es,children:"Model Usage"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:(h=t==null?void 0:t.byModel)==null?void 0:h.map((p,f)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",borderBottom:f!==t.byModel.length-1?`1px solid ${Ye.border}`:"none"},children:[e.jsx("span",{style:{fontSize:"12px",color:Ye.tp,fontFamily:Ye.mono},children:p.model}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Ye.violet},children:p.count})]},f))})]}),e.jsxs("div",{style:{backgroundColor:Ye.surface,border:`1px solid ${Ye.border}`,borderRadius:"12px",padding:"20px"},children:[e.jsx(_l,{icon:En,children:"Top Rated Agents"}),e.jsx("div",{style:{width:"100%",overflow:"hidden"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",padding:"12px 8px",borderBottom:`1px solid ${Ye.border}`},children:[e.jsx("span",{style:{flex:2,fontSize:"11px",color:Ye.tm,textTransform:"uppercase"},children:"Agent"}),e.jsx("span",{style:{flex:1,fontSize:"11px",color:Ye.tm,textTransform:"uppercase"},children:"Category"}),e.jsx("span",{style:{width:"80px",fontSize:"11px",color:Ye.tm,textTransform:"uppercase",textAlign:"right"},children:"Rating"}),e.jsx("span",{style:{width:"30px"}})]}),s.map((p,f)=>e.jsxs("div",{onClick:()=>b(`/agents/${p.name}`),style:{display:"flex",alignItems:"center",padding:"12px 8px",cursor:"pointer",borderBottom:f!==s.length-1?`1px solid ${Ye.border}`:"none",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:g=>g.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{flex:2,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",backgroundColor:Ye.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",color:Ye.violet,fontSize:"12px",fontWeight:"bold"},children:p.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:Ye.tp},children:p.name.replace(/-/g," ").replace(/\b\w/g,g=>g.toUpperCase())}),e.jsx("div",{style:{fontSize:"10px",color:Ye.tm,fontFamily:Ye.mono},children:p.model||"unknown"})]})]}),e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",backgroundColor:Ye.violetM,color:Ye.violet},children:p.category})}),e.jsxs("div",{style:{width:"80px",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px"},children:[e.jsx(En,{size:10,fill:Ye.warning,color:Ye.warning}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:Ye.tp},children:p.rating||0})]}),e.jsx("div",{style:{width:"30px",textAlign:"right"},children:e.jsx(hr,{size:14,color:Ye.tm})})]},p.name))]})}),e.jsx(bi,{to:"/agents",style:{display:"block",textAlign:"center",marginTop:"16px",fontSize:"11px",color:Ye.ts,textDecoration:"none",padding:"8px",borderRadius:"6px",border:`1px dashed ${Ye.border}`},children:"View all agents"})]})]})]})})}const Ae={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B"};function b1({node:t,level:i=0,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:b=!1}){const l=(s==null?void 0:s.id)===t.id,[c,m]=L.useState(!1),[v,d]=L.useState(!1),y=t.children&&t.children.length>0,_=i===0;return e.jsxs("div",{style:{position:"relative"},children:[!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:0,width:"1px",height:b?"16px":"100%",background:"rgba(139,92,246,0.15)"}}),!_&&e.jsx("div",{style:{position:"absolute",left:`${(i-1)*20+9}px`,top:"16px",width:"11px",height:"1px",background:"rgba(139,92,246,0.15)"}}),e.jsx("div",{style:{marginLeft:`${i*20}px`},children:e.jsxs("div",{onClick:()=>o(t),onContextMenu:j=>{j.preventDefault(),u({x:j.clientX,y:j.clientY,node:t})},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),style:{padding:"4px 8px",margin:"1px 0",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",background:l?"rgba(139,92,246,0.12)":c?"rgba(255,255,255,0.03)":"transparent",border:l?"1px solid rgba(139,92,246,0.3)":"1px solid transparent",transition:"all 0.15s"},children:[y?e.jsx("span",{onClick:j=>{j.stopPropagation(),d(!v)},style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",borderRadius:"3px",background:c?"rgba(255,255,255,0.06)":"transparent"},children:e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:Ae.tm,strokeWidth:"1.5",children:v?e.jsx("polyline",{points:"3,1 7,5 3,9"}):e.jsx("polyline",{points:"1,3 5,7 9,3"})})}):e.jsx("span",{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{width:"5px",height:"5px",borderRadius:"50%",background:l?Ae.violet:"rgba(255,255,255,0.15)"}})}),e.jsx("span",{style:{color:l?Ae.tp:Ae.ts,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:_?"500":"400"},children:t.title||`V${t.version}`}),c&&e.jsx("span",{onClick:j=>{j.stopPropagation(),S(t)},title:`Branch from ${t.title||"V"+t.version}`,style:{width:"16px",height:"16px",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"rgba(139,92,246,0.15)",color:Ae.violet,fontSize:"12px",fontWeight:"700",lineHeight:1,flexShrink:0},children:"+"}),e.jsx("span",{style:{background:_?Ae.violetM:"rgba(255,255,255,0.05)",color:_?Ae.violet:Ae.tm,padding:"1px 5px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",whiteSpace:"nowrap",maxWidth:"70px",overflow:"hidden",textOverflow:"ellipsis"},children:(t.agent_name||"").split("-").slice(0,2).join("-")}),y&&v&&e.jsx("span",{style:{background:"rgba(255,255,255,0.06)",color:Ae.tm,padding:"0 4px",borderRadius:"3px",fontSize:"9px",fontWeight:"600"},children:t.children.length})]})}),y&&!v&&e.jsx("div",{children:t.children.map((j,w)=>e.jsx(b1,{node:j,level:i+1,selected:s,onSelect:o,onContext:u,onBranch:S,isLast:w===t.children.length-1},j.id))})]})}function T6({allIterations:t,selected:i,onSelect:s,projectId:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:d,scrollWidth:y,clientWidth:_}=u.current;b(d>10),c(d<y-_-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=d=>{u.current&&u.current.scrollBy({left:d==="left"?-400:400,behavior:"smooth"})};return!t||t.length===0?null:e.jsxs("div",{style:{position:"relative",height:"140px",width:"100%",backgroundColor:Ae.bg,borderTop:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",boxSizing:"border-box",flexShrink:0},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(Qo,{size:18})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"16px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"8px 0",height:"100%",alignItems:"center",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",flex:1},children:t.map(d=>{const y=(i==null?void 0:i.id)===d.id;return e.jsxs("div",{onClick:()=>s(d),style:{flex:"0 0 160px",display:"flex",flexDirection:"column",gap:"4px",cursor:"pointer",transition:"transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{width:"160px",height:"90px",borderRadius:"8px",backgroundColor:Ae.surface,border:y?`2px solid ${Ae.violet}`:`1px solid ${Ae.border}`,boxShadow:y?`0 0 12px ${Ae.violetG}`:"none",overflow:"hidden",position:"relative",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},children:[e.jsx("div",{style:{width:"1280px",height:"720px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none",backgroundColor:Ae.surface},children:e.jsx("iframe",{src:`/api/preview/${o}/${d.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${d.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),y&&e.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Ae.violet}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:y?Ae.tp:Ae.ts},children:d.title||`V${d.version}`}),e.jsx("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",backgroundColor:Ae.surfaceEl,border:`1px solid ${Ae.border}`,color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.02em",maxWidth:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d.agent_name||"").split("-").slice(0,2).join("-")})]})]},d.id)})}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"8px",zIndex:10,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",transition:"transform 0.2s ease"},onMouseEnter:d=>d.currentTarget.style.transform="scale(1.1)",onMouseLeave:d=>d.currentTarget.style.transform="scale(1)",children:e.jsx(hr,{size:18})})]})}function A6(){const{id:t}=ts(),i=qt(),[s,o]=L.useState(null),[u,S]=L.useState([]),[b,l]=L.useState(null),[c,m]=L.useState(250),[v,d]=L.useState(600),[y,_]=L.useState(null),[j,w]=L.useState(null),[h,p]=L.useState(""),[f,g]=L.useState([]),[C,R]=L.useState(null),[z,A]=L.useState(!1),[E,B]=L.useState(void 0),[P,N]=L.useState(null),[K,U]=L.useState(null),[ee,V]=L.useState("preview"),[de,J]=L.useState([]),Y=L.useRef(null),M=L.useRef(null),I=L.useRef(null),[D,W]=L.useState(typeof window<"u"&&window.innerWidth<900);L.useEffect(()=>{const he=()=>W(window.innerWidth<900);return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const pe=$s.useMemo(()=>{const he=[],Ie=Oe=>{for(const $e of Oe)he.push($e),$e.children&&Ie($e.children)};return Ie(u),he},[u]);L.useEffect(()=>{ae("/api/claude-status").then(he=>N(he)).catch(()=>N({installed:!1,version:null})),ae("/api/claude-auth/status").then(he=>U(he.connected)).catch(()=>U(!1))},[]),L.useEffect(()=>{t&&t!=="new"&&(async()=>{try{const[Ie,Oe,$e,je]=await Promise.all([ae(`/api/projects/${t}`),ae(`/api/iterations/${t}/tree`),ae(`/api/terminal-tabs/${t}`),ae(`/api/projects/${t}/skills`).catch(()=>[])]);if(o(Ie),J(je||[]),S(Oe||[]),Oe&&Oe.length>0){const Ne=[],Q=le=>{for(const We of le)Ne.push(We),We.children&&Q(We.children)};Q(Oe),l(Ne[Ne.length-1]||Oe[0])}if($e&&$e.length>0){const Ne=$e.map(Q=>({id:Q.id,name:Q.name||"claude-1",sessionId:Q.alive?Q.session_id:null}));g(Ne),R(Ne[0].id)}else{const Ne={id:`tab-${Date.now()}`,name:"claude-1",sessionId:null};g([Ne]),R(Ne.id),ae("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:Ne.id,project_id:t,name:Ne.name})}).catch(()=>{})}A(!0)}catch(Ie){console.error(Ie)}})()},[t]),L.useEffect(()=>{if(!t||t==="new")return;const he=Po({transports:["websocket"]});return he.on("iteration-created",Ie=>{Ie.projectId===t&&ae(`/api/iterations/${t}/tree`).then(Oe=>{S(Oe||[]),Ie.iteration&&l(Ie.iteration)}).catch(()=>{})}),()=>he.disconnect()},[t]);const me=L.useCallback(he=>{y==="left"&&m(Math.max(150,Math.min(500,he.clientX))),y==="right"&&d(Math.max(200,Math.min(700,window.innerWidth-he.clientX)))},[y]),Se=L.useCallback(()=>_(null),[]);L.useEffect(()=>{if(y)return window.addEventListener("mousemove",me),window.addEventListener("mouseup",Se),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",Se)}},[y,me,Se]);const Ee=()=>{const he=`tab-${Date.now()}`,Ie=`claude-${f.length+1}`;g(Oe=>[...Oe,{id:he,name:Ie,sessionId:null}]),R(he),ae("/api/terminal-tabs",{method:"POST",body:JSON.stringify({id:he,project_id:t,name:Ie})}).catch(()=>{})},X=he=>{f.find(Oe=>Oe.id===he)&&(g(Oe=>{const $e=Oe.filter(je=>je.id!==he);return C===he&&$e.length>0&&R($e[0].id),$e}),ae(`/api/terminal-tabs/${he}`,{method:"DELETE"}).catch(()=>{}))},F=L.useCallback(he=>{t&&ae(`/api/terminal-tabs/${t}/branch-context`,{method:"POST",body:JSON.stringify({parentId:he})}).catch(Ie=>console.error("[BranchContext]",Ie))},[t]),ve=L.useCallback(()=>{B(null),F(null),setTimeout(()=>{var he;return(he=I.current)==null?void 0:he.focus()},100)},[F]),se=L.useCallback(he=>{B(he),F(he.id),l(he),setTimeout(()=>{var Ie;return(Ie=I.current)==null?void 0:Ie.focus()},100)},[F]),Me=L.useCallback(he=>{l(he),B(he),F(he.id)},[F]),Z=L.useCallback(()=>{if(!h.trim()||!Y.current)return;const he=h.replace(/'/g,"'\\''");Y.current.sendInput(`claude -p '${he}'
`),p("")},[h]),ke=(he,Ie)=>{g(Oe=>Oe.map($e=>$e.id===he?{...$e,sessionId:Ie}:$e)),ae(`/api/terminal-tabs/${he}/session`,{method:"PUT",body:JSON.stringify({session_id:Ie})}).catch(()=>{})};return t==="new"?e.jsxs("div",{style:{padding:"24px",maxWidth:"500px",width:"100%",boxSizing:"border-box"},children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"24px"},children:"New Project"}),e.jsx(z6,{onCreated:he=>i(`/project/${he}`)})]}):e.jsxs("div",{style:{display:"flex",flexDirection:D?"column":"row",height:"calc(100vh - 53px)",background:Ae.bg,overflow:"hidden"},onClick:()=>w(null),children:[D&&e.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[{id:"tree",label:"Worktree"},{id:"preview",label:"Preview"},{id:"terminal",label:"Terminal"}].map(he=>e.jsx("button",{onClick:()=>V(he.id),style:{flex:1,padding:"10px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ee===he.id?Ae.surfaceEl:"transparent",color:ee===he.id?Ae.tp:Ae.tm,border:"none",borderBottom:ee===he.id?`2px solid ${Ae.violet}`:"2px solid transparent"},children:he.label},he.id))}),e.jsxs("aside",{style:{width:D?"100%":`${c}px`,background:Ae.surface,borderRight:D?"none":`1px solid ${Ae.border}`,display:D&&ee!=="tree"?"none":"flex",flexDirection:"column",flexShrink:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:Ae.tm,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Worktree"}),e.jsxs("button",{onClick:ve,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New"]})]}),E!==void 0&&e.jsxs("div",{style:{padding:"6px 12px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",background:"rgba(139,92,246,0.06)"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:Ae.violet,strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),e.jsx("span",{style:{color:Ae.violet,flex:1},children:E===null?"New root worktree":`From ${E.title||"V"+E.version}`}),e.jsx("span",{onClick:()=>B(void 0),style:{color:Ae.tm,cursor:"pointer",fontSize:"13px"},children:"x"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[u.map(he=>e.jsx(b1,{node:he,selected:b,onSelect:Me,onContext:w,onBranch:se},he.id)),u.length===0&&e.jsx("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:Ae.tm},children:"No iterations yet"})]})]}),!D&&e.jsx("div",{onMouseDown:()=>_("left"),style:{width:"4px",cursor:"col-resize",background:y==="left"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsxs("main",{style:{flex:1,display:D&&ee!=="preview"?"none":"flex",flexDirection:"column",minWidth:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:[e.jsxs("div",{style:{height:"40px",background:Ae.surface,borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",padding:"0 16px",gap:"12px",fontSize:"12px",color:Ae.ts,flexShrink:0,overflow:"hidden"},children:[e.jsx("span",{style:{color:Ae.tp,fontWeight:"500"},children:(s==null?void 0:s.name)||"Loading..."}),b&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:Ae.tm},children:"/"}),e.jsx("span",{children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:Ae.violetM,color:Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"10px",fontWeight:"600"},children:b.agent_name})]}),de.length>0&&e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"hidden",flexShrink:1,minWidth:0},children:[e.jsx("span",{style:{color:Ae.tm,fontSize:"10px",flexShrink:0},children:"Skills:"}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center",overflow:"auto",maxWidth:"100%"},children:de.map(he=>e.jsx("span",{style:{background:he.color?`${he.color}20`:"rgba(139,92,246,0.12)",color:he.color||Ae.violet,padding:"1px 6px",borderRadius:"99px",fontSize:"9px",fontWeight:"600",border:`1px solid ${he.color?`${he.color}40`:"rgba(139,92,246,0.2)"}`,whiteSpace:"nowrap",flexShrink:0},children:he.name},he.id))})]}),e.jsx("div",{style:{flex:1}}),e.jsxs("a",{href:`/preview/${t}`,target:"_blank",rel:"noreferrer",style:{color:"#fff",fontSize:"11px",display:"flex",alignItems:"center",gap:"5px",background:Ae.violet,padding:"4px 10px",borderRadius:"6px",textDecoration:"none",fontWeight:"600",boxShadow:`0 0 8px ${Ae.violetG}`,flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Client Preview"]}),b&&e.jsxs("a",{href:`/api/preview/${t}/${b.id}`,target:"_blank",rel:"noreferrer",style:{color:Ae.ts,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),"Open"]})]}),e.jsx("div",{style:{flex:1,background:"#fff",margin:"8px",borderRadius:"8px",border:`1px solid ${Ae.border}`,overflow:"hidden",position:"relative"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Preview"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:Ae.tm,background:Ae.bg},children:"Select an iteration to preview"})}),e.jsx(T6,{allIterations:pe,selected:b,onSelect:Me,projectId:t}),e.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${Ae.border}`,background:Ae.surface,flexShrink:0},children:[E!==void 0&&e.jsxs("div",{style:{fontSize:"10px",color:Ae.violet,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),E===null?"Creating new root iteration":`Branching from ${E.title||"V"+E.version}`]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{ref:I,value:h,onChange:he=>p(he.target.value),onKeyDown:he=>{he.key==="Enter"&&h.trim()&&Z()},placeholder:E!==void 0?E===null?"Describe the landing page to create from scratch...":`Describe changes to apply from ${E.title||"V"+E.version}...`:"Describe adjustments for the next iteration...",style:{width:"100%",padding:"10px 100px 10px 14px",background:Ae.surfaceEl,border:`1px solid ${E!==void 0?"rgba(139,92,246,0.4)":Ae.borderS}`,borderRadius:"8px",color:Ae.tp,fontSize:"13px",outline:"none"}}),e.jsxs("button",{onClick:Z,disabled:!h.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:h.trim()?Ae.violet:Ae.tm,color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",cursor:h.trim()?"pointer":"default",opacity:h.trim()?1:.5},children:[e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Generate"]})]})]})]}),!D&&e.jsx("div",{onMouseDown:()=>_("right"),style:{width:"4px",cursor:"col-resize",background:y==="right"?Ae.violet:"transparent",transition:"background 0.2s",zIndex:10,flexShrink:0}}),e.jsx("aside",{style:{width:D?"100%":`${v}px`,background:Ae.surface,borderLeft:D?"none":`1px solid ${Ae.border}`,display:D&&ee!=="terminal"?"none":"flex",flexDirection:"column",flexShrink:0,height:D?"calc(100vh - 53px - 42px)":"auto"},children:P&&!P.installed?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{height:"44px",display:"flex",alignItems:"center",padding:"0 14px",borderBottom:`1px solid ${Ae.border}`,gap:"8px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#f59e0b"},children:"Claude CLI Setup Required"})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 16px",borderBottom:`1px solid ${Ae.border}`},children:[e.jsx("p",{style:{fontSize:"13px",color:Ae.ts,margin:"0 0 12px 0",lineHeight:1.5},children:"Claude Code CLI is not installed on this server. Install it to enable AI-powered iterations."}),e.jsxs("button",{onClick:()=>{M.current&&M.current.sendInput(`npm install -g @anthropic-ai/claude-code
`)},style:{background:Ae.violet,color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",width:"100%",justifyContent:"center"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),"Install Claude Code CLI"]}),e.jsxs("p",{style:{fontSize:"10px",color:Ae.tm,margin:"8px 0 0 0",textAlign:"center"},children:["Runs: ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"2px 4px",borderRadius:"3px"},children:"npm install -g @anthropic-ai/claude-code"})]})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx(Mu,{ref:M,projectId:t,onSessionCreated:()=>{}})}),e.jsx("div",{style:{padding:"8px 16px",borderTop:`1px solid ${Ae.border}`,display:"flex",justifyContent:"center"},children:e.jsx("button",{onClick:()=>{ae("/api/claude-status").then(he=>N(he)).catch(()=>{})},style:{background:"transparent",color:Ae.ts,border:`1px solid ${Ae.border}`,borderRadius:"4px",padding:"6px 12px",fontSize:"11px",cursor:"pointer"},children:"Check again"})})]})]}):e.jsxs(e.Fragment,{children:[K===!1&&e.jsxs("div",{style:{padding:"8px 14px",borderBottom:`1px solid ${Ae.border}`,display:"flex",alignItems:"center",gap:"8px",background:"rgba(245,158,11,0.06)",fontSize:"11px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsxs("span",{style:{color:"#f59e0b",flex:1},children:["Claude not authenticated. Run ",e.jsx("code",{style:{background:Ae.surfaceEl,padding:"1px 4px",borderRadius:"3px"},children:"claude"})," in the terminal to connect."]}),e.jsx("span",{onClick:()=>i("/setup-claude"),style:{color:Ae.violet,cursor:"pointer",fontWeight:"500",fontSize:"11px"},children:"Setup"})]}),e.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${Ae.border}`,height:"44px",flexShrink:0},children:[f.map(he=>e.jsxs("div",{onClick:()=>R(he.id),style:{padding:"0 14px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:C===he.id?Ae.tp:Ae.ts,background:C===he.id?Ae.surface:Ae.bg,borderBottom:C===he.id?`2px solid ${Ae.violet}`:"2px solid transparent",borderRight:`1px solid ${Ae.border}`},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"4 17 10 11 4 5"}),e.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),he.name,f.length>1&&e.jsx("span",{onClick:Ie=>{Ie.stopPropagation(),X(he.id)},style:{marginLeft:"4px",opacity:.4,fontSize:"14px",lineHeight:1},onMouseEnter:Ie=>Ie.currentTarget.style.opacity=1,onMouseLeave:Ie=>Ie.currentTarget.style.opacity=.4,children:"x"})]},he.id)),e.jsx("div",{onClick:Ee,style:{padding:"0 12px",display:"flex",alignItems:"center",cursor:"pointer",color:Ae.tm},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),e.jsx("div",{style:{flex:1,position:"relative"},children:z&&C&&(()=>{const he=f.find(Ie=>Ie.id===C);return he?e.jsx(Mu,{ref:Y,sessionId:he.sessionId,projectId:t,onSessionCreated:Ie=>ke(he.id,Ie)},he.id):null})()})]})}),j&&e.jsxs("div",{style:{position:"fixed",left:j.x,top:j.y,background:Ae.surfaceEl,border:`1px solid ${Ae.borderS}`,borderRadius:"8px",padding:"4px",zIndex:1e3,boxShadow:"0 10px 25px rgba(0,0,0,0.5)",minWidth:"160px"},children:[e.jsxs("div",{onClick:()=>{se(j.node),w(null)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),"Branch from here"]}),e.jsxs("div",{onClick:async()=>{var $e;const he=j.node;w(null);const Ie=h(`New project name (from ${he.title||"V"+he.version}):`,`${(s==null?void 0:s.name)||"Project"} - Fork`);if(!Ie)return;const Oe=h(`Agent name (leave empty to keep "${he.agent_name}"):`,he.agent_name||"");try{const je=await ae("/api/projects/fork",{method:"POST",body:JSON.stringify({name:Ie,agent_name:Oe||he.agent_name,source_project_id:t,source_iteration_id:he.id})});($e=je==null?void 0:je.project)!=null&&$e.id&&i(`/project/${je.project.id}`)}catch(je){console.error("Fork error:",je)}},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:Ae.ts,cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(255,255,255,0.04)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"}),e.jsx("path",{d:"M3 6v12"})]}),"New project from here"]}),e.jsxs("div",{onClick:()=>{const he=j.node;w(null),confirm(`Delete ${he.title||"V"+he.version}?`)&&ae(`/api/iterations/detail/${he.id}`,{method:"DELETE"}).then(()=>{ae(`/api/iterations/${t}/tree`).then(Ie=>{S(Ie||[]),(b==null?void 0:b.id)===he.id&&l(null)}).catch(()=>{})}).catch(Ie=>console.error(Ie))},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",fontSize:"12px",color:"#ef4444",cursor:"pointer",borderRadius:"4px"},onMouseEnter:he=>he.currentTarget.style.background="rgba(239,68,68,0.1)",onMouseLeave:he=>he.currentTarget.style.background="transparent",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete"]})]})]})}function z6({onCreated:t}){const[i,s]=L.useState(""),[o,u]=L.useState(""),[S,b]=L.useState(""),[l,c]=L.useState([]),[m,v]=L.useState(!1);L.useEffect(()=>{ae("/api/agents").then(_=>c(_||[])).catch(()=>{});const y=new URLSearchParams(window.location.search);y.get("agent")&&b(y.get("agent"))},[]);const d=async y=>{if(y.preventDefault(),!!i){v(!0);try{const _=await ae("/api/projects",{method:"POST",body:JSON.stringify({name:i,description:o,agent_name:S})});t(_.id)}catch(_){console.error(_)}finally{v(!1)}}};return e.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Project Name"}),e.jsx("input",{value:i,onChange:y=>s(y.target.value),required:!0,style:{width:"100%"},placeholder:"My Landing Page Test"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Description"}),e.jsx("input",{value:o,onChange:y=>u(y.target.value),style:{width:"100%"},placeholder:"Optional description"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:Ae.ts,marginBottom:"6px"},children:"Agent"}),e.jsxs("select",{value:S,onChange:y=>b(y.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select agent..."}),l.map(y=>e.jsx("option",{value:y.name,children:y.name},y.name))]})]}),e.jsx("button",{type:"submit",disabled:m,style:{background:Ae.tp,color:Ae.bg,border:"none",borderRadius:"4px",padding:"10px",fontSize:"13px",fontWeight:"600",opacity:m?.7:1},children:m?"Creating...":"Create Project"})]})}const ar={surface:"#0A0A0B",border:"rgba(255,255,255,0.06)",borderS:"rgba(255,255,255,0.12)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",ts:"#A1A1AA",tm:"#52525B"};function L6(){const{id:t}=ts(),i=qt(),[s,o]=L.useState([]),[u,S]=L.useState(null),[b,l]=L.useState(null),[c,m]=L.useState(null);return L.useEffect(()=>{(async()=>{try{const[d,y]=await Promise.all([ae(`/api/projects/${t}`),ae(`/api/iterations/${t}`)]);m(d),o(y||[]),y&&y.length>=2?(S(y[0]),l(y[y.length-1])):y&&y.length===1&&S(y[0])}catch(d){console.error(d)}})()},[t]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",letterSpacing:"-0.02em",margin:0},children:"Compare Iterations"}),e.jsx("span",{style:{fontSize:"13px",color:ar.tm},children:c==null?void 0:c.name})]}),e.jsx("button",{onClick:()=>i(`/project/${t}`),style:{background:"transparent",border:`1px solid ${ar.borderS}`,color:ar.ts,borderRadius:"4px",padding:"6px 14px",fontSize:"12px",fontWeight:"500"},children:"Back to Project"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:ar.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Left"}),e.jsxs("select",{value:(u==null?void 0:u.id)||"",onChange:v=>S(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"11px",color:ar.tm,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px",display:"block"},children:"Right"}),e.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:v=>l(s.find(d=>d.id===v.target.value)),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"Select iteration..."}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.title||`V${v.version}`,"  ",v.agent_name]},v.id))]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",height:"calc(100vh - 260px)"},children:[e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${ar.border}`,overflow:"hidden"},children:u?e.jsx("iframe",{src:`/api/preview/${t}/${u.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Left"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:ar.tm,background:"#050505"},children:"Select left iteration"})}),e.jsx("div",{style:{flex:1,background:"#fff",borderRadius:"8px",border:`1px solid ${ar.border}`,overflow:"hidden"},children:b?e.jsx("iframe",{src:`/api/preview/${t}/${b.id}`,style:{width:"100%",height:"100%",border:"none"},title:"Right"}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:ar.tm,background:"#050505"},children:"Select right iteration"})})]}),u&&b&&e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1,background:ar.surface,border:`1px solid ${ar.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:u.title||`V${u.version}`}),e.jsx("span",{style:{background:ar.violetM,color:ar.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:u.agent_name}),u.prompt&&e.jsx("p",{style:{fontSize:"12px",color:ar.ts,marginTop:"8px",lineHeight:"1.5"},children:u.prompt})]}),e.jsxs("div",{style:{flex:1,background:ar.surface,border:`1px solid ${ar.border}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:b.title||`V${b.version}`}),e.jsx("span",{style:{background:ar.violetM,color:ar.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:b.agent_name}),b.prompt&&e.jsx("p",{style:{fontSize:"12px",color:ar.ts,marginTop:"8px",lineHeight:"1.5"},children:b.prompt})]})]})]})}function I6(){const[t,i]=L.useState([]),[s,o]=L.useState(!0),[u,S]=L.useState(null),b=qt(),l=L.useCallback(()=>{ae("/api/sessions").then(_=>{i(_||[]),o(!1)}).catch(()=>o(!1))},[]);L.useEffect(()=>{l();const _=setInterval(l,3e3);return()=>clearInterval(_)},[l]);const c=async _=>{S(_);try{await ae(`/api/sessions/${_}`,{method:"DELETE"}),i(j=>j.filter(w=>w.id!==_))}catch(j){console.error("Kill failed:",j)}S(null)},m=async()=>{if(t.length){S("all");try{await ae("/api/sessions/all",{method:"DELETE"}),i([])}catch(_){console.error("Kill all failed:",_)}S(null)}},v=_=>{const j=Date.now()-_,w=Math.floor(j/6e4);if(w<1)return"just now";if(w<60)return`${w}m ago`;const h=Math.floor(w/60);return h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`},d=t.filter(_=>!_.exited),y=t.filter(_=>_.exited);return e.jsxs("div",{style:{padding:"32px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#F4F4F5",fontSize:"20px",fontWeight:"600",margin:0},children:"Sessions"}),e.jsxs("p",{style:{color:"#71717A",fontSize:"13px",margin:"4px 0 0"},children:[d.length," active instance",d.length!==1?"s":"",y.length>0&&`  ${y.length} exited`]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:l,style:{background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#A1A1AA",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:_=>{_.target.style.borderColor="rgba(255,255,255,0.2)",_.target.style.color="#F4F4F5"},onMouseLeave:_=>{_.target.style.borderColor="rgba(255,255,255,0.1)",_.target.style.color="#A1A1AA"},children:"Refresh"}),d.length>0&&e.jsx("button",{onClick:m,disabled:u==="all",style:{background:u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",borderRadius:"6px",padding:"8px 14px",fontSize:"13px",fontWeight:"500",cursor:u==="all"?"wait":"pointer",transition:"all 0.15s",opacity:u==="all"?.6:1},onMouseEnter:_=>{u!=="all"&&(_.target.style.background="rgba(239,68,68,0.25)")},onMouseLeave:_=>{_.target.style.background=u==="all"?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.15)"},children:u==="all"?"Killing...":`Kill all (${d.length})`})]})]}),s&&e.jsx("div",{style:{textAlign:"center",padding:"60px 0",color:"#52525B"},children:"Loading sessions..."}),!s&&t.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"80px 24px",background:"#1a1a1b",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px",opacity:.4},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#52525B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),e.jsx("path",{d:"m8 21 4-4 4 4"}),e.jsx("path",{d:"M7 8h.01M12 8h.01"})]})}),e.jsx("p",{style:{color:"#71717A",fontSize:"14px",margin:0},children:"No active terminal sessions"}),e.jsx("p",{style:{color:"#52525B",fontSize:"12px",margin:"4px 0 0"},children:"Sessions appear when you open terminals in projects"})]}),d.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{color:"#A1A1AA",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Active"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.04)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.06)"},children:d.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"#1a1a1b",transition:"background 0.15s"},onMouseEnter:j=>j.currentTarget.style.background="#1f1f21",onMouseLeave:j=>j.currentTarget.style.background="#1a1a1b",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#22c55e",boxShadow:"0 0 6px rgba(34,197,94,0.4)"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#F4F4F5",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#8B5CF6",background:"rgba(139,92,246,0.12)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#A1A1AA",cursor:"pointer",transition:"color 0.15s"},onClick:()=>b(`/project/${_.projectId}`),onMouseEnter:j=>j.target.style.color="#8B5CF6",onMouseLeave:j=>j.target.style.color="#A1A1AA",children:_.projectName}),!_.projectName&&_.projectId&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B",fontFamily:'"JetBrains Mono", monospace'},children:_.projectId.slice(0,8)}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Started ",v(_.createdAt)]}),e.jsxs("span",{style:{fontSize:"11px",color:"#52525B"},children:["Active ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),disabled:u===_.id,style:{background:"transparent",border:"1px solid rgba(239,68,68,0.2)",color:"#ef4444",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",fontWeight:"500",cursor:u===_.id?"wait":"pointer",transition:"all 0.15s",opacity:u===_.id?.5:1,flexShrink:0},onMouseEnter:j=>{u!==_.id&&(j.target.style.background="rgba(239,68,68,0.1)",j.target.style.borderColor="rgba(239,68,68,0.4)")},onMouseLeave:j=>{j.target.style.background="transparent",j.target.style.borderColor="rgba(239,68,68,0.2)"},children:u===_.id?"...":"Kill"})]},_.id))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#52525B",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 8px"},children:"Exited"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.04)"},children:y.map(_=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(26,26,27,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"#52525B"}}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#71717A",fontSize:"13px",fontWeight:"500"},children:_.title||`Session ${_.id}`}),e.jsx("span",{style:{fontSize:"11px",color:"#52525B",background:"rgba(255,255,255,0.04)",padding:"1px 6px",borderRadius:"3px",fontFamily:'"JetBrains Mono", monospace'},children:_.id})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2px"},children:[_.projectName&&e.jsx("span",{style:{fontSize:"12px",color:"#52525B"},children:_.projectName}),e.jsxs("span",{style:{fontSize:"11px",color:"#3F3F46"},children:["Exited ",v(_.lastActivity)]})]})]})]}),e.jsx("button",{onClick:()=>c(_.id),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.06)",color:"#52525B",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",transition:"all 0.15s",flexShrink:0},onMouseEnter:j=>{j.target.style.borderColor="rgba(255,255,255,0.15)",j.target.style.color="#71717A"},onMouseLeave:j=>{j.target.style.borderColor="rgba(255,255,255,0.06)",j.target.style.color="#52525B"},children:"Remove"})]},_.id))})]})]})}const dt={bg:"#0f0f0f",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function D6(){const{projectId:t}=ts(),[i,s]=L.useState(!0),[o,u]=L.useState(null),[S,b]=L.useState(null),[l,c]=L.useState("desktop"),[m,v]=L.useState(!1),[d,y]=L.useState(!1);L.useEffect(()=>{(async()=>{var f;try{s(!0);const C=await(await fetch(`/api/preview/showcase/${t}`)).json();if(u(C),((f=C.iterations)==null?void 0:f.length)>0){const R=[...C.iterations].sort((z,A)=>A.version-z.version);b(R[0].id)}}catch(g){console.error("Failed to fetch showcase data",g)}finally{s(!1)}})()},[t]);const _=L.useMemo(()=>{var f;return(f=o==null?void 0:o.iterations)==null?void 0:f.find(g=>g.id===S)},[o,S]),j=()=>{v(!0),setTimeout(()=>v(!1),800)},w=async()=>{try{await navigator.clipboard.writeText(window.location.href)}catch{}};if(i)return e.jsxs("div",{style:{height:"100vh",backgroundColor:dt.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`2px solid ${dt.violetM}`,borderTopColor:dt.violet,borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("span",{style:{color:dt.ts,fontFamily:dt.mono,fontSize:"12px"},children:"Loading preview..."})]});if(!(o!=null&&o.project))return e.jsxs("div",{style:{height:"100vh",backgroundColor:dt.bg,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px",color:dt.tm},children:[e.jsx(Ai,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"Project not found"})]});const h={desktop:"100%",tablet:"768px",mobile:"390px"},p=[...o.iterations].sort((f,g)=>f.version-g.version);return e.jsxs("div",{style:{height:"100vh",width:"100vw",backgroundColor:dt.bg,color:dt.tp,fontFamily:"Inter, sans-serif",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#050505",position:"relative",overflow:"hidden"},children:[l!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${dt.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:h[l],height:l==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:l==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:l==="desktop"?"0":"12px",overflow:"hidden",border:l==="desktop"?"none":`1px solid ${dt.borderS}`},children:_?e.jsx("iframe",{src:`/api/preview/${t}/${S}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:m?.5:1,transition:"opacity 0.2s"},title:`Iteration v${_.version}`},`${S}-${m}`):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:dt.tm,flexDirection:"column",gap:"12px"},children:[e.jsx(Ai,{size:32}),e.jsx("span",{style:{fontSize:"14px"},children:"No iteration selected"})]})})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:d?"auto":"calc(100% - 40px)",maxWidth:d?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${dt.borderS}`,borderRadius:"16px",zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:d?e.jsxs("button",{onClick:()=>y(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:dt.ts},children:[e.jsx(kh,{size:14}),e.jsxs("span",{style:{fontFamily:dt.mono,fontSize:"11px",fontWeight:600},children:["v",(_==null?void 0:_.version)||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:dt.border}}),e.jsx("span",{style:{fontSize:"10px",color:dt.tm},children:o.project.name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:dt.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:dt.mono,fontWeight:800,fontSize:"14px",color:dt.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:dt.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:dt.tp},children:o.project.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",border:`1px solid ${(_==null?void 0:_.status)==="completed"?"rgba(34,197,94,0.2)":"rgba(245,158,11,0.2)"}`},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:(_==null?void 0:_.status)==="completed"?dt.success:dt.warning}}),e.jsx("span",{style:{fontSize:"10px",color:(_==null?void 0:_.status)==="completed"?dt.success:dt.warning,fontWeight:500},children:(_==null?void 0:_.status)==="completed"?"Live":"Draft"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${dt.border}`},children:[{id:"mobile",icon:e.jsx(z0,{size:13})},{id:"tablet",icon:e.jsx(L0,{size:13})},{id:"desktop",icon:e.jsx(E0,{size:13})}].map(f=>e.jsx("button",{onClick:()=>c(f.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:l===f.id?dt.surfaceEl:"transparent",color:l===f.id?dt.violet:dt.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:f.icon},f.id))}),e.jsx("button",{onClick:j,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${dt.border}`,backgroundColor:"transparent",color:dt.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R0,{size:14,style:m?{animation:"spin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:S?`/api/preview/download/${t}/${S}`:"#",style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${dt.border}`,color:dt.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(jn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:w,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:dt.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${dt.violetG}`},children:[e.jsx(A0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>y(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${dt.border}`,backgroundColor:"transparent",color:dt.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Rn,{size:14})})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:p.map(f=>{const g=S===f.id;return e.jsxs("button",{onClick:()=>b(f.id),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:g?dt.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${g?dt.violet:dt.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:f.status==="completed"?dt.success:f.status==="error"?dt.danger:dt.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:g?dt.tp:dt.ts,fontFamily:dt.mono},children:["v",f.version]}),f.title&&e.jsx("span",{style:{fontSize:"11px",color:g?dt.ts:dt.tm,maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:f.title})]},f.id)})})]})}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})}const st={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",warning:"#f59e0b"};function M6({agent:t,onDownload:i,navigate:s}){var b;const[o,u]=L.useState(!1),S=l=>l.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("div",{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{backgroundColor:st.surface,border:`1px solid ${o?st.violet:st.border}`,borderRadius:"10px",overflow:"hidden",display:"flex",flexDirection:"column",transition:"all 0.2s cubic-bezier(0.4,0,0.2,1)",transform:o?"translateY(-2px)":"none",boxShadow:o?`0 8px 24px rgba(0,0,0,0.5), 0 0 20px ${st.violetG}`:"none"},children:[e.jsx("div",{style:{aspectRatio:"16/10",backgroundColor:"#141415",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${st.border}`,overflow:"hidden",position:"relative"},children:t.screenshot_path?e.jsx("img",{src:t.screenshot_path+"?t=1",alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):t.featured_project_id&&t.featured_iteration_id?e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${t.featured_project_id}/${t.featured_iteration_id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview ${t.name}`,loading:"lazy",sandbox:"allow-same-origin"})}):e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"10px",backgroundColor:st.violetM,color:st.violet,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"700",border:`1px solid ${st.violet}30`},children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{style:{padding:"14px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${st.violet}15`,color:st.violet,border:`1px solid ${st.violet}25`,marginRight:"4px"},children:t.category||"General"}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",backgroundColor:`${st.ts}15`,color:st.ts,border:`1px solid ${st.ts}25`},children:t.model||"unknown"})]}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",color:st.tp,marginBottom:"4px",margin:"0 0 4px 0"},children:S(t.name)}),e.jsx("p",{style:{fontSize:"12px",color:st.ts,lineHeight:"1.4",marginBottom:"12px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"34px",margin:"0 0 12px 0"},children:t.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",color:st.tm,marginBottom:"12px"},children:[e.jsx(qi,{size:12}),e.jsx("span",{children:((b=t.creator)==null?void 0:b.display_name)||"Platform"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:`1px solid ${st.border}`,marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:st.ts},children:[e.jsx(jn,{size:12,color:st.tm}),e.jsx("span",{children:t.download_count||0})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px",color:st.ts},children:[e.jsx(Ki,{size:12,color:st.tm}),e.jsx("span",{children:t.project_count||0})]})]}),e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(l=>e.jsx(En,{size:10,fill:l<=(t.rating||0)?st.warning:"transparent",color:l<=(t.rating||0)?st.warning:st.tm},l))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"14px"},children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(t.name)},style:{backgroundColor:st.surfaceEl,color:st.ts,border:`1px solid ${st.borderS}`,borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(jn,{size:13})," Download"]}),e.jsxs("button",{onClick:()=>s(`/marketplace/${t.name}`),style:{backgroundColor:st.tp,color:st.bg,border:"none",borderRadius:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Hs,{size:13})," Details"]})]})]})]})}function B6(){const t=qt(),[i,s]=L.useState([]),[o,u]=L.useState([]),[S,b]=L.useState(!0),[l,c]=L.useState(""),[m,v]=L.useState("all"),[d,y]=L.useState("popular"),_=async()=>{b(!0);try{const h=new URLSearchParams({sort:d});l&&h.set("search",l),m!=="all"&&h.set("category",m);const[p,f]=await Promise.all([ae(`/api/marketplace?${h.toString()}`),ae("/api/categories")]);s(p||[]),u(f||[])}catch(h){console.error("Marketplace fetch error:",h)}finally{b(!1)}};L.useEffect(()=>{const h=setTimeout(_,300);return()=>clearTimeout(h)},[l,m,d]);const j=async h=>{try{const p=Xo(),f=await fetch(`/api/marketplace/${encodeURIComponent(h)}/download`,{headers:{Authorization:`Bearer ${p}`}});if(!f.ok)throw new Error("Download failed");const g=await f.blob(),C=URL.createObjectURL(g),R=document.createElement("a");R.href=C,R.download=`${h}.md`,R.click(),URL.revokeObjectURL(C),_()}catch(p){console.error("Download error:",p)}},w=h=>h.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return e.jsx("div",{className:"mp-root",style:{backgroundColor:st.bg,minHeight:"calc(100vh - 53px)",color:st.tp,padding:"40px 24px"},children:e.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"48px"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"12px"},children:"Agent Marketplace"}),e.jsx("p",{style:{fontSize:"14px",color:st.ts,marginBottom:"24px"},children:"Browse, download, and explore AI agents for your projects"}),e.jsxs("div",{style:{position:"relative",maxWidth:"500px",margin:"0 auto"},children:[e.jsx(Ps,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:st.tm}}),e.jsx("input",{style:{width:"100%",backgroundColor:st.surface,border:`1px solid ${st.border}`,borderRadius:"8px",padding:"10px 16px 10px 40px",color:st.tp,fontSize:"14px",outline:"none",boxSizing:"border-box"},placeholder:"Search agents, capabilities, models...",value:l,onChange:h=>c(h.target.value)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"32px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:[e.jsx("div",{onClick:()=>v("all"),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m==="all"?st.violetM:st.surface,color:m==="all"?st.violet:st.ts,border:`1px solid ${m==="all"?st.violet:st.border}`},children:"All Agents"}),o.map(h=>e.jsx("div",{onClick:()=>v(h.name),style:{padding:"6px 14px",borderRadius:"100px",fontSize:"12px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m===h.name?st.violetM:st.surface,color:m===h.name?st.violet:st.ts,border:`1px solid ${m===h.name?st.violet:st.border}`},children:w(h.name)},h.id||h.name))]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(H2,{size:14,style:{color:st.tm}}),e.jsxs("select",{style:{backgroundColor:st.surface,border:`1px solid ${st.border}`,color:st.ts,padding:"6px 12px",borderRadius:"6px",fontSize:"12px",outline:"none",cursor:"pointer"},value:d,onChange:h=>y(h.target.value),children:[e.jsx("option",{value:"popular",children:"Popular"}),e.jsx("option",{value:"rating",children:"Top Rated"}),e.jsx("option",{value:"recent",children:"Recently Added"}),e.jsx("option",{value:"name",children:"Name A-Z"})]})]})]}),i.length===0&&!S?e.jsxs("div",{style:{textAlign:"center",padding:"80px 0",color:st.tm},children:[e.jsx(k0,{size:48,strokeWidth:1,style:{marginBottom:"16px",opacity:.5}}),e.jsx("p",{style:{margin:0},children:"No agents found matching your criteria."})]}):e.jsx("div",{className:"mp-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px",opacity:S&&i.length===0?.5:1,transition:"opacity 0.2s ease"},children:i.map(h=>e.jsx(M6,{agent:h,onDownload:j,navigate:t},h.name))}),e.jsx("style",{children:`
          @media (max-width: 768px) {
            .mp-root { padding: 20px 12px !important; }
            .mp-grid { grid-template-columns: 1fr !important; gap: 16px !important; }
          }
          @media (max-width: 480px) {
            .mp-grid { grid-template-columns: 1fr !important; }
          }
        `})]})})}const ce={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'};function P6({showcase:t,onClick:i}){const s=`/api/preview/${t.project_id}/${t.iteration_id}`;return e.jsxs("div",{onClick:()=>i(t),style:{background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=ce.violet,o.currentTarget.style.boxShadow=`0 10px 30px -10px ${ce.violet}30`,o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.borderColor=ce.border,o.currentTarget.style.boxShadow="none",o.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"62.5%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:s,style:{width:"100%",height:"100%",border:"none"},title:t.title})}),e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.8))",display:"flex",alignItems:"flex-end",padding:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fff"},children:[e.jsx(Ql,{size:12,fill:"currentColor"}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Preview"})]})})]}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp,marginBottom:"4px"},children:t.title||"Untitled"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:ce.ts},children:t.project_name}),e.jsx("span",{style:{color:ce.tm},children:""}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:["v",t.iteration_version]})]})]})]})}function O6({iterations:t,projectId:i,projectName:s,onSelectIteration:o}){const u=L.useRef(null),[S,b]=L.useState(!1),[l,c]=L.useState(!0),m=()=>{if(u.current){const{scrollLeft:y,scrollWidth:_,clientWidth:j}=u.current;b(y>10),c(y<_-j-10)}};L.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[t]);const v=y=>{u.current&&u.current.scrollBy({left:y==="left"?-400:400,behavior:"smooth"})},d=(y,_)=>{y.dataTransfer.effectAllowed="copy",y.dataTransfer.setData("application/json",JSON.stringify({project_id:i,iteration_id:_.id,title:_.title||`V${_.version}`,project_name:s,iteration_version:_.version}))};return!t||t.length===0?null:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ki,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp},children:s}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:[t.length," version",t.length>1?"s":""]})]}),e.jsxs("div",{style:{position:"relative"},children:[S&&e.jsx("button",{onClick:()=>v("left"),style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:ce.surfaceEl,border:`1px solid ${ce.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:ce.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(Qo,{size:16})}),e.jsx("div",{ref:u,onScroll:m,style:{display:"flex",gap:"12px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",padding:"4px 0",scrollBehavior:"smooth"},children:t.map(y=>e.jsxs("div",{draggable:!0,onDragStart:_=>d(_,y),onClick:()=>o(y,i,s),style:{flex:"0 0 180px",cursor:"grab",transition:"transform 0.2s"},onMouseEnter:_=>_.currentTarget.style.transform="translateY(-2px)",onMouseLeave:_=>_.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{width:"180px",height:"101px",borderRadius:"6px",overflow:"hidden",border:`1px solid ${ce.border}`,background:"#000",position:"relative",transition:"border-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.borderColor=ce.violet,onMouseLeave:_=>_.currentTarget.style.borderColor=ce.border,children:e.jsx("div",{style:{width:"1440px",height:"810px",transform:"scale(0.125)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${i}/${y.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview V${y.version}`,loading:"lazy",sandbox:"allow-same-origin"})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 2px 0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:ce.ts},children:y.title||`V${y.version}`}),e.jsxs("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"10px",background:ce.surfaceEl,border:`1px solid ${ce.border}`,color:ce.tm},children:["v",y.version]})]})]},y.id))}),l&&e.jsx("button",{onClick:()=>v("right"),style:{position:"absolute",right:"-4px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:ce.surfaceEl,border:`1px solid ${ce.borderS}`,borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:ce.tp,cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:e.jsx(hr,{size:16})})]})]})}function $6(){var $e;const{name:t}=ts(),i=qt(),[s,o]=L.useState(null),[u,S]=L.useState(null),[b,l]=L.useState([]),[c,m]=L.useState([]),[v,d]=L.useState({}),[y,_]=L.useState(!0),[j,w]=L.useState(!1),[h,p]=L.useState(null),[f,g]=L.useState(!1),[C,R]=L.useState(!1),[z,A]=L.useState([]),[E,B]=L.useState([]),[P,N]=L.useState({project_id:"",iteration_id:"",title:"",description:""}),[K,U]=L.useState(!1),[ee,V]=L.useState(!0),[de,J]=L.useState(null),[Y,M]=L.useState({}),[I,D]=L.useState("desktop"),[W,pe]=L.useState(!1),[me,Se]=L.useState(!1);L.useEffect(()=>{Ee()},[t]);const Ee=async()=>{try{_(!0);const[je,Ne]=await Promise.all([ae(`/api/marketplace/${t}`),ae("/api/user/me")]);o(je),l(je.showcases||[]),m(je.projects||[]),d(je.iterations_by_project||{}),S(Ne)}catch(je){console.error(je)}finally{_(!1)}},X=s&&u&&(s.created_by===u.id||u.role==="admin"),F=async()=>{try{const je=Xo(),Ne=await fetch(`/api/marketplace/${encodeURIComponent(t)}/download`,{headers:{Authorization:`Bearer ${je}`}});if(!Ne.ok)throw new Error("Download failed");const Q=await Ne.blob(),le=URL.createObjectURL(Q),We=document.createElement("a");We.href=le,We.download=`${t}.md`,We.click(),URL.revokeObjectURL(le)}catch(je){console.error("Download error:",je)}},ve=async(je,Ne)=>{const Q=b.findIndex(Ze=>Ze.id===je);if(Ne==="up"&&Q===0||Ne==="down"&&Q===b.length-1)return;const le=[...b],We=Ne==="up"?Q-1:Q+1;[le[Q],le[We]]=[le[We],le[Q]],l(le),await ae(`/api/marketplace/${t}/showcases/reorder`,{method:"PUT",body:JSON.stringify({ids:le.map(Ze=>Ze.id)})})},se=async je=>{window.confirm("Remove this showcase?")&&(await ae(`/api/marketplace/${t}/showcases/${je}`,{method:"DELETE"}),l(b.filter(Ne=>Ne.id!==je)))},Me=async()=>{try{const je=await ae("/api/projects");A(je||[]);const Ne={};await Promise.all((je||[]).map(async Q=>{try{const le=await ae(`/api/iterations/${Q.id}`);le&&le.length>0&&(Ne[Q.id]=le)}catch(le){console.error(`Failed to load iterations for project ${Q.id}:`,le)}})),M(Ne)}catch(je){console.error(je)}V(!0),J(null),R(!0)},Z=async()=>{if(!(!P.project_id||!P.iteration_id||!P.title))try{const je=await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(P)});await Ee(),R(!1),N({project_id:"",iteration_id:"",title:"",description:""})}catch(je){console.error(je),alert(je.message||"Failed to add showcase")}},ke=async je=>{if(je.preventDefault(),U(!1),b.length>=6){alert("Maximum 6 showcases per agent");return}try{const Ne=JSON.parse(je.dataTransfer.getData("application/json"));await ae(`/api/marketplace/${t}/showcases`,{method:"POST",body:JSON.stringify(Ne)}),await Ee()}catch(Ne){console.error("Drop error:",Ne),alert(Ne.message||"Failed to add showcase")}},he=je=>{je.preventDefault(),je.dataTransfer.dropEffect="copy",U(!0)},Ie=()=>{U(!1)};if(y)return e.jsx("div",{style:{background:ce.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{color:ce.tm,fontSize:"14px"},children:"Loading..."})});if(!s)return e.jsx("div",{style:{background:ce.bg,minHeight:"calc(100vh - 53px)",display:"flex",alignItems:"center",justifyContent:"center",color:ce.ts},children:"Agent not found."});const Oe=je=>je.split("-").map(Ne=>Ne.charAt(0).toUpperCase()+Ne.slice(1)).join(" ");return e.jsxs("div",{className:"mp-detail",style:{background:ce.bg,minHeight:"calc(100vh - 53px)",color:ce.tp,padding:"40px 20px"},children:[e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(bi,{to:"/marketplace",style:{fontSize:"12px",color:ce.tm,textDecoration:"none"},children:"Marketplace"}),e.jsx(hr,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"12px",color:ce.ts},children:Oe(s.name)})]}),e.jsxs("div",{className:"mp-detail-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"40px",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",letterSpacing:"-0.02em",margin:0},children:Oe(s.name)}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:ce.violetM,color:ce.violet,border:`1px solid ${ce.violet}40`},children:s.category}),e.jsx("span",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:`${ce.ts}20`,color:ce.ts,border:`1px solid ${ce.ts}40`},children:s.model||"unknown"})]}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:ce.ts,marginBottom:"24px",maxWidth:"700px"},children:s.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:ce.surfaceEl,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ce.border}`},children:e.jsx(qi,{size:16,style:{color:ce.ts}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:ce.tm,textTransform:"uppercase"},children:"Created By"}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:(($e=s.creator)==null?void 0:$e.display_name)||"Platform"})]})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:ce.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(je=>e.jsx(En,{size:14,fill:je<=(s.rating||0)?ce.warning:"none",stroke:je<=(s.rating||0)?ce.warning:ce.tm},je))}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:(s.rating||0).toFixed(1)})]}),e.jsx("div",{style:{width:"1px",height:"24px",background:ce.border}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(jn,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:ce.tp},children:s.download_count||0}),e.jsx("span",{style:{fontSize:"12px",color:ce.tm},children:"Downloads"})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:F,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"14px",fontWeight:"600",cursor:"pointer",background:ce.tp,color:ce.bg,border:"none"},children:[e.jsx(jn,{size:16})," Download Agent"]}),X&&e.jsxs("button",{onClick:()=>g(!f),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 24px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.surfaceEl,color:ce.ts,border:`1px solid ${ce.borderS}`},children:[e.jsx(Ki,{size:14})," ",f?"Hide Management":"Manage Showcases"]})]})]}),f&&e.jsxs("div",{style:{background:ce.surface,border:`1px solid ${ce.violet}40`,borderRadius:"12px",padding:"24px",marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Manage Showcases"}),e.jsxs("p",{style:{fontSize:"12px",color:ce.tm,margin:0},children:["Feature projects that use this agent. Max 6 showcases.",e.jsx("span",{style:{display:"block",marginTop:"4px",color:ce.violet,fontWeight:"500"},children:" Drag & drop iterations from below or click Add Showcase"})]})]}),b.length<6&&e.jsxs("button",{onClick:Me,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.tp,color:ce.bg,border:"none"},children:[e.jsx(ir,{size:14})," Add Showcase"]})]}),e.jsxs("div",{onDrop:ke,onDragOver:he,onDragLeave:Ie,style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:b.length===0?"120px":"auto",border:K?`2px dashed ${ce.violet}`:"none",borderRadius:"8px",padding:K?"8px":"0",background:K?`${ce.violet}10`:"transparent",transition:"all 0.2s"},children:[b.map((je,Ne)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:ce.surfaceEl,borderRadius:"8px",border:`1px solid ${ce.border}`},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("button",{onClick:()=>ve(je.id,"up"),disabled:Ne===0,style:{background:"none",border:"none",color:Ne===0?ce.tm:ce.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(C0,{size:14})}),e.jsx("button",{onClick:()=>ve(je.id,"down"),disabled:Ne===b.length-1,style:{background:"none",border:"none",color:Ne===b.length-1?ce.tm:ce.ts,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(w0,{size:14})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600"},children:je.title||"Untitled"}),e.jsxs("div",{style:{fontSize:"11px",color:ce.tm},children:[je.project_name,"  v",je.iteration_version]})]}),e.jsxs("button",{onClick:()=>se(je.id),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:`${ce.danger}20`,color:ce.danger,border:"none"},children:[e.jsx(Hr,{size:14})," Remove"]})]},je.id)),b.length===0&&e.jsx("div",{style:{padding:"40px",textAlign:"center",border:`2px dashed ${K?ce.violet:ce.border}`,borderRadius:"8px",color:K?ce.violet:ce.tm,background:K?`${ce.violet}10`:"transparent",transition:"all 0.2s"},children:K?" Drop iteration here to add to showcase":"No showcases added yet. Drag & drop iterations here!"})]})]}),b.length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Showcase Gallery"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:b.map(je=>e.jsx(P6,{showcase:je,onClick:p},je.id))})]}),c.length>0&&Object.keys(v).length>0&&e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx(Hs,{size:18,style:{color:ce.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Iteration Browser"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),c.filter(je=>v[je.id]&&v[je.id].length>0).map(je=>e.jsx(O6,{iterations:v[je.id],projectId:je.id,projectName:je.name,onSelectIteration:(Ne,Q,le)=>{p({project_id:Q,iteration_id:Ne.id,title:Ne.title||`V${Ne.version}`,project_name:le,iteration_version:Ne.version})}},je.id))]}),e.jsxs("section",{style:{marginBottom:"60px"},children:[e.jsxs("div",{onClick:()=>w(!j),style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"16px"},children:[e.jsx(jh,{size:18,style:{color:ce.violet}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Agent Prompt"}),e.jsx(Rn,{size:18,style:{color:ce.tm,transform:j?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),j&&e.jsx("div",{style:{background:"#0a0a0a",border:`1px solid ${ce.border}`,borderRadius:"8px",padding:"20px",fontFamily:ce.mono,fontSize:"13px",lineHeight:"1.6",color:ce.ts,whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto"},children:s.full_prompt||"[No prompt content]"})]}),e.jsxs("section",{style:{marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",margin:0},children:"Projects using this Agent"}),e.jsx("div",{style:{height:"1px",flex:1,background:ce.border}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:[c.map(je=>e.jsxs("div",{onClick:()=>i(`/project/${je.id}`),style:{padding:"8px 16px",background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"6px",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:Ne=>Ne.currentTarget.style.borderColor=ce.violet,onMouseLeave:Ne=>Ne.currentTarget.style.borderColor=ce.border,children:[e.jsx(Ki,{size:14,style:{color:ce.tm}}),je.name]},je.id)),c.length===0&&e.jsx("div",{style:{fontSize:"14px",color:ce.tm},children:"No projects recorded yet."})]})]})]}),h&&(()=>{const je={desktop:"100%",tablet:"768px",mobile:"390px"},Q=[...v[h.project_id]||[]].sort((Xe,mt)=>Xe.version-mt.version),le=()=>{pe(!0),setTimeout(()=>pe(!1),800)},We=async()=>{try{const Xe=`${window.location.origin}/preview/${h.project_id}`;await navigator.clipboard.writeText(Xe)}catch{}},Ze=Xe=>{p({...h,iteration_id:Xe.id,title:Xe.title||`V${Xe.version}`,iteration_version:Xe.version})};return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,backgroundColor:"#050505",display:"flex",flexDirection:"column",color:ce.tp,fontFamily:"Inter, sans-serif"},children:[e.jsx("button",{onClick:()=>{p(null),D("desktop"),Se(!1)},style:{position:"absolute",top:"16px",right:"16px",zIndex:1100,background:"rgba(15,15,15,0.85)",backdropFilter:"blur(12px)",border:`1px solid ${ce.borderS}`,borderRadius:"10px",width:"36px",height:"36px",cursor:"pointer",color:ce.ts,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(kt,{size:16})}),e.jsxs("main",{style:{flex:1,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[I!=="desktop"&&e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",height:"40%",background:`radial-gradient(circle at center, ${ce.violetG} 0%, transparent 70%)`,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{width:je[I],height:I==="desktop"?"100%":"calc(100% - 100px)",maxWidth:"100%",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:I==="desktop"?"none":"0 24px 64px rgba(0,0,0,0.8)",borderRadius:I==="desktop"?"0":"12px",overflow:"hidden",border:I==="desktop"?"none":`1px solid ${ce.borderS}`},children:e.jsx("iframe",{src:`/api/preview/${h.project_id}/${h.iteration_id}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"white",opacity:W?.5:1,transition:"opacity 0.2s"},title:h.title},`${h.iteration_id}-${W}`)})]}),e.jsx("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:me?"auto":"calc(100% - 40px)",maxWidth:me?"none":"1100px",backgroundColor:"rgba(15, 15, 15, 0.85)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${ce.borderS}`,borderRadius:"16px",zIndex:1100,boxShadow:"0 8px 32px rgba(0,0,0,0.6)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:me?e.jsxs("button",{onClick:()=>Se(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",color:ce.ts},children:[e.jsx(kh,{size:14}),e.jsxs("span",{style:{fontFamily:ce.mono,fontSize:"11px",fontWeight:600},children:["v",h.iteration_version||"?"]}),e.jsx("div",{style:{width:"1px",height:"12px",backgroundColor:ce.border}}),e.jsx("span",{style:{fontSize:"10px",color:ce.tm},children:h.project_name})]}):e.jsxs("div",{style:{padding:"12px 20px",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontFamily:ce.mono,fontWeight:800,fontSize:"14px",letterSpacing:"-0.5px"},children:"guru"}),e.jsx("span",{style:{fontFamily:ce.mono,fontWeight:800,fontSize:"14px",color:ce.violet},children:".ai"})]}),e.jsx("div",{style:{width:"1px",height:"16px",backgroundColor:ce.border}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ce.tp},children:h.project_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"2px 8px",borderRadius:"100px",background:"rgba(34,197,94,0.1)",border:"1px solid rgba(34,197,94,0.2)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:ce.success}}),e.jsx("span",{style:{fontSize:"10px",color:ce.success,fontWeight:500},children:"Live"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.04)",padding:"3px",borderRadius:"8px",border:`1px solid ${ce.border}`},children:[{id:"mobile",icon:e.jsx(z0,{size:13})},{id:"tablet",icon:e.jsx(L0,{size:13})},{id:"desktop",icon:e.jsx(E0,{size:13})}].map(Xe=>e.jsx("button",{onClick:()=>D(Xe.id),style:{padding:"4px 7px",borderRadius:"6px",border:"none",backgroundColor:I===Xe.id?ce.surfaceEl:"transparent",color:I===Xe.id?ce.violet:ce.tm,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center"},children:Xe.icon},Xe.id))}),e.jsx("button",{onClick:le,style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ce.border}`,backgroundColor:"transparent",color:ce.ts,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R0,{size:14,style:W?{animation:"mpSpin 0.8s ease-in-out"}:{}})}),e.jsxs("a",{href:`/api/preview/download/${h.project_id}/${h.iteration_id}`,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.06)",border:`1px solid ${ce.border}`,color:ce.ts,fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",textDecoration:"none"},children:[e.jsx(jn,{size:13}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:We,style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:ce.violet,border:"none",color:"white",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",boxShadow:`0 0 10px ${ce.violetG}`},children:[e.jsx(A0,{size:13}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{onClick:()=>Se(!0),style:{padding:"6px",borderRadius:"8px",border:`1px solid ${ce.border}`,backgroundColor:"transparent",color:ce.tm,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Rn,{size:14})})]})]}),Q.length>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",overflowX:"auto",paddingBottom:"2px",msOverflowStyle:"none",scrollbarWidth:"none"},children:Q.map(Xe=>{const mt=h.iteration_id===Xe.id;return e.jsxs("button",{onClick:()=>Ze(Xe),style:{display:"flex",alignItems:"center",gap:"7px",padding:"7px 14px",borderRadius:"10px",backgroundColor:mt?ce.violetM:"rgba(255,255,255,0.03)",border:`1px solid ${mt?ce.violet:ce.border}`,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",flexShrink:0,color:mt?ce.tp:ce.ts},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:Xe.status==="completed"?ce.success:Xe.status==="error"?ce.danger:ce.warning}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:600,fontFamily:ce.mono},children:["v",Xe.version]}),Xe.title&&e.jsx("span",{style:{fontSize:"11px",color:mt?ce.ts:ce.tm,maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis"},children:Xe.title})]},Xe.id)})})]})}),e.jsx("style",{children:"@keyframes mpSpin { to { transform: rotate(360deg); } } div::-webkit-scrollbar { display: none; }"})]})})(),C&&(()=>{const je=ee?z.filter(le=>le.agent===t):z,Ne=(le,We)=>{const Ze=We.title||`${le.name} v${We.version}`;N({project_id:le.id,iteration_id:We.id,title:Ze,description:""}),J({project:le,iteration:We,title:Ze})},Q=async()=>{!P.project_id||!P.iteration_id||(await Z(),J(null))};return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.92)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:ce.surface,border:`1px solid ${ce.borderS}`,borderRadius:"12px",width:"100%",maxWidth:"900px",padding:"24px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 4px 0"},children:"Add to Showcase"}),e.jsx("p",{style:{fontSize:"12px",color:ce.tm,margin:0},children:"Select an iteration to feature"})]}),e.jsx("button",{onClick:()=>{R(!1),J(null)},style:{background:"none",border:"none",color:ce.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",padding:"4px",background:ce.surfaceEl,borderRadius:"8px"},children:[e.jsxs("button",{onClick:()=>V(!0),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ee?ce.violet:"transparent",color:ee?"#fff":ce.ts},children:["This Agent (",c.length,")"]}),e.jsxs("button",{onClick:()=>V(!1),style:{flex:1,padding:"8px 16px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",border:"none",transition:"all 0.2s",background:ee?"transparent":ce.violet,color:ee?ce.ts:"#fff"},children:["All Projects (",z.length,")"]})]}),je.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:ce.tm,fontSize:"14px"},children:["No projects found",ee?" for this agent":"","."]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:je.map(le=>{const We=Y[le.id]||[];return We.length===0?null:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ki,{size:14,style:{color:ce.tm}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:ce.tp},children:le.name}),e.jsxs("span",{style:{fontSize:"11px",color:ce.tm},children:[We.length," version",We.length>1?"s":""]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"12px"},children:We.map(Ze=>{const Xe=(de==null?void 0:de.iteration.id)===Ze.id;return e.jsxs("div",{onClick:()=>Ne(le,Ze),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:Xe?`2px solid ${ce.violet}`:`1px solid ${ce.border}`,background:ce.surfaceEl,transition:"all 0.2s",boxShadow:Xe?`0 0 20px ${ce.violet}40`:"none"},onMouseEnter:mt=>{Xe||(mt.currentTarget.style.borderColor=ce.violet)},onMouseLeave:mt=>{Xe||(mt.currentTarget.style.borderColor=ce.border)},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingTop:"56.25%",background:"#000",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"450%",height:"450%",transform:"scale(0.222)",transformOrigin:"top left",pointerEvents:"none"},children:e.jsx("iframe",{src:`/api/preview/${le.id}/${Ze.id}`,style:{width:"100%",height:"100%",border:"none"},title:`Preview v${Ze.version}`,loading:"lazy",sandbox:"allow-same-origin"})}),Xe&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:ce.violet,color:"#fff",padding:"4px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600"},children:" SELECTED"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:ce.tp,marginBottom:"2px"},children:Ze.title||`Version ${Ze.version}`}),e.jsxs("div",{style:{fontSize:"9px",color:ce.tm},children:["v",Ze.version]})]})]},Ze.id)})})]},le.id)})}),de&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px",borderRadius:"8px",background:ce.surfaceEl,border:`1px solid ${ce.violet}40`},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:ce.tm,marginBottom:"8px",fontWeight:"600",textTransform:"uppercase"},children:"Showcase Title"}),e.jsx("input",{type:"text",placeholder:"E.g. Dynamic Dashboard v2",value:P.title,onChange:le=>N({...P,title:le.target.value}),style:{width:"100%",background:ce.surface,border:`1px solid ${ce.border}`,borderRadius:"6px",padding:"10px",color:ce.tp,outline:"none",boxSizing:"border-box",marginBottom:"12px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{onClick:()=>J(null),style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:"transparent",color:ce.ts,border:`1px solid ${ce.borderS}`},children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:!P.title,style:{padding:"8px 16px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",background:ce.violet,color:"#fff",border:"none",opacity:P.title?1:.5},children:"Add to Showcase"})]})]})]})})})(),e.jsx("style",{children:`
        select option { background: ${ce.surface}; color: ${ce.tp}; }
        @media (max-width: 768px) {
          .mp-detail { padding: 20px 12px !important; }
          .mp-detail-header { flex-direction: column; gap: 16px !important; }
          .mp-detail-header > div:last-child { flex-direction: row; width: 100%; }
          .mp-detail-header > div:last-child button,
          .mp-detail-header > div:last-child a { flex: 1; }
        }
      `})]})}const Be={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},qn={width:"100%",backgroundColor:Be.bg,border:`1px solid ${Be.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s ease"},F6=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#14B8A6","#F97316"];function W6(){const t=qt(),[i,s]=L.useState([]),[o,u]=L.useState(null),[S,b]=L.useState([]),[l,c]=L.useState([]),[m,v]=L.useState(!0),[d,y]=L.useState(null),[_,j]=L.useState(""),[w,h]=L.useState(""),[p,f]=L.useState("all"),g=Jo(),[C,R]=L.useState(!1),[z,A]=L.useState(!1),[E,B]=L.useState(!1),[P,N]=L.useState(null),[K,U]=L.useState(!1),[ee,V]=L.useState(!1),[de,J]=L.useState({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),[Y,M]=L.useState(""),[I,D]=L.useState([]);L.useEffect(()=>{if(d){const Z=setTimeout(()=>y(null),4e3);return()=>clearTimeout(Z)}},[d]);const W=L.useCallback(async()=>{try{v(!0);const Z=new URLSearchParams;_&&Z.set("search",_),w&&Z.set("category",w);const ke=Z.toString(),[he,Ie,Oe]=await Promise.all([ae(`/api/skills${ke?`?${ke}`:""}`),ae("/api/skills/stats"),ae("/api/skills/categories")]);s(he),u(Ie),b(Oe)}catch{y("Failed to load skills data")}finally{v(!1)}},[_,w]);L.useEffect(()=>{W()},[W]);const pe=async()=>{try{const Z=await ae("/api/agents");c(Z)}catch{y("Failed to load agents list")}},me=()=>{U(!1),J({name:"",description:"",prompt:"",category:"",icon:"",color:"#8B5CF6"}),R(!0)},Se=Z=>{U(!0),N(Z),J({name:Z.name||"",description:Z.description||"",prompt:Z.prompt||"",category:Z.category||"",icon:Z.icon||"",color:Z.color||"#8B5CF6"}),R(!0)},Ee=async Z=>{N(Z),D([]),M(""),await pe();try{const ke=await ae(`/api/skills/${Z.id}`);D((ke.agents||[]).map(he=>he.name))}catch{}A(!0)},X=async Z=>{try{const ke=await ae(`/api/skills/${Z.id}`);N(ke),B(!0)}catch{y("Could not load skill details")}},F=async()=>{if(!de.name.trim()){y("Skill name is required");return}try{V(!0),K&&P?await ae(`/api/skills/${P.id}`,{method:"PUT",body:JSON.stringify(de)}):await ae("/api/skills",{method:"POST",body:JSON.stringify(de)}),R(!1),W()}catch(Z){y(Z.message||"Save failed")}finally{V(!1)}},ve=async Z=>{if(window.confirm("Delete this skill? This will unassign it from all agents."))try{await ae(`/api/skills/${Z}`,{method:"DELETE"}),W(),E&&(P==null?void 0:P.id)===Z&&B(!1)}catch(ke){y(ke.message||"Delete failed")}},se=async()=>{try{if(await ae(`/api/skills/${P.id}/bulk-assign`,{method:"POST",body:JSON.stringify({agent_names:I})}),A(!1),W(),E&&P){const Z=await ae(`/api/skills/${P.id}`);N(Z)}}catch(Z){y(Z.message||"Assignment failed")}},Me=async Z=>{try{await ae(`/api/skills/${P.id}/unassign/${Z}`,{method:"DELETE"});const ke=await ae(`/api/skills/${P.id}`);N(ke),W()}catch(ke){y(ke.message||"Unassign failed")}};return e.jsxs("div",{style:{color:Be.tp},children:[e.jsxs("div",{className:"skills-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"28px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:"0 0 6px 0",letterSpacing:"-0.02em"},children:"Skills"}),e.jsx("p",{style:{color:Be.ts,fontSize:"13px",margin:0},children:"Create and manage reusable skills for your agents"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>t("/skills/create"),style:{backgroundColor:Be.violetM,color:Be.violet,border:"1px solid rgba(139,92,246,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ft,{size:14})," Create with AI"]}),e.jsxs("button",{onClick:me,style:{backgroundColor:Be.tp,color:Be.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:14})," New Skill"]})]})]}),e.jsx("div",{className:"skills-stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"24px"},children:[{label:"Total Skills",val:(o==null?void 0:o.total)||0,icon:e.jsx(Bs,{size:13})},{label:"Assignments",val:(o==null?void 0:o.totalAssignments)||0,icon:e.jsx(px,{size:13})},{label:"Unique Agents",val:(o==null?void 0:o.uniqueAgents)||0,icon:e.jsx(Ls,{size:13})},{label:"Categories",val:(S==null?void 0:S.length)||0,icon:e.jsx(WS,{size:13})}].map((Z,ke)=>e.jsxs("div",{style:{backgroundColor:Be.surface,border:`1px solid ${Be.border}`,borderRadius:"8px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:Be.tm,fontSize:"10px",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:[Z.icon," ",Z.label]}),e.jsx("div",{style:{fontSize:"22px",fontWeight:"700"},children:Z.val})]},ke))}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Ps,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Be.tm}}),e.jsx("input",{placeholder:"Search skills...",value:_,onChange:Z=>j(Z.target.value),style:{...qn,paddingLeft:"34px"}})]}),e.jsxs("div",{style:{position:"relative",minWidth:"170px"},children:[e.jsx(MS,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:Be.tm,pointerEvents:"none"}}),e.jsxs("select",{value:w,onChange:Z=>h(Z.target.value),style:{...qn,paddingLeft:"34px",appearance:"none",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"All Categories"}),S.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0",borderBottom:`1px solid ${Be.border}`,marginBottom:"20px"},children:[{key:"all",label:"All Skills",count:i.length},{key:"mine",label:"My Skills",count:i.filter(Z=>Z.created_by===(g==null?void 0:g.userId)).length},{key:"platform",label:"Platform",count:i.filter(Z=>!Z.created_by||Z.created_by!==(g==null?void 0:g.userId)).length}].map(Z=>e.jsxs("button",{onClick:()=>f(Z.key),style:{background:"none",border:"none",cursor:"pointer",padding:"10px 16px",fontSize:"13px",fontWeight:"500",color:p===Z.key?Be.violet:Be.ts,borderBottom:p===Z.key?`2px solid ${Be.violet}`:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[Z.label,e.jsx("span",{style:{fontSize:"11px",padding:"1px 6px",borderRadius:"100px",backgroundColor:p===Z.key?"rgba(139,92,246,0.2)":"rgba(255,255,255,0.04)",color:p===Z.key?Be.violet:Be.tm},children:Z.count})]},Z.key))}),m?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"80px",color:Be.tm,fontSize:"13px"},children:"Loading..."}):(()=>{const Z=i.filter(ke=>p==="mine"?ke.created_by===(g==null?void 0:g.userId):p==="platform"?!ke.created_by||ke.created_by!==(g==null?void 0:g.userId):!0);return Z.length===0?e.jsxs("div",{style:{border:`1px dashed ${Be.borderS}`,borderRadius:"12px",padding:"60px 20px",textAlign:"center"},children:[e.jsx(Bs,{size:32,style:{color:Be.tm,marginBottom:"12px"}}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 6px 0"},children:"No skills found"}),e.jsx("p",{style:{color:Be.tm,fontSize:"12px",margin:"0 0 16px 0"},children:_||w?"Try adjusting your filters.":"Create your first skill to get started."}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[!_&&!w&&e.jsxs("button",{onClick:me,style:{backgroundColor:Be.violetM,color:Be.violet,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(ir,{size:14})," Create Skill"]}),i.length===0&&e.jsxs("button",{onClick:async()=>{try{await ae("/api/seed/demo",{method:"POST"}),await W()}catch(ke){y(ke.message||"Failed to load demo data")}},style:{backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[e.jsx(Yr,{size:14})," Load Demo Data"]})]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px"},children:Z.map(ke=>{const he=!ke.created_by||ke.created_by===(g==null?void 0:g.userId),Ie=he;return e.jsxs("div",{style:{backgroundColor:Be.surface,border:`1px solid ${Be.border}`,borderRadius:"8px",padding:"16px",transition:"all 0.2s",cursor:"pointer",position:"relative"},onMouseEnter:Oe=>{Oe.currentTarget.style.borderColor=ke.color||Be.violet,Oe.currentTarget.style.boxShadow=`0 4px 20px ${ke.color||Be.violet}15`},onMouseLeave:Oe=>{Oe.currentTarget.style.borderColor=Be.border,Oe.currentTarget.style.boxShadow="none"},onClick:()=>X(ke),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:ke.color||Be.violet,flexShrink:0}}),e.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:ke.name}),he?e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:Be.success,backgroundColor:"rgba(34,197,94,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"mine"}):e.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"platform"})]}),e.jsx("span",{style:{backgroundColor:`${ke.color||Be.violet}20`,color:ke.color||Be.violet,padding:"2px 8px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",flexShrink:0},children:ke.category||"general"})]}),e.jsx("p",{style:{color:Be.ts,fontSize:"12px",lineHeight:"1.5",margin:"0 0 14px 0",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"36px"},children:ke.description||"No description provided."}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",color:Be.tm,fontSize:"11px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ls,{size:11}),e.jsxs("span",{children:[ke.agent_count||0," agent",(ke.agent_count||0)!==1?"s":""]})]}),ke.total_files>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Be.violet},children:[e.jsx(Ms,{size:11}),e.jsxs("span",{children:[ke.total_files," file",ke.total_files!==1?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px"},onClick:Oe=>Oe.stopPropagation(),children:[ke.total_files>0&&e.jsx("button",{onClick:()=>t(`/skills/${ke.id}/edit`),style:{...wl,color:Be.violet},title:"Edit in Editor",children:e.jsx(Ms,{size:13})}),e.jsx("button",{onClick:()=>Ee(ke),style:wl,title:"Assign to Agents",children:e.jsx(px,{size:13})}),he&&e.jsx("button",{onClick:()=>Se(ke),style:wl,title:"Edit",children:e.jsx($u,{size:13})}),Ie&&e.jsx("button",{onClick:()=>ve(ke.id),style:{...wl,color:Be.danger},title:"Delete",children:e.jsx(Hr,{size:13})})]})]})]},ke.id)})})})(),C&&e.jsx("div",{style:Om,onClick:()=>R(!1),children:e.jsxs("div",{style:{...$m,width:"500px"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{style:bu,children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:0},children:K?"Edit Skill":"Create New Skill"}),e.jsx("button",{onClick:()=>R(!1),style:Su,children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Io,children:"Name"}),e.jsx("input",{style:qn,placeholder:"e.g. Code Reviewer",value:de.name,onChange:Z=>J({...de,name:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Be.violet,onBlur:Z=>Z.target.style.borderColor=Be.border})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:Io,children:"Category"}),e.jsx("input",{style:qn,placeholder:"general",value:de.category,onChange:Z=>J({...de,category:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Be.violet,onBlur:Z=>Z.target.style.borderColor=Be.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:Io,children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",paddingTop:"2px"},children:F6.map(Z=>e.jsx("div",{onClick:()=>J({...de,color:Z}),style:{width:"22px",height:"22px",borderRadius:"4px",cursor:"pointer",backgroundColor:Z,border:de.color===Z?"2px solid #fff":"2px solid transparent",transition:"border-color 0.15s"}},Z))})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Io,children:"Description"}),e.jsx("textarea",{style:{...qn,minHeight:"50px",resize:"vertical"},placeholder:"Briefly describe what this skill does...",value:de.description,onChange:Z=>J({...de,description:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Be.violet,onBlur:Z=>Z.target.style.borderColor=Be.border})]}),e.jsxs("div",{children:[e.jsx("label",{style:Io,children:"Prompt / Instructions"}),e.jsx("textarea",{style:{...qn,minHeight:"120px",fontFamily:Be.mono,fontSize:"12px",resize:"vertical"},placeholder:"The actual instructions or prompt snippet for this skill...",value:de.prompt,onChange:Z=>J({...de,prompt:Z.target.value}),onFocus:Z=>Z.target.style.borderColor=Be.violet,onBlur:Z=>Z.target.style.borderColor=Be.border})]})]}),e.jsxs("div",{style:Fm,children:[e.jsx("button",{onClick:()=>R(!1),style:Sl,children:"Cancel"}),e.jsx("button",{onClick:F,disabled:ee,style:{...Wm,opacity:ee?.6:1},children:ee?"Saving...":K?"Save Changes":"Create Skill"})]})]})}),z&&P&&e.jsx("div",{style:Om,onClick:()=>A(!1),children:e.jsxs("div",{style:{...$m,width:"420px"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{style:bu,children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"15px",fontWeight:"600",margin:"0 0 2px 0"},children:"Assign to Agents"}),e.jsx("span",{style:{fontSize:"11px",color:Be.tm},children:P.name})]}),e.jsx("button",{onClick:()=>A(!1),style:Su,children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{padding:"14px"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[e.jsx(Ps,{size:13,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:Be.tm}}),e.jsx("input",{style:{...qn,paddingLeft:"30px",fontSize:"12px"},placeholder:"Search agents...",value:Y,onChange:Z=>M(Z.target.value)})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:`1px solid ${Be.border}`,borderRadius:"6px"},children:l.filter(Z=>Z.name.toLowerCase().includes(Y.toLowerCase())).map(Z=>{const ke=I.includes(Z.name);return e.jsxs("div",{onClick:()=>{D(he=>ke?he.filter(Ie=>Ie!==Z.name):[...he,Z.name])},style:{display:"flex",alignItems:"center",gap:"10px",padding:"9px 12px",cursor:"pointer",borderBottom:`1px solid ${Be.border}`,backgroundColor:ke?Be.violetG:"transparent",transition:"background-color 0.15s"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",border:`1.5px solid ${ke?Be.violet:Be.tm}`,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ke?Be.violet:"transparent",transition:"all 0.15s",flexShrink:0},children:ke&&e.jsx(rr,{size:10,color:"#fff"})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"500"},children:Z.name}),Z.category&&e.jsx("div",{style:{fontSize:"10px",color:Be.tm},children:Z.category})]})]},Z.name)})}),e.jsxs("div",{style:{fontSize:"11px",color:Be.tm,marginTop:"8px"},children:[I.length," agent",I.length!==1?"s":""," selected"]})]}),e.jsxs("div",{style:Fm,children:[e.jsx("button",{onClick:()=>A(!1),style:Sl,children:"Cancel"}),e.jsxs("button",{onClick:se,disabled:I.length===0,style:{...Wm,opacity:I.length===0?.5:1},children:["Assign ",I.length," Agent",I.length!==1?"s":""]})]})]})}),E&&P&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:99},onClick:()=>B(!1)}),e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"450px",height:"100vh",backgroundColor:Be.surface,borderLeft:`1px solid ${Be.border}`,zIndex:100,display:"flex",flexDirection:"column",boxShadow:"-10px 0 30px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{...bu,borderBottom:`1px solid ${Be.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:P.color||Be.violet}}),e.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:P.name})]}),e.jsx("button",{onClick:()=>B(!1),style:Su,children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",flex:1,overflowY:"auto"},children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:e.jsx("span",{style:{backgroundColor:`${P.color||Be.violet}20`,color:P.color||Be.violet,padding:"3px 10px",borderRadius:"100px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:P.category||"general"})}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:_u,children:"Description"}),e.jsx("p",{style:{color:Be.ts,fontSize:"13px",lineHeight:"1.6",margin:0},children:P.description||"No description."})]}),P.prompt&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:_u,children:"Prompt / Instructions"}),e.jsx("div",{style:{backgroundColor:Be.bg,border:`1px solid ${Be.border}`,borderRadius:"6px",padding:"12px",fontFamily:Be.mono,fontSize:"11px",color:Be.ts,whiteSpace:"pre-wrap",lineHeight:"1.6",maxHeight:"250px",overflowY:"auto"},children:P.prompt})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("h3",{style:{..._u,margin:0},children:["Assigned Agents (",(P.agents||[]).length,")"]}),e.jsxs("button",{onClick:()=>Ee(P),style:{background:"none",border:"none",color:Be.violet,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",fontWeight:"500"},children:[e.jsx(ir,{size:12})," Add"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(P.agents||[]).length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:Be.tm,fontSize:"12px",border:`1px dashed ${Be.border}`,borderRadius:"6px"},children:"No agents assigned yet"}):(P.agents||[]).map(Z=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:Be.surfaceEl,borderRadius:"6px",border:`1px solid ${Be.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ls,{size:12,style:{color:Be.tm}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:Z.name}),Z.category&&e.jsx("span",{style:{fontSize:"9px",color:Be.tm,padding:"1px 5px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"100px"},children:Z.category})]}),e.jsx("button",{onClick:()=>Me(Z.name),style:{background:"none",border:"none",color:Be.tm,cursor:"pointer",padding:"4px",display:"flex"},title:"Unassign",children:e.jsx(kt,{size:13})})]},Z.name))})]})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${Be.border}`,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{B(!1),t(`/skills/${P.id}/edit`)},style:{width:"100%",padding:"8px",borderRadius:"4px",backgroundColor:Be.violetM,color:Be.violet,border:"1px solid rgba(139,92,246,0.3)",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ft,{size:13})," Open in Editor"]}),(!P.created_by||P.created_by===(g==null?void 0:g.userId))&&e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:()=>Se(P),style:{...Sl,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx($u,{size:13})," Edit"]}),e.jsxs("button",{onClick:()=>ve(P.id),style:{...Sl,color:Be.danger,borderColor:`${Be.danger}33`,flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Hr,{size:13})," Delete"]})]})]})]})]}),d&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:Be.danger,color:"#fff",padding:"10px 20px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.4)",zIndex:200,fontSize:"13px"},children:[e.jsx(Ai,{size:16}),e.jsx("span",{children:d}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:14})})]}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .skills-stats-grid { grid-template-columns: repeat(2, 1fr) !important; }
          .skills-header { flex-direction: column !important; align-items: flex-start !important; gap: 12px !important; }
          .skills-search-row { flex-direction: column !important; }
          .skills-search-row > div:last-child { min-width: 0 !important; width: 100% !important; }
          .skills-grid { grid-template-columns: 1fr !important; }
          .skills-modal-content { width: 95vw !important; max-width: 95vw !important; }
          .skills-drawer {
            width: 100vw !important;
            border-left: none !important;
          }
        }
        @media (max-width: 480px) {
          .skills-stats-grid { grid-template-columns: 1fr !important; }
        }
      `})]})}const Om={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:110},$m={backgroundColor:Be.surface,border:`1px solid ${Be.border}`,borderRadius:"8px",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",overflow:"hidden"},bu={padding:"14px 20px",borderBottom:`1px solid ${Be.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},Fm={padding:"12px 20px",borderTop:`1px solid ${Be.border}`,display:"flex",justifyContent:"flex-end",gap:"10px",backgroundColor:Be.surfaceEl},Wm={backgroundColor:Be.tp,color:Be.bg,border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},Sl={backgroundColor:Be.surfaceEl,color:Be.ts,border:`1px solid ${Be.borderS}`,borderRadius:"4px",padding:"8px 16px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},wl={background:"none",border:"none",color:Be.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.15s"},Io={display:"block",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",color:Be.tm,marginBottom:"6px",letterSpacing:"0.05em"},_u={fontSize:"11px",fontWeight:"600",textTransform:"uppercase",color:Be.tm,letterSpacing:"0.08em",marginBottom:"10px"},Su={background:"none",border:"none",color:Be.tm,cursor:"pointer",display:"flex"},ye={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace'},Cl={width:"100%",backgroundColor:ye.bg,border:`1px solid ${ye.border}`,borderRadius:"6px",padding:"10px 12px",color:"#fff",fontSize:"13px",outline:"none",boxSizing:"border-box",fontFamily:"inherit"};function Nm(t){if(!t||!t.trim())return[{id:crypto.randomUUID(),type:"paragraph",content:""}];const i=t.split(`
`),s=[];let o=0;for(;o<i.length;){const u=i[o];if(!u.trim()){o++;continue}if(u.startsWith("```")){const b=u.slice(3).trim(),l=[];for(o++;o<i.length&&!i[o].startsWith("```");)l.push(i[o]),o++;o++,s.push({id:crypto.randomUUID(),type:"code",content:l.join(`
`),lang:b});continue}if(u.startsWith("### ")){s.push({id:crypto.randomUUID(),type:"heading3",content:u.slice(4)}),o++;continue}if(u.startsWith("## ")){s.push({id:crypto.randomUUID(),type:"heading2",content:u.slice(3)}),o++;continue}if(u.startsWith("# ")){s.push({id:crypto.randomUUID(),type:"heading1",content:u.slice(2)}),o++;continue}if(u.match(/^---+\s*$/)){s.push({id:crypto.randomUUID(),type:"divider",content:""}),o++;continue}if(u.startsWith("> ")){const b=[];for(;o<i.length&&i[o].startsWith("> ");)b.push(i[o].slice(2)),o++;s.push({id:crypto.randomUUID(),type:"callout",content:b.join(`
`)});continue}if(u.match(/^[-*] /)){const b=[];for(;o<i.length&&i[o].match(/^[-*] /);)b.push(i[o].replace(/^[-*] /,"")),o++;s.push({id:crypto.randomUUID(),type:"list",content:b.join(`
`)});continue}if(u.match(/^\d+\. /)){const b=[];for(;o<i.length&&i[o].match(/^\d+\. /);)b.push(i[o].replace(/^\d+\. /,"")),o++;s.push({id:crypto.randomUUID(),type:"numbered",content:b.join(`
`)});continue}if(u.startsWith("|")){const b=[];for(;o<i.length&&i[o].startsWith("|");)b.push(i[o]),o++;s.push({id:crypto.randomUUID(),type:"table",content:b.join(`
`)});continue}const S=[];for(;o<i.length&&i[o].trim()&&!i[o].startsWith("#")&&!i[o].startsWith("```")&&!i[o].startsWith("> ")&&!i[o].startsWith("---")&&!i[o].startsWith("|")&&!i[o].match(/^[-*] /)&&!i[o].match(/^\d+\. /);)S.push(i[o]),o++;S.length>0&&s.push({id:crypto.randomUUID(),type:"paragraph",content:S.join(`
`)})}return s.length>0?s:[{id:crypto.randomUUID(),type:"paragraph",content:""}]}function N6(t){return t.map(i=>{switch(i.type){case"heading1":return`# ${i.content}`;case"heading2":return`## ${i.content}`;case"heading3":return`### ${i.content}`;case"code":return`\`\`\`${i.lang||""}
${i.content}
\`\`\``;case"list":return i.content.split(`
`).map(s=>`- ${s}`).join(`
`);case"numbered":return i.content.split(`
`).map((s,o)=>`${o+1}. ${s}`).join(`
`);case"callout":return i.content.split(`
`).map(s=>`> ${s}`).join(`
`);case"table":return i.content;case"divider":return"---";default:return i.content}}).join(`

`)}function _1({item:t,depth:i=0,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b}){const l=t.type==="directory",c=s===t.path,m=u.includes(t.path);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"5px 10px",paddingLeft:`${12+i*16}px`,fontSize:"12px",cursor:"pointer",borderRadius:"4px",margin:"1px 6px",color:c?ye.violet:ye.ts,backgroundColor:c?ye.violetG:"transparent",transition:"background 0.1s"},onClick:()=>l?S(t.path):o(t.path),onMouseEnter:v=>{c||(v.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)")},onMouseLeave:v=>{c||(v.currentTarget.style.backgroundColor="transparent")},children:[l?m?e.jsx(Rn,{size:12,style:{flexShrink:0}}):e.jsx(hr,{size:12,style:{flexShrink:0}}):null,l?e.jsx(IS,{size:13,style:{flexShrink:0,color:ye.tm}}):e.jsx(RS,{size:13,style:{flexShrink:0,color:ye.tm}}),e.jsx("span",{style:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name})]}),l&&m&&t.children&&t.children.map((v,d)=>e.jsx(_1,{item:v,depth:i+1,currentFilePath:s,onOpenFile:o,expandedFolders:u,onToggleFolder:S,onDeleteFile:b},v.path||d))]})}const H6=[{id:"paragraph",label:"Text",icon:Mo},{id:"heading1",label:"Heading 1",icon:Mo},{id:"heading2",label:"Heading 2",icon:Mo},{id:"heading3",label:"Heading 3",icon:Mo},{id:"code",label:"Code Block",icon:jh},{id:"list",label:"Bullet List",icon:Ou},{id:"numbered",label:"Numbered List",icon:Ou},{id:"table",label:"Table",icon:Ww},{id:"callout",label:"Callout",icon:Ai},{id:"divider",label:"Divider",icon:ow}];function Hm(){const{id:t}=ts(),i=qt(),[s]=j_(),o=s.get("agent"),u=!t,[S,b]=L.useState(null),[l,c]=L.useState(t||null),[m,v]=L.useState([]),[d,y]=L.useState(null),[_,j]=L.useState([]),[w,h]=L.useState(null),[p,f]=L.useState({visible:!1,x:0,y:0,blockId:null}),[g,C]=L.useState(""),[R,z]=L.useState(null),[A,E]=L.useState(u),[B,P]=L.useState([]),[N,K]=L.useState(!0),[U,ee]=L.useState("chat"),[V,de]=L.useState([]),[J,Y]=L.useState(""),[M,I]=L.useState(!1),[D,W]=L.useState([]),[pe,me]=L.useState(!1),[Se,Ee]=L.useState(null),[X,F]=L.useState(!1),[ve,se]=L.useState(null),[Me,Z]=L.useState(""),[ke,he]=L.useState(!1),[Ie,Oe]=L.useState(""),[$e,je]=L.useState(!1),[Ne,Q]=L.useState(!1),[le,We]=L.useState(!1),[Ze,Xe]=L.useState(""),[mt,Jt]=L.useState(!1),[Et,Rt]=L.useState(null),[Mt,xt]=L.useState(!1),Pt=L.useRef(null),ht=L.useRef(null);L.useEffect(()=>{if(ve){const O=setTimeout(()=>se(null),4e3);return()=>clearTimeout(O)}},[ve]),L.useEffect(()=>{t?zr(t):pr()},[t]),L.useEffect(()=>{var O;(O=ht.current)==null||O.scrollIntoView({behavior:"smooth"})},[V]);const zr=async O=>{try{const re=await ae(`/api/skills/${O}`);b(re),c(O);let De=(await ae(`/api/skills/${O}/files`)).tree||[];if(!De||De.length===0)try{De=(await ae(`/api/skills/${O}/init`,{method:"POST",body:JSON.stringify({template:"blank"})})).tree||[]}catch(ft){console.warn("Auto-init failed:",ft)}v(De),W(De.filter(ft=>ft.type==="directory").map(ft=>ft.path)),re.entry_point&&li(De).includes(re.entry_point)&&fr(O,re.entry_point),await Ii(O,re.name)}catch(re){se("Failed to load skill"),console.error(re)}},pr=async()=>{try{const O=await ae("/api/skill-creator/templates");P(O.templates||[])}catch(O){console.error(O)}},Ii=async(O,re)=>{var _e;try{const De=await ae("/api/skill-creator/conversations",{method:"POST",body:JSON.stringify({name:re||"New Skill",skillId:O})});Ee((_e=De.conversation)==null?void 0:_e.id)}catch(De){console.error(De)}},fr=async(O,re)=>{X&&d&&await Lr(O);try{const _e=await ae(`/api/skills/${O}/files/${re}`);y(re),j(Nm(_e.content||"")),h(null),F(!1),C("")}catch(_e){se("Failed to open file"),console.error(_e)}},Lr=async O=>{const re=O||l;if(!(!d||!re)){me(!0);try{const _e=N6(_),De=await ae(`/api/skills/${re}/files/${d}`,{method:"PUT",body:JSON.stringify({content:_e})});v(De.tree||m),F(!1)}catch{se("Failed to save file")}finally{me(!1)}}},kr=async O=>{try{const re=Date.now().toString(36).slice(-4),De=`${O==="blank"?"New Skill":O.replace(/-/g," ").replace(/\b\w/g,At=>At.toUpperCase())} ${re}`,ft=(await ae("/api/skills",{method:"POST",body:JSON.stringify({name:De,description:"",category:"general"})})).id;if(await ae(`/api/skills/${ft}/init`,{method:"POST",body:JSON.stringify({template:O})}),o)try{await ae(`/api/skills/${ft}/assign/${o}`,{method:"POST"})}catch(At){console.error("Auto-assign failed:",At)}E(!1),i(`/skills/${ft}/edit${o?`?agent=${o}`:""}`,{replace:!0})}catch(re){se(re.message||"Failed to create skill")}},oe=O=>{W(re=>re.includes(O)?re.filter(_e=>_e!==O):[...re,O])},He=async()=>{if(!(!Me.trim()||!l))try{const O=await ae(`/api/skills/${l}/files/${Me.trim()}`,{method:"PUT",body:JSON.stringify({content:""})});v(O.tree||m),he(!1),Z(""),fr(l,Me.trim())}catch{se("Failed to create file")}},qe=async()=>{if(!(!Ie.trim()||!l))try{const O=await ae(`/api/skills/${l}/dirs`,{method:"POST",body:JSON.stringify({path:Ie.trim()})});v(O.tree||m),je(!1),Oe(""),W(re=>[...re,Ie.trim()])}catch{se("Failed to create folder")}},pt=async O=>{if(l)try{const re=await ae(`/api/skills/${l}/files/${O}`,{method:"DELETE"});v(re.tree||m),d===O&&(y(null),j([]))}catch{se("Failed to delete file")}},wt=(O,re)=>{j(_e=>_e.map(De=>De.id===O?{...De,content:re}:De)),F(!0),C(""),z(null),Xr(O,re)},Qt=(O,re)=>{j(_e=>_e.map(De=>De.id===O?{...De,type:re}:De)),f({visible:!1,x:0,y:0,blockId:null}),F(!0)},gt=(O,re="paragraph")=>{const _e={id:crypto.randomUUID(),type:re,content:""};if(!O)j(De=>[...De,_e]);else{const De=_.findIndex(ft=>ft.id===O),ct=[..._];ct.splice(De+1,0,_e),j(ct)}h(_e.id),F(!0)},Gt=O=>{_.length<=1||(j(re=>re.filter(_e=>_e.id!==O)),h(null),F(!0))},Ir=(O,re)=>{const _e=_.find(De=>De.id===re);if(O.key==="/"&&_e&&_e.content===""){O.preventDefault();const De=O.target.getBoundingClientRect();f({visible:!0,x:De.left,y:De.bottom+4,blockId:re});return}if(O.key==="Tab"&&g&&R===re){O.preventDefault(),wt(re,_e.content+g),C(""),z(null);return}if(O.key==="Escape"){C(""),z(null),f({...p,visible:!1}),h(null);return}if(O.key==="Enter"&&!O.shiftKey&&(_e==null?void 0:_e.type)!=="code"&&(_e==null?void 0:_e.type)!=="table"){O.preventDefault(),gt(re);return}O.key==="Backspace"&&(_e==null?void 0:_e.content)===""&&_.length>1&&(O.preventDefault(),Gt(re))},Xr=L.useCallback((O,re)=>{!re||re.length<10||!Se||(clearTimeout(Pt.current),Pt.current=setTimeout(async()=>{try{const _e=_.findIndex(ft=>ft.id===O),De=_.slice(Math.max(0,_e-5),_e).map(ft=>ft.content),ct=await ae(`/api/skill-creator/conversations/${Se}/complete`,{method:"POST",body:JSON.stringify({fileContext:d,blocksBefore:De,currentBlock:re,cursorPosition:re.length,skillContext:{name:S==null?void 0:S.name,files:li(m)}})});ct.completion&&(C(ct.completion),z(O))}catch{}},2e3))},[_,Se,d,S,m]),oi=async()=>{if(!J.trim()||!Se)return;const O=J.trim();Y(""),de(re=>[...re,{role:"user",content:O}]),I(!0);try{const re=await ae(`/api/skill-creator/conversations/${Se}/messages`,{method:"POST",body:JSON.stringify({message:O,fileContext:d})});re.message&&de(_e=>[..._e,{role:"assistant",content:re.message.content}])}catch(re){de(_e=>[..._e,{role:"assistant",content:"Error: "+(re.message||"Failed to get response")}])}finally{I(!1)}},Dr=async()=>{if(!(!Se||!d)){Q(!0);try{const O=await ae(`/api/skill-creator/conversations/${Se}/generate-file`,{method:"POST",body:JSON.stringify({filePath:d})});O.content&&(j(Nm(O.content)),F(!0),de(re=>[...re,{role:"assistant",content:`Generated content for ${d} (${O.content.length} chars). Review it in the editor and click Save when ready.`}]))}catch(O){se(O.message||"Generate failed")}finally{Q(!1)}}},Ur=async()=>{if(Se){Q(!0);try{const O=await ae(`/api/skill-creator/conversations/${Se}/generate-structure`,{method:"POST",body:JSON.stringify({})});if(O.tree){v(O.tree);const re=[],_e=De=>{for(const ct of De)ct.type==="directory"&&(re.push(ct.path),ct.children&&_e(ct.children))};_e(O.tree),W(re),l&&fr(l,"SKILL.md"),de(De=>[...De,{role:"assistant",content:`Generated ${O.files} files (${O.totalFiles} total). Check the file tree on the left  all files have been created with detailed content. Click any file to view/edit it.`}])}}catch(O){se(O.message||"Generate all failed  try describing your skill in the chat first")}finally{Q(!1)}}},ai=()=>{Xe((S==null?void 0:S.name)||""),We(!0)},Xi=async()=>{const O=Ze.trim();if(!O||!l||O===(S==null?void 0:S.name)){We(!1);return}Jt(!0);try{const re=await ae(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:O})});b(_e=>({..._e,...re})),We(!1)}catch(re){se(re.message||"Failed to rename skill")}finally{Jt(!1)}},Mr=async(O="all")=>{if(Se){xt(!0);try{const re=await ae(`/api/skill-creator/conversations/${Se}/suggestions`,{method:"POST",body:JSON.stringify({type:O})});Rt(re.suggestions)}catch(re){se(re.message||"Failed to load suggestions")}finally{xt(!1)}}},vr=async O=>{if(l){Jt(!0);try{const re=await ae(`/api/skills/${l}`,{method:"PUT",body:JSON.stringify({name:O})});b(_e=>({..._e,...re}))}catch(re){se(re.message||"Failed to apply name")}finally{Jt(!1)}}};function li(O){const re=[];function _e(De){for(const ct of De)re.push(ct.path||ct.name),ct.children&&_e(ct.children)}return _e(O||[]),re}return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 56px)",backgroundColor:ye.bg,color:ye.tp,overflow:"hidden"},children:[o&&e.jsxs("div",{style:{padding:"8px 20px",display:"flex",alignItems:"center",gap:"8px",background:"linear-gradient(90deg, rgba(6,182,212,0.12) 0%, rgba(139,92,246,0.08) 100%)",borderBottom:"1px solid rgba(6,182,212,0.2)",fontSize:"12px",flexShrink:0},children:[e.jsx(Tl,{size:13,style:{color:"#06b6d4"}}),e.jsx("span",{style:{color:ye.ts},children:"This skill will be auto-linked to agent"}),e.jsx("span",{style:{fontWeight:600,color:"#06b6d4",padding:"1px 8px",borderRadius:"100px",background:"rgba(6,182,212,0.15)",fontSize:"11px"},children:o}),e.jsx("button",{onClick:()=>i(`/agents/${o}`),style:{marginLeft:"auto",background:"none",border:"none",color:ye.tm,cursor:"pointer",fontSize:"11px",textDecoration:"underline"},children:"Back to agent"})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"240px",borderRight:`1px solid ${ye.border}`,display:"flex",flexDirection:"column",backgroundColor:ye.surface,flexShrink:0},children:[e.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${ye.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:0},children:[e.jsx("button",{onClick:()=>i("/skills"),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",padding:"2px",display:"flex",flexShrink:0},children:e.jsx(wh,{size:14})}),le?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0},children:[e.jsx("input",{autoFocus:!0,value:Ze,onChange:O=>Xe(O.target.value),onKeyDown:O=>{O.key==="Enter"&&Xi(),O.key==="Escape"&&We(!1)},style:{...Cl,padding:"4px 8px",fontSize:"12px",fontWeight:600},disabled:mt}),e.jsx("button",{onClick:Xi,disabled:mt,style:{background:"none",border:"none",color:ye.success,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(rr,{size:13})}),e.jsx("button",{onClick:()=>We(!1),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",display:"flex",flexShrink:0},children:e.jsx(kt,{size:13})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1,minWidth:0,cursor:"pointer"},onClick:ai,title:"Click to rename",children:[e.jsx("span",{style:{fontWeight:600,fontSize:"13px",letterSpacing:"-0.01em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(S==null?void 0:S.name)||"New Skill"}),e.jsx(Qd,{size:10,style:{color:ye.tm,flexShrink:0,opacity:.5}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",flexShrink:0},children:[e.jsx("button",{onClick:()=>he(!0),style:{background:"none",border:"none",color:ye.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New File",children:e.jsx(wS,{size:14})}),e.jsx("button",{onClick:()=>je(!0),style:{background:"none",border:"none",color:ye.ts,cursor:"pointer",padding:"4px",display:"flex"},title:"New Folder",children:e.jsx(AS,{size:14})})]})]}),ke&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ye.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:Me,onChange:O=>Z(O.target.value),placeholder:"path/file.md",onKeyDown:O=>O.key==="Enter"&&He(),style:{...Cl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:He,style:{background:"none",border:"none",color:ye.success,cursor:"pointer",display:"flex"},children:e.jsx(rr,{size:14})}),e.jsx("button",{onClick:()=>he(!1),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:14})})]}),$e&&e.jsxs("div",{style:{padding:"6px 10px",borderBottom:`1px solid ${ye.border}`,display:"flex",gap:"4px"},children:[e.jsx("input",{value:Ie,onChange:O=>Oe(O.target.value),placeholder:"folder-name",onKeyDown:O=>O.key==="Enter"&&qe(),style:{...Cl,padding:"6px 8px",fontSize:"11px"},autoFocus:!0}),e.jsx("button",{onClick:qe,style:{background:"none",border:"none",color:ye.success,cursor:"pointer",display:"flex"},children:e.jsx(rr,{size:14})}),e.jsx("button",{onClick:()=>je(!1),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:14})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",paddingTop:"8px"},children:m.length===0?e.jsx("div",{style:{padding:"24px 16px",textAlign:"center",color:ye.tm,fontSize:"11px"},children:"No files yet. Use a template or create a file."}):m.map((O,re)=>e.jsx(_1,{item:O,currentFilePath:d,onOpenFile:_e=>fr(l,_e),expandedFolders:D,onToggleFolder:oe,onDeleteFile:pt},O.path||re))}),e.jsx("div",{style:{padding:"10px",borderTop:`1px solid ${ye.border}`},children:e.jsxs("button",{onClick:()=>E(!0),style:{width:"100%",padding:"7px",borderRadius:"6px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`,color:ye.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ft,{size:12})," From Template"]})})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 20px",borderBottom:`1px solid ${ye.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:ye.bg,flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:ye.ts},children:[e.jsx(Ms,{size:12,style:{color:ye.tm}}),e.jsx("span",{style:{color:ye.tm},children:(S==null?void 0:S.name)||"Skill"}),d&&e.jsxs(e.Fragment,{children:[e.jsx(hr,{size:10,style:{color:ye.tm}}),e.jsx("span",{style:{color:ye.tp,fontWeight:500},children:d})]}),X&&e.jsx("span",{style:{fontSize:"10px",color:ye.warning,marginLeft:"6px"},children:"unsaved"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>Lr(),disabled:pe||!X,style:{padding:"5px 14px",borderRadius:"4px",backgroundColor:X?ye.tp:ye.surfaceEl,color:X?ye.bg:ye.tm,border:"none",fontSize:"11px",fontWeight:600,cursor:X?"pointer":"default",display:"flex",alignItems:"center",gap:"5px",opacity:X?1:.5},children:[e.jsx(Zl,{size:12})," ",pe?"Saving...":"Save"]}),e.jsx("button",{onClick:()=>K(!N),style:{background:N?ye.violetG:ye.surfaceEl,border:`1px solid ${N?ye.violet:ye.border}`,color:N?ye.violet:ye.ts,padding:"5px",borderRadius:"4px",cursor:"pointer",display:"flex"},children:e.jsx(hw,{size:14})})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"40px 0"},children:d?e.jsx("div",{style:{maxWidth:"760px",margin:"0 auto",padding:"0 40px"},children:_.map((O,re)=>e.jsxs("div",{style:{position:"relative",marginBottom:"2px",group:!0},onMouseEnter:_e=>{const De=_e.currentTarget.querySelector(".add-btn");De&&(De.style.opacity="1")},onMouseLeave:_e=>{const De=_e.currentTarget.querySelector(".add-btn");De&&(De.style.opacity="0")},children:[w===O.id?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{autoFocus:!0,value:O.content,onChange:_e=>wt(O.id,_e.target.value),onKeyDown:_e=>Ir(_e,O.id),style:{width:"100%",backgroundColor:"rgba(255,255,255,0.02)",border:`1px solid ${ye.border}`,borderRadius:"4px",color:ye.tp,outline:"none",boxSizing:"border-box",resize:"none",padding:"8px 12px",fontSize:O.type==="heading1"?"24px":O.type==="heading2"?"18px":O.type==="heading3"?"15px":"14px",fontWeight:O.type.startsWith("heading")?600:400,fontFamily:O.type==="code"||O.type==="table"?ye.mono:"inherit",lineHeight:"1.6",minHeight:O.type==="code"?"100px":"36px"},rows:Math.max(1,O.content.split(`
`).length)}),g&&R===O.id&&e.jsxs("div",{style:{position:"absolute",bottom:"-20px",left:"12px",fontSize:"11px",color:ye.tm,fontStyle:"italic"},children:[e.jsx("span",{style:{opacity:.6},children:"Tab"})," ",g.slice(0,60),g.length>60?"...":""]})]}):e.jsxs("div",{onClick:()=>h(O.id),style:{padding:"4px 12px",borderRadius:"4px",cursor:"text",minHeight:"24px",border:"1px solid transparent",transition:"background 0.1s"},onMouseEnter:_e=>_e.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)",onMouseLeave:_e=>_e.currentTarget.style.backgroundColor="transparent",children:[O.type==="heading1"&&e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,letterSpacing:"-0.02em"},children:O.content||e.jsx("span",{style:{color:ye.tm},children:"Heading 1"})}),O.type==="heading2"&&e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,letterSpacing:"-0.01em"},children:O.content||e.jsx("span",{style:{color:ye.tm},children:"Heading 2"})}),O.type==="heading3"&&e.jsx("h3",{style:{margin:0,fontSize:"15px",fontWeight:600},children:O.content||e.jsx("span",{style:{color:ye.tm},children:"Heading 3"})}),O.type==="paragraph"&&e.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.7",color:O.content?ye.tp:ye.tm},children:O.content||'Type "/" for commands...'}),O.type==="code"&&e.jsx("pre",{style:{margin:0,padding:"12px",backgroundColor:ye.surface,borderRadius:"6px",fontSize:"12px",fontFamily:ye.mono,lineHeight:"1.6",border:`1px solid ${ye.border}`,overflow:"auto"},children:e.jsx("code",{children:O.content||"// code..."})}),O.type==="list"&&e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(O.content||"").split(`
`).map((_e,De)=>e.jsx("li",{children:_e},De))}),O.type==="numbered"&&e.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",lineHeight:"1.7"},children:(O.content||"").split(`
`).map((_e,De)=>e.jsx("li",{children:_e},De))}),O.type==="table"&&e.jsx("pre",{style:{margin:0,fontSize:"12px",fontFamily:ye.mono,lineHeight:"1.5",color:ye.ts},children:O.content||"| col1 | col2 |"}),O.type==="callout"&&e.jsx("div",{style:{padding:"10px 14px",borderLeft:`3px solid ${ye.violet}`,backgroundColor:ye.violetG,borderRadius:"0 6px 6px 0",fontSize:"13px",lineHeight:"1.6"},children:O.content||"Note..."}),O.type==="divider"&&e.jsx("hr",{style:{border:"none",borderTop:`1px solid ${ye.border}`,margin:"12px 0"}})]}),e.jsx("div",{className:"add-btn",style:{position:"absolute",left:"-28px",top:"50%",transform:"translateY(-50%)",opacity:0,transition:"opacity 0.15s"},children:e.jsx("button",{onClick:()=>gt(O.id),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",padding:"2px",display:"flex"},children:e.jsx(ir,{size:14})})})]},O.id))}):e.jsxs("div",{style:{textAlign:"center",marginTop:"120px",color:ye.tm},children:[e.jsx(Ol,{size:36,style:{marginBottom:"12px",opacity:.15}}),e.jsx("div",{style:{fontSize:"13px",marginBottom:"4px"},children:"Select a file from the sidebar"}),e.jsx("div",{style:{fontSize:"11px",color:ye.tm},children:"or create a new one to start editing"})]})})]}),N&&e.jsxs("div",{style:{width:"320px",borderLeft:`1px solid ${ye.border}`,backgroundColor:ye.surface,display:"flex",flexDirection:"column",flexShrink:0},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:`1px solid ${ye.border}`,display:"flex",gap:"12px"},children:["chat","suggest","complete"].map(O=>e.jsx("button",{onClick:()=>{ee(O),O==="suggest"&&!Et&&!Mt&&Mr()},style:{background:"none",border:"none",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:U===O?ye.tp:ye.tm,cursor:"pointer",paddingBottom:"4px",borderBottom:U===O?`2px solid ${ye.violet}`:"2px solid transparent"},children:O==="chat"?"AI Chat":O==="suggest"?"Suggestions":"Autocomplete"},O))}),U==="suggest"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:Mt?e.jsxs("div",{style:{padding:"40px 12px",textAlign:"center"},children:[e.jsx(Vi,{size:20,style:{color:ye.violet,marginBottom:"10px",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:"12px",color:ye.ts},children:"Analyzing your skill..."})]}):Et?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{onClick:()=>{Rt(null),Mr()},style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",fontSize:"10px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Vi,{size:10})," Refresh"]})}),Et.names&&Et.names.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ye.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Qd,{size:10})," Name Suggestions"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Et.names.map((O,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:ye.tp,marginBottom:"2px"},children:O.name}),e.jsx("div",{style:{fontSize:"10px",color:ye.tm,lineHeight:"1.4"},children:O.reason})]}),e.jsxs("button",{onClick:()=>vr(O.name),disabled:mt,style:{background:"none",border:`1px solid ${ye.border}`,borderRadius:"4px",color:ye.violet,cursor:"pointer",padding:"3px 8px",fontSize:"10px",fontWeight:600,flexShrink:0,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Xn,{size:9})," Apply"]})]},re))})]}),Et.improvements&&Et.improvements.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ye.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xd,{size:10})," Content Improvements"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Et.improvements.map((O,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:ye.tp},children:O.title}),e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:O.priority==="high"?"#ef4444":O.priority==="medium"?"#f59e0b":"#22c55e",backgroundColor:O.priority==="high"?"rgba(239,68,68,0.12)":O.priority==="medium"?"rgba(245,158,11,0.12)":"rgba(34,197,94,0.12)"},children:O.priority})]}),e.jsx("div",{style:{fontSize:"11px",color:ye.ts,lineHeight:"1.5"},children:O.description}),O.target_file&&e.jsxs("div",{style:{fontSize:"10px",color:ye.tm,marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ms,{size:9})," ",O.target_file]})]},re))})]}),Et.structure&&Et.structure.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"10px",color:ye.tm,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ax,{size:10})," Structure"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Et.structure.map((O,re)=>e.jsxs("div",{style:{padding:"8px 10px",borderRadius:"6px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",padding:"1px 6px",borderRadius:"100px",color:ye.violet,backgroundColor:ye.violetG},children:O.action}),e.jsx("span",{style:{fontSize:"11px",color:ye.tp,fontWeight:500,fontFamily:ye.mono},children:O.target})]}),e.jsx("div",{style:{fontSize:"11px",color:ye.ts,lineHeight:"1.5"},children:O.suggestion}),O.description&&e.jsx("div",{style:{fontSize:"10px",color:ye.tm,marginTop:"2px",lineHeight:"1.4"},children:O.description})]},re))})]})]}):e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Xd,{size:20,style:{color:ye.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ye.ts,marginBottom:"14px"},children:"Get AI-powered suggestions to improve your skill"}),e.jsxs("button",{onClick:()=>Mr(),disabled:!Se,style:{padding:"8px 16px",borderRadius:"6px",backgroundColor:ye.violet,border:"none",color:"#fff",fontSize:"12px",fontWeight:600,cursor:Se?"pointer":"default",display:"inline-flex",alignItems:"center",gap:"6px",opacity:Se?1:.4},children:[e.jsx(Yr,{size:12})," Analyze Skill"]})]})}),e.jsx("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ye.border}`},children:e.jsx("div",{style:{display:"flex",gap:"6px"},children:[{label:"Names",type:"names",icon:Qd},{label:"Content",type:"improvements",icon:Xd},{label:"Structure",type:"structure",icon:ax}].map(O=>e.jsxs("button",{onClick:()=>Mr(O.type),disabled:Mt||!Se,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`,color:ye.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!Se||Mt?.4:1},children:[e.jsx(O.icon,{size:10})," ",O.label]},O.type))})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:V.length===0?e.jsxs("div",{style:{padding:"20px 12px",textAlign:"center"},children:[e.jsx(Ft,{size:20,style:{color:ye.tm,marginBottom:"10px",opacity:.3}}),e.jsx("div",{style:{fontSize:"12px",color:ye.ts,marginBottom:"14px"},children:"Ask AI to help write skill content"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[{label:"Generate This File",action:Dr,icon:Tl},{label:"Generate All Files",action:Ur,icon:Ft}].map(O=>e.jsxs("button",{onClick:O.action,disabled:Ne,style:{background:ye.surfaceEl,border:`1px solid ${ye.border}`,padding:"8px 10px",borderRadius:"6px",color:ye.ts,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:Ne?.5:1},children:[e.jsx(O.icon,{size:12})," ",Ne?"Generating...":O.label]},O.label))})]}):e.jsxs(e.Fragment,{children:[V.map((O,re)=>e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"9px",color:ye.tm,marginBottom:"3px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:O.role}),e.jsx("div",{style:{padding:"8px 10px",borderRadius:"6px",fontSize:"12px",lineHeight:"1.6",backgroundColor:O.role==="user"?ye.violetG:ye.surfaceEl,border:`1px solid ${O.role==="user"?"rgba(139,92,246,0.15)":ye.border}`,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:O.content})]},re)),M&&e.jsx("div",{style:{fontSize:"11px",color:ye.tm,padding:"8px",fontStyle:"italic"},children:"Thinking..."}),e.jsx("div",{ref:ht})]})}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:`1px solid ${ye.border}`},children:[e.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[e.jsxs("button",{onClick:Dr,disabled:Ne||!d,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`,color:ye.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:!d||Ne?.4:1},children:[e.jsx(Tl,{size:10})," Generate File"]}),e.jsxs("button",{onClick:Ur,disabled:Ne,style:{flex:1,padding:"5px",borderRadius:"4px",backgroundColor:ye.surfaceEl,border:`1px solid ${ye.border}`,color:ye.ts,fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",opacity:Ne?.4:1},children:[e.jsx(Ft,{size:10})," Generate All"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{style:{...Cl,paddingRight:"36px",fontSize:"12px"},placeholder:"Ask AI for help...",value:J,onChange:O=>Y(O.target.value),onKeyDown:O=>O.key==="Enter"&&!O.shiftKey&&oi(),disabled:M}),e.jsx("button",{onClick:oi,disabled:M||!J.trim(),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:J.trim()?ye.violet:ye.tm,cursor:"pointer",display:"flex"},children:e.jsx(Rh,{size:14})})]})]})]})]}),p.visible&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>f({...p,visible:!1})}),e.jsxs("div",{style:{position:"fixed",left:p.x,top:p.y,zIndex:100,backgroundColor:ye.surfaceEl,border:`1px solid ${ye.borderS}`,borderRadius:"8px",padding:"4px",width:"200px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{padding:"6px 10px",fontSize:"9px",color:ye.tm,textTransform:"uppercase",letterSpacing:"0.06em",fontWeight:600},children:"Block Type"}),H6.map(O=>e.jsxs("div",{onClick:()=>Qt(p.blockId,O.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",fontSize:"12px",cursor:"pointer",borderRadius:"4px",color:ye.ts,transition:"background 0.1s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor="rgba(255,255,255,0.05)",onMouseLeave:re=>re.currentTarget.style.backgroundColor="transparent",children:[e.jsx(O.icon,{size:13,style:{color:ye.tm}}),O.label]},O.id))]})]})]}),A&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},children:e.jsxs("div",{style:{width:"580px",backgroundColor:ye.surface,border:`1px solid ${ye.border}`,borderRadius:"12px",overflow:"hidden",boxShadow:"0 20px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${ye.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600},children:"Choose a template"}),e.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:ye.ts},children:"Start with a pre-built structure or blank slate"})]}),!u&&e.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",color:ye.tm,cursor:"pointer",display:"flex"},children:e.jsx(kt,{size:18})})]}),e.jsxs("div",{style:{padding:"20px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",maxHeight:"380px",overflowY:"auto"},children:[e.jsxs("div",{onClick:()=>kr("blank"),style:{padding:"14px",border:`1px dashed ${ye.borderS}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:O=>{O.currentTarget.style.borderColor=ye.violet,O.currentTarget.style.borderStyle="solid"},onMouseLeave:O=>{O.currentTarget.style.borderColor=ye.borderS,O.currentTarget.style.borderStyle="dashed"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:"Blank Skill"}),e.jsx("div",{style:{fontSize:"11px",color:ye.ts,lineHeight:"1.4"},children:"Start from scratch with just SKILL.md"})]}),(B||[]).map(O=>e.jsxs("div",{onClick:()=>kr(O.slug),style:{padding:"14px",border:`1px solid ${ye.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:re=>{re.currentTarget.style.borderColor=ye.violet,re.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"},onMouseLeave:re=>{re.currentTarget.style.borderColor=ye.border,re.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",marginBottom:"4px"},children:O.name}),e.jsx("div",{style:{fontSize:"11px",color:ye.ts,lineHeight:"1.4",marginBottom:"6px"},children:O.description||"Pre-built skill structure"}),e.jsxs("div",{style:{fontSize:"10px",color:ye.tm},children:[O.totalFiles," files"]})]},O.slug))]}),e.jsx("div",{style:{padding:"12px 24px",borderTop:`1px solid ${ye.border}`,backgroundColor:"rgba(0,0,0,0.15)",textAlign:"center"},children:e.jsx("button",{onClick:()=>u?i(o?`/agents/${o}`:"/skills"):E(!1),style:{background:"none",border:"none",color:ye.tm,fontSize:"11px",cursor:"pointer"},children:u?"Cancel and go back":"Close"})})]})}),ve&&e.jsxs("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",backgroundColor:ye.danger,color:"#fff",padding:"8px 18px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:300,fontSize:"12px"},children:[e.jsx(Ai,{size:14}),ve,e.jsx("button",{onClick:()=>se(null),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",display:"flex",marginLeft:"4px"},children:e.jsx(kt,{size:12})})]}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @media (max-width: 900px) {
          .ai-panel { display: none !important; }
        }
      `})]})}const q={bg:"#0f0f0f",surface:"#1a1a1b",surfaceEl:"#242426",border:"rgba(255,255,255,0.08)",borderS:"rgba(255,255,255,0.15)",violet:"#8B5CF6",violetM:"rgba(139,92,246,0.2)",violetG:"rgba(139,92,246,0.12)",tp:"#F4F4F5",ts:"#A1A1AA",tm:"#52525B",success:"#22c55e",warning:"#f59e0b",danger:"#ef4444",mono:'"JetBrains Mono","Fira Code",monospace',font:'"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif'},U6=`
@keyframes fadeInUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
@keyframes spin { from { transform:rotate(0deg); } to { transform:rotate(360deg); } }
@keyframes pulse { 0%,100% { transform:scale(1); opacity:0.3; } 50% { transform:scale(1.25); opacity:0.6; } }
@keyframes cursorBlink { 0%,100% { opacity:1; } 50% { opacity:0; } }
@keyframes quillWrite {
  0% { transform:translateX(0) rotate(0deg); }
  25% { transform:translateX(3px) rotate(-3deg); }
  50% { transform:translateX(0) rotate(0deg); }
  75% { transform:translateX(-2px) rotate(2deg); }
  100% { transform:translateX(0) rotate(0deg); }
}
@keyframes constellationBirth {
  0% { opacity:0; transform:scale(0); }
  60% { opacity:1; transform:scale(1.08); }
  100% { opacity:1; transform:scale(1); }
}
@keyframes constellationBreathe {
  0%,100% { filter:drop-shadow(0 0 12px rgba(139,92,246,0.3)); }
  50% { filter:drop-shadow(0 0 24px rgba(139,92,246,0.7)); }
}
@keyframes constellationDrawConn {
  from { stroke-dashoffset: 300; }
  to { stroke-dashoffset: 0; }
}
@keyframes ambientRing {
  0% { r:60; opacity:0; }
  40% { opacity:0.12; }
  100% { r:200; opacity:0; }
}
@keyframes particleDrift {
  0% { opacity:0; r:1; }
  15% { opacity:0.5; }
  100% { opacity:0; r:0; transform:translate(var(--dx),var(--dy)); }
}
@keyframes phaseReveal {
  0% { opacity:0; transform:translateY(20px) scale(0.97); filter:blur(6px); }
  100% { opacity:1; transform:translateY(0) scale(1); filter:blur(0); }
}
@keyframes phasePulse {
  0%,100% { box-shadow:0 0 0 0 rgba(139,92,246,0.3); }
  50% { box-shadow:0 0 0 8px rgba(139,92,246,0); }
}
@keyframes phaseLineGrow {
  from { transform:scaleY(0); }
  to { transform:scaleY(1); }
}
@keyframes bookGlow {
  0%,100% { box-shadow:0 0 40px rgba(139,92,246,0.03), 0 0 80px rgba(139,92,246,0.02); }
  50% { box-shadow:0 0 60px rgba(139,92,246,0.06), 0 0 120px rgba(139,92,246,0.03); }
}
`;function V6({text:t,onComplete:i,speed:s=25}){const[o,u]=L.useState(""),S=L.useRef(i);S.current=i,L.useEffect(()=>{u("");let l=0;const c=setInterval(()=>{var m;l++,u(t.slice(0,l)),l>=t.length&&(clearInterval(c),(m=S.current)==null||m.call(S))},s);return()=>clearInterval(c)},[t,s]);const b=o.length<t.length;return e.jsxs("span",{style:{lineHeight:"1.7"},children:[o,b&&e.jsx("span",{style:{display:"inline-block",width:"2px",height:"1.1em",backgroundColor:q.violet,marginLeft:"2px",verticalAlign:"middle",animation:"cursorBlink 0.8s infinite"}})]})}function Cs({label:t,selected:i,onClick:s,subtitle:o,multi:u,color:S}){const[b,l]=L.useState(!1),c=S||q.violet;return e.jsxs("button",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"3px",padding:o?"10px 16px":"8px 16px",backgroundColor:i?`${c}22`:b?q.surfaceEl:q.surface,border:`1px solid ${i?c:b?q.borderS:q.border}`,borderRadius:u?"8px":"100px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",minWidth:o?"170px":"auto",boxShadow:i?`0 0 12px ${c}20`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},children:[u&&e.jsx("div",{style:{width:15,height:15,borderRadius:3,flexShrink:0,border:`1.5px solid ${i?c:q.tm}`,backgroundColor:i?c:"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s ease"},children:i&&e.jsx(rr,{size:9,color:"#fff",strokeWidth:3.5})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:i?q.tp:q.ts},children:t}),!u&&i&&e.jsx(rr,{size:12,color:c,style:{marginLeft:"auto"}})]}),o&&e.jsx("span",{style:{fontSize:"11px",color:q.tm,marginLeft:u?"23px":0},children:o})]})}const wu=[{id:"name",label:"Nom",Icon:qi},{id:"role",label:"Rle",Icon:ec},{id:"skills",label:"Comptences",Icon:Yr},{id:"comm",label:"Communication",Icon:j0},{id:"method",label:"Mthodologie",Icon:Eh},{id:"tools",label:"Outils",Icon:M0},{id:"model",label:"Modle",Icon:es},{id:"autonomy",label:"Autonomie",Icon:T0},{id:"enhance",label:"IA Enhance",Icon:Ft},{id:"complete",label:"Termin",Icon:rr}];function K6(){var Di;const t=qt(),i=L.useRef(null),s=L.useRef(null),[o,u]=L.useState(0),[S,b]=L.useState(!0),[l,c]=L.useState(!1),[m,v]=L.useState(!1),[d,y]=L.useState(null),[_,j]=L.useState(!1),[w,h]=L.useState(null),[p,f]=L.useState([]),[g,C]=L.useState(""),[R,z]=L.useState(null),[A,E]=L.useState([]),[B,P]=L.useState([]),[N,K]=L.useState(null),[U,ee]=L.useState(null),[V,de]=L.useState([]),[J,Y]=L.useState(null),[M,I]=L.useState(null),[D,W]=L.useState(null),[pe,me]=L.useState(""),[Se,Ee]=L.useState([]),[X,F]=L.useState([]),[ve,se]=L.useState(null),[Me,Z]=L.useState(!1),[ke,he]=L.useState(""),[Ie,Oe]=L.useState(null),[$e,je]=L.useState(""),[Ne,Q]=L.useState(!1),[le,We]=L.useState(null),[Ze,Xe]=L.useState("input"),[mt,Jt]=L.useState(!1),[Et,Rt]=L.useState(!1),Mt=L.useRef(null),[xt,Pt]=L.useState(null),[ht,zr]=L.useState(""),[pr,Ii]=L.useState([]);L.useEffect(()=>{(async()=>{try{const[bt,Re]=await Promise.all([ae("/api/personaboarding/options"),ae("/api/personaboarding/roles")]);h(bt),f(Re)}catch(bt){console.error("Failed to load personaboarding options:",bt)}const we=new URLSearchParams(window.location.search),rt=we.get("linkedin_data"),vt=we.get("linkedin_error");if(vt)y(`LinkedIn OAuth error: ${vt}`),window.history.replaceState({},"","/personaboarding");else if(rt)try{const bt=JSON.parse(decodeURIComponent(rt));window.history.replaceState({},"","/personaboarding"),Pt(bt),Oe("oauth-headline"),bt.given_name&&C(bt.given_name)}catch(bt){console.error("LinkedIn OAuth data processing failed:",bt),y("Erreur lors du traitement des donnes LinkedIn"),window.history.replaceState({},"","/personaboarding")}})()},[]),L.useEffect(()=>{var we;(we=i.current)==null||we.scrollIntoView({behavior:"smooth",block:"end"})},[pr,S,o]),L.useEffect(()=>{o===0&&!S&&setTimeout(()=>{var we;return(we=s.current)==null?void 0:we.focus()},100)},[o,S]);async function fr(){var we;if(xt){Q(!0),Oe("linkedin"),Xe("analyzing"),y(null);try{const rt=await ae("/api/personaboarding/linkedin/analyze-oauth",{method:"POST",body:JSON.stringify({...xt,headline:ht.trim()||void 0})});We(rt.suggestions),(we=rt.suggestions)!=null&&we.displayName&&C(rt.suggestions.displayName),Xe("results")}catch(rt){y(rt.message||"Erreur lors de l'analyse"),Oe("oauth-headline")}Q(!1)}}async function Lr(){try{const we=localStorage.getItem("token")||"",rt=await ae(`/api/personaboarding/linkedin/auth?token=${encodeURIComponent(we)}`);rt.authUrl?window.location.href=rt.authUrl:y("LinkedIn OAuth non configur")}catch(we){y(we.message||"Erreur LinkedIn OAuth")}}async function kr(){var we;if($e.trim()){Q(!0),Xe("analyzing"),y(null);try{const rt=await ae("/api/personaboarding/linkedin-analyze",{method:"POST",body:JSON.stringify({url:$e.trim()})});We(rt.suggestions),(we=rt.suggestions)!=null&&we.displayName&&C(rt.suggestions.displayName),Xe("results")}catch(rt){y(rt.message||"Impossible d'analyser ce profil LinkedIn"),Xe("input")}Q(!1)}}function oe(){Xe("done"),Oe("linkedin-done"),le!=null&&le.tools&&de(le.tools)}function He(){Oe("manual")}async function qe(we){var vt;const rt=(vt=we.target.files)==null?void 0:vt[0];if(rt){Rt(!0);try{const bt=new FormData;bt.append("image",rt);const ot=await(await fetch("/api/personaboarding/upload-profile-pic",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:bt})).json();ot.profileImageUrl&&We(nt=>({...nt,profileImageUrl:ot.profileImageUrl}))}catch(bt){console.error("Profile pic upload failed:",bt)}Rt(!1)}}async function pt(we){var rt;if(((rt=le==null?void 0:le.skills)==null?void 0:rt.length)>0){const vt=le.skills;E(vt),P(vt.map(bt=>bt.name));return}Jt(!0);try{const vt=await ae("/api/personaboarding/ai-suggest-skills",{method:"POST",body:JSON.stringify({role:we,linkedinData:null})});E(vt.skills||[])}catch{const vt=p.find(bt=>bt.id===we);E((vt==null?void 0:vt.skills)||[])}Jt(!1)}const wt=!!le,Qt=[wt?"LinkedIn m'a parl de vous. Confirmez le nom de votre agent ?":"Commenons la gense. Quel sera le nom de votre agent ?",wt?`${g} est un beau nom. Votre profil suggre un rle. Lequel vous correspond ?`:`Je m'appellerai ${g}. Quel rle souhaitez-vous me confier ?`,wt?`En tant que ${(R==null?void 0:R.label)||"..."}, voici les comptences suggres par votre profil. Validez ou personnalisez.`:`En tant que ${(R==null?void 0:R.label)||"..."}, j'aurai besoin de comptences spcifiques. Quelles sont les miennes ?`,`Mes ${B.length} comptences sont acquises. Comment souhaitez-vous que je communique ?`,`Style ${(N==null?void 0:N.label)||"..."} not. Quelle mthodologie de travail me guidera ?`,`Mthodologie ${(U==null?void 0:U.label)||"..."} intgre. De quels outils aurai-je besoin ?`,"Mes outils sont configurs. Quel cerveau IA souhaitez-vous me donner ?",`Je fonctionnerai avec ${(J==null?void 0:J.label)||"..."}. Quel sera mon degr de libert ?`,"Configuration termine. L'intelligence artificielle analyse votre vision et compose mon essence...",pe||`${g} est prt. Son existence commence maintenant.`];function gt(we){Ii(rt=>[...rt,we]),b(!0),u(rt=>rt+1)}function Gt(){const we=g.trim();we&&(C(we),gt(`Je vais crer un agent qui s'appellera ${we}.`))}function Ir(we){z(we),P([]),gt(`${g} sera ${we.label}.`),pt(we.id)}function Xr(){if(B.length===0)return;const we=B.join(", ");gt(`${g} matrisera ${we}.`)}function oi(we){K(we),gt(`${g} communiquera de manire ${we.label.toLowerCase()}.`)}function Dr(we){ee(we),gt(`${g} travaillera selon la mthodologie ${we.label}.`)}function Ur(){if(V.length===0)return;const we=V.join(", ");gt(`${g} utilisera les outils : ${we}.`)}function ai(we){Y(we),gt(`Son moteur d'intelligence sera ${we.label}.`)}function Xi(we){I(we),gt(`Son niveau d'autonomie sera ${we.label.toLowerCase()}.`)}async function Mr(){v(!0),y(null);try{const we=await ae("/api/personaboarding/ai-enhance",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:B,skillsData:A,commStyle:N.id,methodology:U.id,selectedTools:V,model:J.id,autonomy:M.id})});W(we.gptData),me(we.narrative),v(!1),gt(`L'IA a parl : "${we.narrative}"`)}catch{const rt=`Ainsi naquit ${g}, prt  transformer chaque dfi en opportunit.`;me(rt),v(!1),gt(`L'IA a parl : "${rt}"`)}}async function vr(){var we;c(!0),y(null);try{const rt=await ae("/api/personaboarding/complete",{method:"POST",body:JSON.stringify({displayName:g,role:R.id,selectedSkills:B,customSkills:Se,skillsData:A,commStyle:N.id,methodology:U.id,selectedTools:V,model:J.id,autonomy:M.id,gptData:D||null,profileImageUrl:(le==null?void 0:le.profileImageUrl)||null})});se(rt.agent);const vt=((we=p.find(Re=>Re.id===R.id))==null?void 0:we.skills)||[],bt=B.map(Re=>{const ot=vt.find(gr=>gr.name===Re),nt=Se.find(gr=>gr.name===Re);return{name:Re,color:(ot==null?void 0:ot.color)||(nt==null?void 0:nt.color)||q.violet,category:(ot==null?void 0:ot.category)||(nt==null?void 0:nt.category)||""}});F(bt),j(!0)}catch(rt){y(rt.message||"Erreur lors de la cration"),c(!1)}}function li(){return[g||null,(R==null?void 0:R.label)||null,B.length>0?`${B.length} skills`:null,(N==null?void 0:N.label)||null,(U==null?void 0:U.label)||null,V.length>0?`${V.length} outils`:null,(J==null?void 0:J.label)||null,(M==null?void 0:M.label)||null,D?"Enhanced":null,_?"Cr":null]}function O(){return e.jsxs("div",{style:{animation:"fadeInUp 0.5s ease"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:q.tp,marginBottom:"8px",letterSpacing:"-0.02em"},children:"Comment souhaitez-vous crer votre agent ?"}),e.jsx("p",{style:{fontSize:"13px",color:q.tm,marginBottom:"28px",lineHeight:"1.6"},children:"Importez votre profil LinkedIn pour des suggestions intelligentes, ou crez manuellement."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:Lr,onMouseEnter:we=>{we.currentTarget.style.backgroundColor="#0A66C215",we.currentTarget.style.borderColor="#0A66C240",we.currentTarget.style.boxShadow="0 0 20px rgba(10,102,194,0.15)"},onMouseLeave:we=>{we.currentTarget.style.backgroundColor=q.surface,we.currentTarget.style.borderColor=q.border,we.currentTarget.style.boxShadow="none"},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:q.surface,border:`1px solid ${q.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease",boxShadow:"none"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:"#0A66C215",border:"1px solid #0A66C230",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(To,{size:22,color:"#0A66C2"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:q.tp,marginBottom:"4px"},children:"Connecter LinkedIn"}),e.jsx("div",{style:{fontSize:"12px",color:q.ts,lineHeight:"1.5"},children:"Connectez-vous via LinkedIn pour importer automatiquement votre nom, photo de profil et email."})]}),e.jsx(Xn,{size:18,color:q.tm,style:{flexShrink:0}})]}),e.jsxs("button",{onClick:()=>{Oe("linkedin"),Xe("input")},onMouseEnter:we=>{we.currentTarget.style.backgroundColor="#1e3a5f20",we.currentTarget.style.borderColor="#3B82F640"},onMouseLeave:we=>{we.currentTarget.style.backgroundColor=q.surface,we.currentTarget.style.borderColor=q.border},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:q.surface,border:`1px solid ${q.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Pu,{size:20,color:"#3B82F6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:q.tp,marginBottom:"4px"},children:"Coller une URL LinkedIn"}),e.jsx("div",{style:{fontSize:"12px",color:q.ts,lineHeight:"1.5"},children:"Collez une URL LinkedIn publique  l'IA analysera les mtadonnes du profil."})]}),e.jsx(Xn,{size:18,color:q.tm,style:{flexShrink:0}})]}),e.jsxs("button",{onClick:He,onMouseEnter:we=>{we.currentTarget.style.backgroundColor=q.surfaceEl,we.currentTarget.style.borderColor=q.borderS},onMouseLeave:we=>{we.currentTarget.style.backgroundColor=q.surface,we.currentTarget.style.borderColor=q.border},style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px 24px",backgroundColor:q.surface,border:`1px solid ${q.border}`,borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.25s ease"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"12px",backgroundColor:q.violetG,border:`1px solid ${q.violetM}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Jd,{size:20,color:q.violet})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:q.tp,marginBottom:"4px"},children:"Cration manuelle"}),e.jsx("div",{style:{fontSize:"12px",color:q.ts,lineHeight:"1.5"},children:"Configurez chaque aspect de votre agent tape par tape, en toute libert."})]}),e.jsx(Xn,{size:18,color:q.tm,style:{flexShrink:0}})]})]})]})}function re(){return e.jsxs("div",{style:{animation:"fadeInUp 0.5s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px",backgroundColor:q.surface,border:`1px solid ${q.border}`,borderRadius:"12px",marginBottom:"24px"},children:[xt!=null&&xt.picture?e.jsx("img",{src:xt.picture,alt:xt.name,style:{width:56,height:56,borderRadius:"50%",objectFit:"cover",border:`2px solid ${q.violet}`}}):e.jsx("div",{style:{width:56,height:56,borderRadius:"50%",backgroundColor:q.violetG,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${q.violet}`},children:e.jsx(qi,{size:24,color:q.violet})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:700,color:q.tp},children:xt==null?void 0:xt.name}),e.jsx("div",{style:{fontSize:"13px",color:q.ts},children:(xt==null?void 0:xt.email)||"LinkedIn Connected"})]}),e.jsxs("div",{style:{marginLeft:"auto",padding:"4px 12px",borderRadius:"100px",backgroundColor:"#22c55e18",border:"1px solid #22c55e30",fontSize:"11px",fontWeight:600,color:"#22c55e"},children:[e.jsx(rr,{size:12,style:{marginRight:"4px",verticalAlign:"middle"}}),"Connect"]})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:q.tp,marginBottom:"6px"},children:"Quel est votre poste actuel ?"}),e.jsx("p",{style:{fontSize:"13px",color:q.tm,marginBottom:"16px",lineHeight:"1.5"},children:"Slectionnez ou crivez votre rle pour que l'IA gnre des comptences prcises."}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"14px"},children:["Product Manager","Dveloppeur Full-Stack","Data & AI Consultant","UX/UI Designer","DevOps Engineer","Growth Marketer","CTO / Tech Lead","Business Analyst","Freelance Developer"].map(we=>e.jsx("button",{onClick:()=>zr(we),style:{padding:"7px 14px",borderRadius:"100px",fontSize:"13px",fontWeight:500,backgroundColor:ht===we?`${q.violet}22`:q.surface,border:`1px solid ${ht===we?q.violet:q.border}`,color:ht===we?q.tp:q.ts,cursor:"pointer",transition:"all 0.2s"},children:we},we))}),e.jsx("input",{autoFocus:!0,style:{backgroundColor:q.bg,border:`1px solid ${q.borderS}`,borderRadius:"8px",padding:"14px 16px",color:"#fff",fontSize:"15px",width:"100%",outline:"none",fontFamily:q.font,transition:"border-color 0.2s",boxSizing:"border-box",marginBottom:"12px"},onFocus:we=>we.target.style.borderColor=q.violet,onBlur:we=>we.target.style.borderColor=q.borderS,placeholder:"Ou tapez votre poste exact...",value:ht,onChange:we=>zr(we.target.value),onKeyDown:we=>we.key==="Enter"&&ht.trim()&&fr()}),e.jsx("button",{onClick:fr,disabled:Ne||!ht.trim(),style:{width:"100%",padding:"13px 20px",backgroundColor:ht.trim()?q.violet:q.surfaceEl,color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:ht.trim()?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s",opacity:ht.trim()?1:.5},children:Ne?e.jsxs(e.Fragment,{children:[e.jsx(bn,{size:16,style:{animation:"spin 1s linear infinite"}})," Analyse en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{size:16})," Analyser mon profil"]})})]})}function _e(){var we,rt,vt,bt;return e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[Ze==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:"#60A5FA",fontSize:"12px",fontWeight:600},children:[e.jsx(To,{size:15})," Import LinkedIn"]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:q.tp,marginBottom:"6px"},children:"Collez votre URL LinkedIn"}),e.jsx("p",{style:{fontSize:"13px",color:q.tm,marginBottom:"20px",lineHeight:"1.5"},children:"L'IA analysera les mtadonnes de votre profil pour suggrer automatiquement les champs."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{autoFocus:!0,style:{backgroundColor:q.bg,border:`1px solid ${q.borderS}`,borderRadius:"8px",padding:"12px 16px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:q.font,transition:"border-color 0.2s"},onFocus:Re=>Re.target.style.borderColor="#3B82F6",onBlur:Re=>Re.target.style.borderColor=q.borderS,placeholder:"https://linkedin.com/in/votre-profil",value:$e,onChange:Re=>je(Re.target.value),onKeyDown:Re=>Re.key==="Enter"&&kr()}),e.jsxs("button",{disabled:!$e.trim()||!$e.includes("linkedin.com/in/"),onClick:kr,style:{backgroundColor:$e.includes("linkedin.com/in/")?"#3B82F6":q.surfaceEl,color:"#fff",border:"none",borderRadius:"8px",padding:"0 20px",fontSize:"13px",fontWeight:600,cursor:$e.includes("linkedin.com/in/")?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",fontFamily:q.font},children:["Analyser ",e.jsx(Oo,{size:13})]})]}),d&&e.jsx("p",{style:{fontSize:"12px",color:q.danger,marginTop:"10px"},children:d}),e.jsx("button",{onClick:He,style:{background:"none",border:"none",color:q.tm,fontSize:"12px",cursor:"pointer",marginTop:"16px",padding:0,fontFamily:q.font,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Passer et crer manuellement"})]}),Ze==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"40px 20px",animation:"fadeInUp 0.4s ease"},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",backgroundColor:"#1e3a5f20",border:"2px solid #3B82F640",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(To,{size:28,color:"#3B82F6",style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:q.tp,marginBottom:"6px"},children:"Analyse de votre profil LinkedIn..."}),e.jsx("div",{style:{fontSize:"12px",color:q.tm},children:"Extraction des mtadonnes et gnration des suggestions"})]}),e.jsx(bn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}})]}),Ze==="results"&&le&&e.jsxs("div",{style:{animation:"fadeInUp 0.4s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",color:q.success,fontSize:"13px",fontWeight:600},children:[e.jsx(rr,{size:15})," Profil analys avec succs"]}),le.summary&&e.jsxs("div",{style:{padding:"14px 18px",backgroundColor:q.surface,borderRadius:"10px",border:`1px solid ${q.border}`,marginBottom:"20px",fontSize:"13px",color:q.ts,lineHeight:"1.6",fontStyle:"italic"},children:['"',le.summary,'"']}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"14px 18px",backgroundColor:q.surface,borderRadius:"10px",border:`1px solid ${le.profileImageUrl?"#3B82F630":q.border}`,marginBottom:"4px"},children:[le.profileImageUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:le.profileImageUrl,alt:"Profile",style:{width:"56px",height:"56px",borderRadius:"14px",objectFit:"cover",border:"2px solid #3B82F640",boxShadow:"0 4px 12px rgba(59,130,246,0.15)"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:q.tp},children:le.displayName}),e.jsx("div",{style:{fontSize:"11px",color:"#60A5FA",marginTop:"2px"},children:"Photo de profil importe"})]}),e.jsx("button",{onClick:()=>{var Re;return(Re=Mt.current)==null?void 0:Re.click()},style:{background:"none",border:`1px solid ${q.border}`,borderRadius:"6px",padding:"4px 10px",color:q.ts,fontSize:"11px",cursor:"pointer",fontFamily:q.font,transition:"all 0.2s"},children:"Changer"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var Re;return(Re=Mt.current)==null?void 0:Re.click()},disabled:Et,style:{width:"56px",height:"56px",borderRadius:"14px",backgroundColor:"#3B82F610",border:"2px dashed #3B82F640",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"},children:Et?e.jsx(bn,{size:20,color:"#3B82F6",style:{animation:"spin 1s linear infinite"}}):e.jsx(X2,{size:20,color:"#3B82F6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:q.tp},children:"Ajouter la photo de profil"}),e.jsx("div",{style:{fontSize:"11px",color:q.tm,marginTop:"2px",lineHeight:"1.4"},children:"Clic droit sur votre photo LinkedIn  Enregistrer, puis uploadez-la ici"})]}),e.jsxs("button",{onClick:()=>{var Re;return(Re=Mt.current)==null?void 0:Re.click()},disabled:Et,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 14px",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:q.font,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",flexShrink:0},children:[e.jsx(D0,{size:13})," Upload"]})]}),e.jsx("input",{ref:Mt,type:"file",accept:"image/*",style:{display:"none"},onChange:qe})]}),[{label:"Nom",value:le.displayName,icon:e.jsx(qi,{size:13})},{label:"Rle",value:(we=le.role)==null?void 0:we.replace(/-/g," ").replace(/\b\w/g,Re=>Re.toUpperCase()),icon:e.jsx(ec,{size:13})},{label:"Comptences",value:`${((rt=le.skills)==null?void 0:rt.length)||0} dtectes`,icon:e.jsx(Yr,{size:13})},{label:"Style",value:((vt=le.commStyle)==null?void 0:vt.charAt(0).toUpperCase())+((bt=le.commStyle)==null?void 0:bt.slice(1)),icon:e.jsx(j0,{size:13})}].map((Re,ot)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 14px",backgroundColor:q.surface,borderRadius:"8px",border:`1px solid ${q.border}`},children:[e.jsx("div",{style:{color:"#3B82F6"},children:Re.icon}),e.jsx("span",{style:{fontSize:"11px",color:q.tm,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.04em",minWidth:"90px"},children:Re.label}),e.jsx("span",{style:{fontSize:"13px",color:q.tp,fontWeight:500},children:Re.value})]},ot))]}),e.jsx("p",{style:{fontSize:"11px",color:q.tm,marginBottom:"16px",lineHeight:"1.5"},children:"Ces suggestions pr-rempliront les tapes suivantes. Vous pourrez modifier ou rejeter chaque suggestion."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:oe,style:{backgroundColor:"#3B82F6",color:"#fff",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:q.font,transition:"all 0.2s"},children:["Continuer avec ces suggestions ",e.jsx(Xn,{size:14})]}),e.jsx("button",{onClick:He,style:{backgroundColor:q.surface,color:q.ts,border:`1px solid ${q.border}`,borderRadius:"8px",padding:"12px 18px",fontSize:"13px",fontWeight:500,cursor:"pointer",fontFamily:q.font,transition:"all 0.2s"},children:"Ignorer"})]})]})]})}function De({label:we}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"8px 14px",backgroundColor:"rgba(59,130,246,0.08)",borderRadius:"8px",border:"1px solid rgba(59,130,246,0.12)",fontSize:"12px",color:"#60A5FA"},children:[e.jsx(To,{size:13})," Suggestion : ",e.jsx("strong",{style:{color:"#93C5FD"},children:we})]})}function ct(){var rt,vt,bt;if(S)return null;const we={animation:"fadeInUp 0.35s ease"};switch(o){case 0:return e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",...we},children:[e.jsx("input",{ref:s,autoFocus:!0,style:{backgroundColor:q.bg,border:`1px solid ${q.borderS}`,borderRadius:"6px",padding:"11px 14px",color:"#fff",fontSize:"14px",flex:1,outline:"none",fontFamily:q.font,transition:"border-color 0.2s"},onFocus:Re=>Re.target.style.borderColor=q.violet,onBlur:Re=>Re.target.style.borderColor=q.borderS,placeholder:"Nom de l'agent...",value:g,onChange:Re=>C(Re.target.value),onKeyDown:Re=>Re.key==="Enter"&&Gt()}),e.jsxs("button",{disabled:!g.trim(),onClick:Gt,style:{backgroundColor:g.trim()?q.tp:q.surfaceEl,color:g.trim()?q.bg:q.tm,border:"none",borderRadius:"6px",padding:"0 22px",fontSize:"12px",fontWeight:600,cursor:g.trim()?"pointer":"default",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:["Continuer ",e.jsx(Xn,{size:14})]})]});case 1:{if(!w)return e.jsx(Gn,{});const Re=[...w.roles];if(le!=null&&le.role){const nt=le.role;Re.some(gr=>gr.id===nt)||Re.unshift({id:nt,label:nt.replace(/-/g," ").replace(/\b\w/g,gr=>gr.toUpperCase()),skillCount:"IA",_linkedin:!0})}const ot=()=>{const nt=ke.trim();if(!nt)return;const gr=nt.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");Ir({id:gr,label:nt,skillCount:"IA"}),he("")};return e.jsxs("div",{style:{marginTop:"20px",...we},children:[(le==null?void 0:le.role)&&e.jsx(De,{label:((rt=Re.find(nt=>nt.id===le.role))==null?void 0:rt.label)||le.role.replace(/-/g," ").replace(/\b\w/g,nt=>nt.toUpperCase())}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Re.map(nt=>e.jsx(Cs,{label:nt.label,subtitle:nt._linkedin?"Suggestion LinkedIn":`${nt.skillCount} comptences`,selected:(R==null?void 0:R.id)===nt.id,onClick:()=>Ir(nt),color:(le==null?void 0:le.role)===nt.id||nt._linkedin?"#3B82F6":void 0},nt.id))}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px",padding:"12px 14px",backgroundColor:q.surface,borderRadius:"10px",border:`1px solid ${q.border}`},children:[e.jsx("input",{style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"13px",flex:1,outline:"none",fontFamily:q.font},placeholder:"Data Scientist, Growth Hacker, DevOps Engineer, UX Researcher...",value:ke,onChange:nt=>he(nt.target.value),onKeyDown:nt=>nt.key==="Enter"&&ot()}),e.jsx("button",{disabled:!ke.trim(),onClick:ot,style:{backgroundColor:ke.trim()?q.violet:"transparent",color:ke.trim()?"#fff":q.tm,border:"none",borderRadius:"6px",padding:"6px 14px",fontSize:"12px",fontWeight:600,cursor:ke.trim()?"pointer":"default",transition:"all 0.2s",fontFamily:q.font},children:"Valider"})]})]})}case 2:return mt?e.jsx("div",{style:{marginTop:"20px",...we},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:q.surface,borderRadius:"10px",border:`1px solid ${q.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:q.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ft,{size:16,color:q.violet,style:{animation:"pulse 2s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:q.tp,fontWeight:500},children:"L'IA gnre vos comptences..."}),e.jsx("div",{style:{fontSize:"11px",color:q.tm,marginTop:"2px"},children:"Analyse du profil et du rle en cours"})]}),e.jsx(bn,{size:16,color:q.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]})}):A.length===0?e.jsx(Gn,{text:"Chargement des comptences..."}):e.jsxs("div",{style:{marginTop:"20px",...we},children:[e.jsxs("div",{style:{fontSize:"12px",color:q.ts,marginBottom:"16px",lineHeight:"1.6",padding:"12px 16px",backgroundColor:q.surface,borderRadius:"8px",border:`1px solid ${q.border}`},children:["Cliquez sur les nodes dans la constellation pour connecter des comptences  ",g,". Vous pouvez aussi crer vos propres skills."]}),e.jsxs("div",{style:{width:"100%",minHeight:"420px",margin:"48px 0",position:"relative",overflow:"visible",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:[e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:`radial-gradient(circle at center, ${q.violetG} 0%, transparent 70%)`,pointerEvents:"none",opacity:.8}}),e.jsx("div",{style:{position:"relative",zIndex:1,width:"100%",overflow:"visible"},children:e.jsx(q6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:A,selectedSkills:B,customSkills:Se,onToggleSkill:Re=>{P(ot=>ot.includes(Re)?ot.filter(nt=>nt!==Re):[...ot,Re])},onAddCustomSkill:Re=>{Ee(ot=>[...ot,Re]),P(ot=>[...ot,Re.name])},onRemoveCustomSkill:Re=>{Ee(ot=>ot.filter(nt=>nt.name!==Re)),P(ot=>ot.filter(nt=>nt!==Re))}})})]}),B.length>0&&e.jsx(Um,{items:B}),e.jsx(Vm,{disabled:B.length===0,onClick:Xr,label:`Valider ${B.length} comptence${B.length>1?"s":""}`})]});case 3:return w?e.jsxs("div",{style:{marginTop:"20px",...we},children:[(le==null?void 0:le.commStyle)&&e.jsx(De,{label:((vt=w.commStyles.find(Re=>Re.id===le.commStyle))==null?void 0:vt.label)||le.commStyle}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:w.commStyles.map(Re=>e.jsx(Cs,{label:Re.label,subtitle:Re.description,selected:(N==null?void 0:N.id)===Re.id,onClick:()=>oi(Re),color:(le==null?void 0:le.commStyle)===Re.id?"#3B82F6":void 0},Re.id))})]}):e.jsx(Gn,{});case 4:return w?e.jsxs("div",{style:{marginTop:"20px",...we},children:[(le==null?void 0:le.methodology)&&e.jsx(De,{label:((bt=w.methodologies.find(Re=>Re.id===le.methodology))==null?void 0:bt.label)||le.methodology}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:w.methodologies.map(Re=>e.jsx(Cs,{label:Re.label,subtitle:Re.description,selected:(U==null?void 0:U.id)===Re.id,onClick:()=>Dr(Re),color:(le==null?void 0:le.methodology)===Re.id?"#3B82F6":void 0},Re.id))})]}):e.jsx(Gn,{});case 5:return w?e.jsxs("div",{style:{marginTop:"20px",...we},children:[V.length>0&&e.jsx(Um,{items:V}),["files","system","search","web","agents"].map(Re=>{const ot=w.tools.filter(nt=>nt.category===Re);return ot.length===0?null:e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:q.tm,textTransform:"uppercase",letterSpacing:"0.06em"},children:Re}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"6px"},children:ot.map(nt=>e.jsx(Cs,{label:nt.label,subtitle:nt.description,multi:!0,selected:V.includes(nt.id),onClick:()=>{de(gr=>gr.includes(nt.id)?gr.filter(sa=>sa!==nt.id):[...gr,nt.id])}},nt.id))})]},Re)}),e.jsx(Vm,{disabled:V.length===0,onClick:Ur,label:"Valider les outils"})]}):e.jsx(Gn,{});case 6:return w?e.jsx("div",{style:{marginTop:"20px",...we},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:w.models.map(Re=>e.jsx(Cs,{label:Re.label,subtitle:Re.description,selected:(J==null?void 0:J.id)===Re.id,onClick:()=>ai(Re)},Re.id))})}):e.jsx(Gn,{});case 7:return w?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"20px",...we},children:w.autonomyLevels.map(Re=>e.jsx(Cs,{label:Re.label,subtitle:Re.description,selected:(M==null?void 0:M.id)===Re.id,onClick:()=>Xi(Re)},Re.id))}):e.jsx(Gn,{});case 8:return e.jsx("div",{style:{marginTop:"24px",...we},children:m?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"20px",backgroundColor:q.surface,borderRadius:"10px",border:`1px solid ${q.violetM}`},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:q.violetG,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Jd,{size:16,color:q.violet,style:{animation:"quillWrite 1s ease-in-out infinite"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:q.tp,fontWeight:500},children:"L'IA compose votre agent..."}),e.jsx("div",{style:{fontSize:"11px",color:q.tm,marginTop:"4px"},children:"Optimisation de la matrice comportementale"})]}),e.jsx(bn,{size:16,color:q.violet,style:{animation:"spin 1s linear infinite",marginLeft:"auto"}})]}):e.jsxs("button",{onClick:Mr,style:{backgroundColor:q.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 32px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:q.font,boxShadow:`0 0 24px ${q.violetG}`,transition:"all 0.2s"},onMouseOver:Re=>Re.currentTarget.style.transform="scale(1.02)",onMouseOut:Re=>Re.currentTarget.style.transform="scale(1)",children:[e.jsx(Ft,{size:16})," Lancer l'amlioration IA"]})});case 9:return e.jsx("div",{style:{marginTop:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",...we},children:_?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"14px",padding:"32px",backgroundColor:q.surface,borderRadius:"12px",border:`1px solid ${q.violetM}`,animation:"fadeInUp 0.5s ease",width:"100%"},children:[le!=null&&le.profileImageUrl?e.jsx("img",{src:le.profileImageUrl,alt:g,style:{width:"64px",height:"64px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${q.success}`,boxShadow:`0 0 20px ${q.success}30`}}):e.jsx("div",{style:{width:56,height:56,borderRadius:"50%",backgroundColor:`${q.success}22`,border:`2px solid ${q.success}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:28,color:q.success})}),e.jsxs("span",{style:{fontSize:"15px",color:q.tp,fontWeight:600},children:[g," est n"]}),e.jsxs("span",{style:{fontSize:"12px",color:q.ts,textAlign:"center",maxWidth:"280px",lineHeight:"1.6"},children:[X.length," comptences connectes. La constellation se forme..."]}),X.length>0&&e.jsxs("div",{style:{width:"100%",maxWidth:"460px",minHeight:"360px",marginTop:"8px",borderRadius:"12px",border:`1px solid ${q.border}`,backgroundColor:"#0a0a0a",position:"relative",overflow:"hidden",marginLeft:"auto",marginRight:"auto"},children:[e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`radial-gradient(${q.border} 1px, transparent 1px)`,backgroundSize:"24px 24px",opacity:.4,pointerEvents:"none"}}),e.jsx(G6,{agentName:g,roleLabel:(R==null?void 0:R.label)||"",skills:X,onComplete:()=>Z(!0)})]}),Me&&e.jsxs("button",{onClick:()=>t(`/agents/${(ve==null?void 0:ve.name)||g.toLowerCase().replace(/\s+/g,"-")}`),style:{backgroundColor:q.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"12px 28px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:q.font,boxShadow:`0 0 24px ${q.violetG}`,transition:"all 0.2s",animation:"fadeInUp 0.5s ease"},onMouseOver:Re=>Re.currentTarget.style.transform="scale(1.03)",onMouseOut:Re=>Re.currentTarget.style.transform="scale(1)",children:[e.jsx(Ft,{size:15})," Dcouvrir ",g]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:vr,disabled:l,style:{backgroundColor:q.violet,color:"#fff",border:"none",borderRadius:"10px",padding:"14px 36px",fontSize:"15px",fontWeight:600,cursor:l?"wait":"pointer",display:"flex",alignItems:"center",gap:"10px",fontFamily:q.font,boxShadow:`0 0 30px ${q.violetG}`,transition:"all 0.2s"},onMouseOver:Re=>{l||(Re.currentTarget.style.transform="scale(1.03)")},onMouseOut:Re=>Re.currentTarget.style.transform="scale(1)",children:l?e.jsxs(e.Fragment,{children:[e.jsx(bn,{size:18,style:{animation:"spin 1s linear infinite"}})," Cration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{size:18})," Crer ",g]})}),d&&e.jsx("span",{style:{fontSize:"12px",color:q.danger},children:d})]})});default:return null}}const ft=wu.length,At=li(),nr=Ie!==null&&Ie!=="oauth-headline"&&!(Ie==="linkedin"&&Ze!=="done");return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 56px)",backgroundColor:q.bg,color:q.tp,fontFamily:q.font,overflow:"hidden"},children:[e.jsx("style",{children:U6}),nr&&e.jsx("div",{style:{flex:"0 0 56px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"16px",paddingBottom:"16px",borderRight:`1px solid ${q.border}`,background:`linear-gradient(180deg, ${q.surface} 0%, ${q.bg} 100%)`,overflowY:"auto",overflowX:"hidden",scrollbarWidth:"none"},children:wu.map((we,rt)=>{const vt=o===rt,bt=o>rt,Re=o<rt,ot=we.Icon,nt=At[rt];return e.jsxs($s.Fragment,{children:[rt>0&&e.jsx("div",{style:{width:"2px",height:"12px",flexShrink:0,background:bt?`linear-gradient(180deg, ${q.violet}, ${q.violet}80)`:q.border,borderRadius:"1px",transformOrigin:"top",animation:bt?"phaseLineGrow 0.4s ease-out forwards":"none"}}),e.jsx("div",{title:`${we.label}${nt?`  ${nt}`:""}`,style:{width:vt?"34px":"30px",height:vt?"34px":"30px",borderRadius:"50%",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"default",background:bt?q.violet:vt?q.surfaceEl:q.surface,border:`2px solid ${bt||vt?q.violet:q.border}`,transition:"all 0.4s cubic-bezier(0.34,1.56,0.64,1)",animation:vt?"phasePulse 2s ease-in-out infinite":"none",boxShadow:vt?`0 0 16px ${q.violetG}`:bt?"0 0 8px rgba(139,92,246,0.15)":"none"},children:bt?e.jsx(rr,{size:14,color:"#fff",strokeWidth:3}):e.jsx(ot,{size:14,color:vt?q.violet:Re?q.tm:q.ts})})]},we.id)})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse 60% 50% at 50% 30%, rgba(139,92,246,0.04) 0%, transparent 70%)"}}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%",padding:"0 64px",position:"relative",zIndex:1,animation:"bookGlow 6s ease-in-out infinite"},children:[e.jsxs("div",{style:{flexShrink:0,paddingTop:"32px",paddingBottom:"24px",borderBottom:`1px solid ${q.border}`,marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"100px",backgroundColor:le?"rgba(59,130,246,0.12)":q.violetG,border:`1px solid ${le?"rgba(59,130,246,0.2)":q.border}`,color:le?"#60A5FA":q.violet,fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:le?e.jsxs(e.Fragment,{children:[e.jsx(To,{size:12})," LinkedIn Import"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{size:12})," Persona Onboarding"]})}),e.jsx("div",{style:{flex:1},children:e.jsx("h1",{style:{fontSize:"22px",fontWeight:700,color:q.tp,margin:0,letterSpacing:"-0.03em"},children:"Crer votre agent personnel"})}),(le==null?void 0:le.profileImageUrl)&&Ie==="linkedin-done"&&e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:le.profileImageUrl,alt:"",style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${q.violet}`,boxShadow:`0 0 20px ${q.violetG}`}}),e.jsx("div",{style:{position:"absolute",bottom:-2,right:-2,width:12,height:12,borderRadius:"50%",backgroundColor:q.success,border:`2px solid ${q.bg}`}})]})]}),nr&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{flex:1,height:"4px",borderRadius:"100px",backgroundColor:q.surfaceEl,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${o/(ft-1)*100}%`,background:`linear-gradient(90deg, ${q.violet}, #A78BFA)`,borderRadius:"100px",boxShadow:`0 0 12px ${q.violetM}`,transition:"width 0.8s cubic-bezier(0.34,1.56,0.64,1)"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[e.jsx("span",{style:{fontSize:"11px",color:q.tp,fontWeight:600},children:(Di=wu[o])==null?void 0:Di.label}),e.jsxs("span",{style:{fontSize:"11px",color:q.tm,fontFamily:q.mono,opacity:.8},children:["[",o+1,"/",ft,"]"]})]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"8px"},children:[Ie===null?O():Ie==="oauth-headline"?re():Ie==="linkedin"&&Ze!=="done"?_e():e.jsxs(e.Fragment,{children:[pr.map((we,rt)=>e.jsx("p",{style:{margin:"0 0 10px",fontSize:"15px",lineHeight:"1.7",color:q.ts,opacity:.5,fontStyle:"italic"},children:we},rt)),e.jsxs("div",{style:{animation:"phaseReveal 0.5s ease-out forwards"},children:[e.jsxs("p",{style:{margin:"0 0 4px",fontSize:"17px",lineHeight:"1.7",color:q.tp,fontWeight:500,display:"flex",gap:o===8?"10px":"0"},children:[o===8&&e.jsx(Jd,{size:18,style:{color:q.violet,marginTop:"4px",flexShrink:0}}),e.jsx(V6,{text:Qt[o]||"",onComplete:()=>b(!1)},`step-${o}`)]}),e.jsx("div",{style:{minHeight:"220px",marginTop:"8px"},children:ct()})]},`phase-${o}`)]}),e.jsx("div",{ref:i,style:{height:"20px"}})]})]})]})]})}function Gn({text:t="Chargement..."}){return e.jsx("span",{style:{color:q.tm,fontSize:"12px",marginTop:"16px",display:"block"},children:t})}function Um({items:t}){return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",padding:"10px 12px",backgroundColor:q.violetG,borderRadius:"8px",border:`1px solid ${q.violetM}`},children:[e.jsxs("span",{style:{fontSize:"11px",color:q.violet,fontWeight:600,marginRight:"4px",lineHeight:"22px"},children:[t.length," slectionne",t.length>1?"s":""," :"]}),t.map(i=>e.jsx("span",{style:{fontSize:"11px",color:q.tp,backgroundColor:q.violetM,padding:"2px 8px",borderRadius:"100px",fontWeight:500},children:i},i))]})}function Vm({disabled:t,onClick:i,label:s}){return e.jsxs("button",{disabled:t,onClick:i,style:{backgroundColor:t?q.surfaceEl:q.tp,color:t?q.tm:q.bg,border:"none",borderRadius:"6px",padding:"10px 24px",fontSize:"12px",fontWeight:600,cursor:t?"default":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:[s," ",e.jsx(Xn,{size:14})]})}function q6({agentName:t,roleLabel:i,skills:s,selectedSkills:o,customSkills:u,onToggleSkill:S,onAddCustomSkill:b,onRemoveCustomSkill:l}){const[c,m]=L.useState(""),[v,d]=L.useState(null),y=420,_=y/2,j=y/2,w=120,h=160,p=20,f=`${-h} ${-p} ${y+h*2} ${y+p*2}`,g=[...s.map(A=>({...A,custom:!1})),...u.map(A=>({...A,custom:!0}))],C=g.length,R=g.map((A,E)=>{const B=(E*360/Math.max(C,1)-90)*(Math.PI/180),P=_+w*Math.cos(B),N=j+w*Math.sin(B),K=B+.2,U=w*.45,ee=_+U*Math.cos(K),V=j+U*Math.sin(K),de=`M ${_} ${j} Q ${ee} ${V} ${P} ${N}`,J=o.includes(A.name);return{...A,x:P,y:N,path:de,isSelected:J,index:E}});function z(){const A=c.trim();A&&(g.some(E=>E.name.toLowerCase()===A.toLowerCase())||(b({name:A,color:"#F59E0B",category:"custom",description:"Comptence personnalise"}),m("")))}return e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsxs("svg",{viewBox:f,style:{width:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"icGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),e.jsx("circle",{cx:_,cy:j,r:w,fill:"none",stroke:q.border,strokeWidth:"1",strokeDasharray:"4 6",opacity:"0.5"}),R.map((A,E)=>e.jsx("path",{d:A.path,fill:"none",stroke:A.isSelected?A.color||q.violet:q.border,strokeWidth:A.isSelected?1.8:.8,strokeOpacity:A.isSelected?.5:.15,style:{transition:"all 0.5s ease"}},`ic-conn-${E}`)),R.map((A,E)=>{const B=A.x>_,P=v===E,N=A.isSelected,K=A.color||q.violet;return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all",animation:`constellationBirth 0.5s ease-out forwards ${E*80}ms`,opacity:0,transformOrigin:`${A.x}px ${A.y}px`},onMouseEnter:()=>d(E),onMouseLeave:()=>d(null),onClick:()=>A.custom&&N?l(A.name):S(A.name),children:[(N||P)&&e.jsx("circle",{cx:A.x,cy:A.y,r:"28",fill:K,fillOpacity:N?.1:.05,style:{transition:"all 0.3s"}}),e.jsx("circle",{cx:A.x,cy:A.y,r:"20",fill:N?`${K}22`:P?q.surfaceEl:q.surface,stroke:N?K:P?q.borderS:q.border,strokeWidth:N?2.5:1.5,style:{transition:"all 0.3s ease"}}),N&&e.jsx("circle",{cx:A.x,cy:A.y,r:"5",fill:K,style:{transition:"all 0.3s"}}),!N&&e.jsx("circle",{cx:A.x,cy:A.y,r:"2",fill:q.tm}),A.custom&&e.jsx("text",{x:A.x,y:A.y-24,textAnchor:"middle",fill:q.warning,style:{fontSize:"8px",fontWeight:700,fontFamily:q.mono},children:"CUSTOM"}),e.jsx("text",{x:A.x+(B?28:-28),y:A.y+1,textAnchor:B?"start":"end",fill:N?q.tp:P?q.ts:q.tm,style:{fontSize:"10px",fontWeight:N?600:400,fontFamily:q.font,transition:"all 0.2s",pointerEvents:"none"},children:A.name}),e.jsx("text",{x:A.x+(B?28:-28),y:A.y+13,textAnchor:B?"start":"end",fill:q.tm,style:{fontSize:"7px",textTransform:"uppercase",fontFamily:q.mono,letterSpacing:"0.05em",pointerEvents:"none"},children:A.category})]},`ic-n-${E}`)}),e.jsxs("g",{children:[e.jsx("circle",{cx:_,cy:j,r:"44",fill:q.violet,fillOpacity:"0.06"}),e.jsx("circle",{cx:_,cy:j,r:"38",fill:q.bg,stroke:q.violet,strokeWidth:"2.5",filter:"url(#icGlow)"}),e.jsx("text",{x:_,y:j-4,textAnchor:"middle",fill:q.tp,style:{fontSize:"13px",fontWeight:700,fontFamily:q.font},children:t}),e.jsx("text",{x:_,y:j+11,textAnchor:"middle",fill:q.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:q.mono,letterSpacing:"0.04em",opacity:.8},children:i}),e.jsx("circle",{cx:_+30,cy:j-28,r:"12",fill:q.violet}),e.jsx("text",{x:_+30,y:j-24,textAnchor:"middle",fill:"#fff",style:{fontSize:"10px",fontWeight:700,fontFamily:q.mono},children:o.length})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",marginTop:"8px"},children:[e.jsx("input",{value:c,onChange:A=>m(A.target.value),onKeyDown:A=>A.key==="Enter"&&z(),placeholder:"+ Ajouter une comptence...",style:{backgroundColor:q.surface,border:`1px solid ${q.border}`,borderRadius:"100px",padding:"8px 16px",color:q.tp,fontSize:"12px",fontFamily:q.font,outline:"none",width:"200px",transition:"border-color 0.2s"},onFocus:A=>A.target.style.borderColor=q.violet,onBlur:A=>A.target.style.borderColor=q.border}),e.jsx("button",{onClick:z,disabled:!c.trim(),style:{backgroundColor:c.trim()?q.violet:q.surfaceEl,color:"#fff",border:"none",borderRadius:"100px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c.trim()?"pointer":"default",fontSize:"16px",fontWeight:700,transition:"all 0.2s"},children:"+"})]})]})}function G6({agentName:t,roleLabel:i,skills:s=[],onComplete:o}){const c=L.useRef(o);c.current=o,L.useEffect(()=>{const v=s.length*350+1500,d=setTimeout(()=>{var y;return(y=c.current)==null?void 0:y.call(c)},v);return()=>clearTimeout(d)},[s.length]);const m=s.map((v,d)=>{const y=(d*360/s.length-90)*(Math.PI/180),_=210+150*Math.cos(y),j=210+150*Math.sin(y),w=y+.25,h=150*.5,p=210+h*Math.cos(w),f=210+h*Math.sin(w),g=`M 210 210 Q ${p} ${f} ${_} ${j}`;return{...v,x:_,y:j,path:g,delay:d*350}});return e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{viewBox:"0 0 420 420",style:{width:"70%",height:"70%",overflow:"visible"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"conGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})}),[0,1,2].map(v=>e.jsx("circle",{cx:210,cy:210,r:"80",fill:"none",stroke:q.violet,strokeWidth:"0.8",opacity:"0",style:{transformOrigin:"210px 210px",animation:`ambientRing ${3+v}s ease-out infinite ${v*1.2}s`}},`ring-${v}`)),m.map((v,d)=>e.jsx("path",{d:v.path,fill:"none",stroke:v.color||q.violet,strokeWidth:"1.5",strokeOpacity:"0.35",strokeDasharray:"300",strokeDashoffset:"300",style:{animation:`constellationDrawConn 1s ease-out forwards ${v.delay}ms`}},`conn-${d}`)),m.map((v,d)=>{const y=v.x>210;return v.y>210,e.jsxs("g",{style:{transformOrigin:`${v.x}px ${v.y}px`,opacity:0,animation:`constellationBirth 0.7s cubic-bezier(0.34,1.56,0.64,1) forwards ${v.delay+200}ms`},children:[e.jsx("circle",{cx:v.x,cy:v.y,r:"26",fill:v.color||q.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"20",fill:q.surfaceEl,stroke:v.color||q.violet,strokeWidth:"2"}),e.jsx("circle",{cx:v.x,cy:v.y,r:"4",fill:v.color||q.violet}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y-1,textAnchor:y?"start":"end",fill:q.tp,style:{fontSize:"11px",fontWeight:500,fontFamily:q.font},children:v.name}),e.jsx("text",{x:v.x+(y?28:-28),y:v.y+12,textAnchor:y?"start":"end",fill:q.tm,style:{fontSize:"8px",textTransform:"uppercase",fontFamily:q.mono,letterSpacing:"0.06em"},children:v.category})]},`sn-${d}`)}),e.jsxs("g",{style:{transformOrigin:"210px 210px",animation:"constellationBreathe 3s ease-in-out infinite"},children:[e.jsx("circle",{cx:210,cy:210,r:"48",fill:q.violet,fillOpacity:"0.05"}),e.jsx("circle",{cx:210,cy:210,r:"44",fill:q.violet,fillOpacity:"0.08"}),e.jsx("circle",{cx:210,cy:210,r:"38",fill:q.bg,stroke:q.violet,strokeWidth:"2.5",filter:"url(#conGlow)"}),e.jsx("text",{x:210,y:207,textAnchor:"middle",fill:q.tp,style:{fontSize:"14px",fontWeight:700,fontFamily:q.font,letterSpacing:"-0.01em"},children:t}),e.jsx("text",{x:210,y:223,textAnchor:"middle",fill:q.ts,style:{fontSize:"9px",textTransform:"uppercase",fontFamily:q.mono,letterSpacing:"0.05em",opacity:.8},children:i})]}),Array.from({length:10}).map((v,d)=>{const y=d*36*(Math.PI/180),_=Math.cos(y)*220,j=Math.sin(y)*220;return e.jsx("circle",{cx:210,cy:210,r:"1.5",fill:q.tp,style:{"--dx":`${_}px`,"--dy":`${j}px`,opacity:0,animation:`particleDrift ${2.5+d%3*.5}s ease-out infinite ${d*.4}s`}},`p-${d}`)})]})})}function Km({children:t}){return Xo()?t:e.jsx(c_,{to:"/login",replace:!0})}function Y6(){return e.jsx(__,{children:e.jsxs(h_,{children:[e.jsx(Vt,{path:"/preview/:projectId",element:e.jsx(D6,{})}),e.jsx(Vt,{path:"/login",element:e.jsx(A_,{})}),e.jsx(Vt,{path:"/register",element:e.jsx(z_,{})}),e.jsx(Vt,{path:"/setup-claude",element:e.jsx(Km,{children:e.jsx(L2,{})})}),e.jsxs(Vt,{path:"/",element:e.jsx(Km,{children:e.jsx(T_,{})}),children:[e.jsx(Vt,{index:!0,element:e.jsx(t6,{})}),e.jsx(Vt,{path:"marketplace",element:e.jsx(B6,{})}),e.jsx(Vt,{path:"marketplace/:name",element:e.jsx($6,{})}),e.jsx(Vt,{path:"agents",element:e.jsx(d6,{})}),e.jsx(Vt,{path:"agents/new",element:e.jsx(f6,{})}),e.jsx(Vt,{path:"agents/teams",element:e.jsx(E6,{})}),e.jsx(Vt,{path:"agents/stats",element:e.jsx(R6,{})}),e.jsx(Vt,{path:"skills",element:e.jsx(W6,{})}),e.jsx(Vt,{path:"skills/create",element:e.jsx(Hm,{})}),e.jsx(Vt,{path:"skills/:id/edit",element:e.jsx(Hm,{})}),e.jsx(Vt,{path:"agents/:name/edit",element:e.jsx(w6,{})}),e.jsx(Vt,{path:"agents/:name",element:e.jsx(v6,{})}),e.jsx(Vt,{path:"project/:id",element:e.jsx(A6,{})}),e.jsx(Vt,{path:"compare/:id",element:e.jsx(L6,{})}),e.jsx(Vt,{path:"personaboarding",element:e.jsx(K6,{})}),e.jsx(Vt,{path:"sessions",element:e.jsx(I6,{})})]})]})})}yb.createRoot(document.getElementById("root")).render(e.jsx($s.StrictMode,{children:e.jsx(Y6,{})}));
